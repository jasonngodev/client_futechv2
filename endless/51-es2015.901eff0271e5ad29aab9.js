(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{PG0K:function(e,t,i){"use strict";i.r(t),i.d(t,"SubmissionsModule",function(){return Ec});var c=i("ofXK"),n=i("VToC"),a=i("25+x"),s=i("cplz"),l=i("7dP1"),o=i("bmg4"),r=i("44PX"),d=i("K3ix"),h=i("+Cnu"),g=i("Lm2G"),u=i("hzby"),f=i("dZIy"),b=i("LPYB"),_=i("oOf3"),p=i("3Pt+"),m=i("tyNb"),v=i("piOG"),y=i("PSD3"),S=i.n(y),N=i("fXoL"),D=i("3t6R"),w=i("REEf"),x=i("1kSV"),M=i("qeeY"),E=i("sYmb");function C(e,t){if(1&e){const e=N.ic();N.hc(0,"a",34),N.rc("click",function(){N.Uc(e);const t=N.vc(),i=N.Rc(64);return t._openModal(i,null)}),N.cc(1,"i",35),N.dd(2),N.wc(3,"translate"),N.gc()}2&e&&(N.Nb(2),N.fd(" ",N.xc(3,1,"Add new")," "))}function I(e,t){1&e&&(N.hc(0,"a",36),N.cc(1,"i",37),N.dd(2),N.wc(3,"translate"),N.gc()),2&e&&(N.Nb(2),N.fd(" ",N.xc(3,1,"Submissions")," "))}function k(e,t){1&e&&N.cc(0,"i",38)}function R(e,t){1&e&&(N.fc(0),N.hc(1,"tr"),N.hc(2,"td",39),N.hc(3,"h3",40),N.dd(4),N.wc(5,"translate"),N.gc(),N.gc(),N.gc(),N.ec()),2&e&&(N.Nb(4),N.fd(" ",N.xc(5,1,"No records now!!!")," "))}function P(e,t){1&e&&N.cc(0,"img",47)}function U(e,t){1&e&&N.cc(0,"img",48)}function G(e,t){if(1&e){const e=N.ic();N.fc(0),N.hc(1,"tr"),N.hc(2,"td",24),N.dd(3),N.gc(),N.hc(4,"td",24),N.dd(5),N.gc(),N.hc(6,"td",24),N.dd(7),N.gc(),N.hc(8,"td",24),N.dd(9),N.gc(),N.hc(10,"td",24),N.bd(11,P,1,0,"img",41),N.bd(12,U,1,0,"img",42),N.gc(),N.hc(13,"td",24),N.hc(14,"a",43),N.rc("click",function(){N.Uc(e);const i=t.$implicit,c=N.vc(),n=N.Rc(64);return c._openModal(n,i)}),N.wc(15,"translate"),N.cc(16,"i",44),N.gc(),N.hc(17,"a",45),N.rc("click",function(){N.Uc(e);const i=t.$implicit;return N.vc().deleteItem(i)}),N.wc(18,"translate"),N.cc(19,"i",46),N.gc(),N.gc(),N.gc(),N.ec()}if(2&e){const e=t.$implicit,i=t.index,c=N.vc();N.Nb(3),N.fd(" ",i+1," "),N.Nb(2),N.fd(" ",e.code," "),N.Nb(2),N.fd(" ",e.name_l," "),N.Nb(2),N.fd(" ",e.name_e," "),N.Nb(2),N.Dc("ngIf",!e.is_active),N.Nb(1),N.Dc("ngIf",e.is_active),N.Nb(2),N.Ec("ngbTooltip",N.xc(15,10,"Edit")),N.Dc("disabled","Admin"===e.name_e||!c._authenService.hasPermission("DEPT","update")),N.Nb(3),N.Ec("ngbTooltip",N.xc(18,12,"Delete")),N.Dc("disabled","Admin"===e.name_e||!c._authenService.hasPermission("DEPT","delete"))}}function A(e,t){1&e&&(N.fc(0),N.hc(1,"a",72),N.cc(2,"img",73),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function O(e,t){if(1&e&&(N.hc(0,"button",74),N.dd(1),N.wc(2,"translate"),N.gc()),2&e){N.vc();const e=N.Rc(1);N.Dc("disabled",!e.valid),N.Nb(1),N.fd(" ",N.xc(2,2,"Save")," ")}}function T(e,t){if(1&e){const e=N.ic();N.hc(0,"form",49,50),N.rc("ngSubmit",function(){return N.Uc(e),N.vc().saveChange()}),N.hc(2,"div",51),N.hc(3,"h4",52),N.dd(4),N.wc(5,"translate"),N.wc(6,"translate"),N.gc(),N.hc(7,"button",53),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(8,"span",54),N.dd(9,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(10,"div",55),N.hc(11,"div",56),N.hc(12,"div",57),N.hc(13,"div",58),N.hc(14,"label",59),N.dd(15),N.wc(16,"translate"),N.hc(17,"span",40),N.dd(18,"(*)"),N.gc(),N.gc(),N.hc(19,"input",60),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.code=t})("keyup",function(){return N.Uc(e),N.vc().removeBlank()}),N.wc(20,"translate"),N.gc(),N.gc(),N.gc(),N.hc(21,"div",61),N.hc(22,"div",58),N.hc(23,"label",62),N.dd(24),N.wc(25,"translate"),N.hc(26,"span",40),N.dd(27,"(*)"),N.gc(),N.gc(),N.hc(28,"input",63),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.name_l=t}),N.wc(29,"translate"),N.wc(30,"translate"),N.gc(),N.gc(),N.gc(),N.hc(31,"div",61),N.hc(32,"div",58),N.hc(33,"input",64),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.name_e=t}),N.wc(34,"translate"),N.wc(35,"translate"),N.gc(),N.gc(),N.gc(),N.hc(36,"div",57),N.hc(37,"label",65),N.dd(38),N.wc(39,"translate"),N.gc(),N.hc(40,"div",66),N.hc(41,"input",67),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.is_active=t}),N.gc(),N.hc(42,"label",68),N.dd(43),N.wc(44,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(45,"div",69),N.hc(46,"button",70),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(47),N.wc(48,"translate"),N.gc(),N.bd(49,A,5,3,"ng-container",25),N.bd(50,O,3,4,"button",71),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(4),N.gd(" ",null==e.entity.id?N.xc(5,20,"Add new"):N.xc(6,22,"Update")," ",e._title," "),N.Nb(11),N.fd("",N.xc(16,24,"Group code")," "),N.Nb(4),N.Ec("placeholder",N.xc(20,26,"Group code")),N.Dc("ngClass",null==e.entity.id?"form-control":"form-control jdisabled")("ngModel",e.entity.code)("disabled",null!=e.entity.id),N.Nb(5),N.fd("",N.xc(25,28,"Group name")," "),N.Nb(4),N.Gc("placeholder","",N.xc(29,30,"Group name")," (",N.xc(30,32,"Vietnamese"),")"),N.Dc("ngModel",e.entity.name_l),N.Nb(5),N.Gc("placeholder","",N.xc(34,34,"Group name")," (",N.xc(35,36,"English"),")"),N.Dc("ngModel",e.entity.name_e),N.Nb(5),N.ed(N.xc(39,38,"Status")),N.Nb(3),N.Dc("ngModel",e.entity.is_active),N.Nb(2),N.ed(N.xc(44,40,e.entity.is_active?"activated":"not activated")),N.Nb(4),N.fd(" ",N.xc(48,42,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSave),N.Nb(1),N.Dc("ngIf",!e.isSave)}}let F=(()=>{class e{constructor(e,t,i,c,n,a,s,l,o){this._authenService=e,this._dataService=t,this._route=i,this._notifyService=c,this._uploadService=n,this._excelService=a,this._numberFormat=s,this.modalService=l,this._utilyService=o,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._requestslist=[],this.isSave=!1,this._title="",this.entity={}}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData()}loadData(){this._isLoading=!0,this._dataService.post("/cat-submission/getallProfiles",{page:this.pageIndex,limit:this.pageSize,filter:this._keyword,short_code:this.user.short_code}).subscribe(e=>{this._isLoading=!1,this._requestslist=e.data,this.totalRow=e.rowCount,this.totalPage=e.totalPages},()=>this._isLoading=!1)}_pageSizeChange(e){this.pageSize=e.target.value,this.loadData()}pageChanged(e){this.pageIndex=e.page,this.loadData()}removeBlank(){this.entity.code=null==this.entity.code?null:this.entity.code.replace(" ","")}_openModal(e,t){null==t?(this.entity={},this.entity.name_l=null,this.entity.name_e=null,this.entity.is_active=!0,this.entity.short_code=this.user.short_code,this._title=""):(this.entity=t,this._title=t.code),this.modalService.open(e,{size:"md",centered:!0})}saveChange(){this.isSave=!0,null==this.entity.id?(this.entity.code=this.entity.code.toUpperCase(),this._dataService.post("/cat-submission/addProfile",this.entity).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.entity={},this.entity.name_l=null,this.entity.name_e=null,this.entity.is_active=!0,this.loadData(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})):this._dataService.post("/cat-submission/updateProfile",this.entity).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_UPDATENO_EN:v.a.MSG_UPDATENO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.loadData(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"),this.modalService.dismissAll())},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}deleteItem(e){S.a.fire({title:"en"==this.user.lang?v.a.are_you_sure_en:v.a.are_you_sure,text:"en"==this.user.lang?e.name_e:e.name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.a.cancel_en:v.a.cancel,confirmButtonText:"en"==this.user.lang?v.a.confirmtext_en:v.a.confirmtext}).then(t=>{if(t.value){let t={};t.id=e.id,this._dataService.post("/cat-submission/deleteProfile",t).subscribe(e=>{"failed"!=e.result?(this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_DELETE_EN:v.a.MSG_DELETE,"OK"),this.loadData()):this._notifyService.showError("en"==this.user.lang?v.a.MSG_DELETENO_EN:v.a.MSG_DELETENO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)},()=>{this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}})}}return e.\u0275fac=function(t){return new(t||e)(N.bc(l.a),N.bc(s.a),N.bc(m.d),N.bc(D.a),N.bc(a.a),N.bc(n.a),N.bc(w.a),N.bc(x.s),N.bc(M.a))},e.\u0275cmp=N.Vb({type:e,selectors:[["app-subm-profilegroup"]],decls:65,vars:51,consts:[[1,"container-fluid"],[1,"email-wrap"],[1,"row"],[1,"col-lg-12"],[1,"email-left-aside"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-secondary mr-sm-2","routerLink","/submissions/requests",4,"ngIf"],["class","fa fa-spinner fa-spin text-primary","style","font-size: 16pt",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"custom-select","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-body"],[1,"table-responsive"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate",2,"width","15px"],[1,"text-truncate"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],["content",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"fa","fa-plus"],["routerLink","/submissions/requests",1,"btn","btn-sm","btn-secondary","mr-sm-2"],[1,"fa","fa-clipboard"],[1,"fa","fa-spinner","fa-spin","text-primary",2,"font-size","16pt"],["colspan","6",2,"text-align","center"],[1,"text-danger"],["src","../../../../assets/img/icon-no.svg",4,"ngIf"],["src","../../../../assets/img/icon-yes.svg",4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"ngbTooltip","disabled","click"],[1,"fa","fa-pencil"],[1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-trash"],["src","../../../../assets/img/icon-no.svg"],["src","../../../../assets/img/icon-yes.svg"],[1,"form","theme-form",3,"ngSubmit"],["formPG1","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","CodePG1",1,"jbold"],["type","text","id","CodePG1","name","CodePG1","required","","autocomplete","off",3,"ngClass","placeholder","ngModel","disabled","ngModelChange","keyup"],[1,"col-md-12"],["for","Name11",1,"jbold"],["type","text","id","Name11","name","Name11","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","text","id","Name11a","name","Name11a","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","StatusPG1",1,"jbold"],[1,"checkbox","checkbox-primary"],["id","StatusPG1","type","checkbox","name","StatusPG1",3,"ngModel","ngModelChange"],["for","StatusPG1"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(N.hc(0,"div",0),N.hc(1,"div",1),N.hc(2,"div",2),N.hc(3,"div",3),N.hc(4,"div",4),N.hc(5,"div",5),N.hc(6,"div",6),N.hc(7,"div",2),N.hc(8,"div",7),N.hc(9,"div",8),N.hc(10,"input",9),N.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),N.wc(11,"translate"),N.gc(),N.bd(12,C,4,3,"a",10),N.bd(13,I,4,3,"a",11),N.bd(14,k,1,0,"i",12),N.gc(),N.gc(),N.hc(15,"div",13),N.hc(16,"div",14),N.hc(17,"select",15),N.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),N.hc(18,"option",16),N.dd(19,"#10"),N.gc(),N.hc(20,"option",17),N.dd(21,"#25"),N.gc(),N.hc(22,"option",18),N.dd(23,"#50"),N.gc(),N.hc(24,"option",19),N.dd(25,"#100"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(26,"div",20),N.hc(27,"div",21),N.hc(28,"table",22),N.hc(29,"thead"),N.hc(30,"th",23),N.dd(31,"#"),N.gc(),N.hc(32,"th",24),N.dd(33),N.wc(34,"translate"),N.gc(),N.hc(35,"th",24),N.dd(36),N.wc(37,"translate"),N.wc(38,"translate"),N.gc(),N.hc(39,"th",24),N.dd(40),N.wc(41,"translate"),N.wc(42,"translate"),N.gc(),N.hc(43,"th",24),N.dd(44),N.wc(45,"translate"),N.gc(),N.hc(46,"th",24),N.dd(47),N.wc(48,"translate"),N.gc(),N.gc(),N.hc(49,"tbody"),N.bd(50,R,6,3,"ng-container",25),N.bd(51,G,20,14,"ng-container",26),N.gc(),N.gc(),N.gc(),N.hc(52,"div",27),N.hc(53,"div",28),N.hc(54,"div",29),N.hc(55,"pagination",30),N.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),N.gc(),N.gc(),N.hc(56,"div",31),N.hc(57,"a",32),N.dd(58),N.wc(59,"translate"),N.wc(60,"translate"),N.wc(61,"translate"),N.wc(62,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.bd(63,T,51,44,"ng-template",null,33,N.cd)),2&e&&(N.Nb(10),N.Dc("placeholder",N.xc(11,27,"Search"))("ngModel",t._keyword),N.Nb(2),N.Dc("ngIf",t._authenService.hasPermission("DEPT","read")),N.Nb(1),N.Dc("ngIf",t._authenService.hasPermission("DEPT","read")),N.Nb(1),N.Dc("ngIf",t._isLoading),N.Nb(3),N.Dc("ngModel",t.pageSize),N.Nb(16),N.fd(" ",N.xc(34,29,"Code")," "),N.Nb(3),N.gd(" ",N.xc(37,31,"Group name")," (",N.xc(38,33,"Vietnamese"),") "),N.Nb(4),N.gd(" ",N.xc(41,35,"Group name")," (",N.xc(42,37,"English"),") "),N.Nb(4),N.fd(" ",N.xc(45,39,"Status")," "),N.Nb(3),N.fd(" ",N.xc(48,41,"Actions")," "),N.Nb(3),N.Dc("ngIf",0==t._requestslist.length),N.Nb(1),N.Dc("ngForOf",t._requestslist),N.Nb(4),N.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),N.Nb(3),N.id("",N.xc(59,43,"Total of records"),": ",t.totalRow," - ",N.xc(60,45,"Page")," ",t.pageIndex," ",N.xc(61,47,"of")," ",t.totalPage," ",N.xc(62,49,"page"),""))},directives:[p.c,p.n,p.q,c.q,p.x,p.r,p.A,c.p,g.a,m.g,x.N,p.z,p.o,p.p,p.w,c.o,p.b],pipes:[E.c],styles:[""]}),e})();var j=i("gFX4"),z=i.n(j),$=i("CMKA"),B=i("5JmO"),q=i.n(B),L=i("TruH"),K=i.n(L),H=i("jhN1"),V=i("ZOsW"),Y=i("tmjD"),W=i("eLGb"),Q=i("VXpv"),X=i("IkSl");const J=["ckeEditor"],Z=["ckeEditor1"],ee=["combo"],te=["attached_file"],ie=["attached_file1"];function ce(e,t){1&e&&(N.hc(0,"div",37),N.hc(1,"button",38),N.cc(2,"i",39),N.dd(3),N.wc(4,"translate"),N.gc(),N.hc(5,"div",40),N.hc(6,"a",41),N.cc(7,"i",42),N.dd(8),N.wc(9,"translate"),N.gc(),N.hc(10,"a",43),N.cc(11,"i",44),N.dd(12),N.wc(13,"translate"),N.gc(),N.hc(14,"a",45),N.cc(15,"i",46),N.dd(16),N.wc(17,"translate"),N.gc(),N.hc(18,"a",47),N.cc(19,"i",48),N.dd(20),N.wc(21,"translate"),N.gc(),N.gc(),N.gc()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,5,"Category")," "),N.Nb(5),N.fd(" ",N.xc(9,7,"Type of profile")," "),N.Nb(4),N.fd(" ",N.xc(13,9,"Profile group")," "),N.Nb(4),N.fd(" ",N.xc(17,11,"Type of document")," "),N.Nb(4),N.fd(" ",N.xc(21,13,"Manager Unit")," "))}function ne(e,t){1&e&&(N.fc(0),N.hc(1,"tr"),N.hc(2,"td",49),N.hc(3,"h3",50),N.dd(4),N.wc(5,"translate"),N.gc(),N.gc(),N.gc(),N.ec()),2&e&&(N.Nb(4),N.fd(" ",N.xc(5,1,"No records now!!!")," "))}function ae(e,t){1&e&&(N.hc(0,"span",59),N.cc(1,"i",60),N.gc())}function se(e,t){if(1&e&&(N.hc(0,"li"),N.dd(1),N.bd(2,ae,2,0,"span",53),N.cc(3,"br"),N.hc(4,"small",52),N.dd(5),N.gc(),N.gc()),2&e){const e=t.$implicit,i=t.index,c=N.vc(2);N.Nb(1),N.gd(" ",i+1,".",e.user.name," "),N.Nb(1),N.Dc("ngIf",e.show),N.Nb(3),N.ed("en"==c.user.lang?e.user.dept_name_e:e.user.dept_name_l)}}function le(e,t){1&e&&(N.hc(0,"span",59),N.cc(1,"i",60),N.gc())}function oe(e,t){if(1&e&&(N.fc(0),N.dd(1),N.wc(2,"date"),N.ec()),2&e){const e=N.vc().$implicit;N.Nb(1),N.fd("",N.yc(2,1,e.logs.timestamp,"dd/MM/yyyy HH:mm a")," ")}}function re(e,t){1&e&&(N.hc(0,"span",61),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Draft")))}function de(e,t){1&e&&(N.hc(0,"span",62),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Processing")))}function he(e,t){1&e&&(N.hc(0,"span",63),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Recall")))}function ge(e,t){1&e&&(N.hc(0,"span",64),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Completed")))}function ue(e,t){1&e&&(N.hc(0,"span",65),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Cancel")))}function fe(e,t){if(1&e){const e=N.ic();N.fc(0),N.hc(1,"tr",51),N.rc("click",function(){N.Uc(e);const i=t.$implicit,c=N.vc(),n=N.Rc(83);return c._openModal(n,i)}),N.hc(2,"td",26),N.dd(3),N.gc(),N.hc(4,"td",26),N.dd(5),N.cc(6,"br"),N.hc(7,"small",52),N.dd(8),N.wc(9,"translate"),N.gc(),N.gc(),N.hc(10,"td",26),N.dd(11),N.wc(12,"date"),N.cc(13,"br"),N.hc(14,"small",52),N.dd(15),N.wc(16,"translate"),N.gc(),N.gc(),N.hc(17,"td",26),N.hc(18,"ul"),N.bd(19,se,6,4,"li",28),N.gc(),N.gc(),N.hc(20,"td",26),N.dd(21),N.bd(22,le,2,0,"span",53),N.cc(23,"br"),N.hc(24,"small",52),N.dd(25),N.gc(),N.gc(),N.hc(26,"td",26),N.bd(27,oe,3,4,"ng-container",27),N.gc(),N.hc(28,"td",26),N.bd(29,re,3,3,"span",54),N.bd(30,de,3,3,"span",55),N.bd(31,he,3,3,"span",56),N.bd(32,ge,3,3,"span",57),N.bd(33,ue,3,3,"span",58),N.gc(),N.gc(),N.ec()}if(2&e){const e=t.$implicit,i=t.index,c=N.vc();N.Nb(3),N.fd(" ",i+1," "),N.Nb(2),N.fd(" ",e.title,""),N.Nb(3),N.gd("",N.xc(9,17,"Code"),": ",e.code,""),N.Nb(3),N.fd(" ",N.yc(12,19,e.timestamp,"dd/MM/yyyy HH:mm"),""),N.Nb(4),N.gd("",N.xc(16,22,"Created by"),": ",e.name,""),N.Nb(4),N.Dc("ngForOf",e.reviews),N.Nb(2),N.fd(" ",e.approve.user.name," "),N.Nb(1),N.Dc("ngIf",e.approve.show),N.Nb(3),N.ed("en"==c.user.lang?e.approve.user.dept_name_e:e.approve.user.dept_name_l),N.Nb(2),N.Dc("ngIf",null!=e.logs),N.Nb(2),N.Dc("ngIf",0==e.is_active),N.Nb(1),N.Dc("ngIf",1==e.is_active),N.Nb(1),N.Dc("ngIf",2==e.is_active),N.Nb(1),N.Dc("ngIf",3==e.is_active),N.Nb(1),N.Dc("ngIf",4==e.is_active)}}function be(e,t){if(1&e){const e=N.ic();N.hc(0,"button",74),N.rc("click",function(){return N.Uc(e),N.vc(2)._chooseButton(2)}),N.dd(1),N.wc(2,"translate"),N.gc()}if(2&e){const e=N.vc(2);N.Dc("ngClass",2==e._flagButton?"btn btn-sm btn-secondary":"btn btn-sm btn-primary"),N.Nb(1),N.fd(" ",N.xc(2,2,"Timeline")," ")}}function _e(e,t){if(1&e){const e=N.ic();N.hc(0,"button",74),N.rc("click",function(){return N.Uc(e),N.vc(2)._chooseButton(3)}),N.cc(1,"i",80),N.dd(2),N.wc(3,"translate"),N.gc()}if(2&e){const e=N.vc(2);N.Dc("ngClass",3==e._flagButton?"btn btn-sm btn-secondary":"btn btn-sm btn-primary"),N.Nb(2),N.fd(" ",N.xc(3,2,"History")," ")}}function pe(e,t){if(1&e){const e=N.ic();N.hc(0,"button",74),N.rc("click",function(){return N.Uc(e),N.vc(2)._chooseButton(4)}),N.cc(1,"i",81),N.dd(2),N.wc(3,"translate"),N.gc()}if(2&e){const e=N.vc(2);N.Dc("ngClass",4==e._flagButton?"btn btn-sm btn-secondary":"btn btn-sm btn-primary"),N.Nb(2),N.fd(" ",N.xc(3,2,"Comments")," ")}}function me(e,t){if(1&e){const e=N.ic();N.fc(0),N.dd(1,"- "),N.hc(2,"a",116),N.rc("click",function(){N.Uc(e);const t=N.vc(3),i=N.Rc(85);return t._popupProfile(i,null)}),N.cc(3,"i",15),N.gc(),N.ec()}}function ve(e,t){if(1&e&&(N.hc(0,"div",117),N.dd(1),N.wc(2,"slice"),N.gc()),2&e){const e=t.item;N.Dc("ngbTooltip",e.title.length>25?e.title:""),N.Nb(1),N.fd(" ",e.title.length>25?N.zc(2,2,e.title,0,20)+"..":e.title," ")}}function ye(e,t){if(1&e){const e=N.ic();N.hc(0,"input",118),N.rc("change",function(t){return N.Uc(e),N.vc(3).toggleCheckAll(t)}),N.gc(),N.dd(1),N.wc(2,"translate")}if(2&e){const e=N.vc(3);N.Dc("ngModel",e.checkAllIDs),N.Nb(1),N.fd(" ",N.xc(2,2,"Choose all")," ")}}function Se(e,t){if(1&e){const e=N.ic();N.hc(0,"div",121),N.hc(1,"span",122),N.dd(2),N.gc(),N.hc(3,"span",123),N.rc("click",function(){N.Uc(e);const i=t.$implicit;return(0,N.vc().clear)(i)}),N.dd(4,"\xd7"),N.gc(),N.gc()}if(2&e){const e=t.$implicit;N.Nb(2),N.gd("",e.name,"",e.login,"")}}function Ne(e,t){if(1&e&&(N.hc(0,"div",121),N.hc(1,"span",122),N.dd(2),N.wc(3,"translate"),N.gc(),N.gc()),2&e){const e=N.vc().items;N.Nb(2),N.gd("",e.length-2," ",N.xc(3,2,"more"),"...")}}function De(e,t){if(1&e&&(N.bd(0,Se,5,2,"div",119),N.wc(1,"slice"),N.bd(2,Ne,4,4,"div",120)),2&e){const e=t.items;N.Dc("ngForOf",N.zc(1,2,e,0,2)),N.Nb(2),N.Dc("ngIf",e.length>2)}}function we(e,t){if(1&e&&(N.cc(0,"input",124),N.dd(1)),2&e){const e=t.item,i=t.item$;N.Fc("id","item-",t.index,""),N.Dc("checked",i.selected),N.Nb(1),N.fd(" ",e.name," ")}}function xe(e,t){if(1&e){const e=N.ic();N.fc(0),N.hc(1,"ck-editor",125,126),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc(3).entity.content=t})("change",function(){N.Uc(e);const t=N.vc(3);return 0==t.entity.is_active&&null!=t.entity.id?t.updateSubmissionChanges():null}),N.gc(),N.ec()}if(2&e){const e=N.vc(3);N.Nb(1),N.Dc("ngModel",e.entity.content)("fullPage",!0)("config",e.ckEditorConfig)}}function Me(e,t){if(1&e&&N.cc(0,"p",127),2&e){const e=N.vc(3);N.Dc("innerHtml",e._displayContent,N.Vc)}}function Ee(e,t){if(1&e){const e=N.ic();N.fc(0),N.dd(1,"- "),N.hc(2,"a",128),N.rc("click",function(){N.Uc(e);const t=N.vc(3),i=N.Rc(95);return t.openViewDoc(i,t._originFile)}),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()}2&e&&(N.Nb(3),N.ed(N.xc(4,1,"Download file")))}function Ce(e,t){if(1&e){const e=N.ic();N.hc(0,"input",129,130),N.rc("change",function(t){N.Uc(e);const i=N.Rc(1);return N.vc(3).fileEvent(t,i)}),N.gc()}}function Ie(e,t){if(1&e){const e=N.ic();N.hc(0,"i",133),N.rc("click",function(){N.Uc(e);const t=N.vc(4);return t.removeAttachment(t.entity.id,t.entity.attached_file,0)}),N.gc()}}function ke(e,t){if(1&e){const e=N.ic();N.hc(0,"div",113),N.hc(1,"img",131),N.rc("click",function(){N.Uc(e);const t=N.vc(3),i=N.Rc(95);return t.openViewDoc(i,t._originFile)}),N.gc(),N.hc(2,"span",59),N.bd(3,Ie,1,0,"i",132),N.gc(),N.gc()}if(2&e){const e=N.vc(3);N.Nb(3),N.Dc("ngIf",0==e.entity.is_active)}}function Re(e,t){if(1&e){const e=N.ic();N.hc(0,"input",134,135),N.rc("change",function(t){N.Uc(e);const i=N.Rc(1);return N.vc(3).fileEventMore(t,i)}),N.gc()}}function Pe(e,t){if(1&e){const e=N.ic();N.hc(0,"span",137),N.hc(1,"i",133),N.rc("click",function(){N.Uc(e);const t=N.vc().$implicit,i=N.vc(3);return i.removeAttachment(i.entity.id,t,1)}),N.gc(),N.gc()}}function Ue(e,t){if(1&e){const e=N.ic();N.fc(0),N.hc(1,"img",131),N.rc("click",function(){N.Uc(e);const t=N.vc(3),i=N.Rc(95);return t.openViewDoc(i,t._originFile)}),N.gc(),N.bd(2,Pe,2,0,"span",136),N.ec()}if(2&e){const e=N.vc(3);N.Nb(2),N.Dc("ngIf",0==e.entity.is_active)}}function Ge(e,t){if(1&e&&(N.hc(0,"span"),N.dd(1),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.ed(e.order)}}function Ae(e,t){if(1&e){const e=N.ic();N.hc(0,"input",141),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().$implicit.order=t})("change",function(){N.Uc(e);const t=N.vc(4);return 0==t.entity.is_active&&null!=t.entity.id?t.updateSubmissionChanges():null}),N.gc()}if(2&e){const e=N.vc(),t=e.index,i=e.$implicit;N.Fc("name","orderno",t+1,""),N.Fc("id","orderno",t+1,""),N.Dc("ngModel",i.order)}}function Oe(e,t){1&e&&(N.hc(0,"span",59),N.cc(1,"i",60),N.gc())}function Te(e,t){if(1&e&&(N.hc(0,"span"),N.dd(1),N.bd(2,Oe,2,0,"span",53),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.fd("",e.user.name," "),N.Nb(1),N.Dc("ngIf",e.show)}}function Fe(e,t){if(1&e){const e=N.ic();N.fc(0),N.hc(1,"nz-tree-select",142),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc(4)._selectUser=t})("ngModelChange",function(){N.Uc(e);const t=N.vc().$implicit,i=N.vc(3);return i._getUserNew(t,i._selectUser)}),N.wc(2,"translate"),N.gc(),N.ec()}if(2&e){const e=N.vc(4);N.Nb(1),N.Ec("nzPlaceHolder",N.xc(2,4,"Please choose")),N.Dc("nzExpandedKeys",e.expandKeys1)("nzNodes",e._getusers)("ngModel",e._selectUser)}}function je(e,t){if(1&e&&(N.fc(0),N.dd(1),N.cc(2,"br"),N.hc(3,"small",52),N.dd(4),N.gc(),N.ec()),2&e){const e=N.vc().$implicit,t=N.vc(3);N.Nb(1),N.fd(" ","en"==t.user.lang?e.user.title_name_e:e.user.title_name_l,""),N.Nb(3),N.ed("en"==t.user.lang?e.user.dept_name_e:e.user.dept_name_l)}}function ze(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Only view")))}function $e(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Passed signature")))}function Be(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Reviewed signature")))}function qe(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Approved signature")))}function Le(e,t){if(1&e&&(N.fc(0),N.bd(1,ze,3,3,"span",27),N.bd(2,$e,3,3,"span",27),N.bd(3,Be,3,3,"span",27),N.bd(4,qe,3,3,"span",27),N.ec()),2&e){const e=N.vc().$implicit;N.Nb(1),N.Dc("ngIf",0==e.role),N.Nb(1),N.Dc("ngIf",1==e.role),N.Nb(1),N.Dc("ngIf",2==e.role),N.Nb(1),N.Dc("ngIf",3==e.role)}}function Ke(e,t){if(1&e){const e=N.ic();N.hc(0,"select",143),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().$implicit.role=t})("change",function(){N.Uc(e);const t=N.vc(4);return 0==t.entity.is_active&&null!=t.entity.id?t.updateSubmissionChanges():null}),N.hc(1,"option",91),N.dd(2),N.wc(3,"translate"),N.gc(),N.hc(4,"option",92),N.dd(5),N.wc(6,"translate"),N.gc(),N.hc(7,"option",93),N.dd(8),N.wc(9,"translate"),N.gc(),N.hc(10,"option",94),N.dd(11),N.wc(12,"translate"),N.gc(),N.gc()}if(2&e){const e=N.vc(),t=e.$implicit;N.Fc("name","r",e.index+1,""),N.Dc("ngModel",t.role),N.Nb(2),N.ed(N.xc(3,6,"Only view")),N.Nb(3),N.fd(" ",N.xc(6,8,"Passed signature")," "),N.Nb(3),N.fd(" ",N.xc(9,10,"Reviewed signature")," "),N.Nb(3),N.fd(" ",N.xc(12,12,"Approved signature")," ")}}function He(e,t){if(1&e&&(N.hc(0,"span"),N.dd(1),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.ed(e.time)}}function Ve(e,t){if(1&e){const e=N.ic();N.hc(0,"input",141),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().$implicit.time=t})("change",function(){N.Uc(e);const t=N.vc(4);return 0==t.entity.is_active&&null!=t.entity.id?t.updateSubmissionChanges():null}),N.gc()}if(2&e){const e=N.vc(),t=e.index,i=e.$implicit;N.Fc("name","timer",t+1,""),N.Fc("id","timer",t+1,""),N.Dc("ngModel",i.time)}}function Ye(e,t){if(1&e){const e=N.ic();N.hc(0,"a",144),N.rc("click",function(){N.Uc(e);const t=N.vc().$implicit;return N.vc(3).removeItemNew(t)}),N.cc(1,"i",145),N.gc()}}function We(e,t){if(1&e&&(N.hc(0,"tr"),N.hc(1,"td",26),N.bd(2,Ge,2,1,"span",27),N.bd(3,Ae,1,3,"input",138),N.gc(),N.hc(4,"td",26),N.bd(5,Te,3,2,"span",27),N.bd(6,Fe,3,6,"ng-container",27),N.gc(),N.hc(7,"td",26),N.bd(8,je,5,2,"ng-container",27),N.gc(),N.hc(9,"td",26),N.bd(10,Le,5,4,"ng-container",27),N.bd(11,Ke,13,14,"select",139),N.gc(),N.hc(12,"td",26),N.bd(13,He,2,1,"span",27),N.bd(14,Ve,1,3,"input",138),N.gc(),N.hc(15,"td",26),N.bd(16,Ye,2,0,"a",140),N.gc(),N.gc()),2&e){const e=t.$implicit,i=N.vc(3);N.Nb(2),N.Dc("ngIf",0!=i.entity.is_active),N.Nb(1),N.Dc("ngIf",0==i.entity.is_active),N.Nb(2),N.Dc("ngIf",e.flag||null!=e.user),N.Nb(1),N.Dc("ngIf",null==e.user),N.Nb(2),N.Dc("ngIf",null!=e.user),N.Nb(2),N.Dc("ngIf",e.flag),N.Nb(1),N.Dc("ngIf",!e.flag),N.Nb(2),N.Dc("ngIf",e.flag),N.Nb(1),N.Dc("ngIf",!e.flag),N.Nb(2),N.Dc("ngIf",!e.allow)}}function Qe(e,t){if(1&e){const e=N.ic();N.hc(0,"tfoot"),N.hc(1,"tr"),N.cc(2,"td",146),N.hc(3,"td",26),N.hc(4,"a",147),N.rc("click",function(){return N.Uc(e),N.vc(3).addItemNew()}),N.cc(5,"i",15),N.gc(),N.gc(),N.gc(),N.gc()}}function Xe(e,t){if(1&e){const e=N.ic();N.fc(0),N.hc(1,"div",82),N.hc(2,"label",83),N.dd(3),N.wc(4,"translate"),N.hc(5,"span",50),N.dd(6,"(*)"),N.gc(),N.gc(),N.hc(7,"input",84),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc(2).entity.title=t})("change",function(){N.Uc(e);const t=N.vc(2);return 0==t.entity.is_active&&null!=t.entity.id?t.updateSubmissionChanges():null}),N.gc(),N.gc(),N.hc(8,"div",82),N.hc(9,"label",85),N.dd(10),N.wc(11,"translate"),N.hc(12,"span",50),N.dd(13,"(*)"),N.gc(),N.bd(14,me,4,0,"ng-container",27),N.gc(),N.hc(15,"ng-select",86),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc(2).entity.profile_cat_id=t})("change",function(){N.Uc(e);const t=N.vc(2);return t._diagramChange(t.entity.profile_cat_id)}),N.wc(16,"translate"),N.wc(17,"translate"),N.bd(18,ve,3,6,"ng-template",87),N.gc(),N.gc(),N.hc(19,"div",88),N.hc(20,"label",89),N.dd(21),N.wc(22,"translate"),N.gc(),N.hc(23,"select",90),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc(2).entity.critical_level=t})("change",function(){N.Uc(e);const t=N.vc(2);return 0==t.entity.is_active&&null!=t.entity.id?t.updateSubmissionChanges():null}),N.hc(24,"option",91),N.dd(25),N.wc(26,"translate"),N.gc(),N.hc(27,"option",92),N.dd(28),N.wc(29,"translate"),N.gc(),N.hc(30,"option",93),N.dd(31),N.wc(32,"translate"),N.gc(),N.hc(33,"option",94),N.dd(34),N.wc(35,"translate"),N.gc(),N.gc(),N.gc(),N.hc(36,"div",88),N.hc(37,"label",95),N.dd(38),N.wc(39,"translate"),N.gc(),N.hc(40,"select",96),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc(2).entity.priority_level=t})("change",function(){N.Uc(e);const t=N.vc(2);return 0==t.entity.is_active&&null!=t.entity.id?t.updateSubmissionChanges():null}),N.hc(41,"option",91),N.dd(42),N.wc(43,"translate"),N.gc(),N.hc(44,"option",92),N.dd(45),N.wc(46,"translate"),N.gc(),N.hc(47,"option",93),N.dd(48),N.wc(49,"translate"),N.gc(),N.hc(50,"option",94),N.dd(51),N.wc(52,"translate"),N.gc(),N.gc(),N.gc(),N.hc(53,"div",97),N.hc(54,"label",98),N.dd(55),N.wc(56,"translate"),N.gc(),N.hc(57,"ng-select",99,100),N.rc("blur",function(){return N.Uc(e),N.vc(2).onTouched()})("change",function(){N.Uc(e);const t=N.vc(2);return 0==t.entity.is_active&&null!=t.entity.id?t.updateSubmissionChanges():null}),N.wc(59,"translate"),N.wc(60,"translate"),N.bd(61,ye,3,4,"ng-template",101),N.bd(62,De,3,6,"ng-template",102),N.bd(63,we,2,3,"ng-template",87),N.gc(),N.gc(),N.hc(64,"div",82),N.hc(65,"label",103),N.dd(66),N.wc(67,"translate"),N.gc(),N.hc(68,"input",104),N.rc("change",function(){N.Uc(e);const t=N.vc(2);return 0==t.entity.is_active&&null!=t.entity.id?t.updateSubmissionChanges():null})("ngModelChange",function(t){return N.Uc(e),N.vc(2).entity.estimated_cost=t}),N.gc(),N.gc(),N.hc(69,"div",73),N.hc(70,"label",105),N.dd(71),N.wc(72,"translate"),N.gc(),N.bd(73,xe,3,3,"ng-container",27),N.bd(74,Me,1,1,"p",106),N.gc(),N.hc(75,"div",73),N.hc(76,"label",107),N.dd(77),N.wc(78,"translate"),N.bd(79,Ee,5,3,"ng-container",27),N.gc(),N.bd(80,Ce,2,0,"input",108),N.hc(81,"input",109),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc(2).entityUpload.fileUpload=t}),N.gc(),N.bd(82,ke,4,1,"div",110),N.gc(),N.hc(83,"div",73),N.hc(84,"label",111),N.dd(85),N.wc(86,"translate"),N.gc(),N.bd(87,Re,2,0,"input",112),N.hc(88,"div",113),N.bd(89,Ue,3,1,"ng-container",28),N.gc(),N.gc(),N.hc(90,"div",73),N.hc(91,"label",114),N.dd(92),N.wc(93,"translate"),N.gc(),N.hc(94,"div",23),N.hc(95,"table",115),N.hc(96,"thead"),N.hc(97,"th",26),N.dd(98),N.wc(99,"translate"),N.gc(),N.hc(100,"th",26),N.dd(101),N.wc(102,"translate"),N.gc(),N.hc(103,"th",26),N.dd(104),N.wc(105,"translate"),N.gc(),N.hc(106,"th",26),N.dd(107),N.wc(108,"translate"),N.gc(),N.hc(109,"th",26),N.dd(110),N.wc(111,"translate"),N.gc(),N.hc(112,"th",26),N.dd(113),N.wc(114,"translate"),N.gc(),N.gc(),N.hc(115,"tbody"),N.bd(116,We,17,10,"tr",28),N.gc(),N.bd(117,Qe,6,0,"tfoot",27),N.gc(),N.gc(),N.gc(),N.ec()}if(2&e){const e=N.vc(2);N.Nb(3),N.fd("",N.xc(4,62,"Title")," "),N.Nb(4),N.Dc("ngModel",e.entity.title)("ngClass",0==e.entity.is_active?"form-control":"form-control jdisabled")("disabled",0!=e.entity.is_active),N.Nb(3),N.fd("",N.xc(11,64,"Type of profile")," "),N.Nb(4),N.Dc("ngIf",0==e.entity.is_active),N.Nb(1),N.Dc("items",e._profiles)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.entity.profile_cat_id)("placeholder",N.xc(16,66,"Please choose"))("notFoundText",N.xc(17,68,"Not found item"))("disabled",0!=e.entity.is_active),N.Nb(6),N.ed(N.xc(22,70,"Critical level")),N.Nb(2),N.Dc("ngModel",e.entity.critical_level)("ngClass",0==e.entity.is_active?"form-control":"form-control jdisabled")("disabled",0!=e.entity.is_active),N.Nb(2),N.ed(N.xc(26,72,"Normal")),N.Nb(3),N.ed(N.xc(29,74,"Important")),N.Nb(3),N.ed(N.xc(32,76,"Very important")),N.Nb(3),N.ed(N.xc(35,78,"Urgent")),N.Nb(4),N.ed(N.xc(39,80,"Priority level")),N.Nb(2),N.Dc("ngModel",e.entity.priority_level)("ngClass",0==e.entity.is_active?"form-control":"form-control jdisabled")("disabled",0!=e.entity.is_active),N.Nb(2),N.ed(N.xc(43,82,"Normal")),N.Nb(3),N.ed(N.xc(46,84,"Hurry up")),N.Nb(3),N.ed(N.xc(49,86,"Urgent")),N.Nb(3),N.ed(N.xc(52,88,"Very urgent")),N.Nb(4),N.ed(N.xc(56,90,"Related requests")),N.Nb(2),N.Dc("multiple",!0)("items",e.related_requests)("closeOnSelect",!1)("placeholder",N.xc(59,92,"Please choose"))("notFoundText",N.xc(60,94,"Not found item"))("ngModel",e.entity.related_ids)("disabled",0!=e.entity.is_active),N.Nb(9),N.fd("",N.xc(67,96,"Estimated cost")," (VND)"),N.Nb(2),N.Dc("ngClass",0==e.entity.is_active?"form-control":"form-control jdisabled")("ngModel",e.entity.estimated_cost)("disabled",0!=e.entity.is_active),N.Nb(3),N.ed(N.xc(72,98,"Content")),N.Nb(2),N.Dc("ngIf",0==e.entity.is_active),N.Nb(1),N.Dc("ngIf",0!=e.entity.is_active),N.Nb(3),N.fd("",N.xc(78,100,"Attachment (if any)")," (.doc,.docx,.pdf) "),N.Nb(2),N.Dc("ngIf",null!=e._originFile),N.Nb(1),N.Dc("ngIf",0==e.entity.is_active&&null==e.entity.attached_file),N.Nb(1),N.Dc("ngModel",e.entityUpload.fileUpload),N.Nb(1),N.Dc("ngIf",null!=e.entity.attached_file),N.Nb(3),N.fd("",N.xc(86,102,"More attachment (if any)")," (.doc,.docx,.pdf) "),N.Nb(2),N.Dc("ngIf",0==e.entity.is_active),N.Nb(2),N.Dc("ngForOf",e.other_attached_files),N.Nb(3),N.ed(N.xc(93,104,"Handling staff")),N.Nb(6),N.fd(" ",N.xc(99,106,"Processing no.")," "),N.Nb(3),N.ed(N.xc(102,108,"Fullname")),N.Nb(3),N.ed(N.xc(105,110,"Title1")),N.Nb(3),N.ed(N.xc(108,112,"Method1")),N.Nb(3),N.ed(N.xc(111,114,"Time")),N.Nb(3),N.ed(N.xc(114,116,"Actions")),N.Nb(3),N.Dc("ngForOf",e.handling_users),N.Nb(1),N.Dc("ngIf",0==e.entity.is_active)}}function Je(e,t){1&e&&(N.hc(0,"div",152),N.hc(1,"h4",50),N.dd(2),N.wc(3,"translate"),N.gc(),N.gc()),2&e&&(N.Nb(2),N.fd(" ",N.xc(3,1,"No records now!!!")," "))}function Ze(e,t){1&e&&N.cc(0,"img",156)}function et(e,t){if(1&e&&(N.fc(0),N.dd(1),N.wc(2,"date"),N.wc(3,"date"),N.ec()),2&e){const e=N.vc().$implicit;N.Nb(1),N.gd(", ",N.yc(2,2,e.timestamp,"HH:mm a")," - ",N.yc(3,5,e.timestamp,"dd/MM/yyyy"),"")}}function tt(e,t){if(1&e&&(N.hc(0,"div",152),N.hc(1,"div"),N.bd(2,Ze,1,0,"img",153),N.gc(),N.hc(3,"div",154),N.hc(4,"h6"),N.dd(5),N.hc(6,"span",155),N.dd(7),N.wc(8,"date"),N.gc(),N.gc(),N.dd(9),N.wc(10,"translate"),N.bd(11,et,4,8,"ng-container",27),N.gc(),N.gc()),2&e){const e=t.$implicit;N.Nb(1),N.Qb("timeline-round m-r-30 timeline-line-1 ",null!=e.timestamp?"":e.flag?"bg-info":"bg-warning",""),N.Nb(1),N.Dc("ngIf",null!=e.timestamp),N.Nb(3),N.fd(" ",e.user.name," "),N.Nb(2),N.ed(N.yc(8,8,e.timestamp,"dd/MM/yyyy HH:mm")),N.Nb(2),N.fd(" ",N.xc(10,11,e.content),""),N.Nb(2),N.Dc("ngIf",null!=e.timestamp)}}function it(e,t){if(1&e&&(N.hc(0,"div",148),N.cc(1,"hr"),N.hc(2,"div",2),N.hc(3,"div",6),N.hc(4,"div",149),N.bd(5,Je,4,3,"div",150),N.bd(6,tt,12,13,"div",151),N.gc(),N.gc(),N.gc(),N.gc()),2&e){const e=N.vc(2);N.Nb(5),N.Dc("ngIf",0==e._diagrams.length),N.Nb(1),N.Dc("ngForOf",e._diagrams)}}function ct(e,t){1&e&&(N.hc(0,"div",152),N.hc(1,"h4",50),N.dd(2),N.wc(3,"translate"),N.gc(),N.gc()),2&e&&(N.Nb(2),N.fd(" ",N.xc(3,1,"No records now!!!")," "))}function nt(e,t){if(1&e&&(N.fc(0),N.hc(1,"small",52),N.dd(2),N.wc(3,"translate"),N.wc(4,"translate"),N.gc(),N.cc(5,"br"),N.ec()),2&e){const e=N.vc().$implicit;N.Nb(2),N.gd("",N.xc(3,2,"Messages"),": ",N.xc(4,4,e.messages),"")}}function at(e,t){if(1&e&&(N.fc(0),N.hc(1,"small",52),N.dd(2),N.wc(3,"translate"),N.gc(),N.cc(4,"br"),N.ec()),2&e){const e=N.vc().$implicit;N.Nb(2),N.gd("",N.xc(3,2,"Content"),": ",e.content,"")}}function st(e,t){if(1&e&&(N.hc(0,"small",52),N.dd(1),N.wc(2,"translate"),N.wc(3,"translate"),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.gd("",N.xc(2,2,"Approved cost"),": ",N.xc(3,4,e.approved_cost),"")}}function lt(e,t){if(1&e&&(N.hc(0,"div",152),N.hc(1,"div",157),N.cc(2,"img",156),N.gc(),N.hc(3,"div",154),N.hc(4,"h6"),N.dd(5),N.hc(6,"span",155),N.dd(7),N.wc(8,"date"),N.gc(),N.gc(),N.bd(9,nt,6,6,"ng-container",27),N.bd(10,at,5,4,"ng-container",27),N.bd(11,st,4,6,"small",158),N.gc(),N.gc()),2&e){const e=t.$implicit;N.Nb(5),N.fd(" ",e.user.name," "),N.Nb(2),N.ed(N.yc(8,5,e.timestamp,"dd/MM/yyyy HH:mm")),N.Nb(2),N.Dc("ngIf",null!=e.messages),N.Nb(1),N.Dc("ngIf",null!=e.content),N.Nb(1),N.Dc("ngIf",null!=e.approved_cost)}}function ot(e,t){if(1&e&&(N.hc(0,"div",73),N.cc(1,"hr"),N.hc(2,"div",2),N.hc(3,"div",6),N.hc(4,"div",149),N.bd(5,ct,4,3,"div",150),N.bd(6,lt,12,8,"div",151),N.gc(),N.gc(),N.gc(),N.gc()),2&e){const e=N.vc(2);N.Nb(5),N.Dc("ngIf",0==e._histories.length),N.Nb(1),N.Dc("ngForOf",e._histories)}}function rt(e,t){if(1&e&&(N.fc(0),N.cc(1,"img",177),N.ec()),2&e){const e=N.vc(2).$implicit,t=N.vc(3);N.Nb(1),N.Dc("src",t.baseFolder+"/"+e.avatar,N.Wc)}}function dt(e,t){1&e&&(N.fc(0),N.cc(1,"img",178),N.ec())}function ht(e,t){if(1&e&&(N.hc(0,"div",173),N.bd(1,rt,2,1,"ng-container",27),N.bd(2,dt,2,0,"ng-container",27),N.hc(3,"div",174),N.hc(4,"small",175),N.dd(5),N.gc(),N.hc(6,"span",176),N.dd(7),N.wc(8,"date"),N.gc(),N.gc(),N.dd(9),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.Dc("ngIf",null!=e.avatar&&""!=e.avatar),N.Nb(1),N.Dc("ngIf",null==e.avatar||""==e.avatar),N.Nb(3),N.fd("",e.name,","),N.Nb(2),N.ed(N.yc(8,5,null==e?null:e.timestamp,"dd/MM/yyyy HH:mm a")),N.Nb(2),N.fd(" ",null==e?null:e.messages," ")}}function gt(e,t){if(1&e&&(N.fc(0),N.cc(1,"img",181),N.ec()),2&e){const e=N.vc(2).$implicit,t=N.vc(3);N.Nb(1),N.Dc("src",t.baseFolder+"/"+e.avatar,N.Wc)}}function ut(e,t){1&e&&(N.fc(0),N.cc(1,"img",182),N.ec())}function ft(e,t){if(1&e&&(N.hc(0,"div",179),N.bd(1,gt,2,1,"ng-container",27),N.bd(2,ut,2,0,"ng-container",27),N.hc(3,"div",180),N.hc(4,"small",175),N.dd(5),N.gc(),N.hc(6,"span",176),N.dd(7),N.wc(8,"date"),N.gc(),N.gc(),N.dd(9),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.Dc("ngIf",null!=e.avatar&&""!=e.avatar),N.Nb(1),N.Dc("ngIf",null==e.avatar||""==e.avatar),N.Nb(3),N.fd("",e.name,","),N.Nb(2),N.ed(N.yc(8,5,null==e?null:e.timestamp,"dd/MM/yyyy HH:mm a")),N.Nb(2),N.fd(" ",null==e?null:e.messages," ")}}const bt=function(e){return{clearfix:e}};function _t(e,t){if(1&e&&(N.hc(0,"li",170),N.bd(1,ht,10,8,"div",171),N.bd(2,ft,10,8,"ng-template",null,172,N.cd),N.gc()),2&e){const e=t.$implicit,i=N.Rc(3),c=N.vc(3);N.Dc("ngClass",N.Ic(3,bt,e.depended_id==c.user.id)),N.Nb(1),N.Dc("ngIf",e.depended_id!=c.user.id)("ngIfElse",i)}}function pt(e,t){1&e&&(N.fc(0),N.hc(1,"div",183),N.hc(2,"div",184),N.cc(3,"img",185),N.gc(),N.gc(),N.ec())}function mt(e,t){if(1&e){const e=N.ic();N.hc(0,"div",73),N.hc(1,"div",2),N.hc(2,"div",6),N.hc(3,"div",159),N.hc(4,"div",160),N.hc(5,"div",161),N.hc(6,"div",162),N.hc(7,"input",163),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc(2)._contents=t})("change",function(){return N.Uc(e),N.vc(2)._addChat()}),N.wc(8,"translate"),N.gc(),N.hc(9,"ul",164),N.hc(10,"li",165),N.hc(11,"a",166),N.cc(12,"i",167),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(13,"div",168),N.hc(14,"ul"),N.bd(15,_t,4,5,"li",169),N.bd(16,pt,4,0,"ng-container",27),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc()}if(2&e){const e=N.vc(2);N.Nb(7),N.Fc("placeholder","",N.xc(8,4,"Enter content"),"..."),N.Dc("ngModel",e._contents),N.Nb(8),N.Dc("ngForOf",e.chats),N.Nb(1),N.Dc("ngIf",!(null!=e.chats&&e.chats.length))}}function vt(e,t){if(1&e){const e=N.ic();N.fc(0),N.hc(1,"button",188),N.rc("click",function(){return N.Uc(e),N.vc(3).cancelSubmission()}),N.dd(2),N.wc(3,"translate"),N.gc(),N.ec()}2&e&&(N.Nb(2),N.fd(" ",N.xc(3,1,"Cancel")," "))}function yt(e,t){if(1&e){const e=N.ic();N.fc(0),N.hc(1,"button",189),N.rc("click",function(){N.Uc(e);const t=N.vc(4),i=N.Rc(97);return t.disagreeSubmission(i,"disagree")}),N.dd(2),N.wc(3,"translate"),N.gc(),N.ec()}2&e&&(N.Nb(2),N.fd(" ",N.xc(3,1,"Disagree")," "))}function St(e,t){1&e&&(N.fc(0),N.hc(1,"a",190),N.cc(2,"img",191),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function Nt(e,t){if(1&e){const e=N.ic();N.hc(0,"button",193),N.rc("click",function(){return N.Uc(e),N.vc(5).submissionChange(0)}),N.dd(1),N.wc(2,"translate"),N.gc()}2&e&&(N.Nb(1),N.fd(" ",N.xc(2,1,"Save")," "))}function Dt(e,t){if(1&e&&(N.fc(0),N.bd(1,Nt,3,3,"button",192),N.ec()),2&e){const e=N.vc(4);N.Nb(1),N.Dc("ngIf",!e.isSave)}}function wt(e,t){1&e&&N.dc(0)}function xt(e,t){1&e&&(N.fc(0),N.hc(1,"a",194),N.cc(2,"img",191),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function Mt(e,t){if(1&e){const e=N.ic();N.hc(0,"button",196),N.rc("click",function(){N.Uc(e);const t=N.vc(5);return t.approvedByUser(t.entity.is_active,1)}),N.dd(1),N.wc(2,"translate"),N.gc()}2&e&&(N.Nb(1),N.fd(" ",N.xc(2,1,"Sign")," "))}function Et(e,t){if(1&e&&(N.fc(0),N.bd(1,Mt,3,3,"button",195),N.ec()),2&e){const e=N.vc(4);N.Nb(1),N.Dc("ngIf",!e.isSaveSigned)}}function Ct(e,t){if(1&e&&(N.hc(0,"ng-contatiner"),N.bd(1,yt,4,3,"ng-container",27),N.bd(2,St,5,3,"ng-container",27),N.bd(3,Dt,2,1,"ng-container",27),N.bd(4,wt,1,0,"ng-container",27),N.bd(5,xt,5,3,"ng-container",27),N.bd(6,Et,2,1,"ng-container",27),N.gc()),2&e){const e=N.vc(3);N.Nb(1),N.Dc("ngIf",e._flagShow),N.Nb(1),N.Dc("ngIf",e.isSave),N.Nb(1),N.Dc("ngIf","ADD"==e._flagModal),N.Nb(1),N.Dc("ngIf","ADD"!=e._flagModal&&0!=e.entity.is_active),N.Nb(1),N.Dc("ngIf",e.isSaveSigned),N.Nb(1),N.Dc("ngIf","ADD"!=e._flagModal&&e._flagShow)}}function It(e,t){if(1&e){const e=N.ic();N.hc(0,"button",189),N.rc("click",function(){return N.Uc(e),N.vc(5).submissionRecall()}),N.dd(1),N.wc(2,"translate"),N.gc()}2&e&&(N.Nb(1),N.fd(" ",N.xc(2,1,"Recall")," "))}function kt(e,t){if(1&e&&(N.fc(0),N.bd(1,It,3,3,"button",197),N.ec()),2&e){const e=N.vc(4);N.Nb(1),N.Dc("ngIf",!e.isSaveSigned)}}function Rt(e,t){if(1&e){const e=N.ic();N.hc(0,"button",196),N.rc("click",function(){return N.Uc(e),N.vc(5).submissionChange(1)}),N.dd(1),N.wc(2,"translate"),N.gc()}if(2&e){const e=N.vc(5);N.Nb(1),N.fd(" ",N.xc(2,1,0==e.entity.is_active?"Sign":"Resign")," ")}}function Pt(e,t){if(1&e&&(N.fc(0),N.bd(1,Rt,3,3,"button",195),N.ec()),2&e){const e=N.vc(4);N.Nb(1),N.Dc("ngIf",!e.isSaveSigned)}}function Ut(e,t){if(1&e){const e=N.ic();N.hc(0,"button",196),N.rc("click",function(){return N.Uc(e),N.vc(5).submissionChange(1)}),N.dd(1),N.wc(2,"translate"),N.gc()}2&e&&(N.Nb(1),N.fd(" ",N.xc(2,1,"Sign")," "))}function Gt(e,t){if(1&e&&(N.fc(0),N.bd(1,Ut,3,3,"button",195),N.ec()),2&e){const e=N.vc(4);N.Nb(1),N.Dc("ngIf",!e.isSaveSigned)}}function At(e,t){if(1&e&&(N.fc(0),N.bd(1,kt,2,1,"ng-container",27),N.bd(2,Pt,2,1,"ng-container",27),N.bd(3,Gt,2,1,"ng-container",27),N.ec()),2&e){const e=N.vc(3);N.Nb(1),N.Dc("ngIf",1==e.entity.is_active&&null!=e.entity.id),N.Nb(1),N.Dc("ngIf",0==e.entity.is_active&&null==e.entity.id||2==e.entity.is_active),N.Nb(1),N.Dc("ngIf",0==e.entity.is_active&&"ADD"!=e._flagModal&&null==e.entity.logs)}}function Ot(e,t){if(1&e){const e=N.ic();N.hc(0,"div",186),N.hc(1,"button",187),N.rc("click",function(){return N.Uc(e),N.vc().$implicit.dismiss("Cross click")}),N.dd(2),N.wc(3,"translate"),N.gc(),N.bd(4,vt,4,3,"ng-container",27),N.bd(5,Ct,7,6,"ng-contatiner",27),N.bd(6,At,4,3,"ng-container",27),N.gc()}if(2&e){const e=N.vc(2);N.Nb(2),N.fd(" ",N.xc(3,4,"Close")," "),N.Nb(2),N.Dc("ngIf",0==e.entity.is_active&&null!=e.entity.id),N.Nb(1),N.Dc("ngIf",2!=e.entity.is_active),N.Nb(1),N.Dc("ngIf",e.entity.created_by==e.user.id)}}const Tt=function(){return{"max-height":"calc(100vh - 300px)"}},Ft=function(){return{"max-height":"calc(100vh - 300px)","overflow-y":"auto"}};function jt(e,t){if(1&e){const e=N.ic();N.hc(0,"form",66),N.hc(1,"div",67),N.hc(2,"h4",68),N.dd(3),N.wc(4,"translate"),N.wc(5,"translate"),N.wc(6,"translate"),N.gc(),N.hc(7,"button",69),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(8,"span",70),N.dd(9,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(10,"div",71),N.hc(11,"div",72),N.hc(12,"div",73),N.hc(13,"div",7),N.hc(14,"button",74),N.rc("click",function(){return N.Uc(e),N.vc()._chooseButton(1)}),N.dd(15),N.wc(16,"translate"),N.gc(),N.bd(17,be,3,4,"button",75),N.bd(18,_e,4,4,"button",75),N.bd(19,pe,4,4,"button",75),N.gc(),N.gc(),N.gc(),N.hc(20,"div",76),N.bd(21,Xe,118,118,"ng-container",27),N.bd(22,it,7,2,"div",77),N.bd(23,ot,7,2,"div",78),N.bd(24,mt,17,6,"div",78),N.gc(),N.gc(),N.bd(25,Ot,7,6,"div",79),N.gc()}if(2&e){const e=N.vc();N.Nb(3),N.gd(" ","ADD"==e._flagModal?N.xc(4,13,"Add new"):N.xc(5,15,"Update")," ",N.xc(6,17,e._title)," "),N.Nb(11),N.Dc("ngClass",1==e._flagButton?"btn btn-sm btn-secondary":"btn btn-sm btn-primary"),N.Nb(1),N.fd(" ",N.xc(16,19,"General information")," "),N.Nb(2),N.Dc("ngIf","ADD"!=e._flagModal),N.Nb(1),N.Dc("ngIf","ADD"!=e._flagModal&&e._authenService.hasPermission("USERS","read")),N.Nb(1),N.Dc("ngIf","ADD"!=e._flagModal),N.Nb(1),N.Dc("ngStyle",4==e._flagButton?N.Hc(21,Tt):N.Hc(22,Ft)),N.Nb(1),N.Dc("ngIf",1==e._flagButton),N.Nb(1),N.Dc("ngIf",2==e._flagButton&&"ADD"!=e._flagModal),N.Nb(1),N.Dc("ngIf",3==e._flagButton&&"ADD"!=e._flagModal),N.Nb(1),N.Dc("ngIf",4==e._flagButton&&"ADD"!=e._flagModal),N.Nb(1),N.Dc("ngIf",1==e._flagButton)}}function zt(e,t){if(1&e&&(N.hc(0,"option",230),N.dd(1),N.gc()),2&e){const e=t.$implicit,i=N.vc(2);N.Ec("value",e.id),N.Nb(1),N.gd(" ",e.code," - ","en"==i.user.lang?e.name_e:e.name_l," ")}}function $t(e,t){if(1&e&&(N.hc(0,"span"),N.dd(1),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.ed(e.order)}}function Bt(e,t){if(1&e){const e=N.ic();N.hc(0,"input",234),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().$implicit.order=t}),N.gc()}if(2&e){const e=N.vc(),t=e.$implicit;N.Fc("name","or",e.index+1,""),N.Dc("ngModel",t.order)}}function qt(e,t){if(1&e&&(N.hc(0,"span"),N.dd(1),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.ed(e.user.title)}}function Lt(e,t){if(1&e){const e=N.ic();N.hc(0,"nz-tree-select",142),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc(3)._selectDept=t})("ngModelChange",function(){N.Uc(e);const t=N.vc().$implicit,i=N.vc(2);return i._getUser(t,i._selectDept)}),N.wc(1,"translate"),N.gc()}if(2&e){const e=N.vc(3);N.Ec("nzPlaceHolder",N.xc(1,4,"Please choose")),N.Dc("nzExpandedKeys",e.expandKeys)("nzNodes",e._departments)("ngModel",e._selectDept)}}function Kt(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Only view")))}function Ht(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Passed signature")))}function Vt(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Reviewed signature")))}function Yt(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Approved signature")))}function Wt(e,t){if(1&e&&(N.hc(0,"span"),N.bd(1,Kt,3,3,"span",27),N.bd(2,Ht,3,3,"span",27),N.bd(3,Vt,3,3,"span",27),N.bd(4,Yt,3,3,"span",27),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.Dc("ngIf",0==e.role),N.Nb(1),N.Dc("ngIf",1==e.role),N.Nb(1),N.Dc("ngIf",2==e.role),N.Nb(1),N.Dc("ngIf",3==e.role)}}function Qt(e,t){if(1&e){const e=N.ic();N.hc(0,"select",143),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().$implicit.role=t})("change",function(){N.Uc(e);const t=N.vc().$implicit,i=N.vc(2);return i._getUser(t,i._selectDept)}),N.hc(1,"option",91),N.dd(2),N.wc(3,"translate"),N.gc(),N.hc(4,"option",92),N.dd(5),N.wc(6,"translate"),N.gc(),N.hc(7,"option",93),N.dd(8),N.wc(9,"translate"),N.gc(),N.hc(10,"option",94),N.dd(11),N.wc(12,"translate"),N.gc(),N.gc()}if(2&e){const e=N.vc(),t=e.$implicit;N.Fc("name","r",e.index+1,""),N.Dc("ngModel",t.role),N.Nb(2),N.ed(N.xc(3,6,"Only view")),N.Nb(3),N.fd(" ",N.xc(6,8,"Passed signature")," "),N.Nb(3),N.fd(" ",N.xc(9,10,"Reviewed signature")," "),N.Nb(3),N.fd(" ",N.xc(12,12,"Approved signature")," ")}}function Xt(e,t){if(1&e&&(N.hc(0,"span"),N.dd(1),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.ed(e.time)}}function Jt(e,t){if(1&e){const e=N.ic();N.hc(0,"input",235),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().$implicit.time=t}),N.gc()}if(2&e){const e=N.vc(),t=e.$implicit;N.Fc("name","timer",e.index+1,""),N.Dc("ngModel",t.time)}}function Zt(e,t){if(1&e){const e=N.ic();N.hc(0,"tr"),N.hc(1,"td",26),N.bd(2,$t,2,1,"span",27),N.bd(3,Bt,1,2,"input",231),N.gc(),N.hc(4,"td",26),N.bd(5,qt,2,1,"span",27),N.bd(6,Lt,2,6,"nz-tree-select",232),N.gc(),N.hc(7,"td",26),N.bd(8,Wt,5,4,"span",27),N.bd(9,Qt,13,14,"select",139),N.gc(),N.hc(10,"td",26),N.bd(11,Xt,2,1,"span",27),N.bd(12,Jt,1,2,"input",233),N.gc(),N.hc(13,"td",26),N.hc(14,"a",144),N.rc("click",function(){N.Uc(e);const i=t.$implicit;return N.vc(2)._removeItemHandle(i)}),N.cc(15,"i",145),N.gc(),N.gc(),N.gc()}if(2&e){const e=t.$implicit;N.Nb(2),N.Dc("ngIf",e.flag),N.Nb(1),N.Dc("ngIf",!e.flag),N.Nb(2),N.Dc("ngIf",e.flag),N.Nb(1),N.Dc("ngIf",!e.flag),N.Nb(2),N.Dc("ngIf",e.flag),N.Nb(1),N.Dc("ngIf",!e.flag),N.Nb(2),N.Dc("ngIf",e.flag),N.Nb(1),N.Dc("ngIf",!e.flag)}}function ei(e,t){1&e&&(N.fc(0),N.hc(1,"a",190),N.cc(2,"img",191),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function ti(e,t){if(1&e&&(N.hc(0,"button",236),N.dd(1),N.wc(2,"translate"),N.gc()),2&e){N.vc();const e=N.Rc(1);N.Dc("disabled",!e.valid),N.Nb(1),N.fd(" ",N.xc(2,2,"Save")," ")}}function ii(e,t){if(1&e){const e=N.ic();N.hc(0,"form",198,199),N.rc("ngSubmit",function(){return N.Uc(e),N.vc().saveChangeP()}),N.hc(2,"div",67),N.hc(3,"h4",68),N.dd(4),N.wc(5,"translate"),N.wc(6,"translate"),N.wc(7,"translate"),N.gc(),N.hc(8,"button",69),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(9,"span",70),N.dd(10,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(11,"div",200),N.hc(12,"div",72),N.hc(13,"div",201),N.hc(14,"label",202),N.dd(15),N.wc(16,"translate"),N.hc(17,"span",50),N.dd(18,"(*)"),N.gc(),N.dd(19," - "),N.hc(20,"a",116),N.rc("click",function(){N.Uc(e);const t=N.vc(),i=N.Rc(87);return t._popupCategory(i,null)}),N.cc(21,"i",15),N.gc(),N.gc(),N.hc(22,"select",203),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.profile_group_id=t}),N.hc(23,"option",204),N.dd(24),N.wc(25,"translate"),N.gc(),N.bd(26,zt,2,3,"option",205),N.gc(),N.gc(),N.hc(27,"div",201),N.hc(28,"label",206),N.dd(29),N.wc(30,"translate"),N.hc(31,"span",50),N.dd(32,"(*)"),N.gc(),N.gc(),N.hc(33,"input",207),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.code=t})("keyup",function(){return N.Uc(e),N.vc().removeBlankTypeProfile()}),N.gc(),N.gc(),N.hc(34,"div",201),N.hc(35,"label",208),N.dd(36),N.wc(37,"translate"),N.hc(38,"span",50),N.dd(39,"(*)"),N.gc(),N.gc(),N.hc(40,"input",209),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.title=t}),N.gc(),N.gc(),N.hc(41,"div",201),N.hc(42,"label",210),N.dd(43),N.wc(44,"translate"),N.hc(45,"span",50),N.dd(46,"(*)"),N.gc(),N.dd(47," - "),N.hc(48,"a",116),N.rc("click",function(){N.Uc(e);const t=N.vc(),i=N.Rc(89);return t._popupCategory1(i,null)}),N.cc(49,"i",15),N.gc(),N.gc(),N.hc(50,"ng-select",211),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.document_id=t}),N.wc(51,"translate"),N.wc(52,"translate"),N.gc(),N.gc(),N.hc(53,"div",73),N.hc(54,"label",212),N.dd(55),N.wc(56,"translate"),N.hc(57,"span",50),N.dd(58,"(*)"),N.gc(),N.gc(),N.hc(59,"div",23),N.hc(60,"table",115),N.hc(61,"thead"),N.hc(62,"th",26),N.dd(63),N.wc(64,"translate"),N.gc(),N.hc(65,"th",26),N.dd(66),N.wc(67,"translate"),N.hc(68,"a",116),N.rc("click",function(){N.Uc(e);const t=N.vc(),i=N.Rc(93);return t._popupDepartment(i,null)}),N.cc(69,"i",15),N.gc(),N.gc(),N.hc(70,"th",26),N.dd(71),N.wc(72,"translate"),N.gc(),N.hc(73,"th",26),N.dd(74),N.wc(75,"translate"),N.wc(76,"translate"),N.gc(),N.hc(77,"th",26),N.dd(78),N.wc(79,"translate"),N.gc(),N.gc(),N.hc(80,"tbody"),N.bd(81,Zt,16,8,"tr",28),N.gc(),N.hc(82,"tfoot"),N.hc(83,"tr"),N.cc(84,"td",213),N.hc(85,"td",26),N.hc(86,"a",147),N.rc("click",function(){return N.Uc(e),N.vc()._addItemHandle(null)}),N.cc(87,"i",15),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(88,"div",73),N.hc(89,"label",214),N.dd(90),N.wc(91,"translate"),N.gc(),N.hc(92,"ck-editor",215,216),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.description=t}),N.gc(),N.gc(),N.hc(94,"div",88),N.hc(95,"label",217),N.dd(96),N.wc(97,"translate"),N.gc(),N.hc(98,"div",218),N.hc(99,"input",219),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.is_active=t}),N.gc(),N.hc(100,"label",220),N.dd(101),N.wc(102,"translate"),N.gc(),N.gc(),N.gc(),N.hc(103,"div",82),N.hc(104,"label",221),N.dd(105),N.wc(106,"translate"),N.gc(),N.hc(107,"input",222),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.estimated_cost=t}),N.gc(),N.gc(),N.hc(108,"div",223),N.hc(109,"label",224),N.dd(110),N.wc(111,"translate"),N.gc(),N.hc(112,"input",225,226),N.rc("change",function(t){N.Uc(e);const i=N.Rc(113);return N.vc().fileEvent1(t,i)}),N.gc(),N.hc(114,"input",227),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entityUpload1.fileUpload=t}),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(115,"div",186),N.hc(116,"button",228),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(117),N.wc(118,"translate"),N.gc(),N.bd(119,ei,5,3,"ng-container",27),N.bd(120,ti,3,4,"button",229),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(4),N.gd(" ","ADD"==e._flagSubModal?N.xc(5,41,"Add new"):N.xc(6,43,"Update")," ",N.xc(7,45,e._subTitle)," "),N.Nb(11),N.fd("",N.xc(16,47,"Profile group")," "),N.Nb(7),N.Dc("ngModel",e.entitySub.profile_group_id),N.Nb(2),N.ed(N.xc(25,49,"Please choose")),N.Nb(2),N.Dc("ngForOf",e._catprofiles),N.Nb(3),N.fd("",N.xc(30,51,"Profile code")," "),N.Nb(4),N.Dc("ngModel",e.entitySub.code),N.Nb(3),N.fd("",N.xc(37,53,"Profile name")," "),N.Nb(4),N.Dc("ngModel",e.entitySub.title),N.Nb(3),N.fd("",N.xc(44,55,"Type of document")," "),N.Nb(7),N.Dc("items",e._catdocuments)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("bindLabel","en"==e.user.lang?"name_e":"name_l")("ngModel",e.entitySub.document_id)("placeholder",N.xc(51,57,"Please choose"))("notFoundText",N.xc(52,59,"Not found item")),N.Nb(5),N.fd("",N.xc(56,61,"Configure handling users")," "),N.Nb(8),N.fd(" ",N.xc(64,63,"Processing no.")," "),N.Nb(3),N.fd(" ",N.xc(67,65,"Manager Unit")," - "),N.Nb(5),N.ed(N.xc(72,67,"Roles")),N.Nb(3),N.gd(" ",N.xc(75,69,"Time")," (",N.xc(76,71,"hours"),") "),N.Nb(4),N.ed(N.xc(79,73,"Actions")),N.Nb(3),N.Dc("ngForOf",e.entitySub.handle_users.data),N.Nb(9),N.ed(N.xc(91,75,"Description")),N.Nb(2),N.Dc("ngModel",e.entitySub.description)("fullPage",!0)("config",e.ckEditorConfig),N.Nb(4),N.ed(N.xc(97,77,"Status")),N.Nb(3),N.Dc("ngModel",e.entitySub.is_active),N.Nb(2),N.ed(N.xc(102,79,e.entitySub.is_active?"activated":"not activated")),N.Nb(4),N.fd("",N.xc(106,81,"Estimated cost")," (VND)"),N.Nb(2),N.Dc("ngModel",e.entitySub.estimated_cost),N.Nb(3),N.fd("",N.xc(111,83,"Attachment (if any)")," (.doc,.docx,.pdf)"),N.Nb(4),N.Dc("ngModel",e.entityUpload1.fileUpload),N.Nb(3),N.fd(" ",N.xc(118,85,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSaveSub),N.Nb(1),N.Dc("ngIf",!e.isSaveSub)}}function ci(e,t){1&e&&(N.fc(0),N.hc(1,"a",190),N.cc(2,"img",191),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function ni(e,t){if(1&e&&(N.hc(0,"button",236),N.dd(1),N.wc(2,"translate"),N.gc()),2&e){N.vc();const e=N.Rc(1);N.Dc("disabled",!e.valid),N.Nb(1),N.fd(" ",N.xc(2,2,"Save")," ")}}function ai(e,t){if(1&e){const e=N.ic();N.hc(0,"form",198,237),N.rc("ngSubmit",function(){return N.Uc(e),N.vc().saveChangeProfileGroup()}),N.hc(2,"div",67),N.hc(3,"h4",68),N.dd(4),N.wc(5,"translate"),N.wc(6,"translate"),N.wc(7,"translate"),N.gc(),N.hc(8,"button",69),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(9,"span",70),N.dd(10,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(11,"div",71),N.hc(12,"div",72),N.hc(13,"div",223),N.hc(14,"div",238),N.hc(15,"label",239),N.dd(16),N.wc(17,"translate"),N.hc(18,"span",50),N.dd(19,"(*)"),N.gc(),N.gc(),N.hc(20,"input",240),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.code=t})("keyup",function(){return N.Uc(e),N.vc().removeBlank()}),N.wc(21,"translate"),N.gc(),N.gc(),N.gc(),N.hc(22,"div",73),N.hc(23,"div",238),N.hc(24,"label",241),N.dd(25),N.wc(26,"translate"),N.hc(27,"span",50),N.dd(28,"(*)"),N.gc(),N.gc(),N.hc(29,"input",242),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.name_l=t}),N.wc(30,"translate"),N.wc(31,"translate"),N.gc(),N.gc(),N.gc(),N.hc(32,"div",73),N.hc(33,"div",238),N.hc(34,"input",243),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.name_e=t}),N.wc(35,"translate"),N.wc(36,"translate"),N.gc(),N.gc(),N.gc(),N.hc(37,"div",223),N.hc(38,"label",244),N.dd(39),N.wc(40,"translate"),N.gc(),N.hc(41,"div",218),N.hc(42,"input",245),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.is_active=t}),N.gc(),N.hc(43,"label",246),N.dd(44),N.wc(45,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(46,"div",186),N.hc(47,"button",228),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(48),N.wc(49,"translate"),N.gc(),N.bd(50,ci,5,3,"ng-container",27),N.bd(51,ni,3,4,"button",229),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(4),N.gd(" ",null==e.entitySubIn.id?N.xc(5,18,"Add new"):N.xc(6,20,"Update")," ",N.xc(7,22,"Profile group")," "),N.Nb(12),N.fd("",N.xc(17,24,"Profile code")," "),N.Nb(4),N.Ec("placeholder",N.xc(21,26,"Profile code")),N.Dc("ngModel",e.entitySubIn.code),N.Nb(5),N.fd("",N.xc(26,28,"Group name")," "),N.Nb(4),N.Gc("placeholder","",N.xc(30,30,"Group name")," (",N.xc(31,32,"Vietnamese"),")"),N.Dc("ngModel",e.entitySubIn.name_l),N.Nb(5),N.Gc("placeholder","",N.xc(35,34,"Group name")," (",N.xc(36,36,"English"),")"),N.Dc("ngModel",e.entitySubIn.name_e),N.Nb(5),N.ed(N.xc(40,38,"Status")),N.Nb(3),N.Dc("ngModel",e.entitySubIn.is_active),N.Nb(2),N.ed(N.xc(45,40,e.entitySubIn.is_active?"activated":"not activated")),N.Nb(4),N.fd(" ",N.xc(49,42,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSaveSub1),N.Nb(1),N.Dc("ngIf",!e.isSaveSub1)}}function si(e,t){1&e&&(N.fc(0),N.hc(1,"a",190),N.cc(2,"img",191),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function li(e,t){if(1&e&&(N.hc(0,"button",236),N.dd(1),N.wc(2,"translate"),N.gc()),2&e){N.vc();const e=N.Rc(1);N.Dc("disabled",!e.valid),N.Nb(1),N.fd(" ",N.xc(2,2,"Save")," ")}}function oi(e,t){if(1&e){const e=N.ic();N.hc(0,"form",198,247),N.rc("ngSubmit",function(){return N.Uc(e),N.vc().saveChangeProfileGroup1()}),N.hc(2,"div",67),N.hc(3,"h4",68),N.dd(4),N.wc(5,"translate"),N.wc(6,"translate"),N.wc(7,"translate"),N.gc(),N.hc(8,"button",69),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(9,"span",70),N.dd(10,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(11,"div",71),N.hc(12,"div",72),N.hc(13,"div",223),N.hc(14,"div",238),N.hc(15,"label",248),N.dd(16),N.wc(17,"translate"),N.hc(18,"span",50),N.dd(19,"(*)"),N.gc(),N.gc(),N.hc(20,"input",249),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.code=t})("keyup",function(){return N.Uc(e),N.vc().removeBlank()}),N.wc(21,"translate"),N.gc(),N.gc(),N.gc(),N.hc(22,"div",73),N.hc(23,"div",238),N.hc(24,"label",250),N.dd(25),N.wc(26,"translate"),N.hc(27,"span",50),N.dd(28,"(*)"),N.gc(),N.gc(),N.hc(29,"input",251),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.name_l=t}),N.wc(30,"translate"),N.wc(31,"translate"),N.gc(),N.gc(),N.gc(),N.hc(32,"div",73),N.hc(33,"div",238),N.hc(34,"input",252),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.name_e=t}),N.wc(35,"translate"),N.wc(36,"translate"),N.gc(),N.gc(),N.gc(),N.hc(37,"div",223),N.hc(38,"label",253),N.dd(39),N.wc(40,"translate"),N.gc(),N.hc(41,"div",218),N.hc(42,"input",254),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.is_active=t}),N.gc(),N.hc(43,"label",255),N.dd(44),N.wc(45,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(46,"div",186),N.hc(47,"button",228),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(48),N.wc(49,"translate"),N.gc(),N.bd(50,si,5,3,"ng-container",27),N.bd(51,li,3,4,"button",229),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(4),N.gd(" ",null==e.entitySubIn.id?N.xc(5,18,"Add new"):N.xc(6,20,"Update")," ",N.xc(7,22,"Type of document")," "),N.Nb(12),N.fd("",N.xc(17,24,"Document code")," "),N.Nb(4),N.Ec("placeholder",N.xc(21,26,"Document code")),N.Dc("ngModel",e.entitySubIn.code),N.Nb(5),N.fd("",N.xc(26,28,"Document name")," "),N.Nb(4),N.Gc("placeholder","",N.xc(30,30,"Document name")," (",N.xc(31,32,"Vietnamese"),")"),N.Dc("ngModel",e.entitySubIn.name_l),N.Nb(5),N.Gc("placeholder","",N.xc(35,34,"Document name")," (",N.xc(36,36,"English"),")"),N.Dc("ngModel",e.entitySubIn.name_e),N.Nb(5),N.ed(N.xc(40,38,"Status")),N.Nb(3),N.Dc("ngModel",e.entitySubIn.is_active),N.Nb(2),N.ed(N.xc(45,40,e.entitySubIn.is_active?"activated":"not activated")),N.Nb(4),N.fd(" ",N.xc(49,42,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSaveSub1),N.Nb(1),N.Dc("ngIf",!e.isSaveSub1)}}function ri(e,t){1&e&&(N.fc(0),N.hc(1,"a",190),N.cc(2,"img",191),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function di(e,t){if(1&e&&(N.hc(0,"button",236),N.dd(1),N.wc(2,"translate"),N.gc()),2&e){N.vc();const e=N.Rc(1);N.Dc("disabled",!e.valid),N.Nb(1),N.fd(" ",N.xc(2,2,"Save")," ")}}function hi(e,t){if(1&e){const e=N.ic();N.hc(0,"form",198,256),N.rc("ngSubmit",function(){return N.Uc(e),N.vc().saveChangeTitle()}),N.hc(2,"div",67),N.hc(3,"h4",68),N.dd(4),N.wc(5,"translate"),N.wc(6,"translate"),N.gc(),N.hc(7,"button",69),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(8,"span",70),N.dd(9,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(10,"div",71),N.hc(11,"div",72),N.hc(12,"div",223),N.hc(13,"div",238),N.hc(14,"label",257),N.dd(15),N.wc(16,"translate"),N.hc(17,"span",50),N.dd(18,"(*)"),N.gc(),N.gc(),N.hc(19,"input",258),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.code=t})("keyup",function(){return N.Uc(e),N.vc().removeBlank()}),N.wc(20,"translate"),N.gc(),N.gc(),N.gc(),N.hc(21,"div",73),N.hc(22,"div",238),N.hc(23,"label",259),N.dd(24),N.wc(25,"translate"),N.hc(26,"span",50),N.dd(27,"(*)"),N.gc(),N.gc(),N.hc(28,"input",260),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.name_l=t}),N.wc(29,"translate"),N.wc(30,"translate"),N.gc(),N.gc(),N.gc(),N.hc(31,"div",73),N.hc(32,"div",238),N.hc(33,"input",261),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.name_e=t}),N.wc(34,"translate"),N.wc(35,"translate"),N.gc(),N.gc(),N.gc(),N.hc(36,"div",223),N.hc(37,"label",262),N.dd(38),N.wc(39,"translate"),N.gc(),N.hc(40,"div",218),N.hc(41,"input",263),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.is_active=t}),N.gc(),N.hc(42,"label",264),N.dd(43),N.wc(44,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(45,"div",186),N.hc(46,"button",228),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(47),N.wc(48,"translate"),N.gc(),N.bd(49,ri,5,3,"ng-container",27),N.bd(50,di,3,4,"button",229),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(4),N.gd(" ",N.xc(5,18,"Add new")," ",N.xc(6,20,"Title1")," "),N.Nb(11),N.fd("",N.xc(16,22,"Code")," "),N.Nb(4),N.Ec("placeholder",N.xc(20,24,"Code")),N.Dc("ngModel",e.entitySubIn.code),N.Nb(5),N.fd("",N.xc(25,26,"Name")," "),N.Nb(4),N.Gc("placeholder","",N.xc(29,28,"Name")," (",N.xc(30,30,"Vietnamese"),")"),N.Dc("ngModel",e.entitySubIn.name_l),N.Nb(5),N.Gc("placeholder","",N.xc(34,32,"Name")," (",N.xc(35,34,"English"),")"),N.Dc("ngModel",e.entitySubIn.name_e),N.Nb(5),N.ed(N.xc(39,36,"Status")),N.Nb(3),N.Dc("ngModel",e.entitySubIn.is_active),N.Nb(2),N.ed(N.xc(44,38,e.entitySubIn.is_active?"activated":"not activated")),N.Nb(4),N.fd(" ",N.xc(48,40,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSaveSub1),N.Nb(1),N.Dc("ngIf",!e.isSaveSub1)}}function gi(e,t){1&e&&(N.fc(0),N.hc(1,"a",190),N.cc(2,"img",191),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function ui(e,t){if(1&e&&(N.hc(0,"button",236),N.dd(1),N.wc(2,"translate"),N.gc()),2&e){N.vc();const e=N.Rc(1);N.Dc("disabled",!e.valid),N.Nb(1),N.fd(" ",N.xc(2,2,"Save")," ")}}function fi(e,t){if(1&e){const e=N.ic();N.hc(0,"form",198,265),N.rc("ngSubmit",function(){return N.Uc(e),N.vc().saveChangeDepartment()}),N.hc(2,"div",67),N.hc(3,"h4",68),N.dd(4),N.wc(5,"translate"),N.wc(6,"translate"),N.gc(),N.hc(7,"button",69),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(8,"span",70),N.dd(9,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(10,"div",71),N.hc(11,"div",72),N.hc(12,"div",73),N.hc(13,"div",238),N.hc(14,"label",266),N.dd(15),N.wc(16,"translate"),N.hc(17,"span",50),N.dd(18,"(*)"),N.gc(),N.gc(),N.hc(19,"input",267),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.dept_name_l=t}),N.wc(20,"translate"),N.wc(21,"translate"),N.gc(),N.gc(),N.gc(),N.hc(22,"div",73),N.hc(23,"div",238),N.hc(24,"input",268),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.dept_name_e=t}),N.wc(25,"translate"),N.wc(26,"translate"),N.gc(),N.gc(),N.gc(),N.hc(27,"div",223),N.hc(28,"label",269),N.dd(29),N.wc(30,"translate"),N.gc(),N.hc(31,"div",218),N.hc(32,"input",270),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySubIn.is_active=t}),N.gc(),N.hc(33,"label",271),N.dd(34),N.wc(35,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(36,"div",186),N.hc(37,"button",228),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(38),N.wc(39,"translate"),N.gc(),N.bd(40,gi,5,3,"ng-container",27),N.bd(41,ui,3,4,"button",229),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(4),N.gd(" ",N.xc(5,15,"Add new")," ",N.xc(6,17,"Department")," "),N.Nb(11),N.fd("",N.xc(16,19,"Name")," "),N.Nb(4),N.Gc("placeholder","",N.xc(20,21,"Name")," (",N.xc(21,23,"Vietnamese"),")"),N.Dc("ngModel",e.entitySubIn.dept_name_l),N.Nb(5),N.Gc("placeholder","",N.xc(25,25,"Name")," (",N.xc(26,27,"English"),")"),N.Dc("ngModel",e.entitySubIn.dept_name_e),N.Nb(5),N.ed(N.xc(30,29,"Status")),N.Nb(3),N.Dc("ngModel",e.entitySubIn.is_active),N.Nb(2),N.ed(N.xc(35,31,e.entitySubIn.is_active?"activated":"not activated")),N.Nb(4),N.fd(" ",N.xc(39,33,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSaveSub1),N.Nb(1),N.Dc("ngIf",!e.isSaveSub1)}}const bi=function(e,t){return{url:e,password:t}};function _i(e,t){if(1&e&&N.cc(0,"pdf-viewer",276),2&e){const e=N.vc(2);N.Dc("src",N.Jc(6,bi,e._originFile,e._password))("stick-to-page",!0)("original-size",!1)("show-all",!0)("autoresize",!0)("render-text",!1)}}function pi(e,t){1&e&&(N.hc(0,"h3"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Processing")))}function mi(e,t){if(1&e){const e=N.ic();N.hc(0,"div",67),N.hc(1,"h4",68),N.dd(2),N.gc(),N.hc(3,"button",69),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(4,"span",70),N.dd(5,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(6,"div",71),N.hc(7,"div",272),N.bd(8,_i,1,9,"pdf-viewer",273),N.bd(9,pi,3,3,"h3",27),N.gc(),N.gc(),N.hc(10,"div",186),N.hc(11,"button",274),N.rc("click",function(){return N.Uc(e),N.vc().print()}),N.cc(12,"i",275),N.dd(13),N.wc(14,"translate"),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(2),N.fd(" ",e.entity.title," "),N.Nb(6),N.Dc("ngIf",!e.isLoadingView),N.Nb(1),N.Dc("ngIf",e.isLoadingView),N.Nb(4),N.fd(" ",N.xc(14,4,"Print")," ")}}function vi(e,t){1&e&&(N.fc(0),N.hc(1,"a",190),N.cc(2,"img",191),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function yi(e,t){if(1&e){const e=N.ic();N.hc(0,"a",285),N.rc("click",function(){return N.Uc(e),N.vc(2)._submitRefused()}),N.dd(1),N.wc(2,"translate"),N.gc()}2&e&&(N.Nb(1),N.fd(" ",N.xc(2,1,"Save")," "))}function Si(e,t){if(1&e){const e=N.ic();N.hc(0,"div",67),N.hc(1,"h4",68),N.dd(2),N.wc(3,"translate"),N.gc(),N.hc(4,"button",69),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(5,"span",70),N.dd(6,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(7,"div",71),N.hc(8,"div",238),N.hc(9,"div",73),N.hc(10,"label",277),N.dd(11),N.wc(12,"translate"),N.gc(),N.hc(13,"textarea",278),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entityApprove.content=t}),N.gc(),N.gc(),N.hc(14,"div",73),N.hc(15,"label",279),N.dd(16),N.wc(17,"translate"),N.gc(),N.hc(18,"input",280),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entityApprove.approved_cost=t}),N.gc(),N.gc(),N.hc(19,"div",73),N.hc(20,"label",279),N.dd(21),N.wc(22,"translate"),N.gc(),N.hc(23,"input",281,282),N.rc("change",function(t){N.Uc(e);const i=N.Rc(24);return N.vc().fileEventApproved(t,i)}),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(25,"div",186),N.hc(26,"a",283),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(27),N.wc(28,"translate"),N.gc(),N.bd(29,vi,5,3,"ng-container",27),N.bd(30,yi,3,3,"a",284),N.gc()}if(2&e){const e=N.vc();N.Nb(2),N.fd(" ",N.xc(3,9,"Agree"==e._flagModalApprove?"Agree":"Disagree")," "),N.Nb(9),N.ed(N.xc(12,11,"Reason")),N.Nb(2),N.Dc("ngModel",e.entityApprove.content),N.Nb(3),N.ed(N.xc(17,13,"Approved cost")),N.Nb(2),N.Dc("ngModel",e.entityApprove.approved_cost),N.Nb(3),N.fd("",N.xc(22,15,"Attachment (if any)")," (.doc,.docx,.pdf)"),N.Nb(6),N.fd(" ",N.xc(28,17,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSaveApprove),N.Nb(1),N.Dc("ngIf",!e.isSaveApprove)}}q.a.vfs=K.a.pdfMake.vfs;let Ni=(()=>{class e{constructor(e,t,i,c,n,a,s,l,o,r){this._authenService=e,this._dataService=t,this._route=i,this._notifyService=c,this._uploadService=n,this._excelService=a,this._numberFormat=s,this.modalService=l,this._utilyService=o,this.sanitizer=r,this._secret="j@s0n1980!!!",this._current=9,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._requestslist=[],this.isSave=!1,this._title="",this._subTitle="",this._flagModal="ADD",this.entity={},this._flagButton=1,this._profiles=[],this._catprofiles=[],this.related_requests=[],this.checkAllIDs=!1,this.entityUpload={},this.entityUploadMore={},this.entityUpload1={},this.filesToUpload=[],this.selectedFileNames=[],this.jfile=null,this.jfile1=null,this.jfileProposed=null,this.jfileMoreProposed=[],this.formData=new FormData,this._flagSubModal="ADD",this.entitySub={},this.isSaveSub=!1,this._documents=[],this._catdocuments=[],this.entitySubIn={},this.isSaveSub1=!1,this._selectUser=null,this._selectDept=null,this._getusers=[],this._titles=[],this._departments=[],this.expandKeys=[],this.expandKeys1=[],this._urlMicrosoft="https://view.officeapps.live.com/op/embed.aspx?src=",this._originFile=null,this.other_attached_files=[],this.handling_users=[],this._displayContent=null,this.isSaveSigned=!1,this._flagActive=!1,this._histories=[],this._diagrams=[],this._flagShow=!1,this._flagModalApprove="Agree",this.entityApprove={},this.isSaveApprove=!1,this.filesToUploadApprove=[],this.chats=[],this._contents="",this.baseFolder=$.a.BASE_API,this.isLoadingView=!1,this._password="ciphertext",this.socket=z()($.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",e=>{this.loadData(),null!=this.entity.id&&(this.loadProposedProfileDetailById(this.entity.id),this.loadChat(this.entity.id))})}ngOnDestroy(){let e=window.CKEDITOR;if(e.instances)for(var t in e.instances)e.instances[t].destroy()}loadData(){this._isLoading=!0;let e={};e.page=this.pageIndex,e.limit=this.pageSize,e.filter=this._keyword,e.createdby=this.user.id,e.current=this._current,this._dataService.post("/cat-submission/getall",e).subscribe(e=>{let t=[];for(let i of e.data){for(let t of i.handle_users.data)t.show=!1;for(let t of i.handle_users.data){let e=!1;if(i.handle_users.data.filter(e=>e.order==t.order&&null==e.timestamp).length>=1){for(let e of i.handle_users.data.filter(e=>e.order==t.order&&null==e.timestamp))e.show=!0;e=!0}if(e)break}let e=[],c=null;e=i.handle_users.data.filter(e=>3!=e.role),c=0==i.handle_users.data.filter(e=>3==e.role).length?null:i.handle_users.data.filter(e=>3==e.role)[0],i.reviews=e,i.approve=c,t.push(i)}this._requestslist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages,this._isLoading=!1})}loadChat(e){let t={};t.join_room=e,this._dataService.post("/chat/getallnp",t).subscribe(e=>{this.chats=e.data,console.log("chats",this.chats)})}_addChat(){if(""!=this._contents&&null!=this.entity.id){let e={};e.text=this._contents,e.join_room=this.entity.id,e.depended_id=this.user.id,this._dataService.post("/chat/add",e).subscribe(e=>{this.socket.emit("refresh",{}),this._flagModal="UPDATE",this._flagButton=4,this._contents=""})}}_switch(e){this._current=e,this.socket.emit("refresh",{})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadUsersWithDept(){let e={};e.short_code=this.user.short_code,this._dataService.post("/cat-submission/getallUsersNP",e).subscribe(e=>{let t=[];for(let c of e.data)t.push({key:c.id,title:c.name,parent_id:null,value:c.id,jtitle:"en"==this.user.lang?c.title_name_e:c.title_name_l,jdept:c.department_ids.data});let i=this._utilyService.UnflattenFunc(t);this._getusers=i})}addItemNew(){if(this._selectUser=null,0==this.handling_users.length)this.handling_users.push({flag:!1,id:1,order:1,role:"1",time:1,timestamp:null,user:null,allow:!1});else{let e=0;for(let t of this.handling_users)null!=t.user&&null!=t.role||(e+=1);if(0!=e)return void this._notifyService.showWarning("e"==this.user.lang?v.a.MSG_ERROR_EMPTY_EN:v.a.MSG_ERROR_EMPTY,"e"==this.user.lang?v.a.error_title_en:v.a.error_title);for(let t of this.handling_users.filter(e=>!e.flag))t.flag=!0;0==this.handling_users.filter(e=>!e.flag).length&&this.handling_users.push({id:this.handling_users.length+1,flag:!1,order:1,role:"1",time:1,timestamp:null,user:null,allow:!1})}this.handling_users.sort((e,t)=>e.id>t.id||e.id==t.id&&e.order>t.order?1:-1),this.entity.handle_users.data=this.handling_users}removeItemNew(e){let t=[],i=1;for(let c of this.handling_users.filter(t=>t.id!=e.id))t.push({id:i,order:c.order,user:c.user,role:c.role,time:c.time,flag:c.flag,allow:c.allow}),i+=1;t.sort((e,t)=>e.id>t.id||e.id==t.id&&e.order>t.order?1:-1),this.entity.handle_users.data=this.handling_users=t}_getUserNew(e,t){console.log(e,t);let i=this._getusers.filter(e=>e.key==t)[0],c="";for(let n of i.jdept)c+=("en"==this.user.lang?n.dept_name_e:n.dept_name_l)+",";this.handling_users.filter(t=>t.id==e.id)[0].user={dept_name_e:""==c?"":c.substr(0,c.length-1),dept_name_l:""==c?"":c.substr(0,c.length-1),id:t,key:"",name:i.title,title:"",title_name_e:i.jtitle,title_name_l:i.jtitle,value:""},this.handling_users.sort((e,t)=>e.id>t.id||e.id==t.id&&e.order>t.order?1:-1),this.entity.handle_users.data=this.handling_users}_openModal(e,t){this._flagActive=!1,this.loadProfilesNP(),this.loadUsersWithDept(),null==t?(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.title=null,this.entity.profile_cat_id=null,this.entity.estimated_cost=null,this.entity.content=null,this.entity.critical_level=0,this.entity.priority_level=0,this.entity.related_ids={data:[]},this.entity.attached_files=null,this.entity.handle_users={data:[]},this.entity.is_active=0,this.entity.created_by=this.user.id,this.handling_users=[],this.other_attached_files=[]):(this._flagModal="UPDATE",this._title="- "+t.title+" (#: "+t.code+")",this.loadChat(t.id),this.loadProposedProfileDetailById(t.id)),this.modalService.open(e,{size:"xl",centered:!0,backdrop:!1})}_diagramChange(e){null==e?(this.entity.handle_users={data:[]},this.handling_users=[],this._originFile=null):(this.handling_users=[],this.loadDetailProfileById(e))}submissionChange(e){if(this.entity.is_active=0==e?0:1,"ADD"==this._flagModal){if(0==this.entity.handle_users.data.length||null==this.entity.title)return void this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title);null==this.attached_file&&0==this.filesToUpload.length?(this.isSave=!0,console.log("No file"),this._addProposed(this.entity)):this._dataService.post("/cat-submission/addProposed",this.entity).subscribe(e=>{console.log(e),"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):this._processUploadProposed(this.jfileProposed,this.filesToUpload,e.data)},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}else this.updateSubmissionChanges()}submissionChangeForSign(){this.entity.is_active=1,this.updateSubmissionChanges()}updateSubmissionChanges(){this.handling_users.sort((e,t)=>e.order>t.order||e.order==t.order&&e.order>t.order?1:-1),this.entity.handle_users.data=this.handling_users,this.handling_users.filter(e=>null==e.order||null==e.user||null==e.role||null==e.time).length>0?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EMPTY_EN:v.a.MSG_ERROR_EMPTY,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):this._dataService.post("/cat-submission/updateProposed",this.entity).subscribe(e=>{0!=this.entity.is_active&&(this.socket.emit("refresh",{}),this.modalService.dismissAll(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_UPDATE_EN:v.a.MSG_UPDATE,"OK"))})}_addProposed(e){this._dataService.post("/cat-submission/addProposed",e).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.title=null,this.entity.profile_cat_id=null,this.entity.estimated_cost=null,this.entity.content=null,this.entity.critical_level=0,this.entity.priority_level=0,this.entity.related_ids={data:[]},this.entity.attached_files=null,this.entity.handle_users={data:[]},this.entity.is_active=0,this.socket.emit("refresh",{}),this.modalService.dismissAll(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}loadDetailProfileById(e){let t={};t.id=e,t.userid=this.user.id,this._dataService.post("/cat-submission/detailByUser",t).subscribe(e=>{console.log("Detail of Profile",e);let t=[];if("failed"==e.result)this.entity.handle_users.data=[],this.handling_users=[],this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_NOT_FOUND_EN:v.a.MSG_ERROR_NOT_FOUND,"en"==this.user.lang?v.a.error_title_en:v.a.error_title);else{for(let i of e.data.handle_users.data)t.push({id:i.id,order:i.order,user:i.user,role:i.role,time:i.time,flag:!0,timestamp:null,allow:!0});t.sort((e,t)=>e.id>t.id||e.id==t.id&&e.order>t.order?1:-1),this.entity.handle_users.data=t,this.handling_users=t,this._originFile=null!=e.data.attached_file?"https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf":null,null!=this.entity.id&&this.updateSubmissionChanges()}})}loadDetailProfileByIdWithFile(e){let t={};t.id=e,t.userid=this.user.id,this._dataService.post("/cat-submission/detailByUser",t).subscribe(e=>{this._originFile=null!=e.data.attached_file?"https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf":null})}_chooseButton(e){this._flagButton=e}removeAttachment(e,t,i){S.a.fire({title:"en"==this.user.lang?v.a.are_you_sure_en:v.a.are_you_sure,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.a.cancel_en:v.a.cancel,confirmButtonText:"en"==this.user.lang?v.a.confirmtext_en:v.a.confirmtext}).then(c=>{if(c.value){let c={};c.id=e,c.path=t,c.stat=i,this._dataService.post("/cat-submission/removeAttachment",c).subscribe(e=>{console.log(e),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_DELETE_EN:v.a.MSG_DELETE,"OK"),this.socket.emit("refresh",{})},()=>{this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}})}loadProposedProfileDetailById(e){this._flagButton=4==this._flagButton?4:1,this._diagrams=[],this._histories=[];let t={};t.id=e,this._dataService.post("/cat-submission/detailProposed",t).subscribe(e=>{this.entity=e.data,this._displayContent=null==e.data.content?"":this.sanitizer.bypassSecurityTrustHtml(e.data.content);let t=[];for(let i of e.data.handle_users.data)t.push({id:i.id,order:i.order,user:i.user,role:i.role,time:i.time,flag:!0,timestamp:i.timestamp,allow:!0});if(this.handling_users=t,0==this.entity.is_active)this.handling_users.sort((e,t)=>e.order>t.order||e.order==t.order&&e.order>t.order?1:-1);else{for(let e of this.handling_users)e.show=!1;for(let e of this.handling_users){let t=!1;if(this.handling_users.filter(t=>t.order==e.order&&null==t.timestamp).length>=1){for(let t of this.handling_users.filter(t=>t.order==e.order&&null==t.timestamp))t.show=!0;t=!0}if(t)break}this.handling_users.sort((e,t)=>e.order>t.order||e.order==t.order&&e.order>t.order?1:-1)}if(this.entity.handle_users.data=t,this.other_attached_files=null==e.data.other_attached_files?[]:e.data.other_attached_files.data,4==this.entity.is_active)this._flagActive=!1;else if(0==t.filter(e=>e.user.id==this.user.id).length)null!=e.data.logs&&null!=e.data.logs.timestamp&&(this._flagActive=!0);else for(let i=0;i<t.filter(e=>e.user.id==this.user.id).length;i++)this._flagActive=null!=t.filter(e=>e.user.id==this.user.id)[i].timestamp;if(null!=e.data.logs){this._diagrams=e.data.logs.diagrams,this._diagrams.sort((e,t)=>e.order>t.order||e.order==t.order&&e.order>t.order?1:-1),this._histories=e.data.logs.history,this._histories.sort((e,t)=>t.id>e.id||t.id==e.id&&t.id>e.id?1:-1);let t=1;for(let e of this._diagrams.filter(e=>e.flag&&null==e.timestamp)){if(!(t<=this._diagrams.filter(t=>t.order==e.order).length))break;e.flag=!1,t+=1}null==e.data.logs?this._flagShow=!1:this._diagrams.filter(e=>e.user.id==this.user.id&&!e.flag).length>0?(console.log("test here"),this._flagShow=!0):this._flagShow=!1,console.log("Flag",this._flagShow)}this.loadDetailProfileByIdWithFile(e.data.profile_cat_id)})}toggleCheckAll(e){e.currentTarget.checked?this.selectAllItems():this.unselectAllItems()}onTouched(){}onSelectionChange(e){if(Array.isArray(e)){const t=e.map(e=>e.id);this.entity.organizations=[...t],this.onChange([...t])}this.onTouched()}onChange(e){}writeValue(e){this.combo.select([...e])}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}selectAllItems(){const e=this.related_requests.map(e=>e.id);this.onChange([...e])}unselectAllItems(){this.entity.related_ids=[],this.checkAllIDs=!1,this.onChange([])}_processUploadProposed(e,t,i){let c=0,n=0;if(null==e)return void this._notifyService.showError("en"==this.user.lang?v.a.recheck_file_en:v.a.recheck_file,"en"==this.user.lang?v.a.error_title_en:v.a.error_title);c=1,t.length>0&&(n=1);let a=[],s=null;if(s=e.files,n>0&&a.push(t),console.log(s),console.log(a),n>0){let c={folder_name:"submissions"};c.id=i.id,console.log("Testing",e.files),this._uploadService.uploadFile("/services/uploads/"+c.id+"/"+c.folder_name,e.files).subscribe(e=>{let c={folder_name:"submissions"};c.id=i.id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+c.id+"/"+c.folder_name,t).subscribe(t=>{this._updateSubmission12(i.id,e.data,t.data)})})}else{let t={folder_name:"submissions"};t.id=i.id,this._uploadService.uploadFile("/services/uploads/"+t.id+"/"+t.folder_name,e.files).subscribe(e=>{this._updateSubmission1(i.id,e.data)})}}_updateSubmission1(e,t){let i={};i.id=e,i.path=t,this._dataService.post("/cat-submission/updateSubmission1",i).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("ADD"==this._flagModal?"en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO:"en"==this.user.lang?v.a.MSG_UPDATENO_EN:v.a.MSG_UPDATENO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):"ADD"==this._flagModal?(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.title=null,this.entity.profile_cat_id=null,this.entity.estimated_cost=null,this.entity.content=null,this.entity.critical_level=0,this.entity.priority_level=0,this.entity.related_ids={data:[]},this.entity.attached_files=null,this.entity.handle_users={data:[]},this.handling_users=[],this.entity.is_active=0,this.socket.emit("refresh",{}),this.modalService.dismissAll(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK")):(this._flagModal="UPDATE",this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_UPDATE_EN:v.a.MSG_UPDATE,"OK"))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}_updateSubmission2(e,t){this.filesToUpload=[];let i={};i.id=e,i.paths=t,this._dataService.post("/cat-submission/updateSubmission2",i).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):"ADD"==this._flagModal?(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.title=null,this.entity.profile_cat_id=null,this.entity.estimated_cost=null,this.entity.content=null,this.entity.critical_level=0,this.entity.priority_level=0,this.entity.related_ids={data:[]},this.entity.attached_files=null,this.entity.handle_users={data:[]},this.handling_users=[],this.entity.is_active=0,this.socket.emit("refresh",{}),this.modalService.dismissAll(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK")):(this._flagModal="UPDATE",this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_UPDATE_EN:v.a.MSG_UPDATE,"OK"))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}_updateSubmission12(e,t,i){this.filesToUpload=[];let c={};c.id=e,c.path=t,c.paths=i,this._dataService.post("/cat-submission/updateSubmission12",c).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.title=null,this.entity.profile_cat_id=null,this.entity.estimated_cost=null,this.entity.content=null,this.entity.critical_level=0,this.entity.priority_level=0,this.entity.related_ids={data:[]},this.entity.attached_files=null,this.entity.handle_users={data:[]},this.handling_users=[],this.entity.is_active=0,this.socket.emit("refresh",{}),this.modalService.dismissAll(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}fileEvent(e,t){var i=e.target.files[0];if(void 0===i||void 0===i.name)this.attached_file=null,this.entityUpload.fileUpload=null,this._notifyService.showError("en"==this.user.lang?v.a.recheck_file_en:v.a.recheck_file,"en"==this.user.lang?v.a.error_title_en:v.a.error_title);else{this.attached_file=i.name;let c=this.attached_file.split(".").pop();"doc"===c||"docx"===c||"pdf"===c?(this.jfileProposed=e.target,null!=this.entity.id&&(this._processUpload(this.jfileProposed,this.entity),this.attached_file=null,this.entityUpload.fileUpload=null,t.value="")):(this._notifyService.showError("en"==this.user.lang?v.a.format_incorrect_en:v.a.format_incorrect,"en"==this.user.lang?v.a.error_title_en:v.a.error_title),this.attached_file=null,this.entityUpload.fileUpload=null,t.value="")}}_processUpload(e,t){if(null==e)this._notifyService.showError("en"==this.user.lang?v.a.recheck_file_en:v.a.recheck_file,"en"==this.user.lang?v.a.error_title_en:v.a.error_title);else{console.log("Executed",e.files);let i={folder_name:"submissions"};i.id=t.id,this._uploadService.uploadFile("/services/uploads/"+i.id+"/"+i.folder_name,e.files).subscribe(e=>{this._updateSubmission1(t.id,e.data)})}}_updateSubmissionById(e,t){let i={};i.id=e,i.pathFile=t,this._dataService.post("/cat-submission/updateSubmissionById",i).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.title=null,this.entity.profile_cat_id=null,this.entity.estimated_cost=null,this.entity.content=null,this.entity.critical_level=0,this.entity.priority_level=0,this.entity.related_ids={data:[]},this.entity.attached_files=null,this.entity.handle_users={data:[]},this.entity.is_active=0,this.jfile=null,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}fileEventMore(e,t){this.filesToUpload=e.target.files;let i=[];for(var c=0;c<e.target.files.length;c++)i.push(e.target.files[c]);null!=this.entity.id&&(this._processUploadProposedAfter(this.filesToUpload,this.entity),this.filesToUpload=[],t.value=[])}_processUploadProposedAfter(e,t){let i={folder_name:"submissions"};i.id=t.id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+i.id+"/"+i.folder_name,e).subscribe(e=>{this._updateSubmission2(t.id,e.data)})}_addItemHandle(e){if(console.log(this.entitySub,this.isSaveSub),this.loadDeptNP(),this._selectDept="all",null==e)if(0==this.entitySub.handle_users.data.length)this.entitySub.handle_users.data.push({id:1,order:1,user:null,role:null,time:1,flag:!1});else{let e=0;for(let t of this.entitySub.handle_users.data)null==t.user?(t.user={title:"en"==this.user.lang?"All departments":"\xc1p d\u1ee5ng t\u1ea5t c\u1ea3",key:"all",value:"all"},null==t.role&&(e+=1)):null==t.role&&(e+=1);if(0!=e)return void this._notifyService.showWarning("e"==this.user.lang?v.a.MSG_ERROR_EMPTY_EN:v.a.MSG_ERROR_EMPTY,"e"==this.user.lang?v.a.error_title_en:v.a.error_title);for(let t of this.entitySub.handle_users.data.filter(e=>!e.flag))t.flag=!0;0==this.entitySub.handle_users.data.filter(e=>!e.flag).length&&this.entitySub.handle_users.data.push({id:this.entitySub.handle_users.data.length+1,order:1,user:null,role:null,time:1,flag:!1})}console.log(this.entitySub)}_getUser(e,t){if(console.log(e,t),null!=t&&null!=e.role){for(let i of this.entitySub.handle_users.data)i.id==e.id&&(i.user="all"!=t?{title:this._departments.filter(e=>e.key==t)[0].title,key:this._departments.filter(e=>e.key==t)[0].key,value:this._departments.filter(e=>e.key==t)[0].value}:{title:"en"==this.user.lang?"All departments":"\xc1p d\u1ee5ng t\u1ea5t c\u1ea3",key:"all",value:"all"});console.log("Get change",this.entitySub)}else this._notifyService.showWarning("e"==this.user.lang?v.a.MSG_ERROR_EMPTY_EN:v.a.MSG_ERROR_EMPTY,"e"==this.user.lang?v.a.error_title_en:v.a.error_title)}_popupTitle(e,t){this.entitySubIn={},this.entitySubIn.name_l=null,this.entitySubIn.name_e=null,this.entitySubIn.is_active=!0,this.entitySubIn.short_code=this.user.short_code,this.modalService.open(e,{size:"md",centered:!0})}saveChangeTitle(){this.isSaveSub1=!0,this.entitySubIn.code=this.entitySubIn.code.toUpperCase(),this._dataService.post("/cat-submission/addTitle",this.entitySubIn).subscribe(e=>{console.log(e),this.isSaveSub1=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.entitySubIn={},this.entitySubIn.name_l=null,this.entitySubIn.name_e=null,this.entitySubIn.is_active=!0,this.entitySubIn.short_code=this.user.short_code,this.loadTitleNP(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSaveSub1=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}loadTitleNP(){this._dataService.post("/cat-submission/getallTitlesNP",null).subscribe(e=>{this._titles=e.data})}_popupDepartment(e,t){this.entitySubIn={},this.entitySubIn.dept_name_l=null,this.entitySubIn.dept_name_e=null,this.entitySubIn.is_active=!0,this.entitySubIn.short_code=this.user.short_code,this.modalService.open(e,{size:"md",centered:!0})}saveChangeDepartment(){this.isSaveSub1=!0,this._dataService.post("/dept/add",this.entitySubIn).subscribe(e=>{this.isSaveSub1=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.entitySubIn={},this.entitySubIn.dept_name_l=null,this.entitySubIn.dept_name_e=null,this.entitySubIn.is_active=!0,this.entitySubIn.short_code=this.user.short_code,this.loadDeptNP(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSaveSub1=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}loadDeptNP(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{let t=[];t.push({key:"all",title:"en"==this.user.lang?"All":"\xc1p d\u1ee5ng t\u1ea5t c\u1ea3",is_active:!1,parent_id:null,value:"all"});for(let c of e.data)t.push({key:c.id,title:"en"==this.user.lang?c.dept_name_e:c.dept_name_l,parent_id:c.parent_id,value:c.id});let i=this._utilyService.UnflattenFunc(t);this._departments=i})}loadProfilesNP(){this._dataService.post("/cat-submission/getallMainProfileNP",{short_code:this.user.short_code}).subscribe(e=>{this._profiles=e.data})}_removeItemHandle(e){let t=[],i=1;for(let c of this.entitySub.handle_users.data.filter(t=>t.id!=e.id))t.push({id:i,order:c.order,user:c.user,role:c.role,time:c.time,flag:c.flag}),i+=1;this.entitySub.handle_users.data=t,console.log(this.entitySub)}_popupProfile(e,t){this.loadCatDocNP(),this.loadCatProfileNP(),null==t?(this._flagSubModal="ADD",this._subTitle="en"==this.user.lang?"Type of profile":"Lo\u1ea1i h\u1ed3 s\u01a1",this.entitySub={},this.entitySub.id=null,this.entitySub.profile_group_id=null,this.entitySub.code=null,this.entitySub.title=null,this.entitySub.document_id=null,this.entitySub.description=null,this.entitySub.handle_users={data:[]},this.entitySub.estimated_cost=null,this.entitySub.attached_file=null,this.entitySub.is_active=!0,this.jfile1=null):(this._flagSubModal="UPDATE",this.entitySub=t),this.modalService.open(e,{size:"xl",centered:!0,backdrop:!1})}saveChangeP(){console.log(this.entitySub),0!=this.entitySub.handle_users.data.length?null==this.attached_file1?(this.isSaveSub=!0,this._dataService.post("/cat-submission/add",this.entitySub).subscribe(e=>{console.log(e),this.isSaveSub=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.entitySub={},this.entitySub.id=null,this.entitySub.profile_group_id=null,this.entitySub.code=null,this.entitySub.title=null,this.entitySub.document_id=null,this.entitySub.description=null,this.entitySub.handle_users={data:[]},this.entitySub.estimated_cost=null,this.entitySub.attached_file=null,this.entitySub.is_active=!0,this.jfile1=null,this.loadProfilesNP(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSaveSub=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})):this._dataService.post("/cat-submission/add",this.entitySub).subscribe(e=>{"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):this._processUpload1(this.jfile1,e.data)},()=>{this.isSaveSub=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)}):this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)}fileEvent1(e,t){var i=e.target.files[0];if(void 0===i||void 0===i.name)this.attached_file1=null,this.entityUpload1.fileUpload=null,this._notifyService.showError("en"==this.user.lang?v.a.recheck_file_en:v.a.recheck_file,"en"==this.user.lang?v.a.error_title_en:v.a.error_title);else{this.attached_file1=i.name;let c=this.attached_file1.split(".").pop();"doc"===c||"docx"===c||"pdf"===c?(console.log("ok"),this.jfile1=e.target):(this._notifyService.showError("en"==this.user.lang?v.a.format_incorrect_en:v.a.format_incorrect,"en"==this.user.lang?v.a.error_title_en:v.a.error_title),this.attached_file1=null,this.entityUpload1.fileUpload=null,t.value="")}}_processUpload1(e,t){if(null==e)this._notifyService.showError("en"==this.user.lang?v.a.recheck_file_en:v.a.recheck_file,"en"==this.user.lang?v.a.error_title_en:v.a.error_title);else{let i={folder_name:"submissions"};i.id=t.id,this._uploadService.uploadFile("/services/uploads/"+i.id+"/"+i.folder_name,e.files).subscribe(e=>{this._updateProfileById(t.id,e.data)})}}_updateProfileById(e,t){let i={};i.id=e,i.pathFile=t,this._dataService.post("/cat-submission/updateProfileById",i).subscribe(e=>{this.isSaveSub=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.entitySub={},this.entitySub.id=null,this.entitySub.profile_group_id=null,this.entitySub.code=null,this.entitySub.title=null,this.entitySub.document_id=null,this.entitySub.description=null,this.entitySub.handle_users={data:[]},this.entitySub.estimated_cost=null,this.entitySub.attached_file=null,this.entitySub.is_active=!0,this.jfile1=null,this.loadProfilesNP(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSaveSub=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}_popupCategory(e,t){this.entitySubIn={},this.entitySubIn.name_l=null,this.entitySubIn.name_e=null,this.entitySubIn.is_active=!0,this.entitySubIn.short_code=this.user.short_code,this.modalService.open(e,{size:"md",centered:!0})}loadCatProfileNP(){this._dataService.post("/cat-submission/getallProfileNP",{short_code:this.user.short_code}).subscribe(e=>{this._catprofiles=e.data})}removeBlank(){this.entitySubIn.code=null==this.entitySubIn.code?null:this.entitySubIn.code.replace(" ","")}removeBlankTypeProfile(){this.entitySub.code=null==this.entitySub.code?null:this.entitySub.code.replace(" ","")}saveChangeProfileGroup(){this.isSaveSub1=!0,this.entitySubIn.code=this.entitySubIn.code.toUpperCase(),console.log(this.entitySubIn),this._dataService.post("/cat-submission/addProfile",this.entitySubIn).subscribe(e=>{this.isSaveSub1=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.entitySubIn={},this.entitySubIn.name_l=null,this.entitySubIn.name_e=null,this.entitySubIn.is_active=!0,this.loadCatProfileNP(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSaveSub1=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}_popupCategory1(e,t){this.entitySubIn={},this.entitySubIn.name_l=null,this.entitySubIn.name_e=null,this.entitySubIn.is_active=!0,this.entitySubIn.short_code=this.user.short_code,this.modalService.open(e,{size:"md",centered:!0})}saveChangeProfileGroup1(){this.isSaveSub1=!0,this.entitySubIn.code=this.entitySubIn.code.toUpperCase(),this._dataService.post("/cat-submission/addDocument",this.entitySubIn).subscribe(e=>{this.isSaveSub1=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.entitySubIn={},this.entitySubIn.name_l=null,this.entitySubIn.name_e=null,this.entitySubIn.is_active=!0,this.loadCatDocNP(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSaveSub1=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}loadCatDocNP(){this._dataService.post("/cat-submission/getallDocumentsNP",{short_code:this.user.short_code}).subscribe(e=>{this._catdocuments=e.data})}openViewDoc(e,t){this.processPDF(this.entity),this.modalService.open(e,{size:"lg",centered:!0})}processPDF(e){this.isLoadingView=!0,this._dataService.post("/cat-submission/convertPDF",{id:e.id}).subscribe(e=>{console.log("Final",e),console.log(this._password),this._originFile=null,setTimeout(()=>{this._originFile=$.a.BASE_API+e.data,this.isLoadingView=!1},2e3)})}print(){q.a.createPdf({content:"html"}).open()}cancelSubmission(){S.a.fire({title:"en"==this.user.lang?v.a.are_you_sure_cancel_en:v.a.are_you_sure_cancel,text:this.entity.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.a.cancel_en:v.a.cancel,confirmButtonText:"en"==this.user.lang?v.a.confirmtext_en:v.a.confirmtext}).then(e=>{e.value&&(this.entity.is_active=4,this._dataService.post("/cat-submission/updateProposed",this.entity).subscribe(e=>{console.log(e),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_CANCEL_EN:v.a.MSG_CANCEL,"en"==this.user.lang?v.a.cancel_en:v.a.cancel),this.modalService.dismissAll(),this.socket.emit("refresh",{})},()=>{this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)}))})}approvedByUser(e,t){if(this.isSaveSigned=!0,console.log(e,t),0==e)this.entity.is_active=1,this.updateSubmissionChanges();else{console.log("Signed");let e={};e.id=this.entity.id,e.userid=this.user.id,e.status=t,e.content=null,e.approved_cost=null,this._dataService.post("/cat-submission/approvedByUserId",e).subscribe(e=>{this.isSaveSigned=!1,"failed"!=e.result&&(this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_UPDATE_EN:v.a.MSG_UPDATE,"OK"),this.modalService.dismissAll(),this.socket.emit("refresh",{}))},()=>{this.isSaveSigned=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}}disagreeSubmission(e,t){S.a.fire({title:"en"==this.user.lang?v.a.are_you_sure_disagree_en:v.a.are_you_sure_disagree,text:this.entity.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.a.cancel_en:v.a.cancel,confirmButtonText:"en"==this.user.lang?v.a.confirmtext_en:v.a.confirmtext}).then(i=>{i.value&&this.popupApprove(e,t)})}popupApprove(e,t){this.entityApprove.content=null,this.entityApprove.approved_cost=null,this._flagModalApprove=null==t?"Agree":"Disagree",this.modalService.open(e,{size:"md",centered:!0,backdrop:!1})}_submitRefused(){if(console.log(this.entityApprove,this.filesToUploadApprove),this.filesToUploadApprove.length>0)console.log("Got files"),this.isSaveApprove=!0,this._processUploadDisagreeAfter(this.filesToUploadApprove);else{this.isSaveApprove=!0;let e={};e.id=this.entity.id,e.userid=this.user.id,e.status="Agree"==this._flagModalApprove?1:0,e.content=this.entityApprove.content,e.approved_cost=this.entityApprove.approved_cost,e.files=[],this._dataService.post("/cat-submission/approvedByUserId",e).subscribe(e=>{console.log("Why",e),this.isSaveApprove=!1,"failed"!=e.result&&(this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_UPDATE_EN:v.a.MSG_UPDATE,"OK"),this.modalService.dismissAll(),this.socket.emit("refresh",{}))},()=>{this.isSaveApprove=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}}fileEventApproved(e,t){this.filesToUploadApprove=e.target.files}_processUploadDisagreeAfter(e){let t={folder_name:"submissions"};t.id=this.entity.id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+t.id+"/"+t.folder_name,e).subscribe(e=>{let t={};t.id=this.entity.id,t.userid=this.user.id,t.status=0,t.content=this.entityApprove.content,t.approved_cost=this.entityApprove.approved_cost,t.files=e.data,this._dataService.post("/cat-submission/approvedByUserId",t).subscribe(e=>{this.isSaveApprove=!1,"failed"!=e.result&&(this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_UPDATE_EN:v.a.MSG_UPDATE,"OK"),this.modalService.dismissAll(),this.socket.emit("refresh",{}))},()=>{this.isSaveApprove=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})},()=>{this.isSaveApprove=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}submissionRecall(){S.a.fire({title:"en"==this.user.lang?v.a.are_you_sure_recall_en:v.a.are_you_sure_recall,text:this.entity.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.a.cancel_en:v.a.cancel,confirmButtonText:"en"==this.user.lang?v.a.confirmtext_en:v.a.confirmtext}).then(e=>{if(e.value){if(this.entity.logs.diagrams.filter(e=>0!=e.id&&null!=e.timestamp).length>0)return this._notifyService.showError("en"==this.user.lang?v.a.MSG_UPDATENO_EN:v.a.MSG_UPDATENO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title),void this.modalService.dismissAll();this.entity.is_active=2,this.updateSubmissionChanges()}})}}return e.\u0275fac=function(t){return new(t||e)(N.bc(l.a),N.bc(s.a),N.bc(m.d),N.bc(D.a),N.bc(a.a),N.bc(n.a),N.bc(w.a),N.bc(x.s),N.bc(M.a),N.bc(H.b))},e.\u0275cmp=N.Vb({type:e,selectors:[["app-subm-requests"]],viewQuery:function(e,t){if(1&e&&(N.jd(J,1),N.jd(Z,1),N.jd(ee,3),N.jd(te,1),N.jd(ie,1)),2&e){let e;N.Qc(e=N.sc())&&(t.ckeEditor=e.first),N.Qc(e=N.sc())&&(t.ckeEditor1=e.first),N.Qc(e=N.sc())&&(t.combo=e.first),N.Qc(e=N.sc())&&(t.attached_file=e.first),N.Qc(e=N.sc())&&(t.attached_file1=e.first)}},decls:98,vars:79,consts:[[1,"container-fluid"],[1,"email-wrap"],[1,"row"],[1,"col-lg-12"],[1,"email-left-aside"],[1,"card"],[1,"card-body"],[1,"btn-group","flex-wrap"],["type","button",3,"ngClass","click"],[1,"fa","fa-clone"],[1,"fa","fa-eye"],[1,"fa","fa-eye-slash"],["type","button",1,"btn","btn-sm","btn-warning"],[1,"fa","fa-search"],["type","button",1,"btn","btn-sm","btn-warning",3,"click"],[1,"fa","fa-plus"],["ngbDropdown","","class","btn-group","role","group",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate",2,"width","15px"],[1,"text-truncate"],[4,"ngIf"],[4,"ngFor","ngForOf"],["contentModal",""],["popupNewProfile",""],["categoryModal",""],["categoryModal1",""],["titleModal",""],["deptModal",""],["popupViewModal",""],["popupApprovedModal",""],["ngbDropdown","","role","group",1,"btn-group"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-primary","dropdown-toggle"],[1,"fa","fa-object-group"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["routerLink","/submissions/type-of-profile","target","_blank",1,"dropdown-item"],[1,"fa","fa-tags"],["routerLink","/submissions/profile-group","target","_blank",1,"dropdown-item"],[1,"fa","fa-map-signs"],["routerLink","/submissions/type-of-document","target","_blank",1,"dropdown-item"],[1,"fa","fa-file-text-o"],["routerLink","/system/departments","target","_blank",1,"dropdown-item"],[1,"fa","fa-users"],["colspan","7",2,"text-align","center"],[1,"text-danger"],[2,"cursor","pointer",3,"click"],[1,"mute"],["class","badge badge-pill badge-danger",4,"ngIf"],["class","badge badge-dark",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-secondary",4,"ngIf"],[1,"badge","badge-pill","badge-danger"],[1,"fa","fa-flag"],[1,"badge","badge-dark"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-success"],[1,"badge","badge-secondary"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[3,"ngClass","click"],[3,"ngClass","click",4,"ngIf"],[1,"form-group","row",3,"ngStyle"],["class","col-md-12","style","max-height: calc(100vh - 300px); overflow-y: auto",4,"ngIf"],["class","col-md-12",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"fa","fa-clock-o"],[1,"fa","fa-comments"],[1,"col-md-4"],["for","title"],["type","text","id","title","name","title","autocomplete","off","required","",3,"ngModel","ngClass","disabled","ngModelChange","change"],["for","profile_id"],["id","profile_id","name","profile_id","bindValue","id","bindLabel","title","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","disabled","ngModelChange","change"],["ng-option-tmp",""],[1,"col-md-2"],["for","critical_level"],["id","critical_level","name","critical_level",3,"ngModel","ngClass","disabled","ngModelChange","change"],["value","0"],["value","1"],["value","2"],["value","3"],["for","priority_level"],["id","priority_level","name","priority_level",3,"ngModel","ngClass","disabled","ngModelChange","change"],[1,"col-md-8"],["for","related_requests"],["bindLabel","name","bindValue","id",3,"multiple","items","closeOnSelect","placeholder","notFoundText","ngModel","disabled","blur","change"],["combo",""],["ng-header-tmp",""],["ng-multi-label-tmp",""],["for","estimated_cost"],["id","estimated_cost","name","estimated_cost","type","text","placeholder","E.g: 5,000,0000","mask","separator.2","thousandSeparator",",",3,"ngClass","ngModel","disabled","change","ngModelChange"],["for","content",1,"jbold"],[3,"innerHtml",4,"ngIf"],["for","attached_file",1,"jbold"],["name","attached_file","type","file","id","attached_file","accept",".pdf,.doc,.docx","class","form-control",3,"change",4,"ngIf"],["type","hidden","name","attached_file0",3,"ngModel","ngModelChange"],["class","card-body btn-showcase",4,"ngIf"],["for","filesToUpload",1,"jbold"],["name","filesToUpload","type","file","multiple","","id","filesToUpload","class","form-control","accept",".pdf,.doc,.docx",3,"change",4,"ngIf"],[1,"card-body","btn-showcase"],["for","diagrams",1,"jbold"],[1,"table"],["href","javascript:;",1,"btn","btn-outline-info","btn-pill","btn-xs",3,"click"],["container","body",3,"ngbTooltip"],["type","checkbox",3,"ngModel","change"],["class","ng-value",4,"ngFor","ngForOf"],["class","ng-value",4,"ngIf"],[1,"ng-value"],[1,"ng-value-label"],["aria-hidden","true",1,"ng-value-icon","right",3,"click"],["type","checkbox",3,"id","checked"],["id","content","name","content","skin","moono-lisa","language","en",3,"ngModel","fullPage","config","ngModelChange","change"],["ckeEditor",""],[3,"innerHtml"],["href","javascript:;",3,"click"],["name","attached_file","type","file","id","attached_file","accept",".pdf,.doc,.docx",1,"form-control",3,"change"],["attached_file",""],["src","../../../../assets/files/ico_file.png","width","25px",1,"mr-sm-1",2,"cursor","pointer",3,"click"],["class","fa fa-trash","style","cursor: pointer",3,"click",4,"ngIf"],[1,"fa","fa-trash",2,"cursor","pointer",3,"click"],["name","filesToUpload","type","file","multiple","","id","filesToUpload","accept",".pdf,.doc,.docx",1,"form-control",3,"change"],["filesToUpload",""],["class","badge badge-pill badge-danger mr-sm-3",4,"ngIf"],[1,"badge","badge-pill","badge-danger","mr-sm-3"],["type","number","min","1","class","form-control","style","width: 70px",3,"name","id","ngModel","ngModelChange","change",4,"ngIf"],["class","form-control","required","",3,"name","ngModel","ngModelChange","change",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["type","number","min","1",1,"form-control",2,"width","70px",3,"name","id","ngModel","ngModelChange","change"],["nzShowSearch","",2,"width","100%",3,"nzExpandedKeys","nzNodes","nzPlaceHolder","ngModel","ngModelChange"],["required","",1,"form-control",3,"name","ngModel","ngModelChange","change"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash"],["colspan","5",1,"text-truncate"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],[1,"col-md-12",2,"max-height","calc(100vh - 300px)","overflow-y","auto"],[1,"timeline-small"],["class","media",4,"ngIf"],["class","media",4,"ngFor","ngForOf"],[1,"media"],["src","../../../../assets/img/avatars/logo-icon-web.png","width","53px",4,"ngIf"],[1,"media-body"],[1,"pull-right","f-14"],["src","../../../../assets/img/avatars/logo-icon-web.png","width","53px"],[1,"timeline-round","m-r-30","timeline-line-1"],["class","mute",4,"ngIf"],[1,"row","chat-box"],[1,"col","pr-0","chat-right-aside"],[1,"chat"],[1,"chat-header","clearfix"],["type","text","name","_contents","id","_contents","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange","change"],[1,"list-inline","float-left","float-sm-right","chat-menu-icons"],[1,"list-inline-item"],["href","javascript:void(0)"],[1,"icon-clip"],[1,"chat-history","chat-msg-box","custom-scrollbar",2,"max-height","300px"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","message my-message mb-0",4,"ngIf","ngIfElse"],["myChat",""],[1,"message","my-message","mb-0"],[1,"message-data","text-right"],[1,"mute","mr-sm-1"],[1,"message-data-time"],["alt","",1,"rounded-circle","float-left","chat-user-img","img-30",3,"src"],["src","../../../../assets/img/icon.png","alt","",1,"rounded-circle","float-left","chat-user-img","img-30"],[1,"message","other-message","pull-right"],[1,"message-data"],["alt","",1,"rounded-circle","float-right","chat-user-img","img-30",3,"src"],["src","../../../../assets/img/icon.png","alt","",1,"rounded-circle","float-right","chat-user-img","img-30"],[1,"image-not-found"],[1,"d-block","start-conversion"],["src","assets/images/start-conversion.jpg"],[1,"modal-footer"],["type","button",1,"btn","btn-light","mr-sm-1",3,"click"],["type","button",1,"btn","btn-secondary","mr-sm-1",3,"click"],["type","button",1,"btn","btn-danger","mr-sm-1",3,"click"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","button","class","btn btn-primary mr-sm-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","mr-sm-1",3,"click"],["href","javascript:;",1,"btn","btn-warning","mr-sm-1"],["type","button","class","btn btn-warning mr-sm-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-warning","mr-sm-1",3,"click"],["type","button","class","btn btn-danger mr-sm-1",3,"click",4,"ngIf"],[1,"form","theme-form",3,"ngSubmit"],["f","ngForm"],[1,"modal-body",2,"max-height","calc(100vh - 300px)","overflow-y","auto"],[1,"col-md-3"],["for","profile_group",1,"jbold"],["id","profile_group","name","profile_group","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","null"],[3,"value",4,"ngFor","ngForOf"],["for","profile_code",1,"jbold"],["type","text","id","profile_code","name","profile_code","required","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","keyup"],["for","profile_name",1,"jbold"],["type","text","id","profile_name","name","profile_name","required","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["for","type_document",1,"jbold"],["name","type_document","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange"],["for","handling_users",1,"jbold"],["colspan","4",1,"text-truncate"],["for","desc",1,"jbold"],["id","desc","name","desc","skin","moono-lisa","language","en",3,"ngModel","fullPage","config","ngModelChange"],["ckeEditor1",""],["for","Status11",1,"jbold"],[1,"checkbox","checkbox-primary"],["id","Status11","type","checkbox","name","Status11",3,"ngModel","ngModelChange"],["for","Status11"],["for","estimated_cost1",1,"jbold"],["id","estimated_cost1","name","estimated_cost1","type","text","placeholder","E.g: 5,000,0000","mask","separator.2","thousandSeparator",",",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-6"],["for","attached_file1",1,"jbold"],["name","attached_file1","type","file","id","attached_file1",1,"form-control",3,"change"],["attached_file1",""],["type","hidden","name","attached_file11","accept",".pdf,.doc,.docx",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],[3,"value"],["type","number","class","form-control","required","","autocomplete","off","style","width: 70px",3,"name","ngModel","ngModelChange",4,"ngIf"],["style","width: 100%","nzShowSearch","",3,"nzExpandedKeys","nzNodes","nzPlaceHolder","ngModel","ngModelChange",4,"ngIf"],["type","number","class","form-control","autocomplete","off","style","width: 70px",3,"name","ngModel","ngModelChange",4,"ngIf"],["type","number","required","","autocomplete","off",1,"form-control",2,"width","70px",3,"name","ngModel","ngModelChange"],["type","number","autocomplete","off",1,"form-control",2,"width","70px",3,"name","ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled"],["formPG","ngForm"],[1,"form-group"],["for","CodePG",1,"jbold"],["type","text","id","CodePG","name","CodePG","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup"],["for","Name1",1,"jbold"],["type","text","id","Name1","name","Name1","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","text","id","Name1a","name","Name1a","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","StatusPG",1,"jbold"],["id","StatusPG","type","checkbox","name","StatusPG",3,"ngModel","ngModelChange"],["for","StatusPG"],["formPG1","ngForm"],["for","CodePG1",1,"jbold"],["type","text","id","CodePG1","name","CodePG1","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup"],["for","Name11",1,"jbold"],["type","text","id","Name11","name","Name11","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","text","id","Name11a","name","Name11a","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","StatusPG1",1,"jbold"],["id","StatusPG1","type","checkbox","name","StatusPG1",3,"ngModel","ngModelChange"],["for","StatusPG1"],["formTitle","ngForm"],["for","CodeTitle",1,"jbold"],["type","text","id","CodeTitle","name","CodeTitle","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup"],["for","NameTitle1",1,"jbold"],["type","text","id","NameTitle1","name","NameTitle1","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","text","id","NameTitle1a","name","NameTitle1a","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","StatusTitle",1,"jbold"],["id","StatusTitle","type","checkbox","name","StatusTitle",3,"ngModel","ngModelChange"],["for","StatusTitle"],["formDept","ngForm"],["for","Department1",1,"jbold"],["type","text","id","Department1","name","Department1","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","text","id","Department1a","name","Department1a","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","StatusDept",1,"jbold"],["id","StatusDept","type","checkbox","name","StatusDept",3,"ngModel","ngModelChange"],["for","StatusDept"],[1,"col-md-12",2,"height","590px"],[3,"src","stick-to-page","original-size","show-all","autoresize","render-text",4,"ngIf"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-print"],[3,"src","stick-to-page","original-size","show-all","autoresize","render-text"],["for","contentApprove"],["id","contentApprove","rows","3","name","contentApprove",1,"form-control",3,"ngModel","ngModelChange"],["for","approved_cost"],["id","approved_cost","type","text","name","approved_cost","placeholder","E.g: 5,000,0000","mask","separator.2","thousandSeparator",",","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["name","filesToUploadApprove","type","file","multiple","","id","filesToUploadApprove","accept",".pdf,.doc,.docx",1,"form-control",3,"change"],["filesToUploadApprove",""],["href","javascript:;",1,"btn","btn-light",3,"click"],["href","javascript:;","class","btn btn-primary",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary",3,"click"]],template:function(e,t){if(1&e){const e=N.ic();N.hc(0,"div",0),N.hc(1,"div",1),N.hc(2,"div",2),N.hc(3,"div",3),N.hc(4,"div",4),N.hc(5,"div",5),N.hc(6,"div",6),N.hc(7,"div",7),N.hc(8,"button",8),N.rc("click",function(){return t._switch(9)}),N.cc(9,"i",9),N.dd(10),N.wc(11,"translate"),N.gc(),N.hc(12,"button",8),N.rc("click",function(){return t._switch(1)}),N.cc(13,"i",10),N.dd(14),N.wc(15,"translate"),N.gc(),N.hc(16,"button",8),N.rc("click",function(){return t._switch(3)}),N.cc(17,"i",11),N.dd(18),N.wc(19,"translate"),N.gc(),N.hc(20,"button",12),N.cc(21,"i",13),N.dd(22),N.wc(23,"translate"),N.gc(),N.hc(24,"button",14),N.rc("click",function(){N.Uc(e);const i=N.Rc(83);return t._openModal(i,null)}),N.cc(25,"i",15),N.dd(26),N.wc(27,"translate"),N.gc(),N.bd(28,ce,22,15,"div",16),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(29,"div",2),N.hc(30,"div",3),N.hc(31,"div",4),N.hc(32,"div",5),N.hc(33,"div",6),N.hc(34,"div",17),N.hc(35,"div",18),N.hc(36,"div",19),N.hc(37,"pagination",20),N.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),N.gc(),N.gc(),N.hc(38,"div",21),N.hc(39,"a",22),N.dd(40),N.wc(41,"translate"),N.wc(42,"translate"),N.wc(43,"translate"),N.wc(44,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(45,"div",23),N.hc(46,"table",24),N.hc(47,"thead"),N.hc(48,"th",25),N.dd(49,"#"),N.gc(),N.hc(50,"th",26),N.dd(51),N.wc(52,"translate"),N.gc(),N.hc(53,"th",26),N.dd(54),N.wc(55,"translate"),N.gc(),N.hc(56,"th",26),N.dd(57),N.wc(58,"translate"),N.gc(),N.hc(59,"th",26),N.dd(60),N.wc(61,"translate"),N.gc(),N.hc(62,"th",26),N.dd(63),N.wc(64,"translate"),N.gc(),N.hc(65,"th",26),N.dd(66),N.wc(67,"translate"),N.gc(),N.gc(),N.hc(68,"tbody"),N.bd(69,ne,6,3,"ng-container",27),N.bd(70,fe,34,24,"ng-container",28),N.gc(),N.gc(),N.gc(),N.hc(71,"div",17),N.hc(72,"div",18),N.hc(73,"div",19),N.hc(74,"pagination",20),N.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),N.gc(),N.gc(),N.hc(75,"div",21),N.hc(76,"a",22),N.dd(77),N.wc(78,"translate"),N.wc(79,"translate"),N.wc(80,"translate"),N.wc(81,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.bd(82,jt,26,23,"ng-template",null,29,N.cd),N.bd(84,ii,121,87,"ng-template",null,30,N.cd),N.bd(86,ai,52,44,"ng-template",null,31,N.cd),N.bd(88,oi,52,44,"ng-template",null,32,N.cd),N.bd(90,hi,51,42,"ng-template",null,33,N.cd),N.bd(92,fi,42,35,"ng-template",null,34,N.cd),N.bd(94,mi,15,6,"ng-template",null,35,N.cd),N.bd(96,Si,31,19,"ng-template",null,36,N.cd)}2&e&&(N.Nb(8),N.Dc("ngClass",9==t._current?"btn btn-sm btn-primary":"btn btn-sm btn-secondary"),N.Nb(2),N.fd(" ",N.xc(11,41,"All my requests")," "),N.Nb(2),N.Dc("ngClass",1==t._current?"btn btn-sm btn-primary":"btn btn-sm btn-secondary"),N.Nb(2),N.fd(" ",N.xc(15,43,"Processing requests")," "),N.Nb(2),N.Dc("ngClass",3==t._current?"btn btn-sm btn-primary":"btn btn-sm btn-secondary"),N.Nb(2),N.fd(" ",N.xc(19,45,"Closed requests")," "),N.Nb(4),N.fd(" ",N.xc(23,47,"Search")," "),N.Nb(4),N.fd(" ",N.xc(27,49,"Add new")," "),N.Nb(2),N.Dc("ngIf",t._authenService.hasPermission("DEPT","read")),N.Nb(9),N.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),N.Nb(3),N.id("",N.xc(41,51,"Total of records"),": ",t.totalRow," - ",N.xc(42,53,"Page")," ",t.pageIndex," ",N.xc(43,55,"of")," ",t.totalPage," ",N.xc(44,57,"page"),""),N.Nb(11),N.ed(N.xc(52,59,"Title")),N.Nb(3),N.fd(" ",N.xc(55,61,"Proposed date")," "),N.Nb(3),N.fd(" ",N.xc(58,63,"Reviewed by")," "),N.Nb(3),N.fd(" ",N.xc(61,65,"Approved by")," "),N.Nb(3),N.fd(" ",N.xc(64,67,"Updated date")," "),N.Nb(3),N.ed(N.xc(67,69,"Status")),N.Nb(3),N.Dc("ngIf",0==t._requestslist.length),N.Nb(1),N.Dc("ngForOf",t._requestslist),N.Nb(4),N.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),N.Nb(3),N.id("",N.xc(78,71,"Total of records"),": ",t.totalRow," - ",N.xc(79,73,"Page")," ",t.pageIndex," ",N.xc(80,75,"of")," ",t.totalPage," ",N.xc(81,77,"page"),""))},directives:[c.o,c.q,g.a,p.n,p.q,c.p,x.l,x.p,x.o,m.g,p.z,p.o,p.p,c.r,p.c,p.w,V.a,V.c,p.x,p.r,p.A,V.e,V.d,Y.a,x.N,p.b,W.a,p.s,Q.a,X.a],pipes:[E.c,c.f,c.y],styles:[""]}),e})();function Di(e,t){if(1&e){const e=N.ic();N.hc(0,"a",34),N.rc("click",function(){N.Uc(e);const t=N.vc(),i=N.Rc(64);return t._openModal(i,null)}),N.cc(1,"i",35),N.dd(2),N.wc(3,"translate"),N.gc()}2&e&&(N.Nb(2),N.fd(" ",N.xc(3,1,"Add new")," "))}function wi(e,t){1&e&&(N.hc(0,"a",36),N.cc(1,"i",37),N.dd(2),N.wc(3,"translate"),N.gc()),2&e&&(N.Nb(2),N.fd(" ",N.xc(3,1,"Submissions")," "))}function xi(e,t){1&e&&N.cc(0,"i",38)}function Mi(e,t){1&e&&(N.fc(0),N.hc(1,"tr"),N.hc(2,"td",39),N.hc(3,"h3",40),N.dd(4),N.wc(5,"translate"),N.gc(),N.gc(),N.gc(),N.ec()),2&e&&(N.Nb(4),N.fd(" ",N.xc(5,1,"No records now!!!")," "))}function Ei(e,t){1&e&&N.cc(0,"img",47)}function Ci(e,t){1&e&&N.cc(0,"img",48)}function Ii(e,t){if(1&e){const e=N.ic();N.fc(0),N.hc(1,"tr"),N.hc(2,"td",24),N.dd(3),N.gc(),N.hc(4,"td",24),N.dd(5),N.gc(),N.hc(6,"td",24),N.dd(7),N.gc(),N.hc(8,"td",24),N.dd(9),N.gc(),N.hc(10,"td",24),N.bd(11,Ei,1,0,"img",41),N.bd(12,Ci,1,0,"img",42),N.gc(),N.hc(13,"td",24),N.hc(14,"a",43),N.rc("click",function(){N.Uc(e);const i=t.$implicit,c=N.vc(),n=N.Rc(64);return c._openModal(n,i)}),N.wc(15,"translate"),N.cc(16,"i",44),N.gc(),N.hc(17,"a",45),N.rc("click",function(){N.Uc(e);const i=t.$implicit;return N.vc().deleteItem(i)}),N.wc(18,"translate"),N.cc(19,"i",46),N.gc(),N.gc(),N.gc(),N.ec()}if(2&e){const e=t.$implicit,i=t.index,c=N.vc();N.Nb(3),N.fd(" ",i+1," "),N.Nb(2),N.fd(" ",e.code," "),N.Nb(2),N.fd(" ",e.name_l," "),N.Nb(2),N.fd(" ",e.name_e," "),N.Nb(2),N.Dc("ngIf",!e.is_active),N.Nb(1),N.Dc("ngIf",e.is_active),N.Nb(2),N.Ec("ngbTooltip",N.xc(15,10,"Edit")),N.Dc("disabled","Admin"===e.name_e||!c._authenService.hasPermission("DEPT","update")),N.Nb(3),N.Ec("ngbTooltip",N.xc(18,12,"Delete")),N.Dc("disabled","Admin"===e.name_e||!c._authenService.hasPermission("DEPT","delete"))}}function ki(e,t){1&e&&(N.fc(0),N.hc(1,"a",72),N.cc(2,"img",73),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function Ri(e,t){if(1&e&&(N.hc(0,"button",74),N.dd(1),N.wc(2,"translate"),N.gc()),2&e){N.vc();const e=N.Rc(1);N.Dc("disabled",!e.valid),N.Nb(1),N.fd(" ",N.xc(2,2,"Save")," ")}}function Pi(e,t){if(1&e){const e=N.ic();N.hc(0,"form",49,50),N.rc("ngSubmit",function(){return N.Uc(e),N.vc().saveChange()}),N.hc(2,"div",51),N.hc(3,"h4",52),N.dd(4),N.wc(5,"translate"),N.wc(6,"translate"),N.gc(),N.hc(7,"button",53),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(8,"span",54),N.dd(9,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(10,"div",55),N.hc(11,"div",56),N.hc(12,"div",57),N.hc(13,"div",58),N.hc(14,"label",59),N.dd(15),N.wc(16,"translate"),N.hc(17,"span",40),N.dd(18,"(*)"),N.gc(),N.gc(),N.hc(19,"input",60),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.code=t})("keyup",function(){return N.Uc(e),N.vc().removeBlank()}),N.wc(20,"translate"),N.gc(),N.gc(),N.gc(),N.hc(21,"div",61),N.hc(22,"div",58),N.hc(23,"label",62),N.dd(24),N.wc(25,"translate"),N.hc(26,"span",40),N.dd(27,"(*)"),N.gc(),N.gc(),N.hc(28,"input",63),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.name_l=t}),N.wc(29,"translate"),N.wc(30,"translate"),N.gc(),N.gc(),N.gc(),N.hc(31,"div",61),N.hc(32,"div",58),N.hc(33,"input",64),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.name_e=t}),N.wc(34,"translate"),N.wc(35,"translate"),N.gc(),N.gc(),N.gc(),N.hc(36,"div",57),N.hc(37,"label",65),N.dd(38),N.wc(39,"translate"),N.gc(),N.hc(40,"div",66),N.hc(41,"input",67),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.is_active=t}),N.gc(),N.hc(42,"label",68),N.dd(43),N.wc(44,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(45,"div",69),N.hc(46,"button",70),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(47),N.wc(48,"translate"),N.gc(),N.bd(49,ki,5,3,"ng-container",25),N.bd(50,Ri,3,4,"button",71),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(4),N.gd(" ",null==e.entity.id?N.xc(5,20,"Add new"):N.xc(6,22,"Update")," ",e._title," "),N.Nb(11),N.fd("",N.xc(16,24,"Document code")," "),N.Nb(4),N.Ec("placeholder",N.xc(20,26,"Document code")),N.Dc("ngClass",null==e.entity.id?"form-control":"form-control jdisabled")("ngModel",e.entity.code)("disabled",null!=e.entity.id),N.Nb(5),N.fd("",N.xc(25,28,"Document name")," "),N.Nb(4),N.Gc("placeholder","",N.xc(29,30,"Document name")," (",N.xc(30,32,"Vietnamese"),")"),N.Dc("ngModel",e.entity.name_l),N.Nb(5),N.Gc("placeholder","",N.xc(34,34,"Document name")," (",N.xc(35,36,"English"),")"),N.Dc("ngModel",e.entity.name_e),N.Nb(5),N.ed(N.xc(39,38,"Status")),N.Nb(3),N.Dc("ngModel",e.entity.is_active),N.Nb(2),N.ed(N.xc(44,40,e.entity.is_active?"activated":"not activated")),N.Nb(4),N.fd(" ",N.xc(48,42,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSave),N.Nb(1),N.Dc("ngIf",!e.isSave)}}let Ui=(()=>{class e{constructor(e,t,i,c,n,a,s,l,o){this._authenService=e,this._dataService=t,this._route=i,this._notifyService=c,this._uploadService=n,this._excelService=a,this._numberFormat=s,this.modalService=l,this._utilyService=o,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._requestslist=[],this.isSave=!1,this._title="",this.entity={}}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData()}loadData(){this._isLoading=!0,this._dataService.post("/cat-submission/getallDocuments",{page:this.pageIndex,limit:this.pageSize,filter:this._keyword,short_code:this.user.short_code}).subscribe(e=>{this._isLoading=!1,this._requestslist=e.data,this.totalRow=e.rowCount,this.totalPage=e.totalPages},()=>this._isLoading=!1)}_pageSizeChange(e){this.pageSize=e.target.value,this.loadData()}pageChanged(e){this.pageIndex=e.page,this.loadData()}removeBlank(){this.entity.code=null==this.entity.code?null:this.entity.code.replace(" ","")}_openModal(e,t){null==t?(this.entity={},this.entity.name_l=null,this.entity.name_e=null,this.entity.is_active=!0,this.entity.short_code=this.user.short_code,this._title=""):(this.entity=t,this._title=t.code),this.modalService.open(e,{size:"md",centered:!0})}saveChange(){this.isSave=!0,null==this.entity.id?(this.entity.code=this.entity.code.toUpperCase(),this._dataService.post("/cat-submission/addDocument",this.entity).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.entity={},this.entity.name_l=null,this.entity.name_e=null,this.entity.is_active=!0,this.loadData(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})):this._dataService.post("/cat-submission/updateDocument",this.entity).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_UPDATENO_EN:v.a.MSG_UPDATENO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.loadData(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"),this.modalService.dismissAll())},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}deleteItem(e){S.a.fire({title:"en"==this.user.lang?v.a.are_you_sure_en:v.a.are_you_sure,text:"en"==this.user.lang?e.name_e:e.name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.a.cancel_en:v.a.cancel,confirmButtonText:"en"==this.user.lang?v.a.confirmtext_en:v.a.confirmtext}).then(t=>{if(t.value){let t={};t.id=e.id,this._dataService.post("/cat-submission/deleteDocument",t).subscribe(e=>{"failed"!=e.result?(this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_DELETE_EN:v.a.MSG_DELETE,"OK"),this.loadData()):this._notifyService.showError("en"==this.user.lang?v.a.MSG_DELETENO_EN:v.a.MSG_DELETENO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)},()=>{this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}})}}return e.\u0275fac=function(t){return new(t||e)(N.bc(l.a),N.bc(s.a),N.bc(m.d),N.bc(D.a),N.bc(a.a),N.bc(n.a),N.bc(w.a),N.bc(x.s),N.bc(M.a))},e.\u0275cmp=N.Vb({type:e,selectors:[["app-subm-typedocument"]],decls:65,vars:51,consts:[[1,"container-fluid"],[1,"email-wrap"],[1,"row"],[1,"col-lg-12"],[1,"email-left-aside"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-secondary mr-sm-2","routerLink","/submissions/requests",4,"ngIf"],["class","fa fa-spinner fa-spin text-primary","style","font-size: 16pt",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"custom-select","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-body"],[1,"table-responsive"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate",2,"width","15px"],[1,"text-truncate"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],["content",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"fa","fa-plus"],["routerLink","/submissions/requests",1,"btn","btn-sm","btn-secondary","mr-sm-2"],[1,"fa","fa-clipboard"],[1,"fa","fa-spinner","fa-spin","text-primary",2,"font-size","16pt"],["colspan","6",2,"text-align","center"],[1,"text-danger"],["src","../../../../assets/img/icon-no.svg",4,"ngIf"],["src","../../../../assets/img/icon-yes.svg",4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"ngbTooltip","disabled","click"],[1,"fa","fa-pencil"],[1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-trash"],["src","../../../../assets/img/icon-no.svg"],["src","../../../../assets/img/icon-yes.svg"],[1,"form","theme-form",3,"ngSubmit"],["formPG1","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","CodePG1",1,"jbold"],["type","text","id","CodePG1","name","CodePG1","required","","autocomplete","off",3,"ngClass","placeholder","ngModel","disabled","ngModelChange","keyup"],[1,"col-md-12"],["for","Name11",1,"jbold"],["type","text","id","Name11","name","Name11","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","text","id","Name11a","name","Name11a","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","StatusPG1",1,"jbold"],[1,"checkbox","checkbox-primary"],["id","StatusPG1","type","checkbox","name","StatusPG1",3,"ngModel","ngModelChange"],["for","StatusPG1"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(N.hc(0,"div",0),N.hc(1,"div",1),N.hc(2,"div",2),N.hc(3,"div",3),N.hc(4,"div",4),N.hc(5,"div",5),N.hc(6,"div",6),N.hc(7,"div",2),N.hc(8,"div",7),N.hc(9,"div",8),N.hc(10,"input",9),N.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),N.wc(11,"translate"),N.gc(),N.bd(12,Di,4,3,"a",10),N.bd(13,wi,4,3,"a",11),N.bd(14,xi,1,0,"i",12),N.gc(),N.gc(),N.hc(15,"div",13),N.hc(16,"div",14),N.hc(17,"select",15),N.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),N.hc(18,"option",16),N.dd(19,"#10"),N.gc(),N.hc(20,"option",17),N.dd(21,"#25"),N.gc(),N.hc(22,"option",18),N.dd(23,"#50"),N.gc(),N.hc(24,"option",19),N.dd(25,"#100"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(26,"div",20),N.hc(27,"div",21),N.hc(28,"table",22),N.hc(29,"thead"),N.hc(30,"th",23),N.dd(31,"#"),N.gc(),N.hc(32,"th",24),N.dd(33),N.wc(34,"translate"),N.gc(),N.hc(35,"th",24),N.dd(36),N.wc(37,"translate"),N.wc(38,"translate"),N.gc(),N.hc(39,"th",24),N.dd(40),N.wc(41,"translate"),N.wc(42,"translate"),N.gc(),N.hc(43,"th",24),N.dd(44),N.wc(45,"translate"),N.gc(),N.hc(46,"th",24),N.dd(47),N.wc(48,"translate"),N.gc(),N.gc(),N.hc(49,"tbody"),N.bd(50,Mi,6,3,"ng-container",25),N.bd(51,Ii,20,14,"ng-container",26),N.gc(),N.gc(),N.gc(),N.hc(52,"div",27),N.hc(53,"div",28),N.hc(54,"div",29),N.hc(55,"pagination",30),N.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),N.gc(),N.gc(),N.hc(56,"div",31),N.hc(57,"a",32),N.dd(58),N.wc(59,"translate"),N.wc(60,"translate"),N.wc(61,"translate"),N.wc(62,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.bd(63,Pi,51,44,"ng-template",null,33,N.cd)),2&e&&(N.Nb(10),N.Dc("placeholder",N.xc(11,27,"Search"))("ngModel",t._keyword),N.Nb(2),N.Dc("ngIf",t._authenService.hasPermission("DEPT","read")),N.Nb(1),N.Dc("ngIf",t._authenService.hasPermission("DEPT","read")),N.Nb(1),N.Dc("ngIf",t._isLoading),N.Nb(3),N.Dc("ngModel",t.pageSize),N.Nb(16),N.fd(" ",N.xc(34,29,"Code")," "),N.Nb(3),N.gd(" ",N.xc(37,31,"Document name")," (",N.xc(38,33,"Vietnamese"),") "),N.Nb(4),N.gd(" ",N.xc(41,35,"Document name")," (",N.xc(42,37,"English"),") "),N.Nb(4),N.fd(" ",N.xc(45,39,"Status")," "),N.Nb(3),N.fd(" ",N.xc(48,41,"Actions")," "),N.Nb(3),N.Dc("ngIf",0==t._requestslist.length),N.Nb(1),N.Dc("ngForOf",t._requestslist),N.Nb(4),N.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),N.Nb(3),N.id("",N.xc(59,43,"Total of records"),": ",t.totalRow," - ",N.xc(60,45,"Page")," ",t.pageIndex," ",N.xc(61,47,"of")," ",t.totalPage," ",N.xc(62,49,"page"),""))},directives:[p.c,p.n,p.q,c.q,p.x,p.r,p.A,c.p,g.a,m.g,x.N,p.z,p.o,p.p,p.w,c.o,p.b],pipes:[E.c],styles:[""]}),e})();const Gi=["attached_file1"];function Ai(e,t){if(1&e){const e=N.ic();N.hc(0,"a",37),N.rc("click",function(){N.Uc(e);const t=N.vc(),i=N.Rc(68);return t._openModal(i,null)}),N.cc(1,"i",38),N.dd(2),N.wc(3,"translate"),N.gc()}2&e&&(N.Nb(2),N.fd(" ",N.xc(3,1,"Add new")," "))}function Oi(e,t){1&e&&(N.hc(0,"a",39),N.cc(1,"i",40),N.dd(2),N.wc(3,"translate"),N.gc()),2&e&&(N.Nb(2),N.fd(" ",N.xc(3,1,"Submissions")," "))}function Ti(e,t){1&e&&N.cc(0,"i",41)}function Fi(e,t){1&e&&(N.fc(0),N.hc(1,"tr"),N.hc(2,"td",42),N.hc(3,"h3",43),N.dd(4),N.wc(5,"translate"),N.gc(),N.gc(),N.gc(),N.ec()),2&e&&(N.Nb(4),N.fd(" ",N.xc(5,1,"No records now!!!")," "))}function ji(e,t){if(1&e&&(N.hc(0,"li"),N.dd(1),N.gc()),2&e){const e=t.$implicit,i=t.index,c=N.vc(2);N.Nb(1),N.gd(" ",i+1,". ","en"==c.user.lang?e.user.title_e:e.user.title_l," ")}}function zi(e,t){1&e&&N.cc(0,"img",50)}function $i(e,t){1&e&&N.cc(0,"img",51)}function Bi(e,t){if(1&e){const e=N.ic();N.fc(0),N.hc(1,"tr"),N.hc(2,"td",24),N.dd(3),N.gc(),N.hc(4,"td",24),N.dd(5),N.gc(),N.hc(6,"td",24),N.dd(7),N.gc(),N.hc(8,"td",24),N.dd(9),N.gc(),N.hc(10,"td",24),N.dd(11),N.gc(),N.hc(12,"td",24),N.hc(13,"ul"),N.bd(14,ji,2,2,"li",26),N.gc(),N.gc(),N.hc(15,"td",24),N.bd(16,zi,1,0,"img",44),N.bd(17,$i,1,0,"img",45),N.gc(),N.hc(18,"td",24),N.hc(19,"a",46),N.rc("click",function(){N.Uc(e);const i=t.$implicit,c=N.vc(),n=N.Rc(68);return c._openModal(n,i)}),N.wc(20,"translate"),N.cc(21,"i",47),N.gc(),N.hc(22,"a",48),N.rc("click",function(){N.Uc(e);const i=t.$implicit;return N.vc().deleteItem(i)}),N.wc(23,"translate"),N.cc(24,"i",49),N.gc(),N.gc(),N.gc(),N.ec()}if(2&e){const e=t.$implicit,i=t.index,c=N.vc();N.Nb(3),N.fd(" ",i+1," "),N.Nb(2),N.fd(" ","en"==c.user.lang?c.group_name_e:e.group_name_l," "),N.Nb(2),N.fd(" ","en"==c.user.lang?c.document_name_e:e.document_name_l," "),N.Nb(2),N.fd(" ",e.code," "),N.Nb(2),N.fd(" ",e.title," "),N.Nb(3),N.Dc("ngForOf",e.handle_users.data),N.Nb(2),N.Dc("ngIf",!e.is_active),N.Nb(1),N.Dc("ngIf",e.is_active),N.Nb(2),N.Ec("ngbTooltip",N.xc(20,12,"Edit")),N.Dc("disabled","Admin"===e.name_e||!c._authenService.hasPermission("DEPT","update")),N.Nb(3),N.Ec("ngbTooltip",N.xc(23,14,"Delete")),N.Dc("disabled","Admin"===e.name_e||!c._authenService.hasPermission("DEPT","delete"))}}function qi(e,t){if(1&e&&(N.hc(0,"option",96),N.dd(1),N.gc()),2&e){const e=t.$implicit,i=N.vc(2);N.Ec("value",e.id),N.Nb(1),N.gd(" ",e.code," - ","en"==i.user.lang?e.name_e:e.name_l," ")}}function Li(e,t){if(1&e&&(N.hc(0,"span"),N.dd(1),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.ed(e.order)}}function Ki(e,t){if(1&e){const e=N.ic();N.hc(0,"input",102),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().$implicit.order=t}),N.gc()}if(2&e){const e=N.vc(),t=e.$implicit;N.Fc("name","or",e.index+1,""),N.Dc("ngModel",t.order)}}function Hi(e,t){if(1&e&&(N.hc(0,"span"),N.dd(1),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.ed(e.user.title)}}function Vi(e,t){if(1&e){const e=N.ic();N.hc(0,"nz-tree-select",103),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc(3)._selectDept=t})("ngModelChange",function(){N.Uc(e);const t=N.vc().$implicit,i=N.vc(2);return i._getUser(t,i._selectDept)}),N.wc(1,"translate"),N.gc()}if(2&e){const e=N.vc(3);N.Ec("nzPlaceHolder",N.xc(1,4,"Please choose")),N.Dc("nzExpandedKeys",e.expandKeys)("nzNodes",e._departments)("ngModel",e._selectDept)}}function Yi(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Only view")))}function Wi(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Passed signature")))}function Qi(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Reviewed signature")))}function Xi(e,t){1&e&&(N.hc(0,"span"),N.dd(1),N.wc(2,"translate"),N.gc()),2&e&&(N.Nb(1),N.ed(N.xc(2,1,"Approved signature")))}function Ji(e,t){if(1&e&&(N.hc(0,"span"),N.bd(1,Yi,3,3,"span",25),N.bd(2,Wi,3,3,"span",25),N.bd(3,Qi,3,3,"span",25),N.bd(4,Xi,3,3,"span",25),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.Dc("ngIf",0==e.role),N.Nb(1),N.Dc("ngIf",1==e.role),N.Nb(1),N.Dc("ngIf",2==e.role),N.Nb(1),N.Dc("ngIf",3==e.role)}}function Zi(e,t){if(1&e){const e=N.ic();N.hc(0,"select",104),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().$implicit.role=t})("change",function(){N.Uc(e);const t=N.vc().$implicit,i=N.vc(2);return i._getUser(t,i._selectDept)}),N.hc(1,"option",105),N.dd(2),N.wc(3,"translate"),N.gc(),N.hc(4,"option",106),N.dd(5),N.wc(6,"translate"),N.gc(),N.hc(7,"option",107),N.dd(8),N.wc(9,"translate"),N.gc(),N.hc(10,"option",108),N.dd(11),N.wc(12,"translate"),N.gc(),N.gc()}if(2&e){const e=N.vc(),t=e.$implicit;N.Fc("name","r",e.index+1,""),N.Dc("ngModel",t.role),N.Nb(2),N.ed(N.xc(3,6,"Only view")),N.Nb(3),N.fd(" ",N.xc(6,8,"Passed signature")," "),N.Nb(3),N.fd(" ",N.xc(9,10,"Reviewed signature")," "),N.Nb(3),N.fd(" ",N.xc(12,12,"Approved signature")," ")}}function ec(e,t){if(1&e&&(N.hc(0,"span"),N.dd(1),N.gc()),2&e){const e=N.vc().$implicit;N.Nb(1),N.ed(e.time)}}function tc(e,t){if(1&e){const e=N.ic();N.hc(0,"input",109),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().$implicit.time=t}),N.gc()}if(2&e){const e=N.vc(),t=e.$implicit;N.Fc("name","timer",e.index+1,""),N.Dc("ngModel",t.time)}}function ic(e,t){if(1&e){const e=N.ic();N.hc(0,"a",110),N.rc("click",function(){N.Uc(e);const t=N.vc().$implicit;return N.vc(2)._removeItemHandle(t)}),N.cc(1,"i",49),N.gc()}}function cc(e,t){if(1&e&&(N.hc(0,"tr"),N.hc(1,"td",24),N.bd(2,Li,2,1,"span",25),N.bd(3,Ki,1,2,"input",97),N.gc(),N.hc(4,"td",24),N.bd(5,Hi,2,1,"span",25),N.bd(6,Vi,2,6,"nz-tree-select",98),N.gc(),N.hc(7,"td",24),N.bd(8,Ji,5,4,"span",25),N.bd(9,Zi,13,14,"select",99),N.gc(),N.hc(10,"td",24),N.bd(11,ec,2,1,"span",25),N.bd(12,tc,1,2,"input",100),N.gc(),N.hc(13,"td",24),N.bd(14,ic,2,0,"a",101),N.gc(),N.gc()),2&e){const e=t.$implicit,i=N.vc(2);N.Nb(2),N.Dc("ngIf",e.flag),N.Nb(1),N.Dc("ngIf",!e.flag),N.Nb(2),N.Dc("ngIf",e.flag),N.Nb(1),N.Dc("ngIf",!e.flag),N.Nb(2),N.Dc("ngIf",e.flag),N.Nb(1),N.Dc("ngIf",!e.flag),N.Nb(2),N.Dc("ngIf",e.flag),N.Nb(1),N.Dc("ngIf",!e.flag),N.Nb(2),N.Dc("ngIf",!i.entity.flag_block)}}function nc(e,t){if(1&e){const e=N.ic();N.hc(0,"tfoot"),N.hc(1,"tr"),N.cc(2,"td",111),N.hc(3,"td",24),N.hc(4,"a",112),N.rc("click",function(){return N.Uc(e),N.vc(2)._addItemHandle(null)}),N.cc(5,"i",38),N.gc(),N.gc(),N.gc(),N.gc()}}function ac(e,t){if(1&e){const e=N.ic();N.hc(0,"ck-editor",113,114),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc(2).entity.description=t}),N.gc()}if(2&e){const e=N.vc(2);N.Dc("ngModel",e.entity.description)("fullPage",!0)("config",e.ckEditorConfig)}}function sc(e,t){if(1&e&&N.cc(0,"p",115),2&e){const e=N.vc(2);N.Dc("innerHtml",e._detailContent,N.Vc)}}function lc(e,t){if(1&e){const e=N.ic();N.hc(0,"a",56),N.rc("click",function(){N.Uc(e);const t=N.vc(3);return t.removeFile(t.entity)}),N.cc(1,"i",49),N.gc()}}function oc(e,t){if(1&e){const e=N.ic();N.fc(0),N.dd(1,"| "),N.hc(2,"a",116),N.rc("click",function(){N.Uc(e);const t=N.vc(2);return t._downloadFileResult(t.entity.attached_file)}),N.dd(3),N.wc(4,"translate"),N.gc(),N.bd(5,lc,2,0,"a",117),N.ec()}if(2&e){const e=N.vc(2);N.Nb(3),N.ed(N.xc(4,2,"Download attachment")),N.Nb(2),N.Dc("ngIf",!e.entity.flag_block)}}function rc(e,t){1&e&&(N.fc(0),N.hc(1,"a",118),N.cc(2,"img",119),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function dc(e,t){if(1&e&&(N.hc(0,"button",120),N.dd(1),N.wc(2,"translate"),N.gc()),2&e){N.vc();const e=N.Rc(1);N.Dc("disabled",!e.valid),N.Nb(1),N.fd(" ",N.xc(2,2,"Save")," ")}}function hc(e,t){if(1&e){const e=N.ic();N.hc(0,"form",52,53),N.rc("ngSubmit",function(){return N.Uc(e),N.vc().saveChange()}),N.hc(2,"div",54),N.hc(3,"h4",55),N.dd(4),N.wc(5,"translate"),N.wc(6,"translate"),N.wc(7,"translate"),N.hc(8,"a",56),N.rc("click",function(){N.Uc(e);const t=N.vc();return t.entity.flag_block=!t.entity.flag_block}),N.cc(9,"i",57),N.gc(),N.gc(),N.hc(10,"button",58),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(11,"span",59),N.dd(12,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(13,"div",60),N.hc(14,"div",61),N.hc(15,"div",62),N.hc(16,"label",63),N.dd(17),N.wc(18,"translate"),N.hc(19,"span",43),N.dd(20,"(*)"),N.gc(),N.dd(21," - "),N.hc(22,"a",64),N.rc("click",function(){N.Uc(e);const t=N.vc(),i=N.Rc(70);return t._popupCategory(i,null)}),N.cc(23,"i",38),N.gc(),N.gc(),N.hc(24,"select",65),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.profile_group_id=t}),N.hc(25,"option",66),N.dd(26),N.wc(27,"translate"),N.gc(),N.bd(28,qi,2,3,"option",67),N.gc(),N.gc(),N.hc(29,"div",62),N.hc(30,"label",68),N.dd(31),N.wc(32,"translate"),N.hc(33,"span",43),N.dd(34,"(*)"),N.gc(),N.gc(),N.hc(35,"input",69),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.code=t})("keyup",function(){return N.Uc(e),N.vc().removeBlankTypeProfile()}),N.gc(),N.gc(),N.hc(36,"div",62),N.hc(37,"label",70),N.dd(38),N.wc(39,"translate"),N.hc(40,"span",43),N.dd(41,"(*)"),N.gc(),N.gc(),N.hc(42,"input",71),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.title=t}),N.gc(),N.gc(),N.hc(43,"div",62),N.hc(44,"label",72),N.dd(45),N.wc(46,"translate"),N.hc(47,"span",43),N.dd(48,"(*)"),N.gc(),N.dd(49," - "),N.hc(50,"a",64),N.rc("click",function(){N.Uc(e);const t=N.vc(),i=N.Rc(72);return t._popupCategory1(i,null)}),N.cc(51,"i",38),N.gc(),N.gc(),N.hc(52,"ng-select",73),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.document_id=t}),N.wc(53,"translate"),N.wc(54,"translate"),N.gc(),N.gc(),N.hc(55,"div",74),N.hc(56,"label",75),N.dd(57),N.wc(58,"translate"),N.hc(59,"span",43),N.dd(60,"(*)"),N.gc(),N.gc(),N.hc(61,"div",21),N.hc(62,"table",76),N.hc(63,"thead"),N.hc(64,"th",24),N.dd(65),N.wc(66,"translate"),N.gc(),N.hc(67,"th",24),N.dd(68),N.wc(69,"translate"),N.hc(70,"a",64),N.rc("click",function(){N.Uc(e);const t=N.vc(),i=N.Rc(74);return t._popupDepartment(i,null)}),N.cc(71,"i",38),N.gc(),N.gc(),N.hc(72,"th",24),N.dd(73),N.wc(74,"translate"),N.gc(),N.hc(75,"th",24),N.dd(76),N.wc(77,"translate"),N.wc(78,"translate"),N.gc(),N.hc(79,"th",24),N.dd(80),N.wc(81,"translate"),N.gc(),N.gc(),N.hc(82,"tbody"),N.bd(83,cc,15,9,"tr",26),N.gc(),N.bd(84,nc,6,0,"tfoot",25),N.gc(),N.gc(),N.gc(),N.hc(85,"div",74),N.hc(86,"label",77),N.dd(87),N.wc(88,"translate"),N.gc(),N.bd(89,ac,2,3,"ck-editor",78),N.bd(90,sc,1,1,"p",79),N.gc(),N.hc(91,"div",80),N.hc(92,"label",81),N.dd(93),N.wc(94,"translate"),N.gc(),N.hc(95,"div",82),N.hc(96,"input",83),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.is_active=t}),N.gc(),N.hc(97,"label",84),N.dd(98),N.wc(99,"translate"),N.gc(),N.gc(),N.gc(),N.hc(100,"div",85),N.hc(101,"label",86),N.dd(102),N.wc(103,"translate"),N.gc(),N.hc(104,"input",87),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entity.estimated_cost=t}),N.gc(),N.gc(),N.hc(105,"div",88),N.hc(106,"label",89),N.dd(107),N.wc(108,"translate"),N.bd(109,oc,6,4,"ng-container",25),N.gc(),N.hc(110,"input",90,91),N.rc("change",function(t){N.Uc(e);const i=N.Rc(111);return N.vc().fileEvent1(t,i)}),N.gc(),N.hc(112,"input",92),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entityUpload1.fileUpload=t}),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(113,"div",93),N.hc(114,"button",94),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(115),N.wc(116,"translate"),N.gc(),N.bd(117,rc,5,3,"ng-container",25),N.bd(118,dc,3,4,"button",95),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(4),N.gd(" ","ADD"==e._flagModal?N.xc(5,54,"Add new"):N.xc(6,56,"Update")," ",N.xc(7,58,e._title)," "),N.Nb(5),N.Dc("ngClass",e.entity.flag_block?"fa fa-lock":"fa fa-unlock-alt"),N.Nb(8),N.fd("",N.xc(18,60,"Profile group")," "),N.Nb(7),N.Dc("ngModel",e.entity.profile_group_id)("disabled",!!e.entity.flag_block),N.Nb(2),N.ed(N.xc(27,62,"Please choose")),N.Nb(2),N.Dc("ngForOf",e._catprofiles),N.Nb(3),N.fd("",N.xc(32,64,"Profile code")," "),N.Nb(4),N.Dc("ngClass",e.entity.flag_block?"form-control jdisabled":"form-control")("ngModel",e.entity.code)("disabled",!!e.entity.flag_block),N.Nb(3),N.fd("",N.xc(39,66,"Profile name")," "),N.Nb(4),N.Dc("ngClass",e.entity.flag_block?"form-control jdisabled":"form-control")("ngModel",e.entity.title)("disabled",!!e.entity.flag_block),N.Nb(3),N.fd("",N.xc(46,68,"Type of document")," "),N.Nb(7),N.Dc("items",e._catdocuments)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("bindLabel","en"==e.user.lang?"name_e":"name_l")("ngModel",e.entity.document_id)("placeholder",N.xc(53,70,"Please choose"))("notFoundText",N.xc(54,72,"Not found item"))("disabled",!!e.entity.flag_block),N.Nb(5),N.fd("",N.xc(58,74,"Configure handling users")," "),N.Nb(8),N.fd(" ",N.xc(66,76,"Processing no.")," "),N.Nb(3),N.fd(" ",N.xc(69,78,"Manager Unit")," - "),N.Nb(5),N.ed(N.xc(74,80,"Roles")),N.Nb(3),N.gd(" ",N.xc(77,82,"Time")," (",N.xc(78,84,"hours"),") "),N.Nb(4),N.ed(N.xc(81,86,"Actions")),N.Nb(3),N.Dc("ngForOf",e.entity.handle_users.data),N.Nb(1),N.Dc("ngIf",!e.entity.flag_block),N.Nb(3),N.ed(N.xc(88,88,"Description")),N.Nb(2),N.Dc("ngIf",!e.entity.flag_block),N.Nb(1),N.Dc("ngIf",e.entity.flag_block),N.Nb(3),N.ed(N.xc(94,90,"Status")),N.Nb(3),N.Dc("ngModel",e.entity.is_active)("disabled",!!e.entity.flag_block),N.Nb(2),N.ed(N.xc(99,92,e.entity.is_active?"activated":"not activated")),N.Nb(4),N.fd("",N.xc(103,94,"Estimated cost")," (VND)"),N.Nb(2),N.Dc("ngClass",e.entity.flag_block?"form-control jdisabled":"form-control")("ngModel",e.entity.estimated_cost)("disabled",!!e.entity.flag_block),N.Nb(3),N.fd("",N.xc(108,96,"Attachment (if any)")," (.doc,.docx,.pdf) "),N.Nb(2),N.Dc("ngIf",null!=e.entity.attached_file),N.Nb(1),N.Dc("ngClass",e.entity.flag_block?"form-control jdisabled":"form-control")("disabled",!!e.entity.flag_block),N.Nb(2),N.Dc("ngModel",e.entityUpload1.fileUpload),N.Nb(3),N.fd(" ",N.xc(116,98,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSaveSub),N.Nb(1),N.Dc("ngIf",!e.isSaveSub&&!e.entity.flag_block)}}function gc(e,t){1&e&&(N.fc(0),N.hc(1,"a",118),N.cc(2,"img",119),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function uc(e,t){if(1&e&&(N.hc(0,"button",120),N.dd(1),N.wc(2,"translate"),N.gc()),2&e){N.vc();const e=N.Rc(1);N.Dc("disabled",!e.valid),N.Nb(1),N.fd(" ",N.xc(2,2,"Save")," ")}}function fc(e,t){if(1&e){const e=N.ic();N.hc(0,"form",52,121),N.rc("ngSubmit",function(){return N.Uc(e),N.vc().saveChangeProfileGroup()}),N.hc(2,"div",54),N.hc(3,"h4",55),N.dd(4),N.wc(5,"translate"),N.wc(6,"translate"),N.wc(7,"translate"),N.gc(),N.hc(8,"button",58),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(9,"span",59),N.dd(10,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(11,"div",122),N.hc(12,"div",61),N.hc(13,"div",88),N.hc(14,"div",123),N.hc(15,"label",124),N.dd(16),N.wc(17,"translate"),N.hc(18,"span",43),N.dd(19,"(*)"),N.gc(),N.gc(),N.hc(20,"input",125),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.code=t})("keyup",function(){return N.Uc(e),N.vc().removeBlank()}),N.wc(21,"translate"),N.gc(),N.gc(),N.gc(),N.hc(22,"div",74),N.hc(23,"div",123),N.hc(24,"label",126),N.dd(25),N.wc(26,"translate"),N.hc(27,"span",43),N.dd(28,"(*)"),N.gc(),N.gc(),N.hc(29,"input",127),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.name_l=t}),N.wc(30,"translate"),N.wc(31,"translate"),N.gc(),N.gc(),N.gc(),N.hc(32,"div",74),N.hc(33,"div",123),N.hc(34,"input",128),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.name_e=t}),N.wc(35,"translate"),N.wc(36,"translate"),N.gc(),N.gc(),N.gc(),N.hc(37,"div",88),N.hc(38,"label",129),N.dd(39),N.wc(40,"translate"),N.gc(),N.hc(41,"div",82),N.hc(42,"input",130),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.is_active=t}),N.gc(),N.hc(43,"label",131),N.dd(44),N.wc(45,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(46,"div",93),N.hc(47,"button",94),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(48),N.wc(49,"translate"),N.gc(),N.bd(50,gc,5,3,"ng-container",25),N.bd(51,uc,3,4,"button",95),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(4),N.gd(" ",null==e.entitySub.id?N.xc(5,18,"Add new"):N.xc(6,20,"Update")," ",N.xc(7,22,"Profile group")," "),N.Nb(12),N.fd("",N.xc(17,24,"Profile code")," "),N.Nb(4),N.Ec("placeholder",N.xc(21,26,"Profile code")),N.Dc("ngModel",e.entitySub.code),N.Nb(5),N.fd("",N.xc(26,28,"Group name")," "),N.Nb(4),N.Gc("placeholder","",N.xc(30,30,"Group name")," (",N.xc(31,32,"Vietnamese"),")"),N.Dc("ngModel",e.entitySub.name_l),N.Nb(5),N.Gc("placeholder","",N.xc(35,34,"Group name")," (",N.xc(36,36,"English"),")"),N.Dc("ngModel",e.entitySub.name_e),N.Nb(5),N.ed(N.xc(40,38,"Status")),N.Nb(3),N.Dc("ngModel",e.entitySub.is_active),N.Nb(2),N.ed(N.xc(45,40,e.entitySub.is_active?"activated":"not activated")),N.Nb(4),N.fd(" ",N.xc(49,42,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSaveSub),N.Nb(1),N.Dc("ngIf",!e.isSaveSub)}}function bc(e,t){1&e&&(N.fc(0),N.hc(1,"a",118),N.cc(2,"img",119),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function _c(e,t){if(1&e&&(N.hc(0,"button",120),N.dd(1),N.wc(2,"translate"),N.gc()),2&e){N.vc();const e=N.Rc(1);N.Dc("disabled",!e.valid),N.Nb(1),N.fd(" ",N.xc(2,2,"Save")," ")}}function pc(e,t){if(1&e){const e=N.ic();N.hc(0,"form",52,132),N.rc("ngSubmit",function(){return N.Uc(e),N.vc().saveChangeProfileGroup1()}),N.hc(2,"div",54),N.hc(3,"h4",55),N.dd(4),N.wc(5,"translate"),N.wc(6,"translate"),N.wc(7,"translate"),N.gc(),N.hc(8,"button",58),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(9,"span",59),N.dd(10,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(11,"div",122),N.hc(12,"div",61),N.hc(13,"div",88),N.hc(14,"div",123),N.hc(15,"label",133),N.dd(16),N.wc(17,"translate"),N.hc(18,"span",43),N.dd(19,"(*)"),N.gc(),N.gc(),N.hc(20,"input",134),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.code=t})("keyup",function(){return N.Uc(e),N.vc().removeBlank()}),N.wc(21,"translate"),N.gc(),N.gc(),N.gc(),N.hc(22,"div",74),N.hc(23,"div",123),N.hc(24,"label",135),N.dd(25),N.wc(26,"translate"),N.hc(27,"span",43),N.dd(28,"(*)"),N.gc(),N.gc(),N.hc(29,"input",136),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.name_l=t}),N.wc(30,"translate"),N.wc(31,"translate"),N.gc(),N.gc(),N.gc(),N.hc(32,"div",74),N.hc(33,"div",123),N.hc(34,"input",137),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.name_e=t}),N.wc(35,"translate"),N.wc(36,"translate"),N.gc(),N.gc(),N.gc(),N.hc(37,"div",88),N.hc(38,"label",138),N.dd(39),N.wc(40,"translate"),N.gc(),N.hc(41,"div",82),N.hc(42,"input",139),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.is_active=t}),N.gc(),N.hc(43,"label",140),N.dd(44),N.wc(45,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(46,"div",93),N.hc(47,"button",94),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(48),N.wc(49,"translate"),N.gc(),N.bd(50,bc,5,3,"ng-container",25),N.bd(51,_c,3,4,"button",95),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(4),N.gd(" ",null==e.entitySub.id?N.xc(5,18,"Add new"):N.xc(6,20,"Update")," ",N.xc(7,22,"Type of document")," "),N.Nb(12),N.fd("",N.xc(17,24,"Document code")," "),N.Nb(4),N.Ec("placeholder",N.xc(21,26,"Document code")),N.Dc("ngModel",e.entitySub.code),N.Nb(5),N.fd("",N.xc(26,28,"Document name")," "),N.Nb(4),N.Gc("placeholder","",N.xc(30,30,"Document name")," (",N.xc(31,32,"Vietnamese"),")"),N.Dc("ngModel",e.entitySub.name_l),N.Nb(5),N.Gc("placeholder","",N.xc(35,34,"Document name")," (",N.xc(36,36,"English"),")"),N.Dc("ngModel",e.entitySub.name_e),N.Nb(5),N.ed(N.xc(40,38,"Status")),N.Nb(3),N.Dc("ngModel",e.entitySub.is_active),N.Nb(2),N.ed(N.xc(45,40,e.entitySub.is_active?"activated":"not activated")),N.Nb(4),N.fd(" ",N.xc(49,42,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSaveSub),N.Nb(1),N.Dc("ngIf",!e.isSaveSub)}}function mc(e,t){1&e&&(N.fc(0),N.hc(1,"a",118),N.cc(2,"img",119),N.dd(3),N.wc(4,"translate"),N.gc(),N.ec()),2&e&&(N.Nb(3),N.fd(" ",N.xc(4,1,"Processing")," "))}function vc(e,t){if(1&e&&(N.hc(0,"button",120),N.dd(1),N.wc(2,"translate"),N.gc()),2&e){N.vc();const e=N.Rc(1);N.Dc("disabled",!e.valid),N.Nb(1),N.fd(" ",N.xc(2,2,"Save")," ")}}function yc(e,t){if(1&e){const e=N.ic();N.hc(0,"form",52,141),N.rc("ngSubmit",function(){return N.Uc(e),N.vc().saveChangeDepartment()}),N.hc(2,"div",54),N.hc(3,"h4",55),N.dd(4),N.wc(5,"translate"),N.wc(6,"translate"),N.gc(),N.hc(7,"button",58),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.hc(8,"span",59),N.dd(9,"\xd7"),N.gc(),N.gc(),N.gc(),N.hc(10,"div",122),N.hc(11,"div",61),N.hc(12,"div",74),N.hc(13,"div",123),N.hc(14,"label",142),N.dd(15),N.wc(16,"translate"),N.hc(17,"span",43),N.dd(18,"(*)"),N.gc(),N.gc(),N.hc(19,"input",143),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.dept_name_l=t}),N.wc(20,"translate"),N.wc(21,"translate"),N.gc(),N.gc(),N.gc(),N.hc(22,"div",74),N.hc(23,"div",123),N.hc(24,"input",144),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.dept_name_e=t}),N.wc(25,"translate"),N.wc(26,"translate"),N.gc(),N.gc(),N.gc(),N.hc(27,"div",88),N.hc(28,"label",145),N.dd(29),N.wc(30,"translate"),N.gc(),N.hc(31,"div",82),N.hc(32,"input",146),N.rc("ngModelChange",function(t){return N.Uc(e),N.vc().entitySub.is_active=t}),N.gc(),N.hc(33,"label",147),N.dd(34),N.wc(35,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(36,"div",93),N.hc(37,"button",94),N.rc("click",function(){return t.$implicit.dismiss("Cross click")}),N.dd(38),N.wc(39,"translate"),N.gc(),N.bd(40,mc,5,3,"ng-container",25),N.bd(41,vc,3,4,"button",95),N.gc(),N.gc()}if(2&e){const e=N.vc();N.Nb(4),N.gd(" ",N.xc(5,15,"Add new")," ",N.xc(6,17,"Department")," "),N.Nb(11),N.fd("",N.xc(16,19,"Name")," "),N.Nb(4),N.Gc("placeholder","",N.xc(20,21,"Name")," (",N.xc(21,23,"Vietnamese"),")"),N.Dc("ngModel",e.entitySub.dept_name_l),N.Nb(5),N.Gc("placeholder","",N.xc(25,25,"Name")," (",N.xc(26,27,"English"),")"),N.Dc("ngModel",e.entitySub.dept_name_e),N.Nb(5),N.ed(N.xc(30,29,"Status")),N.Nb(3),N.Dc("ngModel",e.entitySub.is_active),N.Nb(2),N.ed(N.xc(35,31,e.entitySub.is_active?"activated":"not activated")),N.Nb(4),N.fd(" ",N.xc(39,33,"Close")," "),N.Nb(2),N.Dc("ngIf",e.isSaveSub),N.Nb(1),N.Dc("ngIf",!e.isSaveSub)}}const Sc=[{path:"",children:[{path:"requests",component:Ni,data:{title:"Requests",breadcrumb:"Requests"}},{path:"type-of-profile",component:(()=>{class e{constructor(e,t,i,c,n,a,s,l,o,r){this._authenService=e,this._dataService=t,this._route=i,this._notifyService=c,this._uploadService=n,this._excelService=a,this._numberFormat=s,this.modalService=l,this._utilyService=o,this.sanitizer=r,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._requestslist=[],this.isSave=!1,this._title="",this.entity={},this._flagModal="ADD",this.jfile=null,this.entityUpload1={},this.formData=new FormData,this._catprofiles=[],this._catdocuments=[],this.entitySub={},this.isSaveSub=!1,this._departments=[],this.expandKeys=[],this._selectDept=null,this._getusers=[]}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadCatProfileNP(),this.loadCatDocNP(),this.loadDeptNP()}loadData(){this._isLoading=!0,this._dataService.post("/cat-submission/getallMainProfile",{page:this.pageIndex,limit:this.pageSize,filter:this._keyword,short_code:this.user.short_code}).subscribe(e=>{console.log(e),this._isLoading=!1,this._requestslist=e.data,this.totalRow=e.rowCount,this.totalPage=e.totalPages},()=>this._isLoading=!1)}_pageSizeChange(e){this.pageSize=e.target.value,this.loadData()}pageChanged(e){this.pageIndex=e.page,this.loadData()}removeBlankTypeProfile(){this.entity.code=null==this.entity.code?null:this.entity.code.replace(" ","")}loadCatProfileNP(){this._dataService.post("/cat-submission/getallProfileNP",{short_code:this.user.short_code}).subscribe(e=>{this._catprofiles=e.data})}loadCatDocNP(){this._dataService.post("/cat-submission/getallDocumentsNP",{short_code:this.user.short_code}).subscribe(e=>{this._catdocuments=e.data})}_openModal(e,t){null==t?(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.profile_group_id=null,this.entity.code=null,this.entity.title=null,this.entity.document_id=null,this.entity.description=null,this.entity.handle_users={data:[]},this.entity.estimated_cost=null,this.entity.attached_file=null,this.entity.is_active=!0,this.jfile=null,this._title=""):(this._flagModal="UPDATE",this.entity.handle_users={data:[]},this.loadDetailById(t.id)),this.modalService.open(e,{size:"xl",centered:!0,backdrop:!1})}loadDetailById(e){this._dataService.post("/cat-submission/detail",{id:e}).subscribe(e=>{this.entity=e.data,this._title=e.data.code;for(let i of this.entity.handle_users.data)i.flag=!0;if(this._detailContent=null==e.data.description?"":this.sanitizer.bypassSecurityTrustHtml(e.data.description),this.entity.flag_block){let e=window.CKEDITOR;if(e.instances)for(var t in e.instances)e.instances[t].destroy()}})}fileEvent1(e,t){var i=e.target.files[0];if(void 0===i||void 0===i.name)this.attached_file1=null,this.entityUpload1.fileUpload=null,this._notifyService.showError("en"==this.user.lang?v.a.recheck_file_en:v.a.recheck_file,"en"==this.user.lang?v.a.error_title_en:v.a.error_title);else{this.attached_file1=i.name;let c=this.attached_file1.split(".").pop();"doc"===c||"docx"===c||"pdf"===c?this.jfile=e.target:(this._notifyService.showError("en"==this.user.lang?v.a.format_incorrect_en:v.a.format_incorrect,"en"==this.user.lang?v.a.error_title_en:v.a.error_title),this.attached_file1=null,this.entityUpload1.fileUpload=null,t.value="")}}_processUpload1(e,t){if(null==e)this._notifyService.showError("en"==this.user.lang?v.a.recheck_file_en:v.a.recheck_file,"en"==this.user.lang?v.a.error_title_en:v.a.error_title);else{let i={folder_name:"submissions"};i.id=t.id,this._uploadService.uploadFile("/services/uploads/"+i.id+"/"+i.folder_name,e.files).subscribe(e=>{this._updateProfileById(t.id,e.data)})}}_updateProfileById(e,t){let i={};i.id=e,i.pathFile=t,this._dataService.post("/cat-submission/updateProfileById",i).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):("ADD"==this._flagModal?(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.profile_group_id=null,this.entity.code=null,this.entity.title=null,this.entity.document_id=null,this.entity.description=null,this.entity.handle_users={data:[]},this.entity.estimated_cost=null,this.entity.attached_file=null,this.entity.is_active=!0,this.jfile=null,this._title=""):this.modalService.dismissAll(),this.loadData(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}saveChange(){this.isSave=!0,console.log(this.entity),0!=this.entity.handle_users.data.length?"ADD"==this._flagModal?null==this.attached_file1?this._dataService.post("/cat-submission/add",this.entity).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.profile_group_id=null,this.entity.code=null,this.entity.title=null,this.entity.document_id=null,this.entity.description=null,this.entity.handle_users={data:[]},this.entity.estimated_cost=null,this.entity.attached_file=null,this.entity.is_active=!0,this.jfile=null,this._title="",this.loadData(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSaveSub=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)}):this._dataService.post("/cat-submission/add",this.entity).subscribe(e=>{"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):this._processUpload1(this.jfile,e.data)},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)}):null==this.attached_file1?(console.log("No file",this.entity),this.entity.attached_file=null,this._dataService.post("/cat-submission/update",this.entity).subscribe(e=>{console.log(e),this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.modalService.dismissAll(),this.loadData(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSaveSub=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})):this._dataService.post("/cat-submission/update",this.entity).subscribe(e=>{"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):this._processUpload1(this.jfile,e.data)},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)}):this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)}deleteItem(e){S.a.fire({title:"en"==this.user.lang?v.a.are_you_sure_en:v.a.are_you_sure,text:e.code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.a.cancel_en:v.a.cancel,confirmButtonText:"en"==this.user.lang?v.a.confirmtext_en:v.a.confirmtext}).then(t=>{if(t.value){let t={};t.id=e.id,this._dataService.post("/cat-submission/delete",t).subscribe(e=>{"failed"!=e.result?(this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_DELETE_EN:v.a.MSG_DELETE,"OK"),this.loadData()):this._notifyService.showError("en"==this.user.lang?v.a.MSG_DELETENO_EN:v.a.MSG_DELETENO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)},()=>{this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}})}_addItemHandle(e){if(this.loadDeptNP(),this._selectDept="all",null==e)if(0==this.entity.handle_users.data.length)this.entity.handle_users.data.push({id:1,order:1,user:null,role:null,time:1,flag:!1});else{let e=0;for(let t of this.entity.handle_users.data)null==t.user?(t.user={title:"en"==this.user.lang?"All departments":"\xc1p d\u1ee5ng t\u1ea5t c\u1ea3",key:"all",value:"all"},null==t.role&&(e+=1)):null==t.role&&(e+=1);if(0!=e)return void this._notifyService.showWarning("e"==this.user.lang?v.a.MSG_ERROR_EMPTY_EN:v.a.MSG_ERROR_EMPTY,"e"==this.user.lang?v.a.error_title_en:v.a.error_title);for(let t of this.entity.handle_users.data.filter(e=>!e.flag))t.flag=!0;0==this.entity.handle_users.data.filter(e=>!e.flag).length&&this.entity.handle_users.data.push({id:this.entity.handle_users.data.length+1,order:1,user:null,role:null,time:1,flag:!1})}}_removeItemHandle(e){let t=[],i=1;for(let c of this.entity.handle_users.data.filter(t=>t.id!=e.id))t.push({id:i,order:c.order,user:c.user,role:c.role,time:c.time,flag:c.flag}),i+=1;this.entity.handle_users.data=t}_getUser(e,t){if(null!=t&&null!=e.role)for(let i of this.entity.handle_users.data)i.id==e.id&&(i.user="all"!=t?{title:this._departments.filter(e=>e.key==t)[0].title,key:this._departments.filter(e=>e.key==t)[0].key,value:this._departments.filter(e=>e.key==t)[0].value}:{title:"en"==this.user.lang?"All departments":"\xc1p d\u1ee5ng t\u1ea5t c\u1ea3",key:"all",value:"all"});else this._notifyService.showWarning("e"==this.user.lang?v.a.MSG_ERROR_EMPTY_EN:v.a.MSG_ERROR_EMPTY,"e"==this.user.lang?v.a.error_title_en:v.a.error_title)}removeBlank(){this.entitySub.code=null==this.entitySub.code?null:this.entitySub.code.replace(" ","")}_popupCategory(e,t){this.entitySub={},this.entitySub.name_l=null,this.entitySub.name_e=null,this.entitySub.is_active=!0,this.entitySub.short_code=this.user.short_code,this.modalService.open(e,{size:"md",centered:!0})}saveChangeProfileGroup(){this.isSaveSub=!0,this.entitySub.code=this.entitySub.code.toUpperCase(),console.log(this.entitySub),this._dataService.post("/cat-submission/addProfile",this.entitySub).subscribe(e=>{this.isSaveSub=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.entitySub={},this.entitySub.name_l=null,this.entitySub.name_e=null,this.entitySub.is_active=!0,this.loadCatProfileNP(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSaveSub=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}_popupCategory1(e,t){this.entitySub={},this.entitySub.name_l=null,this.entitySub.name_e=null,this.entitySub.is_active=!0,this.entitySub.short_code=this.user.short_code,this.modalService.open(e,{size:"md",centered:!0})}saveChangeProfileGroup1(){this.isSaveSub=!0,this.entitySub.code=this.entitySub.code.toUpperCase(),this._dataService.post("/cat-submission/addDocument",this.entitySub).subscribe(e=>{this.isSaveSub=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.entitySub={},this.entitySub.name_l=null,this.entitySub.name_e=null,this.entitySub.is_active=!0,this.loadCatDocNP(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSaveSub=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}_popupDepartment(e,t){this.entitySub={},this.entitySub.dept_name_l=null,this.entitySub.dept_name_e=null,this.entitySub.is_active=!0,this.entitySub.short_code=this.user.short_code,this.modalService.open(e,{size:"md",centered:!0})}saveChangeDepartment(){this.isSaveSub=!0,this._dataService.post("/dept/add",this.entitySub).subscribe(e=>{this.isSaveSub=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.a.MSG_ADDNO_EN:v.a.MSG_ADDNO,"en"==this.user.lang?v.a.error_title_en:v.a.error_title):(this.entitySub={},this.entitySub.dept_name_l=null,this.entitySub.dept_name_e=null,this.entitySub.is_active=!0,this.entitySub.short_code=this.user.short_code,this.loadDeptNP(),this._notifyService.showSuccess("en"==this.user.lang?v.a.MSG_ADD_EN:v.a.MSG_ADD,"OK"))},()=>{this.isSaveSub=!1,this._notifyService.showError("en"==this.user.lang?v.a.MSG_ERROR_EN:v.a.MSG_ERROR,"en"==this.user.lang?v.a.error_title_en:v.a.error_title)})}loadDeptNP(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{let t=[];t.push({key:"all",title:"en"==this.user.lang?"All":"\xc1p d\u1ee5ng t\u1ea5t c\u1ea3",is_active:!1,parent_id:null,value:"all"});for(let c of e.data)t.push({key:c.id,title:"en"==this.user.lang?c.dept_name_e:c.dept_name_l,parent_id:c.parent_id,value:c.id});let i=this._utilyService.UnflattenFunc(t);this._departments=i})}_downloadFileResult(e){window.open($.a.BASE_API+"/"+e,"blank")}removeFile(e){this._dataService.post("/cat-submission/deleteProfileFile",{id:e.id,path:e.attached_file}).subscribe(t=>{this.loadDetailById(e.id)})}}return e.\u0275fac=function(t){return new(t||e)(N.bc(l.a),N.bc(s.a),N.bc(m.d),N.bc(D.a),N.bc(a.a),N.bc(n.a),N.bc(w.a),N.bc(x.s),N.bc(M.a),N.bc(H.b))},e.\u0275cmp=N.Vb({type:e,selectors:[["app-subm-typeprofile"]],viewQuery:function(e,t){if(1&e&&N.jd(Gi,1),2&e){let e;N.Qc(e=N.sc())&&(t.attached_file1=e.first)}},decls:75,vars:51,consts:[[1,"container-fluid"],[1,"email-wrap"],[1,"row"],[1,"col-lg-12"],[1,"email-left-aside"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-secondary mr-sm-2","routerLink","/submissions/requests",4,"ngIf"],["class","fa fa-spinner fa-spin text-primary","style","font-size: 16pt",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"custom-select","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-body"],[1,"table-responsive"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate",2,"width","15px"],[1,"text-truncate"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],["content",""],["categoryModal",""],["categoryModal1",""],["deptModal",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"fa","fa-plus"],["routerLink","/submissions/requests",1,"btn","btn-sm","btn-secondary","mr-sm-2"],[1,"fa","fa-clipboard"],[1,"fa","fa-spinner","fa-spin","text-primary",2,"font-size","16pt"],["colspan","8",2,"text-align","center"],[1,"text-danger"],["src","../../../../assets/img/icon-no.svg",4,"ngIf"],["src","../../../../assets/img/icon-yes.svg",4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"ngbTooltip","disabled","click"],[1,"fa","fa-pencil"],[1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-trash"],["src","../../../../assets/img/icon-no.svg"],["src","../../../../assets/img/icon-yes.svg"],[1,"form","theme-form",3,"ngSubmit"],["f","ngForm"],[1,"modal-header"],[1,"modal-title"],["href","javascript:;",1,"text-danger",3,"click"],[3,"ngClass"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",2,"max-height","calc(100vh - 300px)","overflow-y","auto"],[1,"form-group","row"],[1,"col-md-3"],["for","profile_group",1,"jbold"],["href","javascript:;",1,"btn","btn-outline-info","btn-pill","btn-xs",3,"click"],["id","profile_group","name","profile_group","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["value","null"],[3,"value",4,"ngFor","ngForOf"],["for","profile_code",1,"jbold"],["type","text","id","profile_code","name","profile_code","required","","autocomplete","off",3,"ngClass","ngModel","disabled","ngModelChange","keyup"],["for","profile_name",1,"jbold"],["type","text","id","profile_name","name","profile_name","required","","autocomplete","off",3,"ngClass","ngModel","disabled","ngModelChange"],["for","type_document",1,"jbold"],["name","type_document","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","disabled","ngModelChange"],[1,"col-md-12"],["for","handling_users",1,"jbold"],[1,"table"],["for","desc",1,"jbold"],["id","desc","name","desc","skin","moono-lisa","language","en",3,"ngModel","fullPage","config","ngModelChange",4,"ngIf"],[3,"innerHtml",4,"ngIf"],[1,"col-md-2"],["for","Status11",1,"jbold"],[1,"checkbox","checkbox-primary"],["id","Status11","type","checkbox","name","Status11",3,"ngModel","disabled","ngModelChange"],["for","Status11"],[1,"col-md-4"],["for","estimated_cost1",1,"jbold"],["id","estimated_cost1","name","estimated_cost1","type","text","placeholder","E.g: 5,000,0000","mask","separator.2","thousandSeparator",",",3,"ngClass","ngModel","disabled","ngModelChange"],[1,"col-md-6"],["for","attached_file1",1,"jbold"],["name","attached_file1","type","file","id","attached_file1",3,"ngClass","disabled","change"],["attached_file1",""],["type","hidden","name","attached_file11","accept",".pdf,.doc,.docx",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],[3,"value"],["type","number","class","form-control","required","","autocomplete","off","style","width: 70px",3,"name","ngModel","ngModelChange",4,"ngIf"],["style","width: 100%","nzShowSearch","",3,"nzExpandedKeys","nzNodes","nzPlaceHolder","ngModel","ngModelChange",4,"ngIf"],["class","form-control","required","",3,"name","ngModel","ngModelChange","change",4,"ngIf"],["type","number","class","form-control","autocomplete","off","style","width: 70px",3,"name","ngModel","ngModelChange",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["type","number","required","","autocomplete","off",1,"form-control",2,"width","70px",3,"name","ngModel","ngModelChange"],["nzShowSearch","",2,"width","100%",3,"nzExpandedKeys","nzNodes","nzPlaceHolder","ngModel","ngModelChange"],["required","",1,"form-control",3,"name","ngModel","ngModelChange","change"],["value","0"],["value","1"],["value","2"],["value","3"],["type","number","autocomplete","off",1,"form-control",2,"width","70px",3,"name","ngModel","ngModelChange"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],["colspan","4",1,"text-truncate"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],["id","desc","name","desc","skin","moono-lisa","language","en",3,"ngModel","fullPage","config","ngModelChange"],["ckeEditor1",""],[3,"innerHtml"],["href","javascript:;",1,"mr-sm-2",3,"click"],["href","javascript:;","class","text-danger",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary",3,"disabled"],["formPG","ngForm"],[1,"modal-body"],[1,"form-group"],["for","CodePG",1,"jbold"],["type","text","id","CodePG","name","CodePG","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup"],["for","Name1",1,"jbold"],["type","text","id","Name1","name","Name1","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","text","id","Name1a","name","Name1a","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","StatusPG",1,"jbold"],["id","StatusPG","type","checkbox","name","StatusPG",3,"ngModel","ngModelChange"],["for","StatusPG"],["formPG1","ngForm"],["for","CodePG1",1,"jbold"],["type","text","id","CodePG1","name","CodePG1","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup"],["for","Name11",1,"jbold"],["type","text","id","Name11","name","Name11","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","text","id","Name11a","name","Name11a","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","StatusPG1",1,"jbold"],["id","StatusPG1","type","checkbox","name","StatusPG1",3,"ngModel","ngModelChange"],["for","StatusPG1"],["formDept","ngForm"],["for","Department1",1,"jbold"],["type","text","id","Department1","name","Department1","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","text","id","Department1a","name","Department1a","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","StatusDept",1,"jbold"],["id","StatusDept","type","checkbox","name","StatusDept",3,"ngModel","ngModelChange"],["for","StatusDept"]],template:function(e,t){1&e&&(N.hc(0,"div",0),N.hc(1,"div",1),N.hc(2,"div",2),N.hc(3,"div",3),N.hc(4,"div",4),N.hc(5,"div",5),N.hc(6,"div",6),N.hc(7,"div",2),N.hc(8,"div",7),N.hc(9,"div",8),N.hc(10,"input",9),N.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),N.wc(11,"translate"),N.gc(),N.bd(12,Ai,4,3,"a",10),N.bd(13,Oi,4,3,"a",11),N.bd(14,Ti,1,0,"i",12),N.gc(),N.gc(),N.hc(15,"div",13),N.hc(16,"div",14),N.hc(17,"select",15),N.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),N.hc(18,"option",16),N.dd(19,"#10"),N.gc(),N.hc(20,"option",17),N.dd(21,"#25"),N.gc(),N.hc(22,"option",18),N.dd(23,"#50"),N.gc(),N.hc(24,"option",19),N.dd(25,"#100"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.hc(26,"div",20),N.hc(27,"div",21),N.hc(28,"table",22),N.hc(29,"thead"),N.hc(30,"th",23),N.dd(31,"#"),N.gc(),N.hc(32,"th",24),N.dd(33),N.wc(34,"translate"),N.gc(),N.hc(35,"th",24),N.dd(36),N.wc(37,"translate"),N.gc(),N.hc(38,"th",24),N.dd(39),N.wc(40,"translate"),N.gc(),N.hc(41,"th",24),N.dd(42),N.wc(43,"translate"),N.gc(),N.hc(44,"th",24),N.dd(45),N.wc(46,"translate"),N.gc(),N.hc(47,"th",24),N.dd(48),N.wc(49,"translate"),N.gc(),N.hc(50,"th",24),N.dd(51),N.wc(52,"translate"),N.gc(),N.gc(),N.hc(53,"tbody"),N.bd(54,Fi,6,3,"ng-container",25),N.bd(55,Bi,25,16,"ng-container",26),N.gc(),N.gc(),N.gc(),N.hc(56,"div",27),N.hc(57,"div",28),N.hc(58,"div",29),N.hc(59,"pagination",30),N.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),N.gc(),N.gc(),N.hc(60,"div",31),N.hc(61,"a",32),N.dd(62),N.wc(63,"translate"),N.wc(64,"translate"),N.wc(65,"translate"),N.wc(66,"translate"),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.gc(),N.bd(67,hc,119,100,"ng-template",null,33,N.cd),N.bd(69,fc,52,44,"ng-template",null,34,N.cd),N.bd(71,pc,52,44,"ng-template",null,35,N.cd),N.bd(73,yc,42,35,"ng-template",null,36,N.cd)),2&e&&(N.Nb(10),N.Dc("placeholder",N.xc(11,27,"Search"))("ngModel",t._keyword),N.Nb(2),N.Dc("ngIf",t._authenService.hasPermission("DEPT","read")),N.Nb(1),N.Dc("ngIf",t._authenService.hasPermission("DEPT","read")),N.Nb(1),N.Dc("ngIf",t._isLoading),N.Nb(3),N.Dc("ngModel",t.pageSize),N.Nb(16),N.fd(" ",N.xc(34,29,"Profile group")," "),N.Nb(3),N.fd(" ",N.xc(37,31,"Type of document")," "),N.Nb(3),N.fd(" ",N.xc(40,33,"Code")," "),N.Nb(3),N.fd(" ",N.xc(43,35,"Title")," "),N.Nb(3),N.fd(" ",N.xc(46,37,"Configure handling users")," "),N.Nb(3),N.fd(" ",N.xc(49,39,"Status")," "),N.Nb(3),N.fd(" ",N.xc(52,41,"Actions")," "),N.Nb(3),N.Dc("ngIf",0==t._requestslist.length),N.Nb(1),N.Dc("ngForOf",t._requestslist),N.Nb(4),N.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),N.Nb(3),N.id("",N.xc(63,43,"Total of records"),": ",t.totalRow," - ",N.xc(64,45,"Page")," ",t.pageIndex," ",N.xc(65,47,"of")," ",t.totalPage," ",N.xc(66,49,"page"),""))},directives:[p.c,p.n,p.q,c.q,p.x,p.r,p.A,c.p,g.a,m.g,x.N,p.z,p.o,p.p,c.o,p.w,V.a,p.b,Y.a,p.s,Q.a,W.a],pipes:[E.c],styles:[""]}),e})(),data:{title:"Type of profile",breadcrumb:"Type of profile"}},{path:"profile-group",component:F,data:{title:"Profile group",breadcrumb:"Profile group"}},{path:"type-of-document",component:Ui,data:{title:"Type of document",breadcrumb:"Type of document"}}]}];let Nc=(()=>{class e{}return e.\u0275mod=N.Zb({type:e}),e.\u0275inj=N.Yb({factory:function(t){return new(t||e)},imports:[[m.h.forChild(Sc)],m.h]}),e})();var Dc=i("arFO"),wc=i("Kdsb"),xc=i("g9iH"),Mc=i("UkRs");let Ec=(()=>{class e{}return e.\u0275mod=N.Zb({type:e}),e.\u0275inj=N.Yb({factory:function(t){return new(t||e)},providers:[l.a,s.a,a.a,n.a,E.d,w.a],imports:[[c.c,Nc,p.k,_.a,b.b,E.b,f.a,u.c.forRoot(),g.b.forRoot(),h.a.forRoot(),d.a.forRoot(),xc.b,r.a,o.a,Dc.a,x.u,V.b,Y.b.forRoot(),wc.c,Mc.c,W.b,Q.b,X.b]]}),e})()}}]);