(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{d8eE:function(e,t,n){"use strict";n.r(t),n.d(t,"RequestModule",function(){return ma});var c=n("ofXK"),a=n("3Pt+"),i=n("tyNb"),o=n("mrSG"),r=n("wd/R"),l=n("gFX4"),s=n.n(l),d=n("CMKA"),h=n("5JmO"),g=n.n(h),u=n("TruH"),_=n.n(u),m=n("PSD3"),p=n.n(m),f=n("piOG"),b=n("fXoL"),y=n("7dP1"),v=n("cplz"),x=n("3t6R"),S=n("25+x"),N=n("VToC"),w=n("1kSV"),D=n("hzby"),M=n("Lm2G"),C=n("ZOsW"),T=n("sYmb");function I(e,t){if(1&e){const e=b.ic();b.hc(0,"button",44),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t._getlist)}),b.cc(1,"i",45),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function k(e,t){1&e&&b.cc(0,"img",46)}function P(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",47),b.hc(3,"h3",48),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function R(e,t){if(1&e){const e=b.ic();b.hc(0,"a",62),b.rc("click",function(){b.Uc(e);const t=b.vc(2).$implicit,n=b.vc(2),c=b.Rc(108);return n._switchLanguage(c,3,t)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Report standard compared")))}function E(e,t){if(1&e){const e=b.ic();b.hc(0,"a",62),b.rc("click",function(){b.Uc(e);const t=b.vc(2).$implicit,n=b.vc(2),c=b.Rc(108);return n._switchLanguage(c,4,t)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Report standard attached")))}function A(e,t){if(1&e){const e=b.ic();b.hc(0,"div",58),b.hc(1,"button",59),b.cc(2,"i",60),b.gc(),b.hc(3,"div",61),b.hc(4,"a",62),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit,n=b.vc(2),c=b.Rc(108);return n._switchLanguage(c,0,t)}),b.dd(5),b.wc(6,"translate"),b.gc(),b.hc(7,"a",62),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit,n=b.vc(2),c=b.Rc(108);return n._switchLanguage(c,1,t)}),b.dd(8),b.wc(9,"translate"),b.gc(),b.bd(10,R,3,3,"a",63),b.bd(11,E,3,3,"a",63),b.gc(),b.gc()}if(2&e){const e=b.vc().$implicit;b.Nb(5),b.ed(b.xc(6,4,"All")),b.Nb(3),b.ed(b.xc(9,6,"Report standard")),b.Nb(2),b.Dc("ngIf",e.flag_compare),b.Nb(1),b.Dc("ngIf",null!=e.url_img)}}function O(e,t){if(1&e){const e=b.ic();b.hc(0,"a",65),b.rc("click",function(){b.Uc(e);const t=b.vc(2).$implicit,n=b.vc(2),c=b.Rc(112);return n._editInformation(c,t)}),b.cc(1,"i",66),b.gc()}}function U(e,t){if(1&e&&(b.fc(0),b.bd(1,O,2,0,"a",64),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngIf",e._authenService.hasPermission("REQ-REPORT","update"))}}function Y(e,t){1&e&&(b.hc(0,"span",67),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Draft")," "))}function F(e,t){1&e&&(b.hc(0,"span",68),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Official")," "))}function L(e,t){1&e&&(b.hc(0,"span",69),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Evicted")," "))}function q(e,t){1&e&&(b.hc(0,"span",70),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Printed")," "))}function z(e,t){1&e&&(b.hc(0,"span",71),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Cancel")," "))}function G(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",50),b.dd(2),b.gc(),b.hc(3,"td"),b.bd(4,A,12,8,"div",51),b.bd(5,U,2,1,"ng-container",40),b.gc(),b.hc(6,"td"),b.dd(7),b.gc(),b.hc(8,"td"),b.dd(9),b.gc(),b.hc(10,"td"),b.dd(11),b.gc(),b.hc(12,"td"),b.dd(13),b.wc(14,"date"),b.gc(),b.hc(15,"td"),b.dd(16),b.wc(17,"date"),b.gc(),b.hc(18,"td"),b.dd(19),b.gc(),b.hc(20,"td"),b.dd(21),b.gc(),b.hc(22,"td",52),b.rc("click",function(){b.Uc(e);const n=t.$implicit,c=b.vc(2),a=b.Rc(110);return 2!=n.is_active&&c._authenService.hasPermission("REQ-REPORT","update")?3==n.is_active?c._switchEviction(n):c._popupStates(a,n):null}),b.bd(23,Y,3,3,"span",53),b.bd(24,F,3,3,"span",54),b.bd(25,L,3,3,"span",55),b.bd(26,q,3,3,"span",56),b.bd(27,z,3,3,"span",57),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,c=b.vc(2);b.Nb(2),b.fd(" ",n+1+c.pageSize*(c.pageIndex-1)," "),b.Nb(2),b.Dc("ngIf",c._authenService.hasPermission("REQ-REPORT","print")),b.Nb(1),b.Dc("ngIf",0==e.is_active||1==e.is_active),b.Nb(2),b.fd(" ",e.report_inner_code," "),b.Nb(2),b.fd(" ",e.request_no," "),b.Nb(2),b.fd(" ",e.sample_name," "),b.Nb(2),b.ed(b.yc(14,15,e.received_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.ed(b.yc(17,18,e.returned_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.ed(e.company_sender_l),b.Nb(2),b.ed(e.sender_name),b.Nb(2),b.Dc("ngIf",0==e.is_active),b.Nb(1),b.Dc("ngIf",1==e.is_active),b.Nb(1),b.Dc("ngIf",2==e.is_active),b.Nb(1),b.Dc("ngIf",3==e.is_active),b.Nb(1),b.Dc("ngIf",4==e.is_active)}}function H(e,t){if(1&e&&(b.fc(0),b.bd(1,G,28,21,"tr",49),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._getlist)}}function V(e,t){if(1&e){const e=b.ic();b.hc(0,"form",72),b.hc(1,"div",73),b.hc(2,"h4",74),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",75),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",76),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",77),b.hc(9,"div",78),b.hc(10,"div",79),b.hc(11,"div",80),b.hc(12,"button",81),b.rc("click",function(){return b.Uc(e),b.vc()._print("vn")}),b.dd(13),b.wc(14,"translate"),b.gc(),b.hc(15,"button",82),b.rc("click",function(){return b.Uc(e),b.vc()._print("en")}),b.dd(16),b.wc(17,"translate"),b.gc(),b.hc(18,"button",83),b.rc("click",function(){return b.Uc(e),b.vc()._print("0")}),b.dd(19),b.wc(20,"translate"),b.wc(21,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}2&e&&(b.Nb(3),b.fd(" ",b.xc(4,5,"Language")," "),b.Nb(10),b.fd(" ",b.xc(14,7,"Vietnamese")," "),b.Nb(3),b.fd(" ",b.xc(17,9,"English")," "),b.Nb(3),b.gd(" ",b.xc(20,11,"Vietnamese"),"/",b.xc(21,13,"English")," "))}function B(e,t){if(1&e){const e=b.ic();b.hc(0,"form",72),b.hc(1,"div",73),b.hc(2,"h4",74),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",75),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",76),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",77),b.hc(9,"div",78),b.hc(10,"div",79),b.hc(11,"div",80),b.hc(12,"select",84),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().changeState=t})("change",function(){return b.Uc(e),b.vc()._updateState()}),b.hc(13,"option",85),b.dd(14),b.wc(15,"translate"),b.gc(),b.hc(16,"option",85),b.dd(17),b.wc(18,"translate"),b.gc(),b.hc(19,"option",85),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"option",85),b.dd(23),b.wc(24,"translate"),b.gc(),b.hc(25,"option",85),b.dd(26),b.wc(27,"translate"),b.gc(),b.hc(28,"option",85),b.dd(29),b.wc(30,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.gd(" ",b.xc(4,15,"Status")," - ",e._titleLanguage," "),b.Nb(9),b.Dc("ngModel",e.changeState),b.Nb(1),b.Dc("value",null),b.Nb(1),b.ed(b.xc(15,17,"Please choose")),b.Nb(2),b.Dc("value",0),b.Nb(1),b.ed(b.xc(18,19,"Draft")),b.Nb(2),b.Dc("value",1),b.Nb(1),b.ed(b.xc(21,21,"Official")),b.Nb(2),b.Dc("value",2),b.Nb(1),b.ed(b.xc(24,23,"Evicted")),b.Nb(2),b.Dc("value",3),b.Nb(1),b.ed(b.xc(27,25,"Printed")),b.Nb(2),b.Dc("value",4),b.Nb(1),b.ed(b.xc(30,27,"Cancel"))}}function Q(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"button",108),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(2)._chooseTab(n,n.order_no)}),b.dd(2),b.wc(3,"translate"),b.gc(),b.ec()}if(2&e){const e=t.$implicit,n=b.vc(2);b.Nb(1),b.Dc("ngClass",e.order_no==n._currentTabActivated?"btn btn-sm btn-primary":"btn btn-sm btn-secondary"),b.Nb(1),b.gd(" ",b.xc(3,3,"Sample")," ",e.order_no," ")}}const $=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function K(e,t){if(1&e){const e=b.ic();b.hc(0,"form",72),b.hc(1,"div",73),b.hc(2,"h4",74),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",75),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",76),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",77),b.hc(9,"div",78),b.hc(10,"div",79),b.hc(11,"div",86),b.hc(12,"label",87),b.dd(13),b.wc(14,"translate"),b.hc(15,"span",48),b.dd(16,"(*)"),b.gc(),b.gc(),b.hc(17,"ng-select",88),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.customer_id=t}),b.wc(18,"translate"),b.wc(19,"translate"),b.gc(),b.gc(),b.gc(),b.hc(20,"div",89),b.hc(21,"div",86),b.hc(22,"label",90),b.dd(23),b.wc(24,"translate"),b.hc(25,"span",48),b.dd(26,"(*)"),b.gc(),b.gc(),b.hc(27,"input",91),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._fdatea=t})("bsValueChange",function(t){return b.Uc(e),b.vc().orgValueChange1a(t)}),b.wc(28,"translate"),b.gc(),b.gc(),b.gc(),b.hc(29,"div",89),b.hc(30,"div",86),b.hc(31,"label",92),b.dd(32),b.wc(33,"translate"),b.hc(34,"span",48),b.dd(35,"(*)"),b.gc(),b.gc(),b.hc(36,"input",93),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._tdatea=t})("bsValueChange",function(t){return b.Uc(e),b.vc().orgValueChange2a(t)}),b.wc(37,"translate"),b.gc(),b.gc(),b.gc(),b.hc(38,"div",89),b.hc(39,"div",86),b.hc(40,"label",94),b.dd(41),b.wc(42,"translate"),b.gc(),b.hc(43,"div",29),b.hc(44,"input",95),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.valid_number=t})("change",function(){return b.Uc(e),b.vc()._calculateDays()}),b.wc(45,"translate"),b.gc(),b.hc(46,"button",96),b.rc("click",function(){return b.Uc(e),b.vc().saveChangeRequest()}),b.cc(47,"i",97),b.dd(48),b.wc(49,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(50,"div",79),b.cc(51,"hr"),b.hc(52,"div",98),b.hc(53,"div",99),b.bd(54,Q,4,5,"ng-container",49),b.gc(),b.gc(),b.cc(55,"hr"),b.gc(),b.hc(56,"div",100),b.hc(57,"div",86),b.hc(58,"label",101),b.hc(59,"strong"),b.dd(60),b.wc(61,"translate"),b.gc(),b.gc(),b.hc(62,"input",102),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_name=t}),b.wc(63,"translate"),b.gc(),b.hc(64,"input",103),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_id=t}),b.gc(),b.gc(),b.gc(),b.hc(65,"div",100),b.hc(66,"div",86),b.hc(67,"label",101),b.hc(68,"strong"),b.dd(69),b.wc(70,"translate"),b.gc(),b.gc(),b.hc(71,"input",102),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.weight=t}),b.wc(72,"translate"),b.gc(),b.gc(),b.gc(),b.hc(73,"div",100),b.hc(74,"div",86),b.hc(75,"label",101),b.hc(76,"strong"),b.dd(77),b.wc(78,"translate"),b.wc(79,"translate"),b.gc(),b.gc(),b.hc(80,"textarea",104),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.description=t}),b.wc(81,"translate"),b.gc(),b.gc(),b.gc(),b.hc(82,"div",100),b.hc(83,"div",86),b.hc(84,"label",101),b.hc(85,"strong"),b.dd(86),b.wc(87,"translate"),b.gc(),b.gc(),b.hc(88,"textarea",104),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.note=t}),b.wc(89,"translate"),b.gc(),b.gc(),b.gc(),b.hc(90,"div",105),b.hc(91,"button",106),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.cc(92,"i",107),b.dd(93),b.wc(94,"translate"),b.gc(),b.hc(95,"button",96),b.rc("click",function(){return b.Uc(e),b.vc().saveChangeSample()}),b.cc(96,"i",97),b.dd(97),b.wc(98,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.gd(" ",b.xc(4,55,"Request code")," - ",e._titleLanguage," "),b.Nb(10),b.fd("",b.xc(14,57,"Company")," "),b.Nb(4),b.Dc("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.entity.customer_id)("placeholder",b.xc(18,59,"Please choose"))("notFoundText",b.xc(19,61,"Not found item")),b.Nb(6),b.fd("",b.xc(24,63,"Received date")," "),b.Nb(4),b.Dc("placeholder",b.xc(28,65,"Received date"))("ngModel",e._fdatea)("bsConfig",b.Hc(99,$)),b.Nb(5),b.fd("",b.xc(33,67,"Returned date")," "),b.Nb(4),b.Dc("placeholder",b.xc(37,69,"Returned date"))("ngModel",e._tdatea)("bsConfig",b.Hc(100,$)),b.Nb(5),b.ed(b.xc(42,71,"Valid date")),b.Nb(3),b.Dc("type","number")("placeholder",b.xc(45,73,"Valid date"))("ngModel",e.entity.valid_number)("min",0),b.Nb(4),b.fd(" ",b.xc(49,75,"Save")," "),b.Nb(6),b.Dc("ngForOf",e.entity._samples),b.Nb(4),b.Fc("for","sn",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(61,77,"Sample name")),b.Nb(2),b.Fc("id","sn",e._currentTabActivated,""),b.Fc("name","sample_name",e._currentTabActivated,""),b.Dc("placeholder",b.xc(63,79,"Sample")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_name),b.Nb(2),b.Fc("id","id",e._currentTabActivated,""),b.Fc("name","id",e._currentTabActivated,""),b.Dc("ngModel",e.entity0.sample_id),b.Nb(3),b.Fc("for","weight",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(70,81,"Weight")),b.Nb(2),b.Fc("id","weight",e._currentTabActivated,""),b.Fc("name","weight",e._currentTabActivated,""),b.Dc("placeholder",b.xc(72,83,"Weight")+" "+e._currentTabActivated)("ngModel",e.entity0.weight),b.Nb(4),b.Fc("for","description",e._currentTabActivated,""),b.Nb(2),b.gd("",b.xc(78,85,"Description")," (",b.xc(79,87,"State of sample"),")"),b.Nb(3),b.Fc("id","description",e._currentTabActivated,""),b.Fc("name","description",e._currentTabActivated,""),b.Dc("placeholder",b.xc(81,89,"Description")+" "+e._currentTabActivated)("ngModel",e.entity0.description),b.Nb(4),b.Fc("for","note",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(87,91,"Note")),b.Nb(2),b.Fc("id","note",e._currentTabActivated,""),b.Fc("name","note",e._currentTabActivated,""),b.Dc("placeholder",b.xc(89,93,"Note")+" "+e._currentTabActivated)("ngModel",e.entity0.note),b.Nb(5),b.fd(" ",b.xc(94,95,"Close")," "),b.Nb(4),b.fd(" ",b.xc(98,97,"Save")," ")}}const j=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};g.a.vfs=_.a.pdfMake.vfs;let W=(()=>{class e{constructor(e,t,n,c,a,i,o){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=c,this._uploadService=a,this._excelService=i,this.modalService=o,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._getlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this._status="",this._titleLanguage="",this._detail={},this._logoPath=d.a.BASE_API+"/",this._logoIsoPath=d.a.BASE_API+"/",this._signatureCTOPath=d.a.BASE_API+"/",this._signatureCEOPath=d.a.BASE_API+"/",this.changeState=null,this._printAll=[],this._langMain=1,this.entity={},this.entity0={},this.requestId="",this._customers=[],this._dt1a="",this._dt2a="",this._fdatea=new Date,this._tdatea=new Date,this._currentTabActivated=0,!1!==e.checkAccess("REQ-REPORT")&&!1!==e.hasPermission("REQ-REPORT","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadImgs(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,console.log(e),this._dataService.post("/labresult/getlistbypaging",e).subscribe(e=>{console.log(e),this._getlist=e.data,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}orgValueChange1(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=r(e).format("YYYY-MM-DD")}_switchLanguage(e,t,n){this.loadAllReportByRequestId(n.request_id),this._titleLanguage=n.report_code,this._chooseOne=t,this._detail=n,this.modalService.open(e,{size:"md",centered:!0})}loadAllReportByRequestId(e){let t={};t.request_id=e,console.log(t),this._dataService.post("/labresult/getlistbyrequestId",t).subscribe(e=>{this._printAll=e.data})}_print(e){return Object(o.__awaiter)(this,void 0,void 0,function*(){this._langMain=e,console.log("Detail",this._detail);var t=[];if(0!=this._chooseOne){if(null!=this._detail.old_report_detail){let n="(* K\u1ebft qu\u1ea3 n\xe0y thay th\u1ebf cho k\u1ebft qu\u1ea3  "+this._detail.old_report_detail.report_code+", xu\u1ea5t ng\xe0y  "+r(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; b\u1ea3n k\u1ebft qu\u1ea3 c\u0169 s\u1ebd b\u1ecb h\u1ee7y)",c="(* This report cancels and replaces the previous one numbered "+this._detail.old_report_detail.report_code+", date "+r(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; which must be destroyed)",a="vn"==e?n:c;"0"==e&&(a=n+"\n"+c),t.push({text:a,alignment:"right",italics:!0,fontSize:10})}t.push({text:"\n"});let a="en"==e?null==this._detail.company_sender_e?this._detail.company_sender_l.toUpperCase():this._detail.company_sender_e.toUpperCase():this._detail.company_sender_l.toUpperCase();null==this._detail.company_receiver_l&&null==this._detail.company_receiver_e||(a="en"==e||"0"==e?null==this._detail.company_receiver_e?this._detail.company_receiver_l.toUpperCase():this._detail.company_receiver_e.toUpperCase():this._detail.company_receiver_l.toUpperCase()),"0"==e&&(a="en"==e,this._detail.company_sender_l.toUpperCase(),null==this._detail.company_sender_e||this._detail.company_sender_e.toUpperCase(),null==this._detail.company_receiver_l&&null==this._detail.company_receiver_e||(a=this._detail.company_receiver_l.toUpperCase()+"\n"+(null==this._detail.company_receiver_e?"":this._detail.company_receiver_e.toUpperCase()))),this._detail.address_receiver_l=null==this._detail.address_receiver_l?this._detail.address_l:this._detail.address_receiver_l;let i="en"==e?null==this._detail.address_receiver_e?this._detail.address_receiver_l:this._detail.address_receiver_e:this._detail.address_receiver_l;"0"==e&&(i=this._detail.address_receiver_l+"\n"+(null==this._detail.address_receiver_e?"":this._detail.address_receiver_e));let o="en"==e?"Sample described as":"T\xean m\u1eabu";"0"==e&&(o="T\xean m\u1eabu/ Sample described as");let l="en"==e?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng";"0"==e&&(l="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference");let s=this._detail.employee_code+this._detail.request_no.substr(2,this._detail.request_no.length);null==this._detail.employee_code&&(s=this._detail.request_no.substr(2,this._detail.request_no.length));let h="en"==e?"Sample code":"M\xe3 s\u1ed1 m\u1eabu";"0"==e&&(h="M\xe3 s\u1ed1 m\u1eabu/ Sample code");let g="en"==e?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu";"0"==e&&(g="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning");let u="en"==e?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu";"0"==e&&(u="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date");let _="en"==e?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m";"0"==e&&(_="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time");let m="en"==e?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng";"0"==e&&(m="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date");let p=r(new Date(this._detail.returned_date)).subtract(7,"hours").format("DD/MM/YYYY");t.push({alignment:"justify",columns:[[{text:[{text:a,bold:!0,fontSize:12},"\n\n",{text:i},"\n\n\n"],style:"body_top"}],{width:150,qr:this._detail.report_code+","+this._detail.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]});let f="en"==e?null==this._detail.sample_name_e?"":this._detail.sample_name_e:this._detail.sample_name;"0"==e&&(f=this._detail.sample_name+(null==this._detail.sample_name_e?"":"/ "+this._detail.sample_name_e));let b="en"==e?null==this._detail.description_e?"":this._detail.description_e:null==this._detail.description?"":this._detail.description;"0"==e&&(b=(null==this._detail.description?"":this._detail.description)+(null==this._detail.description_e?"":"/ "+this._detail.description_e)),t.push({table:{widths:[150,5,"*"],body:[[{text:o,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:f,bold:!0,fontSize:11}],[{text:l,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:s,bold:!0,style:"body_footer"}],[{text:h,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:this._detail.report_inner_code,bold:!0,style:"body_footer"}],[{text:g,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:b,style:"body_footer"}],[{text:u,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:_,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+p,style:"body_footer"}],[{text:m,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:p,style:"body_footer"}]]},layout:{defaultBorder:!1}}),t.push({text:"\n"});let y="en"==e?"NO.":"STT";"0"==e&&(y="STT\nNO.");let v="en"==e?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";"0"==e&&(v="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let x="en"==e?"UNIT":"\u0110\u01a0N V\u1eca";"0"==e&&(x="\u0110\u01a0N V\u1eca\nUNIT");let S="en"==e?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";"0"==e&&(S="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let N="en"==e?"RESULTS":"K\u1ebeT QU\u1ea2";"0"==e&&(N="K\u1ebeT QU\u1ea2\nRESULTS");let w="en"==e?"COMPARE / GUIDELINES":"SO S\xc1NH";"0"==e&&(w="SO S\xc1NH\nCOMPARE / GUIDELINES");let D=!1;if(1==this._chooseOne){var n=[],c=1;if(this._detail.order_details.length>0){for(let t of this._detail.order_details){let a=!1;a="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let i="",o=null==t.standards?[]:JSON.parse(t.standards);for(let e of o.filter(e=>null!=e))null==e.id?null!=e&&(i+="("+e+")"):i+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let l=t.unit,s=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,h=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>","");console.log(h),n.push({STT:c,Para:{columns:[{text:r,fontSize:10,italics:a,width:"auto",bold:!0},{text:i,fontSize:8,italics:a,bold:!0}],columnGap:3},Unit:l,Method:s,Results:[{columns:[{text:d,width:"auto",fontSize:10,bold:!0},{text:h,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),c+=1,t.allow_lod&&(D=!0)}t.push(this.tablePrintQuotation5(n,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}}if(3==this._chooseOne){n=[],c=1;for(let t of this._detail.order_details){let a=!1;a="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let i="",o=null==t.standards?[]:JSON.parse(t.standards);for(let e of o.filter(e=>null!=e))null==e.id?null!=e&&(i+="("+e+")"):i+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let l=t.unit,s=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,h=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>","");n.push({STT:c,Para:{columns:[{text:r,fontSize:10,italics:a,width:"auto",bold:!0},{text:i,fontSize:8,italics:a,bold:!0}],columnGap:3},Unit:l,Method:s,Results:[{columns:[{text:d,width:"auto",fontSize:10,bold:!0},{text:h,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:t.compare_note}),c+=1,t.allow_lod&&(D=!0)}t.push(this.tablePrintQuotation(n,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}if(4==this._chooseOne)if(this._detail.flag_compare){n=[],c=1;for(let t of this._detail.order_details){let a=!1;a="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let i="",o=null==t.standards?[]:JSON.parse(t.standards);for(let e of o.filter(e=>null!=e))null==e.id?null!=e&&(i+="("+e+")"):i+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let l=t.unit,s=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,h=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>","");console.log(h),n.push({STT:c,Para:{columns:[{text:r,fontSize:10,italics:a,width:"auto",bold:!0},{text:i,fontSize:8,italics:a,bold:!0}],columnGap:3},Unit:l,Method:s,Results:[{columns:[{text:d,width:"auto",fontSize:10,bold:!0},{text:h,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:t.compare_note}),c+=1,t.allow_lod&&(D=!0)}t.push(this.tablePrintQuotation(n,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}else if(n=[],c=1,this._detail.order_details.length>0){for(let t of this._detail.order_details){let a=!1;a="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let i="",o=null==t.standards?[]:JSON.parse(t.standards);for(let e of o.filter(e=>null!=e))null==e.id?null!=e&&(i+="("+e+")"):i+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let l=t.unit,s=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,h=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>","");n.push({STT:c,Para:{columns:[{text:r,fontSize:10,italics:a,width:"auto",bold:!0},{text:i,fontSize:8,italics:a,bold:!0}],columnGap:3},Unit:l,Method:s,Results:[{columns:[{text:d,width:"auto",fontSize:10,bold:!0},{text:h,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),c+=1,t.allow_lod&&(D=!0)}t.push(this.tablePrintQuotation5(n,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if(null!=this._detail.take_note||D){let n=[],c="vn"==e?"Ghi ch\xfa: ":"Note: ";"0"==e&&(c="Ghi ch\xfa/ Note: ");let a="vn"==e?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection";"0"==e&&(a="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),n.push({LOD:c+(null==this._detail.take_note?"":this._detail.take_note)+(D?a:"")}),t.push(this.tablePrintQuotation5A(n,["LOD"],["*"]))}t.push({text:"\n"});let M="vn"==e?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR";"0"==e&&(M="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR");let C="vn"==e?"GI\xc1M \u0110\u1ed0C":"DIRECTOR";"0"==e&&(C="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==this._detail.is_active&&(t.push({columns:[{width:50,text:""},{width:180,text:M,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:C,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"})),null!=this._signatureCTOPath&&null!=this._signatureCEOPath&&0!=this._detail.is_active?(t.push({columns:[{width:50,text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCTOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:"*",text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCEOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:50,text:""}]}),t.push({text:"\n"})):t.push({columns:[{width:50,text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]}),0==this._detail.is_active&&t.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"});let T="vn"==e?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note";"0"==e&&(T="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note");let I="vn"==e?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.";"0"==e&&(I="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample.");let k="vn"==e?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.";"0"==e&&(k="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request.");let P="";if(this._detail.standard_list.length>0)for(let t of this._detail.standard_list){let n="vn"==e?t.description_l:t.description_e;"0"==e&&(n=t.description_l+"/ "+t.description_e),P+="("+t.id+") "+n+"\n"}if(t.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:T,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:I+"\n"+k+"\n"},{text:P,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null!=this._detail.url_img&&4==this._chooseOne){let n="en"==e?"Sample photo":"H\xecnh m\u1eabu";"0"==e&&(n="H\xecnh m\u1eabu/ Sample photo"),t.push({text:"",pageBreak:"after"}),t.push({text:n+"\n",alignment:"center"});let c=d.a.BASE_API+"/"+this._detail.url_img;t.push({image:yield this._convertBase64ImageFromURL(c),alignment:"center",width:430})}}else{let a=0;for(let i of this._printAll){if(null!=i.old_report_detail){let n="(This report cancels and replaces the previous one numbered "+i.old_report_detail.report_code+" date "+r(new Date(i.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)",c="(This report cancels and replaces the previous one numbered "+i.old_report_detail.report_code+" date "+r(new Date(i.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)";t.push({text:"vn"==e?n:c,alignment:"right",italics:!0,fontSize:10})}t.push({text:"\n"});let o="en"==e?null==i.company_sender_e?i.company_sender_l.toUpperCase():i.company_sender_e.toUpperCase():i.company_sender_l.toUpperCase();null==i.company_receiver_l&&null==i.company_receiver_e||(o="en"==e||"0"==e?null==i.company_receiver_e?i.company_receiver_l.toUpperCase():i.company_receiver_e.toUpperCase():i.company_receiver_l.toUpperCase()),i.address_receiver_l=null==i.address_receiver_l?i.address_l:i.address_receiver_l;let l="en"==e?null==i.address_receiver_e?i.address_receiver_l:i.address_receiver_e:i.address_receiver_l;"0"==e&&(o=i.company_sender_l.toUpperCase()+"\n"+(null==i.company_sender_e?"":i.company_sender_e.toUpperCase()),null==i.company_receiver_l&&null==i.company_receiver_e||(o=i.company_receiver_l.toUpperCase()+"\n"+(null==i.company_receiver_e?"":i.company_receiver_e.toUpperCase())),l=i.address_receiver_l+"\n"+(null==i.address_receiver_e?"":i.address_receiver_e));let s="en"==e?"Sample described as":"T\xean m\u1eabu";"0"==e&&(s="T\xean m\u1eabu/ Sample described as");let h="en"==e?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng";"0"==e&&(h="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference");let g=i.employee_code+i.request_no.substr(2,i.request_no.length);null==i.employee_code&&(g=i.request_no.substr(2,i.request_no.length));let u="en"==e?"Sample code":"M\xe3 s\u1ed1 m\u1eabu";"0"==e&&(u="M\xe3 s\u1ed1 m\u1eabu/ Sample code");let _="en"==e?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu";"0"==e&&(_="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning");let m="en"==e?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu";"0"==e&&(m="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date");let p="en"==e?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m";"0"==e&&(p="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time");let f="en"==e?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng";"0"==e&&(f="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date");let b=1==i.is_active?r(new Date(i.timestamp)).subtract(7,"hours").format("DD/MM/YYYY"):r(new Date(i.returned_date)).subtract(7,"hours").format("DD/MM/YYYY");t.push({alignment:"justify",columns:[[{text:[{text:o,bold:!0,fontSize:12},"\n\n",{text:l},"\n\n\n"],style:"body_top"}],{width:150,qr:i.report_code+","+i.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),t.push({table:{widths:[150,5,"*"],body:[[{text:s,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:i.sample_name,bold:!0,fontSize:11}],[{text:h,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:g,bold:!0,style:"body_footer"}],[{text:u,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:i.report_inner_code,bold:!0,style:"body_footer"}],[{text:_,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:null==i.description?"":i.description,style:"body_footer"}],[{text:m,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(i.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:p,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(i.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+b,style:"body_footer"}],[{text:f,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:b,style:"body_footer"}]]},layout:{defaultBorder:!1}}),t.push({text:"\n"});let y="en"==e?"NO.":"STT";"0"==e&&(y="STT\nNO.");let v="en"==e?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";"0"==e&&(v="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let x="en"==e?"UNIT":"\u0110\u01a0N V\u1eca";"0"==e&&(x="\u0110\u01a0N V\u1eca\nUNIT");let S="en"==e?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";"0"==e&&(S="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let N="en"==e?"RESULTS":"K\u1ebeT QU\u1ea2";"0"==e&&(N="K\u1ebeT QU\u1ea2\nRESULTS");let w="en"==e?"COMPARE / GUIDELINES":"SO S\xc1NH";"0"==e&&(w="SO S\xc1NH\nCOMPARE / GUIDELINES");let D=!1;if(n=[],c=1,i.order_details.length>0){for(let t of i.order_details){let a=!1;a="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let i="",o=null==t.standards?[]:JSON.parse(t.standards);for(let e of o.filter(e=>null!=e))null==e.id?null!=e&&(i+="("+e+")"):i+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let l=t.unit,s=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,h=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>","");console.log(h),n.push({STT:c,Para:{columns:[{text:r,fontSize:10,italics:a,width:"auto",bold:!0},{text:i,fontSize:8,italics:a,bold:!0}],columnGap:3,bold:!0},Unit:l,Method:s,Results:[{columns:[{text:d,width:"auto",fontSize:10,bold:!0},{text:h,fontSize:6,bold:!0}],columnGap:0,alignment:"center"},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0,alignment:"center"}],columnGap:0}]}),c+=1,t.allow_lod&&(D=!0)}t.push(this.tablePrintQuotation5(n,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if(null!=i.take_note||D){let n=[],c="vn"==e?"Ghi ch\xfa: ":"Note: ";"0"==e&&(c="Ghi ch\xfa/ Note: ");let a="vn"==e?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection";"0"==e&&(a="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),n.push({LOD:c+(null==i.take_note?"":i.take_note)+(D?a:"")}),t.push(this.tablePrintQuotation5A(n,["LOD"],["*"]))}t.push({text:"\n"});let M="vn"==e?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR";"0"==e&&(M="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR");let C="vn"==e?"GI\xc1M \u0110\u1ed0C":"DIRECTOR";"0"==e&&(C="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==i.is_active&&(t.push({columns:[{width:50,text:""},{width:180,text:M,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:C,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"})),null!=this._signatureCTOPath&&null!=this._signatureCEOPath&&0!=i.is_active?(t.push({columns:[{width:50,text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCTOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:"*",text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCEOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:50,text:""}]}),t.push({text:"\n"})):t.push({columns:[{width:50,text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]}),0==i.is_active&&t.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"});let T="vn"==e?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note";"0"==e&&(T="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note");let I="vn"==e?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.";"0"==e&&(I="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample.");let k="vn"==e?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.";"0"==e&&(k="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request.");let P="";if(i.standard_list.length>0)for(let t of i.standard_list){let n="vn"==e?t.description_l:t.description_e;"0"==e&&(n=t.description_l+"/ "+t.description_e),P+="("+t.id+") "+n+"\n"}if(t.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:T,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:I+"\n"+k+"\n"},{text:P,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null!=i.url_img&&2==i.is_active){t.push({text:"",pageBreak:"after"});let e=d.a.BASE_API+"/"+i.url_img;t.push({image:yield this._convertBase64ImageFromURL(e),alignment:"center"})}a+=1,a<this._printAll.length&&t.push({text:"",pageBreak:"after"})}}const a={pageSize:"A4",pageMargins:"vn"==e?[25,120,25,70]:[25,140,25,90],defaultStyle:{fontSize:12,columnGap:20},content:[t],footer:function(t,n){return{table:{widths:[5,"*","*","*"],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:("en"==e||"0"==e?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG")+"\n"+("en"==e||"0"==e?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam"),alignment:"left",style:"body_footer"},{height:150,text:"en"==e||"0"==e?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",alignment:"left",style:"body_footer"},{height:150,text:"en"==e||"0"==e?"Document number : EPR-QP-0023/F02\nVersion : 01\nEffective day : 03/09/2020":"M\xe3 t\xe0i li\u1ec7u : EPR-QP-0023/F02\nL\u1ea7n ban h\xe0nh : 01\nNg\xe0y ban h\xe0nh : 03/09/2020",alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},header:(t,n,c)=>{let a="vn"==e?"K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M":"ANALYTICAL REPORT";"0"==e&&(a="K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M\nANALYTICAL REPORT");let i="vn"==e?"M\xe3 k\u1ebft qu\u1ea3: ":"Report code: ";"0"==e&&(i="M\xe3 k\u1ebft qu\u1ea3/Report code: ");let o="vn"==e?"Trang ":"Page: ";return"0"==e&&(o="Trang/Page "),{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:167,height:70,alignment:"right",image:"myIso"}],[{colSpan:2,text:a,alignment:"center",fontSize:16,bold:!0}],[{colSpan:2,width:"*",text:[{text:i+this._detail.report_code+"-"+o+t.toString()+"/"+n},{text:"__",color:"#ffffff"}],alignment:"right",bold:!0}]]},layout:{defaultBorder:!1}}},styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},images:{myLogo:yield this._convertBase64ImageFromURL(this._logoPath),myIso:yield this._convertBase64ImageFromURL(this._logoIsoPath)}};var i="'print-'"+this._detail.report_code+".pdf";i=i.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g.a.createPdf(a).open()})}_exportAll(e){let t=[],n=1;for(let c of e){let e="";4==c.is_active&&(e="en"==this.user.lang?f.a.cancel_en:f.a.cancel),3==c.is_active&&(e="en"==this.user.lang?f.a.printed_en:f.a.printed),2==c.is_active&&(e="en"==this.user.lang?f.a.evicted_en:f.a.evicted),1==c.is_active&&(e="en"==this.user.lang?f.a.official_en:f.a.official),0==c.is_active&&(e="en"==this.user.lang?f.a.draft_en:f.a.draft);let a=new Date(c.received_date).getTime()+864e5*c.tat;t.push({"No.":n,"Report code":c.report_inner_code,"Request No":c.request_no,"Sample name":c.sample_name,"Received Date":r(new Date(c.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),"Returned Date":r(new Date(a)).subtract(7,"hours").format("DD/MM/YYYY"),Company:c.company_sender_l,Contact:null==c.sender_name?"":c.sender_name,State:e}),n+=1}this._excelService.exportAsExcelFile(t,"ResultReport-"+r(new Date).subtract(7,"hours").format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.length+" "+f.a.record,"OK")}tablePrintQuotation(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation(e,t)}}}buildTableBodyPrintQuotation(e,t){var n=[];let c=[],a="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(a="STT\nNO.");let i="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(i="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let o="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(o="\u0110\u01a0N V\u1eca\nUNIT");let r="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(r="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let l="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";0==this._langMain&&(l="K\u1ebeT QU\u1ea2\nRESULTS");let s="en"==this._langMain.toString()?"COMPARE / GUIDELINES":"SO S\xc1NH";0==this._langMain&&(s="SO S\xc1NH\nCOMPARE / GUIDELINES"),c.push({text:a,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),c.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),c.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),c.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),c.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),c.push({text:s,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(c);let d=0;return e.forEach(function(e){var c=[],a=1;t.forEach(function(t){c.push(2==a||5==a?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==a?"left":"center",fontSize:10}),a+=1,d+=1}),n.push(c)}),n}tablePrintQuotation5(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation5(e,t)}}}buildTableBodyPrintQuotation5(e,t){var n=[];let c=[],a="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(a="STT\nNO.");let i="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(i="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let o="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(o="\u0110\u01a0N V\u1eca\nUNIT");let r="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(r="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let l="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";0==this._langMain&&(l="K\u1ebeT QU\u1ea2\nRESULTS");let s="en"==this._langMain.toString()?"COMPARE / GUIDELINES":"SO S\xc1NH";0==this._langMain&&(s="SO S\xc1NH\nCOMPARE / GUIDELINES"),c.push({text:a,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),c.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),c.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),c.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),c.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(c);let d=0;return e.forEach(function(e){var c=[],a=1;t.forEach(function(t){c.push(2==a||5==a?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==a?"left":"center",fontSize:10}),a+=1,d+=1}),n.push(c)}),n}tablePrintQuotation5A(e,t,n){return{table:{widths:n,body:this.buildTableBodyPrintQuotation5A(e,t)}}}buildTableBodyPrintQuotation5A(e,t){var n=[];let c=0;return e.forEach(function(e){var a=[];t.forEach(function(t){a.push({text:{text:e[t]},alignment:"left",fontSize:10,italics:!0}),c+=1}),n.push(a)}),n}_convertBase64ImageFromURL(e){return new Promise((t,n)=>{var c=new Image;c.setAttribute("crossOrigin","anonymous"),c.onload=()=>{var e=document.createElement("canvas");e.width=c.width,e.height=c.height,e.getContext("2d").drawImage(c,0,0);var n=e.toDataURL("image/png");t(n)},c.onerror=e=>{n(e)},c.src=e})}loadImgs(){let e={};e.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",e).subscribe(e=>Object(o.__awaiter)(this,void 0,void 0,function*(){this._logoPath+=e.data.filter(e=>"logo-stp"==e.file_name_e)[0].path_file,this._logoIsoPath+=e.data.filter(e=>"logo-iso"==e.file_name_e)[0].path_file,this._signatureCTOPath+=e.data.filter(e=>"signature-cto"==e.file_name_e)[0].path_file,this._signatureCEOPath+=e.data.filter(e=>"signature-ceo"==e.file_name_e)[0].path_file}))}_popupStates(e,t){this._titleLanguage=t.report_code,this.changeState=t.is_active,this._detail=t,this.modalService.open(e,{size:"sm",centered:!0})}_updateState(){let e={};if(e.report_id=this._detail.report_id,e.is_active=this.changeState,e.userid=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code,2==this.changeState||4==this.changeState){let t=this._titleLanguage.substr(this._titleLanguage.lastIndexOf("-RV")+3,this._titleLanguage.length);if(parseInt(t)+1>9&&2==this.changeState)return void this._notifyService.showError("en"==this.user.lang?f.a.MSG_EXPORTNO_EN:f.a.MSG_EXPORT_NO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);if(this._detail.flag_warning_eviction)return this._notifyService.showError("en"==this.user.lang?f.a.error_eviction_msg_en:f.a.error_eviction_msg,"en"==this.user.lang?f.a.error_title_en:f.a.error_title),void this.modalService.dismissAll();p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_evic_en:f.a.are_u_sure_evic,text:this._detail.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/labresult/updateState",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this._updateStateOfSample(this._detail,e.flag),this.modalService.dismissAll()}):this.modalService.dismissAll()})}else this._dataService.post("/labresult/updateState",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this.modalService.dismissAll()})}_switchEviction(e){console.log(e),p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_evic_en:f.a.are_u_sure_evic,text:e.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{if(t.value){let t={};t.report_id=e.report_id,t.is_active=2,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/labresult/updateState",t).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this._updateStateOfSample(e,t.flag),this.modalService.dismissAll()})}else this.modalService.dismissAll()})}_updateStateOfSample(e,t){let n={};n.getlist=e.order_details,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,n.status=3,this._dataService.post("/labresult/updateStateOfSample",n).subscribe(e=>{console.log(e)})}_editInformation(e,t){console.log(t),this._currentTabActivated=0,this._titleLanguage=t.request_no,this.requestId=t.request_id,this.loadRequestDetail(t.request_id),this.modalService.open(e,{size:"lg",centered:!0,backdrop:!1})}loadRequestDetail(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{console.log("Again",e.data),this.entity=e.data,this._fdatea=new Date(e.data.received_date),this._tdatea=new Date(e.data.returned_date),this._dt1a=r(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=r(this._tdatea).format("YYYY-MM-DD HH:mm");let t=[],n=0;for(let c of e.data.orders_list.filter(e=>null!=e.inner_code))t.push({sample_id:c.sample_id,sample_name:c.sample_name,sample_code:c.sample_code,inner_code:c.inner_code,description:c.description,note:c.note,weight:c.weight,is_active:c.is_active,userid:c.userid,total_sub:c.total_sub,order_no:n}),n+=1;console.log(t),this.entity._samples=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0],this.loadCustomers()})}loadCustomers(){let e={};e.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.code_link,code:n.id});this._customers=t})}orgValueChange1a(e){null!=e&&"Invalid date"!=e?(this._fdatea=e,this._tdatea=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1a=r(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=r(this._tdatea).format("YYYY-MM-DD HH:mm")):(this._fdatea=null,this._dt1a=null)}orgValueChange2a(e){null!=e&&"Invalid date"!=e?(this._tdatea=e,this._dt1a=r(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=r(this._tdatea).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdatea-this._fdatea)/864e5)):(this._tdatea=null,this._dt2a=null)}_calculateDays(){null!=this._fdatea&&(this._tdatea=new Date(this._fdatea.getTime()+864e5*this.entity.valid_number))}_chooseTab(e,t){console.log(e,"Tab: ",t),this.entity0=e,this._currentTabActivated=t}saveChangeRequest(){if(null==this._dt1a||null==this._dt2a||this._fdatea>this._tdatea)return void this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);let e={};e.id=this.entity.id,e.customer_id=this.entity.customer_id,e.received_date=this._dt1a,e.returned_date=this._dt2a,e.valid_number=this.entity.valid_number,e.userid=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code,this._dataService.post("/labresult/updateRequestInfo",e).subscribe(e=>{"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})):this._notifyService.showWarning("en"==this.user.lang?f.a.MSG_UPDATENO_EN:f.a.MSG_UPDATENO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)},()=>{this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}saveChangeSample(){let e={};e.sample_id=this.entity0.sample_id,e.sample_name=this.entity0.sample_name,e.weight=this.entity0.weight,e.description=this.entity0.description,e.note=this.entity0.note,e.userid=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code,""!=this.entity0.sample_name&&null!=this.entity0.sample_name?this._dataService.post("/labresult/updateSampleInfo",e).subscribe(e=>{"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})):this._notifyService.showWarning("en"==this.user.lang?f.a.MSG_UPDATENO_EN:f.a.MSG_UPDATENO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)},()=>{this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}):this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}closeModal(){this.modalService.dismissAll()}}return e.\u0275fac=function(t){return new(t||e)(b.bc(y.a),b.bc(v.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-lab-results"]],decls:113,vars:104,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["type","button","routerLink","/request/lab-report",1,"btn","btn-sm","btn-primary","mr-sm-2"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","90px"],["scope","col"],[4,"ngIf"],["contentLanguage",""],["contentStatus",""],["contentRequest",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","10",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["ngbDropdown","","class","btn-group mr-sm-1","role","group",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-default",4,"ngIf"],["ngbDropdown","","role","group",1,"btn-group","mr-sm-1"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["href","javascript:;",1,"dropdown-item",3,"click"],["class","dropdown-item","href","javascript:;",3,"click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-warning",3,"click"],[1,"icofont","icofont-pencil-alt-5"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-danger"],[1,"badge","badge-success"],[1,"badge","badge-default"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-danger","mr-sm-2",3,"click"],["name","changestate",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value"],[1,"form-group"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],[1,"col-md-4"],["for","received_date"],["type","text","bsDatepicker","","name","_fdatea","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdatea","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",1,"form-control","mr-sm-2",3,"type","placeholder","ngModel","min","ngModelChange","change"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],[1,"flex-wrap"],[1,"btn-group","flex-wrap"],[1,"col-md-6"],[3,"for"],["type","text",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],[1,"col-md-12","text-right"],[1,"btn","btn-sm","btn-light","mr-sm-2",3,"click"],[1,"fa","fa-times-circle-o"],["type","button",3,"ngClass","click"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.hc(12,"select",10),b.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),b.hc(13,"option",11),b.dd(14),b.wc(15,"translate"),b.gc(),b.hc(16,"option",12),b.dd(17),b.wc(18,"translate"),b.gc(),b.hc(19,"option",13),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"option",14),b.dd(23),b.wc(24,"translate"),b.gc(),b.hc(25,"option",15),b.dd(26),b.wc(27,"translate"),b.gc(),b.hc(28,"option",16),b.dd(29),b.wc(30,"translate"),b.gc(),b.gc(),b.bd(31,I,4,3,"button",17),b.hc(32,"button",18),b.dd(33),b.wc(34,"translate"),b.gc(),b.bd(35,k,1,0,"img",19),b.gc(),b.gc(),b.hc(36,"div",20),b.hc(37,"div",21),b.hc(38,"select",22),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(39,"option",23),b.dd(40,"#10"),b.gc(),b.hc(41,"option",24),b.dd(42,"#25"),b.gc(),b.hc(43,"option",25),b.dd(44,"#50"),b.gc(),b.hc(45,"option",26),b.dd(46,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(47,"div",27),b.hc(48,"div",28),b.hc(49,"div",29),b.hc(50,"div",30),b.hc(51,"pagination",31),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(52,"div",32),b.hc(53,"a",33),b.dd(54),b.wc(55,"translate"),b.wc(56,"translate"),b.wc(57,"translate"),b.wc(58,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(59,"div",28),b.hc(60,"div",34),b.hc(61,"table",35),b.hc(62,"thead",36),b.hc(63,"tr"),b.hc(64,"th",37),b.dd(65,"#"),b.gc(),b.hc(66,"th",38),b.dd(67),b.wc(68,"translate"),b.gc(),b.hc(69,"th",39),b.dd(70),b.wc(71,"translate"),b.gc(),b.hc(72,"th",39),b.dd(73),b.wc(74,"translate"),b.gc(),b.hc(75,"th",39),b.dd(76),b.wc(77,"translate"),b.gc(),b.hc(78,"th",39),b.dd(79),b.wc(80,"translate"),b.gc(),b.hc(81,"th",39),b.dd(82),b.wc(83,"translate"),b.gc(),b.hc(84,"th",39),b.dd(85),b.wc(86,"translate"),b.gc(),b.hc(87,"th",39),b.dd(88),b.wc(89,"translate"),b.gc(),b.hc(90,"th",39),b.dd(91),b.wc(92,"translate"),b.gc(),b.gc(),b.gc(),b.hc(93,"tbody"),b.bd(94,P,6,3,"ng-container",40),b.bd(95,H,2,1,"ng-container",40),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(96,"div",28),b.hc(97,"div",29),b.hc(98,"div",30),b.hc(99,"pagination",31),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(100,"div",32),b.hc(101,"a",33),b.dd(102),b.wc(103,"translate"),b.wc(104,"translate"),b.wc(105,"translate"),b.wc(106,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(107,V,22,15,"ng-template",null,41,b.cd),b.bd(109,B,31,29,"ng-template",null,42,b.cd),b.bd(111,K,99,101,"ng-template",null,43,b.cd)),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,52,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(102,j)),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(103,j)),b.Nb(1),b.Dc("ngModel",t._status),b.Nb(2),b.fd(" ",b.xc(15,54,"All")," "),b.Nb(3),b.fd(" ",b.xc(18,56,"Draft")," "),b.Nb(3),b.fd(" ",b.xc(21,58,"Official")," "),b.Nb(3),b.fd(" ",b.xc(24,60,"Evicted")," "),b.Nb(3),b.fd(" ",b.xc(27,62,"Printed")," "),b.Nb(3),b.fd(" ",b.xc(30,64,"Cancel")," "),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),b.Nb(2),b.fd(" ",b.xc(34,66,"Go back")," "),b.Nb(2),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(55,68,"Total of records"),": ",t.totalRow," - ",b.xc(56,70,"Page")," ",t.pageIndex," ",b.xc(57,72,"of")," ",t.totalPage," ",b.xc(58,74,"page"),""),b.Nb(13),b.fd(" ",b.xc(68,76,"Actions")," "),b.Nb(3),b.fd(" ",b.xc(71,78,"Report code")," "),b.Nb(3),b.fd(" ",b.xc(74,80,"Request code")," "),b.Nb(3),b.fd(" ",b.xc(77,82,"Sample name")," "),b.Nb(3),b.fd(" ",b.xc(80,84,"Received date")," "),b.Nb(3),b.ed(b.xc(83,86,"Returned date")),b.Nb(3),b.fd(" ",b.xc(86,88,"Company")," "),b.Nb(3),b.ed(b.xc(89,90,"Contact")),b.Nb(3),b.ed(b.xc(92,92,"Status")),b.Nb(3),b.Dc("ngIf",0==t._getlist.length),b.Nb(1),b.Dc("ngIf",t._getlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(103,94,"Total of records"),": ",t.totalRow," - ",b.xc(104,96,"Page")," ",t.pageIndex," ",b.xc(105,98,"of")," ",t.totalPage," ",b.xc(106,100,"page"),""))},directives:[a.c,a.n,a.q,D.b,D.a,a.x,a.r,a.A,c.q,i.e,M.a,c.p,w.l,w.p,w.o,a.z,a.o,a.p,C.a,a.w,a.t,c.o],pipes:[T.c,c.f],styles:[""]}),e})();const J=["fileUpload"];function X(e,t){if(1&e&&(b.hc(0,"option",36),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function Z(e,t){if(1&e){const e=b.ic();b.hc(0,"button",37),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t._preparationlist)}),b.cc(1,"i",38),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function ee(e,t){1&e&&b.cc(0,"img",39)}function te(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",40),b.hc(3,"h3",41),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function ne(e,t){1&e&&b.cc(0,"i",53)}function ce(e,t){1&e&&b.cc(0,"i",54)}function ae(e,t){if(1&e){const e=b.ic();b.hc(0,"button",55),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._updateValidation(t,0)}),b.wc(1,"translate"),b.cc(2,"i",56),b.gc()}2&e&&b.Dc("title",b.xc(1,1,"Save"))}function ie(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"a",57),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit,n=b.vc(2),c=b.Rc(116);return n.popupComment(c,t)}),b.dd(2),b.gc(),b.ec()}if(2&e){const e=b.vc().$implicit;b.Nb(2),b.ed(e.inner_code)}}function oe(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.ed(e.inner_code)}}function re(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"a",57),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._updateStatusSample(t)}),b.dd(2),b.wc(3,"translate"),b.gc(),b.ec()}2&e&&(b.Nb(2),b.ed(b.xc(3,1,"Return lab")))}function le(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.mark," ")}}function se(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",58),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.mark=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","mark",t+1,""),b.Dc("ngModel",n.mark)}}function de(e,t){1&e&&b.cc(0,"i",59)}function he(e,t){1&e&&b.cc(0,"i",60)}function ge(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.compare_note," ")}}function ue(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",58),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.compare_note=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","comparenote",t+1,""),b.Dc("ngModel",n.compare_note)}}function _e(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",43),b.dd(2),b.gc(),b.hc(3,"td",44),b.hc(4,"button",45),b.rc("click",function(){const e=t.$implicit;return e.flag=!e.flag}),b.wc(5,"translate"),b.bd(6,ne,1,0,"i",46),b.bd(7,ce,1,0,"i",47),b.gc(),b.bd(8,ae,3,3,"button",48),b.gc(),b.hc(9,"td"),b.bd(10,ie,3,1,"ng-container",34),b.bd(11,oe,2,1,"ng-container",34),b.gc(),b.hc(12,"td"),b.dd(13),b.gc(),b.hc(14,"td"),b.dd(15),b.gc(),b.hc(16,"td"),b.dd(17),b.gc(),b.hc(18,"td"),b.dd(19),b.gc(),b.hc(20,"td"),b.dd(21),b.gc(),b.hc(22,"td"),b.dd(23),b.gc(),b.hc(24,"td"),b.dd(25),b.gc(),b.hc(26,"td"),b.dd(27),b.gc(),b.hc(28,"td"),b.dd(29),b.gc(),b.hc(30,"td"),b.dd(31),b.gc(),b.hc(32,"td"),b.cc(33,"span",49),b.gc(),b.hc(34,"td"),b.bd(35,re,4,3,"ng-container",34),b.gc(),b.hc(36,"td"),b.bd(37,le,2,1,"ng-container",34),b.bd(38,se,2,2,"ng-container",34),b.gc(),b.hc(39,"td",50),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(2)._updateValidationLOD(n,1)}),b.bd(40,de,1,0,"i",51),b.bd(41,he,1,0,"i",52),b.gc(),b.hc(42,"td"),b.bd(43,ge,2,1,"ng-container",34),b.bd(44,ue,2,2,"ng-container",34),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,c=b.vc(2);b.Nb(2),b.fd(" ",n+1+c.pageSize*(c.pageIndex-1)," "),b.Nb(2),b.Dc("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!c._authenService.hasPermission("REQ-REPORT","update"))("title",b.xc(5,27,e.flag?"Cancel":"_Edit")),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",c._authenService.hasPermission("REQ-REPORT","update")),b.Nb(1),b.Dc("ngIf",!c._authenService.hasPermission("REQ-REPORT","update")),b.Nb(2),b.ed(e.code),b.Nb(2),b.fd(" ","en"==c.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ","en"==c.user.lang?e.para_name_e:e.para_name_l," "),b.Nb(2),b.ed(e.tat),b.Nb(2),b.ed(e.note),b.Nb(2),b.ed(e.note_lab),b.Nb(2),b.fd(" ",e.note_asm," "),b.Nb(2),b.ed(e.unit),b.Nb(2),b.fd(" ",e.lod," "),b.Nb(2),b.fd(" ",e.loq," "),b.Nb(2),b.Dc("innerHTML",e.result_record,b.Vc),b.Nb(2),b.Dc("ngIf",c._authenService.hasPermission("REQ-REPORT","update")&&c._authenService.hasPermission("REQ-REPORT","delete")),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",e.allow_lod),b.Nb(1),b.Dc("ngIf",!e.allow_lod),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag)}}function me(e,t){if(1&e&&(b.fc(0),b.bd(1,_e,45,29,"tr",42),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._preparationlist)}}function pe(e,t){1&e&&(b.fc(0),b.hc(1,"a",81),b.cc(2,"img",82),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing"),""))}function fe(e,t){1&e&&(b.hc(0,"button",83),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Save & close")," "))}function be(e,t){if(1&e){const e=b.ic();b.hc(0,"form",61,62),b.rc("ngSubmit",function(){b.Uc(e);const t=b.vc();return t.saveChangeComment(t.entityComment,0)}),b.hc(2,"div",63),b.hc(3,"h4",64),b.dd(4),b.wc(5,"translate"),b.gc(),b.hc(6,"button",65),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(7,"span",66),b.dd(8,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(9,"div",67),b.hc(10,"div",68),b.hc(11,"div",69),b.hc(12,"div",70),b.hc(13,"label",71),b.dd(14),b.wc(15,"translate"),b.gc(),b.hc(16,"textarea",72),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entityComment.take_note=t}),b.gc(),b.gc(),b.gc(),b.hc(17,"div",69),b.hc(18,"div",70),b.hc(19,"label",73),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"input",74,75),b.rc("change",function(t){return b.Uc(e),b.vc().fileEvent(t)}),b.gc(),b.hc(24,"input",76),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entityComment.url_img=t}),b.gc(),b.hc(25,"small",77),b.hc(26,"a",57),b.rc("click",function(){b.Uc(e);const t=b.vc();return t.removeAttachment(t.entityComment)}),b.dd(27),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(28,"div",78),b.hc(29,"button",79),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.dd(30),b.wc(31,"translate"),b.gc(),b.bd(32,pe,5,3,"ng-container",34),b.bd(33,fe,3,3,"button",80),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(4),b.gd(" ",b.xc(5,10,"Note")," - ",e.entityComment.inner_code," "),b.Nb(10),b.fd("",b.xc(15,12,"Content")," "),b.Nb(2),b.Dc("ngModel",e.entityComment.take_note),b.Nb(4),b.ed(b.xc(21,14,"Attachment")),b.Nb(4),b.Dc("ngModel",e.entityComment.url_img),b.Nb(3),b.ed(e._path),b.Nb(3),b.fd(" ",b.xc(31,16,"Close")," "),b.Nb(2),b.Dc("ngIf",e.isSave),b.Nb(1),b.Dc("ngIf",!e.isSave)}}const ye=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};g.a.vfs=_.a.pdfMake.vfs;let ve=(()=>{class e{constructor(e,t,n,c,a,i,o,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=c,this._uploadService=a,this._excelService=i,this.modalService=o,this._activatedRoute=r,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=3,this.entity={},this.entityComment={},this._path="",this._id="",!1!==e.checkAccess("RES-VALID")&&!1!==e.hasPermission("RES-VALID","read")||this._route.navigate(["/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this._activatedRoute.params.subscribe(e=>{this._id=e.id,this.loadData(this._id),this.socket.on("refreshPage",e=>{console.log(this._id),this.loadData(this._id)})}),this.loadDepartment(),this.loadTestFamilyPL()}loadData(e){if(null==e){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,this._dataService.post("/lab/getlistresultlabs",e).subscribe(e=>{console.log(e);let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,tat:n.tat,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,export_result:null==n.export_result?1:n.export_result,allow_lod:null!=n.allow_lod&&n.allow_lod,compare_note:n.compare_note,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}else{let e={};e.filter=this._keyword,e.page=this.pageIndex,e.limit=this.pageSize,e.request_id=this._id,this._dataService.post("/lab/getlistresultlabsbyid",e).subscribe(e=>{console.log(e);let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,tat:n.tat,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,export_result:null==n.export_result?1:n.export_result,allow_lod:null!=n.allow_lod&&n.allow_lod,compare_note:n.compare_note,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyPL(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",e).subscribe(e=>{this._pllist=e.data})}_exportAll(e){let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?f.a.s_done_en:f.a.s_done),3==n.status&&(e="en"==this.user.lang?f.a.s_validate_en:f.a.s_validate),2==n.status&&(e="en"==this.user.lang?f.a.s_techvalidate_en:f.a.s_techvalidate),1==n.status&&(e="en"==this.user.lang?f.a.s_prepare_en:f.a.s_prepare),0==n.status&&(e="en"==this.user.lang?f.a.s_none_en:f.a.s_none);let c=new Date(n.received_date).getTime()+864e5*n.tat;t.push({"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,Note:null==n.note?"":n.note,"Note Lab":null==n.note_lab?"":n.note_lab,"Note ASM":null==n.note_asm?"":n.note_asm,Unit:null==n.unit?"":n.unit,LOD:null==n.lod?"":n.lod,LOQ:null==n.loq?"":n.loq,Result:null==n.result_record?"":n.result_record,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(c)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l})}this._excelService.exportAsExcelFile(t,"LabValidation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.length+" "+f.a.record,"OK")}orgValueChange1(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e,t){3==t||4==t?(e.status=t,p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_switch_en:f.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData(this._id)}):this.loadData(this._id)})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData(this._id)}))}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}_updateValidation(e,t){1==t&&(e.allow_lod=!e.allow_lod),p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure0_en:f.a.are_u_sure0,text:e.code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value&&this._dataService.post("/lab/updateValidation",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})})})}_updateValidationLOD(e,t){1==t&&(e.allow_lod=!e.allow_lod),p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_allow_en:f.a.are_u_sure_allow,text:e.code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value&&this._dataService.post("/lab/updateValidationLOD",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})})})}popupComment(e,t){this.loadDetailSample(t.sample_id),this.modalService.open(e,{size:"md",centered:!0})}saveChangeComment(e,t){let n={};n.sample_id=this.entityComment.sample_id,n.take_note=this.entityComment.take_note,n.url_img=e,n.flag=t,this._dataService.post("/request/updateComment",n).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this.fileUpload=null,this.entityComment.url_img=null,this.fileUpload1.nativeElement.value=null,this.modalService.dismissAll()})}loadDetailSample(e){let t={};t.sample_id=e,this._dataService.post("/request/detailSampleOrder",t).subscribe(e=>{console.log(e),this.entityComment=e.data,this.entityComment.url_img=e.data.url_img,this._path=null==e.data.url_img?null:e.data.url_img.substr(e.data.url_img.lastIndexOf("/")+1,e.data.url_img.length)})}fileEvent(e){var t=e.target.files[0];if(void 0===t||void 0===t.name)this.fileUpload=null,this.entityComment.url_img=null,this._notifyService.showError("en"==this.user.lang?f.a.recheck_file_en:f.a.recheck_file,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);else{this.fileUpload=t.name;let n=this.fileUpload.split(".").pop();"jpg"===n||"jpeg"===n||"png"===n?(console.log("ok"),this.entityComment.url_img=t.name,this._processUpload(e.target)):(this._notifyService.showError("en"==this.user.lang?f.a.format_incorrect_en:f.a.format_incorrect,"en"==this.user.lang?f.a.error_title_en:f.a.error_title),this.fileUpload=null,this.entityComment.url_img=null,this.fileUpload1.nativeElement.value=null)}}_processUpload(e){if(null==e)this._notifyService.showError("en"==this.user.lang?f.a.recheck_file_en:f.a.recheck_file,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);else{let t={folder_name:"lab_attachment"};t.id=this.entityComment.sample_id,this._uploadService.uploadFile("/services/uploads/"+t.id+"/"+t.folder_name,e.files).subscribe(e=>{console.log(e),this.saveChangeComment(e.data,1)})}}removeAttachment(e){let t={};t.url=e.url_img,console.log(t),this._dataService.post("/services/deletefile1",t).subscribe(t=>{let n={};n.sample_id=e.sample_id,n.take_note=e.take_note,n.url_img=null,this._dataService.post("/request/updateComment",n).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this._path="",this.loadDetailSample(e.sample_id)})})}_updateStatusSample(e){console.log(e);let t={};t.sample_id=e.sample_id,t.parameter_id=e.parameter_id,t.category_id=e.category_id,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/labresult/updateReturnSample",t).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})})}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(y.a),b.bc(v.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(w.s),b.bc(i.a))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-labrep-detaillist"]],viewQuery:function(e,t){if(1&e&&(b.jd(J,1),b.jd(J,1)),2&e){let e;b.Qc(e=b.sc())&&(t.fileUpload=e.first),b.Qc(e=b.sc())&&(t.fileUpload1=e.first)}},decls:117,vars:117,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","disabled","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],["contentCommentUpload",""],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","18",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],[2,"text-align","center"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[3,"innerHTML"],[2,"cursor","pointer",3,"click"],["class","fa fa-check-circle text-success",4,"ngIf"],["class","fa fa-times-circle text-danger",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["href","javascript:;",3,"click"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"fa","fa-check-circle","text-success"],[1,"fa","fa-times-circle","text-danger"],[1,"form","theme-form",3,"ngSubmit"],["form1","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group"],["for","comment"],["rows","2","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["for","img",1,"mr-sm-2"],["name","fileUpload","type","file",3,"change"],["fileUpload",""],["type","hidden","name","fileUpload",3,"ngModel","ngModelChange"],[1,"mute"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit","class","btn btn-primary mr-sm-1",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary","mr-sm-1"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData(t._id)})("keyup.enter",function(){return t.loadData(t._id)}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.hc(12,"select",10),b.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData(t._id)}),b.hc(13,"option",11),b.dd(14),b.wc(15,"translate"),b.wc(16,"translate"),b.gc(),b.bd(17,X,2,2,"option",12),b.gc(),b.bd(18,Z,4,3,"button",13),b.bd(19,ee,1,0,"img",14),b.gc(),b.gc(),b.hc(20,"div",15),b.hc(21,"div",16),b.hc(22,"select",17),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(23,"option",18),b.dd(24,"#10"),b.gc(),b.hc(25,"option",19),b.dd(26,"#25"),b.gc(),b.hc(27,"option",20),b.dd(28,"#50"),b.gc(),b.hc(29,"option",21),b.dd(30,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(31,"div",22),b.hc(32,"div",23),b.hc(33,"div",24),b.hc(34,"div",25),b.hc(35,"pagination",26),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(36,"div",27),b.hc(37,"a",28),b.dd(38),b.wc(39,"translate"),b.wc(40,"translate"),b.wc(41,"translate"),b.wc(42,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(43,"div",23),b.hc(44,"div",29),b.hc(45,"table",30),b.hc(46,"thead",31),b.hc(47,"tr"),b.hc(48,"th",32),b.dd(49,"#"),b.gc(),b.hc(50,"th",33),b.dd(51),b.wc(52,"translate"),b.gc(),b.hc(53,"th",33),b.dd(54),b.wc(55,"translate"),b.gc(),b.hc(56,"th",33),b.dd(57),b.wc(58,"translate"),b.gc(),b.hc(59,"th",33),b.dd(60),b.wc(61,"translate"),b.gc(),b.hc(62,"th",33),b.dd(63),b.wc(64,"translate"),b.gc(),b.hc(65,"th",33),b.dd(66),b.wc(67,"translate"),b.gc(),b.hc(68,"th",33),b.dd(69),b.wc(70,"translate"),b.gc(),b.hc(71,"th",33),b.dd(72),b.wc(73,"translate"),b.gc(),b.hc(74,"th",33),b.dd(75),b.wc(76,"translate"),b.gc(),b.hc(77,"th",33),b.dd(78),b.wc(79,"translate"),b.gc(),b.hc(80,"th",33),b.dd(81),b.wc(82,"translate"),b.gc(),b.hc(83,"th",33),b.dd(84),b.wc(85,"translate"),b.gc(),b.hc(86,"th",33),b.dd(87),b.wc(88,"translate"),b.gc(),b.hc(89,"th",33),b.dd(90),b.wc(91,"translate"),b.gc(),b.hc(92,"th",33),b.dd(93),b.wc(94,"translate"),b.gc(),b.hc(95,"th",33),b.dd(96),b.wc(97,"translate"),b.gc(),b.hc(98,"th",33),b.dd(99),b.wc(100,"translate"),b.gc(),b.gc(),b.gc(),b.hc(101,"tbody"),b.bd(102,te,6,3,"ng-container",34),b.bd(103,me,2,1,"ng-container",34),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(104,"div",23),b.hc(105,"div",24),b.hc(106,"div",25),b.hc(107,"pagination",26),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(108,"div",27),b.hc(109,"a",28),b.dd(110),b.wc(111,"translate"),b.wc(112,"translate"),b.wc(113,"translate"),b.wc(114,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(115,be,34,18,"ng-template",null,35,b.cd)),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,59,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(115,ye))("disabled",null!=t._id),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(116,ye))("disabled",null!=t._id),b.Nb(1),b.Dc("ngModel",t.department_id)("disabled",null!=t._id),b.Nb(2),b.gd(" ",b.xc(15,61,"All")," ",b.xc(16,63,"Department")," "),b.Nb(3),b.Dc("ngForOf",t._deptlist),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-VALID","report")),b.Nb(1),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(39,65,"Total of records"),": ",t.totalRow," - ",b.xc(40,67,"Page")," ",t.pageIndex," ",b.xc(41,69,"of")," ",t.totalPage," ",b.xc(42,71,"page"),""),b.Nb(13),b.ed(b.xc(52,73,"Actions")),b.Nb(3),b.fd(" ",b.xc(55,75,"Inner code")," "),b.Nb(3),b.fd(" ",b.xc(58,77,"Code")," "),b.Nb(3),b.ed(b.xc(61,79,"Internal testing")),b.Nb(3),b.ed(b.xc(64,81,"Parameter name")),b.Nb(3),b.ed(b.xc(67,83,"Priority")),b.Nb(3),b.ed(b.xc(70,85,"Note")),b.Nb(3),b.ed(b.xc(73,87,"Note lab")),b.Nb(3),b.ed(b.xc(76,89,"Note asm")),b.Nb(3),b.ed(b.xc(79,91,"Unit")),b.Nb(3),b.ed(b.xc(82,93,"LOD")),b.Nb(3),b.ed(b.xc(85,95,"LOQ")),b.Nb(3),b.ed(b.xc(88,97,"Results")),b.Nb(3),b.ed(b.xc(91,99,"Status")),b.Nb(3),b.ed(b.xc(94,101,"Mark")),b.Nb(3),b.ed(b.xc(97,103,"Tick LOD?")),b.Nb(3),b.ed(b.xc(100,105,"Compare")),b.Nb(3),b.Dc("ngIf",0==t._preparationlist.length),b.Nb(1),b.Dc("ngIf",t._preparationlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(111,107,"Total of records"),": ",t.totalRow," - ",b.xc(112,109,"Page")," ",t.pageIndex," ",b.xc(113,111,"of")," ",t.totalPage," ",b.xc(114,113,"page"),""))},directives:[a.c,a.n,a.q,D.b,D.a,a.x,a.r,a.A,c.p,c.q,M.a,c.o,a.z,a.o,a.p],pipes:[T.c],styles:[""]}),e})();function xe(e,t){if(1&e){const e=b.ic();b.hc(0,"button",34),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t.exportList)}),b.cc(1,"i",35),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function Se(e,t){1&e&&b.cc(0,"img",36)}function Ne(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",37),b.hc(3,"h3",38),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function we(e,t){if(1&e&&(b.hc(0,"a",44),b.hc(1,"strong",38),b.dd(2),b.gc(),b.gc()),2&e){const e=b.vc().$implicit;b.Fc("routerLink","/request/lab-report-validation/",e.id,""),b.Nb(2),b.ed(e.total_validation)}}function De(e,t){1&e&&(b.fc(0),b.hc(1,"strong"),b.dd(2,"0"),b.gc(),b.ec())}function Me(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",40),b.dd(2),b.gc(),b.hc(3,"td"),b.dd(4),b.gc(),b.hc(5,"td"),b.dd(6),b.wc(7,"date"),b.gc(),b.hc(8,"td"),b.dd(9),b.wc(10,"date"),b.gc(),b.hc(11,"td"),b.dd(12),b.gc(),b.hc(13,"td"),b.hc(14,"strong"),b.dd(15),b.gc(),b.gc(),b.hc(16,"td"),b.hc(17,"a",41),b.rc("click",function(){b.Uc(e);const n=t.$implicit,c=b.vc(2),a=b.Rc(84);return n.total_results>0?c._openResults(a,n):null}),b.hc(18,"strong",42),b.dd(19),b.gc(),b.gc(),b.gc(),b.hc(20,"td"),b.bd(21,we,3,2,"a",43),b.bd(22,De,3,0,"ng-container",32),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,c=b.vc(2);b.Nb(2),b.fd(" ",n+1+c.pageSize*(c.pageIndex-1)," "),b.Nb(2),b.fd(" ",e.request_no," "),b.Nb(2),b.ed(b.yc(7,10,e.received_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.ed(b.yc(10,13,e.returned_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.ed(e.total_sample),b.Nb(3),b.ed(e.total_tests),b.Nb(3),b.Dc("ngClass",e.total_results<e.total_tests?"text-danger":""),b.Nb(1),b.ed(e.total_results),b.Nb(2),b.Dc("ngIf",e.total_validation>0),b.Nb(1),b.Dc("ngIf",0==e.total_validation)}}function Ce(e,t){if(1&e&&(b.fc(0),b.bd(1,Me,23,16,"tr",39),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._preparationlist)}}function Te(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"td"),b.hc(2,"input",57),b.rc("change",function(n){b.Uc(e);const c=t.$implicit;return b.vc(2).selectItem(n,c.sample_id+","+c.parameter_id+","+c.category_id)}),b.gc(),b.gc(),b.hc(3,"td"),b.hc(4,"span",42),b.dd(5),b.gc(),b.gc(),b.hc(6,"td"),b.dd(7),b.gc(),b.hc(8,"td"),b.dd(9),b.gc(),b.hc(10,"td"),b.dd(11),b.gc(),b.hc(12,"td"),b.cc(13,"span",58),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,c=b.vc(2);b.Nb(2),b.Fc("name","ckU",n+1,""),b.Dc("checked",c.exportList.includes(e.sample_id+","+e.parameter_id+","+e.category_id)),b.Nb(2),b.Dc("ngClass",e.flagEvicted?"text-danger":""),b.Nb(1),b.ed(e.inner_code),b.Nb(2),b.ed(e.code),b.Nb(2),b.fd(" ","en"==c.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ","en"==c.user.lang?e.para_name_e:e.para_name_l," "),b.Nb(2),b.Dc("innerHTML",e.result_record,b.Vc)}}function Ie(e,t){if(1&e){const e=b.ic();b.hc(0,"form",45),b.hc(1,"div",46),b.hc(2,"h4",47),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",48),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",49),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",50),b.hc(9,"div",51),b.hc(10,"div",52),b.hc(11,"div",27),b.hc(12,"button",53),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._switch(1,t.exportList)}),b.dd(13),b.wc(14,"translate"),b.gc(),b.hc(15,"button",54),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._switch(2,t.exportList)}),b.dd(16),b.wc(17,"translate"),b.gc(),b.cc(18,"hr"),b.hc(19,"table",28),b.hc(20,"thead",29),b.hc(21,"tr"),b.hc(22,"th",55),b.hc(23,"input",56),b.rc("change",function(t){return b.Uc(e),b.vc().selectAll(t)}),b.gc(),b.gc(),b.hc(24,"th",31),b.dd(25),b.wc(26,"translate"),b.gc(),b.hc(27,"th",31),b.dd(28),b.wc(29,"translate"),b.gc(),b.hc(30,"th",31),b.dd(31),b.wc(32,"translate"),b.gc(),b.hc(33,"th",31),b.dd(34),b.wc(35,"translate"),b.gc(),b.hc(36,"th",31),b.dd(37),b.wc(38,"translate"),b.gc(),b.gc(),b.gc(),b.hc(39,"tbody"),b.bd(40,Te,14,8,"tr",39),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.gd(" ",b.xc(4,14,"Report")," - ",e._titleRequest," "),b.Nb(9),b.Dc("disabled",0==e.resultlist.length),b.Nb(1),b.fd(" ",b.xc(14,16,"Action draft")," "),b.Nb(2),b.Dc("disabled",0==e.resultlist.length),b.Nb(1),b.fd(" ",b.xc(17,18,"Action direct")," "),b.Nb(7),b.Dc("disabled",0==e.resultlist.length)("checked",e.exportList.length==e.resultlist.length),b.Nb(2),b.fd(" ",b.xc(26,20,"Sample code")," "),b.Nb(3),b.fd(" ",b.xc(29,22,"Code")," "),b.Nb(3),b.fd(" ",b.xc(32,24,"Internal testing")," "),b.Nb(3),b.fd(" ",b.xc(35,26,"Parameter name")," "),b.Nb(3),b.fd(" ",b.xc(38,28,"Results")," "),b.Nb(3),b.Dc("ngForOf",e.resultlist)}}const ke=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let Pe=(()=>{class e{constructor(e,t,n,c,a,i,o){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=c,this._uploadService=a,this._excelService=i,this.modalService=o,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=0,this.entity={},this.resultlist=[],this._orderdetails=[],this._titleRequest="",this.exportList=[],this._idRequest="",!1!==e.checkAccess("REQ-REPORT")&&!1!==e.hasPermission("REQ-REPORT","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.page=this.pageIndex,e.limit=this.pageSize,console.log(e),this._dataService.post("/lab/getlistreportlabs",e).subscribe(e=>{console.log("Load data",e),this._preparationlist=e.data,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyCSP(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",e).subscribe(e=>{this._csplist=e.data})}_exportAll(){let e={filter:""};e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.page=1,e.limit=99999,this._dataService.post("/lab/getlistreportlabs",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({Ma_Yeu_Cau:n.request_no,Ngay_Nhan:r(n.received_date).format("DD/MM/YYYY HH:mm"),Ngay_Tra:r(n.returned_date).format("DD/MM/YYYY HH:mm"),Tong_Mau:parseInt(n.total_sample),Tong_Test:n.total_tests,Tong_Ket_Qua:n.total_results,Tong_Lab_Validation:n.total_validation,Moi_Lien_He:"",Doanh_Thu:""});this._excelService.exportAsExcelFile(t,"LabReport-"+r(new Date).format("YYYY-MM-DD"))})}orgValueChange1(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e){this.entity=e}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_complete_en:f.a.are_u_sure_complete,text:this.entity.request_no,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}):(this.isSave=!1,this.socket.emit("refresh",{}))})}_openResults(e,t){console.log(t),this._titleRequest=t.request_no,this._idRequest=t.id,this.loadOrderDetailDoneById(t.id),this.modalService.open(e,{size:"lg",centered:!0})}loadOrderDetailDoneById(e){let t={};t.id=e,this._dataService.post("/labresult/getlist-result-byrequestId",t).subscribe(t=>{console.log("ABC",t);let n={};n.id=e,this._dataService.post("/lab/labcompleted",n).subscribe(e=>{console.log("KQ0",e);let n=[];for(let c of e.data){let e=t.data.filter(e=>e.sample_id==c.sample_id&&e.parameter_id==c.parameter_id&&e.category_id==c.category_id);0==e.length?(c.flagEvicted=!1,n.push(c)):2==e[0].is_active&&0==e.filter(e=>2!=e.is_active&&4!=e.is_active).length&&(c.flagEvicted=!0,n.push(c))}console.log("KQ",n),this.resultlist=n})})}selectAll(e){e.target.checked?(this.exportList=[],this.resultlist.forEach(e=>this.exportList.push(e.sample_id+","+e.parameter_id+","+e.category_id))):this.exportList=[]}selectItem(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(e=>e!=t)}_switch(e,t){if(1==e)if(0==t.length){let e=[];for(let t of this.resultlist){let n="";n+=t.sample_id+","+t.parameter_id+","+t.category_id,e.push(n)}this._processByIds(e,"draft")}else this._processByIds(t,"draft");if(2==e)if(0==t.length){let e=[];for(let t of this.resultlist){let n="";n+=t.sample_id+","+t.parameter_id+","+t.category_id,e.push(n)}this._processByIds(e,"official")}else this._processByIds(t,"official")}_processByRequestId(e,t){let n={};n.id=e,n.state=t,n.userId=this.user.id,console.log(n),this._dataService.post("/labresult/processAll",n).subscribe(e=>{console.log(e),"ok"==e.result&&this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK")})}_processByIds(e,t){let n={};n.state=t,n.userId=this.user.id;let c=[];for(let a of e){let e={},t=a.split(",");e.sample_id=t[0],e.parameter_id=t[1],e.category_id=t[2],c.push(e)}n.getlist=c,console.log("Process",n),this._dataService.post("/labresult/processByIds",n).subscribe(e=>{console.log("actions",e),"ok"==e.result&&this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.exportList=[],this.loadOrderDetailDoneById(this._idRequest)})}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(y.a),b.bc(v.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-report"]],decls:85,vars:82,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["routerLink","/request/lab-results/list",1,"btn","btn-sm","btn-warning"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],["content",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","8",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",3,"click"],[3,"ngClass"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"disabled","click"],[1,"btn","btn-sm","btn-success","mr-sm-2",3,"disabled","click"],[2,"text-align","center","width","40px"],["type","checkbox","name","checkAll",1,"form-control",3,"disabled","checked","change"],["type","checkbox",1,"form-control",3,"name","checked","change"],[3,"innerHTML"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.bd(12,xe,4,3,"button",10),b.hc(13,"button",11),b.dd(14),b.wc(15,"translate"),b.wc(16,"translate"),b.gc(),b.bd(17,Se,1,0,"img",12),b.gc(),b.gc(),b.hc(18,"div",13),b.hc(19,"div",14),b.hc(20,"select",15),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(21,"option",16),b.dd(22,"#10"),b.gc(),b.hc(23,"option",17),b.dd(24,"#25"),b.gc(),b.hc(25,"option",18),b.dd(26,"#50"),b.gc(),b.hc(27,"option",19),b.dd(28,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(29,"div",20),b.hc(30,"div",21),b.hc(31,"div",22),b.hc(32,"div",23),b.hc(33,"pagination",24),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(34,"div",25),b.hc(35,"a",26),b.dd(36),b.wc(37,"translate"),b.wc(38,"translate"),b.wc(39,"translate"),b.wc(40,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(41,"div",21),b.hc(42,"div",27),b.hc(43,"table",28),b.hc(44,"thead",29),b.hc(45,"tr"),b.hc(46,"th",30),b.dd(47,"#"),b.gc(),b.hc(48,"th",31),b.dd(49),b.wc(50,"translate"),b.gc(),b.hc(51,"th",31),b.dd(52),b.wc(53,"translate"),b.gc(),b.hc(54,"th",31),b.dd(55),b.wc(56,"translate"),b.gc(),b.hc(57,"th",31),b.dd(58),b.wc(59,"translate"),b.gc(),b.hc(60,"th",31),b.dd(61),b.wc(62,"translate"),b.gc(),b.hc(63,"th",31),b.dd(64),b.wc(65,"translate"),b.gc(),b.hc(66,"th",31),b.dd(67),b.wc(68,"translate"),b.gc(),b.gc(),b.gc(),b.hc(69,"tbody"),b.bd(70,Ne,6,3,"ng-container",32),b.bd(71,Ce,2,1,"ng-container",32),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(72,"div",21),b.hc(73,"div",22),b.hc(74,"div",23),b.hc(75,"pagination",24),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(76,"div",25),b.hc(77,"a",26),b.dd(78),b.wc(79,"translate"),b.wc(80,"translate"),b.wc(81,"translate"),b.wc(82,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(83,Ie,41,30,"ng-template",null,33,b.cd)),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,44,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(80,ke)),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(81,ke)),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),b.Nb(2),b.gd(" ",b.xc(15,46,"Print")," ",b.xc(16,48,"Report")," "),b.Nb(3),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(37,50,"Total of records"),": ",t.totalRow," - ",b.xc(38,52,"Page")," ",t.pageIndex," ",b.xc(39,54,"of")," ",t.totalPage," ",b.xc(40,56,"page"),""),b.Nb(13),b.fd(" ",b.xc(50,58,"Request code")," "),b.Nb(3),b.fd(" ",b.xc(53,60,"Received date")," "),b.Nb(3),b.ed(b.xc(56,62,"Returned date")),b.Nb(3),b.fd(" ",b.xc(59,64,"Total of samples")," "),b.Nb(3),b.ed(b.xc(62,66,"Total of tests")),b.Nb(3),b.ed(b.xc(65,68,"Total of results")),b.Nb(3),b.fd(" ",b.xc(68,70,"Total of validation labs")," "),b.Nb(3),b.Dc("ngIf",0==t._preparationlist.length),b.Nb(1),b.Dc("ngIf",t._preparationlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(79,72,"Total of records"),": ",t.totalRow," - ",b.xc(80,74,"Page")," ",t.pageIndex," ",b.xc(81,76,"of")," ",t.totalPage," ",b.xc(82,78,"page"),""))},directives:[a.c,a.n,a.q,D.b,D.a,c.q,i.e,a.x,a.r,a.A,M.a,c.p,c.o,i.g,a.z,a.o,a.p],pipes:[T.c,c.f],styles:[""]}),e})();var Re=n("REEf");function Ee(e,t){if(1&e&&(b.hc(0,"option",44),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function Ae(e,t){if(1&e&&(b.hc(0,"option",44),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.pl_name_e:e.pl_name_l," ")}}function Oe(e,t){if(1&e){const e=b.ic();b.hc(0,"button",45),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t._preparationlist)}),b.cc(1,"i",46),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function Ue(e,t){1&e&&b.cc(0,"img",47)}function Ye(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",48),b.hc(3,"h3",49),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function Fe(e,t){1&e&&b.cc(0,"i",64)}function Le(e,t){1&e&&b.cc(0,"i",65)}function qe(e,t){if(1&e){const e=b.ic();b.hc(0,"button",61),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return t.flag=!t.flag}),b.wc(1,"translate"),b.bd(2,Fe,1,0,"i",62),b.bd(3,Le,1,0,"i",63),b.gc()}if(2&e){const e=b.vc().$implicit,t=b.vc(2);b.Dc("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!t._authenService.hasPermission("REQ-RES","update"))("title",b.xc(1,5,e.flag?"Cancel":"Edit")),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag)}}function ze(e,t){if(1&e){const e=b.ic();b.hc(0,"button",66),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._updateStatus(t,0)}),b.wc(1,"translate"),b.cc(2,"i",67),b.gc()}2&e&&b.Dc("title",b.xc(1,1,"Save"))}function Ge(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.note_asm,"")}}function He(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",68),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.note_asm=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","noteasm",t+1,""),b.Dc("ngModel",n.note_asm)}}function Ve(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.unit,"")}}function Be(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",68),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.unit=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","unit",t+1,""),b.Dc("ngModel",n.unit)}}function Qe(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.lod,"")}}function $e(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",68),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.lod=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","lod",t+1,""),b.Dc("ngModel",n.lod)}}function Ke(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.loq,"")}}function je(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",68),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.loq=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","loq",t+1,""),b.Dc("ngModel",n.loq)}}function We(e,t){if(1&e&&(b.fc(0),b.cc(1,"span",69),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.Dc("innerHTML",e.result_record,b.Vc)}}function Je(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",70),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.result_record=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","result_record",t+1,""),b.Dc("ngModel",n.result_record)}}function Xe(e,t){1&e&&(b.hc(0,"span",71),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"None")))}function Ze(e,t){1&e&&(b.hc(0,"span",72),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Preparation")))}function et(e,t){1&e&&(b.hc(0,"span",73),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Technical validation")))}function tt(e,t){1&e&&(b.hc(0,"span",74),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Validation")))}function nt(e,t){1&e&&(b.hc(0,"span",75),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Done")))}function ct(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",51),b.dd(2),b.gc(),b.hc(3,"td",52),b.bd(4,qe,4,7,"button",53),b.bd(5,ze,3,3,"button",54),b.gc(),b.hc(6,"td"),b.dd(7),b.gc(),b.hc(8,"td"),b.dd(9),b.gc(),b.hc(10,"td"),b.dd(11),b.gc(),b.hc(12,"td"),b.dd(13),b.gc(),b.hc(14,"td"),b.dd(15),b.gc(),b.hc(16,"td"),b.dd(17),b.gc(),b.hc(18,"td"),b.bd(19,Ge,2,1,"ng-container",43),b.bd(20,He,2,2,"ng-container",43),b.gc(),b.hc(21,"td"),b.bd(22,Ve,2,1,"ng-container",43),b.bd(23,Be,2,2,"ng-container",43),b.gc(),b.hc(24,"td"),b.bd(25,Qe,2,1,"ng-container",43),b.bd(26,$e,2,2,"ng-container",43),b.gc(),b.hc(27,"td"),b.bd(28,Ke,2,1,"ng-container",43),b.bd(29,je,2,2,"ng-container",43),b.gc(),b.hc(30,"td"),b.bd(31,We,2,1,"ng-container",43),b.bd(32,Je,2,2,"ng-container",43),b.gc(),b.hc(33,"td",55),b.rc("click",function(){b.Uc(e);const n=t.$implicit,c=b.vc(2);return 1==n.status&&null!=n.result_record&&""!=n.result_record?c._updateStatus(n,2):null}),b.bd(34,Xe,3,3,"span",56),b.bd(35,Ze,3,3,"span",57),b.bd(36,et,3,3,"span",58),b.bd(37,tt,3,3,"span",59),b.bd(38,nt,3,3,"span",60),b.gc(),b.hc(39,"td"),b.dd(40),b.wc(41,"date"),b.gc(),b.hc(42,"td"),b.dd(43),b.wc(44,"date"),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,c=b.vc(2);b.Nb(2),b.fd(" ",n+1+c.pageSize*(c.pageIndex-1)," "),b.Nb(2),b.Dc("ngIf",1==e.status),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.ed(e.inner_code),b.Nb(2),b.ed(e.code),b.Nb(2),b.fd(" ","en"==c.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ","en"==c.user.lang?e.para_name_e:e.para_name_l," "),b.Nb(2),b.ed(e.tat),b.Nb(2),b.ed(e.note_lab),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",0==e.status),b.Nb(1),b.Dc("ngIf",1==e.status),b.Nb(1),b.Dc("ngIf",2==e.status),b.Nb(1),b.Dc("ngIf",3==e.status),b.Nb(1),b.Dc("ngIf",4==e.status),b.Nb(2),b.ed(b.yc(41,26,e.received_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.ed(b.yc(44,29,e.returned_date,"dd/MM/yyyy HH:mm"))}}function at(e,t){if(1&e&&(b.fc(0),b.bd(1,ct,45,32,"tr",50),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._preparationlist)}}const it=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let ot=(()=>{class e{constructor(e,t,n,c,a,i,o,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=c,this._uploadService=a,this._excelService=i,this._numberFormat=o,this.modalService=r,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=1,this.entity={},!1!==e.checkAccess("REQ-RES")&&!1!==e.hasPermission("REQ-RES","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,this._dataService.post("/lab/getlistresultlabs",e).subscribe(e=>{console.log(e);let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,tat:n.tat,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l,pl_name_e:n.pl_name_e,pl_name_l:n.pl_name_l});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyPL(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",e).subscribe(e=>{this._pllist=e.data})}_exportAll(e){let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?f.a.s_done_en:f.a.s_done),3==n.status&&(e="en"==this.user.lang?f.a.s_validate_en:f.a.s_validate),2==n.status&&(e="en"==this.user.lang?f.a.s_techvalidate_en:f.a.s_techvalidate),1==n.status&&(e="en"==this.user.lang?f.a.s_prepare_en:f.a.s_prepare),0==n.status&&(e="en"==this.user.lang?f.a.s_none_en:f.a.s_none);let c=new Date(n.received_date).getTime()+864e5*n.tat,a="en"==this.user.lang?n.pl_name_e:n.pl_name_l;t.push({"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,"Note Lab":null==n.note_lab?"":n.note_lab,"Note ASM":null==n.note_asm?"":n.note_asm,Unit:null==n.unit?"":n.unit,LOD:null==n.lod?"":n.lod,LOQ:null==n.loq?"":n.loq,Result:null==n.result_record?"":n.result_record,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(c)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l,PL:null==a?"":a,"Sample name":n.sample_name})}this._excelService.exportAsExcelFile(t,"Result-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.length+" "+f.a.record,"OK")}orgValueChange1(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e,t){2==t?(e.status=t,p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_switch_en:f.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.socket.emit("refresh",{})}):this.socket.emit("refresh",{})})):(console.log("Update",e),this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.socket.emit("refresh",{})}))}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(y.a),b.bc(v.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(Re.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-result"]],decls:133,vars:132,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","16",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],[2,"text-align","center"],[3,"ngClass","disabled","title","click",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],["type","text",1,"form-control",2,"width","250px",3,"name","ngModel","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.hc(12,"select",10),b.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),b.hc(13,"option",11),b.dd(14),b.wc(15,"translate"),b.wc(16,"translate"),b.gc(),b.bd(17,Ee,2,2,"option",12),b.gc(),b.hc(18,"select",13),b.rc("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),b.hc(19,"option",11),b.dd(20),b.wc(21,"translate"),b.gc(),b.bd(22,Ae,2,2,"option",12),b.gc(),b.hc(23,"select",14),b.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),b.hc(24,"option",15),b.dd(25),b.wc(26,"translate"),b.gc(),b.hc(27,"option",16),b.dd(28),b.wc(29,"translate"),b.gc(),b.hc(30,"option",17),b.dd(31),b.wc(32,"translate"),b.gc(),b.hc(33,"option",18),b.dd(34),b.wc(35,"translate"),b.gc(),b.hc(36,"option",19),b.dd(37),b.wc(38,"translate"),b.gc(),b.hc(39,"option",20),b.dd(40),b.wc(41,"translate"),b.gc(),b.gc(),b.bd(42,Oe,4,3,"button",21),b.bd(43,Ue,1,0,"img",22),b.gc(),b.gc(),b.hc(44,"div",23),b.hc(45,"div",24),b.hc(46,"select",25),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(47,"option",26),b.dd(48,"#10"),b.gc(),b.hc(49,"option",27),b.dd(50,"#25"),b.gc(),b.hc(51,"option",28),b.dd(52,"#50"),b.gc(),b.hc(53,"option",29),b.dd(54,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(55,"div",30),b.hc(56,"div",31),b.hc(57,"div",32),b.hc(58,"div",33),b.hc(59,"pagination",34),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(60,"div",35),b.hc(61,"a",36),b.dd(62),b.wc(63,"translate"),b.wc(64,"translate"),b.wc(65,"translate"),b.wc(66,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(67,"div",31),b.hc(68,"div",37),b.hc(69,"table",38),b.hc(70,"thead",39),b.hc(71,"tr"),b.hc(72,"th",40),b.dd(73,"#"),b.gc(),b.hc(74,"th",41),b.dd(75),b.wc(76,"translate"),b.gc(),b.hc(77,"th",42),b.dd(78),b.wc(79,"translate"),b.gc(),b.hc(80,"th",42),b.dd(81),b.wc(82,"translate"),b.gc(),b.hc(83,"th",42),b.dd(84),b.wc(85,"translate"),b.gc(),b.hc(86,"th",42),b.dd(87),b.wc(88,"translate"),b.gc(),b.hc(89,"th",42),b.dd(90),b.wc(91,"translate"),b.gc(),b.hc(92,"th",42),b.dd(93),b.wc(94,"translate"),b.gc(),b.hc(95,"th",42),b.dd(96),b.wc(97,"translate"),b.gc(),b.hc(98,"th",42),b.dd(99),b.wc(100,"translate"),b.gc(),b.hc(101,"th",42),b.dd(102),b.wc(103,"translate"),b.gc(),b.hc(104,"th",42),b.dd(105),b.wc(106,"translate"),b.gc(),b.hc(107,"th",42),b.dd(108),b.wc(109,"translate"),b.gc(),b.hc(110,"th",42),b.dd(111),b.wc(112,"translate"),b.gc(),b.hc(113,"th",42),b.dd(114),b.wc(115,"translate"),b.gc(),b.hc(116,"th",42),b.dd(117),b.wc(118,"translate"),b.gc(),b.gc(),b.gc(),b.hc(119,"tbody"),b.bd(120,Ye,6,3,"ng-container",43),b.bd(121,at,2,1,"ng-container",43),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(122,"div",31),b.hc(123,"div",32),b.hc(124,"div",33),b.hc(125,"pagination",34),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(126,"div",35),b.hc(127,"a",36),b.dd(128),b.wc(129,"translate"),b.wc(130,"translate"),b.wc(131,"translate"),b.wc(132,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,64,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(130,it)),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(131,it)),b.Nb(1),b.Dc("ngModel",t.department_id),b.Nb(2),b.gd(" ",b.xc(15,66,"All")," ",b.xc(16,68,"Department")," "),b.Nb(3),b.Dc("ngForOf",t._deptlist),b.Nb(1),b.Dc("ngModel",t.testcsp_id),b.Nb(2),b.fd("",b.xc(21,70,"All")," PL"),b.Nb(2),b.Dc("ngForOf",t._pllist),b.Nb(1),b.Dc("ngModel",t._status),b.Nb(2),b.fd(" ",b.xc(26,72,"All")," "),b.Nb(3),b.fd(" ",b.xc(29,74,"None")," "),b.Nb(3),b.fd(" ",b.xc(32,76,"Preparation")," "),b.Nb(3),b.fd(" ",b.xc(35,78,"Technical validation")," "),b.Nb(3),b.fd(" ",b.xc(38,80,"Validation")," "),b.Nb(3),b.fd(" ",b.xc(41,82,"Done")," "),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-RES","report")),b.Nb(1),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(63,84,"Total of records"),": ",t.totalRow," - ",b.xc(64,86,"Page")," ",t.pageIndex," ",b.xc(65,88,"of")," ",t.totalPage," ",b.xc(66,90,"page"),""),b.Nb(13),b.ed(b.xc(76,92,"Actions")),b.Nb(3),b.fd(" ",b.xc(79,94,"Inner code")," "),b.Nb(3),b.fd(" ",b.xc(82,96,"Code")," "),b.Nb(3),b.ed(b.xc(85,98,"Internal testing")),b.Nb(3),b.ed(b.xc(88,100,"Parameter name")),b.Nb(3),b.ed(b.xc(91,102,"Priority")),b.Nb(3),b.ed(b.xc(94,104,"Note lab")),b.Nb(3),b.ed(b.xc(97,106,"Note asm")),b.Nb(3),b.ed(b.xc(100,108,"Unit")),b.Nb(3),b.ed(b.xc(103,110,"LOD")),b.Nb(3),b.ed(b.xc(106,112,"LOQ")),b.Nb(3),b.ed(b.xc(109,114,"Results")),b.Nb(3),b.ed(b.xc(112,116,"Status")),b.Nb(3),b.ed(b.xc(115,118,"Received date")),b.Nb(3),b.ed(b.xc(118,120,"Returned date")),b.Nb(3),b.Dc("ngIf",0==t._preparationlist.length),b.Nb(1),b.Dc("ngIf",t._preparationlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(129,122,"Total of records"),": ",t.totalRow," - ",b.xc(130,124,"Page")," ",t.pageIndex," ",b.xc(131,126,"of")," ",t.totalPage," ",b.xc(132,128,"page"),""))},directives:[a.c,a.n,a.q,D.b,D.a,a.x,a.r,a.A,c.p,c.q,M.a,c.o],pipes:[T.c,c.f],styles:[""]}),e})();function rt(e,t){if(1&e&&(b.hc(0,"option",42),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function lt(e,t){if(1&e){const e=b.ic();b.hc(0,"button",43),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t._preparationlist)}),b.cc(1,"i",44),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function st(e,t){1&e&&b.cc(0,"img",45)}function dt(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",46),b.hc(3,"h3",47),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function ht(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.note_asm,"")}}function gt(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",59),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.note_asm=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","note_asm",t+1,""),b.Dc("ngModel",n.note_asm)}}function ut(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.lod,"")}}function _t(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",59),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.lod=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","lod",t+1,""),b.Dc("ngModel",n.lod)}}function mt(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.loq,"")}}function pt(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",59),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.loq=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","loq",t+1,""),b.Dc("ngModel",n.loq)}}function ft(e,t){if(1&e&&(b.fc(0),b.cc(1,"span",60),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.Dc("innerHTML",e.result_record,b.Vc)}}function bt(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",59),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.result_record=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","result_record",t+1,""),b.Dc("ngModel",n.result_record)}}function yt(e,t){1&e&&(b.hc(0,"span",61),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"None")))}function vt(e,t){1&e&&(b.hc(0,"span",62),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Preparation")))}function xt(e,t){1&e&&(b.hc(0,"span",63),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Technical validation")))}function St(e,t){1&e&&(b.hc(0,"span",64),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Validation")))}function Nt(e,t){1&e&&(b.hc(0,"span",65),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Done")))}function wt(e,t){if(1&e){const e=b.ic();b.hc(0,"a",66),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._updateStatus(t,1)}),b.cc(1,"i",67),b.gc()}}function Dt(e,t){if(1&e){const e=b.ic();b.hc(0,"a",68),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._updateStatus(t,4)}),b.cc(1,"i",69),b.gc()}}function Mt(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",49),b.dd(2),b.gc(),b.hc(3,"td"),b.dd(4),b.gc(),b.hc(5,"td"),b.dd(6),b.gc(),b.hc(7,"td"),b.dd(8),b.gc(),b.hc(9,"td"),b.dd(10),b.gc(),b.hc(11,"td"),b.dd(12),b.gc(),b.hc(13,"td"),b.dd(14),b.gc(),b.hc(15,"td"),b.dd(16),b.gc(),b.hc(17,"td"),b.bd(18,ht,2,1,"ng-container",41),b.bd(19,gt,2,2,"ng-container",41),b.gc(),b.hc(20,"td"),b.dd(21),b.gc(),b.hc(22,"td"),b.bd(23,ut,2,1,"ng-container",41),b.bd(24,_t,2,2,"ng-container",41),b.gc(),b.hc(25,"td"),b.bd(26,mt,2,1,"ng-container",41),b.bd(27,pt,2,2,"ng-container",41),b.gc(),b.hc(28,"td"),b.bd(29,ft,2,1,"ng-container",41),b.bd(30,bt,2,2,"ng-container",41),b.gc(),b.hc(31,"td"),b.hc(32,"a",50),b.rc("click",function(){b.Uc(e);const n=t.$implicit,c=b.vc(2);return 2==n.status?c._updateStatus(n,3):null}),b.bd(33,yt,3,3,"span",51),b.bd(34,vt,3,3,"span",52),b.bd(35,xt,3,3,"span",53),b.bd(36,St,3,3,"span",54),b.bd(37,Nt,3,3,"span",55),b.gc(),b.bd(38,wt,2,0,"a",56),b.gc(),b.hc(39,"td",57),b.bd(40,Dt,2,0,"a",58),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,c=b.vc(2);b.Nb(2),b.fd(" ",n+1+c.pageSize*(c.pageIndex-1)," "),b.Nb(2),b.ed(e.inner_code),b.Nb(2),b.ed(e.code),b.Nb(2),b.fd(" ","en"==c.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ","en"==c.user.lang?e.para_name_e:e.para_name_l," "),b.Nb(2),b.ed(e.tat),b.Nb(2),b.ed(e.note),b.Nb(2),b.ed(e.note_lab),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.ed(e.unit),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(3),b.Dc("ngIf",0==e.status),b.Nb(1),b.Dc("ngIf",1==e.status),b.Nb(1),b.Dc("ngIf",2==e.status),b.Nb(1),b.Dc("ngIf",3==e.status),b.Nb(1),b.Dc("ngIf",4==e.status),b.Nb(1),b.Dc("ngIf",2==e.status),b.Nb(2),b.Dc("ngIf",3==e.status)}}function Ct(e,t){if(1&e&&(b.fc(0),b.bd(1,Mt,41,24,"tr",48),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._preparationlist)}}const Tt=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let It=(()=>{class e{constructor(e,t,n,c,a,i,o){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=c,this._uploadService=a,this._excelService=i,this.modalService=o,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=2,this.entity={},!1!==e.checkAccess("RES-VALID")&&!1!==e.hasPermission("RES-VALID","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,this._dataService.post("/lab/getlistresultlabs",e).subscribe(e=>{console.log(e);let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,tat:n.tat,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyPL(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",e).subscribe(e=>{this._pllist=e.data})}_exportAll(e){let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?f.a.s_done_en:f.a.s_done),3==n.status&&(e="en"==this.user.lang?f.a.s_validate_en:f.a.s_validate),2==n.status&&(e="en"==this.user.lang?f.a.s_techvalidate_en:f.a.s_techvalidate),1==n.status&&(e="en"==this.user.lang?f.a.s_prepare_en:f.a.s_prepare),0==n.status&&(e="en"==this.user.lang?f.a.s_none_en:f.a.s_none);let c=new Date(n.received_date).getTime()+864e5*n.tat;t.push({"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,Note:null==n.note?"":n.note,"Note Lab":null==n.note_lab?"":n.note_lab,"Note ASM":null==n.note_asm?"":n.note_asm,Unit:null==n.unit?"":n.unit,LOD:null==n.lod?"":n.lod,LOQ:null==n.loq?"":n.loq,Result:null==n.result_record?"":n.result_record,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(c)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l})}this._excelService.exportAsExcelFile(t,"LabValidation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.length+" "+f.a.record,"OK")}orgValueChange1(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e,t){3==t||4==t?(e.status=t,p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_switch_en:f.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.socket.emit("refresh",{})}):this.socket.emit("refresh",{})})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.socket.emit("refresh",{})}))}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(y.a),b.bc(v.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-validation"]],decls:125,vars:124,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","15",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["href","javascript:;","style","cursor: pointer; color: red",3,"click",4,"ngIf"],[2,"text-align","center"],["href","javascript:;","style","cursor: pointer; color: tomato",3,"click",4,"ngIf"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],["href","javascript:;",2,"cursor","pointer","color","red",3,"click"],[1,"fa","fa-close"],["href","javascript:;",2,"cursor","pointer","color","tomato",3,"click"],[1,"fa","fa-check-square-o"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.hc(12,"select",10),b.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),b.hc(13,"option",11),b.dd(14),b.wc(15,"translate"),b.wc(16,"translate"),b.gc(),b.bd(17,rt,2,2,"option",12),b.gc(),b.hc(18,"select",13),b.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),b.hc(19,"option",14),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"option",15),b.dd(23),b.wc(24,"translate"),b.gc(),b.hc(25,"option",16),b.dd(26),b.wc(27,"translate"),b.gc(),b.hc(28,"option",17),b.dd(29),b.wc(30,"translate"),b.gc(),b.hc(31,"option",18),b.dd(32),b.wc(33,"translate"),b.gc(),b.hc(34,"option",19),b.dd(35),b.wc(36,"translate"),b.gc(),b.gc(),b.bd(37,lt,4,3,"button",20),b.bd(38,st,1,0,"img",21),b.gc(),b.gc(),b.hc(39,"div",22),b.hc(40,"div",23),b.hc(41,"select",24),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(42,"option",25),b.dd(43,"#10"),b.gc(),b.hc(44,"option",26),b.dd(45,"#25"),b.gc(),b.hc(46,"option",27),b.dd(47,"#50"),b.gc(),b.hc(48,"option",28),b.dd(49,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(50,"div",29),b.hc(51,"div",30),b.hc(52,"div",31),b.hc(53,"div",32),b.hc(54,"pagination",33),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(55,"div",34),b.hc(56,"a",35),b.dd(57),b.wc(58,"translate"),b.wc(59,"translate"),b.wc(60,"translate"),b.wc(61,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(62,"div",30),b.hc(63,"div",36),b.hc(64,"table",37),b.hc(65,"thead",38),b.hc(66,"tr"),b.hc(67,"th",39),b.dd(68,"#"),b.gc(),b.hc(69,"th",40),b.dd(70),b.wc(71,"translate"),b.gc(),b.hc(72,"th",40),b.dd(73),b.wc(74,"translate"),b.gc(),b.hc(75,"th",40),b.dd(76),b.wc(77,"translate"),b.gc(),b.hc(78,"th",40),b.dd(79),b.wc(80,"translate"),b.gc(),b.hc(81,"th",40),b.dd(82),b.wc(83,"translate"),b.gc(),b.hc(84,"th",40),b.dd(85),b.wc(86,"translate"),b.gc(),b.hc(87,"th",40),b.dd(88),b.wc(89,"translate"),b.gc(),b.hc(90,"th",40),b.dd(91),b.wc(92,"translate"),b.gc(),b.hc(93,"th",40),b.dd(94),b.wc(95,"translate"),b.gc(),b.hc(96,"th",40),b.dd(97),b.wc(98,"translate"),b.gc(),b.hc(99,"th",40),b.dd(100),b.wc(101,"translate"),b.gc(),b.hc(102,"th",40),b.dd(103),b.wc(104,"translate"),b.gc(),b.hc(105,"th",40),b.dd(106),b.wc(107,"translate"),b.gc(),b.hc(108,"th",40),b.dd(109),b.wc(110,"translate"),b.gc(),b.gc(),b.gc(),b.hc(111,"tbody"),b.bd(112,dt,6,3,"ng-container",41),b.bd(113,Ct,2,1,"ng-container",41),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(114,"div",30),b.hc(115,"div",31),b.hc(116,"div",32),b.hc(117,"pagination",33),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(118,"div",34),b.hc(119,"a",35),b.dd(120),b.wc(121,"translate"),b.wc(122,"translate"),b.wc(123,"translate"),b.wc(124,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,60,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(122,Tt)),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(123,Tt)),b.Nb(1),b.Dc("ngModel",t.department_id),b.Nb(2),b.gd(" ",b.xc(15,62,"All")," ",b.xc(16,64,"Department")," "),b.Nb(3),b.Dc("ngForOf",t._deptlist),b.Nb(1),b.Dc("ngModel",t._status),b.Nb(2),b.fd(" ",b.xc(21,66,"All")," "),b.Nb(3),b.fd(" ",b.xc(24,68,"None")," "),b.Nb(3),b.fd(" ",b.xc(27,70,"Preparation")," "),b.Nb(3),b.fd(" ",b.xc(30,72,"Technical validation")," "),b.Nb(3),b.fd(" ",b.xc(33,74,"Validation")," "),b.Nb(3),b.fd(" ",b.xc(36,76,"Done")," "),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-VALID","report")),b.Nb(1),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(58,78,"Total of records"),": ",t.totalRow," - ",b.xc(59,80,"Page")," ",t.pageIndex," ",b.xc(60,82,"of")," ",t.totalPage," ",b.xc(61,84,"page"),""),b.Nb(13),b.fd(" ",b.xc(71,86,"Inner code")," "),b.Nb(3),b.fd(" ",b.xc(74,88,"Code")," "),b.Nb(3),b.ed(b.xc(77,90,"Internal testing")),b.Nb(3),b.ed(b.xc(80,92,"Parameter name")),b.Nb(3),b.ed(b.xc(83,94,"Priority")),b.Nb(3),b.ed(b.xc(86,96,"Note")),b.Nb(3),b.ed(b.xc(89,98,"Note lab")),b.Nb(3),b.ed(b.xc(92,100,"Note asm")),b.Nb(3),b.ed(b.xc(95,102,"Unit")),b.Nb(3),b.ed(b.xc(98,104,"LOD")),b.Nb(3),b.ed(b.xc(101,106,"LOQ")),b.Nb(3),b.ed(b.xc(104,108,"Results")),b.Nb(3),b.ed(b.xc(107,110,"Status")),b.Nb(3),b.ed(b.xc(110,112,"Actions")),b.Nb(3),b.Dc("ngIf",0==t._preparationlist.length),b.Nb(1),b.Dc("ngIf",t._preparationlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(121,114,"Total of records"),": ",t.totalRow," - ",b.xc(122,116,"Page")," ",t.pageIndex," ",b.xc(123,118,"of")," ",t.totalPage," ",b.xc(124,120,"page"),""))},directives:[a.c,a.n,a.q,D.b,D.a,a.x,a.r,a.A,c.p,c.q,M.a],pipes:[T.c],styles:[""]}),e})();var kt=n("qeeY"),Pt=n("tmjD");function Rt(e,t){if(1&e){const e=b.ic();b.hc(0,"div",20),b.hc(1,"button",21),b.dd(2),b.wc(3,"translate"),b.gc(),b.hc(4,"div",22),b.hc(5,"button",23),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(71);return t.popUpLanguage(n,1)}),b.dd(6),b.wc(7,"translate"),b.gc(),b.hc(8,"button",23),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(71);return t.popUpLanguage(n,1)}),b.dd(9),b.wc(10,"translate"),b.gc(),b.hc(11,"button",23),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(71);return t.popUpLanguage(n,2)}),b.dd(12),b.wc(13,"translate"),b.gc(),b.gc(),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,4,"Print")," "),b.Nb(4),b.fd(" ",b.xc(7,6,"Quotation")," "),b.Nb(3),b.fd(" ",b.xc(10,8,"Quotation")," - Excel "),b.Nb(3),b.fd(" ",b.xc(13,10,"Receipt")," "))}function Et(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"button",24),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc()._chooseTab(n,n.order_no)}),b.dd(2),b.wc(3,"translate"),b.gc(),b.ec()}if(2&e){const e=t.$implicit,n=b.vc();b.Nb(1),b.Dc("ngClass",n._currentTabActivated==e.order_no?"btn btn-sm btn-warning":"btn btn-sm btn-secondary"),b.Nb(1),b.gd(" ",b.xc(3,3,"Sample")," ",e.order_no," ")}}function At(e,t){if(1&e){const e=b.ic();b.hc(0,"a",26),b.rc("click",function(){b.Uc(e);const t=b.vc(2);return null==t.entity0.inner_code?t._removeTab(t.entity0.sample_id):null}),b.dd(1,"X"),b.gc()}}function Ot(e,t){if(1&e&&(b.fc(0),b.bd(1,At,2,0,"a",25),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngIf",0!=e._currentTabActivated&&null==e.entity0.inner_code)}}function Ut(e,t){if(1&e&&(b.hc(0,"div",58),b.dd(1),b.wc(2,"slice"),b.gc()),2&e){const e=t.item;b.Dc("ngbTooltip",e.name.length>25?e.name:""),b.Nb(1),b.fd(" ",e.name.length>25?b.zc(2,2,e.name,0,20)+"..":e.name," ")}}function Yt(e,t){if(1&e&&(b.hc(0,"div",58),b.dd(1),b.wc(2,"slice"),b.gc()),2&e){const e=t.item;b.Dc("ngbTooltip",e.name.length>25?e.name:""),b.Nb(1),b.fd(" ",e.name.length>25?b.zc(2,2,e.name,0,20)+"..":e.name," ")}}function Ft(e,t){if(1&e&&(b.hc(0,"div",58),b.dd(1),b.wc(2,"slice"),b.gc()),2&e){const e=t.item;b.Dc("ngbTooltip",e.name.length>25?e.name:""),b.Nb(1),b.fd(" ",e.name.length>25?b.zc(2,2,e.name,0,20)+"..":e.name," ")}}function Lt(e,t){if(1&e){const e=b.ic();b.hc(0,"a",59),b.rc("click",function(){b.Uc(e);const t=b.vc(2);return t._saveTemplate(t.entity0)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Save")))}function qt(e,t){if(1&e){const e=b.ic();b.hc(0,"a",65),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._removeItem(t)}),b.cc(1,"i",56),b.gc()}}function zt(e,t){1&e&&b.cc(0,"i",69)}function Gt(e,t){1&e&&b.cc(0,"i",70)}function Ht(e,t){if(1&e){const e=b.ic();b.hc(0,"button",66),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return t.flag=!t.flag}),b.wc(1,"translate"),b.bd(2,zt,1,0,"i",67),b.bd(3,Gt,1,0,"i",68),b.gc()}if(2&e){const e=b.vc().$implicit;b.Dc("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("ngbTooltip",b.xc(1,4,e.flag?"Cancel":"Edit")),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag)}}function Vt(e,t){if(1&e){const e=b.ic();b.hc(0,"a",71),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._updatePrice(t)}),b.cc(1,"i",72),b.gc()}}function Bt(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.fd(" ",null==e.quantity||""==e.quantity?1:e.quantity,"")}}function Qt(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.ed(e.quantity)}}function $t(e,t){if(1&e&&(b.fc(0),b.bd(1,Bt,2,1,"ng-container",16),b.bd(2,Qt,2,1,"ng-container",16),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngIf",0==e.entity0.is_active),b.Nb(1),b.Dc("ngIf",0!=e.entity0.is_active)}}function Kt(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",73),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.quantity=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit,c=b.vc(2);b.Nb(1),b.Fc("name","qty",t+1,""),b.Dc("ngModel",n.quantity)("disabled",0!=c.entity0.is_active)}}function jt(e,t){if(1&e&&(b.fc(0),b.dd(1),b.wc(2,"number"),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.fd(" ",b.xc(2,1,e.price),"")}}function Wt(e,t){if(1&e&&(b.fc(0),b.dd(1),b.wc(2,"number"),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.ed(b.xc(2,1,e.price))}}function Jt(e,t){if(1&e&&(b.fc(0),b.bd(1,jt,3,3,"ng-container",16),b.bd(2,Wt,3,3,"ng-container",16),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngIf",0==e.entity0.is_active),b.Nb(1),b.Dc("ngIf",0!=e.entity0.is_active)}}function Xt(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",74),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.price=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit,c=b.vc(2);b.Nb(1),b.Fc("name","p",t+1,""),b.Dc("ngModel",n.price)("disabled",0!=c.entity0.is_active)}}function Zt(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.fd(" ",null==e.priority||""==e.priority?0:e.priority,"")}}function en(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.ed(e.priority)}}function tn(e,t){if(1&e&&(b.fc(0),b.bd(1,Zt,2,1,"ng-container",16),b.bd(2,en,2,1,"ng-container",16),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngIf",0==e.entity0.is_active),b.Nb(1),b.Dc("ngIf",0!=e.entity0.is_active)}}function nn(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",75),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.priority=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit,c=b.vc(2);b.Nb(1),b.Fc("name","pri",t+1,""),b.Dc("ngModel",n.priority)("disabled",0!=c.entity0.is_active)}}function cn(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.fd(" ",e.tat," ")}}function an(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.fd(" ",e.tat," ")}}function on(e,t){if(1&e&&(b.fc(0),b.bd(1,cn,2,1,"ng-container",16),b.bd(2,an,2,1,"ng-container",16),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngIf",0==e.entity0.is_active),b.Nb(1),b.Dc("ngIf",0!=e.entity0.is_active)}}function rn(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",75),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.tat=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit,c=b.vc(2);b.Nb(1),b.Fc("name","ta",t+1,""),b.Dc("ngModel",n.tat)("disabled",0!=c.entity0.is_active)}}function ln(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"td"),b.dd(2),b.gc(),b.hc(3,"td"),b.bd(4,qt,2,0,"a",60),b.bd(5,Ht,4,6,"button",61),b.bd(6,Vt,2,0,"a",62),b.gc(),b.hc(7,"td"),b.hc(8,"span",63),b.dd(9),b.gc(),b.gc(),b.hc(10,"td"),b.dd(11),b.gc(),b.hc(12,"td",64),b.rc("click",function(){b.Uc(e);const n=t.$implicit,c=b.vc(2),a=b.Rc(73);return c._addComment(a,n)}),b.dd(13),b.gc(),b.hc(14,"td"),b.dd(15),b.gc(),b.hc(16,"td"),b.dd(17),b.gc(),b.hc(18,"td"),b.bd(19,$t,3,2,"ng-container",16),b.bd(20,Kt,2,3,"ng-container",16),b.gc(),b.hc(21,"td"),b.dd(22),b.gc(),b.hc(23,"td"),b.bd(24,Jt,3,2,"ng-container",16),b.bd(25,Xt,2,3,"ng-container",16),b.gc(),b.hc(26,"td"),b.bd(27,tn,3,2,"ng-container",16),b.bd(28,nn,2,3,"ng-container",16),b.gc(),b.hc(29,"td"),b.bd(30,on,3,2,"ng-container",16),b.bd(31,rn,2,3,"ng-container",16),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,c=b.vc(2);b.Nb(2),b.ed(n+1),b.Nb(2),b.Dc("ngIf",0==c.entity0.is_active&&!e.flag&&c._authenService.hasPermission("REQ-LIST","delete")),b.Nb(1),b.Dc("ngIf",0==c.entity0.is_active&&c._authenService.hasPermission("REQ-LIST","update")),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngClass",null==e.code_father?"text-bold jtext-default":""),b.Nb(1),b.ed(e.code),b.Nb(2),b.fd(" ","en"==c.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ",e.comment_ext," "),b.Nb(2),b.ed(e.method),b.Nb(2),b.ed(e.lod),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.fd(" ",e.unit," "),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag)}}function sn(e,t){if(1&e){const e=b.ic();b.hc(0,"form",27),b.hc(1,"div",9),b.hc(2,"div",1),b.hc(3,"div",28),b.hc(4,"div",29),b.hc(5,"label",30),b.hc(6,"strong"),b.dd(7),b.wc(8,"translate"),b.gc(),b.gc(),b.hc(9,"div",31),b.hc(10,"input",32),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_name=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(11,"translate"),b.gc(),b.hc(12,"input",32),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_name_e=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(13,"translate"),b.wc(14,"translate"),b.gc(),b.hc(15,"input",33),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_id=t}),b.gc(),b.gc(),b.hc(16,"label",30),b.hc(17,"strong"),b.dd(18),b.wc(19,"translate"),b.gc(),b.gc(),b.hc(20,"div",31),b.hc(21,"input",34),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_code=t}),b.wc(22,"translate"),b.gc(),b.gc(),b.hc(23,"label",30),b.hc(24,"strong"),b.dd(25),b.wc(26,"translate"),b.wc(27,"translate"),b.gc(),b.gc(),b.hc(28,"div",31),b.hc(29,"input",32),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.description=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(30,"translate"),b.gc(),b.hc(31,"input",32),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.description_e=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(32,"translate"),b.wc(33,"translate"),b.gc(),b.gc(),b.hc(34,"label",30),b.hc(35,"strong"),b.dd(36),b.wc(37,"translate"),b.gc(),b.gc(),b.hc(38,"div",31),b.hc(39,"input",34),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.inner_code=t}),b.wc(40,"translate"),b.gc(),b.gc(),b.hc(41,"label",30),b.hc(42,"strong"),b.dd(43),b.wc(44,"translate"),b.gc(),b.gc(),b.hc(45,"div",31),b.hc(46,"textarea",35),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.note=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(47,"translate"),b.gc(),b.gc(),b.hc(48,"label",30),b.hc(49,"strong"),b.dd(50),b.wc(51,"translate"),b.gc(),b.gc(),b.hc(52,"div",31),b.hc(53,"input",32),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.weight=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(54,"translate"),b.gc(),b.gc(),b.hc(55,"label",30),b.hc(56,"strong"),b.dd(57),b.wc(58,"translate"),b.gc(),b.gc(),b.hc(59,"div",31),b.hc(60,"select",36),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.is_active=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.hc(61,"option",37),b.dd(62),b.wc(63,"translate"),b.gc(),b.hc(64,"option",38),b.dd(65),b.wc(66,"translate"),b.gc(),b.hc(67,"option",39),b.dd(68),b.wc(69,"translate"),b.gc(),b.gc(),b.gc(),b.cc(70,"div",40),b.hc(71,"label",30),b.hc(72,"strong"),b.dd(73),b.wc(74,"translate"),b.gc(),b.gc(),b.hc(75,"div",31),b.hc(76,"ng-select",41),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().selectedCategory0=t})("change",function(){return b.Uc(e),b.vc().changeCategoryMatrix()}),b.wc(77,"translate"),b.wc(78,"translate"),b.bd(79,Ut,3,6,"ng-template",42),b.gc(),b.gc(),b.hc(80,"label",30),b.hc(81,"strong"),b.dd(82),b.wc(83,"translate"),b.gc(),b.gc(),b.hc(84,"div",31),b.hc(85,"ng-select",43),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().selectedSpecification0=t})("change",function(){b.Uc(e);const t=b.vc();return t.changeSpecification(t.entity0,t.selectedCategory0)}),b.bd(86,Yt,3,6,"ng-template",42),b.gc(),b.gc(),b.hc(87,"label",30),b.hc(88,"strong"),b.dd(89),b.wc(90,"translate"),b.gc(),b.gc(),b.hc(91,"div",31),b.hc(92,"input",44),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._tat=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateTAT(t.entity0,t._tat)}),b.wc(93,"translate"),b.gc(),b.gc(),b.hc(94,"label",45),b.hc(95,"strong"),b.dd(96),b.wc(97,"translate"),b.gc(),b.gc(),b.hc(98,"div",31),b.hc(99,"ng-select",46),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().selectedTemplate0=t})("change",function(){b.Uc(e);const t=b.vc();return t.changeTemplate(t.entity0)}),b.bd(100,Ft,3,6,"ng-template",42),b.gc(),b.dd(101," \xa0"),b.bd(102,Lt,3,3,"a",47),b.gc(),b.hc(103,"div",48),b.hc(104,"div",49),b.hc(105,"table",50),b.hc(106,"thead",51),b.hc(107,"tr"),b.hc(108,"th",52),b.dd(109),b.wc(110,"translate"),b.wc(111,"number"),b.gc(),b.gc(),b.gc(),b.hc(112,"thead",53),b.hc(113,"tr"),b.hc(114,"th",54),b.dd(115,"#"),b.gc(),b.hc(116,"th",55),b.cc(117,"i",56),b.gc(),b.hc(118,"th",57),b.dd(119),b.wc(120,"translate"),b.gc(),b.hc(121,"th",57),b.dd(122),b.wc(123,"translate"),b.gc(),b.hc(124,"th",57),b.dd(125),b.wc(126,"translate"),b.gc(),b.hc(127,"th",57),b.dd(128),b.wc(129,"translate"),b.gc(),b.hc(130,"th",57),b.dd(131,"LOD"),b.gc(),b.hc(132,"th",57),b.dd(133),b.wc(134,"translate"),b.gc(),b.hc(135,"th",57),b.dd(136),b.wc(137,"translate"),b.gc(),b.hc(138,"th",57),b.dd(139),b.wc(140,"translate"),b.gc(),b.hc(141,"th",57),b.dd(142),b.wc(143,"translate"),b.gc(),b.hc(144,"th",57),b.dd(145),b.wc(146,"translate"),b.gc(),b.gc(),b.gc(),b.hc(147,"tbody"),b.bd(148,ln,32,19,"tr",14),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(5),b.Fc("for","sn",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(8,114,"Sample name")),b.Nb(3),b.Fc("id","sn",e._currentTabActivated,""),b.Fc("name","sample_name",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(11,116,"Sample")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_name)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.Fc("id","sne",e._currentTabActivated,""),b.Fc("name","sample_namee",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(13,118,"Sample")+" "+b.xc(14,120,"English")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_name_e)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(3),b.Fc("id","id",e._currentTabActivated,""),b.Fc("name","id",e._currentTabActivated,""),b.Dc("ngModel",e.entity0.sample_id),b.Nb(1),b.Fc("for","sample_code",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(19,122,"Sample code")),b.Nb(3),b.Fc("id","sample_code",e._currentTabActivated,""),b.Fc("name","sample_code",e._currentTabActivated,""),b.Dc("placeholder",b.xc(22,124,"Sample code")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_code),b.Nb(2),b.Fc("for","description",e._currentTabActivated,""),b.Nb(2),b.gd("",b.xc(26,126,"Description")," (",b.xc(27,128,"State of sample"),")"),b.Nb(4),b.Fc("id","description",e._currentTabActivated,""),b.Fc("name","description",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(30,130,"Description")+" "+e._currentTabActivated)("ngModel",e.entity0.description)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.Fc("id","descriptione",e._currentTabActivated,""),b.Fc("name","descriptione",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(32,132,"Description")+" "+b.xc(33,134,"English")+" "+e._currentTabActivated)("ngModel",e.entity0.description_e)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(3),b.Fc("for","inner_code",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(37,136,"Inner code")),b.Nb(3),b.Fc("id","inner_code",e._currentTabActivated,""),b.Fc("name","inner_code",e._currentTabActivated,""),b.Dc("placeholder",b.xc(40,138,"Inner code")+" "+e._currentTabActivated)("ngModel",e.entity0.inner_code),b.Nb(2),b.Fc("for","note",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(44,140,"Note")),b.Nb(3),b.Fc("id","note",e._currentTabActivated,""),b.Fc("name","note",e._currentTabActivated,""),b.Dc("placeholder",b.xc(47,142,"Note")+" "+e._currentTabActivated)("ngModel",e.entity0.note)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.Fc("for","weight",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(51,144,"Weight")),b.Nb(3),b.Fc("id","weight",e._currentTabActivated,""),b.Fc("name","weight",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(54,146,"Weight")+" "+e._currentTabActivated)("ngModel",e.entity0.weight)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.Fc("for","state",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(58,148,"State")),b.Nb(3),b.Dc("ngModel",e.entity0.is_active)("disabled",0!=e.entity.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.fd(" ",b.xc(63,150,"Pending")," "),b.Nb(3),b.fd(" ",b.xc(66,152,"Confirmed")," "),b.Nb(3),b.fd(" ",b.xc(69,154,"Cancel")," "),b.Nb(3),b.Fc("for","matrix_category",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(74,156,"Matrix category")),b.Nb(3),b.Pb("ajustar"),b.Dc("items",e._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCategory0)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create"))("placeholder",b.xc(77,158,"Please choose"))("notFoundText",b.xc(78,160,"Not found item")),b.Nb(4),b.Fc("for","para_assignment",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(83,162,"Parameter assignment")),b.Nb(3),b.Dc("items",e._specifications)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSpecification0)("disabled",0!=e.entity0.is_active||null==e.selectedCategory0||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.Fc("for","tatc",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(90,164,"TAT")),b.Nb(3),b.Fc("id","tatc",e._currentTabActivated,""),b.Fc("name","tatc",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(93,166,"TAT")+" "+e._currentTabActivated)("ngModel",e._tat)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(4),b.ed(b.xc(97,168,"Copy sample")),b.Nb(3),b.Dc("items",e._templates)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedTemplate0)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(3),b.Dc("ngIf",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","update")),b.Nb(7),b.gd(" ",b.xc(110,170,"Subtotal"),": ",b.xc(111,172,e._totalSub)," (VND) "),b.Nb(10),b.fd(" ",b.xc(120,174,"Code")," "),b.Nb(3),b.fd(" ",b.xc(123,176,"Specification")," "),b.Nb(3),b.fd(" ",b.xc(126,178,"Note")," "),b.Nb(3),b.fd(" ",b.xc(129,180,"Method")," "),b.Nb(5),b.fd(" ",b.xc(134,182,"Quantity")," "),b.Nb(3),b.fd(" ",b.xc(137,184,"Unit")," "),b.Nb(3),b.fd(" ",b.xc(140,186,"Unit price")," "),b.Nb(3),b.fd(" ",b.xc(143,188,"Priority")," "),b.Nb(3),b.fd(" ",b.xc(146,190,"TAT")," "),b.Nb(3),b.Dc("ngForOf",e._orderdetailists)}}function dn(e,t){if(1&e){const e=b.ic();b.hc(0,"form",27),b.hc(1,"div",76),b.hc(2,"h4",77),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",78),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",79),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",80),b.hc(9,"div",29),b.hc(10,"div",48),b.hc(11,"div",81),b.hc(12,"button",82),b.rc("click",function(){return b.Uc(e),b.vc()._print("vn")}),b.dd(13),b.wc(14,"translate"),b.gc(),b.hc(15,"button",83),b.rc("click",function(){return b.Uc(e),b.vc()._print("en")}),b.dd(16),b.wc(17,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}2&e&&(b.Nb(3),b.fd(" ",b.xc(4,3,"Language")," "),b.Nb(10),b.fd(" ",b.xc(14,5,"Vietnamese")," "),b.Nb(3),b.fd(" ",b.xc(17,7,"English")," "))}function hn(e,t){1&e&&(b.fc(0),b.hc(1,"a",90),b.cc(2,"img",91),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing")," "))}function gn(e,t){if(1&e){const e=b.ic();b.hc(0,"a",92),b.rc("click",function(){return b.Uc(e),b.vc(2).saveComment()}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Save & close")," "))}function un(e,t){if(1&e){const e=b.ic();b.hc(0,"form",27),b.hc(1,"div",76),b.hc(2,"h4",77),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",78),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",79),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",80),b.hc(9,"div",29),b.hc(10,"div",48),b.hc(11,"div",84),b.hc(12,"label",85),b.dd(13),b.gc(),b.hc(14,"textarea",86),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entityComment.comment_ext=t}),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(15,"div",87),b.hc(16,"a",88),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.dd(17),b.wc(18,"translate"),b.gc(),b.bd(19,hn,5,3,"ng-container",16),b.bd(20,gn,3,3,"a",89),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.gd(" ",b.xc(4,7,"Note")," - ",e.entityComment.code," "),b.Nb(10),b.ed("Note"),b.Nb(1),b.Dc("ngModel",e.entityComment.comment_ext),b.Nb(3),b.fd(" ",b.xc(18,9,"Close")," "),b.Nb(2),b.Dc("ngIf",e.isSaveNote),b.Nb(1),b.Dc("ngIf",!e.isSaveNote)}}g.a.vfs=_.a.pdfMake.vfs;let _n=(()=>{class e{constructor(e,t,n,c,a,i,o,r,l,h){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=c,this._uploadService=a,this._excelService=i,this._activatedRoute=o,this._utilityService=r,this.formatPipe=l,this.modalService=h,this.isSave=!1,this._flagModal="",this._flagPrintPreview=!1,this.entity={},this.baseFolder=d.a.BASE_API+"/",this._id="",this.entityDetail={},this._xList=[],this._tabOrder=9,this._categories=[],this._specifications=[],this._templates=[],this._orderdetailists=[],this._totalSub=0,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._flagEdit=!1,this.isLoadingEmail=!1,this._currentTab=0,this.isLoadingEmail1=!1,this.isLoadingEmail2=!0,this.config={displayKey:"name",search:!0,limitTo:5},this.selectedSpecification0=null,this.selectedCategory0=null,this.selectedTemplate0=null,this._currentTabActivated=0,this._currentTabSampleId="",this._logoPath=d.a.BASE_API+"/",this._logoIsoPath=d.a.BASE_API+"/",this.entity0={},this.entityComment={},this.isSaveNote=!1,!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.user=this._authenService.getLoggedInUser(),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.loadImgs(),this._activatedRoute.params.subscribe(e=>{this._id=e.id,this.loadDetail(this._id),this.loadCategories(),this.loadSpecs(null),this.socket.on("refreshPage",e=>{this.loadCategories()})})}ngAfterViewInit(){}counter(e,t){return console.log(e,t),new Array(e-t)}loadDetail(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{this.entity=e.data;let t=[];for(let c of e.data.orders_list)t.push({sample_id:c.sample_id,sample_name:c.sample_name,sample_name_e:c.sample_name_e,sample_code:c.sample_code,inner_code:c.inner_code,description:c.description,description_e:c.description_e,note:c.note,weight:c.weight,is_active:c.is_active,userid:c.userid,total_sub:c.total_sub,order_no:c.order_no,flag_close:!1});this._xList=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0];let n={};n.id=this.entity.userid,n.short_code=this.user.short_code,this.updateEmployeeCode(n)})}removeOrderWithNull(e){let t={};t.sample_id=e,this._dataService.post("/request/removeOrderWithNull",t).subscribe(e=>{})}loadDetailWithNoloadOrderSampleTabs(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{this.entity.total=e.data.total})}updateEmployeeCode(e){this._dataService.post("/user/updateCodeEmployee",e).subscribe(e=>{})}loadDetail1(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{this.entity=e.data;let t=[];if(0==e.data.orders_list.length){var n=0;for(let c of this.counter(e.data.number_sample,0))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}else{n=0;for(let c of e.data.orders_list)t.push({sample_id:c.sample_id,sample_name:c.sample_name,sample_code:c.sample_code,inner_code:c.inner_code,description:c.description,note:c.note,weight:c.weight,is_active:c.is_active,userid:c.userid,order_no:n}),n+=1;for(let c of this.counter(e.data.number_sample,e.data.orders_list.length))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}this._xList=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0],this.loadTemplates(this.entity.customer_id)})}loadDetailByTab(e,t){this._currentTab=t;let n={};n.id=e,this._dataService.post("/request/detailA",n).subscribe(e=>{this.entity=e.data;let t=[];if(0==e.data.orders_list.length){var n=0;for(let c of this.counter(e.data.number_sample,0))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}else{n=0;for(let c of e.data.orders_list)t.push({sample_id:c.sample_id,sample_name:c.sample_name,sample_code:c.sample_code,inner_code:c.inner_code,description:c.description,note:c.note,weight:c.weight,is_active:c.is_active,userid:c.userid,order_no:n}),n+=1;for(let c of this.counter(e.data.number_sample,e.data.orders_list.length))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}this._xList=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0],this.loadTemplates(this.entity.customer_id)})}loadTemplates(e){let t={};t.customer_id=e,this._dataService.post("/sample_matrix/getallsampletemplates",t).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.sample_name,code:n.id});this._templates=t})}loadCategories(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:"en"==this.user.lang?n.category_name_e:n.category_name_l,code:n.id});this._categories=t})}loadSpecs(e){if(null!=e){let t={};t.domain=this.user.short_code,t.id=e,this._dataService.post("/sample_matrix/getallparametersnopagingbycat",t).subscribe(e=>{let t=[];for(let n of e.data.filter(e=>e.is_active))t.push({name:n.specification_name_l,code:n.parameter_id});this._specifications=t})}else{let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparametersnopaging",e).subscribe(e=>{let t=[];for(let n of e.data.filter(e=>e.is_active))t.push({name:n.specification_name_l,code:n.id});this._specifications=t})}}_updateRequest(){console.log(this.entity),this._dataService.post("/request/update",this.entity).subscribe(e=>{console.log(e.data),"failed"==e.result?this._notifyService.showError("en"==this.user.lang?f.a.MSG_UPDATENO_EN:f.a.MSG_UPDATENO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title):(this.loadDetail(e.data[0]._id),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"))})}_updateSampleOrder(e){e.request_id=this._id,e.userid=this.user.id,this._tabOrder=e.order_no,null!=e.sample_name&&""!=e.sample_name&&(console.log("Params",e),this._dataService.post("/request/updateSampleOrder",e).subscribe(t=>{1==e.is_active&&null==e.sample_code&&this._updateCodeInSampleOrder(e),this._updateSubTotal(e.sample_id),this._currentTabSampleId=e.sample_id,this._currentTabActivated=t.data.order_no,this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK")}))}_updateCodeInSampleOrder(e){let t={};t.sample_id=e.sample_id,t.sample_code=e.sample_code,t.inner_code=e.inner_code,t.is_active=e.is_active,t.userid=this.user.id,console.log("Code",t),this._dataService.post("/request/addCodesInSampleOrder",t).subscribe(t=>{this.loadDetail(this._id),this._updateSubTotal(e.sample_id)})}loadDetailSampleOrder(e){let t={};t.sample_id=e,this._dataService.post("/request/detailSampleOrder",t).subscribe(e=>{null!=e.data&&(this._totalSub=e.data.total_sub)})}_removeTab(e){console.log("Call here",e),this._currentTabActivated=0,this._dataService.post("/request/removeOrder",{id:e,request_id:this._id,number_sample:this.entity.number_sample}).subscribe(e=>{console.log("Call KQ",e),this.entity0={},this.loadDetail(this._id)})}_updateSampleNo(){if(0==this.entity.number_sample)return this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_SAMPLE_ZERO_EN:f.a.MSG_ERROR_SAMPLE_ZERO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title),void(this.entity.number_sample=1);this._dataService.post("/request/update2",{request_id:this._id,number_sample:this.entity.number_sample,short_code:this.user.short_code,ipaddress:this.user.ipaddress}).subscribe(e=>{console.log("Run here",e),this.loadDetail(this._id)})}_chooseTab(e,t){for(let n of this._xList)n.flag_close=n.order_no==t&&!n.flag_close;this.entity0=e,this._orderdetailists=[],this.selectedCategory=null,this.selectedSpecification=null,this.selectedTemplate=null,this._tat=null,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this.totalPage=0,this._updateSubTotalWithNoloadOrderSampleTabs(e.sample_id),this.loadDetailSampleOrder(e.sample_id),this.loadOrderDetailList(e.sample_id),this._currentTabActivated=t}changeCategoryMatrix(){this.loadSpecs(this.selectedCategory0)}changeTemplate(e){this._getTemplate(this.selectedTemplate0,e)}changeSpecification(e,t){console.log(this.selectedSpecification0,t),null!=this.selectedSpecification0&&null!=t&&this._addItems(this.selectedSpecification0,e,t)}_addItems(e,t,n){if(console.log(e,t),null!=t.sample_id)if(null!=e){let c={};c.sample_id=t.sample_id,c.parameter_id=e,c.category_id=n,c.priority=0,c.short_code=this.user.short_code,this._dataService.post("/request/addItemOrder",c).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.selectedSpecification0=null,this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id),this._updateSubTotal(t.sample_id),this.loadDetail(this._id)},()=>{this.selectedSpecification0=null,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}else this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id);else this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}loadOrderDetailList(e){if(null!=e){let t={page:1,limit:9999};t.sample_id=e,this._dataService.post("/request/getlistorderdetail",t).subscribe(e=>{let t=[];this._totalSub=0;for(let n of e.data)0==t.filter(e=>e.code==n.code&&e.category_id==n.category_id).length&&(t.push({code:n.code,code_father:n.code_father,lod:n.lod,mark:n.mark,method:n.method,parameter_id:n.parameter_id,category_id:n.category_id,price:null==n.price?0:n.price,priority:n.priority,sample_id:n.sample_id,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,tat:n.tat,unit:n.unit,quantity:n.quantity,flag:!1,comment_ext:n.comment_ext}),this._totalSub+=parseInt(null==n.price?0:n.price)*n.quantity);this._orderdetailists=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages,this.selectedSpecification=null})}}pageChanged(e,t){this.pageIndex=e.page,this.loadOrderDetailList(t)}_removeItem(e){let t={};t.sample_id=e.sample_id,t.parameter_id=e.parameter_id,t.category_id=e.category_id,this._dataService.post("/request/removeItemOrder",t).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_DELETE_EN:f.a.MSG_DELETE,"OK"),this._updateSubTotal(e.sample_id),this.loadDetailSampleOrder(e.sample_id),this.loadOrderDetailList(e.sample_id)})}_updateTAT(e,t){this._tat=null;let n={};n.sample_id=e.sample_id,n.tat=t,this._dataService.post("/request/updateTAT",n).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this._updateSubTotal(e.sample_id),this.loadOrderDetailList(e.sample_id)})}_updatePrice(e){let t={};t.sample_id=e.sample_id,t.parameter_id=e.parameter_id,t.category_id=e.category_id,t.price=e.price,t.mark=e.mark,t.priority=e.priority,t.tat=e.tat,t.quantity=e.quantity,console.log("KQ",t),this._dataService.post("/request/updatePriceOrder",t).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this._updateSubTotal(e.sample_id),this.loadOrderDetailList(e.sample_id),this.loadDetail(this._id)})}_updateSubTotal(e){let t={};t.sample_id=e,this._dataService.post("/request/updateSubTotal",t).subscribe(t=>{this._updateTotal(this._id),this.loadDetailSampleOrder(e)})}_updateSubTotalWithNoloadOrderSampleTabs(e){this.selectedCategory0=null;let t={};t.sample_id=e,this._dataService.post("/request/updateSubTotal",t).subscribe(t=>{this._updateTotalWithNoloadOrderSampleTabs(this._id),this.loadDetailSampleOrder(e)})}_updateTotalWithNoloadOrderSampleTabs(e){let t={};t.request_id=e,this._dataService.post("/request/updateTotal",t).subscribe(e=>{this.loadDetailWithNoloadOrderSampleTabs(this._id)})}_updateTotal(e){let t={};t.request_id=e,this._dataService.post("/request/updateTotal",t).subscribe(e=>{console.log(e),this.loadDetail(this._id)})}_addComment(e,t){this.entityComment=t,this.modalService.open(e,{size:"md",centered:!0})}saveComment(){this.isSaveNote=!0,this._dataService.post("/request/addCommentParameter",{sample_id:this.entityComment.sample_id,parameter_id:this.entityComment.parameter_id,category_id:this.entityComment.category_id,comment_ext:this.entityComment.comment_ext}).subscribe(e=>{this.isSaveNote=!1,this.loadOrderDetailList(this.entityComment.sample_id),this.modalService.dismissAll()})}_saveTemplate(e){if(null==e.sample_name||""==e.sample_name)return void this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);let t={};t.sample_name=e.sample_name,t.weight=e.weight,t.customer_id=this.entity.customer_id;let n=[];for(let c of this._orderdetailists)n.push({code:c.code,flag:c.flag,lod:c.lod,mark:c.mark,method:c.method,loq:c.loq,parameter_id:c.parameter_id,category_id:c.category_id,price:c.price,priority:c.priority,sample_id:null,specification_name_e:c.specification_name_e,specification_name_l:c.specification_name_l,tat:c.tat,unit:c.unit,quantity:c.quantity});t.json=JSON.stringify(n),this._dataService.post("/request/addSampleTemplate",t).subscribe(e=>{"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.loadTemplates(this.entity.customer_id)):this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}_getTemplate(e,t){if(console.log(e,t),null!=t.sample_name&&null!=e)p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_replace_en:f.a.are_u_sure_replace,text:t.sample_name,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(n=>{if(n.value){let n={};n.id=e,n.sample_id=t.sample_id,n.userid=this.user.id,console.log(n),this._dataService.post("/request/replaceOrderDetailBySampleId",n).subscribe(e=>{this.selectedTemplate=null,"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.selectedTemplate0=[],this._updateSubTotal(t.sample_id),this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id)):this._notifyService.showError("en"==this.user.lang?f.a.MSG_ADDNO_EN:f.a.MSG_ADDNO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}else this.selectedTemplate=null});else if(null!=e){let n={};n.id=e,n.sample_id=t.sample_id,n.request_id=this._id;let c=new Date;n.timestamp=new Date(r(c.setHours(c.getHours()+7)).format("YYYY-MM-DD HH:mm:ss")),n.is_active=0,n.userid=this.user.id,this._dataService.post("/request/replaceOrderDetailBySampleId",n).subscribe(e=>{this.selectedTemplate=null,"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.selectedTemplate0=null,this._updateSubTotal(e.data.sample_id),this.socket.emit("refresh",{}),this.loadDetailSampleOrder(e.data.sample_id),this.loadOrderDetailList(e.data.sample_id)):(this.selectedTemplate0=null,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title))})}}_currentTabClicked(e){console.log(e)}popUpLanguage(e,t){this.choosePrintType=t,this.modalService.open(e,{size:"md",centered:!0})}_print(e){1==this.choosePrintType&&this.printQuotationAsPDF(e),2==this.choosePrintType&&this.printBOAsPDF(e)}printQuotationAsPDF(e){return Object(o.__awaiter)(this,void 0,void 0,function*(){let t={};t.id=this._id,this._dataService.post("/request/detailIn",t).subscribe(t=>Object(o.__awaiter)(this,void 0,void 0,function*(){console.log("KQ In",t),this.entity=t.data;let n=t.data;var c=new Date(n.received_date),a=new Date(c.getTime()+24*n.valid_number*60*60*1e3),i=(r(a).format("DD/MM/YYYY"),r(c).format("DD/MM/YYYY")),o=[];o.push({text:"\n"});let l="en"==e?this.entity.company_name_e:this.entity.company_name_l,s="en"==e?this.entity.address_e:this.entity.address_l,d="en"==e?"Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 b\xe1o gi\xe1: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length);"0"==e&&(d="M\xe3 s\u1ed1 b\xe1o gi\xe1/ Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)),o.push({alignment:"justify",columns:[{text:[{text:l,bold:!0},"\n",{text:s},"\n",{text:this.entity.contact_name_sender,bold:!0},"\n",{text:null==this.entity.sender_phone?"":this.entity.sender_phone},"\n",{text:null==this.entity.email?"":this.entity.email}],style:"body_top"},{qr:d,foreground:"#20a8d8",fit:65,alignment:"right"}]});let h="en"==e?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,";"0"==e&&(h="K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng/ Dear customers,");let u="en"==e?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.";0==e&&(u="Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.");let _="en"==e?"Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any).":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3).";0==e&&(_="Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3)/ Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any).");let m="en"==e?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",p="en"==e?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",f="en"==e?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",b="en"==e?"QUOTATION":"B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M";"0"==e&&(b="B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M\nQUOTATION"),o.push({text:"\n"}),o.push({table:{widths:["*"],body:[[{text:h,alignment:"left",style:"body_footer"}],[{text:u,alignment:"left",style:"body_footer"}],[{text:_,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),o.push({text:"\n"});let y=this.formatPipe.localeString(n.total),v="0.00";var x=n.total*n.promo_perorder/100;let S=this.formatPipe.localeString((n.total-x)*n.tax_vat/100),N=this.formatPipe.localeString(parseFloat(n.total)-x+(n.total-x)*n.tax_vat/100);null!=n.promo_special&&""!=n.promo_special&&(v=this.formatPipe.localeString(n.promo_special),S=this.formatPipe.localeString((n.total-n.promo_special-(x=(n.total-n.promo_special)*n.promo_perorder/100))*n.tax_vat/100),N=this.formatPipe.localeString(parseFloat(n.total)-parseFloat(n.promo_special)-x+(n.total-n.promo_special-x)*n.tax_vat/100));let w=this.formatPipe.localeString(x),D=1,M=!1,C="en"==e?"No.":"STT";"0"==e&&(C="STT\nNo.");let T="en"==e?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m";"0"==e&&(T="Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m\nParameters");let I="en"==e?"Method":"Ph\u01b0\u01a1ng ph\xe1p";"0"==e&&(I="Ph\u01b0\u01a1ng ph\xe1p\nMethod");let k="en"==e?"Note":"Ghi ch\xfa";"0"==e&&(k="Ghi ch\xfa\nNote");let P="en"==e?"Unit price":"\u0110\u01a1n gi\xe1";"0"==e&&(P="\u0110\u01a1n gi\xe1\nUnit price");let R="en"==e?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng";"0"==e&&(R="S\u1ed1 l\u01b0\u1ee3ng\nQuantity");let E="en"==e?"Amount":"Th\xe0nh ti\u1ec1n";"0"==e&&(E="Th\xe0nh ti\u1ec1n\nAmount");for(let t of n.orders_list.filter(e=>2!=e.is_active))if(t.orderdetail_list.length>0){o.push({table:{widths:[30,"*",110,80,50,50,60],body:[[{border:[!0,!0,!0,!0],text:{text:C,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:T,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:I,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:k,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:P,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:R,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:E,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}});let c=null==t.weight?"":t.weight,a="en"==e?"Sample volume: "+c:"L\u01b0\u1ee3ng m\u1eabu: "+c;"0"==e&&(a="L\u01b0\u1ee3ng m\u1eabu/ Sample volume: "+c),o.push({table:{widths:[30,"*",110,80,50,50,60],body:[[{colSpan:6,text:D+". "+("0"==e?t.sample_name+"/ "+t.sample_name_e:"en"==e?t.sample_name_e:t.sample_name),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:{text:this.formatPipe.localeString(t.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:6,text:{text:a,italics:!0,bold:!1},border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}});var A=[],O=1,U=[];let i="en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",r="en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",l="en"==e?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)";"0"==e&&(i="T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)/ Total (not incluled VAT)",r="T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)/ Total (incluled VAT)",l="Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)/ Discount on total orders (%)");for(let n of t.orderdetail_list){let t=!1;"b709ca6e-2823-11eb-9a33-acde48001122"==n.department_id?(U.push(!0),t=!0):(U.push(!1),t=!1);let c="",a=null==n.standards?[]:JSON.parse(n.standards);for(let e of a.filter(e=>null!=e))null==e.id?null!=e&&(c+="("+e+")"):c+="("+e.id+")";let i="en"==e?n.specification_ex_name_e:n.specification_ex_name_l;"0"==e&&(i=n.specification_ex_name_l+"/ "+n.specification_ex_name_e),A.push({STT:O,Para:[{text:i+" ",italics:t},{text:c,fontSize:8,italics:t}],Method:n.method,Note:n.comment_ext,Price:this.formatPipe.localeString(n.price),Qty:n.quantity,Amount:this.formatPipe.localeString(n.price*n.quantity)}),O+=1}o.push(this.tablePrintQuotation(A,["STT","Para","Method","Note","Price","Qty","Amount"],[30,"*",110,80,50,50,60],U));let s=""!=n.title_promo_spec&&null!=n.title_promo_spec?n.title_promo_spec:"en"==e?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m";"0"==e&&(s=""!=n.title_promo_spec&&null!=n.title_promo_spec?n.title_promo_spec:"Gi\u1ea3m gi\xe1 cho nh\xf3m/ Discount on group"),D==n.orders_list.filter(e=>2!=e.is_active).length&&(M=!0,o.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*",110,80,50,50,60],body:[[{colSpan:6,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*",110,80,50,50,60],body:[[{colSpan:6,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:l,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*",110,80,50,50,60],body:[[{colSpan:6,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:s,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*",110,80,50,50,60],body:[[{colSpan:6,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:s,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:l,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}})),D+=1}if(o.push({text:"\n"}),this.entity.standard_list.length>0){let t="";for(let n of this.entity.standard_list){let c="("+n.id+") "+("en"==e?n.description_e:n.description_l);t.includes(c)||(t+=c+"\n")}o.push({text:t,fontSize:8,italics:!0})}o.push({text:"\n"});let Y="en"==e?"These prices are valid for one month if the quotation is accepted within one month.\nPayment period: on order.\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + Account number (VND): 15000168\n       + Bank name: Asia Commercial Bank\n       +Bank branch: Dong Sai Gon":"Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\n       + S\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",F="en"==e?"Estimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.":"Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng",L="en"==e?"For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form":"N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.";if(0==e&&(Y="Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1./ These prices are valid for one month if the quotation is accepted within one month.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng./ Payment period: on order.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + S\u1ed1 t\xe0i kho\u1ea3n/ Account number (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u/ Bank name: Asia Commercial Bank\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n/ Bank branch: Dong Sai Gon",F="Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nEstimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.",L="N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.\n For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form."),o.push({text:Y,fontSize:10}),o.push({text:"\n"}),o.push({text:F,fontSize:8,italics:!0}),o.push({text:"\n"}),o.push({columns:[{width:"*",text:L,fontSize:10},{width:"*",qr:"http://phieuyeucauthunghiemtv.com",foreground:"#20a8d8",fit:45,alignment:"center"}]}),o.push({text:"\n"}),o.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:i+"\n"+("en"==e?"Valid by":"Ng\u01b0\u1eddi l\u1eadp b\xe1o gi\xe1"),alignment:"center",fontSize:10}]}),o.push({text:"\n"}),null!=this.entity.signature_user){let e=this.baseFolder+this.entity.signature_user;o.push({columns:[{width:"*",text:"",fontSize:10},{width:"150",image:yield this._convertBase64ImageFromURL(e),alignment:"center"}]})}const q={pageSize:"A4",pageMargins:[25,80,25,70],defaultStyle:{fontSize:12,columnGap:20},content:[{text:b,style:"title_top"},{text:"\n"},{text:d,alignment:"right",fontSize:13,bold:!0},o],footer:function(e,t){return r(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:p+"\n"+m,alignment:"left",style:"body_footer"},{height:150,text:f,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},header:(e,t,n)=>({table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}),styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},images:{myLogo:yield this._convertBase64ImageFromURL(this._logoPath),myIso:yield this._convertBase64ImageFromURL(this._logoIsoPath)}};var z="'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf";z=z.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g.a.createPdf(q).open()}))})}printBOAsPDF(e){return Object(o.__awaiter)(this,void 0,void 0,function*(){let t={};t.id=this._id,this._dataService.post("/request/detailIn",t).subscribe(t=>Object(o.__awaiter)(this,void 0,void 0,function*(){console.log("KQ In",t.data),this.entity=t.data;let n=t.data;var c=new Date(n.received_date),a=new Date(c.getTime()+24*n.valid_number*60*60*1e3),i=(r(a).format("DD/MM/YYYY"),r(c).format("DD/MM/YYYY")),o=[];o.push({text:"\n"});let l=null==this.entity.company_receiver?this.entity.company_name_l:"en"==e?null==this.entity.company_receiver.company_name_e?this.entity.company_receiver.company_name_l:this.entity.company_receiver.company_name_e:this.entity.company_receiver.company_name_l,s=null==this.entity.company_receiver?null==this.entity.address_l?"":this.entity.address_l:"en"==e?null==this.entity.company_receiver.address_e?this.entity.company_receiver.address_l:this.entity.company_receiver.address_e:this.entity.company_receiver.address_l,d="en"==e?"Order code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 \u0111\u01a1n h\xe0ng: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length);o.push({alignment:"justify",columns:[{text:[{text:l,bold:!0},"\n",{text:s},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.contact_name?"":this.entity.contact_receiver.contact_name,bold:!0},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.phone||"-"==this.entity.contact_receiver.phone?"":this.entity.contact_receiver.phone},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.email?"":this.entity.contact_receiver.email}],style:"body_top"},{qr:d,foreground:"#20a8d8",fit:65,alignment:"right"}]});let h="en"==e?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,",u="en"==e?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.",_="en"==e?"Sac Ky Tien Phong Science & Technology JSC would like to confirm we received the sample provided by customers (please see attachment).":"C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong xin x\xe1c nh\u1eadn \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c m\u1eabu do qu\xfd kh\xe1ch h\xe0ng cung c\u1ea5p (vui l\xf2ng xem danh s\xe1ch \u0111\xednh k\xe8m).",m="en"==e?"Please check and confirm the information: sample name, sample description, parameters, etc\u2026 and notify us immediately in case corrections are needed. The information in this receipt will be used for outputting the testing report.":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra v\xe0 x\xe1c nh\u1eadn l\u1ea1i c\xe1c th\xf4ng tin: t\xean m\u1eabu, m\xf4 t\u1ea3 m\u1eabu, ch\u1ec9 ti\xeau ph\xe2n t\xedch, \u2026 v\xe0 th\xf4ng b\xe1o ngay cho ch\xfang t\xf4i trong tr\u01b0\u1eddng h\u1ee3p c\u1ea7n ch\u1ec9nh s\u1eeda. Nh\u1eefng th\xf4ng tin trong bi\xean nh\u1eadn n\xe0y s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho vi\u1ec7c xu\u1ea5t k\u1ebft qu\u1ea3.",p="en"==e?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",f="en"==e?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",b="en"==e?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",y="en"==e?"RECEIPT":"BI\xcaN NH\u1eacN";o.push({text:"\n"}),o.push({table:{widths:["*"],body:[[{text:h,alignment:"left",style:"body_footer"}],[{text:u,alignment:"left",style:"body_footer"}],[{text:_,alignment:"left",style:"body_footer"}],[{text:m,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),o.push({text:"\n"});let v=this.formatPipe.localeString(n.total),x="0.00";var S=n.total*n.promo_perorder/100;let N=this.formatPipe.localeString((n.total-S)*n.tax_vat/100),w=this.formatPipe.localeString(parseFloat(n.total)-S+(n.total-S)*n.tax_vat/100);null!=n.promo_special&&""!=n.promo_special&&(x=this.formatPipe.localeString(n.promo_special),N=this.formatPipe.localeString((n.total-n.promo_special-(S=(n.total-n.promo_special)*n.promo_perorder/100))*n.tax_vat/100),w=this.formatPipe.localeString(parseFloat(n.total)-parseFloat(n.promo_special)-S+(n.total-n.promo_special-S)*n.tax_vat/100));let D=this.formatPipe.localeString(S),M=1,C="en"==e?"No.":"STT",T="en"==e?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m",I="en"==e?"Method":"Ph\u01b0\u01a1ng ph\xe1p ",k="en"==e?"Unit price":"\u0110\u01a1n gi\xe1",P="en"==e?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng",R="en"==e?"Amount":"Th\xe0nh ti\u1ec1n",E="en"==e?"Sample code: ":"M\xe3 m\u1eabu: ",A="en"==e?"Sample description: ":"T\xecnh tr\u1ea1ng m\u1eabu: ",O="en"==e?"Amount of samples: ":"Kh\u1ed1i l\u01b0\u1ee3ng m\u1eabu: ",U="en"==e?"Date of receiving samples: "+r(new Date(n.received_date)).format("DD/MM/YYYY"):"Ng\xe0y nh\u1eadn m\u1eabu: "+r(new Date(n.received_date)).format("DD/MM/YYYY");for(let t of n.orders_list.filter(e=>2!=e.is_active)){let c="en"==e?"Client estimated due date: "+r(new Date(t.estimated_date)).format("DD/MM/YYYY"):"Ng\xe0y d\u1ef1 ki\u1ebfn tr\u1ea3 k\u1ebft qu\u1ea3: "+r(new Date(t.estimated_date)).format("DD/MM/YYYY");o.push({table:{headerRows:1,widths:[30,"*","*",50,50,110],body:[[{border:[!0,!0,!0,!0],text:{text:C,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:T,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:I,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:k,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:P,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:R,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}});let a=null==t.weight?"":t.weight;o.push({table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:M+". "+t.sample_name,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{text:{text:this.formatPipe.localeString(t.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:5,text:E+(null==t.inner_code?"":t.inner_code),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:A+(null==t.description?"":t.description),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:O+": "+a,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:U,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:c,border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}});var Y=[],F=1,L=[];for(let n of t.orderdetail_list){let t=!1;"b709ca6e-2823-11eb-9a33-acde48001122"==n.department_id?(L.push(!0),t=!0):(L.push(!1),t=!1);let c="",a=null==n.standards?[]:JSON.parse(n.standards);for(let e of a.filter(e=>null!=e))null==e.id?null!=e&&(c+="("+e+")"):c+="("+e.id+")";Y.push({STT:F,Para:[{text:("en"==e?n.specification_ex_name_e:n.specification_ex_name_l)+" ",italics:t},{text:c,fontSize:8,italics:t}],Method:n.method,Price:this.formatPipe.localeString(n.price),Qty:n.quantity,Amount:this.formatPipe.localeString(n.price*n.quantity)}),F+=1}o.push(this.tablePrintQuotation(Y,["STT","Para","Method","Price","Qty","Amount"],[30,"*","*",50,50,110],L));let i=""!=n.title_promo_spec&&null!=n.title_promo_spec?n.title_promo_spec:"en"==e?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m";M==n.orders_list.filter(e=>2!=e.is_active).length&&o.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}),M+=1}if(this.entity.standard_list.length>0){let t="";for(let n of this.entity.standard_list){let c="("+n.id+") "+("en"==e?n.description_e:n.description_l);t.includes(c)||(t+=c+"\n")}o.push({text:t,fontSize:8,italics:!0})}o.push({text:"\n"});let q="en"==e?"BILLING INFORMATION :":"Th\xf4ng tin xu\u1ea5t ho\xe1 \u0111\u01a1n :",z="en"==e?"Bank transfer information :":"Th\xf4ng tin chuy\u1ec3n kho\u1ea3n :",G="en"==e?"Account name: CONG TY CP KHCN SAC KY TIEN PHONG\nAccount number (VND): 15000168\nBank name: Asia Commercial Bank Bank branch: Dong Sai Gon":"T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\nS\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\nNg\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\nChi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",H="en"==e?"Company\u2019s name: ":"T\xean c\xf4ng ty: ",V="en"==e?"Address: ":"\u0110\u1ecba ch\u1ec9: ",B="en"==e?"Tax number: ":"M\xe3 s\u1ed1 thu\u1ebf: ",Q=null==this.entity.company_bill?l:this.entity.company_bill.company_name_l,$=null==this.entity.company_bill?p:null==this.entity.company_bill.address_l?"":this.entity.company_bill.address_l,K=null==this.entity.company_bill?this.entity.tax_code:null==this.entity.company_bill.tax_code?"":this.entity.company_bill.tax_code,j=n.orders_list.filter(e=>null!=e.note&&""!=e.note),W=0,J="";for(let e of j)W<=e.note.length&&(J=e.note,W=e.note.length);let X="";if(""!=J&&(X="en"==e?"OTHERS INFORMATION :":"Th\xf4ng tin kh\xe1c :"),o.push(""!=J?{table:{widths:["*","*"],body:[[{border:[!0,!0,!0,!1],text:{text:q,bold:!0},style:"body_footer",alignment:"left"},{border:[!0,!0,!0,!1],text:{text:z,bold:!0},style:"body_footer",alignment:"left"}],[{border:[!0,!1,!0,!0],text:{text:H+Q+"\n"+V+$+"\n"+B+K,bold:!1},style:"body_footer",alignment:"left"},{border:[!0,!1,!0,!0],text:{text:G,bold:!1},style:"body_footer",alignment:"left"}],[{colSpan:2,border:[!0,!0,!0,!1],text:{text:X,bold:!0},style:"body_footer",alignment:"left"},{}],[{colSpan:2,border:[!0,!1,!0,!0],text:{text:J,bold:!1},style:"body_footer",alignment:"left"},{}]]},layout:{defaultBorder:!1}}:{table:{widths:["*","*"],body:[[{border:[!0,!0,!0,!1],text:{text:q,bold:!0},style:"body_footer",alignment:"left"},{border:[!0,!0,!0,!1],text:{text:z,bold:!0},style:"body_footer",alignment:"left"}],[{border:[!0,!1,!0,!0],text:{text:H+Q+"\n"+V+$+"\n"+B+K,bold:!1},style:"body_footer",alignment:"left"},{border:[!0,!1,!0,!0],text:{text:G,bold:!1},style:"body_footer",alignment:"left"}]]},layout:{defaultBorder:!1}}),o.push({text:"\n"}),o.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:i+"\n"+("en"==e?"Valid by":"Ng\u01b0\u1eddi l\u1eadp bi\xean nh\u1eadn"),alignment:"center",fontSize:10}]}),o.push({text:"\n"}),null!=this.entity.signature_user){let e=this.baseFolder+this.entity.signature_user;o.push({columns:[{width:"*",text:"",fontSize:10},{width:"150",image:yield this._convertBase64ImageFromURL(e),alignment:"center"}]})}const Z={pageSize:"A4",pageMargins:[25,80,25,70],defaultStyle:{fontSize:12,columnGap:20},content:[{text:y,style:"title_top"},{text:"\n"},{text:d,alignment:"right",fontSize:13,bold:!0},o],footer:function(e,t){return r(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:f+"\n"+p,alignment:"left",style:"body_footer"},{height:150,text:b,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},header:(e,t,n)=>({table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}),styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},images:{myLogo:yield this._convertBase64ImageFromURL(this._logoPath),myIso:yield this._convertBase64ImageFromURL(this._logoIsoPath)}};var ee="'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf";ee=ee.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g.a.createPdf(Z).open()}))})}tablePrintQuotation(e,t,n,c){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,c)}}}buildTableBodyPrintQuotation(e,t,n){var c=[];let a=0;return e.forEach(function(e){var i=[],o=1;t.forEach(function(t){i.push({text:{text:e[t]},alignment:2==o||3==o||4==o?"left":5==o||7==o?"right":"center",fontSize:10,italics:2==o&&n[a]}),o+=1,a+=1}),c.push(i)}),c}_convertBase64ImageFromURL(e){return new Promise((t,n)=>{var c=new Image;c.setAttribute("crossOrigin","anonymous"),c.onload=()=>{var e=document.createElement("canvas");e.width=c.width,e.height=c.height,e.getContext("2d").drawImage(c,0,0);var n=e.toDataURL("image/png");t(n)},c.onerror=e=>{n(e)},c.src=e})}loadImgs(){let e={};e.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",e).subscribe(e=>Object(o.__awaiter)(this,void 0,void 0,function*(){this._logoPath+=e.data.filter(e=>"logo-stp"==e.file_name_e)[0].path_file,this._logoIsoPath+=e.data.filter(e=>"logo-iso"==e.file_name_e)[0].path_file}))}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}createImageFromBlob(e){let t=new FileReader;t.addEventListener("load",()=>{this.imageToShow=t.result},!1),e&&t.readAsDataURL(e)}}return e.\u0275fac=function(t){return new(t||e)(b.bc(y.a),b.bc(v.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(i.a),b.bc(kt.a),b.bc(Re.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-detail"]],decls:74,vars:44,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","button","routerLink","/request/list",1,"btn","btn-sm","btn-primary","mr-sm-2"],["ngbDropdown","","class","btn-group","role","group",4,"ngIf"],[1,"card-body"],[1,"col-xl-3","xl-100"],["type","number","min","0","name","number_sample",1,"form-control","form-control-sm",3,"ngModel","disabled","ngModelChange","change"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"btn-group","flex-wrap"],[4,"ngFor","ngForOf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[4,"ngIf"],["class","form theme-form",4,"ngIf"],["contentLanguage",""],["contentComment",""],["ngbDropdown","","role","group",1,"btn-group"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[1,"dropdown-item",3,"click"],["type","button",3,"ngClass","click"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],[1,"form","theme-form"],[1,"col"],[1,"form-group","row"],[1,"col-md-3","col-form-label",3,"for"],[1,"col-md-3"],["type","text",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change","keypress.enter"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["type","text","disabled","",1,"form-control","jdisabled",3,"id","placeholder","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","disabled","ngModelChange","change"],["name","_status",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["value","0"],["value","1"],["value","2"],[1,"col-md-6"],["name","selectedCategory0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","placeholder","notFoundText","ngModelChange","change"],["ng-option-tmp",""],["name","selectedSpecification0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["type","number",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change"],[1,"col-md-3","col-form-label"],["name","selectedTemplate0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["href","javascript:;",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-secondary"],["colspan","12",1,"text-right"],[1,"table-primary"],[2,"width","50px"],[2,"width","100px"],[1,"fa","fa-trash"],["scope","col"],["container","body",3,"ngbTooltip"],["href","javascript:;",3,"click"],["href","javascript:;","class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],[3,"ngClass","ngbTooltip","click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[3,"ngClass"],[2,"cursor","pointer",3,"click"],["href","javascript:;",1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[3,"ngClass","ngbTooltip","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],["type","text","min","0","mask","separator.2","thousandSeparator",",",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],["type","number","min","0",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"form-group"],["for","takenote"],["id","takenote","rows","3","name","takenote",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["href","javascript:;",1,"btn","btn-light",3,"click"],["href","javascript:;","class","btn btn-primary",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["href","javascript:;",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"button",7),b.dd(9),b.wc(10,"translate"),b.gc(),b.bd(11,Rt,14,12,"div",8),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(12,"div",9),b.hc(13,"div",1),b.hc(14,"div",10),b.hc(15,"strong"),b.dd(16),b.wc(17,"translate"),b.gc(),b.gc(),b.hc(18,"div",10),b.dd(19),b.gc(),b.hc(20,"div",10),b.hc(21,"strong"),b.dd(22),b.wc(23,"translate"),b.gc(),b.gc(),b.hc(24,"div",10),b.dd(25),b.gc(),b.hc(26,"div",10),b.hc(27,"strong"),b.dd(28),b.wc(29,"translate"),b.gc(),b.gc(),b.hc(30,"div",10),b.dd(31),b.wc(32,"date"),b.gc(),b.hc(33,"div",10),b.hc(34,"strong"),b.dd(35),b.wc(36,"translate"),b.gc(),b.gc(),b.hc(37,"div",10),b.dd(38),b.wc(39,"date"),b.gc(),b.hc(40,"div",10),b.hc(41,"strong"),b.dd(42),b.wc(43,"translate"),b.gc(),b.gc(),b.hc(44,"div",10),b.hc(45,"input",11),b.rc("ngModelChange",function(e){return t.entity.number_sample=e})("change",function(){return t._updateSampleNo()}),b.gc(),b.gc(),b.hc(46,"div",10),b.hc(47,"strong"),b.dd(48),b.wc(49,"translate"),b.gc(),b.gc(),b.hc(50,"div",10),b.dd(51),b.gc(),b.hc(52,"div",10),b.hc(53,"strong"),b.dd(54),b.wc(55,"translate"),b.gc(),b.gc(),b.hc(56,"div",10),b.hc(57,"strong"),b.dd(58),b.wc(59,"number"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(60,"div",2),b.hc(61,"div",3),b.hc(62,"div",4),b.hc(63,"div",1),b.hc(64,"div",12),b.hc(65,"div",13),b.bd(66,Et,4,5,"ng-container",14),b.gc(),b.gc(),b.hc(67,"div",15),b.bd(68,Ot,2,1,"ng-container",16),b.gc(),b.gc(),b.gc(),b.bd(69,sn,149,192,"form",17),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(70,dn,18,9,"ng-template",null,18,b.cd),b.bd(72,un,21,11,"ng-template",null,19,b.cd)),2&e&&(b.Nb(9),b.fd(" ",b.xc(10,20,"Go back")," "),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","print")),b.Nb(5),b.ed(b.xc(17,22,"Company")),b.Nb(3),b.fd(" ","en"==t.user.lang?t.entity.company_name_e:t.entity.company_name_l," "),b.Nb(3),b.ed(b.xc(23,24,"Contact")),b.Nb(3),b.fd(" ",t.entity.contact_name," "),b.Nb(3),b.ed(b.xc(29,26,"Received date")),b.Nb(3),b.fd(" ",b.yc(32,28,t.entity.received_date,"dd/MM/yyyy HH:mm")," "),b.Nb(4),b.ed(b.xc(36,31,"Returned date")),b.Nb(3),b.fd(" ",b.yc(39,33,t.entity.returned_date,"dd/MM/yyyy HH:mm")," "),b.Nb(4),b.ed(b.xc(43,36,"Number of sample")),b.Nb(3),b.Dc("ngModel",t.entity.number_sample)("disabled",0!=t.entity.is_active||!t._authenService.hasPermission("REQ-LIST","create")),b.Nb(3),b.ed(b.xc(49,38,"Created by")),b.Nb(3),b.fd(" ",t.entity.created_by," "),b.Nb(3),b.ed(b.xc(55,40,"Total")),b.Nb(4),b.fd("",null==t.entity.total||"NaN"==t.entity.total?0:b.xc(59,42,t.entity.total)," (VND)"),b.Nb(8),b.Dc("ngForOf",t._xList),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")),b.Nb(1),b.Dc("ngIf",0!=t._currentTabActivated))},directives:[i.e,c.q,a.s,a.c,a.n,a.q,c.p,w.l,w.p,w.o,c.o,a.z,a.o,a.p,a.x,a.r,a.A,C.a,C.c,w.N,Pt.a],pipes:[T.c,c.f,c.g,c.y],styles:[""]}),e})();function mn(e,t){if(1&e){const e=b.ic();b.hc(0,"button",42),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(107);return t._openModal(n,null)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Add new request")," "))}function pn(e,t){if(1&e){const e=b.ic();b.hc(0,"button",43),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t.exportList)}),b.cc(1,"i",44),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function fn(e,t){if(1&e){const e=b.ic();b.hc(0,"button",45),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(111);return t.openCopyModal(n,t.exportList,1)}),b.cc(1,"i",46),b.dd(2),b.wc(3,"translate"),b.wc(4,"translate"),b.gc()}2&e&&(b.Nb(2),b.gd(" ",b.xc(3,2,"Copy")," ",b.xc(4,4,"All")," "))}function bn(e,t){1&e&&b.cc(0,"img",47)}function yn(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",48),b.hc(3,"h3",49),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function vn(e,t){if(1&e){const e=b.ic();b.hc(0,"button",62),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit,n=b.vc(2),c=b.Rc(107);return n._openModal(c,t)}),b.wc(1,"translate"),b.cc(2,"i",63),b.gc()}if(2&e){const e=b.vc(3);b.Fc("ngbTooltip","\n                          ",b.xc(1,2,"Edit"),"\n                          "),b.Dc("disabled",!e._authenService.hasPermission("REQ-LIST","update"))}}function xn(e,t){1&e&&(b.hc(0,"span",64),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Pending")))}function Sn(e,t){1&e&&(b.hc(0,"span",65),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Confirmed")))}function Nn(e,t){1&e&&(b.hc(0,"span",66),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Cancel")))}function wn(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",51),b.dd(2),b.gc(),b.hc(3,"th",51),b.hc(4,"input",52),b.rc("change",function(n){b.Uc(e);const c=t.$implicit;return b.vc(2).selectItem(n,c.id)}),b.gc(),b.gc(),b.hc(5,"td"),b.hc(6,"button",53),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(2)._routeDetail(n)}),b.wc(7,"translate"),b.cc(8,"i",54),b.gc(),b.bd(9,vn,3,4,"button",55),b.hc(10,"button",56),b.rc("click",function(){b.Uc(e);const n=t.$implicit,c=b.vc(2),a=b.Rc(111);return c.openCopyModal(a,n,0)}),b.wc(11,"translate"),b.cc(12,"i",46),b.gc(),b.gc(),b.hc(13,"td"),b.dd(14),b.gc(),b.hc(15,"td"),b.dd(16),b.gc(),b.hc(17,"td"),b.dd(18),b.wc(19,"date"),b.gc(),b.hc(20,"td"),b.hc(21,"span",57),b.dd(22),b.gc(),b.gc(),b.hc(23,"td"),b.dd(24),b.gc(),b.hc(25,"td",58),b.dd(26),b.wc(27,"number"),b.gc(),b.hc(28,"td"),b.dd(29),b.gc(),b.hc(30,"td"),b.dd(31),b.wc(32,"date"),b.gc(),b.hc(33,"td"),b.bd(34,xn,3,3,"span",59),b.bd(35,Sn,3,3,"span",60),b.bd(36,Nn,3,3,"span",61),b.gc(),b.hc(37,"td"),b.dd(38),b.wc(39,"date"),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,c=b.vc(2);b.Nb(2),b.fd(" ",n+1+c.pageSize*(c.pageIndex-1)," "),b.Nb(2),b.Fc("name","ckU",n+1,""),b.Dc("checked",c.exportList.includes(e.id)),b.Nb(2),b.Fc("ngbTooltip","\n                          ",b.xc(7,21,"View detail"),"\n                          "),b.Dc("disabled",!c._authenService.hasPermission("REQ-LIST","read")),b.Nb(3),b.Dc("ngIf",e.is_active<=2),b.Nb(1),b.Fc("ngbTooltip","\n                          ",b.xc(11,23,"Copy"),"\n                          "),b.Dc("disabled",!c._authenService.hasPermission("REQ-LIST","update")),b.Nb(4),b.fd(" ",e.request_no," "),b.Nb(2),b.ed(e.order_no),b.Nb(2),b.ed(b.yc(19,25,e.received_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.Dc("ngbTooltip",e.note),b.Nb(1),b.ed("en"==c.user.lang?e.company_name_e:e.company_name_l),b.Nb(2),b.fd(" ","en"==c.user.lang?e.receive_company_e:e.receive_company_l," "),b.Nb(2),b.ed(b.xc(27,28,e.total)),b.Nb(3),b.ed(e.contact_name),b.Nb(2),b.ed(b.yc(32,30,e.returned_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.Dc("ngIf",0==e.is_active),b.Nb(1),b.Dc("ngIf",0!=e.is_active&&2!=e.is_active),b.Nb(1),b.Dc("ngIf",2==e.is_active),b.Nb(2),b.ed(b.yc(39,33,e.timestamp,"dd/MM/yyyy HH:mm"))}}function Dn(e,t){if(1&e&&(b.fc(0),b.bd(1,wn,40,36,"tr",50),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._requestslist)}}function Mn(e,t){if(1&e&&(b.hc(0,"small",105),b.dd(1),b.gc()),2&e){const e=b.vc(2);b.Nb(1),b.ed(e.selectedCustomerLabel)}}function Cn(e,t){1&e&&(b.fc(0),b.hc(1,"a",106),b.cc(2,"img",107),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing")," "))}function Tn(e,t){1&e&&(b.hc(0,"button",108),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Save & close")," "))}const In=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function kn(e,t){if(1&e){const e=b.ic();b.hc(0,"form",67,68),b.rc("ngSubmit",function(){b.Uc(e);const t=b.vc();return t.saveChange(t.selectedCustomer)}),b.hc(2,"div",69),b.hc(3,"h4",70),b.dd(4),b.wc(5,"translate"),b.wc(6,"translate"),b.gc(),b.hc(7,"button",71),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(8,"span",72),b.dd(9,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(10,"div",73),b.hc(11,"div",74),b.hc(12,"div",75),b.hc(13,"div",76),b.hc(14,"label",77),b.dd(15),b.wc(16,"translate"),b.hc(17,"span",49),b.dd(18,"(*)"),b.gc(),b.gc(),b.hc(19,"input",78),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.number_sample=t}),b.wc(20,"translate"),b.gc(),b.hc(21,"input",79),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.id=t}),b.gc(),b.gc(),b.gc(),b.hc(22,"div",75),b.hc(23,"div",76),b.hc(24,"label",80),b.dd(25,"VAT (%) "),b.hc(26,"span",49),b.dd(27,"(*)"),b.gc(),b.gc(),b.hc(28,"input",81),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.tax_vat=t}),b.gc(),b.gc(),b.gc(),b.hc(29,"div",82),b.hc(30,"div",76),b.hc(31,"label",83),b.dd(32),b.wc(33,"translate"),b.gc(),b.hc(34,"input",84),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.title_promo_spec=t}),b.wc(35,"translate"),b.gc(),b.gc(),b.gc(),b.hc(36,"div",75),b.hc(37,"div",76),b.hc(38,"label",85),b.dd(39),b.wc(40,"translate"),b.gc(),b.hc(41,"input",86),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.promo_special=t}),b.wc(42,"translate"),b.gc(),b.gc(),b.gc(),b.hc(43,"div",75),b.hc(44,"div",76),b.hc(45,"label",87),b.dd(46),b.wc(47,"translate"),b.gc(),b.hc(48,"input",88),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.promo_perorder=t}),b.wc(49,"translate"),b.gc(),b.gc(),b.gc(),b.hc(50,"div",82),b.hc(51,"div",76),b.hc(52,"label",89),b.dd(53),b.wc(54,"translate"),b.hc(55,"span",49),b.dd(56,"(*)"),b.gc(),b.gc(),b.hc(57,"ng-select",90),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().selectedCustomer=t})("change",function(){return b.Uc(e),b.vc()._getInfoLabelCustomer()}),b.wc(58,"translate"),b.wc(59,"translate"),b.gc(),b.bd(60,Mn,2,1,"small",91),b.gc(),b.gc(),b.hc(61,"div",75),b.hc(62,"div",76),b.hc(63,"label",92),b.dd(64),b.wc(65,"translate"),b.hc(66,"span",49),b.dd(67,"(*)"),b.gc(),b.gc(),b.hc(68,"input",93),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._fdate=t})("bsValueChange",function(t){return b.Uc(e),b.vc().orgValueChange1(t)}),b.wc(69,"translate"),b.gc(),b.gc(),b.gc(),b.hc(70,"div",75),b.hc(71,"div",76),b.hc(72,"label",94),b.dd(73),b.wc(74,"translate"),b.hc(75,"span",49),b.dd(76,"(*)"),b.gc(),b.gc(),b.hc(77,"input",95),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._tdate=t})("bsValueChange",function(t){return b.Uc(e),b.vc().orgValueChange2(t)}),b.wc(78,"translate"),b.gc(),b.gc(),b.gc(),b.hc(79,"div",75),b.hc(80,"div",76),b.hc(81,"label",96),b.dd(82),b.wc(83,"translate"),b.gc(),b.hc(84,"input",97),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.valid_number=t})("change",function(){return b.Uc(e),b.vc()._calculateDays()}),b.wc(85,"translate"),b.gc(),b.gc(),b.gc(),b.hc(86,"div",75),b.hc(87,"div",76),b.hc(88,"label",98),b.dd(89),b.wc(90,"translate"),b.gc(),b.hc(91,"select",99),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.is_active=t}),b.hc(92,"option",21),b.dd(93),b.wc(94,"translate"),b.gc(),b.hc(95,"option",22),b.dd(96),b.wc(97,"translate"),b.gc(),b.hc(98,"option",23),b.dd(99),b.wc(100,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(101,"div",82),b.hc(102,"div",76),b.hc(103,"label",100),b.dd(104),b.wc(105,"translate"),b.gc(),b.hc(106,"textarea",101),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.note=t}),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(107,"div",102),b.hc(108,"button",103),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.dd(109),b.wc(110,"translate"),b.gc(),b.bd(111,Cn,5,3,"ng-container",38),b.bd(112,Tn,3,3,"button",104),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(4),b.fd(" ","ADD"==e._flagModal?b.xc(5,57,"Add new"):b.xc(6,59,"Update")," "),b.Nb(11),b.fd("",b.xc(16,61,"Number of sample")," "),b.Nb(4),b.Dc("ngClass","ADD"==e._flagModal?"form-control":"form-control jdisabled")("placeholder",b.xc(20,63,"Number of sample"))("ngModel",e.entity.number_sample)("disabled","ADD"!=e._flagModal),b.Nb(2),b.Dc("ngModel",e.entity.id),b.Nb(7),b.Dc("placeholder","VAT")("ngModel",e.entity.tax_vat)("disabled",0!=e.entity.is_active),b.Nb(4),b.ed(b.xc(33,65,"Promotion title")),b.Nb(2),b.Dc("placeholder",b.xc(35,67,"Promotion title"))("ngModel",e.entity.title_promo_spec)("disabled",0!=e.entity.is_active),b.Nb(5),b.fd("",b.xc(40,69,"Promotion per order")," (VND)"),b.Nb(2),b.Dc("placeholder",b.xc(42,71,"Promotion per order"))("ngModel",e.entity.promo_special)("disabled",0!=e.entity.is_active),b.Nb(5),b.fd("",b.xc(47,73,"Total promotion")," (%)"),b.Nb(2),b.Dc("placeholder",b.xc(49,75,"Total promotion"))("ngModel",e.entity.promo_perorder)("disabled",0!=e.entity.is_active),b.Nb(5),b.fd("",b.xc(54,77,"Company")," "),b.Nb(4),b.Dc("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCustomer)("placeholder",b.xc(58,79,"Please choose"))("notFoundText",b.xc(59,81,"Not found item")),b.Nb(3),b.Dc("ngIf",null!=e.selectedCustomer),b.Nb(4),b.fd("",b.xc(65,83,"Received date")," "),b.Nb(4),b.Dc("placeholder",b.xc(69,85,"Received date"))("ngModel",e._fdate)("bsConfig",b.Hc(107,In))("disabled",0!=e.entity.is_active),b.Nb(5),b.fd("",b.xc(74,87,"Returned date")," "),b.Nb(4),b.Dc("placeholder",b.xc(78,89,"Returned date"))("ngModel",e._tdate)("bsConfig",b.Hc(108,In))("disabled",0!=e.entity.is_active),b.Nb(5),b.ed(b.xc(83,91,"Valid date")),b.Nb(2),b.Dc("type","number")("placeholder",b.xc(85,93,"Valid date"))("ngModel",e.entity.valid_number)("disabled",0!=e.entity.is_active)("min",0),b.Nb(5),b.ed(b.xc(90,95,"Status")),b.Nb(2),b.Dc("ngModel",e.entity.is_active),b.Nb(2),b.fd(" ",b.xc(94,97,"Pending")," "),b.Nb(3),b.fd(" ",b.xc(97,99,"Confirmed")," "),b.Nb(3),b.fd(" ",b.xc(100,101,"Cancel")," "),b.Nb(5),b.ed(b.xc(105,103,"Note")),b.Nb(2),b.Dc("ngModel",e.entity.note),b.Nb(3),b.fd(" ",b.xc(110,105,"Close")," "),b.Nb(2),b.Dc("ngIf",e.isSave),b.Nb(1),b.Dc("ngIf",!e.isSave)}}function Pn(e,t){1&e&&(b.hc(0,"h4",70),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Relationship")," "))}function Rn(e,t){if(1&e&&(b.hc(0,"h4",70),b.dd(1),b.wc(2,"translate"),b.gc()),2&e){const e=b.vc(2);b.Nb(1),b.gd(" ",b.xc(2,2,"Contact")," - ",e._diaName," ")}}function En(e,t){if(1&e&&(b.hc(0,"h4",70),b.dd(1),b.wc(2,"translate"),b.wc(3,"translate"),b.gc()),2&e){const e=b.vc(2);b.Nb(1),b.gd(" ",b.xc(2,2,"Relationship")," - ",b.xc(3,4,"ADDREL"==e._flagModal1?"Add new":"Update")," ")}}function An(e,t){if(1&e){const e=b.ic();b.hc(0,"div",117),b.hc(1,"pagination",118),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(3).pageIndexRel=t})("pageChanged",function(t){return b.Uc(e),b.vc(3).pageChangedRel(t)}),b.gc(),b.hc(2,"a",30),b.dd(3),b.wc(4,"translate"),b.wc(5,"translate"),b.wc(6,"translate"),b.wc(7,"translate"),b.gc(),b.gc()}if(2&e){const e=b.vc(3);b.Nb(1),b.Dc("boundaryLinks",!0)("totalItems",e.totalRowRel)("ngModel",e.pageIndexRel)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSizeRel),b.Nb(2),b.id("",b.xc(4,12,"Total of records"),": ",e.totalRowRel," - ",b.xc(5,14,"Page")," ",e.pageIndexRel," ",b.xc(6,16,"of")," ",e.totalPageRel," ",b.xc(7,18,"page"),"")}}function On(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",119),b.hc(3,"h3",49),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function Un(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"td",120),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(4).editLinkPopUp(n)}),b.dd(2),b.gc(),b.hc(3,"td"),b.dd(4),b.gc(),b.hc(5,"td"),b.dd(6),b.gc(),b.hc(7,"td"),b.dd(8),b.gc(),b.hc(9,"td"),b.dd(10),b.gc(),b.hc(11,"td"),b.dd(12),b.gc(),b.hc(13,"td"),b.dd(14),b.gc(),b.hc(15,"td"),b.hc(16,"button",121),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(4).deleteItemLinkContact(n)}),b.wc(17,"translate"),b.cc(18,"i",122),b.gc(),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=b.vc(4);b.Nb(2),b.fd(" ",e.code_link," "),b.Nb(2),b.ed(e.company_name_l),b.Nb(2),b.ed(e.sender_name),b.Nb(2),b.fd(" ",e.receive_company_l," "),b.Nb(2),b.fd(" ",e.receive_name," "),b.Nb(2),b.fd(" ",e.bill_company_l," "),b.Nb(2),b.fd(" ",e.bill_name," "),b.Nb(2),b.Ec("ngbTooltip",b.xc(17,9,"Delete")),b.Dc("disabled",!n._authenService.hasPermission("CUSTOMER","delete"))}}function Yn(e,t){if(1&e&&(b.fc(0),b.bd(1,Un,19,11,"tr",50),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngForOf",e._relationslist)}}function Fn(e,t){if(1&e){const e=b.ic();b.hc(0,"div",117),b.hc(1,"pagination",118),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(3).pageIndexRel=t})("pageChanged",function(t){return b.Uc(e),b.vc(3).pageChangedRel(t)}),b.gc(),b.hc(2,"a",30),b.dd(3),b.wc(4,"translate"),b.wc(5,"translate"),b.wc(6,"translate"),b.wc(7,"translate"),b.gc(),b.gc()}if(2&e){const e=b.vc(3);b.Nb(1),b.Dc("boundaryLinks",!0)("totalItems",e.totalRowRel)("ngModel",e.pageIndexRel)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSizeRel),b.Nb(2),b.id("",b.xc(4,12,"Total of records"),": ",e.totalRowRel," - ",b.xc(5,14,"Page")," ",e.pageIndexRel," ",b.xc(6,16,"of")," ",e.totalPageRel," ",b.xc(7,18,"page"),"")}}function Ln(e,t){if(1&e){const e=b.ic();b.hc(0,"div",74),b.hc(1,"div",112),b.hc(2,"input",113),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2)._keywordRel=t})("change",function(){return b.Uc(e),b.vc(2).loadRelationship()})("keyup.enter",function(){return b.Uc(e),b.vc(2).loadRelationship()}),b.wc(3,"translate"),b.gc(),b.gc(),b.hc(4,"div",114),b.hc(5,"button",115),b.rc("click",function(){return b.Uc(e),b.vc(2).linkContactPopUp1()}),b.dd(6),b.wc(7,"translate"),b.gc(),b.gc(),b.hc(8,"div",82),b.cc(9,"br"),b.bd(10,An,8,20,"div",116),b.hc(11,"div",31),b.hc(12,"table",32),b.hc(13,"thead",33),b.hc(14,"tr"),b.hc(15,"th",35),b.dd(16),b.wc(17,"translate"),b.gc(),b.hc(18,"th",35),b.dd(19),b.wc(20,"translate"),b.gc(),b.hc(21,"th",35),b.dd(22),b.wc(23,"translate"),b.gc(),b.hc(24,"th",35),b.dd(25),b.wc(26,"translate"),b.gc(),b.hc(27,"th",35),b.dd(28),b.wc(29,"translate"),b.gc(),b.hc(30,"th",35),b.dd(31),b.wc(32,"translate"),b.gc(),b.hc(33,"th",35),b.dd(34),b.wc(35,"translate"),b.gc(),b.hc(36,"th",35),b.dd(37),b.wc(38,"translate"),b.gc(),b.gc(),b.gc(),b.hc(39,"tbody"),b.bd(40,On,6,3,"ng-container",38),b.bd(41,Yn,2,1,"ng-container",38),b.gc(),b.gc(),b.gc(),b.bd(42,Fn,8,20,"div",116),b.gc(),b.gc()}if(2&e){const e=b.vc(2);b.Nb(2),b.Dc("placeholder",b.xc(3,15,"Search"))("ngModel",e._keywordRel),b.Nb(4),b.fd(" ",b.xc(7,17,"Add new")," "),b.Nb(4),b.Dc("ngIf",e._relationslist.length>0),b.Nb(6),b.fd(" ",b.xc(17,19,"Relevant code")," "),b.Nb(3),b.fd(" ",b.xc(20,21,"Company")," "),b.Nb(3),b.fd(" ",b.xc(23,23,"Sender")," "),b.Nb(3),b.fd(" ",b.xc(26,25,"Received company")," "),b.Nb(3),b.fd(" ",b.xc(29,27,"Receiver")," "),b.Nb(3),b.fd(" ",b.xc(32,29,"Bill company")," "),b.Nb(3),b.fd(" ",b.xc(35,31,"Bill receiver")," "),b.Nb(3),b.ed(b.xc(38,33,"Actions")),b.Nb(3),b.Dc("ngIf",0==e._relationslist.length),b.Nb(1),b.Dc("ngIf",e._relationslist.length>0),b.Nb(1),b.Dc("ngIf",e._relationslist.length>0)}}function qn(e,t){1&e&&(b.fc(0),b.hc(1,"a",106),b.cc(2,"img",107),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing"),""))}function zn(e,t){if(1&e&&(b.hc(0,"button",143),b.dd(1),b.wc(2,"translate"),b.gc()),2&e){b.vc();const e=b.Rc(2);b.Dc("disabled",!e.valid),b.Nb(1),b.fd(" ",b.xc(2,2,"Save")," ")}}function Gn(e,t){if(1&e){const e=b.ic();b.hc(0,"button",144),b.rc("click",function(){return b.Uc(e),b.vc(3)._clearContact()}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Add new")," "))}function Hn(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"td"),b.dd(2),b.gc(),b.hc(3,"td"),b.dd(4),b.gc(),b.hc(5,"td"),b.dd(6),b.gc(),b.hc(7,"td"),b.dd(8),b.gc(),b.hc(9,"td"),b.dd(10),b.gc(),b.hc(11,"td"),b.hc(12,"button",145),b.rc("click",function(){b.Uc(e);const n=t.$implicit,c=b.vc(3);return c.loadDetail1(n.id,c.entityContact.company_id)}),b.cc(13,"i",63),b.gc(),b.hc(14,"button",146),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(3).deleteItem0(n)}),b.cc(15,"i",122),b.gc(),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=b.vc(3);b.Nb(2),b.fd(" ",e.contact_code," "),b.Nb(2),b.fd(" ",e.contact_name," "),b.Nb(2),b.fd(" ",e.phone," "),b.Nb(2),b.ed(e.email),b.Nb(2),b.ed(e.note_l),b.Nb(2),b.Dc("disabled",!n._authenService.hasPermission("CUSTOMER","update")),b.Nb(2),b.Dc("disabled",!n._authenService.hasPermission("CUSTOMER","delete"))}}function Vn(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"form",67,123),b.rc("ngSubmit",function(){return b.Uc(e),b.vc(2).saveChange0()}),b.hc(3,"div",74),b.hc(4,"div",75),b.hc(5,"div",76),b.hc(6,"label",124),b.dd(7),b.wc(8,"translate"),b.hc(9,"span",49),b.dd(10,"(*)"),b.gc(),b.gc(),b.hc(11,"input",125),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.contact_name=t}),b.wc(12,"translate"),b.gc(),b.gc(),b.gc(),b.hc(13,"div",75),b.hc(14,"div",76),b.hc(15,"label",126),b.dd(16),b.wc(17,"translate"),b.gc(),b.hc(18,"input",127),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.contact_code=t}),b.wc(19,"translate"),b.gc(),b.gc(),b.gc(),b.hc(20,"div",75),b.hc(21,"div",76),b.hc(22,"label",128),b.dd(23),b.wc(24,"translate"),b.hc(25,"span",49),b.dd(26,"(*)"),b.gc(),b.gc(),b.hc(27,"input",129),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.phone=t}),b.wc(28,"translate"),b.gc(),b.gc(),b.gc(),b.hc(29,"div",75),b.hc(30,"div",76),b.hc(31,"label",130),b.dd(32,"Email"),b.gc(),b.hc(33,"input",131),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.email=t}),b.gc(),b.gc(),b.gc(),b.hc(34,"div",75),b.hc(35,"div",76),b.hc(36,"label",132),b.dd(37),b.wc(38,"translate"),b.wc(39,"translate"),b.gc(),b.hc(40,"textarea",133),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.note_l=t}),b.wc(41,"translate"),b.gc(),b.gc(),b.gc(),b.hc(42,"div",75),b.hc(43,"div",76),b.hc(44,"label",134),b.dd(45),b.wc(46,"translate"),b.wc(47,"translate"),b.gc(),b.hc(48,"textarea",135),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.note_e=t}),b.wc(49,"translate"),b.gc(),b.gc(),b.gc(),b.hc(50,"div",75),b.hc(51,"div",76),b.hc(52,"label",98),b.dd(53),b.wc(54,"translate"),b.gc(),b.hc(55,"div",136),b.hc(56,"input",137),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2)._status=t}),b.gc(),b.cc(57,"label",98),b.gc(),b.gc(),b.gc(),b.hc(58,"div",75),b.hc(59,"div",76),b.bd(60,qn,5,3,"ng-container",38),b.bd(61,zn,3,4,"button",138),b.bd(62,Gn,3,3,"button",139),b.gc(),b.gc(),b.hc(63,"div",82),b.hc(64,"div",76),b.hc(65,"input",140),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2)._keyword1=t})("change",function(){b.Uc(e);const t=b.vc(2);return t.loadDataContact(t.entityContact.company_id)})("keyup.enter",function(){b.Uc(e);const t=b.vc(2);return t.loadDataContact(t.entityContact.company_id)}),b.wc(66,"translate"),b.gc(),b.gc(),b.gc(),b.hc(67,"div",82),b.hc(68,"div",117),b.hc(69,"pagination",141),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).pageIndex1=t})("pageChanged",function(t){return b.Uc(e),b.vc(2).pageChanged1(t)}),b.gc(),b.hc(70,"a",30),b.dd(71),b.wc(72,"translate"),b.wc(73,"translate"),b.wc(74,"translate"),b.wc(75,"translate"),b.gc(),b.gc(),b.hc(76,"div",142),b.hc(77,"table",32),b.hc(78,"thead",33),b.hc(79,"tr"),b.hc(80,"th",35),b.dd(81),b.wc(82,"translate"),b.gc(),b.hc(83,"th",35),b.dd(84),b.wc(85,"translate"),b.gc(),b.hc(86,"th",35),b.dd(87),b.wc(88,"translate"),b.gc(),b.hc(89,"th",35),b.dd(90,"Email"),b.gc(),b.hc(91,"th",35),b.dd(92),b.wc(93,"translate"),b.gc(),b.hc(94,"th",35),b.dd(95),b.wc(96,"translate"),b.gc(),b.gc(),b.gc(),b.hc(97,"tbody"),b.bd(98,Hn,16,7,"tr",50),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.ec()}if(2&e){const e=b.vc(2);b.Nb(7),b.fd("",b.xc(8,45,"Customer name")," "),b.Nb(4),b.Dc("placeholder",b.xc(12,47,"Customer name"))("ngModel",e.entityContact.contact_name),b.Nb(5),b.ed(b.xc(17,49,"Customer code")),b.Nb(2),b.Dc("placeholder",b.xc(19,51,"Customer code"))("ngModel",e.entityContact.contact_code)("disabled",!0),b.Nb(5),b.fd("",b.xc(24,53,"Phone")," "),b.Nb(4),b.Dc("placeholder",b.xc(28,55,"Phone"))("ngModel",e.entityContact.phone),b.Nb(6),b.Dc("placeholder","abc@company.com")("ngModel",e.entityContact.email),b.Nb(4),b.gd("",b.xc(38,57,"Note")," (",b.xc(39,59,"Vietnamese"),")"),b.Nb(3),b.Ec("placeholder",b.xc(41,61,"Note")),b.Dc("ngModel",e.entityContact.note_l),b.Nb(5),b.gd("",b.xc(46,63,"Note")," (",b.xc(47,65,"English"),")"),b.Nb(3),b.Ec("placeholder",b.xc(49,67,"Note")),b.Dc("ngModel",e.entityContact.note_e),b.Nb(5),b.ed(b.xc(54,69,"Status")),b.Nb(3),b.Dc("ngModel",e._status),b.Nb(4),b.Dc("ngIf",e.isSave1),b.Nb(1),b.Dc("ngIf",!e.isSave1),b.Nb(1),b.Dc("ngIf","UPDATE"==e._flagModal1),b.Nb(3),b.Ec("placeholder",b.xc(66,71,"Search")),b.Dc("ngModel",e._keyword1),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",e.totalRow1)("ngModel",e.pageIndex1)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize1),b.Nb(2),b.id("",b.xc(72,73,"Total of records"),": ",e.totalRow1," - ",b.xc(73,75,"Page")," ",e.pageIndex1," ",b.xc(74,77,"of")," ",e.totalPage1," ",b.xc(75,79,"page"),""),b.Nb(10),b.fd(" ",b.xc(82,81,"Customer code")," "),b.Nb(3),b.fd(" ",b.xc(85,83,"Customer name")," "),b.Nb(3),b.fd(" ",b.xc(88,85,"Phone")," "),b.Nb(5),b.fd(" ",b.xc(93,87,"Note")," "),b.Nb(3),b.fd(" ",b.xc(96,89,"Actions")," "),b.Nb(3),b.Dc("ngForOf",e._contacts)}}function Bn(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"form",null,147),b.hc(3,"div",74),b.hc(4,"div",82),b.hc(5,"div",76),b.hc(6,"label",148),b.dd(7),b.wc(8,"translate"),b.hc(9,"span",49),b.dd(10,"(*)"),b.gc(),b.gc(),b.hc(11,"textarea",149),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityLinkC.code_link=t}),b.wc(12,"translate"),b.gc(),b.gc(),b.gc(),b.hc(13,"div",75),b.hc(14,"div",76),b.hc(15,"label",150),b.dd(16),b.wc(17,"translate"),b.hc(18,"span",49),b.dd(19,"(*)"),b.gc(),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"ng-select",151),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedCompany=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("cty",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(23,"translate"),b.wc(24,"translate"),b.gc(),b.gc(),b.gc(),b.hc(25,"div",75),b.hc(26,"div",76),b.hc(27,"label",150),b.dd(28),b.wc(29,"translate"),b.hc(30,"span",49),b.dd(31,"(*)"),b.gc(),b.dd(32),b.wc(33,"translate"),b.gc(),b.hc(34,"ng-select",152),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedSender=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("lh",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(35,"translate"),b.wc(36,"translate"),b.gc(),b.gc(),b.gc(),b.hc(37,"div",75),b.hc(38,"div",76),b.hc(39,"label"),b.dd(40),b.wc(41,"translate"),b.hc(42,"span",49),b.dd(43,"(*)"),b.gc(),b.dd(44),b.wc(45,"translate"),b.gc(),b.hc(46,"ng-select",153),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedCompanyKQ=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("kq",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(47,"translate"),b.wc(48,"translate"),b.gc(),b.gc(),b.gc(),b.hc(49,"div",75),b.hc(50,"div",76),b.hc(51,"label"),b.dd(52),b.wc(53,"translate"),b.hc(54,"span",49),b.dd(55,"(*)"),b.gc(),b.dd(56),b.wc(57,"translate"),b.gc(),b.hc(58,"ng-select",154),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedSenderKQ=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("lhkq",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(59,"translate"),b.wc(60,"translate"),b.gc(),b.gc(),b.gc(),b.hc(61,"div",75),b.hc(62,"div",76),b.hc(63,"label"),b.dd(64),b.wc(65,"translate"),b.hc(66,"span",49),b.dd(67,"(*)"),b.gc(),b.dd(68),b.wc(69,"translate"),b.gc(),b.hc(70,"ng-select",155),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedCompanyBill=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("bill",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(71,"translate"),b.wc(72,"translate"),b.gc(),b.gc(),b.gc(),b.hc(73,"div",75),b.hc(74,"div",76),b.hc(75,"label"),b.dd(76),b.wc(77,"translate"),b.hc(78,"span",49),b.dd(79,"(*)"),b.gc(),b.dd(80),b.wc(81,"translate"),b.gc(),b.hc(82,"ng-select",156),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedSenderBill=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("lhbill",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(83,"translate"),b.wc(84,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.ec()}if(2&e){const e=b.vc(2);b.Nb(7),b.fd("",b.xc(8,58,"Code")," "),b.Nb(4),b.Dc("placeholder",b.xc(12,60,"Code"))("ngModel",e.entityLinkC.code_link)("disabled",!0),b.Nb(5),b.fd("",b.xc(17,62,"Customer")," "),b.Nb(4),b.fd(" - ",b.xc(21,64,"Information"),""),b.Nb(2),b.Dc("items",e._getlistcompany)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCompany)("placeholder",b.xc(23,66,"Please choose"))("notFoundText",b.xc(24,68,"Not found item")),b.Nb(6),b.fd("",b.xc(29,70,"Contact")," "),b.Nb(4),b.fd(" - ",b.xc(33,72,"Sender"),""),b.Nb(2),b.Dc("items",e._getlistsender)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSender)("placeholder",b.xc(35,74,"Please choose"))("notFoundText",b.xc(36,76,"Not found item")),b.Nb(6),b.fd("",b.xc(41,78,"Customer")," "),b.Nb(4),b.fd(" - ",b.xc(45,80,"Received company"),""),b.Nb(2),b.Dc("items",e._getlistcompanyKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCompanyKQ)("placeholder",b.xc(47,82,"Please choose"))("notFoundText",b.xc(48,84,"Not found item")),b.Nb(6),b.fd("",b.xc(53,86,"Contact")," "),b.Nb(4),b.fd(" - ",b.xc(57,88,"Received company"),""),b.Nb(2),b.Dc("items",e._getlistsenderKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSenderKQ)("placeholder",b.xc(59,90,"Please choose"))("notFoundText",b.xc(60,92,"Not found item")),b.Nb(6),b.fd("",b.xc(65,94,"Customer")," "),b.Nb(4),b.fd(" - ",b.xc(69,96,"Bill company"),""),b.Nb(2),b.Dc("items",e._getlistcompanyBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCompanyBill)("placeholder",b.xc(71,98,"Please choose"))("notFoundText",b.xc(72,100,"Not found item")),b.Nb(6),b.fd("",b.xc(77,102,"Contact")," "),b.Nb(4),b.fd(" - ",b.xc(81,104,"Bill company"),""),b.Nb(2),b.Dc("items",e._getlistsenderBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSenderBill)("placeholder",b.xc(83,106,"Please choose"))("notFoundText",b.xc(84,108,"Not found item"))}}function Qn(e,t){1&e&&(b.fc(0),b.hc(1,"a",106),b.cc(2,"img",107),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing"),""))}function $n(e,t){if(1&e){const e=b.ic();b.hc(0,"button",159),b.rc("click",function(){b.Uc(e);const t=b.vc(3);return t.saveChangeLink(t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Save & close")," "))}function Kn(e,t){if(1&e){const e=b.ic();b.hc(0,"div",102),b.hc(1,"button",157),b.rc("click",function(){return b.Uc(e),b.vc(2).closeModal()}),b.dd(2),b.wc(3,"translate"),b.gc(),b.hc(4,"button",144),b.rc("click",function(){return b.Uc(e),b.vc(2)._switchLinkList()}),b.dd(5),b.wc(6,"translate"),b.gc(),b.bd(7,Qn,5,3,"ng-container",38),b.bd(8,$n,3,3,"button",158),b.gc()}if(2&e){const e=b.vc(2);b.Nb(2),b.fd(" ",b.xc(3,4,"Close")," "),b.Nb(3),b.fd(" ",b.xc(6,6,"Relationship")," "),b.Nb(2),b.Dc("ngIf",e.isSave),b.Nb(1),b.Dc("ngIf",!e.isSave)}}function jn(e,t){if(1&e){const e=b.ic();b.hc(0,"div",69),b.bd(1,Pn,3,3,"h4",109),b.bd(2,Rn,3,4,"h4",109),b.bd(3,En,4,6,"h4",109),b.hc(4,"button",71),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(5,"span",72),b.dd(6,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(7,"div",73),b.bd(8,Ln,43,35,"div",110),b.bd(9,Vn,99,91,"ng-container",38),b.bd(10,Bn,85,110,"ng-container",38),b.gc(),b.bd(11,Kn,9,8,"div",111)}if(2&e){const e=b.vc();b.Nb(1),b.Dc("ngIf","LIST"==e._flagModal1),b.Nb(1),b.Dc("ngIf","ADD"==e._flagModal1||"UPDATE"==e._flagModal1),b.Nb(1),b.Dc("ngIf","ADDREL"==e._flagModal1||"UPDATEREL"==e._flagModal1),b.Nb(5),b.Dc("ngIf","LIST"==e._flagModal1),b.Nb(1),b.Dc("ngIf","ADD"==e._flagModal1||"UPDATE"==e._flagModal1),b.Nb(1),b.Dc("ngIf","ADDREL"==e._flagModal1||"UPDATEREL"==e._flagModal1),b.Nb(1),b.Dc("ngIf","ADDREL"==e._flagModal1||"UPDATEREL"==e._flagModal1)}}function Wn(e,t){if(1&e){const e=b.ic();b.hc(0,"form",160),b.hc(1,"div",69),b.hc(2,"h4",70),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",71),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",72),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",73),b.hc(9,"div",74),b.hc(10,"div",82),b.hc(11,"div",76),b.hc(12,"label",161),b.dd(13),b.wc(14,"translate"),b.gc(),b.hc(15,"ng-select",162),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().selectedCustomer1=t})("change",function(){b.Uc(e);const t=b.vc();return t.exportList.length>0?t._copyAll(t.exportList,t.selectedCustomer1):t._copyRequest(t.selectedCustomer1)}),b.wc(16,"translate"),b.wc(17,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.gd("",b.xc(4,10,"Copy")," - ",e._titleCopy,""),b.Nb(10),b.ed(b.xc(14,12,"Company")),b.Nb(2),b.Dc("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCustomer1)("placeholder",b.xc(16,14,"Please choose"))("notFoundText",b.xc(17,16,"Not found item"))}}let Jn=(()=>{class e{constructor(e,t,n,c,a,i,o,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=c,this._uploadService=a,this._excelService=i,this._numberFormat=o,this.modalService=r,this.isSave=!1,this._flagModal="",this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this.filter_status="",this._requestslist=[],this.entity={},this.baseFolder=d.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this._reqlist=[],this._checkAll=!1,this._dt1="",this._dt2="",this._fdate=new Date,this._tdate=new Date,this.selectedCustomer=null,this.selectedCustomerLabel=null,this.selectedCustomer1=null,this._customers=[],this._contacts=[],this._today=new Date,this.singleSelect=[],this._titleCopy="",this._idCopy="",this.exportList=[],this.isExportLoading=!1,!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadCompanyLinks(),this.socket.on("refreshPage",e=>{this.loadData(),this.loadCompanyLinks()})}loadData(){this._isLoading=!0;let e={};e.page=this.pageIndex,e.limit=this.pageSize,e.filter=this._keyword,e.status=this.filter_status,e.domain=this.user.short_code,e.user_id=this.user.id,this._dataService.post("/request/getall",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,company_name_l:n.company_name_l,company_name_e:n.company_name_e,receive_company_e:n.receive_company_e,receive_company_l:n.receive_company_l,contact_name:n.contact_name,short_code:n.short_code,flag:!1,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat,total:n.total,created_by:n.created_by,ordered_samples:n.ordered_samples,note:n.note,order_no:(null==n.employee_nr?"":n.employee_nr)+n.request_no.substr(2,n.request_no.length)});this._requestslist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages,this._isLoading=!1})}loadCustomers(){let e={};e.domain=this.user.short_code,this._dataService.post("/customer/getallcustomersnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.name_l,code:n.id});this._customers=t})}loadCompanyLinks(){let e={};e.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.code_link,code:n.id});this._customers=t})}_getInfoLabelCustomer(){this.selectedCustomerLabel=null!=this.selectedCustomer?this._customers.filter(e=>e.code==this.selectedCustomer)[0].name:null}selectAll(e){e.target.checked?(this.exportList=[],this._requestslist.forEach(e=>this.exportList.push(e.id))):this.exportList=[]}selectItem(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(e=>e!==t)}loadContacts(e){if(null==e)this.selectedContact=null;else{let t={};t.customer_id=e,this._dataService.post("/customer/getallcontactsnopaging",t).subscribe(e=>{console.log("Contact",e);let t=[];for(let n of e.data)t.push({name:n.name_l,code:n.id});this._contacts=t})}}changeCheckAll(e){let t=[];if(this._checkAll)for(let n of e)t.push({id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:!0,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat,total:n.total,created_by:n.created_by,ordered_samples:n.ordered_samples});else for(let n of e)t.push({id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:!1,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat,total:n.total,created_by:n.created_by,ordered_samples:n.ordered_samples});this._requestslist=t}_changeCheckOne(e){this._checkAll=!0;let t=[];for(let n of this._requestslist)t.push(n.id==e.id?{id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:e.flag,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat}:{id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:n.flag,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat});this._requestslist=t}_pageSizeChange(e){this.pageSize=e.target.value,this._checkAll||this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this._checkAll||this.socket.emit("refresh",{})}loadDetail(e){let t={};t.id=e,this._dataService.post("/request/detail",t).subscribe(e=>{this.entity=e.data,console.log(e.data),null!=e.data.customer_id?(this.selectedCustomer=e.data.customer_id,this.selectedCustomerLabel=this._customers.filter(e=>e.code==this.selectedCustomer)[0].name):(this.selectedCustomer=null,this.selectedCustomerLabel=null),null!=e.data.received_date&&(this._dt1=r(new Date(e.data.received_date)).format("YYYY-MM-DD HH:mm"),this._fdate=new Date(e.data.received_date)),null!=e.data.returned_date&&(this._dt2=r(new Date(e.data.returned_date)).format("YYYY-MM-DD HH:mm"),this._tdate=new Date(e.data.returned_date))})}deleteItem(e){p.a.fire({title:"en"==this.user.lang?f.a.are_you_sure_en:f.a.are_you_sure,text:"en"==this.user.lang?e.category_name_e:e.category_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{if(t.value){let t={};t.id=e.id,this._dataService.post("/sample_matrix/deleteCat",t).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_DELETE_EN:f.a.MSG_DELETE,"OK"),this.socket.emit("refresh",{})},()=>{this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}})}saveChange(e){if(this._fdate>this._tdate||null==e||0==this.entity.number_sample||null==this._fdate||null==this._tdate)this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_DATE_EN:f.a.MSG_ERROR_DATE,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);else if(this.isSave=!0,this.entity.customer_id=e,this.entity.received_date=this._dt1,this.entity.returned_date=this._dt2,this.entity.userid=this.user.id,this.entity.ipaddress=this.user.ipaddress,"ADD"==this._flagModal){this.entity.short_code=this.user.short_code;let e=new Date;this.entity.timestamp=r(e).format("YYYY-MM-DD HH:mm:ss"),console.log(this.entity),this._dataService.post("/request/add",this.entity).subscribe(e=>{this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.entity={},this.entity.tax_vat=10,this.entity.number_sample=1,this.entity.is_active=0,this.entity.valid_number=5,this.selectedContact=null,this.selectedCustomer=null,this._fdate=null,this._tdate=null,this._dt1="",this._dt2="",this.isSave=!1,this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}else console.log("Update",this.entity),this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/request/update",this.entity).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}orgValueChange1(e){null!=e&&"Invalid date"!=e&&(this._fdate=e,this._tdate=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1=r(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=r(this._tdate).format("YYYY-MM-DD HH:mm"))}orgValueChange2(e){null!=e&&"Invalid date"!=e&&(this._tdate=e,this._dt1=r(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=r(this._tdate).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdate-this._fdate)/864e5))}_calculateDays(){null!=this._fdate&&(this._tdate=new Date(this._fdate.getTime()+864e5*this.entity.valid_number))}_openModal(e,t){null==t?(this._flagModal="ADD",this.entity={},this.entity.tax_vat=10,this.entity.number_sample=1,this.entity.is_active=0,this.entity.valid_number=7,this.selectedContact=null,this.selectedCustomer=null,this._fdate=null,this._tdate=null,this._dt1="",this._dt2=""):(this._flagModal="UPDATE",this.loadDetail(t.id)),this.modalService.open(e,{size:"lg",centered:!0})}_routeDetail(e){this._route.navigate(["/request/detail/"+e.id])}_exportAll(e){console.log(e),this.isExportLoading=!0,this._dataService.post("/request/exportRequest",e).subscribe(e=>{if(e.data.length>0){let t=[];for(let n of e.data)t.push({"Request No":n.request_no,"Customer Name":n.company_name_l,Contact:n.contact_name,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(n.returned_date)).format("DD/MM/YYYY"),"Samples Ordered":n.ordered_samples+"/"+(null==n.number_sample?"0":n.number_sample),"VAT (%)":null==n.tax_vat?"":n.tax_vat,Total:0==n.ordered_samples?"0":this._numberFormat.localeString(parseFloat(n.total)),Status:n.is_active?"Confirmed":"Cancelled","Created By":n.created_by,"Promotion Per Group":this._numberFormat.localeString(parseFloat(n.promotion_per_group)),"Promotion Per Order":this._numberFormat.localeString(parseFloat(n.promotion_per_order)),"Total before tax":this._numberFormat.localeString(parseFloat(n.before_tax)),"Total after tax":this._numberFormat.localeString(parseFloat(n.after_tax)).substr(0,this._numberFormat.localeString(parseFloat(n.after_tax)).lastIndexOf("."))});this._excelService.exportAsExcelFile(t,"Requests-"+r(new Date).format("YYYY-MM-DD")),this.isExportLoading=!1,this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.data.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.data.length+" "+f.a.record,"OK")}else this.isExportLoading=!1,this._notifyService.showWarning("en"==this.user.lang?f.a.MSG_EXPORT_EN+" 0 "+f.a.record_en:f.a.MSG_EXPORT+" 0 "+f.a.record,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)},()=>{this.isExportLoading=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_EXPORTNO_EN:f.a.MSG_EXPORT_NO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}openCopyModal(e,t,n){0==n?(this._titleCopy=t.request_no,this._idCopy=t.id):(this._titleCopy="en"==this.user.lang?"total of requests: ":"t\u1ed5ng s\u1ed1 y\xeau c\u1ea7u: "+t.length,this._idCopy=t),this.modalService.open(e,{size:"md",centered:!0})}_copyRequest(e){let t={};t.id=this._idCopy,t.customer_id=e,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/request/copy",t).subscribe(e=>{this._idCopy="",this._titleCopy="",this.selectedCustomer1=null,this.modalService.dismissAll(),this._notifyService.showSuccess("en"==this.user.lang?f.a.copy_msgok_en:f.a.copy_msgok,"OK"),this.socket.emit("refresh",{})})}_copyAll(e,t){console.log(e,t);let n={};n.ids=e,n.customer_id=t,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,this._dataService.post("/request/copyAll",n).subscribe(e=>{this._idCopy="",this._titleCopy="",this.selectedCustomer1=null,this.modalService.dismissAll(),this._notifyService.showSuccess("en"==this.user.lang?f.a.copy_msgok_en:f.a.copy_msgok,"OK"),this.exportList=[],this.socket.emit("refresh",{})})}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(y.a),b.bc(v.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(Re.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-management"]],decls:112,vars:99,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[2,"width","130px"],[4,"ngIf"],["content",""],["contentRelationship",""],["contentCopy",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-copy"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","13",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-eye"],["class","btn btn-sm btn-primary mr-sm-1",3,"disabled","ngbTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"disabled","ngbTooltip","click"],[3,"ngbTooltip"],[1,"text-right"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-pencil"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"form","theme-form",3,"ngSubmit"],["f0","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","number_sample"],["type","number","id","number_sample","name","number_sample","required","","autocomplete","off","min","0",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["type","hidden","name","ID",1,"form-control",3,"ngModel","ngModelChange"],["for","tax_vat"],["type","number","id","tax_vat","name","tax_vat","required","","autocomplete","off","min","0",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],[1,"col-md-12"],["for","title_promo_spec"],["type","text","id","title_promo_spec","name","title_promo_spec","autocomplete","off",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],["for","promo_special_en"],["type","number","id","promo_special_en","name","promo_special_en","autocomplete","off","min","0",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],["for","promo_perorder"],["type","number","id","promo_perorder","name","promo_perorder","autocomplete","off","min","0",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["class","mute",4,"ngIf"],["for","received_date"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdate","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",1,"form-control",3,"type","placeholder","ngModel","disabled","min","ngModelChange","change"],["for","permission_write"],["id","permission_write","name","permission_write",1,"form-control",3,"ngModel","ngModelChange"],["for","comment"],["rows","2","id","comment","name","comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",4,"ngIf"],[1,"mute"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary"],["class","modal-title",4,"ngIf"],["class","form-group row",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"col-md-10"],["type","search","aria-label","Search","name","_keywordRel","autocomplete","off",1,"form-control","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"col-md-2"],["type","button",1,"btn","btn-primary","bt-sm",3,"click"],["class","form-inline my-2 my-lg-0",4,"ngIf"],[1,"form-inline","my-2","my-lg-0"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],["colspan","8",2,"text-align","center"],[2,"cursor","pointer",3,"click"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-trash"],["form1","ngForm"],["for","contact_name"],["type","text","id","contact_name","name","contact_name","required","","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","ngModelChange"],["for","contact_code"],["type","text","id","contact_code","name","contact_code","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","phone"],["type","text","id","phone","name","phone","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","email"],["type","text","id","email","name","email","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Descriptiona"],["rows","2","id","Descriptiona","name","Descriptiona",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Description1a"],["rows","2","id","Description1a","name","Description1a",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"checkbox","checkbox-primary"],["id","permission_write","type","checkbox","name","permission_write",3,"ngModel","ngModelChange"],["type","submit","class","btn btn-primary mr-sm-1",3,"disabled",4,"ngIf"],["type","button","class","btn btn-warning mr-sm-1",3,"click",4,"ngIf"],["type","text","autocomplete","off","name","_keyword1",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["name","mypage","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[2,"overflow-x","auto"],["type","submit",1,"btn","btn-primary","mr-sm-1",3,"disabled"],["type","button",1,"btn","btn-warning","mr-sm-1",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","click"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],["form2","ngForm"],["for","link_code"],["id","link_code","name","link_code","rows","2",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","info_company_id"],["name","selectedCompany","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSender","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","button",1,"btn","btn-secondary","mr-sm-1",3,"click"],["type","button","class","btn btn-primary mr-sm-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","mr-sm-1",3,"click"],[1,"form","theme-form"],["for","company_en"],["name","selectedCustomer1","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.bd(10,mn,3,3,"button",8),b.bd(11,pn,4,3,"button",9),b.bd(12,fn,5,6,"button",10),b.bd(13,bn,1,0,"img",11),b.gc(),b.gc(),b.hc(14,"div",12),b.hc(15,"div",13),b.hc(16,"select",14),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(17,"option",15),b.dd(18,"#10"),b.gc(),b.hc(19,"option",16),b.dd(20,"#25"),b.gc(),b.hc(21,"option",17),b.dd(22,"#50"),b.gc(),b.hc(23,"option",18),b.dd(24,"#100"),b.gc(),b.gc(),b.hc(25,"select",19),b.rc("ngModelChange",function(e){return t.filter_status=e})("change",function(){return t.loadData()}),b.hc(26,"option",20),b.dd(27),b.wc(28,"translate"),b.gc(),b.hc(29,"option",21),b.dd(30),b.wc(31,"translate"),b.gc(),b.hc(32,"option",22),b.dd(33),b.wc(34,"translate"),b.gc(),b.hc(35,"option",23),b.dd(36),b.wc(37,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(38,"div",24),b.hc(39,"div",25),b.hc(40,"div",26),b.hc(41,"div",27),b.hc(42,"pagination",28),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(43,"div",29),b.hc(44,"a",30),b.dd(45),b.wc(46,"translate"),b.wc(47,"translate"),b.wc(48,"translate"),b.wc(49,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(50,"div",25),b.hc(51,"div",31),b.hc(52,"table",32),b.hc(53,"thead",33),b.hc(54,"tr"),b.hc(55,"th",34),b.dd(56,"#"),b.gc(),b.hc(57,"th",35),b.hc(58,"input",36),b.rc("change",function(e){return t.selectAll(e)}),b.gc(),b.gc(),b.hc(59,"th",37),b.dd(60),b.wc(61,"translate"),b.gc(),b.hc(62,"th",35),b.dd(63),b.wc(64,"translate"),b.gc(),b.hc(65,"th",35),b.dd(66),b.wc(67,"translate"),b.gc(),b.hc(68,"th",35),b.dd(69),b.wc(70,"translate"),b.gc(),b.hc(71,"th",35),b.dd(72),b.wc(73,"translate"),b.gc(),b.hc(74,"th",35),b.dd(75),b.wc(76,"translate"),b.gc(),b.hc(77,"th",35),b.dd(78),b.wc(79,"translate"),b.gc(),b.hc(80,"th",35),b.dd(81),b.wc(82,"translate"),b.gc(),b.hc(83,"th",35),b.dd(84),b.wc(85,"translate"),b.gc(),b.hc(86,"th",35),b.dd(87),b.wc(88,"translate"),b.gc(),b.hc(89,"th",35),b.dd(90),b.wc(91,"translate"),b.gc(),b.gc(),b.gc(),b.hc(92,"tbody"),b.bd(93,yn,6,3,"ng-container",38),b.bd(94,Dn,2,1,"ng-container",38),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(95,"div",25),b.hc(96,"div",26),b.hc(97,"div",27),b.hc(98,"pagination",28),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(99,"div",29),b.hc(100,"a",30),b.dd(101),b.wc(102,"translate"),b.wc(103,"translate"),b.wc(104,"translate"),b.wc(105,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(106,kn,113,109,"ng-template",null,39,b.cd),b.bd(108,jn,12,7,"ng-template",null,40,b.cd),b.bd(110,Wn,18,18,"ng-template",null,41,b.cd)),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,51,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","report")),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")&&t.exportList.length>0),b.Nb(1),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(9),b.Dc("ngModel",t.filter_status),b.Nb(2),b.fd(" ",b.xc(28,53,"All")," "),b.Nb(3),b.fd(" ",b.xc(31,55,"Pending")," "),b.Nb(3),b.fd(" ",b.xc(34,57,"Confirmed")," "),b.Nb(3),b.fd(" ",b.xc(37,59,"Cancel")," "),b.Nb(6),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(46,61,"Total of records"),": ",t.totalRow," - ",b.xc(47,63,"Page")," ",t.pageIndex," ",b.xc(48,65,"of")," ",t.totalPage," ",b.xc(49,67,"page"),""),b.Nb(13),b.Dc("disabled",0==t._requestslist.length)("checked",t.exportList.length==t._requestslist.length),b.Nb(2),b.ed(b.xc(61,69,"Actions")),b.Nb(3),b.fd(" ",b.xc(64,71,"Request code")," "),b.Nb(3),b.fd(" ",b.xc(67,73,"Order code")," "),b.Nb(3),b.fd(" ",b.xc(70,75,"Received date")," "),b.Nb(3),b.fd(" ",b.xc(73,77,"Customer")," "),b.Nb(3),b.fd(" ",b.xc(76,79,"Report company")," "),b.Nb(3),b.fd(" ",b.xc(79,81,"Total")," "),b.Nb(3),b.ed(b.xc(82,83,"Contact")),b.Nb(3),b.ed(b.xc(85,85,"Returned date")),b.Nb(3),b.ed(b.xc(88,87,"Status")),b.Nb(3),b.ed(b.xc(91,89,"Timestamp")),b.Nb(3),b.Dc("ngIf",0==t._requestslist.length),b.Nb(1),b.Dc("ngIf",t._requestslist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(102,91,"Total of records"),": ",t.totalRow," - ",b.xc(103,93,"Page")," ",t.pageIndex," ",b.xc(104,95,"of")," ",t.totalPage," ",b.xc(105,97,"page"),""))},directives:[a.c,a.n,a.q,c.q,a.x,a.r,a.A,M.a,c.p,w.N,a.z,a.o,a.p,a.s,a.w,c.o,C.a,D.b,D.a,a.t,a.b],pipes:[T.c,c.f,c.g],styles:[""]}),e})();function Xn(e,t){if(1&e&&(b.hc(0,"option",44),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function Zn(e,t){if(1&e&&(b.hc(0,"option",44),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.csp_name_e:e.csp_name_l," ")}}function ec(e,t){if(1&e){const e=b.ic();b.hc(0,"button",45),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t._preparationlist)}),b.cc(1,"i",46),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function tc(e,t){1&e&&b.cc(0,"img",47)}function nc(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",48),b.hc(3,"h3",49),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function cc(e,t){1&e&&b.cc(0,"i",63)}function ac(e,t){1&e&&b.cc(0,"i",64)}function ic(e,t){if(1&e){const e=b.ic();b.hc(0,"button",60),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return t.flag=!t.flag}),b.wc(1,"translate"),b.bd(2,cc,1,0,"i",61),b.bd(3,ac,1,0,"i",62),b.gc()}if(2&e){const e=b.vc().$implicit,t=b.vc(2);b.Dc("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!t._authenService.hasPermission("REQ-PRE","update"))("title",b.xc(1,5,e.flag?"Edit":"Cancel")),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag)}}function oc(e,t){if(1&e){const e=b.ic();b.hc(0,"button",65),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._updateStatus(t,0)}),b.wc(1,"translate"),b.cc(2,"i",66),b.gc()}2&e&&b.Dc("title",b.xc(1,1,"Save"))}function rc(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.note_lab,"")}}function lc(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",67),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.note_lab=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","note_lab",t+1,""),b.Dc("ngModel",n.note_lab)}}function sc(e,t){1&e&&(b.hc(0,"span",68),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"None")))}function dc(e,t){1&e&&(b.hc(0,"span",69),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Preparation")))}function hc(e,t){1&e&&(b.hc(0,"span",70),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Technical validation")))}function gc(e,t){1&e&&(b.hc(0,"span",71),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Validation")))}function uc(e,t){1&e&&(b.hc(0,"span",72),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Done")))}function _c(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",51),b.dd(2),b.gc(),b.hc(3,"td"),b.bd(4,ic,4,7,"button",52),b.bd(5,oc,3,3,"button",53),b.gc(),b.hc(6,"td"),b.dd(7),b.gc(),b.hc(8,"td"),b.dd(9),b.gc(),b.hc(10,"td"),b.dd(11),b.gc(),b.hc(12,"td"),b.dd(13),b.gc(),b.hc(14,"td"),b.dd(15),b.gc(),b.hc(16,"td"),b.dd(17),b.gc(),b.hc(18,"td"),b.dd(19),b.gc(),b.hc(20,"td"),b.dd(21),b.gc(),b.hc(22,"td"),b.bd(23,rc,2,1,"ng-container",43),b.bd(24,lc,2,2,"ng-container",43),b.gc(),b.hc(25,"td",54),b.rc("click",function(){b.Uc(e);const n=t.$implicit,c=b.vc(2);return 1!=n.status&&3!=n.status&&4!=n.status||c._authenService.hasPermission("REQ-PRE","update")?c._updateStatus(n,1):null}),b.bd(26,sc,3,3,"span",55),b.bd(27,dc,3,3,"span",56),b.bd(28,hc,3,3,"span",57),b.bd(29,gc,3,3,"span",58),b.bd(30,uc,3,3,"span",59),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,c=b.vc(2);b.Nb(2),b.fd(" ",n+1+c.pageSize*(c.pageIndex-1)," "),b.Nb(2),b.Dc("ngIf",0==e.status),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.fd(" ",e.request_no," "),b.Nb(2),b.ed(e.inner_code),b.Nb(2),b.fd(" ",e.code," "),b.Nb(2),b.fd(" ","en"==c.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ","en"==c.user.lang?e.para_name_e:e.para_name_l," "),b.Nb(2),b.fd(" ","en"==c.user.lang?e.category_name_e:e.category_name_l," "),b.Nb(2),b.ed(e.tat),b.Nb(2),b.ed(e.note),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",0==e.status),b.Nb(1),b.Dc("ngIf",1==e.status),b.Nb(1),b.Dc("ngIf",2==e.status),b.Nb(1),b.Dc("ngIf",3==e.status),b.Nb(1),b.Dc("ngIf",4==e.status)}}function mc(e,t){if(1&e&&(b.fc(0),b.bd(1,_c,31,18,"tr",50),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._preparationlist)}}const pc=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let fc=(()=>{class e{constructor(e,t,n,c,a,i,o,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=c,this._uploadService=a,this._excelService=i,this.formatPipe=o,this.modalService=r,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=9,this.entity={},!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyCSP(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,console.log(e),this._dataService.post("/lab/getlistlabspre",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,tat:n.tat,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l,csp_name_e:n.csp_name_e,csp_name_l:n.csp_name_l,receiver_company:n.receiver_company,receiver_contact:n.receiver_contact,biller_company:n.biller_company,biller_contact:n.biller_contact,price:n.price,quantity:n.quantity,state_of_report:n.state_of_report});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyCSP(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",e).subscribe(e=>{this._csplist=e.data})}_exportAll(e){console.log("Origin",e);let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?f.a.s_done_en:f.a.s_done),3==n.status&&(e="en"==this.user.lang?f.a.s_validate_en:f.a.s_validate),2==n.status&&(e="en"==this.user.lang?f.a.s_techvalidate_en:f.a.s_techvalidate),1==n.status&&(e="en"==this.user.lang?f.a.s_prepare_en:f.a.s_prepare),0==n.status&&(e="en"==this.user.lang?f.a.s_none_en:f.a.s_none);let c=new Date(n.received_date).getTime()+864e5*n.tat,a="en"==this.user.lang?n.csp_name_e:n.csp_name_l,i=n.company_name_l+(null==n.phone?"":"/Phone: "+n.phone),o="";null!=n.receiver_company&&(o=n.receiver_company.company_name_l+(null==n.receiver_company.address_l?"":"/Address: "+n.receiver_company.address_l));let l="";null!=n.biller_company&&(l=n.biller_company.company_name_l+(null==n.biller_company.tax_code?"":"/Tax code: "+n.biller_company.tax_code)+(null==n.biller_company.address_l?"":"/Address: "+n.biller_company.address_l),null!=n.biller_contact&&(l+=(null==n.biller_contact.email?"":"/Email: "+n.biller_contact.email)+(null==n.biller_contact.phone?"":"/Phone: "+n.biller_contact.phone)));let s="Unknown";0==n.state_of_report&&(s="Draft"),1==n.state_of_report&&(s="Official"),2==n.state_of_report&&(s="Evicted"),3==n.state_of_report&&(s="Printed"),4==n.state_of_report&&(s="Cancel"),t.push({"Request No":n.request_no,"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,Note:null==n.note?"":n.note,"Note to Lab":null==n.note_lab?"":n.note_lab,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(c)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l,CSP:null==a?"":a,"Sample name":n.sample_name,Sender:i,Receiver:o,Biller:l,"Customer code":n.company_code,BD:n.employee_nr,Amount:this.formatPipe.localeString(n.price*n.quantity),"State of report":s})}this._excelService.exportAsExcelFile(t,"Preparation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.length+" "+f.a.record,"OK")}orgValueChange1(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e,t){console.log(e),1==t?(e.status=t,p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_switch_en:f.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData()}):this.loadData()})):(console.log(e),this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData()}))}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(y.a),b.bc(v.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(Re.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-preparelab"]],hostBindings:function(e,t){1&e&&b.rc("click",function(e){return t.ngOnInit(e)},!1,b.Sc)},decls:121,vars:120,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","12",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],[3,"ngClass","disabled","title","click",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.hc(12,"select",10),b.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),b.hc(13,"option",11),b.dd(14),b.wc(15,"translate"),b.wc(16,"translate"),b.gc(),b.bd(17,Xn,2,2,"option",12),b.gc(),b.hc(18,"select",13),b.rc("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),b.hc(19,"option",11),b.dd(20),b.wc(21,"translate"),b.gc(),b.bd(22,Zn,2,2,"option",12),b.gc(),b.hc(23,"select",14),b.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),b.hc(24,"option",15),b.dd(25),b.wc(26,"translate"),b.gc(),b.hc(27,"option",16),b.dd(28),b.wc(29,"translate"),b.gc(),b.hc(30,"option",17),b.dd(31),b.wc(32,"translate"),b.gc(),b.hc(33,"option",18),b.dd(34),b.wc(35,"translate"),b.gc(),b.hc(36,"option",19),b.dd(37),b.wc(38,"translate"),b.gc(),b.hc(39,"option",20),b.dd(40),b.wc(41,"translate"),b.gc(),b.gc(),b.bd(42,ec,4,3,"button",21),b.bd(43,tc,1,0,"img",22),b.gc(),b.gc(),b.hc(44,"div",23),b.hc(45,"div",24),b.hc(46,"select",25),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(47,"option",26),b.dd(48,"#10"),b.gc(),b.hc(49,"option",27),b.dd(50,"#25"),b.gc(),b.hc(51,"option",28),b.dd(52,"#50"),b.gc(),b.hc(53,"option",29),b.dd(54,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(55,"div",30),b.hc(56,"div",31),b.hc(57,"div",32),b.hc(58,"div",33),b.hc(59,"pagination",34),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(60,"div",35),b.hc(61,"a",36),b.dd(62),b.wc(63,"translate"),b.wc(64,"translate"),b.wc(65,"translate"),b.wc(66,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(67,"div",31),b.hc(68,"div",37),b.hc(69,"table",38),b.hc(70,"thead",39),b.hc(71,"tr"),b.hc(72,"th",40),b.dd(73,"#"),b.gc(),b.hc(74,"th",41),b.dd(75),b.wc(76,"translate"),b.gc(),b.hc(77,"th",42),b.dd(78),b.wc(79,"translate"),b.gc(),b.hc(80,"th",42),b.dd(81),b.wc(82,"translate"),b.gc(),b.hc(83,"th",42),b.dd(84),b.wc(85,"translate"),b.gc(),b.hc(86,"th",42),b.dd(87),b.wc(88,"translate"),b.gc(),b.hc(89,"th",42),b.dd(90),b.wc(91,"translate"),b.gc(),b.hc(92,"th",42),b.dd(93),b.wc(94,"translate"),b.gc(),b.hc(95,"th",42),b.dd(96),b.wc(97,"translate"),b.gc(),b.hc(98,"th",42),b.dd(99),b.wc(100,"translate"),b.gc(),b.hc(101,"th",42),b.dd(102),b.wc(103,"translate"),b.gc(),b.hc(104,"th",42),b.dd(105),b.wc(106,"translate"),b.gc(),b.gc(),b.gc(),b.hc(107,"tbody"),b.bd(108,nc,6,3,"ng-container",43),b.bd(109,mc,2,1,"ng-container",43),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(110,"div",31),b.hc(111,"div",32),b.hc(112,"div",33),b.hc(113,"pagination",34),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(114,"div",35),b.hc(115,"a",36),b.dd(116),b.wc(117,"translate"),b.wc(118,"translate"),b.wc(119,"translate"),b.wc(120,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,60,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(118,pc)),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(119,pc)),b.Nb(1),b.Dc("ngModel",t.department_id),b.Nb(2),b.gd(" ",b.xc(15,62,"All")," ",b.xc(16,64,"Department")," "),b.Nb(3),b.Dc("ngForOf",t._deptlist),b.Nb(1),b.Dc("ngModel",t.testcsp_id),b.Nb(2),b.fd("",b.xc(21,66,"All")," CSP"),b.Nb(2),b.Dc("ngForOf",t._csplist),b.Nb(1),b.Dc("ngModel",t._status),b.Nb(2),b.fd(" ",b.xc(26,68,"All")," "),b.Nb(3),b.fd(" ",b.xc(29,70,"None")," "),b.Nb(3),b.fd(" ",b.xc(32,72,"Preparation")," "),b.Nb(3),b.fd(" ",b.xc(35,74,"Technical validation")," "),b.Nb(3),b.fd(" ",b.xc(38,76,"Validation")," "),b.Nb(3),b.fd(" ",b.xc(41,78,"Done")," "),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-PRE","report")),b.Nb(1),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(63,80,"Total of records"),": ",t.totalRow," - ",b.xc(64,82,"Page")," ",t.pageIndex," ",b.xc(65,84,"of")," ",t.totalPage," ",b.xc(66,86,"page"),""),b.Nb(13),b.ed(b.xc(76,88,"Actions")),b.Nb(3),b.fd(" ",b.xc(79,90,"Request code")," "),b.Nb(3),b.fd(" ",b.xc(82,92,"Inner code")," "),b.Nb(3),b.fd(" ",b.xc(85,94,"Code")," "),b.Nb(3),b.ed(b.xc(88,96,"Internal testing")),b.Nb(3),b.ed(b.xc(91,98,"Parameter name")),b.Nb(3),b.ed(b.xc(94,100,"Sample matrix")),b.Nb(3),b.ed(b.xc(97,102,"Priority")),b.Nb(3),b.ed(b.xc(100,104,"Note")),b.Nb(3),b.ed(b.xc(103,106,"Note lab")),b.Nb(3),b.ed(b.xc(106,108,"Status")),b.Nb(3),b.Dc("ngIf",0==t._preparationlist.length),b.Nb(1),b.Dc("ngIf",t._preparationlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(117,110,"Total of records"),": ",t.totalRow," - ",b.xc(118,112,"Page")," ",t.pageIndex," ",b.xc(119,114,"of")," ",t.totalPage," ",b.xc(120,116,"page"),""))},directives:[a.c,a.n,a.q,D.b,D.a,a.x,a.r,a.A,c.p,c.q,M.a,c.o],pipes:[T.c],styles:[""]}),e})();const bc=["tagInput"];function yc(e,t){if(1&e){const e=b.ic();b.hc(0,"button",37),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(88);return t._openModal(n,null)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Add new request")," "))}function vc(e,t){if(1&e){const e=b.ic();b.hc(0,"button",38),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t.exportList)}),b.cc(1,"i",39),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function xc(e,t){1&e&&b.cc(0,"img",40)}function Sc(e,t){if(1&e){const e=b.ic();b.hc(0,"div",41),b.hc(1,"div",42),b.hc(2,"pagination",43),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().pageIndex=t})("pageChanged",function(t){return b.Uc(e),b.vc().pageChanged(t)}),b.gc(),b.gc(),b.hc(3,"div",44),b.hc(4,"a",45),b.dd(5),b.wc(6,"translate"),b.wc(7,"translate"),b.wc(8,"translate"),b.wc(9,"translate"),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(2),b.Dc("boundaryLinks",!0)("totalItems",e.totalRow)("ngModel",e.pageIndex)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize),b.Nb(3),b.id("",b.xc(6,12,"Total of records"),": ",e.totalRow," - ",b.xc(7,14,"Page")," ",e.pageIndex," ",b.xc(8,16,"of")," ",e.totalPage," ",b.xc(9,18,"page"),"")}}function Nc(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",46),b.hc(3,"h4"),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.ed(b.xc(5,1,"No records now!!!")))}function wc(e,t){1&e&&(b.hc(0,"span"),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Cash")))}function Dc(e,t){1&e&&(b.hc(0,"span"),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Transfer bank")))}function Mc(e,t){1&e&&(b.hc(0,"span"),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Visa/Master")))}function Cc(e,t){1&e&&(b.hc(0,"span"),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Cheque")))}function Tc(e,t){1&e&&(b.hc(0,"span",59),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Unpaid")))}function Ic(e,t){1&e&&(b.hc(0,"span",60),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Delivery-Unpaid")))}function kc(e,t){1&e&&(b.hc(0,"span",61),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Delivery-Paid")))}function Pc(e,t){1&e&&(b.hc(0,"span",62),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Cancel-Unpaid")))}function Rc(e,t){1&e&&(b.hc(0,"span",63),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Cancel-Refund")))}function Ec(e,t){if(1&e&&(b.hc(0,"span",69),b.dd(1),b.gc()),2&e){const e=t.$implicit;b.Nb(1),b.ed(e)}}function Ac(e,t){if(1&e&&(b.hc(0,"tr"),b.hc(1,"td",66),b.dd(2),b.gc(),b.hc(3,"td",66),b.dd(4),b.gc(),b.hc(5,"td",66),b.dd(6),b.gc(),b.hc(7,"td",66),b.dd(8),b.gc(),b.hc(9,"td",66),b.dd(10),b.gc(),b.hc(11,"td",66),b.bd(12,Ec,2,1,"span",67),b.gc(),b.hc(13,"td",66),b.dd(14),b.gc(),b.hc(15,"td",68),b.dd(16),b.wc(17,"number"),b.gc(),b.hc(18,"td",68),b.dd(19),b.wc(20,"number"),b.gc(),b.gc()),2&e){const e=t.$implicit,n=t.index,c=b.vc(4);b.Nb(2),b.ed(n+1),b.Nb(2),b.fd(" ","en"==c.user.lang?e.fabric_name_e:e.fabric_name_l," "),b.Nb(2),b.fd(" ",e.color_name_l," "),b.Nb(2),b.ed(e.code),b.Nb(2),b.fd(" ",e.quantity_info," "),b.Nb(2),b.Dc("ngForOf",e.tags),b.Nb(2),b.fd(" ",e.total," "),b.Nb(2),b.fd(" ",b.xc(17,9,e.price)," "),b.Nb(3),b.fd(" ",b.xc(20,11,e.amount)," ")}}function Oc(e,t){if(1&e&&(b.hc(0,"tr"),b.hc(1,"td",64),b.hc(2,"strong"),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"div",28),b.hc(6,"table",65),b.hc(7,"thead"),b.hc(8,"th",66),b.dd(9,"#"),b.gc(),b.hc(10,"th",66),b.dd(11),b.wc(12,"translate"),b.gc(),b.hc(13,"th",66),b.dd(14),b.wc(15,"translate"),b.gc(),b.hc(16,"th",66),b.dd(17),b.wc(18,"translate"),b.gc(),b.hc(19,"th",66),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"th",66),b.dd(23),b.wc(24,"translate"),b.gc(),b.hc(25,"th",66),b.dd(26),b.wc(27,"translate"),b.gc(),b.hc(28,"th",66),b.dd(29),b.wc(30,"translate"),b.gc(),b.hc(31,"th",66),b.dd(32),b.wc(33,"translate"),b.gc(),b.gc(),b.hc(34,"tbody"),b.bd(35,Ac,21,13,"tr",47),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()),2&e){const e=b.vc().$implicit;b.Nb(3),b.ed(b.xc(4,10,"Items Information")),b.Nb(8),b.fd(" ",b.xc(12,12,"Type of fabric")," "),b.Nb(3),b.fd(" ",b.xc(15,14,"Color name")," "),b.Nb(3),b.fd(" ",b.xc(18,16,"Mix-Fabric code")," "),b.Nb(3),b.fd(" ",b.xc(21,18,"Quantity")," "),b.Nb(3),b.fd(" ",b.xc(24,20,"Description")," "),b.Nb(3),b.fd(" ",b.xc(27,22,"Total")," (kg) "),b.Nb(3),b.fd(" ",b.xc(30,24,"Price")," "),b.Nb(3),b.fd(" ",b.xc(33,26,"Amount")," "),b.Nb(3),b.Dc("ngForOf",e.orders)}}function Uc(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"tr"),b.hc(2,"td"),b.dd(3),b.gc(),b.hc(4,"td"),b.hc(5,"input",48),b.rc("change",function(n){b.Uc(e);const c=t.$implicit;return b.vc(2).selectItem(n,c.id)}),b.gc(),b.gc(),b.hc(6,"td"),b.dd(7),b.wc(8,"date"),b.gc(),b.hc(9,"td",49),b.rc("click",function(){const e=t.$implicit;return e.expanded=!e.expanded}),b.dd(10),b.gc(),b.hc(11,"td"),b.dd(12),b.gc(),b.hc(13,"td"),b.dd(14),b.gc(),b.hc(15,"td"),b.dd(16),b.wc(17,"number"),b.gc(),b.hc(18,"td"),b.bd(19,wc,3,3,"span",35),b.bd(20,Dc,3,3,"span",35),b.bd(21,Mc,3,3,"span",35),b.bd(22,Cc,3,3,"span",35),b.gc(),b.hc(23,"td"),b.bd(24,Tc,3,3,"span",50),b.bd(25,Ic,3,3,"span",51),b.bd(26,kc,3,3,"span",52),b.bd(27,Pc,3,3,"span",53),b.bd(28,Rc,3,3,"span",54),b.gc(),b.hc(29,"td"),b.dd(30),b.gc(),b.hc(31,"td"),b.hc(32,"button",55),b.rc("click",function(){b.Uc(e);const n=t.$implicit,c=b.vc(2),a=b.Rc(88);return c._openModal(a,n)}),b.wc(33,"translate"),b.cc(34,"i",56),b.gc(),b.hc(35,"button",57),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(2).printQuotationAsPDF(n)}),b.wc(36,"translate"),b.cc(37,"i",58),b.gc(),b.gc(),b.gc(),b.bd(38,Oc,36,28,"tr",35),b.ec()}if(2&e){const e=t.$implicit,n=t.index,c=b.vc(2);b.Nb(3),b.ed(n+1+c.pageSize*(c.pageIndex-1)),b.Nb(2),b.Fc("name","ckU1",n+1,""),b.Dc("checked",c.exportList.includes(e.id)),b.Nb(2),b.ed(b.yc(8,21,e.issue_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.fd(" ",e.code," "),b.Nb(2),b.fd(" ","en"==c.user.lang?e.company_name_e:e.company_name_l," "),b.Nb(2),b.ed(e.phone),b.Nb(2),b.ed(b.xc(17,24,e.total)),b.Nb(3),b.Dc("ngIf",0==e.payment),b.Nb(1),b.Dc("ngIf",1==e.payment),b.Nb(1),b.Dc("ngIf",2==e.payment),b.Nb(1),b.Dc("ngIf",3==e.payment),b.Nb(2),b.Dc("ngIf",0==e.is_active),b.Nb(1),b.Dc("ngIf",1==e.is_active),b.Nb(1),b.Dc("ngIf",2==e.is_active),b.Nb(1),b.Dc("ngIf",3==e.is_active),b.Nb(1),b.Dc("ngIf",4==e.is_active),b.Nb(2),b.ed(e.username),b.Nb(2),b.Dc("ngbTooltip",b.xc(33,26,"Edit")),b.Nb(3),b.Dc("ngbTooltip",b.xc(36,28,"Print")),b.Nb(3),b.Dc("ngIf",e.expanded)}}function Yc(e,t){if(1&e&&(b.fc(0),b.bd(1,Uc,39,30,"ng-container",47),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._categories)}}function Fc(e,t){if(1&e){const e=b.ic();b.hc(0,"div",41),b.hc(1,"div",42),b.hc(2,"pagination",43),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().pageIndex=t})("pageChanged",function(t){return b.Uc(e),b.vc().pageChanged(t)}),b.gc(),b.gc(),b.hc(3,"div",44),b.hc(4,"a",45),b.dd(5),b.wc(6,"translate"),b.wc(7,"translate"),b.wc(8,"translate"),b.wc(9,"translate"),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(2),b.Dc("boundaryLinks",!0)("totalItems",e.totalRow)("ngModel",e.pageIndex)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize),b.Nb(3),b.id("",b.xc(6,12,"Total of records"),": ",e.totalRow," - ",b.xc(7,14,"Page")," ",e.pageIndex," ",b.xc(8,16,"of")," ",e.totalPage," ",b.xc(9,18,"page"),"")}}function Lc(e,t){if(1&e){const e=b.ic();b.hc(0,"ng-select",100),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entity.customer_id=t})("change",function(){b.Uc(e);const t=b.vc(2);return t.loadLabel(t.entity.customer_id)}),b.wc(1,"translate"),b.wc(2,"translate"),b.gc()}if(2&e){const e=b.vc(2);b.Dc("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("bindLabel","en"==e.user.lang?"company_name_e":"company_name_l")("ngModel",e.entity.customer_id)("placeholder",b.xc(1,8,"Please choose"))("notFoundText",b.xc(2,10,"Not found item"))}}const qc=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function zc(e,t){if(1&e){const e=b.ic();b.hc(0,"input",101),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2)._fdate=t})("bsValueChange",function(t){return b.Uc(e),b.vc(2).orgValueChange(t)}),b.wc(1,"translate"),b.gc()}if(2&e){const e=b.vc(2);b.Dc("placeholder",b.xc(1,3,"Issue of date"))("ngModel",e._fdate)("bsConfig",b.Hc(5,qc))}}function Gc(e,t){if(1&e){const e=b.ic();b.hc(0,"input",102),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2)._dt1=t}),b.gc()}if(2&e){const e=b.vc(2);b.Dc("ngModel",e._dt1)}}function Hc(e,t){if(1&e){const e=b.ic();b.hc(0,"div",77),b.hc(1,"div",84),b.hc(2,"label",103),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"select",104),b.rc("change",function(){b.Uc(e);const t=b.vc(2);return 2!=t.entity.is_active?null:t._confirmFinalOrder()})("ngModelChange",function(t){return b.Uc(e),b.vc(2).entity.is_active=t}),b.hc(6,"option",20),b.dd(7),b.wc(8,"translate"),b.gc(),b.hc(9,"option",21),b.dd(10),b.wc(11,"translate"),b.gc(),b.hc(12,"option",22),b.dd(13),b.wc(14,"translate"),b.gc(),b.hc(15,"option",23),b.dd(16),b.wc(17,"translate"),b.gc(),b.hc(18,"option",24),b.dd(19),b.wc(20,"translate"),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc(2);b.Nb(3),b.ed(b.xc(4,8,"Status")),b.Nb(2),b.Dc("disabled",2==e.entity.is_active)("ngModel",e.entity.is_active),b.Nb(2),b.ed(b.xc(8,10,"Unpaid")),b.Nb(3),b.ed(b.xc(11,12,"Delivery-Unpaid")),b.Nb(3),b.ed(b.xc(14,14,"Delivery-Paid")),b.Nb(3),b.ed(b.xc(17,16,"Cancel-Unpaid")),b.Nb(3),b.ed(b.xc(20,18,"Cancel-Refund"))}}function Vc(e,t){if(1&e){const e=b.ic();b.hc(0,"div",79),b.hc(1,"label",105),b.dd(2),b.wc(3,"translate"),b.gc(),b.hc(4,"ng-select",106),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectId=t})("change",function(){b.Uc(e);const t=b.vc(2);return t.addItem(t.selectId)}),b.wc(5,"translate"),b.wc(6,"translate"),b.gc(),b.gc()}if(2&e){const e=b.vc(2);b.Nb(2),b.ed(b.xc(3,8,"Items")),b.Nb(2),b.Dc("items",e._fabrics)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectId)("placeholder",b.xc(5,10,"Please choose"))("notFoundText",b.xc(6,12,"Not found item"))}}function Bc(e,t){1&e&&(b.hc(0,"th",66),b.cc(1,"i",107),b.gc())}function Qc(e,t){if(1&e){const e=b.ic();b.hc(0,"td",66),b.hc(1,"a",114),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2).removeItem(t.mixfabric_id)}),b.cc(2,"i",107),b.gc(),b.gc()}}function $c(e,t){if(1&e){const e=b.ic();b.hc(0,"input",115),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.quantity_info=t})("change",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2).updateItem(t)}),b.gc()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Fc("id","ck",t+1,""),b.Fc("name","ck",t+1,""),b.Dc("ngModel",n.quantity_info)}}function Kc(e,t){if(1&e&&(b.hc(0,"span"),b.dd(1),b.gc()),2&e){const e=b.vc().$implicit;b.Nb(1),b.ed(e.quantity_info)}}function jc(e,t){if(1&e){const e=b.ic();b.hc(0,"input",116),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.tag=t})("keyup.enter",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._addTag(t)})("change",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._addTag(t)}),b.gc()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Fc("id","tag",t+1,""),b.Fc("name","tag",t+1,""),b.Dc("ngModel",n.tag)}}function Wc(e,t){if(1&e){const e=b.ic();b.hc(0,"span",117),b.rc("click",function(){b.Uc(e);const n=t.$implicit,c=b.vc().$implicit,a=b.vc(2);return 0==a.entity.is_active?a._removeTag(c,n):null}),b.dd(1),b.gc()}if(2&e){const e=t.$implicit;b.Nb(1),b.ed(e)}}function Jc(e,t){if(1&e){const e=b.ic();b.hc(0,"input",118),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.price=t})("change",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2).updateItem(t)}),b.gc()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Fc("id","p",t+1,""),b.Fc("name","p",t+1,""),b.Dc("ngModel",n.price)}}function Xc(e,t){if(1&e&&(b.hc(0,"span"),b.dd(1),b.wc(2,"number"),b.gc()),2&e){const e=b.vc().$implicit;b.Nb(1),b.ed(b.xc(2,1,e.price))}}function Zc(e,t){if(1&e&&(b.hc(0,"tr"),b.bd(1,Qc,3,0,"td",96),b.hc(2,"td",66),b.dd(3),b.gc(),b.hc(4,"td",66),b.dd(5),b.gc(),b.hc(6,"td",66),b.dd(7),b.gc(),b.hc(8,"td",66),b.dd(9),b.gc(),b.hc(10,"td",66),b.bd(11,$c,1,3,"input",108),b.bd(12,Kc,2,1,"span",35),b.gc(),b.hc(13,"td",66),b.bd(14,jc,1,3,"input",109),b.dd(15," ("),b.hc(16,"span",82),b.dd(17),b.gc(),b.dd(18,") "),b.hc(19,"small",110),b.bd(20,Wc,2,1,"span",111),b.gc(),b.gc(),b.hc(21,"td",112),b.dd(22),b.wc(23,"number"),b.gc(),b.hc(24,"td",68),b.bd(25,Jc,1,3,"input",113),b.bd(26,Xc,3,3,"span",35),b.gc(),b.hc(27,"td",68),b.dd(28),b.wc(29,"number"),b.gc(),b.gc()),2&e){const e=t.$implicit,n=t.index,c=b.vc(2);b.Nb(1),b.Dc("ngIf",0==c.entity.is_active),b.Nb(2),b.ed(n+1),b.Nb(2),b.fd(" ",e.fabric_name," "),b.Nb(2),b.ed(e.color_name_l),b.Nb(2),b.ed(e.code),b.Nb(2),b.Dc("ngIf",0==c.entity.is_active),b.Nb(1),b.Dc("ngIf",0!=c.entity.is_active),b.Nb(2),b.Dc("ngIf",0==c.entity.is_active),b.Nb(3),b.ed(e.count),b.Nb(3),b.Dc("ngForOf",e.tags),b.Nb(2),b.fd(" ",b.xc(23,14,e.total)," "),b.Nb(3),b.Dc("ngIf",0==c.entity.is_active),b.Nb(1),b.Dc("ngIf",0!=c.entity.is_active),b.Nb(2),b.fd(" ",b.xc(29,16,e.amount)," ")}}function ea(e,t){1&e&&(b.fc(0),b.hc(1,"a",119),b.cc(2,"img",120),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing")," "))}function ta(e,t){if(1&e){const e=b.ic();b.hc(0,"button",121),b.rc("click",function(){b.Uc(e);const t=b.vc(2);return t.printQuotationAsPDF(t.entity)}),b.wc(1,"translate"),b.cc(2,"i",58),b.dd(3),b.wc(4,"translate"),b.gc()}2&e&&(b.Dc("ngbTooltip",b.xc(1,2,"Print")),b.Nb(3),b.fd(" ",b.xc(4,4,"Print")," "))}function na(e,t){if(1&e&&(b.hc(0,"button",122),b.dd(1),b.wc(2,"translate"),b.gc()),2&e){b.vc();const e=b.Rc(1);b.Dc("disabled",!e.valid),b.Nb(1),b.fd(" ",b.xc(2,2,"Save")," ")}}function ca(e,t){if(1&e){const e=b.ic();b.hc(0,"form",70,71),b.rc("ngSubmit",function(){return b.Uc(e),b.vc().saveChange()}),b.hc(2,"div",72),b.hc(3,"h4",73),b.dd(4),b.wc(5,"translate"),b.wc(6,"translate"),b.wc(7,"translate"),b.gc(),b.hc(8,"button",74),b.rc("click",function(){return t.$implicit.dismiss("Cross click")}),b.hc(9,"span",75),b.dd(10,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(11,"div",76),b.hc(12,"div",1),b.hc(13,"div",77),b.hc(14,"div",78),b.hc(15,"div",79),b.hc(16,"label",80),b.hc(17,"strong"),b.dd(18),b.wc(19,"translate"),b.gc(),b.gc(),b.gc(),b.hc(20,"div",79),b.hc(21,"label",81),b.dd(22),b.wc(23,"translate"),b.hc(24,"span",82),b.dd(25,"(*)"),b.gc(),b.gc(),b.bd(26,Lc,3,12,"ng-select",83),b.gc(),b.hc(27,"div",77),b.hc(28,"div",84),b.hc(29,"label",85),b.dd(30),b.wc(31,"translate"),b.hc(32,"span",82),b.dd(33,"(*)"),b.gc(),b.gc(),b.bd(34,zc,2,6,"input",86),b.bd(35,Gc,1,1,"input",87),b.gc(),b.gc(),b.hc(36,"div",77),b.hc(37,"div",84),b.hc(38,"label",88),b.dd(39),b.wc(40,"translate"),b.gc(),b.hc(41,"select",89),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.payment=t}),b.hc(42,"option",90),b.dd(43),b.wc(44,"translate"),b.gc(),b.hc(45,"option",20),b.dd(46),b.wc(47,"translate"),b.gc(),b.hc(48,"option",21),b.dd(49),b.wc(50,"translate"),b.gc(),b.hc(51,"option",22),b.dd(52),b.wc(53,"translate"),b.gc(),b.hc(54,"option",23),b.dd(55),b.wc(56,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(57,Hc,21,20,"div",91),b.hc(58,"div",79),b.hc(59,"div",84),b.hc(60,"label",92),b.dd(61),b.wc(62,"translate"),b.gc(),b.dd(63,"\xa0 "),b.hc(64,"span",93),b.hc(65,"strong"),b.dd(66),b.wc(67,"number"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(68,"div",77),b.hc(69,"div",78),b.hc(70,"div",79),b.hc(71,"label",80),b.hc(72,"strong"),b.dd(73),b.wc(74,"translate"),b.gc(),b.gc(),b.gc(),b.bd(75,Vc,7,14,"div",94),b.hc(76,"div",95),b.hc(77,"div",28),b.hc(78,"table",65),b.hc(79,"thead"),b.bd(80,Bc,2,0,"th",96),b.hc(81,"th",66),b.dd(82,"#"),b.gc(),b.hc(83,"th",66),b.dd(84),b.wc(85,"translate"),b.gc(),b.hc(86,"th",66),b.dd(87),b.wc(88,"translate"),b.gc(),b.hc(89,"th",66),b.dd(90),b.wc(91,"translate"),b.gc(),b.hc(92,"th",66),b.dd(93),b.wc(94,"translate"),b.gc(),b.hc(95,"th",66),b.dd(96),b.wc(97,"translate"),b.gc(),b.hc(98,"th",66),b.dd(99),b.wc(100,"translate"),b.gc(),b.hc(101,"th",66),b.dd(102),b.wc(103,"translate"),b.gc(),b.hc(104,"th",66),b.dd(105),b.wc(106,"translate"),b.gc(),b.gc(),b.hc(107,"tbody"),b.bd(108,Zc,30,18,"tr",47),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(109,"div",97),b.bd(110,ea,5,3,"ng-container",35),b.bd(111,ta,5,6,"button",98),b.bd(112,na,3,4,"button",99),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(4),b.gd(" ","ADD"==e._flagModal?b.xc(5,34,"Add new"):b.xc(6,36,"Update")," #",b.xc(7,38,e.entity.code)," "),b.Nb(14),b.ed(b.xc(19,40,"General Information")),b.Nb(4),b.fd("",b.xc(23,42,"Customer")," "),b.Nb(4),b.Dc("ngIf",0==e.entity.is_active),b.Nb(4),b.fd("",b.xc(31,44,"Issue of date")," "),b.Nb(4),b.Dc("ngIf",0==e.entity.is_active),b.Nb(1),b.Dc("ngIf",0!=e.entity.is_active),b.Nb(4),b.ed(b.xc(40,46,"Payment method")),b.Nb(2),b.Dc("ngModel",e.entity.payment)("disabled",0!=e.entity.is_active),b.Nb(2),b.fd(" ",b.xc(44,48,"Please choose")," "),b.Nb(3),b.ed(b.xc(47,50,"Cash")),b.Nb(3),b.ed(b.xc(50,52,"Transfer bank")),b.Nb(3),b.ed(b.xc(53,54,"Visa/Mater")),b.Nb(3),b.ed(b.xc(56,56,"Cheque")),b.Nb(2),b.Dc("ngIf","ADD"!=e._flagModal),b.Nb(4),b.ed(b.xc(62,58,"Total")),b.Nb(5),b.fd("",b.xc(67,60,e.entity.total)," VND"),b.Nb(7),b.ed(b.xc(74,62,"Items Information")),b.Nb(2),b.Dc("ngIf",0==e.entity.is_active),b.Nb(5),b.Dc("ngIf",0==e.entity.is_active),b.Nb(4),b.fd(" ",b.xc(85,64,"Type of fabric")," "),b.Nb(3),b.fd(" ",b.xc(88,66,"Color name")," "),b.Nb(3),b.fd(" ",b.xc(91,68,"Mix-Fabric code")," "),b.Nb(3),b.ed(b.xc(94,70,"Quantity")),b.Nb(3),b.fd(" ",b.xc(97,72,"Description")," "),b.Nb(3),b.fd(" ",b.xc(100,74,"Total")," (kg) "),b.Nb(3),b.ed(b.xc(103,76,"Price")),b.Nb(3),b.ed(b.xc(106,78,"Amount")),b.Nb(3),b.Dc("ngForOf",e._orders),b.Nb(2),b.Dc("ngIf",e.isSave),b.Nb(1),b.Dc("ngIf",null!=e.entity.id),b.Nb(1),b.Dc("ngIf",!e.isSave&&2!=e.entity.is_active)}}g.a.vfs=_.a.pdfMake.vfs;const aa=[{path:"",children:[{path:"list",component:Jn,data:{title:"Request Management",breadcrumb:"Request Management"}},{path:"detail/:id",component:_n,data:{title:"Request detail",breadcrumb:"Request detail"}},{path:"lab-preparation",component:fc,data:{title:"Lab preparation",breadcrumb:"Lab preparation"}},{path:"lab-result",component:ot,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"lab-validation",component:It,data:{title:"Lab validation",breadcrumb:"Lab validation"}},{path:"lab-report-validation",component:ve,data:{title:"Lab Report Validation",breadcrumb:"Lab Report Validation"}},{path:"lab-report-validation/:id",component:ve,data:{title:"Validation"}},{path:"lab-report",component:Pe,data:{title:"Lab report",breadcrumb:"Lab report"}},{path:"lab-results/:id",component:W,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"orders-fabric",component:(()=>{class e{constructor(e,t,n,c,a,i,o,r,l){this._authService=e,this.modalService=t,this._dataService=n,this._route=c,this._notifyService=a,this._uploadService=i,this._excelService=o,this.formatPipe=r,this._utilityServce=l,this.isSave=!1,this.isSaveSub=!1,this.isImport=!1,this._flagModal="ADD",this._flagSubModal="",this._title="",this._subTitle="",this.baseFolder=d.a.BASE_API+"/",this._categories=[],this.exportList=[],this.entity={},this.entitySub={},this.formData=new FormData,this.pageIndex=1,this.pageSize=10,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._customers=[],this._fdate=null,this._dt1=null,this._fabrics=[],this._fabricsCompare=[],this._orders=[],this.selectId=null,this.tags=["html","Angular"],this._numTags=0,!1!==e.checkAccess("FAB-ORDER")&&!1!==e.hasPermission("FAB-ORDER","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",e=>{this.loadData(),this.loadCompany(),this.loadProducts()})}loadData(){let e={};e.page=this.pageIndex,e.limit=this.pageSize,e.filter=this._keyword,this._dataService.post("/order/getall",e).subscribe(e=>{console.log("Test",e),this._categories=e.data;for(let t of this._categories){let e=[];for(let n of t.orders)e.push({amount:n.amount,code:n.code,color_id:n.color_id,color_name_e:n.color_name_e,color_name_l:n.color_name_l,description:n.description,is_active:n.is_active,mixfabric_id:n.mixfabric_id,name_e:n.name_e,name_l:n.name_l,order_id:n.order_id,price:n.price,provider_name_e:n.provider_name_e,provider_name_l:n.provider_name_l,quantity_info:n.quantity_info,total:n.total,type_id:n.type_id,tags:JSON.parse(n.description)});t.orders=e}console.log(this._categories),this.totalRow=e.rowCount,this.totalPage=e.totalPages})}loadProducts(){this._dataService.post("/mix-fabric/getallnp",null).subscribe(e=>{let t=[];for(let n of e.data){let e="Type: "+(0==n.type_id?"Neck":1==n.type_id?"Hand":"Fabric");"en"!=this.user.lang&&(e="Lo\u1ea1i: "+(0==n.type_id?"Bo c\u1ed5":1==n.type_id?"Bo tay":"V\u1ea3i")),t.push({id:n.id,name:n.code+"-"+e+("en"==this.user.lang?"-Quantity (segment/kg):":"-S\u1ed1 l\u01b0\u1ee3ng (c\xe2y/kg):")+n.total_segment_re+"/"+n.total_kg_re})}this._fabrics=t,this._fabricsCompare=e.data})}loadCompany(){let e={};e.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",e).subscribe(e=>{this._customers=e.data})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}selectAll(e){e.target.checked?(this.exportList=[],this._categories.forEach(e=>this.exportList.push(e.id))):this.exportList=[]}selectItem(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(e=>e!==t)}loadLabel(e){let t=this._customers.filter(t=>t.id==e);this._flagSubModal=null==e?"":t[0].code_link}_openModal(e,t){if(this.loadCompany(),this.loadProducts(),null==t)this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.code=null,this.entity.payment=null,this.entity.total=0,this._orders=[],this._fdate=null,this._dt1=null,this.entity.is_active=0,this._flagSubModal="";else{this._flagModal="UPDATE",this._flagSubModal="en"==this.user.lang?t.company_name_e:t.company_name_l,this.entity=t,this._fdate=new Date(t.issue_date),this._dt1=r(new Date(t.issue_date)).format("DD-MM-YYYY HH:mm"),this._orders=t.orders,console.log("Order",this._orders);for(let e of this._orders){e.fabric_name="en"==this.user.lang?e.name_e:e.name_l,e.tag=null,e.tags=null==e.description?[]:JSON.parse(e.description),e.total_count=Math.ceil(e.quantity_info);let t=0;for(let n of e.tags)t+=n.split("-").length;e.count=t}}this.modalService.open(e,{size:"xl",centered:!0})}saveChange(){let e={};e=this.entity,e.orders=this._orders,e.issue_date=this._dt1,e.created_by=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code;let t=!1;for(let n of this._orders)console.log("QT",n.total_count),n.total_count>n.count&&(t=!0);t?this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_ORDER_EN:f.a.MSG_ERROR_ORDER,"en"==this.user.lang?f.a.error_title_en:f.a.error_title):(console.log("save",e),"ADD"==this._flagModal?this._dataService.post("/order/add",e).subscribe(e=>{this.socket.emit("refresh",{}),"failed"!=e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()):this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}):this._dataService.post("/order/update",e).subscribe(e=>{console.log(e),this.socket.emit("refresh",{}),"failed"!=e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.modalService.dismissAll()):this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}))}orgValueChange(e){null!=e&&"Invalid date"!=e?(this._fdate=e,this._dt1=r(this._fdate).format("YYYY-MM-DD HH:mm")):(this._fdate=null,this._dt1=null)}addItem(e){if(null!=e){let t={};t.id=e,this._dataService.post("/mix-fabric/detail",t).subscribe(e=>{let t={};t={mixfabric_id:e.data.id,color_name_l:e.data.color_name_l,color_name_e:e.data.color_name_e,code:e.data.code,fabric_name:"en"==this.user.lang?e.data.cat_name_e:e.data.cat_name_l,price:0,quantity_info:1,amount:0,is_active:!0,tag:null,tags:null==e.data.description||null==e.data.description?[]:JSON.parse(e.data.description),total:0,type_id:e.data.type_id,count:0,total_count:Math.ceil(1)},this._orders.length>0&&this._orders.filter(t=>t.mixfabric_id==e.data.id).length>0?(this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].quantity_info+=1,0==e.data.type_id||1==e.data.type_id?this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].quantity_info>e.data.qty_kg_after&&(this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].quantity_info=e.data.qty_kg_after):this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].quantity_info>e.data.quantity_tree&&(this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].quantity_info=e.data.quantity_tree),this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].amount=this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].total*this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].price):this._orders.push(t),this.selectId=null;let n=0;for(let c of this._orders)n+=parseInt(c.amount);this.entity.total=n;for(let c of this._orders)c.total_count=Math.ceil(c.quantity_info)})}}removeItem(e){const t=this._orders.findIndex(t=>t.mixfabric_id==e);t>-1&&this._orders.splice(t,1);let n=0;for(let c of this._orders)n+=parseInt(c.amount),c.total_count=Math.ceil(c.quantity_info);this.entity.total=n,this.socket.emit("refresh",{})}updateItem(e){let t=this._fabricsCompare.filter(t=>t.id==e.mixfabric_id);0==t[0].type_id||1==t[0].type_id?parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info)>parseFloat(t[0].qty_kg_after)&&(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info=parseFloat(t[0].qty_kg_after)):parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info)>parseFloat(t[0].quantity_tree)&&(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info=parseFloat(t[0].quantity_tree)),this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].amount=parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].total)*parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].price);let n=0;for(let c of this._orders)n+=parseFloat(c.amount),c.total_count=Math.ceil(c.quantity_info);this.entity.total=n,this.socket.emit("refresh",{})}_confirmFinalOrder(){p.a.fire({title:"en"==this.user.lang?f.a.are_you_sure_en:f.a.are_you_sure,text:"en"==this.user.lang?f.a.MSG_CONFIRM_ORDER_EN:f.a.MSG_CONFIRM_ORDER,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(e=>{e.value&&this.saveChange()})}_addTag(e){console.log(e);let t=this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0];if(t.total_count<t.count+e.tag.split("-").length)return void console.log("Overload");if(0==t.tags.length){let n="",c=0;for(let t of e.tag.split("-"))this._utilityServce.isNumber(t)&&(n+=t+"-",c+=parseFloat(t));t.tags.push(n.substr(0,n.length-1)),t.total=c,t.amount=c*parseFloat(t.price)}else{t.tags.push(e.tag);let n=0;for(let e of t.tags){let t="";for(let c of e.split("-"))this._utilityServce.isNumber(c)&&(t+=c+"-",n+=parseFloat(c));e=t.substr(0,t.length-1)}t.total=n,t.amount=n*parseFloat(t.price)}this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tag=null,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tags=t.tags;let n=0;for(let a of t.tags)n+=a.split("-").length;this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].count=n;let c=0;for(let a of this._orders)c+=parseFloat(a.amount);this.entity.total=c}_removeTag(e,t){let n=this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0];n.tags.findIndex(e=>e==t)>-1&&n.tags.splice(n.tags.findIndex(e=>e==t),1),this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tag=null,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tags=n.tags;let c=0;for(let o of n.tags){let e="";for(let t of o.split("-"))this._utilityServce.isNumber(t)&&(e+=t+"-",c+=parseFloat(t));o=e.substr(0,e.length-1)}n.total=c,n.amount=c*parseFloat(n.price);let a=0;for(let o of this._orders)a+=parseFloat(o.amount);this.entity.total=a;let i=0;for(let o of n.tags)i+=o.split("-").length;this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].count=i}printQuotationAsPDF(e){return Object(o.__awaiter)(this,void 0,void 0,function*(){let t=r(new Date).format("YYYYMMDD");console.log("KQ In",e);var n=[];n.push({text:"\n"}),n.push({alignment:"justify",columns:[{text:["T\xean kh\xe1ch h\xe0ng: ",{text:e.company_name_l,bold:!0},"\n","\u0110\u1ecba ch\u1ec9: ",{text:null==e.address_l?"":e.address_l,bold:!0},"\n","Ng\u01b0\u1eddi li\xean h\u1ec7: ",{text:null==e.contact_name?"":e.contact_name,bold:!0},"\n","\u0110i\u1ec7n tho\u1ea1i: ",{text:null==e.phone?"":e.phone,bold:!0},"\n","Email: ",{text:null==e.email?"":e.email,bold:!0}],style:"body_top"},{qr:e.code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),n.push({text:"\n"}),n.push({text:"\n"}),n.push({table:{headerRows:1,widths:[25,"*",90,90,40,180,55,50,70],body:[[{border:[!0,!0,!0,!0],text:{text:"STT",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Lo\u1ea1i v\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe0u",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe3 m\u1ec5",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"S\u1ed1 c\xe2y",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Di\u1ec5n gi\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"T\u1ed5ng (kg)",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"\u0110\u01a1n gi\xe1",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Th\xe0nh ti\u1ec1n",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}});var c=1,a=[];for(let r of e.orders){let e="",t=null==r.description?[]:JSON.parse(r.description);for(let n of t)for(let t of n.split("-"))e+=t+" - ";a.push({STT:c,LoaiVai:r.name_l,Mau:r.color_name_l,Code:r.code.toUpperCase(),SoCay:r.quantity_info,DienGiai:""==e?"":e.substr(0,e.length-3),Tong:r.total,Price:this.formatPipe.localeString(r.price),Amount:this.formatPipe.localeString(r.amount)}),c+=1}n.push(this.tablePrintQuotation(a,["STT","LoaiVai","Mau","Code","SoCay","DienGiai","Tong","Price","Amount"],[25,"*",90,90,40,180,55,50,70],!0)),n.push({text:"\n"}),n.push({columns:[{width:"*",text:"Ch\u1eef k\xfd kh\xe1ch h\xe0ng",fontSize:10},{width:"200",text:"Ng\xe0y l\u1eadp "+r(new Date(e.issue_date)).format("DD/MM/YYYY HH:mm a"),alignment:"center",fontSize:10}]});const i={pageSize:"A4",pageMargins:[25,30,25,70],defaultStyle:{fontSize:12,columnGap:20},pageOrientation:"landscape",content:[{text:"TH\xd4NG TIN \u0110\u01a0N H\xc0NG",style:"title_top"},{text:"\n"},n],footer:(e,t,n)=>({table:{widths:[160,"*"],body:[[{border:[!1,!0,!1,!1],text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],text:"",alignment:"right",style:"body_footer"}],[{width:160,text:"",alignment:"left"},{width:150,alignment:"right",text:"Trang "+e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}),header:(e,t,n)=>({table:{widths:[160,"*"],body:[[{width:160,height:30,text:"C\u1eeda h\xe0ng v\u1ea3i VA",alignment:"left"},{width:150,height:30,alignment:"right",text:""}],[{width:160,border:[!1,!0,!1,!1],text:"",alignment:"left"},{width:150,border:[!1,!0,!1,!1],alignment:"right",text:""}]]},layout:{defaultBorder:!1}}),styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}}};var o="'print-'"+t+".pdf";o=o.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g.a.createPdf(i).open()})}tablePrintQuotation(e,t,n,c){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,c)}}}buildTableBodyPrintQuotation(e,t,n){var c=[];let a=0;return e.forEach(function(e){var i=[],o=1;t.forEach(function(t){i.push({text:{text:e[t],noWrap:!1},alignment:2==o||3==o?"left":8==o||9==o?"right":"center",fontSize:10,italics:2==o&&n[a]}),o+=1,a+=1}),c.push(i)}),c}_convertBase64ImageFromURL(e){return new Promise((t,n)=>{var c=new Image;c.setAttribute("crossOrigin","anonymous"),c.onload=()=>{var e=document.createElement("canvas");e.width=c.width,e.height=c.height,e.getContext("2d").drawImage(c,0,0);var n=e.toDataURL("image/png");t(n)},c.onerror=e=>{n(e)},c.src=e})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(y.a),b.bc(w.s),b.bc(v.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(Re.a),b.bc(kt.a))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-fab-orders"]],viewQuery:function(e,t){if(1&e&&b.jd(bc,1),2&e){let e;b.Qc(e=b.sc())&&(t.tagInputRef=e.first)}},decls:89,vars:60,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],["class","form-inline",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"table-primary"],[2,"width","2px","text-align","center"],[2,"width","10px","text-align","center"],["type","checkbox","name","checkAll",3,"disabled","checked","change"],["scope","col"],[4,"ngIf"],["orderModal",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],["colspan","11",1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["type","checkbox",3,"name","checked","change"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-light",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],[1,"btn","btn-sm","btn-info","mr-sm-1",3,"ngbTooltip","click"],[1,"fa","fa-print"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"badge","badge-light"],["colspan","11",1,"text-truncate"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate"],["class","badge badge-primary","style","cursor: pointer",4,"ngFor","ngForOf"],[1,"text-truncate","text-right"],[1,"badge","badge-primary",2,"cursor","pointer"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-6"],[1,"form-group","row"],[1,"col-12"],[1,"text-primary"],["for","Company"],[1,"text-danger"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change",4,"ngIf"],[1,"form-group"],["for","issue_date"],["type","text","class","form-control","bsDatepicker","","name","_fdate","autocomplete","off","required","",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange",4,"ngIf"],["type","text","class","form-control","style","background-color: rgb(235, 235, 235)","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],["for","payment"],["name","payment",1,"form-control",3,"ngModel","disabled","ngModelChange"],["value","null"],["class","col-6",4,"ngIf"],["for","total"],[1,"title","text-danger"],["class","col-12",4,"ngIf"],[1,"col-md-12"],["class","text-truncate",4,"ngIf"],[1,"modal-footer"],["class","btn btn-info mr-sm-1",3,"ngbTooltip","click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["type","text","disabled","",1,"form-control",2,"background-color","rgb(235, 235, 235)",3,"ngModel","ngModelChange"],["for","status"],["id","status","name","status",1,"form-control",3,"disabled","ngModel","change","ngModelChange"],["for","Items"],["name","Items","bindValue","id","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],[1,"fa","fa-trash"],["type","text","min","1","class","form-control form-control-sm","style","width: 80px","autocomplete","off","mask","separator.2","thousandSeparator",",",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["type","text","class","form-control form-control-sm","style","width: 80px",3,"id","name","ngModel","ngModelChange","keyup.enter","change",4,"ngIf"],[1,"mute"],["class","badge badge-primary","style","cursor: pointer",3,"click",4,"ngFor","ngForOf"],[1,"text-truncate","text-center"],["type","text","mask","separator.2","thousandSeparator",",","class","form-control form-control-sm","style","width: 100px",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["href","javascript:;",1,"text-primary",3,"click"],["type","text","min","1","autocomplete","off","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","80px",3,"id","name","ngModel","ngModelChange","change"],["type","text",1,"form-control","form-control-sm",2,"width","80px",3,"id","name","ngModel","ngModelChange","keyup.enter","change"],[1,"badge","badge-primary",2,"cursor","pointer",3,"click"],["type","text","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","100px",3,"id","name","ngModel","ngModelChange","change"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],[1,"btn","btn-info","mr-sm-1",3,"ngbTooltip","click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.bd(10,yc,3,3,"button",8),b.bd(11,vc,4,3,"button",9),b.bd(12,xc,1,0,"img",10),b.gc(),b.gc(),b.hc(13,"div",11),b.hc(14,"div",12),b.hc(15,"select",13),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(16,"option",14),b.dd(17,"#10"),b.gc(),b.hc(18,"option",15),b.dd(19,"#25"),b.gc(),b.hc(20,"option",16),b.dd(21,"#50"),b.gc(),b.hc(22,"option",17),b.dd(23,"#100"),b.gc(),b.gc(),b.hc(24,"select",18),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()}),b.hc(25,"option",19),b.dd(26),b.wc(27,"translate"),b.gc(),b.hc(28,"option",20),b.dd(29),b.wc(30,"translate"),b.gc(),b.hc(31,"option",21),b.dd(32),b.wc(33,"translate"),b.gc(),b.hc(34,"option",22),b.dd(35),b.wc(36,"translate"),b.gc(),b.hc(37,"option",23),b.dd(38),b.wc(39,"translate"),b.gc(),b.hc(40,"option",24),b.dd(41),b.wc(42,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(43,"div",25),b.hc(44,"div",26),b.bd(45,Sc,10,20,"div",27),b.gc(),b.hc(46,"div",26),b.hc(47,"div",28),b.hc(48,"table",29),b.hc(49,"thead",30),b.hc(50,"tr"),b.hc(51,"th",31),b.dd(52,"#"),b.gc(),b.hc(53,"th",32),b.hc(54,"input",33),b.rc("change",function(e){return t.selectAll(e)}),b.gc(),b.gc(),b.hc(55,"th",34),b.dd(56),b.wc(57,"translate"),b.gc(),b.hc(58,"th",34),b.dd(59),b.wc(60,"translate"),b.gc(),b.hc(61,"th",34),b.dd(62),b.wc(63,"translate"),b.gc(),b.hc(64,"th",34),b.dd(65),b.wc(66,"translate"),b.gc(),b.hc(67,"th",34),b.dd(68),b.wc(69,"translate"),b.gc(),b.hc(70,"th",34),b.dd(71),b.wc(72,"translate"),b.gc(),b.hc(73,"th",34),b.dd(74),b.wc(75,"translate"),b.gc(),b.hc(76,"th",34),b.dd(77),b.wc(78,"translate"),b.gc(),b.hc(79,"th",34),b.dd(80),b.wc(81,"translate"),b.gc(),b.gc(),b.gc(),b.hc(82,"tbody"),b.bd(83,Nc,6,3,"ng-container",35),b.bd(84,Yc,2,1,"ng-container",35),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(85,"div",26),b.bd(86,Fc,10,20,"div",27),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(87,ca,113,80,"ng-template",null,36,b.cd)),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,28,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngIf",t._authService.hasPermission("FAB-ORDER","create")),b.Nb(1),b.Dc("ngIf",t._authService.hasPermission("FAB-ORDER","report")),b.Nb(1),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(9),b.Dc("ngModel",t._keyword),b.Nb(2),b.fd(" ",b.xc(27,30,"All")," "),b.Nb(3),b.fd(" ",b.xc(30,32,"Unpaid")," "),b.Nb(3),b.fd(" ",b.xc(33,34,"Delivery-Unpaid")," "),b.Nb(3),b.fd(" ",b.xc(36,36,"Delivery-Paid")," "),b.Nb(3),b.fd(" ",b.xc(39,38,"Cancel-Unpaid")," "),b.Nb(3),b.fd(" ",b.xc(42,40,"Cancel-Refund")," "),b.Nb(4),b.Dc("ngIf",t._categories.length>0),b.Nb(9),b.Dc("disabled",0==t._categories.length)("checked",t.exportList.length==t._categories.length),b.Nb(2),b.fd(" ",b.xc(57,42,"Issue of date")," "),b.Nb(3),b.fd(" ",b.xc(60,44,"Order code")," "),b.Nb(3),b.fd(" ",b.xc(63,46,"Customers")," "),b.Nb(3),b.fd(" ",b.xc(66,48,"Phone")," "),b.Nb(3),b.fd(" ",b.xc(69,50,"Total")," "),b.Nb(3),b.fd(" ",b.xc(72,52,"Payment method")," "),b.Nb(3),b.ed(b.xc(75,54,"Status")),b.Nb(3),b.ed(b.xc(78,56,"Created by")),b.Nb(3),b.ed(b.xc(81,58,"Actions")),b.Nb(3),b.Dc("ngIf",0==t._categories.length),b.Nb(1),b.Dc("ngIf",t._categories.length>0),b.Nb(2),b.Dc("ngIf",t._categories.length>0))},directives:[a.c,a.n,a.q,c.q,a.x,a.r,a.A,M.a,c.p,w.N,a.z,a.o,a.p,C.a,a.w,D.b,D.a,Pt.a],pipes:[T.c,c.f,c.g],styles:[""]}),e})(),data:{title:"Orders",breadcrumb:"Orders"}}]}];let ia=(()=>{class e{}return e.\u0275mod=b.Zb({type:e}),e.\u0275inj=b.Yb({factory:function(t){return new(t||e)},imports:[[i.h.forChild(aa)],i.h]}),e})();var oa=n("oOf3"),ra=n("LPYB"),la=n("dZIy"),sa=n("+Cnu"),da=n("K3ix"),ha=n("44PX"),ga=n("g9iH"),ua=n("arFO"),_a=n("5gP/");let ma=(()=>{class e{}return e.\u0275mod=b.Zb({type:e}),e.\u0275inj=b.Yb({factory:function(t){return new(t||e)},providers:[y.a,v.a,T.d,S.a,kt.a,Re.a,_a.a],imports:[[c.c,a.k,ia,oa.a,ra.b,la.a,D.c.forRoot(),M.b.forRoot(),sa.a.forRoot(),da.a.forRoot(),T.b,ha.a.forRoot(),w.u,ga.b,ua.a,C.b,Pt.b.forRoot()]]}),e})()}}]);