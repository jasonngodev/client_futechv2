!function(){"use strict";function e(e,i){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e))||i&&e&&"number"==typeof e.length){n&&(e=n);var a=0,l=function(){};return{s:l,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(self.webpackChunkendless=self.webpackChunkendless||[]).push([[3625],{13625:function(t,n,l){l.r(n),l.d(n,{TasksModule:function(){return wt}});var r=l(38583),o=l(49690),s=l(90217),c=l(65925),u=l(15483),d=l(58920),g=l(75690),f=l(63301),p=l(70453),Z=l(72214),h=l(81946),_=l(10743),v=l(93184),m=l(72533),A=l(3679),x=l(39895),T=l(91647),q=l(49962),y=l.n(q),b=l(65206),S=l(29022),k=l(88259),w=l.n(k),U=l(37716),M=l(75208),E=l(59543),C=l(12664),N=l(32579),J=l(39075),D=l(41365),I=l(86640),O=l(29790);function Q(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",41),U.BQk()),2&e){var i=U.oxw();U.xp6(1),U.s9C("alt",i.user.name)}}function W(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",42),U.BQk()),2&e){var i=U.oxw();U.xp6(1),U.s9C("alt",i.user.name),U.Q6J("src",i.baseFolder+"/"+i.user.avatar,U.LSH)}}function L(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",44),U.BQk()),2&e){var i=U.oxw().$implicit,n=U.oxw();U.xp6(1),U.s9C("alt",i.name),U.Q6J("src",n.baseFolder+"/"+i.avatar,U.LSH)("ngbTooltip",i.name)}}function R(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",45),U.BQk()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.s9C("alt",i.name),U.Q6J("ngbTooltip",i.name)}}function Y(e,t){if(1&e&&(U.TgZ(0,"li",43),U.YNc(1,L,2,3,"ng-container",10),U.YNc(2,R,2,2,"ng-container",10),U.qZA()),2&e){var i=t.$implicit;U.xp6(1),U.Q6J("ngIf",null!=i.avatar),U.xp6(1),U.Q6J("ngIf",null==i.avatar)}}function F(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",44),U.BQk()),2&e){var i=U.oxw().$implicit,n=U.oxw(2);U.xp6(1),U.s9C("alt",i.name),U.Q6J("src",n.baseFolder+"/"+i.avatar,U.LSH)("ngbTooltip",i.name)}}function P(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",45),U.BQk()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.s9C("alt",i.name),U.Q6J("ngbTooltip",i.name)}}function H(e,t){if(1&e&&(U.TgZ(0,"li",43),U.YNc(1,F,2,3,"ng-container",10),U.YNc(2,P,2,2,"ng-container",10),U.qZA()),2&e){var i=t.$implicit;U.xp6(1),U.Q6J("ngIf",null!=i.avatar),U.xp6(1),U.Q6J("ngIf",null==i.avatar)}}function j(e,t){if(1&e&&(U.ynx(0),U.TgZ(1,"p"),U._uU(2),U.ALo(3,"translate"),U.qZA(),U.TgZ(4,"div",13),U.TgZ(5,"ul"),U.YNc(6,H,3,2,"li",14),U.qZA(),U.qZA(),U.BQk()),2&e){var i=U.oxw();U.xp6(2),U.hij("",U.lcZ(3,2,"Followers"),":"),U.xp6(4),U.Q6J("ngForOf",i.ccList)}}function G(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"a",46),U.NdJ("click",function(){U.CHM(i);var e=U.oxw();return e.closeTask(e.entity)}),U._UZ(1,"i",47),U._uU(2),U.ALo(3,"translate"),U.ALo(4,"translate"),U.qZA()}2&e&&(U.xp6(2),U.AsE(" ",U.lcZ(3,2,"Close")," ",U.lcZ(4,4,"Task")," "))}function $(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li",21),U.NdJ("click",function(){return U.CHM(i),U.oxw()._createNew()}),U.TgZ(1,"a",22),U.TgZ(2,"span",23),U._UZ(3,"i",30),U._uU(4),U.ALo(5,"translate"),U.qZA(),U.qZA(),U.qZA()}2&e&&(U.xp6(4),U.hij(" ",U.lcZ(5,1,"Create new"),""))}function B(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li",26),U.NdJ("click",function(){U.CHM(i);var e=U.oxw();return e.getUserEmailv2(e.type="trash")}),U.TgZ(1,"a",27),U.TgZ(2,"span",23),U._UZ(3,"i",48),U._uU(4),U.ALo(5,"translate"),U.qZA(),U.TgZ(6,"span",25),U._uU(7),U.qZA(),U.qZA(),U.qZA()}if(2&e){var n=U.oxw();U.xp6(4),U.hij(" ",U.lcZ(5,2,"Trash"),""),U.xp6(3),U.hij("(",n._trash,")")}}function z(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li"),U.TgZ(1,"a",49),U.NdJ("click",function(){var e=U.CHM(i).$implicit,t=U.oxw(),n=U.MAs(89);return t.popupModalEdit(n,e)}),U._uU(2),U.qZA(),U.qZA()}if(2&e){var n=t.$implicit;U.xp6(2),U.Oqu(n.title)}}function K(e,t){1&e&&(U.TgZ(0,"h4",63),U._uU(1),U.ALo(2,"translate"),U.qZA()),2&e&&(U.xp6(1),U.hij(" ",U.lcZ(2,1,"All")," "))}function V(e,t){1&e&&(U.TgZ(0,"h4",63),U._uU(1),U.ALo(2,"translate"),U.qZA()),2&e&&(U.xp6(1),U.hij(" ",U.lcZ(2,1,"Important")," "))}function X(e,t){1&e&&(U.TgZ(0,"h4",63),U._uU(1),U.ALo(2,"translate"),U.qZA()),2&e&&(U.xp6(1),U.hij(" ",U.lcZ(2,1,"Favourite")," "))}function ee(e,t){1&e&&(U.TgZ(0,"h4",63),U._uU(1),U.ALo(2,"translate"),U.qZA()),2&e&&(U.xp6(1),U.hij(" ",U.lcZ(2,1,"Pending")," "))}function te(e,t){1&e&&(U.TgZ(0,"h4",63),U._uU(1),U.ALo(2,"translate"),U.qZA()),2&e&&(U.xp6(1),U.hij(" ",U.lcZ(2,1,"Trash")," "))}function ie(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"i",70),U.NdJ("click",function(){U.CHM(i);var e=U.oxw().$implicit,t=U.oxw(2);return e.created_by==t.user.id?t._editComposer(e):null}),U.qZA()}}function ne(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",71),U.BQk()),2&e){var i=U.oxw().$implicit,n=U.oxw(2);U.xp6(1),U.s9C("ngbTooltip",i.name),U.Q6J("src",n.baseFolder+"/"+i.avatar,U.LSH)}}function ae(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",72),U.BQk()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.s9C("ngbTooltip",i.name)}}function le(e,t){if(1&e&&U._UZ(0,"i",31),2&e){var i=U.oxw().$implicit;U.Q6J("ngClass",1==(null==i?null:i.type)?"icofont icofont-flag-alt-1 text-danger":"icofont icofont-flag-alt-1")}}function re(e,t){if(1&e&&(U.TgZ(0,"del"),U._uU(1),U.qZA()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.Oqu(i.title)}}function oe(e,t){if(1&e&&(U.TgZ(0,"span"),U._uU(1),U.qZA()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.Oqu(i.title)}}function se(e,t){if(1&e&&(U.TgZ(0,"del"),U._UZ(1,"div",73),U.qZA()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.Q6J("innerHtml",i.content,U.oJD)}}function ce(e,t){if(1&e&&U._UZ(0,"span",73),2&e){var i=U.oxw().$implicit;U.Q6J("innerHtml",i.content,U.oJD)}}function ue(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li"),U.TgZ(1,"i",75),U.NdJ("click",function(){var e=U.CHM(i).$implicit;return U.oxw(4)._downloadFileResult(e)}),U.qZA(),U.qZA()}}function de(e,t){if(1&e&&(U.TgZ(0,"ul",74),U.YNc(1,ue,2,0,"li",33),U.qZA()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.Q6J("ngForOf",i.urls.data)}}function ge(e,t){if(1&e&&(U.TgZ(0,"del"),U._uU(1),U.ALo(2,"date"),U.qZA()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.Oqu(U.xi3(2,1,i.timestamp,"dd/MM/yyyy HH:mm"))}}function fe(e,t){if(1&e&&(U.TgZ(0,"span"),U._uU(1),U.ALo(2,"date"),U.qZA()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.Oqu(U.xi3(2,1,i.timestamp,"dd/MM/yyyy HH:mm"))}}function pe(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"tr"),U.TgZ(1,"td"),U._uU(2),U.qZA(),U.TgZ(3,"td"),U.YNc(4,ie,1,0,"i",64),U.qZA(),U.TgZ(5,"td"),U.YNc(6,ne,2,2,"ng-container",10),U.YNc(7,ae,2,1,"ng-container",10),U.qZA(),U.TgZ(8,"td"),U.YNc(9,le,1,1,"i",65),U._UZ(10,"i",31),U.YNc(11,re,2,1,"del",10),U.YNc(12,oe,2,1,"span",10),U.qZA(),U.TgZ(13,"td",66),U.NdJ("click",function(){var e=U.CHM(i).$implicit;return U.oxw(2).selectedUserEmail(e)}),U.YNc(14,se,2,1,"del",10),U.YNc(15,ce,1,1,"span",67),U.qZA(),U.TgZ(16,"td"),U.YNc(17,de,2,1,"ul",68),U.qZA(),U.TgZ(18,"td",69),U.YNc(19,ge,3,4,"del",10),U.YNc(20,fe,3,4,"span",10),U.qZA(),U.qZA()}if(2&e){var n=t.$implicit,a=t.index;U.xp6(2),U.Oqu(a+1),U.xp6(2),U.Q6J("ngIf",!n.is_active),U.xp6(2),U.Q6J("ngIf",null!=n.avatar),U.xp6(1),U.Q6J("ngIf",null==n.avatar),U.xp6(2),U.Q6J("ngIf",1==n.type),U.xp6(1),U.Q6J("ngClass",n.flag_fav?"icon-star text-primary":"icon-star"),U.xp6(1),U.Q6J("ngIf",n.is_active),U.xp6(1),U.Q6J("ngIf",!n.is_active),U.xp6(2),U.Q6J("ngIf",n.is_active),U.xp6(1),U.Q6J("ngIf",!n.is_active),U.xp6(2),U.Q6J("ngIf",null!=n.urls),U.xp6(2),U.Q6J("ngIf",n.is_active),U.xp6(1),U.Q6J("ngIf",!n.is_active)}}function Ze(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"div",50),U.TgZ(1,"div",51),U.YNc(2,K,3,3,"h4",52),U.YNc(3,V,3,3,"h4",52),U.YNc(4,X,3,3,"h4",52),U.YNc(5,ee,3,3,"h4",52),U.YNc(6,te,3,3,"h4",52),U.qZA(),U.TgZ(7,"div",53),U.TgZ(8,"div",54),U.TgZ(9,"table",55),U.TgZ(10,"thead"),U.TgZ(11,"tr"),U.TgZ(12,"th",56),U._uU(13,"#"),U.qZA(),U.TgZ(14,"th",56),U._UZ(15,"i",30),U.qZA(),U.TgZ(16,"th",56),U._UZ(17,"i",57),U.qZA(),U.TgZ(18,"th",56),U._uU(19),U.ALo(20,"translate"),U.qZA(),U.TgZ(21,"th",56),U._uU(22),U.ALo(23,"translate"),U.qZA(),U.TgZ(24,"th",56),U._uU(25),U.ALo(26,"translate"),U.qZA(),U.TgZ(27,"th",56),U._uU(28),U.ALo(29,"translate"),U.qZA(),U.qZA(),U.qZA(),U.TgZ(30,"tbody"),U.YNc(31,pe,21,13,"tr",33),U.qZA(),U.qZA(),U.qZA(),U.TgZ(32,"div",2),U.TgZ(33,"div",58),U.TgZ(34,"p",59),U._uU(35),U.ALo(36,"translate"),U.ALo(37,"translate"),U.qZA(),U.qZA(),U.TgZ(38,"div",60),U.TgZ(39,"div",61),U.TgZ(40,"pagination",62),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw().pageIndex0=e})("pageChanged",function(e){return U.CHM(i),U.oxw().pageChanged0(e)}),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA()}if(2&e){var n=U.oxw();U.xp6(2),U.Q6J("ngIf","allmail"==n.type),U.xp6(1),U.Q6J("ngIf","important"==n.type),U.xp6(1),U.Q6J("ngIf","favourite"==n.type),U.xp6(1),U.Q6J("ngIf","pending"==n.type),U.xp6(1),U.Q6J("ngIf","trash"==n.type),U.xp6(13),U.Oqu(U.lcZ(20,20,"Title")),U.xp6(3),U.Oqu(U.lcZ(23,22,"Content")),U.xp6(3),U.Oqu(U.lcZ(26,24,"Attachment")),U.xp6(3),U.Oqu(U.lcZ(29,26,"Timestamp")),U.xp6(3),U.Q6J("ngForOf",n._getlistv2),U.xp6(4),U.xDo(" ",U.lcZ(36,28,"Showing")," ",n.pageIndex0," - ",n.pageSize0," of ",n.totalRow0," ",U.lcZ(37,30,"records")," "),U.xp6(5),U.Q6J("boundaryLinks",!0)("totalItems",n.totalRow0)("ngModel",n.pageIndex0)("maxSize",n.pageDisplay)("itemsPerPage",n.pageSize0)}}function he(e,t){1&e&&(U.ynx(0),U._uU(1),U.ALo(2,"translate"),U.BQk()),2&e&&(U.xp6(1),U.Oqu(U.lcZ(2,1,"Send")))}function _e(e,t){1&e&&(U.ynx(0),U._uU(1),U.ALo(2,"translate"),U.BQk()),2&e&&(U.xp6(1),U.Oqu(U.lcZ(2,1,"Loading")))}function ve(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"div",85),U.TgZ(1,"label",98),U._uU(2),U.ALo(3,"translate"),U.qZA(),U.TgZ(4,"ng-select",99),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw(2).follow_users=e}),U.ALo(5,"translate"),U.ALo(6,"translate"),U.qZA(),U.qZA()}if(2&e){var n=U.oxw(2);U.xp6(2),U.Oqu(U.lcZ(3,9,"Followers")),U.xp6(2),U.Q6J("items",n._users)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",n.follow_users)("placeholder",U.lcZ(5,11,"Please choose"))("notFoundText",U.lcZ(6,13,"Not found item"))}}function me(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"div",76),U.TgZ(1,"div",77),U.TgZ(2,"div",2),U.TgZ(3,"div",78),U.TgZ(4,"h4",79),U._uU(5),U.ALo(6,"translate"),U.qZA(),U.qZA(),U.TgZ(7,"div",80),U.TgZ(8,"button",81),U.NdJ("click",function(){U.CHM(i);var e=U.oxw();return e.isSave?null:e.submit()}),U._UZ(9,"i",82),U.YNc(10,he,3,3,"ng-container",10),U.YNc(11,_e,3,3,"ng-container",10),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.TgZ(12,"div",83),U.TgZ(13,"form",84),U.TgZ(14,"div",85),U.TgZ(15,"label",86),U._uU(16),U.ALo(17,"translate"),U.TgZ(18,"span",87),U._uU(19,"*"),U.qZA(),U.qZA(),U.TgZ(20,"input",88),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw().entitySub.title=e}),U.qZA(),U.qZA(),U.TgZ(21,"div",85),U.TgZ(22,"label",89),U._uU(23),U.ALo(24,"translate"),U.ALo(25,"translate"),U.qZA(),U.TgZ(26,"input",90),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw().flagShow=e}),U.qZA(),U.qZA(),U.YNc(27,ve,7,15,"div",91),U.TgZ(28,"div",92),U.TgZ(29,"label",93),U._uU(30),U.ALo(31,"translate"),U.qZA(),U.TgZ(32,"ck-editor",94),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw().entitySub.content=e}),U.qZA(),U.qZA(),U.TgZ(33,"div",85),U.TgZ(34,"label",95),U._uU(35),U.ALo(36,"translate"),U.qZA(),U.TgZ(37,"input",96,97),U.NdJ("change",function(e){U.CHM(i);var t=U.MAs(38);return U.oxw().fileEvent(e,t)}),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA()}if(2&e){var n=U.oxw();U.xp6(5),U.Oqu(U.lcZ(6,12,"New message")),U.xp6(5),U.Q6J("ngIf",!n.isSave),U.xp6(1),U.Q6J("ngIf",n.isSave),U.xp6(5),U.hij("",U.lcZ(17,14,"Title")," "),U.xp6(4),U.Q6J("ngModel",n.entitySub.title),U.xp6(3),U.AsE(" ",U.lcZ(24,16,"Shown")," / ",U.lcZ(25,18,"Hidden"),"?"),U.xp6(3),U.Q6J("ngModel",n.flagShow),U.xp6(1),U.Q6J("ngIf",n.flagShow),U.xp6(3),U.Oqu(U.lcZ(31,20,"Description")),U.xp6(2),U.Q6J("ngModel",n.entitySub.content),U.xp6(3),U.Oqu(U.lcZ(36,22,"Attachment"))}}function Ae(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",111),U.BQk()),2&e){var i=U.oxw(2);U.xp6(1),U.s9C("alt",null==i.selectEmail?null:i.selectEmail.name)}}function xe(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",112),U.BQk()),2&e){var i=U.oxw(2);U.xp6(1),U.Q6J("src",i.baseFolder+"/"+(null==i.selectEmail?null:i.selectEmail.avatar),U.LSH)}}function Te(e,t){if(1&e&&(U.TgZ(0,"span"),U._uU(1),U.qZA()),2&e){var i=t.$implicit;U.xp6(1),U.hij("",i.name,", ")}}function qe(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li",121),U.TgZ(1,"img",122),U.NdJ("click",function(){var e=U.CHM(i).$implicit;return U.oxw(3)._downloadFileResult(e)}),U.qZA(),U.qZA()}}function ye(e,t){if(1&e&&(U.ynx(0),U.TgZ(1,"div",43),U.TgZ(2,"h6",113),U._UZ(3,"i",114),U._uU(4),U.ALo(5,"translate"),U.qZA(),U.TgZ(6,"a",115),U._UZ(7,"i",116),U._uU(8),U.ALo(9,"translate"),U.qZA(),U._UZ(10,"div",117),U.qZA(),U.TgZ(11,"div",118),U.TgZ(12,"ul",119),U.YNc(13,qe,2,0,"li",120),U.qZA(),U.qZA(),U._UZ(14,"hr"),U.BQk()),2&e){var i=U.oxw(2);U.xp6(4),U.hij(" ",U.lcZ(5,3,"Attachment")," "),U.xp6(4),U.Oqu(U.lcZ(9,5,"All")),U.xp6(5),U.Q6J("ngForOf",null==i.selectEmail?null:i.selectEmail.urls.data)}}function be(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li"),U.TgZ(1,"a",123),U.NdJ("click",function(){U.CHM(i);var e=U.oxw(2);return e.flagReply=!e.flagReply}),U._UZ(2,"i",124),U._uU(3),U.ALo(4,"translate"),U.qZA(),U.qZA()}2&e&&(U.xp6(3),U.Oqu(U.lcZ(4,1,"Reply")))}function Se(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li"),U.TgZ(1,"a",123),U.NdJ("click",function(){U.CHM(i);var e=U.oxw(2);return e.selectedmail(null,e.selectEmail)}),U._UZ(2,"i",125),U._uU(3),U.ALo(4,"translate"),U.qZA(),U.qZA()}2&e&&(U.xp6(3),U.Oqu(U.lcZ(4,1,"Complete")))}function ke(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li"),U.TgZ(1,"a",123),U.NdJ("click",function(){U.CHM(i);var e=U.oxw(2);return e.updateType(e.selectEmail,2)}),U._UZ(2,"i",126),U._uU(3),U.ALo(4,"translate"),U.qZA(),U.qZA()}2&e&&(U.xp6(3),U.Oqu(U.lcZ(4,1,"Delete")))}function we(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li"),U.TgZ(1,"a",123),U.NdJ("click",function(){U.CHM(i);var e=U.oxw(2);return e.updateType(e.selectEmail,null)}),U._UZ(2,"i",127),U._uU(3),U.ALo(4,"translate"),U.qZA(),U.qZA()}2&e&&(U.xp6(3),U.Oqu(U.lcZ(4,1,"Recall")))}function Ue(e,t){1&e&&U._UZ(0,"i",138)}function Me(e,t){1&e&&(U.ynx(0),U._uU(1),U.ALo(2,"translate"),U.BQk()),2&e&&(U.xp6(1),U.Oqu(U.lcZ(2,1,"Processing")))}function Ee(e,t){if(1&e){var i=U.EpF();U.ynx(0),U._UZ(1,"hr"),U.TgZ(2,"div",2),U.TgZ(3,"div",128),U.TgZ(4,"div",85),U.TgZ(5,"div",129),U.TgZ(6,"input",130),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw(2).entitySubDID.content=e}),U.ALo(7,"translate"),U.qZA(),U.TgZ(8,"div",131),U.TgZ(9,"span",132),U._UZ(10,"i",133),U.TgZ(11,"input",134,135),U.NdJ("change",function(e){U.CHM(i);var t=U.MAs(12);return U.oxw(2).fileEvent1(e,t)}),U.qZA(),U.qZA(),U.TgZ(13,"span",136),U.NdJ("click",function(){U.CHM(i);var e=U.oxw(2);return e.isSaveComment?null:e.submitComment(e.selectEmail)}),U.YNc(14,Ue,1,0,"i",137),U.YNc(15,Me,3,3,"ng-container",10),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.BQk()}if(2&e){var n=U.oxw(2);U.xp6(6),U.s9C("placeholder",U.lcZ(7,4,"Comment")),U.Q6J("ngModel",n.entitySubDID.content),U.xp6(8),U.Q6J("ngIf",!n.isSaveComment),U.xp6(1),U.Q6J("ngIf",n.isSaveComment)}}function Ce(e,t){1&e&&U._UZ(0,"hr")}function Ne(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li",121),U.TgZ(1,"img",122),U.NdJ("click",function(){var e=U.CHM(i).$implicit;return U.oxw(4)._downloadFileResult(e)}),U.qZA(),U.qZA()}}var Je=function(){return[]};function De(e,t){if(1&e&&(U.TgZ(0,"tr"),U.TgZ(1,"td"),U._uU(2),U.qZA(),U.TgZ(3,"td"),U.TgZ(4,"div",118),U.TgZ(5,"ul",119),U.YNc(6,Ne,2,0,"li",120),U.qZA(),U.qZA(),U.qZA(),U.TgZ(7,"td"),U._uU(8),U.qZA(),U.TgZ(9,"td"),U._uU(10),U.ALo(11,"date"),U.qZA(),U.qZA()),2&e){var i=t.$implicit;U.xp6(2),U.Oqu(i.content),U.xp6(4),U.Q6J("ngForOf",null==i.urls?U.DdM(7,Je):i.urls.data),U.xp6(2),U.Oqu(i.name),U.xp6(2),U.hij(" ",U.xi3(11,4,i.timestamp,"dd/MM/yyyy h:mm a")," ")}}function Ie(e,t){if(1&e){var i=U.EpF();U.ynx(0),U.YNc(1,Ce,1,0,"hr",10),U.TgZ(2,"div",2),U.TgZ(3,"div",128),U.TgZ(4,"div",54),U.TgZ(5,"table",139),U.TgZ(6,"thead"),U.TgZ(7,"th"),U._uU(8),U.ALo(9,"translate"),U.qZA(),U.TgZ(10,"th"),U._uU(11),U.ALo(12,"translate"),U.qZA(),U.TgZ(13,"th"),U._uU(14),U.ALo(15,"translate"),U.qZA(),U.TgZ(16,"th"),U._uU(17),U.ALo(18,"translate"),U.qZA(),U.qZA(),U.TgZ(19,"tbody"),U.YNc(20,De,12,8,"tr",33),U.qZA(),U.qZA(),U.qZA(),U.TgZ(21,"div",140),U.TgZ(22,"div",141),U.TgZ(23,"pagination",142),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw(2).pageIndex=e})("pageChanged",function(e){return U.CHM(i),U.oxw(2).pageChanged(e)}),U.qZA(),U.qZA(),U.TgZ(24,"div",143),U.TgZ(25,"a",144),U._uU(26),U.ALo(27,"translate"),U.ALo(28,"translate"),U.ALo(29,"translate"),U.ALo(30,"translate"),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.BQk()}if(2&e){var n=U.oxw(2);U.xp6(1),U.Q6J("ngIf",!n.selectEmail.is_active),U.xp6(7),U.Oqu(U.lcZ(9,18,"Content")),U.xp6(3),U.Oqu(U.lcZ(12,20,"Attachment")),U.xp6(3),U.Oqu(U.lcZ(15,22,"Created by")),U.xp6(3),U.Oqu(U.lcZ(18,24,"CreatedDate")),U.xp6(3),U.Q6J("ngForOf",n._children),U.xp6(3),U.Q6J("boundaryLinks",!0)("totalItems",n.totalRow)("ngModel",n.pageIndex)("maxSize",n.pageDisplay)("itemsPerPage",n.pageSize),U.xp6(3),U.Q0o("",U.lcZ(27,26,"Total of records"),": ",n.totalRow," - ",U.lcZ(28,28,"Page")," ",n.pageIndex," ",U.lcZ(29,30,"of")," ",n.totalPage," ",U.lcZ(30,32,"page"),"")}}function Oe(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"div",100),U.TgZ(1,"div",51),U.TgZ(2,"div",2),U.TgZ(3,"div",101),U.TgZ(4,"div",8),U.YNc(5,Ae,2,1,"ng-container",10),U.YNc(6,xe,2,1,"ng-container",10),U.TgZ(7,"div",11),U.TgZ(8,"h6"),U._uU(9),U.TgZ(10,"small"),U.TgZ(11,"span",102),U._uU(12),U.ALo(13,"date"),U.qZA(),U.TgZ(14,"span",102),U._uU(15),U.ALo(16,"date"),U.qZA(),U._uU(17),U.ALo(18,"date"),U.TgZ(19,"i",103),U.NdJ("click",function(){U.CHM(i);var e=U.oxw();return e.updateType(e.selectEmail,1)}),U.qZA(),U.qZA(),U.qZA(),U.TgZ(20,"p"),U.YNc(21,Te,2,1,"span",33),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.TgZ(22,"div",104),U.TgZ(23,"div",105),U.TgZ(24,"p",106),U._uU(25),U.qZA(),U.TgZ(26,"i",107),U.NdJ("click",function(){U.CHM(i);var e=U.oxw();return e.addFavourite(e.selectEmail)}),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.TgZ(27,"div",83),U._UZ(28,"p",108),U._UZ(29,"hr"),U.YNc(30,ye,15,7,"ng-container",10),U.TgZ(31,"div",109),U.TgZ(32,"ul",110),U.YNc(33,be,5,3,"li",10),U.YNc(34,Se,5,3,"li",10),U.YNc(35,ke,5,3,"li",10),U.YNc(36,we,5,3,"li",10),U.qZA(),U.qZA(),U.YNc(37,Ee,16,6,"ng-container",10),U.YNc(38,Ie,31,34,"ng-container",10),U.qZA(),U.qZA()}if(2&e){var n=U.oxw();U.xp6(5),U.Q6J("ngIf",null==(null==n.selectEmail?null:n.selectEmail.avatar)),U.xp6(1),U.Q6J("ngIf",null!=(null==n.selectEmail?null:n.selectEmail.avatar)),U.xp6(3),U.hij(" ",null==n.selectEmail?null:n.selectEmail.title," "),U.xp6(3),U.hij("(",U.xi3(13,19,null==n.selectEmail?null:n.selectEmail.timestamp,"dd/MM/yyyy"),")"),U.xp6(3),U.hij(" ",U.xi3(16,22,null==n.selectEmail?null:n.selectEmail.timestamp,"h:mm"),""),U.xp6(2),U.hij(" ",U.xi3(18,25,null==n.selectEmail?null:n.selectEmail.timestamp,"a")," "),U.xp6(2),U.Q6J("ngClass",1==(null==n.selectEmail?null:n.selectEmail.type)?"icofont icofont-flag-alt-1 text-danger":"icofont icofont-flag-alt-1"),U.xp6(2),U.Q6J("ngForOf",null==n.selectEmail?null:n.selectEmail.cc),U.xp6(4),U.Oqu(null==n.selectEmail?null:n.selectEmail.email),U.xp6(1),U.ekj("starred",n._flagFav),U.xp6(2),U.Q6J("innerHTML",null==n.selectEmail?null:n.selectEmail.content,U.oJD),U.xp6(2),U.Q6J("ngIf",null!=(null==n.selectEmail?null:n.selectEmail.urls)),U.xp6(3),U.Q6J("ngIf",!n.selectEmail.is_active),U.xp6(1),U.Q6J("ngIf",2!=(null==n.selectEmail?null:n.selectEmail.type)&&!n.selectEmail.is_active),U.xp6(1),U.Q6J("ngIf",2!=(null==n.selectEmail?null:n.selectEmail.type)&&!n.selectEmail.is_active),U.xp6(1),U.Q6J("ngIf",2==(null==n.selectEmail?null:n.selectEmail.type)),U.xp6(1),U.Q6J("ngIf",n.flagReply),U.xp6(1),U.Q6J("ngIf",n._children.length>0)}}function Qe(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",71),U.BQk()),2&e){var i=U.oxw().$implicit,n=U.oxw(2);U.xp6(1),U.s9C("ngbTooltip",i.name),U.Q6J("src",n.baseFolder+"/"+i.avatar,U.LSH)}}function We(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",72),U.BQk()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.s9C("ngbTooltip",i.name)}}function Le(e,t){if(1&e&&U._UZ(0,"i",31),2&e){var i=U.oxw().$implicit;U.Q6J("ngClass",1==(null==i?null:i.type)?"icofont icofont-flag-alt-1 text-danger":"icofont icofont-flag-alt-1")}}function Re(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li"),U.TgZ(1,"i",75),U.NdJ("click",function(){var e=U.CHM(i).$implicit;return U.oxw(4)._downloadFileResult(e)}),U.qZA(),U.qZA()}}function Ye(e,t){if(1&e&&(U.TgZ(0,"ul",74),U.YNc(1,Re,2,0,"li",33),U.qZA()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.Q6J("ngForOf",i.urls.data)}}function Fe(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"li",121),U.TgZ(1,"img",122),U.NdJ("click",function(){var e=U.CHM(i).$implicit;return U.oxw(5)._downloadFileResult(e)}),U.qZA(),U.qZA()}}function Pe(e,t){if(1&e&&(U.TgZ(0,"tr"),U.TgZ(1,"td"),U._uU(2),U.qZA(),U.TgZ(3,"td"),U.TgZ(4,"div",118),U.TgZ(5,"ul",119),U.YNc(6,Fe,2,0,"li",120),U.qZA(),U.qZA(),U.qZA(),U.TgZ(7,"td"),U._uU(8),U.qZA(),U.TgZ(9,"td"),U._uU(10),U.ALo(11,"date"),U.qZA(),U.qZA()),2&e){var i=t.$implicit;U.xp6(2),U.Oqu(i.content),U.xp6(4),U.Q6J("ngForOf",null==i.urls?U.DdM(7,Je):i.urls.data),U.xp6(2),U.Oqu(i.name),U.xp6(2),U.hij(" ",U.xi3(11,4,i.timestamp,"dd/MM/yyyy h:mm a")," ")}}function He(e,t){if(1&e&&(U.TgZ(0,"tr"),U.TgZ(1,"td",151),U.TgZ(2,"table",139),U.TgZ(3,"thead"),U.TgZ(4,"th"),U._uU(5),U.ALo(6,"translate"),U.qZA(),U.TgZ(7,"th"),U._uU(8),U.ALo(9,"translate"),U.qZA(),U.TgZ(10,"th"),U._uU(11),U.ALo(12,"translate"),U.qZA(),U.TgZ(13,"th"),U._uU(14),U.ALo(15,"translate"),U.qZA(),U.qZA(),U.TgZ(16,"tbody"),U.YNc(17,Pe,12,8,"tr",33),U.qZA(),U.qZA(),U.qZA(),U.qZA()),2&e){var i=U.oxw().$implicit;U.xp6(5),U.Oqu(U.lcZ(6,5,"Content")),U.xp6(3),U.Oqu(U.lcZ(9,7,"Attachment")),U.xp6(3),U.Oqu(U.lcZ(12,9,"Created by")),U.xp6(3),U.Oqu(U.lcZ(15,11,"CreatedDate")),U.xp6(3),U.Q6J("ngForOf",i.sub_tasks)}}function je(e,t){if(1&e){var i=U.EpF();U.ynx(0),U.TgZ(1,"tr"),U.TgZ(2,"td"),U._uU(3),U.qZA(),U.TgZ(4,"td"),U.YNc(5,Qe,2,2,"ng-container",10),U.YNc(6,We,2,1,"ng-container",10),U.qZA(),U.TgZ(7,"td",66),U.NdJ("click",function(){var e=U.CHM(i).$implicit;return e.flag=!e.flag}),U.YNc(8,Le,1,1,"i",65),U._UZ(9,"i",31),U._uU(10),U.qZA(),U.TgZ(11,"td",66),U.NdJ("click",function(){var e=U.CHM(i).$implicit;return e.flag=!e.flag}),U._UZ(12,"span",73),U.qZA(),U.TgZ(13,"td"),U.YNc(14,Ye,2,1,"ul",68),U.qZA(),U.TgZ(15,"td",69),U._uU(16),U.ALo(17,"date"),U.qZA(),U.qZA(),U.YNc(18,He,18,13,"tr",10),U.BQk()}if(2&e){var n=t.$implicit,a=t.index;U.xp6(3),U.Oqu(a+1),U.xp6(2),U.Q6J("ngIf",null!=n.avatar),U.xp6(1),U.Q6J("ngIf",null==n.avatar),U.xp6(2),U.Q6J("ngIf",1==n.type),U.xp6(1),U.Q6J("ngClass",n.flag_fav?"icon-star text-primary":"icon-star"),U.xp6(1),U.hij(" ",n.title," "),U.xp6(2),U.Q6J("innerHtml",n.content,U.oJD),U.xp6(2),U.Q6J("ngIf",null!=n.urls),U.xp6(2),U.hij(" ",U.xi3(17,10,n.timestamp,"dd/MM/yyyy HH:mm")," "),U.xp6(2),U.Q6J("ngIf",n.flag&&n.sub_tasks.length>0)}}function Ge(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"div",145),U.TgZ(1,"h4",146),U._uU(2),U.ALo(3,"translate"),U.qZA(),U.TgZ(4,"button",147),U.NdJ("click",function(){return U.CHM(i).$implicit.dismiss("Cross click")}),U.TgZ(5,"span",148),U._uU(6,"\xd7"),U.qZA(),U.qZA(),U.qZA(),U.TgZ(7,"div",149),U.TgZ(8,"div",85),U.TgZ(9,"div",128),U.TgZ(10,"div",54),U.TgZ(11,"table",55),U.TgZ(12,"thead"),U.TgZ(13,"tr"),U.TgZ(14,"th",56),U._uU(15,"#"),U.qZA(),U.TgZ(16,"th",56),U._UZ(17,"i",57),U.qZA(),U.TgZ(18,"th",56),U._uU(19),U.ALo(20,"translate"),U.qZA(),U.TgZ(21,"th",56),U._uU(22),U.ALo(23,"translate"),U.qZA(),U.TgZ(24,"th",56),U._uU(25),U.ALo(26,"translate"),U.qZA(),U.TgZ(27,"th",56),U._uU(28),U.ALo(29,"translate"),U.qZA(),U.qZA(),U.qZA(),U.TgZ(30,"tbody"),U.YNc(31,je,19,13,"ng-container",33),U.qZA(),U.qZA(),U.qZA(),U.TgZ(32,"div",2),U.TgZ(33,"div",58),U.TgZ(34,"p",59),U._uU(35),U.ALo(36,"translate"),U.ALo(37,"translate"),U.qZA(),U.qZA(),U.TgZ(38,"div",60),U.TgZ(39,"div",61),U.TgZ(40,"pagination",150),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw().pageIndex1=e})("pageChanged",function(e){return U.CHM(i),U.oxw().pageChanged1(e)}),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA()}if(2&e){var n=U.oxw();U.xp6(2),U.hij(" ",U.lcZ(3,16,"Related task")," "),U.xp6(17),U.Oqu(U.lcZ(20,18,"Title")),U.xp6(3),U.Oqu(U.lcZ(23,20,"Content")),U.xp6(3),U.Oqu(U.lcZ(26,22,"Attachment")),U.xp6(3),U.Oqu(U.lcZ(29,24,"Timestamp")),U.xp6(3),U.Q6J("ngForOf",n._getlistv3),U.xp6(4),U.xDo(" ",U.lcZ(36,26,"Showing")," ",n.pageIndex1," - ",n.pageSize1," of ",n.totalRow1," ",U.lcZ(37,28,"records")," "),U.xp6(5),U.Q6J("boundaryLinks",!0)("totalItems",n.totalRow1)("ngModel",n.pageIndex1)("maxSize",n.pageDisplay)("itemsPerPage",n.pageSize1)}}var $e,Be=(($e=function(){function t(e,n,a,l,r,o,s,c,u,d,g){i(this,t),this._authenService=e,this._dataService=n,this._route=a,this._notifyService=l,this._uploadService=r,this._excelService=o,this._numberFormat=s,this.modalService=c,this._utilyService=u,this.sanitizer=d,this._activatedRoute=g,this._id="",this.entity={},this.entitySub={},this.baseFolder=b.h.BASE_API,this._users=[],this.follow_users=[],this.related_users=[],this.ccList=[],this.flagShow=!1,this.filesToUpload=[],this.isSave=!1,this.getlist=[],this.getlistAll=[],this.flagReply=!1,this.pageIndex=1,this.pageSize=10,this.pageDisplay=10,this.totalRow=0,this._children=[],this.entitySubDID={},this.filesToUpload1=[],this.isSaveComment=!1,this._flagFav=!1,this._flagAllowCC=!1,this._detailId="",this.pageIndex0=1,this.pageSize0=10,this.totalRow0=0,this._getlistv2=[],this.pageIndex1=1,this.pageSize1=10,this.totalRow1=0,this._getlistv3=[],this.compose=!1,this.allEmails=T.M.Emails,this.selectedEmails=[],this.type="allmail",this._idd="",this.socket=y()(b.h.BASE_API)}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this._activatedRoute.params.subscribe(function(t){e._id=t.id,e.loadUsersWithDept(e._id),e.loadDatav2(),e.socket.on("refreshPage",function(t){""!=e._detailId&&e.loadSubData(e._detailId)})})}},{key:"loadUsersWithDept",value:function(t){var i=this,n={};n.short_code=this.user.short_code,this._dataService.post("/cat-submission/getallUsersNP",n).subscribe(function(n){i._dataService.post("/tasks/detailCount",{id:t,userid:i.user.id}).subscribe(function(t){i.entity=t.data,i.related_users=null==t.data.related_users?[]:t.data.related_users.data;var a,l=[],r=e(t.data.related_users.data);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.id!=i.user.id&&l.push({id:o.id,name:o.name})}}catch(h){r.e(h)}finally{r.f()}var s,c=null==t.data.follow_users?[]:JSON.parse(t.data.follow_users),u=e(c);try{var d=function(){var e=s.value;if(i.user.id!=e){var t=n.data.filter(function(t){return t.id==e})[0];l.push({id:e,name:t.name})}};for(u.s();!(s=u.n()).done;)d()}catch(h){u.e(h)}finally{u.f()}var g,f=[],p=e(c);try{var Z=function(){var e=g.value;i.user.id==e&&(i._flagAllowCC=!0,i.compose=!1);var t=n.data.filter(function(t){return t.id==e})[0];f.push({id:e,name:t.name,avatar:t.avatar})};for(p.s();!(g=p.n()).done;)Z()}catch(h){p.e(h)}finally{p.f()}1==t.data.is_active&&(i.compose=!1),i.ccList=f,i._users=l,i.socket.emit("refresh",{})})})}},{key:"loadDetailByDID",value:function(t){var i=this;console.log(t,this.compose),this._dataService.post("/tasks/detailByDID",{did:t}).subscribe(function(t){if(console.log("Detail",t),i.compose=!0,i.entitySub=t.data,t.data.cc.length>0){var n,a=[],l=e(t.data.cc);try{for(l.s();!(n=l.n()).done;){var r=n.value;a.push(r.id)}}catch(o){l.e(o)}finally{l.f()}i.follow_users=a,i.flagShow=!0}else i.follow_users=[],i.flagShow=!1})}},{key:"fileEvent",value:function(e,t){this.filesToUpload=e.target.files,this._files=t}},{key:"submit",value:function(){var e=this;this.selectEmail=null,this.entitySub.follow_users=this.flagShow?JSON.stringify(this.follow_users):null,this.isSave=!0,this.entitySub.id=this._id,this.entitySub.parent_id=null,this.entitySub.created_by=this.user.id,null!=this.entitySub.did?(this.isSave=!1,0==this.filesToUpload.length?this._dataService.post("/tasks/updateDetail",this.entitySub).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?S.W.MSG_UPDATENO_EN:S.W.MSG_UPDATENO,"en"==e.user.lang?S.W.error_title_en:S.W.error_title):(e.entitySub={},e.entitySub.title=null,e.entitySub.content=null,e.follow_users=[],e.entitySub.follow_users=null,e.flagShow=!1,e.loadData(),e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"),e.compose=!1)},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==e.user.lang?S.W.error_title_en:S.W.error_title)}):this._processUploadDisagreeAfter(this.filesToUpload)):0==this.filesToUpload.length?(console.log("no files"),this._dataService.post("/tasks/addDetail",this.entitySub).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?S.W.MSG_ADDNO_EN:S.W.MSG_ADDNO,"en"==e.user.lang?S.W.error_title_en:S.W.error_title):(e.entitySub={},e.entitySub.title=null,e.entitySub.content=null,e.follow_users=[],e.entitySub.follow_users=null,e.flagShow=!1,e.loadData(),e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?S.W.MSG_ADD_EN:S.W.MSG_ADD,"OK"))},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==e.user.lang?S.W.error_title_en:S.W.error_title)})):(console.log("files"),this._processUploadDisagreeAfter(this.filesToUpload))}},{key:"_processUploadDisagreeAfter",value:function(e){var t=this,i={folder_name:"tasks"};i.id=this._id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+i.id+"/"+i.folder_name,e).subscribe(function(e){t.entitySub.urls={data:e.data},console.log("File path",e),null==t.entitySub.did?(console.log("add"),t._dataService.post("/tasks/addDetail",t.entitySub).subscribe(function(e){t.isSave=!1,"failed"!=e.result&&(t._files.value=[],t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_ADD_EN:S.W.MSG_ADD,"OK"),t.socket.emit("refresh",{}))},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)})):(console.log("update"),t._dataService.post("/tasks/updateDetail",t.entitySub).subscribe(function(e){t.isSave=!1,"failed"!=e.result&&(t._files.value=[],t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"),t.socket.emit("refresh",{}))},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)}))},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)})}},{key:"closeTask",value:function(e){var t=this;w().fire({title:"en"==this.user.lang?S.W.are_you_sure_complete_en:S.W.are_you_sure_complete,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?S.W.cancel_en:S.W.cancel,confirmButtonText:"en"==this.user.lang?S.W.confirmtext_en:S.W.confirmtext}).then(function(i){if(i.value){var n={};n.id=e.id,n.stat=!0,t._dataService.post("/tasks/closeTask",n).subscribe(function(e){"failed"!=e.result?(t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"),t._route.navigate(["/tasks/requests"])):t._notifyService.showError("en"==t.user.lang?S.W.MSG_UPDATENO_EN:S.W.MSG_UPDATENO,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)},function(){t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)})}})}},{key:"loadData",value:function(){var e=this;this._dataService.post("/tasks/getalltaskdetail",{userid:this.user.id,id:this._id}).subscribe(function(t){e.getlist=t.data.filter(function(e){return 2!=e.type}),e.getlistAll=t.data})}},{key:"loadDatav2",value:function(){var e=this;this._dataService.post("/tasks/getalltaskdetailv2",{userid:this.user.id,id:this._id,page:this.pageIndex0,limit:this.pageSize0,type:this.type}).subscribe(function(t){e._getlistv2=t.data,e.totalRow0=t.rowCount,e.totalPage0=t.totalPages,e._all=t.all,e._fav=t.fav,e._trash=t.trash,e._pending=t.pending,e._important=t.important})}},{key:"pageChanged0",value:function(e){this.pageIndex0=e.page,this.loadDatav2()}},{key:"getUserEmailv2",value:function(e){this.type=e,this.compose=!1,this.selectEmail=null,this.loadDatav2()}},{key:"getUserEmail",value:function(t){var i=this;if("allmail"==t)return this.getlist;if("favourite"==t){var n,a=[],l=e(this.getlistAll.filter(function(e){return null!=e.favorites&&2!=e.type}));try{for(l.s();!(n=l.n()).done;){var r=n.value;r.favorites.data.filter(function(e){return e.id==i.user.id&&e.stat}).length>0&&a.push(r)}}catch(o){l.e(o)}finally{l.f()}return a}return"trash"===t?this.getlistAll.filter(function(e){return 2==e.type}):"pending"===t?this.getlistAll.filter(function(e){return(null==e.is_active||0==e.is_active)&&2!=e.type}):"important"===t?this.getlistAll.filter(function(e){return 1==e.type}):[]}},{key:"selectedUserEmail",value:function(e){var t=this;this.selectEmail=e,this.flagReply=!1,null!=this.selectEmail&&(this._flagFav=null!=this.selectEmail.favorites&&this.selectEmail.favorites.data.filter(function(e){return e.id==t.user.id&&e.stat}).length>0),this.compose=!1,this._detailId=e.did,this.loadSubData(e.did)}},{key:"selectedmail",value:function(e,t){var i=this;w().fire({title:"en"==this.user.lang?S.W.are_you_sure_complete_en:S.W.are_you_sure_complete,text:t.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?S.W.cancel_en:S.W.cancel,confirmButtonText:"en"==this.user.lang?S.W.confirmtext_en:S.W.confirmtext}).then(function(e){if(e.value){var n={};n.did=t.did,n.stat=!0,i._dataService.post("/tasks/updateStatus",n).subscribe(function(e){i._notifyService.showSuccess("en"==i.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"),i.selectEmail=e.data,i.loadUsersWithDept(i._id),i.loadData(),i.loadSubData(i._detailId)},function(){i._notifyService.showError("en"==i.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==i.user.lang?S.W.error_title_en:S.W.error_title)})}})}},{key:"moveEmails",value:function(e){!e||this.selectedEmails.filter(function(t){return t.type=e})}},{key:"addFavourite",value:function(e){console.log(e),this.updateFavorite(e.did,!this._flagFav)}},{key:"_downloadFileResult",value:function(e){window.open(b.h.BASE_API+"/"+e,"blank")}},{key:"loadSubData",value:function(e){var t=this;this._dataService.post("/tasks/getalltaskdetailbydid",{did:e,page:this.pageIndex,limit:this.pageSize}).subscribe(function(e){t._children=e.data,t.totalRow=e.rowCount,t.totalPage=e.totalPages})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.loadSubData(this._detailId)}},{key:"_createNew",value:function(){this.compose=!0,this.selectEmail=null,this.entitySub={},this.entitySub.did=null,this._children=[],this.follow_users=[],this.flagShow=!1}},{key:"fileEvent1",value:function(e,t){this.filesToUpload1=e.target.files,this._files1=t}},{key:"submitComment",value:function(e){var t=this;this.isSaveComment=!0,this.entitySubDID.id=this._id,this.entitySubDID.parent_id=e.did,this.entitySubDID.created_by=this.user.id,this.entitySubDID.title="Re: "+e.title,0==this.filesToUpload1.length?this._dataService.post("/tasks/addDetail",this.entitySubDID).subscribe(function(e){t.isSaveComment=!1,t.flagReply=!1,"failed"===e.result?t._notifyService.showError("en"==t.user.lang?S.W.MSG_ADDNO_EN:S.W.MSG_ADDNO,"en"==t.user.lang?S.W.error_title_en:S.W.error_title):(t.entitySubDID={},t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_ADD_EN:S.W.MSG_ADD,"OK"))},function(){t.isSaveComment=!1,t.flagReply=!1,t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)}):this._processUploadDisagreeAfter1(this.filesToUpload1,e.did)}},{key:"_processUploadDisagreeAfter1",value:function(e,t){var i=this,n={folder_name:"tasks"};n.id=this._id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+n.id+"/"+n.folder_name,e).subscribe(function(e){i.entitySubDID.urls={data:e.data},i._dataService.post("/tasks/addDetail",i.entitySubDID).subscribe(function(e){i.isSaveComment=!1,i.flagReply=!1,"failed"!=e.result&&(i._files1.value=[],i._notifyService.showSuccess("en"==i.user.lang?S.W.MSG_ADD_EN:S.W.MSG_ADD,"OK"),i.loadSubData(t))},function(){i.isSaveComment=!1,i.flagReply=!1,i._notifyService.showError("en"==i.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==i.user.lang?S.W.error_title_en:S.W.error_title)})},function(){i.isSaveComment=!1,i.flagReply=!1,i._notifyService.showError("en"==i.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==i.user.lang?S.W.error_title_en:S.W.error_title)})}},{key:"updateFavorite",value:function(e,t){var i=this,n={};n.did=e,n.stat=t,n.userid=this.user.id,this._dataService.post("/tasks/updateFavorite",n).subscribe(function(t){"failed"===t.result?i._notifyService.showError("en"==i.user.lang?S.W.MSG_UPDATENO_EN:S.W.MSG_UPDATENO,"en"==i.user.lang?S.W.error_title_en:S.W.error_title):(i.compose=!0,i._children=[],i.selectEmail=t.data,i.loadData(),i.loadSubData(e),i._notifyService.showSuccess("en"==i.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"))},function(){i._notifyService.showError("en"==i.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==i.user.lang?S.W.error_title_en:S.W.error_title)})}},{key:"updateType",value:function(e,t){var i=this;this.compose=!0,this._children=[];var n={};n.did=e.did,n.type=1==e.type?null:t,this._dataService.post("/tasks/updateTypes",n).subscribe(function(t){"failed"===t.result?i._notifyService.showError("en"==i.user.lang?S.W.MSG_UPDATENO_EN:S.W.MSG_UPDATENO,"en"==i.user.lang?S.W.error_title_en:S.W.error_title):(i.loadUsersWithDept(i._id),i.loadDatav2(),i.loadSubData(e.did),i._notifyService.showSuccess("en"==i.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"))},function(){i._notifyService.showError("en"==i.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==i.user.lang?S.W.error_title_en:S.W.error_title)})}},{key:"_editComposer",value:function(e){this.compose=!1,this.selectEmail=null,this.loadDetailByDID(e.did)}},{key:"loadDatav3",value:function(e){var t=this;this._dataService.post("/tasks/getalltaskdetailv3",{userid:this.user.id,id:e,page:this.pageIndex1,limit:this.pageSize1,type:"allmail"}).subscribe(function(e){t._getlistv3=e.data,t.totalRow1=e.rowCount,t.totalPage1=e.totalPages})}},{key:"pageChanged1",value:function(e){this.pageIndex1=e.page,this.loadDatav3(this._idd)}},{key:"popupModalEdit",value:function(e,t){this._idd=t.id,this.loadDatav3(t.id),this.modalService.open(e,{size:"lg",centered:!0})}}]),t}()).\u0275fac=function(e){return new(e||$e)(U.Y36(u.e),U.Y36(c.D),U.Y36(x.F0),U.Y36(M.c),U.Y36(s.C),U.Y36(o.x),U.Y36(E.p),U.Y36(C.FF),U.Y36(N.t),U.Y36(J.H7),U.Y36(x.gz))},$e.\u0275cmp=U.Xpm({type:$e,selectors:[["app-task-detail"]],decls:90,vars:47,consts:[[1,"container-fluid"],[1,"email-wrap"],[1,"row"],[1,"col-xl-3","col-md-6"],[1,"email-left-aside"],[1,"card"],[1,"card-body"],[1,"email-app-sidebar"],[1,"media"],[1,"media-size-email"],[4,"ngIf"],[1,"media-body"],[1,"f-w-600"],[1,"customers","d-inline-block","avatar-group"],["class","d-inline-block",4,"ngFor","ngForOf"],["role","tablist",1,"nav","main-menu"],[1,"nav-item"],["routerLink","/tasks/requests","id","pills-darkhome-tab","data-toggle","pill","role","tab","aria-controls","pills-darkhome","aria-selected","true",1,"btn-primary","btn-block","btn-mail"],[1,"icofont","icofont-rounded-double-left","mr-2"],["href","javascript:;","class","btn-success btn-block btn-mail","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",3,"click",4,"ngIf"],["class","nav-item",3,"click",4,"ngIf"],[1,"nav-item",3,"click"],["href","javascript:void(0)","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",1,"show"],[1,"title"],[1,"icon-info-alt"],[1,"badge","pull-right","digits"],[3,"click"],["href","javascript:void(0)"],[1,"icon-star"],[1,"icon-folder"],[1,"icon-pencil-alt"],[3,"ngClass"],[3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-xl-9","col-md-12"],[1,"email-right-aside"],[1,"card","email-body"],["class","pr-0 b-r-light",4,"ngIf"],["class","email-compose",4,"ngIf"],["class","email-content",4,"ngIf"],["popupRelatedTaskModal",""],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-60",3,"alt"],[1,"mr-3","rounded-circle","img-60",3,"src","alt"],[1,"d-inline-block"],[1,"img-40","rounded-circle",3,"src","alt","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"img-40","rounded-circle",3,"alt","ngbTooltip"],["href","javascript:;","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",1,"btn-success","btn-block","btn-mail",3,"click"],[1,"icon-share","mr-2"],[1,"icon-trash"],["href","javascript:;",3,"click"],[1,"pr-0","b-r-light"],[1,"email-top"],["class","page-title",4,"ngIf"],[1,"inbox"],[1,"table-responsive"],[1,"table","table-hover"],["scope","col"],[1,"icon-image"],[1,"col-sm-5"],[1,"p-15"],[1,"col-sm-7"],[2,"float","right","padding-right","5px"],["previousText","\u2039","nextText","\u203a","firstText","\xab","name","paginationss","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"page-title"],["class","icon-pencil-alt","style","cursor: pointer",3,"click",4,"ngIf"],[3,"ngClass",4,"ngIf"],[2,"cursor","pointer",3,"click"],[3,"innerHtml",4,"ngIf"],["class","search-info",4,"ngIf"],[1,"text-right"],[1,"icon-pencil-alt",2,"cursor","pointer",3,"click"],[1,"mr-3","rounded-circle","img-30",3,"src","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-30",3,"ngbTooltip"],[3,"innerHtml"],[1,"search-info"],[1,"fa","fa-paperclip",2,"cursor","pointer",3,"click"],[1,"email-compose"],[1,"email-top","compose-border"],[1,"col-sm-8","xl-50"],[1,"mb-0"],[1,"col-sm-4","btn-middle","xl-50"],["type","button",1,"btn","btn-primary","btn-block","btn-mail","text-center","mb-0","mt-0",3,"click"],[1,"fa","fa-paper-plane","mr-2"],[1,"email-wrapper"],[1,"theme-form"],[1,"form-group"],["for","title"],[1,"text-danger"],["id","title","type","text","name","title","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","chk-hidden",1,"d-block"],["id","chk-hidden","name","chk-hidden","type","checkbox",1,"checkbox_animated",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"form-group","mb-0"],["id","content",1,"text-muted"],["name","content","id","content","skin","moono-lisa","language","en",3,"ngModel","ngModelChange"],["for","filesToUpload",1,"col-form-label","pt-0"],["id","filesToUpload","name","filesToUpload","multiple","","type","file","accept",".pdf,.doc,.docx,.png,.jpg,jpeg",1,"form-control",3,"change"],["filesToUpload",""],["for","follower"],["name","_usersCc","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange"],[1,"email-content"],[1,"col-md-6","xl-100","col-sm-12"],[1,"digits"],[2,"cursor","pointer","font-size","16pt",3,"ngClass","click"],[1,"col-md-6","col-sm-12"],[1,"float-right","d-flex"],[1,"user-emailid"],[1,"fa","fa-star-o","f-18","mt-1",2,"cursor","pointer",3,"click"],[3,"innerHTML"],[1,"action-wrapper"],[1,"actions"],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-50",3,"alt"],["alt","image",1,"mr-3","rounded-circle","img-50",3,"src"],[1,"text-muted"],[1,"icofont","icofont-clip"],["href","javascript:void(0)",1,"text-muted","text-right","right-download"],[1,"fa","fa-long-arrow-down","mr-2"],[1,"clearfix"],[1,"attachment"],[1,"list-inline"],["class","list-inline-item",4,"ngFor","ngForOf"],[1,"list-inline-item"],["src","../../../../assets/files/ico_file.png",1,"img-fluid",2,"width","20px","height","25px","cursor","pointer",3,"click"],["href","javascript:void(0)",1,"text-muted",3,"click"],[1,"fa","fa-reply","mr-2"],[1,"fa","fa-save","mr-2","text-success"],[1,"fa","fa-trash","text-danger","mr-2"],[1,"fa","fa-recycle","mr-2"],[1,"col-md-12"],[1,"input-group"],["type","text","aria-label","Recipient's username","name","comment",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"input-group-append"],[1,"input-group-text","btn-file"],[1,"icofont","icofont-attachment"],["type","file","name","filesToUpload1","multiple","","type","file","accept",".pdf,.doc,.docx,.png,.jpg,jpeg",3,"change"],["filesToUpload1",""],[1,"input-group-text",3,"click"],["class","icofont icofont-save",4,"ngIf"],[1,"icofont","icofont-save"],[1,"table","card-table","table-vcenter","text-nowrap"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["previousText","\u2039","nextText","\u203a","firstText","\xab","name","paginationss1","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],["colspan","6"]],template:function(e,t){1&e&&(U.TgZ(0,"div",0),U.TgZ(1,"div",1),U.TgZ(2,"div",2),U.TgZ(3,"div",3),U.TgZ(4,"div",4),U.TgZ(5,"div",5),U.TgZ(6,"div",6),U.TgZ(7,"div",7),U.TgZ(8,"div",8),U.TgZ(9,"div",9),U.YNc(10,Q,2,1,"ng-container",10),U.YNc(11,W,2,2,"ng-container",10),U.qZA(),U.TgZ(12,"div",11),U.TgZ(13,"h6",12),U._uU(14),U.qZA(),U.TgZ(15,"p"),U._uU(16),U.qZA(),U.qZA(),U.qZA(),U.TgZ(17,"div",8),U.TgZ(18,"div",11),U.TgZ(19,"p"),U._uU(20),U.ALo(21,"translate"),U.qZA(),U.TgZ(22,"p"),U._uU(23),U.ALo(24,"translate"),U.qZA(),U.TgZ(25,"p"),U._uU(26),U.ALo(27,"translate"),U.qZA(),U.TgZ(28,"div",13),U.TgZ(29,"ul"),U.YNc(30,Y,3,2,"li",14),U.qZA(),U.qZA(),U.YNc(31,j,7,4,"ng-container",10),U.qZA(),U.qZA(),U.TgZ(32,"ul",15),U.TgZ(33,"li",16),U.TgZ(34,"a",17),U._UZ(35,"i",18),U._uU(36),U.ALo(37,"translate"),U.qZA(),U.YNc(38,G,5,6,"a",19),U.qZA(),U.TgZ(39,"li"),U._UZ(40,"hr"),U.qZA(),U.YNc(41,$,6,3,"li",20),U.TgZ(42,"li",21),U.NdJ("click",function(){return t.getUserEmailv2(t.type="important")}),U.TgZ(43,"a",22),U.TgZ(44,"span",23),U._UZ(45,"i",24),U._uU(46),U.ALo(47,"translate"),U.qZA(),U.TgZ(48,"span",25),U._uU(49),U.qZA(),U.qZA(),U.qZA(),U.TgZ(50,"li",26),U.NdJ("click",function(){return t.getUserEmailv2(t.type="favourite")}),U.TgZ(51,"a",27),U.TgZ(52,"span",23),U._UZ(53,"i",28),U._uU(54),U.ALo(55,"translate"),U.qZA(),U.TgZ(56,"span",25),U._uU(57),U.qZA(),U.qZA(),U.qZA(),U.TgZ(58,"li",26),U.NdJ("click",function(){return t.getUserEmailv2(t.type="allmail")}),U.TgZ(59,"a",27),U.TgZ(60,"span",23),U._UZ(61,"i",29),U._uU(62),U.ALo(63,"translate"),U.qZA(),U.TgZ(64,"span",25),U._uU(65),U.qZA(),U.qZA(),U.qZA(),U.TgZ(66,"li",26),U.NdJ("click",function(){return t.getUserEmailv2(t.type="pending")}),U.TgZ(67,"a",27),U.TgZ(68,"span",23),U._UZ(69,"i",30),U._uU(70),U.ALo(71,"translate"),U.qZA(),U.TgZ(72,"span",31),U._uU(73),U.qZA(),U.qZA(),U.qZA(),U.YNc(74,B,8,4,"li",32),U.qZA(),U.TgZ(75,"div",8),U.TgZ(76,"div",11),U.TgZ(77,"p"),U._uU(78),U.ALo(79,"translate"),U.qZA(),U.TgZ(80,"ul"),U.YNc(81,z,3,1,"li",33),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.TgZ(82,"div",34),U.TgZ(83,"div",35),U.TgZ(84,"div",36),U.YNc(85,Ze,41,32,"div",37),U.YNc(86,me,39,24,"div",38),U.YNc(87,Oe,39,28,"div",39),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.YNc(88,Ge,41,30,"ng-template",null,40,U.W1O)),2&e&&(U.xp6(10),U.Q6J("ngIf",null==t.user.avatar),U.xp6(1),U.Q6J("ngIf",null!=t.user.avatar),U.xp6(3),U.Oqu(t.user.name),U.xp6(2),U.Oqu(t.user.email),U.xp6(4),U.AsE("",U.lcZ(21,29,"Title"),": ",t.entity.title,""),U.xp6(3),U.AsE("",U.lcZ(24,31,"Content"),": ",t.entity.description,""),U.xp6(3),U.hij("",U.lcZ(27,33,"Assigned to"),":"),U.xp6(4),U.Q6J("ngForOf",t.related_users),U.xp6(1),U.Q6J("ngIf",t.ccList.length>0),U.xp6(5),U.hij(" ",U.lcZ(37,35,"Return")," "),U.xp6(2),U.Q6J("ngIf",0==t.entity.is_active),U.xp6(3),U.Q6J("ngIf",!t._flagAllowCC&&1!=t.entity.is_active),U.xp6(5),U.hij(" ",U.lcZ(47,37,"Important"),""),U.xp6(3),U.hij("(",t._important,")"),U.xp6(5),U.hij(" ",U.lcZ(55,39,"Favourite"),""),U.xp6(3),U.hij("(",t._fav,")"),U.xp6(5),U.hij(" ",U.lcZ(63,41,"All"),""),U.xp6(3),U.hij("(",t._all,")"),U.xp6(5),U.hij(" ",U.lcZ(71,43,"Pending"),""),U.xp6(2),U.Q6J("ngClass",0==t._pending?"badge pull-right digits":"badge pull-right text-danger digits"),U.xp6(1),U.hij("(",t._pending,")"),U.xp6(1),U.Q6J("ngIf",!t._flagAllowCC),U.xp6(4),U.hij("",U.lcZ(79,45,"Related task"),":"),U.xp6(3),U.Q6J("ngForOf",t.entity.branches),U.xp6(4),U.Q6J("ngIf",!t.compose&&null==t.selectEmail),U.xp6(1),U.Q6J("ngIf",t.compose&&null==t.selectEmail),U.xp6(1),U.Q6J("ngIf",null!=t.selectEmail))},directives:[r.O5,r.sg,x.yS,r.mk,C._L,Z.Qt,A.JJ,A.On,A._Y,A.JL,A.F,A.Fj,A.Q7,A.Wl,D.u,I.w9],pipes:[O.X$,r.uU],styles:[".btn-file[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;text-align:right;opacity:0;outline:none;background:#fff;cursor:pointer;display:block}"]}),$e),ze=l(16738),Ke=l(21388);function Ve(e,t){1&e&&U._UZ(0,"img",31)}function Xe(e,t){1&e&&(U.ynx(0),U.TgZ(1,"tr"),U.TgZ(2,"td",32),U.TgZ(3,"h3",33),U._uU(4),U.ALo(5,"translate"),U.qZA(),U.qZA(),U.qZA(),U.BQk()),2&e&&(U.xp6(4),U.hij(" ",U.lcZ(5,1,"No records now!!!")," "))}function et(e,t){if(1&e&&(U.ynx(0),U._uU(1),U.ALo(2,"date"),U.BQk()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.Oqu(U.xi3(2,1,i.valid_date,"dd/MM/yyyy HH:mm"))}}function tt(e,t){1&e&&(U.ynx(0),U._uU(1),U.ALo(2,"translate"),U.BQk()),2&e&&(U.xp6(1),U.Oqu(U.lcZ(2,1,"Indefinite")))}function it(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",45),U.BQk()),2&e){var i=U.oxw().$implicit,n=U.oxw(3);U.xp6(1),U.s9C("alt",i.name),U.Q6J("src",n.baseFolder+"/"+i.avatar,U.LSH)("ngbTooltip",i.name)}}function nt(e,t){if(1&e&&(U.ynx(0),U._UZ(1,"img",46),U.BQk()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.s9C("alt",i.name),U.Q6J("ngbTooltip",i.name)}}function at(e,t){if(1&e&&(U.TgZ(0,"li",44),U.YNc(1,it,2,3,"ng-container",28),U.YNc(2,nt,2,2,"ng-container",28),U.qZA()),2&e){var i=t.$implicit;U.xp6(1),U.Q6J("ngIf",null!=i.avatar),U.xp6(1),U.Q6J("ngIf",null==i.avatar)}}function lt(e,t){if(1&e&&(U.TgZ(0,"div",42),U.TgZ(1,"ul"),U.YNc(2,at,3,2,"li",43),U.qZA(),U.qZA()),2&e){var i=U.oxw().$implicit;U.xp6(2),U.Q6J("ngForOf",i.related_users.data)}}function rt(e,t){1&e&&(U.TgZ(0,"span",47),U._uU(1),U.ALo(2,"translate"),U.qZA()),2&e&&(U.xp6(1),U.Oqu(U.lcZ(2,1,"Opening")))}function ot(e,t){1&e&&(U.TgZ(0,"span",48),U._uU(1),U.ALo(2,"translate"),U.qZA()),2&e&&(U.xp6(1),U.Oqu(U.lcZ(2,1,"Completed")))}function st(e,t){1&e&&(U.TgZ(0,"span",49),U._uU(1),U.ALo(2,"translate"),U.qZA()),2&e&&(U.xp6(1),U.Oqu(U.lcZ(2,1,"Cancel")))}function ct(e,t){if(1&e&&(U.TgZ(0,"span"),U._uU(1),U.qZA()),2&e){var i=U.oxw().$implicit;U.xp6(1),U.hij(" ",i.total_time,"h ")}}function ut(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"button",53),U.NdJ("click",function(){U.CHM(i);var e=U.oxw(2).$implicit;return U.oxw().deleteItem(e)}),U.ALo(1,"translate"),U._UZ(2,"i",54),U.qZA()}2&e&&U.Q6J("ngbTooltip",U.lcZ(1,1,"Delete"))}function dt(e,t){if(1&e){var i=U.EpF();U.ynx(0),U.TgZ(1,"button",50),U.NdJ("click",function(){U.CHM(i);var e=U.oxw().$implicit,t=U.oxw(),n=U.MAs(81);return t._openModal(n,e)}),U.ALo(2,"translate"),U._UZ(3,"i",51),U.qZA(),U.YNc(4,ut,3,3,"button",52),U.BQk()}if(2&e){var n=U.oxw().$implicit;U.xp6(1),U.Q6J("ngbTooltip",U.lcZ(2,2,"Edit")),U.xp6(3),U.Q6J("ngIf",0==n.is_active)}}function gt(e,t){if(1&e){var i=U.EpF();U.ynx(0),U.TgZ(1,"tr"),U.TgZ(2,"td",27),U._uU(3),U.qZA(),U.TgZ(4,"td",27),U.TgZ(5,"a",34),U._uU(6),U.qZA(),U.qZA(),U.TgZ(7,"td",27),U.YNc(8,et,3,4,"ng-container",28),U.YNc(9,tt,3,3,"ng-container",28),U.qZA(),U.TgZ(10,"td",27),U.YNc(11,lt,3,1,"div",35),U.qZA(),U.TgZ(12,"td",36),U.NdJ("click",function(){var e=U.CHM(i).$implicit,t=U.oxw();return 0==e.is_active?t._addReminder(e):null}),U._UZ(13,"i",37),U.ALo(14,"translate"),U.TgZ(15,"span",38),U._uU(16),U.qZA(),U.qZA(),U.TgZ(17,"td",27),U._uU(18),U.ALo(19,"translate"),U.qZA(),U.TgZ(20,"td",27),U.YNc(21,rt,3,3,"span",39),U.YNc(22,ot,3,3,"span",40),U.YNc(23,st,3,3,"span",41),U.qZA(),U.TgZ(24,"td"),U.YNc(25,ct,2,1,"span",28),U.qZA(),U.TgZ(26,"td",27),U.YNc(27,dt,5,4,"ng-container",28),U.qZA(),U.qZA(),U.BQk()}if(2&e){var n=t.$implicit,a=t.index,l=U.oxw();U.xp6(3),U.hij(" ",a+1," "),U.xp6(2),U.MGl("routerLink","/tasks/requests/detail/",n.id,""),U.xp6(1),U.Oqu(n.title),U.xp6(2),U.Q6J("ngIf",null!=n.valid_date),U.xp6(1),U.Q6J("ngIf",null==n.valid_date),U.xp6(2),U.Q6J("ngIf",null!=n.related_users),U.xp6(2),U.Q6J("ngbTooltip",U.lcZ(14,16,"Reminder")),U.xp6(3),U.Oqu(null==n.reminder?0:n.reminder),U.xp6(2),U.lnq(" ",U.lcZ(19,18,"Viewed")," (",n.count_view,"/",n.total_users,") "),U.xp6(3),U.Q6J("ngIf",0==n.is_active),U.xp6(1),U.Q6J("ngIf",1==n.is_active),U.xp6(1),U.Q6J("ngIf",2==n.is_active),U.xp6(2),U.Q6J("ngIf",1==n.is_active),U.xp6(2),U.Q6J("ngIf",n.created_by==l.user.id)}}function ft(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"a",77),U.NdJ("click",function(){return U.CHM(i),U.oxw(2).turnOnFlagCC()}),U._uU(1),U.ALo(2,"translate"),U.qZA()}2&e&&(U.xp6(1),U.Oqu(U.lcZ(2,1,"Cc")))}function pt(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"div",61),U.TgZ(1,"label",78),U._uU(2),U.ALo(3,"translate"),U.qZA(),U.TgZ(4,"ng-select",79),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw(2).follow_users=e}),U.ALo(5,"translate"),U.ALo(6,"translate"),U.qZA(),U.qZA()}if(2&e){var n=U.oxw(2);U.xp6(2),U.Oqu(U.lcZ(3,10,"Followers")),U.xp6(2),U.Q6J("items",n._usersCc)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",n.follow_users)("placeholder",U.lcZ(5,12,"Please choose"))("notFoundText",U.lcZ(6,14,"Not found item"))("disabled",0!=n.entity.is_active)}}function Zt(e,t){1&e&&(U.ynx(0),U.TgZ(1,"a",80),U._UZ(2,"img",81),U._uU(3),U.ALo(4,"translate"),U.qZA(),U.BQk()),2&e&&(U.xp6(3),U.hij(" ",U.lcZ(4,1,"Processing")," "))}function ht(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"button",83),U.NdJ("click",function(){return U.CHM(i),U.oxw(3).saveChange()}),U._uU(1),U.ALo(2,"translate"),U.qZA()}2&e&&(U.xp6(1),U.hij(" ",U.lcZ(2,1,"Save")," "))}function _t(e,t){if(1&e&&(U.ynx(0),U.YNc(1,ht,3,3,"button",82),U.BQk()),2&e){var i=U.oxw(2);U.xp6(1),U.Q6J("ngIf",!i.isSave)}}var vt=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm:ss",containerClass:"theme-dark-blue"}};function mt(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"div",55),U.TgZ(1,"h4",56),U._uU(2),U.ALo(3,"translate"),U.qZA(),U.TgZ(4,"button",57),U.NdJ("click",function(){return U.CHM(i).$implicit.dismiss("Cross click")}),U.TgZ(5,"span",58),U._uU(6,"\xd7"),U.qZA(),U.qZA(),U.qZA(),U.TgZ(7,"div",59),U.TgZ(8,"div",60),U.TgZ(9,"div",61),U.TgZ(10,"label",62),U._uU(11),U.ALo(12,"translate"),U.TgZ(13,"span",33),U._uU(14,"*"),U.qZA(),U.qZA(),U.TgZ(15,"input",63),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw().entity.title=e}),U.qZA(),U.qZA(),U.TgZ(16,"div",61),U.TgZ(17,"label",64),U._uU(18),U.ALo(19,"translate"),U.TgZ(20,"span",33),U._uU(21,"*"),U.qZA(),U.qZA(),U.TgZ(22,"textarea",65),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw().entity.description=e}),U.qZA(),U.qZA(),U.TgZ(23,"div",61),U.TgZ(24,"label",66),U._uU(25),U.ALo(26,"translate"),U.TgZ(27,"span",67),U._uU(28,"*"),U.qZA(),U.YNc(29,ft,3,3,"a",68),U.qZA(),U.TgZ(30,"ng-select",69),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw().related_users=e})("change",function(){return U.CHM(i),U.oxw().changeUserCC()}),U.ALo(31,"translate"),U.ALo(32,"translate"),U.qZA(),U.qZA(),U.YNc(33,pt,7,16,"div",70),U.TgZ(34,"div",61),U.TgZ(35,"label",71),U._uU(36),U.ALo(37,"translate"),U.qZA(),U.TgZ(38,"input",72),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw().jdate=e})("bsValueChange",function(e){return U.CHM(i),U.oxw().orgValueChange(e)}),U.ALo(39,"translate"),U.qZA(),U.qZA(),U.TgZ(40,"div",61),U.TgZ(41,"label",73),U._uU(42),U.ALo(43,"translate"),U.qZA(),U.TgZ(44,"nz-tree-select",74),U.NdJ("ngModelChange",function(e){return U.CHM(i),U.oxw()._parentIds=e}),U.ALo(45,"translate"),U.ALo(46,"translate"),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.TgZ(47,"div",75),U.TgZ(48,"button",76),U.NdJ("click",function(){return U.CHM(i).$implicit.dismiss("Cross click")}),U._uU(49),U.ALo(50,"translate"),U.qZA(),U.YNc(51,Zt,5,3,"ng-container",28),U.YNc(52,_t,2,1,"ng-container",28),U.qZA()}if(2&e){var n=U.oxw();U.xp6(2),U.AsE(" ",U.lcZ(3,35,"ADD"==n._flagModal?"Add new":"Update")," ",n._title," "),U.xp6(9),U.hij("",U.lcZ(12,37,"Title")," "),U.xp6(4),U.Q6J("ngModel",n.entity.title)("disabled",0!=n.entity.is_active),U.xp6(3),U.hij("",U.lcZ(19,39,"Content")," "),U.xp6(4),U.Q6J("ngModel",n.entity.description)("disabled",0!=n.entity.is_active),U.xp6(3),U.hij("",U.lcZ(26,41,"Assigned to")," "),U.xp6(4),U.Q6J("ngIf",0==n.entity.is_active),U.xp6(1),U.Q6J("items",n._users)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",n.related_users)("placeholder",U.lcZ(31,43,"Please choose"))("notFoundText",U.lcZ(32,45,"Not found item"))("disabled",0!=n.entity.is_active),U.xp6(3),U.Q6J("ngIf",n.flagCc),U.xp6(3),U.Oqu(U.lcZ(37,47,"Valid date")),U.xp6(2),U.Q6J("placeholder",U.lcZ(39,49,"Indefinite"))("ngModel",n.jdate)("bsConfig",U.DdM(59,vt))("disabled",0!=n.entity.is_active),U.xp6(4),U.Oqu(U.lcZ(43,51,"Related task")),U.xp6(2),U.s9C("nzPlaceHolder",U.lcZ(45,53,"Please choose")),U.hYB("nzNotFoundContent","","===>>>>"," ",U.lcZ(46,55,"No Data"),""),U.Q6J("ngModel",n._parentIds)("nzNodes",n._taskrelative)("disabled",0!=n.entity.is_active),U.xp6(5),U.hij(" ",U.lcZ(50,57,"Close")," "),U.xp6(2),U.Q6J("ngIf",n.isSave),U.xp6(1),U.Q6J("ngIf",0==n.entity.is_active)}}var At=[{path:"",children:[{path:"requests",component:function(){var t=function(){function t(e,n,a,l,r,o,s,c,u,d){i(this,t),this._authenService=e,this._dataService=n,this._route=a,this._notifyService=l,this._uploadService=r,this._excelService=o,this._numberFormat=s,this.modalService=c,this._utilyService=u,this.sanitizer=d,this._keyword="",this.baseFolder=b.h.BASE_API,this._isLoading=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._requestslist=[],this._title="",this._flagModal="ADD",this.isSave=!1,this.entity={},this.related_users=[],this.follow_users=[],this._users=[],this._usersCc=[],this.jdate=null,this.flagCc=!1,this._taskrelative=[],this._parentIds=[],this.socket=y()(b.h.BASE_API)}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadUsersWithDept(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var t=this;this._isLoading=!0;var i={};i.page=this.pageIndex,i.limit=this.pageSize,i.filter=this._keyword,i.userid=this.user.id,this._dataService.post("/tasks/getall",i).subscribe(function(i){var n,a=[],l=e(i.data);try{for(l.s();!(n=l.n()).done;){var r=n.value;if(null!=r.related_users){var o=r.related_users.data.filter(function(e){return e.is_view}).length;r.count_view=o,r.total_users=r.related_users.data.length}else r.count_view=0,r.total_users=0;a.push(r)}}catch(s){l.e(s)}finally{l.f()}t._requestslist=a,t.totalRow=i.rowCount,t.totalPage=i.totalPages,t._isLoading=!1})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadUsersWithDept",value:function(){var t=this,i={};i.short_code=this.user.short_code,this._dataService.post("/cat-submission/getallUsersNP",i).subscribe(function(i){console.log(i),t._users=i.data;var n=[];if(null!=t.entity.follow_users){var a,l=e(t._users);try{var r=function(){var e=a.value;null!=t.entity.follow_users&&0==JSON.parse(t.entity.follow_users).filter(function(t){return t==e.id}).length&&n.push(e)};for(l.s();!(a=l.n()).done;)r()}catch(o){l.e(o)}finally{l.f()}t._usersCc=n}else t._usersCc=t._users})}},{key:"changeUserCC",value:function(){var t=this;if(console.log("Before",this.related_users,this.follow_users),0==this.related_users.length)this.entity.related_users=null;else{var i,n=[],a=[],l=e(this.related_users);try{var r=function(){var e=i.value,l=t._users.filter(function(t){return t.id==e})[0];n.push({id:e,name:l.name,avatar:l.avatar,is_view:!1}),a.push(e)};for(l.s();!(i=l.n()).done;)r()}catch(d){l.e(d)}finally{l.f()}this.entity.related_users={data:n},this.entity.joined_users=0==a.length?null:JSON.stringify(a)}var o,s=[],c=e(this._users);try{var u=function(){var e=o.value;0==t.related_users.filter(function(t){return t==e.id}).length&&s.push(e)};for(c.s();!(o=c.n()).done;)u()}catch(d){c.e(d)}finally{c.f()}this._usersCc=s}},{key:"turnOnFlagCC",value:function(){var t=this;if(this.flagCc=!this.flagCc,this.flagCc){var i,n=[],a=e(this._users);try{var l=function(){var e=i.value;0==t.related_users.filter(function(t){return t==e.id}).length&&n.push(e)};for(a.s();!(i=a.n()).done;)l()}catch(r){a.e(r)}finally{a.f()}this._usersCc=n}}},{key:"_openModal",value:function(e,t){null==t?(this.loadTaskRelative(),this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.title=null,this.entity.description=null,this.related_users=[],this.entity.related_users={data:[]},this.follow_users=[],this.jdate=null,this.entity.valid_date=null,this.entity.is_active=0,this.entity.created_by=this.user.id):(this._flagModal="UPDATE",this.loadDetailById(t.id)),this.modalService.open(e,{size:"md",centered:!0,backdrop:!1})}},{key:"loadDetailById",value:function(t){var i=this;this._dataService.post("/tasks/detail",{id:t}).subscribe(function(t){i.entity=t.data;var n=[];if(null!=t.data.related_users){var a,l=e(t.data.related_users.data);try{for(l.s();!(a=l.n()).done;){var r=a.value;n.push(r.id)}}catch(d){l.e(d)}finally{l.f()}}if(i.related_users=n,null!=t.data.valid_date&&(i.jdate=new Date(t.data.valid_date),i.entity.valid_date=ze(new Date(i.jdate)).format("DD/MM/YYYY HH:mm:ss")),null!=t.data.follow_users){i.flagCc=!0,i.follow_users=JSON.parse(t.data.follow_users);var o,s=[],c=e(i._users);try{var u=function(){var e=o.value;0==t.data.related_users.data.filter(function(t){return t.id==e.id}).length&&s.push(e)};for(c.s();!(o=c.n()).done;)u()}catch(d){c.e(d)}finally{c.f()}i._usersCc=s}else i.flagCc=!1,i.follow_users=[];i._parentIds=null!=t.data.parent_ids?t.data.parent_ids.data:[],i.loadTaskRelative()})}},{key:"orgValueChange",value:function(e){null!=e&&"Invalid date"!=e?(this.jdate=e,this.entity.valid_date=ze(this.jdate).format("YYYY-MM-DD HH:mm:ss")):(this.jdate=null,this.entity.valid_date=null)}},{key:"saveChange",value:function(){var e=this;this.entity.follow_users=0==this.follow_users.length?null:JSON.stringify(this.follow_users),this.isSave=!0,this.entity.parent_ids={data:this._parentIds},"ADD"==this._flagModal?this._dataService.post("/tasks/add",this.entity).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?S.W.MSG_ADDNO_EN:S.W.MSG_ADDNO,"en"==e.user.lang?S.W.error_title_en:S.W.error_title):(e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?S.W.MSG_ADD_EN:S.W.MSG_ADD,"OK"),e.modalService.dismissAll())},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==e.user.lang?S.W.error_title_en:S.W.error_title)}):this._dataService.post("/tasks/update",this.entity).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?S.W.MSG_UPDATENO_EN:S.W.MSG_UPDATENO,"en"==e.user.lang?S.W.error_title_en:S.W.error_title):(e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"),e.modalService.dismissAll())},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==e.user.lang?S.W.error_title_en:S.W.error_title)})}},{key:"_addReminder",value:function(e){var t=this;w().fire({title:"en"==this.user.lang?S.W.are_you_sure2send_en:S.W.are_you_sure2send,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?S.W.cancel_en:S.W.cancel,confirmButtonText:"en"==this.user.lang?S.W.confirmtext_en:S.W.confirmtext}).then(function(i){i.value&&t._dataService.post("/tasks/addReminder",{id:e.id}).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)})})}},{key:"deleteItem",value:function(e){var t=this;w().fire({title:"en"==this.user.lang?S.W.are_you_sure_cancel_en:S.W.are_you_sure_cancel,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?S.W.cancel_en:S.W.cancel,confirmButtonText:"en"==this.user.lang?S.W.confirmtext_en:S.W.confirmtext}).then(function(i){i.value&&(e.is_active=2,t._dataService.post("/tasks/update",e).subscribe(function(e){t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK")},function(){t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)}))})}},{key:"loadTaskRelative",value:function(){var t=this,i={};i.userid=this.user.id,this._dataService.post("/tasks/getallrelative",i).subscribe(function(i){var n,a=[],l=e(i.data);try{for(l.s();!(n=l.n()).done;){var r=n.value;t.entity.id!=r.id&&a.push({key:r.id,title:r.title,parent_id:null,value:r.id})}}catch(s){l.e(s)}finally{l.f()}var o=t._utilyService.UnflattenFunc(a);t._taskrelative=o})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(U.Y36(u.e),U.Y36(c.D),U.Y36(x.F0),U.Y36(M.c),U.Y36(s.C),U.Y36(o.x),U.Y36(E.p),U.Y36(C.FF),U.Y36(N.t),U.Y36(J.H7))},t.\u0275cmp=U.Xpm({type:t,selectors:[["app-task-request"]],decls:82,vars:75,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-body"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate",2,"width","15px"],[1,"text-truncate"],[4,"ngIf"],[4,"ngFor","ngForOf"],["popupWorkModal",""],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","9",2,"text-align","center"],[1,"text-danger"],["href","javascript:;",1,"text-danger",3,"routerLink"],["class","customers d-inline-block avatar-group",4,"ngIf"],[1,"text-truncate",2,"cursor","pointer",3,"click"],[1,"fa","fa-bell-o",2,"font-size","14pt",3,"ngbTooltip"],[1,"badge-pill","badge-danger"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"customers","d-inline-block","avatar-group"],["class","d-inline-block",4,"ngFor","ngForOf"],[1,"d-inline-block"],[1,"img-40","rounded-circle",3,"src","alt","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"img-40","rounded-circle",3,"alt","ngbTooltip"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],["class","btn btn-sm btn-danger mr-sm-1",3,"ngbTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"ngbTooltip","click"],[1,"fa","fa-trash"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],[1,"col-md-12"],["for","title"],["type","text","name","title","id","title","autocomplete","off","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","description"],["id","description","rows","3","name","description","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","assignedto"],[1,"text-danger","mr-sm-2"],["href","javascript:;","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["name","_users","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","disabled","ngModelChange","change"],["class","col-md-12",4,"ngIf"],["for","validdate"],["type","text","name","jdate","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","taskrelative"],["name","taskrelative","nzShowSearch","","nzCheckable","",2,"width","100%",3,"ngModel","nzNodes","nzPlaceHolder","disabled","nzNotFoundContent","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],["for","follower"],["name","_usersCc","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","disabled","ngModelChange"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){if(1&e){var i=U.EpF();U.TgZ(0,"div",0),U.TgZ(1,"div",1),U.TgZ(2,"div",2),U.TgZ(3,"div",3),U.TgZ(4,"div",4),U.TgZ(5,"div",1),U.TgZ(6,"div",5),U.TgZ(7,"div",6),U.TgZ(8,"input",7),U.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),U.ALo(9,"translate"),U.qZA(),U.TgZ(10,"button",8),U.NdJ("click",function(){U.CHM(i);var e=U.MAs(81);return t._openModal(e,null)}),U._uU(11),U.ALo(12,"translate"),U.qZA(),U.YNc(13,Ve,1,0,"img",9),U.qZA(),U.qZA(),U.TgZ(14,"div",10),U.TgZ(15,"div",11),U.TgZ(16,"select",12),U.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),U.TgZ(17,"option",13),U._uU(18,"#10"),U.qZA(),U.TgZ(19,"option",14),U._uU(20,"#25"),U.qZA(),U.TgZ(21,"option",15),U._uU(22,"#50"),U.qZA(),U.TgZ(23,"option",16),U._uU(24,"#100"),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.TgZ(25,"div",17),U.TgZ(26,"div",18),U.TgZ(27,"div",19),U.TgZ(28,"div",20),U.TgZ(29,"pagination",21),U.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),U.qZA(),U.qZA(),U.TgZ(30,"div",22),U.TgZ(31,"a",23),U._uU(32),U.ALo(33,"translate"),U.ALo(34,"translate"),U.ALo(35,"translate"),U.ALo(36,"translate"),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.TgZ(37,"div",24),U.TgZ(38,"table",25),U.TgZ(39,"thead"),U.TgZ(40,"th",26),U._uU(41,"#"),U.qZA(),U.TgZ(42,"th",27),U._uU(43),U.ALo(44,"translate"),U.qZA(),U.TgZ(45,"th",27),U._uU(46),U.ALo(47,"translate"),U.qZA(),U.TgZ(48,"th",27),U._uU(49),U.ALo(50,"translate"),U.qZA(),U.TgZ(51,"th",27),U._uU(52),U.ALo(53,"translate"),U.qZA(),U.TgZ(54,"th",27),U._uU(55),U.ALo(56,"translate"),U.qZA(),U.TgZ(57,"th",27),U._uU(58),U.ALo(59,"translate"),U.qZA(),U.TgZ(60,"th",27),U._uU(61),U.ALo(62,"translate"),U.qZA(),U.TgZ(63,"th",27),U._uU(64),U.ALo(65,"translate"),U.qZA(),U.qZA(),U.TgZ(66,"tbody"),U.YNc(67,Xe,6,3,"ng-container",28),U.YNc(68,gt,28,20,"ng-container",29),U.qZA(),U.qZA(),U.qZA(),U.TgZ(69,"div",18),U.TgZ(70,"div",19),U.TgZ(71,"div",20),U.TgZ(72,"pagination",21),U.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),U.qZA(),U.qZA(),U.TgZ(73,"div",22),U.TgZ(74,"a",23),U._uU(75),U.ALo(76,"translate"),U.ALo(77,"translate"),U.ALo(78,"translate"),U.ALo(79,"translate"),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.YNc(80,mt,53,60,"ng-template",null,30,U.W1O)}2&e&&(U.xp6(8),U.Q6J("placeholder",U.lcZ(9,39,"Search"))("ngModel",t._keyword),U.xp6(3),U.hij(" ",U.lcZ(12,41,"Add new request")," "),U.xp6(2),U.Q6J("ngIf",t._isLoading),U.xp6(3),U.Q6J("ngModel",t.pageSize),U.xp6(13),U.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),U.xp6(3),U.Q0o("",U.lcZ(33,43,"Total of records"),": ",t.totalRow," - ",U.lcZ(34,45,"Page")," ",t.pageIndex," ",U.lcZ(35,47,"of")," ",t.totalPage," ",U.lcZ(36,49,"page"),""),U.xp6(11),U.Oqu(U.lcZ(44,51,"Title")),U.xp6(3),U.hij(" ",U.lcZ(47,53,"Valid date")," "),U.xp6(3),U.hij(" ",U.lcZ(50,55,"Assigned to")," "),U.xp6(3),U.hij(" ",U.lcZ(53,57,"Reminder")," "),U.xp6(3),U.hij(" ",U.lcZ(56,59,"Joined")," "),U.xp6(3),U.Oqu(U.lcZ(59,61,"Status")),U.xp6(3),U.Oqu(U.lcZ(62,63,"Time")),U.xp6(3),U.Oqu(U.lcZ(65,65,"Actions")),U.xp6(3),U.Q6J("ngIf",0==t._requestslist.length),U.xp6(1),U.Q6J("ngForOf",t._requestslist),U.xp6(4),U.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),U.xp6(3),U.Q0o("",U.lcZ(76,67,"Total of records"),": ",t.totalRow," - ",U.lcZ(77,69,"Page")," ",t.pageIndex," ",U.lcZ(78,71,"of")," ",t.totalPage," ",U.lcZ(79,73,"page"),""))},directives:[A.Fj,A.JJ,A.On,r.O5,A.EJ,A.YN,A.Kr,Z.Qt,r.sg,x.yS,C._L,A.Q7,I.w9,h.Y5,h.Np,Ke.zr],pipes:[O.X$,r.uU],styles:[""]}),t}(),data:{title:"Requests",breadcrumb:"Requests"}},{path:"requests/detail/:id",component:Be,data:{title:"Details",breadcrumb:"Details"}}]}],xt=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=U.oAB({type:e}),e.\u0275inj=U.cJS({imports:[[x.Bz.forChild(At)],x.Bz]}),e}(),Tt=l(25689),qt=l(72808),yt=l(36845),bt=l(16417),St=l(45593),kt=l(3621),wt=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=U.oAB({type:e}),e.\u0275inj=U.cJS({providers:[u.e,c.D,s.C,o.x,O.sK,E.p],imports:[[r.ez,xt,A.u5,m.JX,v.m9,O.aw,_.mr,h.kn.forRoot(),Z.u3.forRoot(),p.f.forRoot(),f.zk.forRoot(),bt.xc,g.P4,d.F5,Tt.kW,C.IJ,I.A0,qt.yI.forRoot(),yt.Xd,St.s8,D.d,Ke.cq,kt.xC]]}),e}()},59543:function(e,t,n){n.d(t,{p:function(){return o}});var l,r=n(37716),o=((l=function(){function e(){i(this,e)}return a(e,[{key:"transform",value:function(e){return this.localeString(e)}},{key:"missingOneDecimalCheck",value:function(e){var t=(e+="").split(",")[1];return!(!t||1!==t.length)}},{key:"missingAllDecimalsCheck",value:function(e){return!(e+="").split(",")[1]}},{key:"missingOneDecimalCheck1",value:function(e){var t=(e+="").split(".")[1];return!(!t||1!==t.length)}},{key:"missingAllDecimalsCheck1",value:function(e){return!(e+="").split(".")[1]}},{key:"localeString",value:function(e){if(""===e)return"";var t,i,n,a,l;for(i=(t=(e+="").split(","))[0],n=t.length>1?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(i);)i=i.replace(a,"$1,$2");if(-1!==i.indexOf("."))l=i.slice(i.lastIndexOf(".")).replace(/\,/g,""),t=i.split(".")[0]+l;else{if(t=i+n,this.missingOneDecimalCheck(t))return t+"0";if(this.missingAllDecimalsCheck(t))return t+""}return t}},{key:"localeStringEn",value:function(e){if(""===e)return"";var t,i,n,a,l;for(i=(t=(e+="").split(","))[0],n=t.length>1?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(i);)i=i.replace(a,"$1,$2");if(-1!==i.indexOf("."))l=i.slice(i.lastIndexOf(".")).replace(/\,/g,""),t=i.split(".")[0]+l;else{if(t=i+n,this.missingOneDecimalCheck(t))return t+"0";if(this.missingAllDecimalsCheck(t))return t+".00"}return t}}]),e}()).\u0275fac=function(e){return new(e||l)},l.\u0275pipe=r.Yjl({name:"numberFormat",type:l,pure:!0}),l)}}])}();