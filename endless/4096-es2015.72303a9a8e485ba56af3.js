"use strict";(self.webpackChunkendless=self.webpackChunkendless||[]).push([[4096],{4096:function(e,t,n){n.r(t),n.d(t,{RequestModule:function(){return po}});var a=n(38583),i=n(3679),o=n(39895),l=n(64762),r=n(16738),s=n(49962),c=n.n(s),d=n(65206),u=n(40496),g=n.n(u),p=n(33098),_=n(88259),h=n.n(_),m=n(29022),f=n(37716),Z=n(15483),x=n(65925),A=n(75208),b=n(90217),T=n(49690),y=n(12664),q=n(81946),v=n(72214),M=n(86640),S=n(29790);const C=["fileUpload"];function w(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",46),f.NdJ("click",function(){f.CHM(e);const t=f.oxw();return t._exportAll(t._getlist)}),f._UZ(1,"i",47),f._uU(2),f.ALo(3,"translate"),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Export")," "))}function L(e,t){1&e&&f._UZ(0,"img",48)}function U(e,t){1&e&&(f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td",49),f.TgZ(3,"h3",50),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.qZA(),f.qZA(),f.BQk()),2&e&&(f.xp6(4),f.hij(" ",f.lcZ(5,1,"No records now!!!")," "))}function N(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",65),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2).$implicit,n=f.oxw(2),a=f.MAs(108);return n._switchLanguage(a,3,t)}),f._uU(1),f.ALo(2,"translate"),f.qZA()}2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Report standard compared")))}function D(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",65),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2).$implicit,n=f.oxw(2),a=f.MAs(108);return n._switchLanguage(a,4,t)}),f._uU(1),f.ALo(2,"translate"),f.qZA()}2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Report standard attached")))}function k(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",61),f.TgZ(1,"button",62),f._UZ(2,"i",63),f.qZA(),f.TgZ(3,"div",64),f.TgZ(4,"a",65),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit,n=f.oxw(2),a=f.MAs(108);return n._switchLanguage(a,0,t)}),f._uU(5),f.ALo(6,"translate"),f.qZA(),f.TgZ(7,"a",65),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit,n=f.oxw(2),a=f.MAs(108);return n._switchLanguage(a,1,t)}),f._uU(8),f.ALo(9,"translate"),f.qZA(),f.YNc(10,N,3,3,"a",66),f.YNc(11,D,3,3,"a",66),f.qZA(),f.qZA()}if(2&e){const e=f.oxw().$implicit;f.xp6(5),f.Oqu(f.lcZ(6,4,"All")),f.xp6(3),f.Oqu(f.lcZ(9,6,"Report standard")),f.xp6(2),f.Q6J("ngIf",e.flag_compare),f.xp6(1),f.Q6J("ngIf",null!=e.url_img)}}function I(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",68),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2).$implicit,n=f.oxw(2),a=f.MAs(112);return n._editInformation(a,t)}),f._UZ(1,"i",69),f.qZA()}}function Y(e,t){if(1&e&&(f.ynx(0),f.YNc(1,I,2,0,"a",67),f.BQk()),2&e){const e=f.oxw(3);f.xp6(1),f.Q6J("ngIf",e._authenService.hasPermission("REQ-REPORT","update"))}}function J(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",70),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit,n=f.oxw(2),a=f.MAs(114);return n._popupRepareResults(a,t)}),f._uU(1),f.qZA()}if(2&e){const e=f.oxw().$implicit;f.xp6(1),f.Oqu(e.report_inner_code)}}function O(e,t){if(1&e&&(f.TgZ(0,"span"),f._uU(1),f.qZA()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.Oqu(e.report_inner_code)}}function Q(e,t){1&e&&(f.TgZ(0,"span",71),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Draft")," "))}function P(e,t){1&e&&(f.TgZ(0,"span",72),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Official")," "))}function E(e,t){1&e&&(f.TgZ(0,"span",73),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Evicted")," "))}function R(e,t){1&e&&(f.TgZ(0,"span",74),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Printed")," "))}function F(e,t){1&e&&(f.TgZ(0,"span",75),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Cancel")," "))}function H(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"th",52),f._uU(2),f.qZA(),f.TgZ(3,"td"),f.YNc(4,k,12,8,"div",53),f.YNc(5,Y,2,1,"ng-container",40),f.qZA(),f.TgZ(6,"td"),f.YNc(7,J,2,1,"a",54),f.YNc(8,O,2,1,"span",40),f.qZA(),f.TgZ(9,"td"),f._uU(10),f.qZA(),f.TgZ(11,"td"),f._uU(12),f.qZA(),f.TgZ(13,"td"),f._uU(14),f.ALo(15,"date"),f.qZA(),f.TgZ(16,"td"),f._uU(17),f.ALo(18,"date"),f.qZA(),f.TgZ(19,"td"),f._uU(20),f.qZA(),f.TgZ(21,"td"),f._uU(22),f.qZA(),f.TgZ(23,"td",55),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw(2),a=f.MAs(110);return 2!=t.is_active&&n._authenService.hasPermission("REQ-REPORT","update")?3==t.is_active?n._switchEviction(t):n._popupStates(a,t):null}),f.YNc(24,Q,3,3,"span",56),f.YNc(25,P,3,3,"span",57),f.YNc(26,E,3,3,"span",58),f.YNc(27,R,3,3,"span",59),f.YNc(28,F,3,3,"span",60),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(2),f.hij(" ",n+1+a.pageSize*(a.pageIndex-1)," "),f.xp6(2),f.Q6J("ngIf",a._authenService.hasPermission("REQ-REPORT","print")),f.xp6(1),f.Q6J("ngIf",0==e.is_active||1==e.is_active),f.xp6(2),f.Q6J("ngIf",0==e.is_active),f.xp6(1),f.Q6J("ngIf",0!=e.is_active),f.xp6(2),f.hij(" ",e.request_no," "),f.xp6(2),f.hij(" ",e.sample_name," "),f.xp6(2),f.Oqu(f.xi3(15,16,e.received_date,"dd/MM/yyyy HH:mm")),f.xp6(3),f.Oqu(f.xi3(18,19,e.returned_date,"dd/MM/yyyy HH:mm")),f.xp6(3),f.Oqu(e.company_sender_l),f.xp6(2),f.Oqu(e.sender_name),f.xp6(2),f.Q6J("ngIf",0==e.is_active),f.xp6(1),f.Q6J("ngIf",1==e.is_active),f.xp6(1),f.Q6J("ngIf",2==e.is_active),f.xp6(1),f.Q6J("ngIf",3==e.is_active),f.xp6(1),f.Q6J("ngIf",4==e.is_active)}}function W(e,t){if(1&e&&(f.ynx(0),f.YNc(1,H,29,22,"tr",51),f.BQk()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngForOf",e._getlist)}}function j(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",76),f.TgZ(1,"div",77),f.TgZ(2,"h4",78),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"button",79),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(6,"span",80),f._uU(7,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"div",81),f.TgZ(9,"div",82),f.TgZ(10,"div",83),f.TgZ(11,"div",84),f.TgZ(12,"button",85),f.NdJ("click",function(){return f.CHM(e),f.oxw()._print("vn")}),f._uU(13),f.ALo(14,"translate"),f.qZA(),f.TgZ(15,"button",86),f.NdJ("click",function(){return f.CHM(e),f.oxw()._print("en")}),f._uU(16),f.ALo(17,"translate"),f.qZA(),f.TgZ(18,"button",87),f.NdJ("click",function(){return f.CHM(e),f.oxw()._print("0")}),f._uU(19),f.ALo(20,"translate"),f.ALo(21,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&e&&(f.xp6(3),f.hij(" ",f.lcZ(4,5,"Language")," "),f.xp6(10),f.hij(" ",f.lcZ(14,7,"Vietnamese")," "),f.xp6(3),f.hij(" ",f.lcZ(17,9,"English")," "),f.xp6(3),f.AsE(" ",f.lcZ(20,11,"Vietnamese"),"/",f.lcZ(21,13,"English")," "))}function G(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",76),f.TgZ(1,"div",77),f.TgZ(2,"h4",78),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"button",79),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(6,"span",80),f._uU(7,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"div",81),f.TgZ(9,"div",82),f.TgZ(10,"div",83),f.TgZ(11,"div",84),f.TgZ(12,"select",88),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().changeState=t})("change",function(){return f.CHM(e),f.oxw()._updateState()}),f.TgZ(13,"option",89),f._uU(14),f.ALo(15,"translate"),f.qZA(),f.TgZ(16,"option",89),f._uU(17),f.ALo(18,"translate"),f.qZA(),f.TgZ(19,"option",89),f._uU(20),f.ALo(21,"translate"),f.qZA(),f.TgZ(22,"option",89),f._uU(23),f.ALo(24,"translate"),f.qZA(),f.TgZ(25,"option",89),f._uU(26),f.ALo(27,"translate"),f.qZA(),f.TgZ(28,"option",89),f._uU(29),f.ALo(30,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(3),f.AsE(" ",f.lcZ(4,15,"Status")," - ",e._titleLanguage," "),f.xp6(9),f.Q6J("ngModel",e.changeState),f.xp6(1),f.Q6J("value",null),f.xp6(1),f.Oqu(f.lcZ(15,17,"Please choose")),f.xp6(2),f.Q6J("value",0),f.xp6(1),f.Oqu(f.lcZ(18,19,"Draft")),f.xp6(2),f.Q6J("value",1),f.xp6(1),f.Oqu(f.lcZ(21,21,"Official")),f.xp6(2),f.Q6J("value",2),f.xp6(1),f.Oqu(f.lcZ(24,23,"Evicted")),f.xp6(2),f.Q6J("value",3),f.xp6(1),f.Oqu(f.lcZ(27,25,"Printed")),f.xp6(2),f.Q6J("value",4),f.xp6(1),f.Oqu(f.lcZ(30,27,"Cancel"))}}function B(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"button",113),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return f.oxw(2)._chooseTab(t,t.order_no)}),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.BQk()}if(2&e){const e=t.$implicit,n=f.oxw(2);f.xp6(1),f.Q6J("ngClass",e.order_no==n._currentTabActivated?"btn btn-sm btn-primary":"btn btn-sm btn-secondary"),f.xp6(1),f.AsE(" ",f.lcZ(3,3,"Sample")," ",e.order_no," ")}}const z=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function V(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",76),f.TgZ(1,"div",77),f.TgZ(2,"h4",78),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"button",79),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(6,"span",80),f._uU(7,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"div",81),f.TgZ(9,"div",82),f.TgZ(10,"div",83),f.TgZ(11,"div",90),f.TgZ(12,"label",91),f._uU(13),f.ALo(14,"translate"),f.TgZ(15,"span",50),f._uU(16,"(*)"),f.qZA(),f.qZA(),f.TgZ(17,"ng-select",92),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.customer_id=t}),f.ALo(18,"translate"),f.ALo(19,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(20,"div",93),f.TgZ(21,"div",90),f.TgZ(22,"label",94),f._uU(23),f.ALo(24,"translate"),f.TgZ(25,"span",50),f._uU(26,"(*)"),f.qZA(),f.qZA(),f.TgZ(27,"input",95),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw()._fdatea=t})("bsValueChange",function(t){return f.CHM(e),f.oxw().orgValueChange1a(t)}),f.ALo(28,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(29,"div",93),f.TgZ(30,"div",90),f.TgZ(31,"label",96),f._uU(32),f.ALo(33,"translate"),f.TgZ(34,"span",50),f._uU(35,"(*)"),f.qZA(),f.qZA(),f.TgZ(36,"input",97),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw()._tdatea=t})("bsValueChange",function(t){return f.CHM(e),f.oxw().orgValueChange2a(t)}),f.ALo(37,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(38,"div",93),f.TgZ(39,"div",90),f.TgZ(40,"label",98),f._uU(41),f.ALo(42,"translate"),f.qZA(),f.TgZ(43,"div",29),f.TgZ(44,"input",99),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.valid_number=t})("change",function(){return f.CHM(e),f.oxw()._calculateDays()}),f.ALo(45,"translate"),f.qZA(),f.TgZ(46,"button",100),f.NdJ("click",function(){return f.CHM(e),f.oxw().saveChangeRequest()}),f._UZ(47,"i",101),f._uU(48),f.ALo(49,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(50,"div",83),f._UZ(51,"hr"),f.TgZ(52,"div",102),f.TgZ(53,"div",103),f.YNc(54,B,4,5,"ng-container",51),f.qZA(),f.qZA(),f._UZ(55,"hr"),f.qZA(),f.TgZ(56,"div",83),f.TgZ(57,"label",104),f._uU(58),f.ALo(59,"translate"),f.qZA(),f.qZA(),f.TgZ(60,"div",105),f.TgZ(61,"div",90),f.TgZ(62,"label",106),f.TgZ(63,"strong"),f._uU(64),f.ALo(65,"translate"),f.qZA(),f.qZA(),f.TgZ(66,"input",107),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.sample_name=t}),f.ALo(67,"translate"),f.qZA(),f.TgZ(68,"input",107),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.sample_name_e=t}),f.ALo(69,"translate"),f.ALo(70,"translate"),f.qZA(),f.TgZ(71,"input",108),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.sample_id=t}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(72,"div",105),f.TgZ(73,"div",90),f.TgZ(74,"label",106),f.TgZ(75,"strong"),f._uU(76),f.ALo(77,"translate"),f.qZA(),f.qZA(),f.TgZ(78,"input",107),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.weight=t}),f.ALo(79,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(80,"div",105),f.TgZ(81,"div",90),f.TgZ(82,"label",106),f.TgZ(83,"strong"),f._uU(84),f.ALo(85,"translate"),f.ALo(86,"translate"),f.qZA(),f.qZA(),f.TgZ(87,"textarea",109),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.description=t}),f.ALo(88,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(89,"div",105),f.TgZ(90,"div",90),f.TgZ(91,"label",106),f.TgZ(92,"strong"),f._uU(93),f.ALo(94,"translate"),f.ALo(95,"translate"),f.ALo(96,"translate"),f.qZA(),f.qZA(),f.TgZ(97,"textarea",109),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.description_e=t}),f.ALo(98,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(99,"div",105),f.TgZ(100,"div",90),f.TgZ(101,"label",106),f.TgZ(102,"strong"),f._uU(103),f.ALo(104,"translate"),f.qZA(),f.qZA(),f.TgZ(105,"textarea",109),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.note=t}),f.ALo(106,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(107,"div",110),f.TgZ(108,"button",111),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f._UZ(109,"i",112),f._uU(110),f.ALo(111,"translate"),f.qZA(),f.TgZ(112,"button",100),f.NdJ("click",function(){return f.CHM(e),f.oxw().saveChangeSample()}),f._UZ(113,"i",101),f._uU(114),f.ALo(115,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(3),f.AsE(" ",f.lcZ(4,69,"Request code")," - ",e._titleLanguage," "),f.xp6(10),f.hij("",f.lcZ(14,71,"Company")," "),f.xp6(4),f.Q6J("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.entity.customer_id)("placeholder",f.lcZ(18,73,"Please choose"))("notFoundText",f.lcZ(19,75,"Not found item")),f.xp6(6),f.hij("",f.lcZ(24,77,"Received date")," "),f.xp6(4),f.Q6J("placeholder",f.lcZ(28,79,"Received date"))("ngModel",e._fdatea)("bsConfig",f.DdM(127,z)),f.xp6(5),f.hij("",f.lcZ(33,81,"Returned date")," "),f.xp6(4),f.Q6J("placeholder",f.lcZ(37,83,"Returned date"))("ngModel",e._tdatea)("bsConfig",f.DdM(128,z)),f.xp6(5),f.Oqu(f.lcZ(42,85,"Valid date")),f.xp6(3),f.Q6J("type","number")("placeholder",f.lcZ(45,87,"Valid date"))("ngModel",e.entity.valid_number)("min",0),f.xp6(4),f.hij(" ",f.lcZ(49,89,"Save")," "),f.xp6(6),f.Q6J("ngForOf",e.entity._samples),f.xp6(4),f.AsE("",f.lcZ(59,91,"Inner code"),": ",e.entity0.inner_code,""),f.xp6(4),f.MGl("for","sn",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(65,93,"Sample name")),f.xp6(2),f.MGl("id","sn",e._currentTabActivated,""),f.MGl("name","sample_name",e._currentTabActivated,""),f.Q6J("placeholder",f.lcZ(67,95,"Sample")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_name),f.xp6(2),f.MGl("id","sne",e._currentTabActivated,""),f.MGl("name","sample_namee",e._currentTabActivated,""),f.Q6J("placeholder",f.lcZ(69,97,"Sample")+"-"+f.lcZ(70,99,"English")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_name_e),f.xp6(3),f.MGl("id","id",e._currentTabActivated,""),f.MGl("name","id",e._currentTabActivated,""),f.Q6J("ngModel",e.entity0.sample_id),f.xp6(3),f.MGl("for","weight",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(77,101,"Weight")),f.xp6(2),f.MGl("id","weight",e._currentTabActivated,""),f.MGl("name","weight",e._currentTabActivated,""),f.Q6J("placeholder",f.lcZ(79,103,"Weight")+" "+e._currentTabActivated)("ngModel",e.entity0.weight),f.xp6(4),f.MGl("for","description",e._currentTabActivated,""),f.xp6(2),f.AsE("",f.lcZ(85,105,"Description")," (",f.lcZ(86,107,"State of sample"),")"),f.xp6(3),f.MGl("id","description",e._currentTabActivated,""),f.MGl("name","description",e._currentTabActivated,""),f.Q6J("placeholder",f.lcZ(88,109,"Description")+" "+e._currentTabActivated)("ngModel",e.entity0.description),f.xp6(4),f.MGl("for","descriptione",e._currentTabActivated,""),f.xp6(2),f.lnq("",f.lcZ(94,111,"Description")," (",f.lcZ(95,113,"State of sample"),") - ",f.lcZ(96,115,"English"),""),f.xp6(4),f.MGl("id","descriptione",e._currentTabActivated,""),f.MGl("name","descriptione",e._currentTabActivated,""),f.Q6J("placeholder",f.lcZ(98,117,"Description")+" "+e._currentTabActivated)("ngModel",e.entity0.description_e),f.xp6(4),f.MGl("for","note",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(104,119,"Note")),f.xp6(2),f.MGl("id","note",e._currentTabActivated,""),f.MGl("name","note",e._currentTabActivated,""),f.Q6J("placeholder",f.lcZ(106,121,"Note")+" "+e._currentTabActivated)("ngModel",e.entity0.note),f.xp6(5),f.hij(" ",f.lcZ(111,123,"Close")," "),f.xp6(4),f.hij(" ",f.lcZ(115,125,"Save")," ")}}function $(e,t){1&e&&f._UZ(0,"img",48)}function K(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"a",70),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit,n=f.oxw(2),a=f.MAs(116);return n.popupComment(a,t)}),f._uU(2),f.qZA(),f.BQk()}if(2&e){const e=f.oxw().$implicit;f.xp6(2),f.Oqu(e.inner_code)}}function X(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.Oqu(e.inner_code)}}function ee(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"td",118),f._uU(2),f.qZA(),f.TgZ(3,"td",118),f.YNc(4,K,3,1,"ng-container",40),f.YNc(5,X,2,1,"ng-container",40),f.qZA(),f.TgZ(6,"td",118),f._uU(7),f.qZA(),f.TgZ(8,"td",39),f._uU(9),f.qZA(),f.TgZ(10,"td"),f.TgZ(11,"input",119),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.lod=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._reupdateInformation(t._getlist2side)}),f.qZA(),f.qZA(),f.TgZ(12,"td",118),f.TgZ(13,"input",119),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.loq=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._reupdateInformation(t._getlist2side)}),f.qZA(),f.qZA(),f.TgZ(14,"td",118),f.TgZ(15,"input",120),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.result_record=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._reupdateInformation(t._getlist2side)}),f.ALo(16,"translate"),f.qZA(),f.TgZ(17,"input",120),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.result_record_e=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._reupdateInformation(t._getlist2side)}),f.ALo(18,"translate"),f.qZA(),f.qZA(),f.TgZ(19,"td",118),f.TgZ(20,"input",119),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.mark=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._reupdateInformation(t._getlist2side)}),f.qZA(),f.qZA(),f.TgZ(21,"td",121),f.TgZ(22,"input",122),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.allow_lod=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._reupdateInformation(t._getlist2side)}),f.qZA(),f.qZA(),f.TgZ(23,"td",118),f.TgZ(24,"input",119),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.compare_note=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._reupdateInformation(t._getlist2side)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(2),f.Oqu(n+1),f.xp6(2),f.Q6J("ngIf",a._authenService.hasPermission("REQ-REPORT","update")),f.xp6(1),f.Q6J("ngIf",!a._authenService.hasPermission("REQ-REPORT","update")),f.xp6(2),f.Oqu(e.code),f.xp6(2),f.hij(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),f.xp6(2),f.MGl("name","lod",n+1,""),f.Q6J("ngModel",e.lod),f.xp6(2),f.MGl("name","loq",n+1,""),f.Q6J("ngModel",e.loq),f.xp6(2),f.MGl("name","result_record",n+1,""),f.Q6J("ngModel",e.result_record)("placeholder",f.lcZ(16,21,"Vietnamese")),f.xp6(2),f.MGl("name","result_record_e",n+1,""),f.Q6J("ngModel",e.result_record_e)("placeholder",f.lcZ(18,23,"English")),f.xp6(3),f.MGl("name","mark",n+1,""),f.Q6J("ngModel",e.mark),f.xp6(2),f.MGl("name","allow_lod",n+1,""),f.Q6J("ngModel",e.allow_lod),f.xp6(2),f.MGl("name","compare_note",n+1,""),f.Q6J("ngModel",e.compare_note)}}function te(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",76),f.TgZ(1,"div",81),f.TgZ(2,"div",82),f.TgZ(3,"div",83),f.TgZ(4,"label",114),f._uU(5),f.ALo(6,"translate"),f.YNc(7,$,1,0,"img",19),f.qZA(),f.TgZ(8,"input",115),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw()._keywordAdditional=t})("change",function(){return f.CHM(e),f.oxw().loadLabResultList()})("keyup.enter",function(){return f.CHM(e),f.oxw().loadLabResultList()}),f.qZA(),f.qZA(),f.TgZ(9,"div",83),f.TgZ(10,"div",116),f.TgZ(11,"table",117),f.TgZ(12,"thead"),f.TgZ(13,"th",118),f._uU(14,"#"),f.qZA(),f.TgZ(15,"th",118),f._uU(16),f.ALo(17,"translate"),f.qZA(),f.TgZ(18,"th",118),f._uU(19),f.ALo(20,"translate"),f.qZA(),f.TgZ(21,"th",118),f._uU(22),f.ALo(23,"translate"),f.qZA(),f.TgZ(24,"th"),f._uU(25),f.ALo(26,"translate"),f.qZA(),f.TgZ(27,"th",118),f._uU(28),f.ALo(29,"translate"),f.qZA(),f.TgZ(30,"th",118),f._uU(31),f.ALo(32,"translate"),f.qZA(),f.TgZ(33,"th",118),f._uU(34),f.ALo(35,"translate"),f.qZA(),f.TgZ(36,"th",118),f._uU(37),f.ALo(38,"translate"),f.qZA(),f.TgZ(39,"th",118),f._uU(40),f.ALo(41,"translate"),f.qZA(),f.qZA(),f.TgZ(42,"tbody"),f.YNc(43,ee,25,25,"tr",51),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(5),f.hij("",f.lcZ(6,13,"Search")," "),f.xp6(2),f.Q6J("ngIf",e._isLoadingResult),f.xp6(1),f.Q6J("ngModel",e._keywordAdditional),f.xp6(8),f.Oqu(f.lcZ(17,15,"Inner code")),f.xp6(3),f.Oqu(f.lcZ(20,17,"Code")),f.xp6(3),f.hij(" ",f.lcZ(23,19,"Internal testing")," "),f.xp6(3),f.Oqu(f.lcZ(26,21,"LOD")),f.xp6(3),f.Oqu(f.lcZ(29,23,"LOQ")),f.xp6(3),f.Oqu(f.lcZ(32,25,"Results")),f.xp6(3),f.Oqu(f.lcZ(35,27,"Mark")),f.xp6(3),f.Oqu(f.lcZ(38,29,"Tick LOD?")),f.xp6(3),f.Oqu(f.lcZ(41,31,"Compare")),f.xp6(3),f.Q6J("ngForOf",e._getlist2side)}}function ne(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",137),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2);return t.removeAttachment(t.entityComment)}),f._UZ(1,"i",138),f.qZA()}}function ae(e,t){1&e&&(f.ynx(0),f.TgZ(1,"a",139),f._UZ(2,"img",140),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.BQk()),2&e&&(f.xp6(3),f.hij(" ",f.lcZ(4,1,"Processing"),""))}function ie(e,t){1&e&&(f.TgZ(0,"button",141),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Save & close")," "))}function oe(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",123,124),f.NdJ("ngSubmit",function(){f.CHM(e);const t=f.oxw();return t.saveChangeComment(t.entityComment,0)}),f.TgZ(2,"div",77),f.TgZ(3,"h4",78),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.TgZ(6,"button",79),f.NdJ("click",function(){return f.CHM(e).$implicit.dismiss("Cross click")}),f.TgZ(7,"span",80),f._uU(8,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(9,"div",81),f.TgZ(10,"div",82),f.TgZ(11,"div",83),f.TgZ(12,"div",90),f.TgZ(13,"label",125),f._uU(14),f.ALo(15,"translate"),f.qZA(),f.TgZ(16,"textarea",126),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entityComment.take_note=t}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(17,"div",83),f.TgZ(18,"div",90),f.TgZ(19,"label",127),f._uU(20),f.ALo(21,"translate"),f.qZA(),f.TgZ(22,"input",128,129),f.NdJ("change",function(t){return f.CHM(e),f.oxw().fileEvent(t)}),f.qZA(),f.TgZ(24,"input",130),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entityComment.url_img=t}),f.qZA(),f._UZ(25,"br"),f.TgZ(26,"small",131),f.TgZ(27,"a",132),f.NdJ("click",function(){f.CHM(e);const t=f.oxw();return t._downloadFileResult(t.entityComment)}),f._uU(28),f.qZA(),f.YNc(29,ne,2,0,"a",133),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(30,"div",134),f.TgZ(31,"button",135),f.NdJ("click",function(){return f.CHM(e).$implicit.dismiss("Cross click")}),f._uU(32),f.ALo(33,"translate"),f.qZA(),f.YNc(34,ae,5,3,"ng-container",40),f.YNc(35,ie,3,3,"button",136),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(4),f.AsE(" ",f.lcZ(5,11,"Note")," - ",e.entityComment.inner_code," "),f.xp6(10),f.hij("",f.lcZ(15,13,"Content")," "),f.xp6(2),f.Q6J("ngModel",e.entityComment.take_note),f.xp6(4),f.Oqu(f.lcZ(21,15,"Attachment")),f.xp6(4),f.Q6J("ngModel",e.entityComment.url_img),f.xp6(4),f.Oqu(e._path),f.xp6(1),f.Q6J("ngIf",null!=e.entityComment.url_img),f.xp6(3),f.hij(" ",f.lcZ(33,17,"Close")," "),f.xp6(2),f.Q6J("ngIf",e.isSave),f.xp6(1),f.Q6J("ngIf",!e.isSave)}}const le=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};g().vfs=p.I.vfs;let re=(()=>{class e{constructor(e,t,n,a,i,o,l){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=i,this._excelService=o,this.modalService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._getlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this._status="",this._titleLanguage="",this._detail={},this._logoPath=d.h.BASE_API+"/",this._logoIsoPath=d.h.BASE_API+"/",this._signatureCTOPath=d.h.BASE_API+"/",this._signatureCEOPath=d.h.BASE_API+"/",this.changeState=null,this._printAll=[],this._langMain=1,this.entity={},this.entity0={},this.requestId="",this._customers=[],this._dt1a="",this._dt2a="",this._fdatea=new Date,this._tdatea=new Date,this._currentTabActivated=1,this._keywordAdditional="",this._getlist2side=[],this._isLoadingResult=!1,this._requestIdTemp="",this.entityComment={},this._path="",this._id="",(!1===e.checkAccess("REQ-REPORT")||!1===e.hasPermission("REQ-REPORT","read"))&&this._route.navigate(["/error/404"]),this.socket=c()(d.h.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadImgs(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,this._dataService.post("/labresult/getlistbypaging",e).subscribe(e=>{this._getlist=e.data,this.totalRow=e.rowCount,this.totalPage=e.totalPages,this._resolveDuplicateCode()})}_resolveDuplicateCode(){this._dataService.post("/error/duplicateReportCode",{}).subscribe(e=>{})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}orgValueChange1(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=r(e).format("YYYY-MM-DD")}_switchLanguage(e,t,n){this.loadAllReportByRequestId(n.request_id),this._titleLanguage=n.report_code,this._chooseOne=t,this._detail=n,this.modalService.open(e,{size:"md",centered:!0})}loadAllReportByRequestId(e){let t={};t.request_id=e,console.log(t),this._dataService.post("/labresult/getlistbyrequestId",t).subscribe(e=>{this._printAll=e.data})}_print(e){return(0,l.__awaiter)(this,void 0,void 0,function*(){this._langMain=e;var t=[];if(0!=this._chooseOne){if(null!=this._detail.old_report_detail){let n="(* K\u1ebft qu\u1ea3 n\xe0y thay th\u1ebf cho k\u1ebft qu\u1ea3  "+this._detail.old_report_detail.report_code+", xu\u1ea5t ng\xe0y  "+r(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; b\u1ea3n k\u1ebft qu\u1ea3 c\u0169 s\u1ebd b\u1ecb h\u1ee7y)",a="(* This report cancels and replaces the previous one numbered "+this._detail.old_report_detail.report_code+", date "+r(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; which must be destroyed)",i="vn"==e?n:a;"0"==e&&(i=n+"\n"+a),t.push({text:i,alignment:"right",italics:!0,fontSize:10})}t.push({text:"\n"});let i="en"==e?null==this._detail.company_sender_e?this._detail.company_sender_l.toUpperCase():this._detail.company_sender_e.toUpperCase():this._detail.company_sender_l.toUpperCase();(null!=this._detail.company_receiver_l||null!=this._detail.company_receiver_e)&&(i="en"==e||"0"==e?null==this._detail.company_receiver_e?this._detail.company_receiver_l.toUpperCase():this._detail.company_receiver_e.toUpperCase():this._detail.company_receiver_l.toUpperCase()),"0"==e&&(i="en"==e,this._detail.company_sender_l.toUpperCase(),null==this._detail.company_sender_e||this._detail.company_sender_e.toUpperCase(),(null!=this._detail.company_receiver_l||null!=this._detail.company_receiver_e)&&(i=this._detail.company_receiver_l.toUpperCase()+"\n"+(null==this._detail.company_receiver_e?"":this._detail.company_receiver_e.toUpperCase()))),this._detail.address_receiver_l=null==this._detail.address_receiver_l?this._detail.address_l:this._detail.address_receiver_l;let o="en"==e?null==this._detail.address_receiver_e?this._detail.address_receiver_l:this._detail.address_receiver_e:this._detail.address_receiver_l;"0"==e&&(o=this._detail.address_receiver_l+"\n"+(null==this._detail.address_receiver_e?"":this._detail.address_receiver_e));let l="en"==e?"Sample described as":"T\xean m\u1eabu";"0"==e&&(l="T\xean m\u1eabu/ Sample described as");let s="en"==e?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng";"0"==e&&(s="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference");let c=this._detail.employee_code+this._detail.request_no.substr(2,this._detail.request_no.length);null==this._detail.employee_code&&(c=this._detail.request_no.substr(2,this._detail.request_no.length));let u="en"==e?"Sample code":"M\xe3 s\u1ed1 m\u1eabu";"0"==e&&(u="M\xe3 s\u1ed1 m\u1eabu/ Sample code");let g="en"==e?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu";"0"==e&&(g="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning");let p="en"==e?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu";"0"==e&&(p="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date");let _="en"==e?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m";"0"==e&&(_="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time");let h="en"==e?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng";"0"==e&&(h="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date");let m=r(new Date(this._detail.returned_date)).subtract(7,"hours").format("DD/MM/YYYY");t.push({alignment:"justify",columns:[[{text:[{text:i,bold:!0,fontSize:12},"\n\n",{text:o},"\n\n\n"],style:"body_top"}],{width:150,qr:this._detail.report_code+","+this._detail.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]});let f="en"==e?null==this._detail.sample_name_e?"":this._detail.sample_name_e:this._detail.sample_name;"0"==e&&(f=this._detail.sample_name+(null==this._detail.sample_name_e?"":"/ "+this._detail.sample_name_e));let Z="en"==e?null==this._detail.description_e?"":this._detail.description_e:null==this._detail.description?"":this._detail.description;"0"==e&&(Z=(null==this._detail.description?"":this._detail.description)+(null==this._detail.description_e?"":"/ "+this._detail.description_e)),t.push({table:{widths:[150,5,"*"],body:[[{text:l,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:f,bold:!0,fontSize:11}],[{text:s,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:c,bold:!0,style:"body_footer"}],[{text:u,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:this._detail.report_inner_code,bold:!0,style:"body_footer"}],[{text:g,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:Z,style:"body_footer"}],[{text:p,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:_,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+m,style:"body_footer"}],[{text:h,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:m,style:"body_footer"}]]},layout:{defaultBorder:!1}}),t.push({text:"\n"});let x="en"==e?"NO.":"STT";"0"==e&&(x="STT\nNO.");let A="en"==e?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";"0"==e&&(A="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let b="en"==e?"UNIT":"\u0110\u01a0N V\u1eca";"0"==e&&(b="\u0110\u01a0N V\u1eca\nUNIT");let T="en"==e?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";"0"==e&&(T="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let y="en"==e?"RESULTS":"K\u1ebeT QU\u1ea2";"0"==e&&(y="K\u1ebeT QU\u1ea2\nRESULTS");let q="en"==e?"COMPARE / GUIDELINES":"SO S\xc1NH";"0"==e&&(q="SO S\xc1NH\nCOMPARE / GUIDELINES");let v=!1;if(1==this._chooseOne){var n=[],a=1;if(this._detail.order_details.length>0){for(let t of this._detail.order_details){let i=!1;i="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let o="",l=null==t.standards?[]:JSON.parse(t.standards);for(let e of l.filter(e=>null!=e))null==e.id?null!=e&&(o+="("+e+")"):o+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let s=t.unit,c=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,u=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>",""),g="";null!=t.result_record_e&&(g=t.result_record_e.includes("<sup>")?t.result_record_e.substr(0,t.result_record_e.indexOf("<")):t.result_record_e);let p="vn"==e||""==g?d:g;"0"==e&&(p=d+(""==g?"":"/ "+g)),n.push({STT:a,Para:{columns:[{text:r,fontSize:10,italics:i,width:"auto",bold:!0},{text:o,fontSize:8,italics:i,bold:!0}],columnGap:3},Unit:s,Method:c,Results:[{columns:[{text:p,width:"auto",fontSize:10,bold:!0},{text:u,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),a+=1,t.allow_lod&&(v=!0)}t.push(this.tablePrintQuotation5(n,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}}if(3==this._chooseOne){n=[],a=1;for(let t of this._detail.order_details){let i=!1;i="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let o="",l=null==t.standards?[]:JSON.parse(t.standards);for(let e of l.filter(e=>null!=e))null==e.id?null!=e&&(o+="("+e+")"):o+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let s=t.unit,c=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,u=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>",""),g="";null!=t.result_record_e&&(g=t.result_record_e.includes("<sup>")?t.result_record_e.substr(0,t.result_record_e.indexOf("<")):t.result_record_e);let p="vn"==e||""==g?d:g;"0"==e&&(p=d+(""==g?"":"/ "+g)),n.push({STT:a,Para:{columns:[{text:r,fontSize:10,italics:i,width:"auto",bold:!0},{text:o,fontSize:8,italics:i,bold:!0}],columnGap:3},Unit:s,Method:c,Results:[{columns:[{text:p,width:"auto",fontSize:10,bold:!0},{text:u,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:t.compare_note}),a+=1,t.allow_lod&&(v=!0)}t.push(this.tablePrintQuotation(n,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}if(4==this._chooseOne)if(this._detail.flag_compare){n=[],a=1;for(let t of this._detail.order_details){let i=!1;i="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let o="",l=null==t.standards?[]:JSON.parse(t.standards);for(let e of l.filter(e=>null!=e))null==e.id?null!=e&&(o+="("+e+")"):o+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let s=t.unit,c=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,u=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>",""),g="";null!=t.result_record_e&&(g=t.result_record_e.includes("<sup>")?t.result_record_e.substr(0,t.result_record_e.indexOf("<")):t.result_record_e);let p="vn"==e||""==g?d:g;"0"==e&&(p=d+(""==g?"":"/ "+g)),n.push({STT:a,Para:{columns:[{text:r,fontSize:10,italics:i,width:"auto",bold:!0},{text:o,fontSize:8,italics:i,bold:!0}],columnGap:3},Unit:s,Method:c,Results:[{columns:[{text:p,width:"auto",fontSize:10,bold:!0},{text:u,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:t.compare_note}),a+=1,t.allow_lod&&(v=!0)}t.push(this.tablePrintQuotation(n,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}else if(n=[],a=1,this._detail.order_details.length>0){for(let t of this._detail.order_details){let i=!1;i="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let o="",l=null==t.standards?[]:JSON.parse(t.standards);for(let e of l.filter(e=>null!=e))null==e.id?null!=e&&(o+="("+e+")"):o+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let s=t.unit,c=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,u=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>",""),g="";null!=t.result_record_e&&(g=t.result_record_e.includes("<sup>")?t.result_record_e.substr(0,t.result_record_e.indexOf("<")):t.result_record_e);let p="vn"==e||""==g?d:g;"0"==e&&(p=d+(""==g?"":"/ "+g)),n.push({STT:a,Para:{columns:[{text:r,fontSize:10,italics:i,width:"auto",bold:!0},{text:o,fontSize:8,italics:i,bold:!0}],columnGap:3},Unit:s,Method:c,Results:[{columns:[{text:p,width:"auto",fontSize:10,bold:!0},{text:u,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),a+=1,t.allow_lod&&(v=!0)}t.push(this.tablePrintQuotation5(n,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if(null!=this._detail.take_note||v){let n=[],a="vn"==e?"Ghi ch\xfa: ":"Note: ";"0"==e&&(a="Ghi ch\xfa/ Note: ");let i="vn"==e?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection";"0"==e&&(i="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),n.push({LOD:a+(null==this._detail.take_note?"":this._detail.take_note)+(v?i:"")}),t.push(this.tablePrintQuotation5A(n,["LOD"],["*"]))}t.push({text:"\n"});let M="vn"==e?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR";"0"==e&&(M="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR");let S="vn"==e?"GI\xc1M \u0110\u1ed0C":"DIRECTOR";"0"==e&&(S="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==this._detail.is_active&&(t.push({columns:[{width:50,text:""},{width:180,text:M,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:S,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"})),null!=this._signatureCTOPath&&null!=this._signatureCEOPath&&0!=this._detail.is_active?(t.push({columns:[{width:50,text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCTOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:"*",text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCEOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:50,text:""}]}),t.push({text:"\n"})):t.push({columns:[{width:50,text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]}),0==this._detail.is_active&&t.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"});let C="vn"==e?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note";"0"==e&&(C="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note");let w="vn"==e?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.";"0"==e&&(w="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample.");let L="vn"==e?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.";"0"==e&&(L="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request.");let U="";if(this._detail.standard_list.length>0)for(let t of this._detail.standard_list){let n="vn"==e?t.description_l:t.description_e;"0"==e&&(n=t.description_l+"/ "+t.description_e),U+="("+t.id+") "+n+"\n"}if(t.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:C,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:w+"\n"+L+"\n"},{text:U,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null!=this._detail.url_img&&4==this._chooseOne){let n="en"==e?"Sample photo":"H\xecnh m\u1eabu";"0"==e&&(n="H\xecnh m\u1eabu/ Sample photo"),t.push({text:"",pageBreak:"after"}),t.push({text:n+"\n",alignment:"center"});let a=d.h.BASE_API+"/"+this._detail.url_img;t.push({image:yield this._convertBase64ImageFromURL(a),alignment:"center",width:430})}}else{let i=0,o=0;for(let l of this._printAll){if(o+=1,null!=l.old_report_detail){let n="(This report cancels and replaces the previous one numbered "+l.old_report_detail.report_code+" date "+r(new Date(l.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)",a="(This report cancels and replaces the previous one numbered "+l.old_report_detail.report_code+" date "+r(new Date(l.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)";t.push({text:"vn"==e?n:a,alignment:"right",italics:!0,fontSize:10})}let s=("vn"==e?"M\xe3 k\u1ebft qu\u1ea3: ":"Report code: ")+l.report_code;"0"==e&&(s="M\xe3 k\u1ebft qu\u1ea3/Report code: "+l.report_code);let c=("vn"==e?"Trang: ":"Page: ")+o.toString()+"/"+this._printAll.length.toString();"0"==e&&(c="Trang/Page: "+o.toString()+this._printAll.length.toString());let u="en"==e?null==l.company_sender_e?l.company_sender_l.toUpperCase():l.company_sender_e.toUpperCase():l.company_sender_l.toUpperCase();(null!=l.company_receiver_l||null!=l.company_receiver_e)&&(u="en"==e||"0"==e?null==l.company_receiver_e?l.company_receiver_l.toUpperCase():l.company_receiver_e.toUpperCase():l.company_receiver_l.toUpperCase()),l.address_receiver_l=null==l.address_receiver_l?l.address_l:l.address_receiver_l;let g="en"==e?null==l.address_receiver_e?l.address_receiver_l:l.address_receiver_e:l.address_receiver_l;"0"==e&&(u=l.company_sender_l.toUpperCase()+"\n"+(null==l.company_sender_e?"":l.company_sender_e.toUpperCase()),(null!=l.company_receiver_l||null!=l.company_receiver_e)&&(u=l.company_receiver_l.toUpperCase()+"\n"+(null==l.company_receiver_e?"":l.company_receiver_e.toUpperCase())),g=l.address_receiver_l+"\n"+(null==l.address_receiver_e?"":l.address_receiver_e));let p="en"==e?"Sample described as":"T\xean m\u1eabu";"0"==e&&(p="T\xean m\u1eabu/ Sample described as");let _="en"==e?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng";"0"==e&&(_="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference");let h=l.employee_code+l.request_no.substr(2,l.request_no.length);null==l.employee_code&&(h=l.request_no.substr(2,l.request_no.length));let m="en"==e?"Sample code":"M\xe3 s\u1ed1 m\u1eabu";"0"==e&&(m="M\xe3 s\u1ed1 m\u1eabu/ Sample code");let f="en"==e?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu";"0"==e&&(f="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning");let Z="en"==e?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu";"0"==e&&(Z="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date");let x="en"==e?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m";"0"==e&&(x="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time");let A="en"==e?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng";"0"==e&&(A="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date");let b=1==l.is_active?r(new Date(l.timestamp)).subtract(7,"hours").format("DD/MM/YYYY"):r(new Date(l.returned_date)).subtract(7,"hours").format("DD/MM/YYYY");t.push({alignment:"right",columns:[{text:[{text:s+"-"+c},"\n\n"],alignment:"right",bold:!0}]}),t.push({alignment:"justify",columns:[[{text:[{text:u,bold:!0,fontSize:12},"\n\n",{text:g},"\n\n\n"],style:"body_top"}],{width:150,qr:l.report_code+","+l.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),t.push({table:{widths:[150,5,"*"],body:[[{text:p,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:l.sample_name,bold:!0,fontSize:11}],[{text:_,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:h,bold:!0,style:"body_footer"}],[{text:m,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:l.report_inner_code,bold:!0,style:"body_footer"}],[{text:f,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:null==l.description?"":l.description,style:"body_footer"}],[{text:Z,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(l.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:x,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(l.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+b,style:"body_footer"}],[{text:A,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:b,style:"body_footer"}]]},layout:{defaultBorder:!1}}),t.push({text:"\n"});let T="en"==e?"NO.":"STT";"0"==e&&(T="STT\nNO.");let y="en"==e?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";"0"==e&&(y="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let q="en"==e?"UNIT":"\u0110\u01a0N V\u1eca";"0"==e&&(q="\u0110\u01a0N V\u1eca\nUNIT");let v="en"==e?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";"0"==e&&(v="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let M="en"==e?"RESULTS":"K\u1ebeT QU\u1ea2";"0"==e&&(M="K\u1ebeT QU\u1ea2\nRESULTS");let S="en"==e?"COMPARE / GUIDELINES":"SO S\xc1NH";"0"==e&&(S="SO S\xc1NH\nCOMPARE / GUIDELINES");let C=!1;if(n=[],a=1,l.order_details.length>0){for(let t of l.order_details){let i=!1;i="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let o="",l=null==t.standards?[]:JSON.parse(t.standards);for(let e of l.filter(e=>null!=e))null==e.id?null!=e&&(o+="("+e+")"):o+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let s=t.unit,c=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,u=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>",""),g="";null!=t.result_record_e&&(g=t.result_record_e.includes("<sup>")?t.result_record_e.substr(0,t.result_record_e.indexOf("<")):t.result_record_e);let p="vn"==e||""==g?d:g;"0"==e&&(p=d+(""==g?"":"/ "+g)),n.push({STT:a,Para:{columns:[{text:r,fontSize:10,italics:i,width:"auto",bold:!0},{text:o,fontSize:8,italics:i,bold:!0}],columnGap:3,bold:!0},Unit:s,Method:c,Results:[{columns:[{text:p,width:"auto",fontSize:10,bold:!0},{text:u,fontSize:6,bold:!0}],columnGap:0,alignment:"center"},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0,alignment:"center"}],columnGap:0}]}),a+=1,t.allow_lod&&(C=!0)}t.push(this.tablePrintQuotation5(n,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if(null!=l.take_note||C){let n=[],a="vn"==e?"Ghi ch\xfa: ":"Note: ";"0"==e&&(a="Ghi ch\xfa/ Note: ");let i="vn"==e?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection";"0"==e&&(i="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),n.push({LOD:a+(null==l.take_note?"":l.take_note)+(C?i:"")}),t.push(this.tablePrintQuotation5A(n,["LOD"],["*"]))}t.push({text:"\n"});let w="vn"==e?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR";"0"==e&&(w="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR");let L="vn"==e?"GI\xc1M \u0110\u1ed0C":"DIRECTOR";"0"==e&&(L="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==l.is_active&&(t.push({columns:[{width:50,text:""},{width:180,text:w,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:L,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"})),null!=this._signatureCTOPath&&null!=this._signatureCEOPath&&0!=l.is_active?(t.push({columns:[{width:50,text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCTOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:"*",text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCEOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:50,text:""}]}),t.push({text:"\n"})):t.push({columns:[{width:50,text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]}),0==l.is_active&&t.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"});let U="vn"==e?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note";"0"==e&&(U="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note");let N="vn"==e?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.";"0"==e&&(N="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample.");let D="vn"==e?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.";"0"==e&&(D="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request.");let k="";if(l.standard_list.length>0)for(let t of l.standard_list){let n="vn"==e?t.description_l:t.description_e;"0"==e&&(n=t.description_l+"/ "+t.description_e),k+="("+t.id+") "+n+"\n"}if(t.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:U,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:N+"\n"+D+"\n"},{text:k,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null!=l.url_img&&2==l.is_active){t.push({text:"",pageBreak:"after"});let e=d.h.BASE_API+"/"+l.url_img;t.push({image:yield this._convertBase64ImageFromURL(e),alignment:"center"})}i+=1,i<this._printAll.length&&t.push({text:"",pageBreak:"after"})}}const i={pageSize:"A4",pageMargins:"vn"==e?0==this._chooseOne?[25,100,25,70]:[25,120,25,70]:0==this._chooseOne?[25,100,25,90]:[25,140,25,90],defaultStyle:{fontSize:12,columnGap:20},content:[t],footer:function(t,n){return{table:{widths:[5,"*","*","*"],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:("en"==e||"0"==e?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG")+"\n"+("en"==e||"0"==e?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam"),alignment:"left",style:"body_footer"},{height:150,text:"en"==e||"0"==e?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",alignment:"left",style:"body_footer"},{height:150,text:"en"==e||"0"==e?"Document number : EPR-QP-0023/F02\nVersion : 01\nEffective day : 03/09/2020":"M\xe3 t\xe0i li\u1ec7u : EPR-QP-0023/F02\nL\u1ea7n ban h\xe0nh : 01\nNg\xe0y ban h\xe0nh : 03/09/2020",alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},header:(t,n,a)=>{let i="vn"==e?"K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M":"ANALYTICAL REPORT";"0"==e&&(i="K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M\nANALYTICAL REPORT");let o="vn"==e?"M\xe3 k\u1ebft qu\u1ea3: ":"Report code: ";"0"==e&&(o="M\xe3 k\u1ebft qu\u1ea3/Report code: ");let l="vn"==e?"Trang ":"Page: ";return"0"==e&&(l="Trang/Page "),0!=this._chooseOne?{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:167,height:70,alignment:"right",image:"myIso"}],[{colSpan:2,text:i,alignment:"center",fontSize:16,bold:!0}],[{colSpan:2,width:"*",text:[{text:o+this._detail.report_code+"-"+l+t.toString()+"/"+n},{text:"__",color:"#ffffff"}],alignment:"right",bold:!0}]]},layout:{defaultBorder:!1}}:{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:167,height:70,alignment:"right",image:"myIso"}],[{colSpan:2,text:i,alignment:"center",fontSize:16,bold:!0}]]},layout:{defaultBorder:!1}}},styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},images:{myLogo:yield this._convertBase64ImageFromURL(this._logoPath),myIso:yield this._convertBase64ImageFromURL(this._logoIsoPath)}};var o="'print-'"+this._detail.report_code+".pdf";o=o.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g().createPdf(i).download(o),g().createPdf(i).open()})}_exportAll(e){let t=[],n=1;for(let a of e){let e="";4==a.is_active&&(e="en"==this.user.lang?m.W.cancel_en:m.W.cancel),3==a.is_active&&(e="en"==this.user.lang?m.W.printed_en:m.W.printed),2==a.is_active&&(e="en"==this.user.lang?m.W.evicted_en:m.W.evicted),1==a.is_active&&(e="en"==this.user.lang?m.W.official_en:m.W.official),0==a.is_active&&(e="en"==this.user.lang?m.W.draft_en:m.W.draft);let i=new Date(a.received_date).getTime()+864e5*a.tat;t.push({"No.":n,"Report code":a.report_inner_code,"Request No":a.request_no,"Sample name":a.sample_name,"Received Date":r(new Date(a.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),"Returned Date":r(new Date(i)).subtract(7,"hours").format("DD/MM/YYYY"),Company:a.company_sender_l,Contact:null==a.sender_name?"":a.sender_name,State:e}),n+=1}this._excelService.exportAsExcelFile(t,"ResultReport-"+r(new Date).subtract(7,"hours").format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+e.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+e.length+" "+m.W.record,"OK")}tablePrintQuotation(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation(e,t)}}}buildTableBodyPrintQuotation(e,t){var n=[];let a=[],i="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(i="STT\nNO.");let o="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(o="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let l="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(l="\u0110\u01a0N V\u1eca\nUNIT");let r="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(r="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let s="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";0==this._langMain&&(s="K\u1ebeT QU\u1ea2\nRESULTS");let c="en"==this._langMain.toString()?"COMPARE / GUIDELINES":"SO S\xc1NH";0==this._langMain&&(c="SO S\xc1NH\nCOMPARE / GUIDELINES"),a.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:s,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:c,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(a);let d=0;return e.forEach(function(e){var a=[],i=1;t.forEach(function(t){a.push(2==i||5==i?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==i?"left":"center",fontSize:10}),i+=1,d+=1}),n.push(a)}),n}tablePrintQuotation5(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation5(e,t)}}}buildTableBodyPrintQuotation5(e,t){var n=[];let a=[],i="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(i="STT\nNO.");let o="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(o="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let l="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(l="\u0110\u01a0N V\u1eca\nUNIT");let r="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(r="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let s="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";0==this._langMain&&(s="K\u1ebeT QU\u1ea2\nRESULTS");let c="en"==this._langMain.toString()?"COMPARE / GUIDELINES":"SO S\xc1NH";0==this._langMain&&(c="SO S\xc1NH\nCOMPARE / GUIDELINES"),a.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:s,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(a);let d=0;return e.forEach(function(e){var a=[],i=1;t.forEach(function(t){a.push(2==i||5==i?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==i?"left":"center",fontSize:10}),i+=1,d+=1}),n.push(a)}),n}tablePrintQuotation5A(e,t,n){return{table:{widths:n,body:this.buildTableBodyPrintQuotation5A(e,t)}}}buildTableBodyPrintQuotation5A(e,t){var n=[];let a=0;return e.forEach(function(e){var i=[];t.forEach(function(t){i.push({text:{text:e[t]},alignment:"left",fontSize:10,italics:!0}),a+=1}),n.push(i)}),n}_convertBase64ImageFromURL(e){return new Promise((t,n)=>{var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=e=>{n(e)},a.src=e})}loadImgs(){let e={};e.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",e).subscribe(e=>(0,l.__awaiter)(this,void 0,void 0,function*(){this._logoPath+=e.data.filter(e=>"logo-stp"==e.file_name_e)[0].path_file,this._logoIsoPath+=e.data.filter(e=>"logo-iso"==e.file_name_e)[0].path_file,this._signatureCTOPath+=e.data.filter(e=>"signature-cto"==e.file_name_e)[0].path_file,this._signatureCEOPath+=e.data.filter(e=>"signature-ceo"==e.file_name_e)[0].path_file}))}_popupStates(e,t){this._titleLanguage=t.report_code,this.changeState=t.is_active,this._detail=t,this.modalService.open(e,{size:"sm",centered:!0})}_updateState(){let e={};if(e.report_id=this._detail.report_id,e.is_active=this.changeState,e.userid=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code,2==this.changeState||4==this.changeState){let t=this._titleLanguage.substr(this._titleLanguage.lastIndexOf("-RV")+3,this._titleLanguage.length);if(parseInt(t)+1>9&&2==this.changeState)return void this._notifyService.showError("en"==this.user.lang?m.W.MSG_EXPORTNO_EN:m.W.MSG_EXPORT_NO,"en"==this.user.lang?m.W.error_title_en:m.W.error_title);if(this._detail.flag_warning_eviction)return this._notifyService.showError("en"==this.user.lang?m.W.error_eviction_msg_en:m.W.error_eviction_msg,"en"==this.user.lang?m.W.error_title_en:m.W.error_title),void this.modalService.dismissAll();h().fire({title:"en"==this.user.lang?m.W.are_u_sure_evic_en:m.W.are_u_sure_evic,text:this._detail.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{t.value?this._dataService.post("/labresult/updateState",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this._updateStateOfSample(this._detail,e.flag),this.modalService.dismissAll()}):this.modalService.dismissAll()})}else this._dataService.post("/labresult/updateState",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this.modalService.dismissAll()})}_switchEviction(e){console.log(e),h().fire({title:"en"==this.user.lang?m.W.are_u_sure_evic_en:m.W.are_u_sure_evic,text:e.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{if(t.value){let t={};t.report_id=e.report_id,t.is_active=2,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/labresult/updateState",t).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this._updateStateOfSample(e,t.flag),this.modalService.dismissAll()})}else this.modalService.dismissAll()})}_updateStateOfSample(e,t){let n={};n.getlist=e.order_details,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,n.status=3,this._dataService.post("/labresult/updateStateOfSample",n).subscribe(e=>{console.log(e)})}_editInformation(e,t){console.log(t),this._currentTabActivated=1,this._titleLanguage=t.request_no,this.requestId=t.request_id,this.loadRequestDetail(t.request_id),this.modalService.open(e,{size:"lg",centered:!0})}loadRequestDetail(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{console.log("Again J",e.data),this.entity=e.data,this._fdatea=new Date(e.data.received_date),this._tdatea=new Date(e.data.returned_date),this._dt1a=r(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=r(this._tdatea).format("YYYY-MM-DD HH:mm");let t=[],n=1;for(let a of e.data.orders_list.filter(e=>null!=e.inner_code))t.push({sample_id:a.sample_id,sample_name:a.sample_name,sample_code:a.sample_code,inner_code:a.inner_code,description:a.description,note:a.note,weight:a.weight,is_active:a.is_active,userid:a.userid,total_sub:a.total_sub,order_no:n}),n+=1;console.log(t),this.entity._samples=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0],this.loadCustomers()})}loadCustomers(){let e={};e.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.code_link,code:n.id});this._customers=t})}orgValueChange1a(e){null!=e&&"Invalid date"!=e?(this._fdatea=e,this._tdatea=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1a=r(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=r(this._tdatea).format("YYYY-MM-DD HH:mm")):(this._fdatea=null,this._dt1a=null)}orgValueChange2a(e){null!=e&&"Invalid date"!=e?(this._tdatea=e,this._dt1a=r(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=r(this._tdatea).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdatea-this._fdatea)/864e5)):(this._tdatea=null,this._dt2a=null)}_calculateDays(){null!=this._fdatea&&(this._tdatea=new Date(this._fdatea.getTime()+864e5*this.entity.valid_number))}_chooseTab(e,t){this.entity0=e,this._currentTabActivated=t}saveChangeRequest(){if(null==this._dt1a||null==this._dt2a||this._fdatea>this._tdatea)return void this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title);let e={};e.id=this.entity.id,e.customer_id=this.entity.customer_id,e.received_date=this._dt1a,e.returned_date=this._dt2a,e.valid_number=this.entity.valid_number,e.userid=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code,this._dataService.post("/labresult/updateRequestInfo",e).subscribe(e=>{console.log("Request",e),"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})):this._notifyService.showWarning("en"==this.user.lang?m.W.MSG_UPDATENO_EN:m.W.MSG_UPDATENO,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)},()=>{this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}saveChangeSample(){let e={};e.sample_id=this.entity0.sample_id,e.sample_name=this.entity0.sample_name,e.sample_name_e=this.entity0.sample_name_e,e.weight=this.entity0.weight,e.description=this.entity0.description,e.description_e=this.entity0.description_e,e.note=this.entity0.note,e.userid=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code,""!=this.entity0.sample_name&&null!=this.entity0.sample_name?this._dataService.post("/labresult/updateSampleInfo",e).subscribe(e=>{"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})):this._notifyService.showWarning("en"==this.user.lang?m.W.MSG_UPDATENO_EN:m.W.MSG_UPDATENO,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)},()=>{this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)}):this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)}_popupRepareResults(e,t){this._requestIdTemp=t.request_id,this.loadLabResultList(t.request_id),this.modalService.open(e,{size:"lg",centered:!0})}loadLabResultList(e){this._isLoadingResult=!0,this._dataService.post("/lab/getlistresultlabsbyid2side",{request_id:e,filter:this._keywordAdditional}).subscribe(e=>{let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,mark:n.mark,request_no:n.request_no,result_record:n.result_record,result_record_e:n.result_record_e,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,parameter_id:n.parameter_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,status:n.status,note:n.note,export_result:null==n.export_result?1:n.export_result,allow_lod:null!=n.allow_lod&&n.allow_lod,compare_note:n.compare_note});this._getlist2side=t,this._isLoadingResult=!1})}_reupdateInformation(e){this._dataService.post("/lab/reupdateInformation2Sides",{getlist:e}).subscribe(e=>{})}popupComment(e,t){this.loadDetailSample(t.sample_id),this.modalService.open(e,{size:"md",centered:!0})}saveChangeComment(e,t){let n={};n.sample_id=this.entityComment.sample_id,n.take_note=this.entityComment.take_note,n.url_img=e,n.flag=t,this._dataService.post("/request/updateComment",n).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this.fileUpload=null,this.entityComment.url_img=null,this.loadDetailSample(this.entityComment.sample_id)})}loadDetailSample(e){let t={};t.sample_id=e,this._dataService.post("/request/detailSampleOrder",t).subscribe(e=>{this.entityComment=e.data,this.entityComment.url_img=e.data.url_img,this._path=null==e.data.url_img?null:e.data.url_img.substr(e.data.url_img.lastIndexOf("/")+1,e.data.url_img.length)})}fileEvent(e){var t=e.target.files[0];if(void 0===t||void 0===t.name)this.fileUpload=null,this.entityComment.url_img=null,this._notifyService.showError("en"==this.user.lang?m.W.recheck_file_en:m.W.recheck_file,"en"==this.user.lang?m.W.error_title_en:m.W.error_title);else{this.fileUpload=t.name;let n=this.fileUpload.split(".").pop();"jpg"===n||"jpeg"===n||"png"===n?(this.entityComment.url_img=t.name,this._processUpload(e.target)):(this._notifyService.showError("en"==this.user.lang?m.W.format_incorrect_en:m.W.format_incorrect,"en"==this.user.lang?m.W.error_title_en:m.W.error_title),this.fileUpload=null,this.entityComment.url_img=null)}}_processUpload(e){if(null==e)this._notifyService.showError("en"==this.user.lang?m.W.recheck_file_en:m.W.recheck_file,"en"==this.user.lang?m.W.error_title_en:m.W.error_title);else{let t={folder_name:"lab_attachment"};t.id=this.entityComment.sample_id,this._uploadService.uploadFile("/services/uploads/"+t.id+"/"+t.folder_name,e.files).subscribe(e=>{this.saveChangeComment(e.data,1)})}}removeAttachment(e){let t={};t.url=e.url_img,this._dataService.post("/services/deletefile1",t).subscribe(t=>{let n={};n.sample_id=e.sample_id,n.take_note=e.take_note,n.url_img=null,this._dataService.post("/request/updateComment",n).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this._path="",this.loadDetailSample(e.sample_id)})})}_downloadFileResult(e){window.open(d.h.BASE_API+"/"+e.url_img,"blank")}closeModal(){this.modalService.dismissAll()}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(Z.e),f.Y36(x.D),f.Y36(o.F0),f.Y36(A.c),f.Y36(b.C),f.Y36(T.x),f.Y36(y.FF))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-lab-results"]],viewQuery:function(e,t){if(1&e&&(f.Gf(C,5),f.Gf(C,5)),2&e){let e;f.iGM(e=f.CRH())&&(t.fileUpload=e.first),f.iGM(e=f.CRH())&&(t.fileUpload1=e.first)}},decls:117,vars:104,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["type","button","routerLink","/request/lab-report",1,"btn","btn-sm","btn-primary","mr-sm-2"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"row",2,"overflow-x","scroll"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","90px"],["scope","col"],[4,"ngIf"],["contentLanguage",""],["contentStatus",""],["contentRequest",""],["contentAdditionalInfo",""],["contentCommentUpload",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","10",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["ngbDropdown","","class","btn-group mr-sm-1","role","group",4,"ngIf"],["href","javascript:;",3,"click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-default",4,"ngIf"],["ngbDropdown","","role","group",1,"btn-group","mr-sm-1"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["href","javascript:;",1,"dropdown-item",3,"click"],["class","dropdown-item","href","javascript:;",3,"click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-warning",3,"click"],[1,"icofont","icofont-pencil-alt-5"],["href","javascript:;",3,"click"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-danger"],[1,"badge","badge-success"],[1,"badge","badge-default"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-danger","mr-sm-2",3,"click"],["name","changestate",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value"],[1,"form-group"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],[1,"col-md-4"],["for","received_date"],["type","text","bsDatepicker","","name","_fdatea","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdatea","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",1,"form-control","mr-sm-2",3,"type","placeholder","ngModel","min","ngModelChange","change"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],[1,"flex-wrap"],[1,"btn-group","flex-wrap"],[1,"jbold"],[1,"col-md-6"],[3,"for"],["type","text",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],[1,"col-md-12","text-right"],[1,"btn","btn-sm","btn-light","mr-sm-2",3,"click"],[1,"fa","fa-times-circle-o"],["type","button",3,"ngClass","click"],["for","search_id",1,"mr-sm-2"],["type","text","name","search_id","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","change","keyup.enter"],[1,"tableFixHead"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate"],["type","text",1,"form-control",2,"width","100px",3,"name","ngModel","ngModelChange","change"],["type","text",1,"form-control",2,"width","100px",3,"name","ngModel","placeholder","ngModelChange","change"],[1,"text-truncate","text-center"],["type","checkbox",1,"form-control",2,"width","25px",3,"name","ngModel","ngModelChange","change"],[1,"form","theme-form",3,"ngSubmit"],["form1","ngForm"],["for","comment"],["rows","2","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["for","img",1,"mr-sm-2"],["name","fileUpload","type","file",3,"change"],["fileUpload",""],["type","hidden","name","fileUpload",3,"ngModel","ngModelChange"],[1,"mute"],["href","javascript:;",1,"mr-sm-2",3,"click"],["href","javascript:;","class","text-danger",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit","class","btn btn-primary mr-sm-1",4,"ngIf"],["href","javascript:;",1,"text-danger",3,"click"],[1,"fa","fa-trash"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary","mr-sm-1"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",1),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"input",7),f.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"input",8),f.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),f.qZA(),f.TgZ(11,"input",9),f.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),f.qZA(),f.TgZ(12,"select",10),f.NdJ("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),f.TgZ(13,"option",11),f._uU(14),f.ALo(15,"translate"),f.qZA(),f.TgZ(16,"option",12),f._uU(17),f.ALo(18,"translate"),f.qZA(),f.TgZ(19,"option",13),f._uU(20),f.ALo(21,"translate"),f.qZA(),f.TgZ(22,"option",14),f._uU(23),f.ALo(24,"translate"),f.qZA(),f.TgZ(25,"option",15),f._uU(26),f.ALo(27,"translate"),f.qZA(),f.TgZ(28,"option",16),f._uU(29),f.ALo(30,"translate"),f.qZA(),f.qZA(),f.YNc(31,w,4,3,"button",17),f.TgZ(32,"button",18),f._uU(33),f.ALo(34,"translate"),f.qZA(),f.YNc(35,L,1,0,"img",19),f.qZA(),f.qZA(),f.TgZ(36,"div",20),f.TgZ(37,"div",21),f.TgZ(38,"select",22),f.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),f.TgZ(39,"option",23),f._uU(40,"#10"),f.qZA(),f.TgZ(41,"option",24),f._uU(42,"#25"),f.qZA(),f.TgZ(43,"option",25),f._uU(44,"#50"),f.qZA(),f.TgZ(45,"option",26),f._uU(46,"#100"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(47,"div",27),f.TgZ(48,"div",28),f.TgZ(49,"div",29),f.TgZ(50,"div",30),f.TgZ(51,"pagination",31),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(52,"div",32),f.TgZ(53,"a",33),f._uU(54),f.ALo(55,"translate"),f.ALo(56,"translate"),f.ALo(57,"translate"),f.ALo(58,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(59,"div",28),f.TgZ(60,"div",34),f.TgZ(61,"table",35),f.TgZ(62,"thead",36),f.TgZ(63,"tr"),f.TgZ(64,"th",37),f._uU(65,"#"),f.qZA(),f.TgZ(66,"th",38),f._uU(67),f.ALo(68,"translate"),f.qZA(),f.TgZ(69,"th",39),f._uU(70),f.ALo(71,"translate"),f.qZA(),f.TgZ(72,"th",39),f._uU(73),f.ALo(74,"translate"),f.qZA(),f.TgZ(75,"th",39),f._uU(76),f.ALo(77,"translate"),f.qZA(),f.TgZ(78,"th",39),f._uU(79),f.ALo(80,"translate"),f.qZA(),f.TgZ(81,"th",39),f._uU(82),f.ALo(83,"translate"),f.qZA(),f.TgZ(84,"th",39),f._uU(85),f.ALo(86,"translate"),f.qZA(),f.TgZ(87,"th",39),f._uU(88),f.ALo(89,"translate"),f.qZA(),f.TgZ(90,"th",39),f._uU(91),f.ALo(92,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(93,"tbody"),f.YNc(94,U,6,3,"ng-container",40),f.YNc(95,W,2,1,"ng-container",40),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(96,"div",28),f.TgZ(97,"div",29),f.TgZ(98,"div",30),f.TgZ(99,"pagination",31),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(100,"div",32),f.TgZ(101,"a",33),f._uU(102),f.ALo(103,"translate"),f.ALo(104,"translate"),f.ALo(105,"translate"),f.ALo(106,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(107,j,22,15,"ng-template",null,41,f.W1O),f.YNc(109,G,31,29,"ng-template",null,42,f.W1O),f.YNc(111,V,116,129,"ng-template",null,43,f.W1O),f.YNc(113,te,44,33,"ng-template",null,44,f.W1O),f.YNc(115,oe,36,19,"ng-template",null,45,f.W1O)),2&e&&(f.xp6(8),f.Q6J("placeholder",f.lcZ(9,52,"Search"))("ngModel",t._keyword),f.xp6(2),f.Q6J("ngModel",t._fDate)("bsConfig",f.DdM(102,le)),f.xp6(1),f.Q6J("ngModel",t._tDate)("bsConfig",f.DdM(103,le)),f.xp6(1),f.Q6J("ngModel",t._status),f.xp6(2),f.hij(" ",f.lcZ(15,54,"All")," "),f.xp6(3),f.hij(" ",f.lcZ(18,56,"Draft")," "),f.xp6(3),f.hij(" ",f.lcZ(21,58,"Official")," "),f.xp6(3),f.hij(" ",f.lcZ(24,60,"Evicted")," "),f.xp6(3),f.hij(" ",f.lcZ(27,62,"Printed")," "),f.xp6(3),f.hij(" ",f.lcZ(30,64,"Cancel")," "),f.xp6(2),f.Q6J("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),f.xp6(2),f.hij(" ",f.lcZ(34,66,"Go back")," "),f.xp6(2),f.Q6J("ngIf",t._isLoading),f.xp6(3),f.Q6J("ngModel",t.pageSize),f.xp6(13),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(55,68,"Total of records"),": ",t.totalRow," - ",f.lcZ(56,70,"Page")," ",t.pageIndex," ",f.lcZ(57,72,"of")," ",t.totalPage," ",f.lcZ(58,74,"page"),""),f.xp6(13),f.hij(" ",f.lcZ(68,76,"Actions")," "),f.xp6(3),f.hij(" ",f.lcZ(71,78,"Report code")," "),f.xp6(3),f.hij(" ",f.lcZ(74,80,"Request code")," "),f.xp6(3),f.hij(" ",f.lcZ(77,82,"Sample name")," "),f.xp6(3),f.hij(" ",f.lcZ(80,84,"Received date")," "),f.xp6(3),f.Oqu(f.lcZ(83,86,"Returned date")),f.xp6(3),f.hij(" ",f.lcZ(86,88,"Company")," "),f.xp6(3),f.Oqu(f.lcZ(89,90,"Contact")),f.xp6(3),f.Oqu(f.lcZ(92,92,"Status")),f.xp6(3),f.Q6J("ngIf",0==t._getlist.length),f.xp6(1),f.Q6J("ngIf",t._getlist.length>0),f.xp6(4),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(103,94,"Total of records"),": ",t.totalRow," - ",f.lcZ(104,96,"Page")," ",t.pageIndex," ",f.lcZ(105,98,"of")," ",t.totalPage," ",f.lcZ(106,100,"page"),""))},directives:[i.Fj,i.JJ,i.On,q.Y5,q.Np,i.EJ,i.YN,i.Kr,a.O5,o.rH,v.Qt,a.sg,y.jt,y.iD,y.Vi,i._Y,i.JL,i.F,M.w9,i.Q7,i.c5,a.mk,i.Wl],pipes:[S.X$,a.uU],styles:[""]}),e})();const se=["fileUpload"];function ce(e,t){if(1&e&&(f.TgZ(0,"option",37),f._uU(1),f.qZA()),2&e){const e=t.$implicit,n=f.oxw();f.Q6J("value",e.id),f.xp6(1),f.hij(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function de(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",38),f.NdJ("click",function(){f.CHM(e);const t=f.oxw();return null==t._id||""==t._id?t._exportAll(t._preparationlist):t._exportAllLab()}),f._UZ(1,"i",39),f._uU(2),f.ALo(3,"translate"),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Export")," "))}function ue(e,t){1&e&&f._UZ(0,"img",40)}function ge(e,t){1&e&&(f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td",41),f.TgZ(3,"h3",42),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.qZA(),f.qZA(),f.BQk()),2&e&&(f.xp6(4),f.hij(" ",f.lcZ(5,1,"No records now!!!")," "))}function pe(e,t){1&e&&f._UZ(0,"i",53)}function _e(e,t){1&e&&f._UZ(0,"i",54)}function he(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",55),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(3);return t._updateValidationv2(t._preparationlist)}),f.ALo(1,"translate"),f._UZ(2,"i",56),f.qZA()}2&e&&f.Q6J("title",f.lcZ(1,1,"Save"))}function me(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"a",57),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit,n=f.oxw(2),a=f.MAs(120);return n.popupComment(a,t)}),f._uU(2),f.qZA(),f.BQk()}if(2&e){const e=f.oxw().$implicit;f.xp6(2),f.Oqu(e.inner_code)}}function fe(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.Oqu(e.inner_code)}}function Ze(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"a",57),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit;return f.oxw(2)._updateStatusSample(t)}),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.BQk()}2&e&&(f.xp6(2),f.Oqu(f.lcZ(3,1,"Return lab")))}function xe(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.hij(" ",e.mark," ")}}function Ae(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",58),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.mark=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","mark",t+1,""),f.Q6J("ngModel",n.mark)}}function be(e,t){1&e&&f._UZ(0,"i",59)}function Te(e,t){1&e&&f._UZ(0,"i",60)}function ye(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.hij(" ",e.compare_note," ")}}function qe(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",58),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.compare_note=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","comparenote",t+1,""),f.Q6J("ngModel",n.compare_note)}}function ve(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"th",34),f._uU(2),f.qZA(),f.TgZ(3,"td",44),f.TgZ(4,"button",45),f.NdJ("click",function(){return f.CHM(e),f.oxw(2)._switchFlagEdit()}),f.ALo(5,"translate"),f.YNc(6,pe,1,0,"i",46),f.YNc(7,_e,1,0,"i",47),f.qZA(),f.YNc(8,he,3,3,"button",48),f.qZA(),f.TgZ(9,"td"),f.YNc(10,me,3,1,"ng-container",35),f.YNc(11,fe,2,1,"ng-container",35),f.qZA(),f.TgZ(12,"td"),f._uU(13),f.qZA(),f.TgZ(14,"td"),f._uU(15),f.qZA(),f.TgZ(16,"td"),f._uU(17),f.qZA(),f.TgZ(18,"td"),f._uU(19),f.qZA(),f.TgZ(20,"td"),f._uU(21),f.qZA(),f.TgZ(22,"td"),f._uU(23),f.qZA(),f.TgZ(24,"td"),f._uU(25),f.qZA(),f.TgZ(26,"td"),f._uU(27),f.qZA(),f.TgZ(28,"td"),f._uU(29),f.qZA(),f.TgZ(30,"td"),f._uU(31),f.qZA(),f.TgZ(32,"td"),f._UZ(33,"span",49),f.qZA(),f.TgZ(34,"td"),f.YNc(35,Ze,4,3,"ng-container",35),f.qZA(),f.TgZ(36,"td"),f.YNc(37,xe,2,1,"ng-container",35),f.YNc(38,Ae,2,2,"ng-container",35),f.qZA(),f.TgZ(39,"td",50),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return t.allow_lod=!t.allow_lod}),f.YNc(40,be,1,0,"i",51),f.YNc(41,Te,1,0,"i",52),f.qZA(),f.TgZ(42,"td"),f.YNc(43,ye,2,1,"ng-container",35),f.YNc(44,qe,2,2,"ng-container",35),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(2),f.hij(" ",n+1+a.pageSize*(a.pageIndex-1)," "),f.xp6(2),f.Q6J("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!a._authenService.hasPermission("REQ-REPORT","update"))("title",f.lcZ(5,27,e.flag?"Cancel":"_Edit")),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",a._authenService.hasPermission("REQ-REPORT","update")),f.xp6(1),f.Q6J("ngIf",!a._authenService.hasPermission("REQ-REPORT","update")),f.xp6(2),f.Oqu(e.code),f.xp6(2),f.hij(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),f.xp6(2),f.hij(" ","en"==a.user.lang?e.para_name_e:e.para_name_l," "),f.xp6(2),f.Oqu(e.tat),f.xp6(2),f.Oqu(e.note),f.xp6(2),f.Oqu(e.note_lab),f.xp6(2),f.hij(" ",e.note_asm," "),f.xp6(2),f.Oqu(e.unit),f.xp6(2),f.hij(" ",e.lod," "),f.xp6(2),f.hij(" ",e.loq," "),f.xp6(2),f.Q6J("innerHTML",e.result_record,f.oJD),f.xp6(2),f.Q6J("ngIf",a._authenService.hasPermission("REQ-REPORT","update")&&a._authenService.hasPermission("REQ-REPORT","delete")),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",e.allow_lod),f.xp6(1),f.Q6J("ngIf",!e.allow_lod),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag)}}function Me(e,t){if(1&e&&(f.ynx(0),f.YNc(1,ve,45,29,"tr",43),f.BQk()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngForOf",e._preparationlist)}}function Se(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",83),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2);return t.removeAttachment(t.entityComment)}),f._UZ(1,"i",84),f.qZA()}}function Ce(e,t){1&e&&(f.ynx(0),f.TgZ(1,"a",85),f._UZ(2,"img",86),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.BQk()),2&e&&(f.xp6(3),f.hij(" ",f.lcZ(4,1,"Processing"),""))}function we(e,t){1&e&&(f.TgZ(0,"button",87),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Save & close")," "))}function Le(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",61,62),f.NdJ("ngSubmit",function(){f.CHM(e);const t=f.oxw();return t.saveChangeComment(t.entityComment,0)}),f.TgZ(2,"div",63),f.TgZ(3,"h4",64),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.TgZ(6,"button",65),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(7,"span",66),f._uU(8,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(9,"div",67),f.TgZ(10,"div",68),f.TgZ(11,"div",69),f.TgZ(12,"div",70),f.TgZ(13,"label",71),f._uU(14),f.ALo(15,"translate"),f.qZA(),f.TgZ(16,"textarea",72),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entityComment.take_note=t}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(17,"div",69),f.TgZ(18,"div",70),f.TgZ(19,"label",73),f._uU(20),f.ALo(21,"translate"),f.qZA(),f.TgZ(22,"input",74,75),f.NdJ("change",function(t){return f.CHM(e),f.oxw().fileEvent(t)}),f.qZA(),f.TgZ(24,"input",76),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entityComment.url_img=t}),f.qZA(),f._UZ(25,"br"),f.TgZ(26,"small",77),f.TgZ(27,"a",78),f.NdJ("click",function(){f.CHM(e);const t=f.oxw();return t._downloadFileResult(t.entityComment)}),f._uU(28),f.qZA(),f.YNc(29,Se,2,0,"a",79),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(30,"div",80),f.TgZ(31,"button",81),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f._uU(32),f.ALo(33,"translate"),f.qZA(),f.YNc(34,Ce,5,3,"ng-container",35),f.YNc(35,we,3,3,"button",82),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(4),f.AsE(" ",f.lcZ(5,11,"Note")," - ",e.entityComment.inner_code," "),f.xp6(10),f.hij("",f.lcZ(15,13,"Content")," "),f.xp6(2),f.Q6J("ngModel",e.entityComment.take_note),f.xp6(4),f.Oqu(f.lcZ(21,15,"Attachment")),f.xp6(4),f.Q6J("ngModel",e.entityComment.url_img),f.xp6(4),f.Oqu(e._path),f.xp6(1),f.Q6J("ngIf",null!=e.entityComment.url_img),f.xp6(3),f.hij(" ",f.lcZ(33,17,"Close")," "),f.xp6(2),f.Q6J("ngIf",e.isSave),f.xp6(1),f.Q6J("ngIf",!e.isSave)}}const Ue=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};g().vfs=p.I.vfs;let Ne=(()=>{class e{constructor(e,t,n,a,i,o,l,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=i,this._excelService=o,this.modalService=l,this._activatedRoute=r,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=3,this.entity={},this.entityComment={},this._path="",this._id="",this._flagEdit=!1,(!1===e.checkAccess("RES-VALID")||!1===e.hasPermission("RES-VALID","read"))&&this._route.navigate(["/404"]),this.socket=c()(d.h.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this._activatedRoute.params.subscribe(e=>{this._id=e.id,this.loadData(this._id),this.socket.on("refreshPage",e=>{console.log(this._id),this.loadData(this._id)})}),this.loadDepartment(),this.loadTestFamilyPL()}loadData(e){if(null==e){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,this._dataService.post("/lab/getlistresultlabs",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,tat:n.tat,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,export_result:null==n.export_result?1:n.export_result,allow_lod:null!=n.allow_lod&&n.allow_lod,compare_note:n.compare_note,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}else{let e={};e.filter=this._keyword,e.page=this.pageIndex,e.limit=this.pageSize,e.request_id=this._id,this._dataService.post("/lab/getlistresultlabsbyid",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,tat:n.tat,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,export_result:null==n.export_result?1:n.export_result,allow_lod:null!=n.allow_lod&&n.allow_lod,compare_note:n.compare_note,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyPL(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",e).subscribe(e=>{this._pllist=e.data})}_exportAll(e){let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?m.W.s_done_en:m.W.s_done),3==n.status&&(e="en"==this.user.lang?m.W.s_validate_en:m.W.s_validate),2==n.status&&(e="en"==this.user.lang?m.W.s_techvalidate_en:m.W.s_techvalidate),1==n.status&&(e="en"==this.user.lang?m.W.s_prepare_en:m.W.s_prepare),0==n.status&&(e="en"==this.user.lang?m.W.s_none_en:m.W.s_none);let a=new Date(n.received_date).getTime()+864e5*n.tat;t.push({"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,Note:null==n.note?"":n.note,"Note Lab":null==n.note_lab?"":n.note_lab,"Note ASM":null==n.note_asm?"":n.note_asm,Unit:null==n.unit?"":n.unit,LOD:null==n.lod?"":n.lod,LOQ:null==n.loq?"":n.loq,Result:null==n.result_record?"":n.result_record,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(a)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l})}this._excelService.exportAsExcelFile(t,"LabValidation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+e.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+e.length+" "+m.W.record,"OK")}_exportAllLab(){this._dataService.post("/lab/exportresultlabbyid",{request_id:this._id,short_code:this.user.short_code}).subscribe(e=>{let t=[];for(let n of e.data)t.push({"Ng\xe0y nh\u1eadn m\u1eabu":r(new Date(n.returned_date)).format("DD/MM/YYYY"),"M\xe3 kh\xe1ch h\xe0ng":n.employee_nr+n.request_no.substr(2,n.request_no.length),"M\xe3 s\u1ed1 m\u1eabu":n.inner_code,"T\xean m\u1eabu/n\u1ec1n m\u1eabu":null==n.sample_name_e?n.sample_name:n.sample_name_e,"Kh\u1ed1i l\u01b0\u1ee3ng/th\u1ec3 t\xedch":"",VS:"","H\xf3a":"","T\xecnh tr\u1ea1ng m\u1eabu":null==n.description_e?null==n.description?"":n.description:n.descripton_e,"Ng\xe0y/ ng\u01b0\u1eddi l\u01b0u m\u1eabu":"","Khu v\u1ef1c/ v\u1ecb tr\xed l\u01b0u":"","Ng\xe0y thanh l\xfd":"","Ng\u01b0\u1eddi thanh l\xfd":"","Tr\u01b0\u1edfng ph\xf2ng x\xe1c nh\u1eadn":"","Ghi ch\xfa":""});this._excelService.exportAsExcelFile(t,"LabValidation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+t.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+t.length+" "+m.W.record,"OK")})}orgValueChange1(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e,t){3==t||4==t?(e.status=t,h().fire({title:"en"==this.user.lang?m.W.are_u_sure_switch_en:m.W.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData(this._id)}):this.loadData(this._id)})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData(this._id)}))}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_ADD_EN:m.W.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}_switchFlagEdit(){for(let e of this._preparationlist)e.flag=!e.flag}_updateValidationv2(e){console.log(e),h().fire({title:"en"==this.user.lang?m.W.are_u_sure0_en:m.W.are_u_sure0,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{t.value&&this._dataService.post("/lab/updateValidationv2",{getlist:e,user_id:this.user.id,ipaddress:this.user.ipaddress,short_code:this.user.short_code}).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})})})}_updateValidation(e,t){1==t&&(e.allow_lod=!e.allow_lod),h().fire({title:"en"==this.user.lang?m.W.are_u_sure0_en:m.W.are_u_sure0,text:e.code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{t.value&&this._dataService.post("/lab/updateValidation",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})})})}_updateValidationLOD(e,t){1==t&&(e.allow_lod=!e.allow_lod),this._dataService.post("/lab/updateValidationLOD",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})})}popupComment(e,t){this.loadDetailSample(t.sample_id),this.modalService.open(e,{size:"md",centered:!0})}saveChangeComment(e,t){let n={};n.sample_id=this.entityComment.sample_id,n.take_note=this.entityComment.take_note,n.url_img=e,n.flag=t,this._dataService.post("/request/updateComment",n).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this.fileUpload=null,this.entityComment.url_img=null,this.modalService.dismissAll()})}loadDetailSample(e){let t={};t.sample_id=e,this._dataService.post("/request/detailSampleOrder",t).subscribe(e=>{console.log(e),this.entityComment=e.data,this.entityComment.url_img=e.data.url_img,this._path=null==e.data.url_img?null:e.data.url_img.substr(e.data.url_img.lastIndexOf("/")+1,e.data.url_img.length)})}fileEvent(e){var t=e.target.files[0];if(void 0===t||void 0===t.name)this.fileUpload=null,this.entityComment.url_img=null,this._notifyService.showError("en"==this.user.lang?m.W.recheck_file_en:m.W.recheck_file,"en"==this.user.lang?m.W.error_title_en:m.W.error_title);else{this.fileUpload=t.name;let n=this.fileUpload.split(".").pop();"jpg"===n||"jpeg"===n||"png"===n?(console.log("ok"),this.entityComment.url_img=t.name,this._processUpload(e.target)):(this._notifyService.showError("en"==this.user.lang?m.W.format_incorrect_en:m.W.format_incorrect,"en"==this.user.lang?m.W.error_title_en:m.W.error_title),this.fileUpload=null,this.entityComment.url_img=null)}}_processUpload(e){if(null==e)this._notifyService.showError("en"==this.user.lang?m.W.recheck_file_en:m.W.recheck_file,"en"==this.user.lang?m.W.error_title_en:m.W.error_title);else{let t={folder_name:"lab_attachment"};t.id=this.entityComment.sample_id,this._uploadService.uploadFile("/services/uploads/"+t.id+"/"+t.folder_name,e.files).subscribe(e=>{console.log(e),this.saveChangeComment(e.data,1)})}}removeAttachment(e){let t={};t.url=e.url_img,console.log(t),this._dataService.post("/services/deletefile1",t).subscribe(t=>{let n={};n.sample_id=e.sample_id,n.take_note=e.take_note,n.url_img=null,this._dataService.post("/request/updateComment",n).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this._path="",this.loadDetailSample(e.sample_id)})})}_updateStatusSample(e){console.log(e),h().fire({title:"en"==this.user.lang?m.W.are_u_sure_switch_en:m.W.are_u_sure_switch,text:e.inner_code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{if(t.value){let t={};t.sample_id=e.sample_id,t.parameter_id=e.parameter_id,t.category_id=e.category_id,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/labresult/updateReturnSample",t).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})})}})}_downloadFileResult(e){window.open(d.h.BASE_API+"/"+e.url_img,"blank")}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(Z.e),f.Y36(x.D),f.Y36(o.F0),f.Y36(A.c),f.Y36(b.C),f.Y36(T.x),f.Y36(y.FF),f.Y36(o.gz))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-labrep-detaillist"]],viewQuery:function(e,t){if(1&e&&(f.Gf(se,5),f.Gf(se,5)),2&e){let e;f.iGM(e=f.CRH())&&(t.fileUpload=e.first),f.iGM(e=f.CRH())&&(t.fileUpload1=e.first)}},decls:121,vars:123,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","disabled","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["routerLink","/request/lab-report",1,"btn","btn-sm","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[1,"text-truncate"],[4,"ngIf"],["contentCommentUpload",""],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","18",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],[2,"text-align","center"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[3,"innerHTML"],[2,"cursor","pointer",3,"click"],["class","fa fa-check-circle text-success",4,"ngIf"],["class","fa fa-times-circle text-danger",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["href","javascript:;",3,"click"],["type","text","autoSizeInput","",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"fa","fa-check-circle","text-success"],[1,"fa","fa-times-circle","text-danger"],[1,"form","theme-form",3,"ngSubmit"],["form1","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group"],["for","comment"],["rows","2","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["for","img",1,"mr-sm-2"],["name","fileUpload","type","file",3,"change"],["fileUpload",""],["type","hidden","name","fileUpload",3,"ngModel","ngModelChange"],[1,"mute"],["href","javascript:;",1,"mr-sm-2",3,"click"],["href","javascript:;","class","text-danger",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit","class","btn btn-primary mr-sm-1",4,"ngIf"],["href","javascript:;",1,"text-danger",3,"click"],[1,"fa","fa-trash"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary","mr-sm-1"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",1),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"input",7),f.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData(t._id)})("keyup.enter",function(){return t.loadData(t._id)}),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"input",8),f.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),f.qZA(),f.TgZ(11,"input",9),f.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),f.qZA(),f.TgZ(12,"select",10),f.NdJ("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData(t._id)}),f.TgZ(13,"option",11),f._uU(14),f.ALo(15,"translate"),f.ALo(16,"translate"),f.qZA(),f.YNc(17,ce,2,2,"option",12),f.qZA(),f.YNc(18,de,4,3,"button",13),f.TgZ(19,"a",14),f._uU(20),f.ALo(21,"translate"),f.ALo(22,"translate"),f.qZA(),f.YNc(23,ue,1,0,"img",15),f.qZA(),f.qZA(),f.TgZ(24,"div",16),f.TgZ(25,"div",17),f.TgZ(26,"select",18),f.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),f.TgZ(27,"option",19),f._uU(28,"#10"),f.qZA(),f.TgZ(29,"option",20),f._uU(30,"#25"),f.qZA(),f.TgZ(31,"option",21),f._uU(32,"#50"),f.qZA(),f.TgZ(33,"option",22),f._uU(34,"#100"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(35,"div",23),f.TgZ(36,"div",24),f.TgZ(37,"div",25),f.TgZ(38,"div",26),f.TgZ(39,"pagination",27),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(40,"div",28),f.TgZ(41,"a",29),f._uU(42),f.ALo(43,"translate"),f.ALo(44,"translate"),f.ALo(45,"translate"),f.ALo(46,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(47,"div",24),f.TgZ(48,"div",30),f.TgZ(49,"table",31),f.TgZ(50,"thead",32),f.TgZ(51,"tr"),f.TgZ(52,"th",33),f._uU(53,"#"),f.qZA(),f.TgZ(54,"th",34),f._uU(55),f.ALo(56,"translate"),f.qZA(),f.TgZ(57,"th",34),f._uU(58),f.ALo(59,"translate"),f.qZA(),f.TgZ(60,"th",34),f._uU(61),f.ALo(62,"translate"),f.qZA(),f.TgZ(63,"th",34),f._uU(64),f.ALo(65,"translate"),f.qZA(),f.TgZ(66,"th",34),f._uU(67),f.ALo(68,"translate"),f.qZA(),f.TgZ(69,"th",34),f._uU(70),f.ALo(71,"translate"),f.qZA(),f.TgZ(72,"th",34),f._uU(73),f.ALo(74,"translate"),f.qZA(),f.TgZ(75,"th",34),f._uU(76),f.ALo(77,"translate"),f.qZA(),f.TgZ(78,"th",34),f._uU(79),f.ALo(80,"translate"),f.qZA(),f.TgZ(81,"th",34),f._uU(82),f.ALo(83,"translate"),f.qZA(),f.TgZ(84,"th",34),f._uU(85),f.ALo(86,"translate"),f.qZA(),f.TgZ(87,"th",34),f._uU(88),f.ALo(89,"translate"),f.qZA(),f.TgZ(90,"th",34),f._uU(91),f.ALo(92,"translate"),f.qZA(),f.TgZ(93,"th",34),f._uU(94),f.ALo(95,"translate"),f.qZA(),f.TgZ(96,"th",34),f._uU(97),f.ALo(98,"translate"),f.qZA(),f.TgZ(99,"th",34),f._uU(100),f.ALo(101,"translate"),f.qZA(),f.TgZ(102,"th",34),f._uU(103),f.ALo(104,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(105,"tbody"),f.YNc(106,ge,6,3,"ng-container",35),f.YNc(107,Me,2,1,"ng-container",35),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(108,"div",24),f.TgZ(109,"div",25),f.TgZ(110,"div",26),f.TgZ(111,"pagination",27),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(112,"div",28),f.TgZ(113,"a",29),f._uU(114),f.ALo(115,"translate"),f.ALo(116,"translate"),f.ALo(117,"translate"),f.ALo(118,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(119,Le,36,19,"ng-template",null,36,f.W1O)),2&e&&(f.xp6(8),f.Q6J("placeholder",f.lcZ(9,61,"Search"))("ngModel",t._keyword),f.xp6(2),f.Q6J("ngModel",t._fDate)("bsConfig",f.DdM(121,Ue))("disabled",null!=t._id),f.xp6(1),f.Q6J("ngModel",t._tDate)("bsConfig",f.DdM(122,Ue))("disabled",null!=t._id),f.xp6(1),f.Q6J("ngModel",t.department_id)("disabled",null!=t._id),f.xp6(2),f.AsE(" ",f.lcZ(15,63,"All")," ",f.lcZ(16,65,"Department")," "),f.xp6(3),f.Q6J("ngForOf",t._deptlist),f.xp6(1),f.Q6J("ngIf",t._authenService.hasPermission("REQ-VALID","report")),f.xp6(2),f.AsE(" ",f.lcZ(21,67,"Return")," ",f.lcZ(22,69,"Report")," "),f.xp6(3),f.Q6J("ngIf",t._isLoading),f.xp6(3),f.Q6J("ngModel",t.pageSize),f.xp6(13),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(43,71,"Total of records"),": ",t.totalRow," - ",f.lcZ(44,73,"Page")," ",t.pageIndex," ",f.lcZ(45,75,"of")," ",t.totalPage," ",f.lcZ(46,77,"page"),""),f.xp6(13),f.Oqu(f.lcZ(56,79,"Actions")),f.xp6(3),f.hij(" ",f.lcZ(59,81,"Inner code")," "),f.xp6(3),f.hij(" ",f.lcZ(62,83,"Code")," "),f.xp6(3),f.Oqu(f.lcZ(65,85,"Internal testing")),f.xp6(3),f.Oqu(f.lcZ(68,87,"Parameter name")),f.xp6(3),f.Oqu(f.lcZ(71,89,"Priority")),f.xp6(3),f.Oqu(f.lcZ(74,91,"Note")),f.xp6(3),f.Oqu(f.lcZ(77,93,"Note lab")),f.xp6(3),f.Oqu(f.lcZ(80,95,"Note asm")),f.xp6(3),f.Oqu(f.lcZ(83,97,"Unit")),f.xp6(3),f.Oqu(f.lcZ(86,99,"LOD")),f.xp6(3),f.Oqu(f.lcZ(89,101,"LOQ")),f.xp6(3),f.Oqu(f.lcZ(92,103,"Results")),f.xp6(3),f.Oqu(f.lcZ(95,105,"Status")),f.xp6(3),f.Oqu(f.lcZ(98,107,"Mark")),f.xp6(3),f.Oqu(f.lcZ(101,109,"Tick LOD?")),f.xp6(3),f.Oqu(f.lcZ(104,111,"Compare")),f.xp6(3),f.Q6J("ngIf",0==t._preparationlist.length),f.xp6(1),f.Q6J("ngIf",t._preparationlist.length>0),f.xp6(4),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(115,113,"Total of records"),": ",t.totalRow," - ",f.lcZ(116,115,"Page")," ",t.pageIndex," ",f.lcZ(117,117,"of")," ",t.totalPage," ",f.lcZ(118,119,"page"),""))},directives:[i.Fj,i.JJ,i.On,q.Y5,q.Np,i.EJ,i.YN,i.Kr,a.sg,a.O5,o.yS,v.Qt,a.mk,i._Y,i.JL,i.F],pipes:[S.X$],styles:[""]}),e})();function De(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",34),f.NdJ("click",function(){f.CHM(e);const t=f.oxw();return t._exportAll(t.exportList)}),f._UZ(1,"i",35),f._uU(2),f.ALo(3,"translate"),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Export")," "))}function ke(e,t){1&e&&f._UZ(0,"img",36)}function Ie(e,t){1&e&&(f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td",37),f.TgZ(3,"h3",38),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.qZA(),f.qZA(),f.BQk()),2&e&&(f.xp6(4),f.hij(" ",f.lcZ(5,1,"No records now!!!")," "))}function Ye(e,t){if(1&e&&(f.TgZ(0,"a",46),f.TgZ(1,"strong",38),f._uU(2),f.qZA(),f.qZA()),2&e){const e=f.oxw().$implicit;f.MGl("routerLink","/request/lab-report-validation/",e.id,""),f.xp6(2),f.Oqu(e.total_validation)}}function Je(e,t){1&e&&(f.ynx(0),f.TgZ(1,"strong"),f._uU(2,"0"),f.qZA(),f.BQk())}function Oe(e,t){1&e&&(f.TgZ(0,"span",47),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Printed")))}function Qe(e,t){1&e&&(f.TgZ(0,"span",48),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Pending")))}function Pe(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"th",40),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.ALo(7,"date"),f.qZA(),f.TgZ(8,"td"),f._uU(9),f.ALo(10,"date"),f.qZA(),f.TgZ(11,"td"),f._uU(12),f.qZA(),f.TgZ(13,"td"),f.TgZ(14,"strong"),f._uU(15),f.qZA(),f.qZA(),f.TgZ(16,"td"),f.TgZ(17,"a",41),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw(2),a=f.MAs(87);return t.total_results>0?n._openResults(a,t):null}),f.TgZ(18,"strong",42),f._uU(19),f.qZA(),f.qZA(),f.qZA(),f.TgZ(20,"td"),f.YNc(21,Ye,3,2,"a",43),f.YNc(22,Je,3,0,"ng-container",32),f.qZA(),f.TgZ(23,"td"),f.YNc(24,Oe,3,3,"span",44),f.YNc(25,Qe,3,3,"span",45),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(2),f.hij(" ",n+1+a.pageSize*(a.pageIndex-1)," "),f.xp6(2),f.hij(" ",e.order_code," "),f.xp6(2),f.Oqu(f.xi3(7,12,e.received_date,"dd/MM/yyyy HH:mm")),f.xp6(3),f.Oqu(f.xi3(10,15,e.returned_date,"dd/MM/yyyy HH:mm")),f.xp6(3),f.Oqu(e.total_sample),f.xp6(3),f.Oqu(e.total_tests),f.xp6(3),f.Q6J("ngClass",e.total_results<e.total_tests?"text-danger":""),f.xp6(1),f.Oqu(e.total_results),f.xp6(2),f.Q6J("ngIf",e.total_validation>0),f.xp6(1),f.Q6J("ngIf",0==e.total_validation),f.xp6(2),f.Q6J("ngIf",e.flag),f.xp6(1),f.Q6J("ngIf",!e.flag)}}function Ee(e,t){if(1&e&&(f.ynx(0),f.YNc(1,Pe,26,18,"tr",39),f.BQk()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngForOf",e._preparationlist)}}function Re(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"td"),f.TgZ(2,"input",61),f.NdJ("change",function(t){const n=f.CHM(e).$implicit;return f.oxw(2).selectItem(t,n.sample_id+","+n.parameter_id+","+n.category_id)}),f.qZA(),f.qZA(),f.TgZ(3,"td"),f.TgZ(4,"span",42),f._uU(5),f.qZA(),f.qZA(),f.TgZ(6,"td"),f._uU(7),f.qZA(),f.TgZ(8,"td"),f._uU(9),f.qZA(),f.TgZ(10,"td"),f._uU(11),f.qZA(),f.TgZ(12,"td"),f._UZ(13,"span",62),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(2),f.MGl("name","ckU",n+1,""),f.Q6J("checked",a.exportList.includes(e.sample_id+","+e.parameter_id+","+e.category_id)),f.xp6(2),f.Q6J("ngClass",e.flagEvicted?"text-danger":""),f.xp6(1),f.Oqu(e.inner_code),f.xp6(2),f.Oqu(e.code),f.xp6(2),f.hij(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),f.xp6(2),f.hij(" ","en"==a.user.lang?e.para_name_e:e.para_name_l," "),f.xp6(2),f.Q6J("innerHTML",e.result_record,f.oJD)}}function Fe(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",49),f.TgZ(1,"div",50),f.TgZ(2,"h4",51),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"button",52),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(6,"span",53),f._uU(7,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"div",54),f.TgZ(9,"div",55),f.TgZ(10,"div",56),f.TgZ(11,"div",27),f.TgZ(12,"button",57),f.NdJ("click",function(){f.CHM(e);const t=f.oxw();return t._switch(1,t.exportList)}),f._uU(13),f.ALo(14,"translate"),f.qZA(),f.TgZ(15,"button",58),f.NdJ("click",function(){f.CHM(e);const t=f.oxw();return t._switch(2,t.exportList)}),f._uU(16),f.ALo(17,"translate"),f.qZA(),f._UZ(18,"hr"),f.TgZ(19,"table",28),f.TgZ(20,"thead",29),f.TgZ(21,"tr"),f.TgZ(22,"th",59),f.TgZ(23,"input",60),f.NdJ("change",function(t){return f.CHM(e),f.oxw().selectAll(t)}),f.qZA(),f.qZA(),f.TgZ(24,"th",31),f._uU(25),f.ALo(26,"translate"),f.qZA(),f.TgZ(27,"th",31),f._uU(28),f.ALo(29,"translate"),f.qZA(),f.TgZ(30,"th",31),f._uU(31),f.ALo(32,"translate"),f.qZA(),f.TgZ(33,"th",31),f._uU(34),f.ALo(35,"translate"),f.qZA(),f.TgZ(36,"th",31),f._uU(37),f.ALo(38,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(39,"tbody"),f.YNc(40,Re,14,8,"tr",39),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(3),f.AsE(" ",f.lcZ(4,14,"Report")," - ",e._titleRequest," "),f.xp6(9),f.Q6J("disabled",0==e.resultlist.length),f.xp6(1),f.hij(" ",f.lcZ(14,16,"Action draft")," "),f.xp6(2),f.Q6J("disabled",0==e.resultlist.length),f.xp6(1),f.hij(" ",f.lcZ(17,18,"Action direct")," "),f.xp6(7),f.Q6J("disabled",0==e.resultlist.length)("checked",e.exportList.length==e.resultlist.length),f.xp6(2),f.hij(" ",f.lcZ(26,20,"Sample code")," "),f.xp6(3),f.hij(" ",f.lcZ(29,22,"Code")," "),f.xp6(3),f.hij(" ",f.lcZ(32,24,"Internal testing")," "),f.xp6(3),f.hij(" ",f.lcZ(35,26,"Parameter name")," "),f.xp6(3),f.hij(" ",f.lcZ(38,28,"Results")," "),f.xp6(3),f.Q6J("ngForOf",e.resultlist)}}const He=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let We=(()=>{class e{constructor(e,t,n,a,i,o,l){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=i,this._excelService=o,this.modalService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=0,this.entity={},this.resultlist=[],this._orderdetails=[],this._titleRequest="",this.exportList=[],this._idRequest="",(!1===e.checkAccess("REQ-REPORT")||!1===e.hasPermission("REQ-REPORT","read"))&&this._route.navigate(["/error/404"]),this.socket=c()(d.h.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.page=this.pageIndex,e.limit=this.pageSize,this._dataService.post("/lab/getlistreportlabs",e).subscribe(e=>{console.log("Load data",e),this._preparationlist=e.data,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyCSP(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",e).subscribe(e=>{this._csplist=e.data})}_exportAll(){let e={filter:""};e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.page=1,e.limit=99999,this._dataService.post("/lab/getlistreportlabs",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({Ma_Yeu_Cau:n.request_no,Ngay_Nhan:r(n.received_date).format("DD/MM/YYYY HH:mm"),Ngay_Tra:r(n.returned_date).format("DD/MM/YYYY HH:mm"),Tong_Mau:parseInt(n.total_sample),Tong_Test:n.total_tests,Tong_Ket_Qua:n.total_results,Tong_Lab_Validation:n.total_validation,Moi_Lien_He:"",Doanh_Thu:""});this._excelService.exportAsExcelFile(t,"LabReport-"+r(new Date).format("YYYY-MM-DD"))})}orgValueChange1(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e){this.entity=e}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,h().fire({title:"en"==this.user.lang?m.W.are_u_sure_complete_en:m.W.are_u_sure_complete,text:this.entity.request_no,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_ADD_EN:m.W.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)}):(this.isSave=!1,this.socket.emit("refresh",{}))})}_openResults(e,t){console.log(t),this._titleRequest=t.request_no,this._idRequest=t.id,this.loadOrderDetailDoneById(t.id),this.modalService.open(e,{size:"lg",centered:!0})}loadOrderDetailDoneById(e){let t={};t.id=e,this._dataService.post("/labresult/getlist-result-byrequestId",t).subscribe(t=>{console.log("ABC",t);let n={};n.id=e,this._dataService.post("/lab/labcompleted",n).subscribe(e=>{console.log("KQ0",e);let n=[];for(let a of e.data){let e=t.data.filter(e=>e.sample_id==a.sample_id&&e.parameter_id==a.parameter_id&&e.category_id==a.category_id);0==e.length?(a.flagEvicted=!1,n.push(a)):2==e[0].is_active&&0==e.filter(e=>2!=e.is_active&&4!=e.is_active).length&&(a.flagEvicted=!0,n.push(a))}console.log("KQ",n),this.resultlist=n})})}selectAll(e){e.target.checked?(this.exportList=[],this.resultlist.forEach(e=>this.exportList.push(e.sample_id+","+e.parameter_id+","+e.category_id))):this.exportList=[]}selectItem(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(e=>e!=t)}_switch(e,t){if(1==e)if(0==t.length){let e=[];for(let t of this.resultlist){let n="";n+=t.sample_id+","+t.parameter_id+","+t.category_id,e.push(n)}this._processByIds(e,"draft")}else this._processByIds(t,"draft");if(2==e)if(0==t.length){let e=[];for(let t of this.resultlist){let n="";n+=t.sample_id+","+t.parameter_id+","+t.category_id,e.push(n)}this._processByIds(e,"official")}else this._processByIds(t,"official")}_processByRequestId(e,t){let n={};n.id=e,n.state=t,n.userId=this.user.id,console.log(n),this._dataService.post("/labresult/processAll",n).subscribe(e=>{console.log(e),"ok"==e.result&&this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK")})}_processByIds(e,t){let n={};n.state=t,n.userId=this.user.id;let a=[];for(let i of e){let e={},t=i.split(",");e.sample_id=t[0],e.parameter_id=t[1],e.category_id=t[2],a.push(e)}n.getlist=a,this._dataService.post("/labresult/processByIds",n).subscribe(e=>{console.log("actions",e),"ok"==e.result&&this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.exportList=[],this.loadOrderDetailDoneById(this._idRequest)})}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(Z.e),f.Y36(x.D),f.Y36(o.F0),f.Y36(A.c),f.Y36(b.C),f.Y36(T.x),f.Y36(y.FF))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-req-report"]],decls:88,vars:85,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["routerLink","/request/lab-results/list",1,"btn","btn-sm","btn-warning"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],["content",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","9",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",3,"click"],[3,"ngClass"],[3,"routerLink",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],[3,"routerLink"],[1,"badge","badge-success"],[1,"badge","badge-warning"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"disabled","click"],[1,"btn","btn-sm","btn-success","mr-sm-2",3,"disabled","click"],[2,"text-align","center","width","40px"],["type","checkbox","name","checkAll",1,"form-control",3,"disabled","checked","change"],["type","checkbox",1,"form-control",3,"name","checked","change"],[3,"innerHTML"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",1),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"input",7),f.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"input",8),f.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),f.qZA(),f.TgZ(11,"input",9),f.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),f.qZA(),f.YNc(12,De,4,3,"button",10),f.TgZ(13,"button",11),f._uU(14),f.ALo(15,"translate"),f.ALo(16,"translate"),f.qZA(),f.YNc(17,ke,1,0,"img",12),f.qZA(),f.qZA(),f.TgZ(18,"div",13),f.TgZ(19,"div",14),f.TgZ(20,"select",15),f.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),f.TgZ(21,"option",16),f._uU(22,"#10"),f.qZA(),f.TgZ(23,"option",17),f._uU(24,"#25"),f.qZA(),f.TgZ(25,"option",18),f._uU(26,"#50"),f.qZA(),f.TgZ(27,"option",19),f._uU(28,"#100"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(29,"div",20),f.TgZ(30,"div",21),f.TgZ(31,"div",22),f.TgZ(32,"div",23),f.TgZ(33,"pagination",24),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(34,"div",25),f.TgZ(35,"a",26),f._uU(36),f.ALo(37,"translate"),f.ALo(38,"translate"),f.ALo(39,"translate"),f.ALo(40,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(41,"div",21),f.TgZ(42,"div",27),f.TgZ(43,"table",28),f.TgZ(44,"thead",29),f.TgZ(45,"tr"),f.TgZ(46,"th",30),f._uU(47,"#"),f.qZA(),f.TgZ(48,"th",31),f._uU(49),f.ALo(50,"translate"),f.qZA(),f.TgZ(51,"th",31),f._uU(52),f.ALo(53,"translate"),f.qZA(),f.TgZ(54,"th",31),f._uU(55),f.ALo(56,"translate"),f.qZA(),f.TgZ(57,"th",31),f._uU(58),f.ALo(59,"translate"),f.qZA(),f.TgZ(60,"th",31),f._uU(61),f.ALo(62,"translate"),f.qZA(),f.TgZ(63,"th",31),f._uU(64),f.ALo(65,"translate"),f.qZA(),f.TgZ(66,"th",31),f._uU(67),f.ALo(68,"translate"),f.qZA(),f.TgZ(69,"th",31),f._uU(70),f.ALo(71,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(72,"tbody"),f.YNc(73,Ie,6,3,"ng-container",32),f.YNc(74,Ee,2,1,"ng-container",32),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(75,"div",21),f.TgZ(76,"div",22),f.TgZ(77,"div",23),f.TgZ(78,"pagination",24),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(79,"div",25),f.TgZ(80,"a",26),f._uU(81),f.ALo(82,"translate"),f.ALo(83,"translate"),f.ALo(84,"translate"),f.ALo(85,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(86,Fe,41,30,"ng-template",null,33,f.W1O)),2&e&&(f.xp6(8),f.Q6J("placeholder",f.lcZ(9,45,"Search"))("ngModel",t._keyword),f.xp6(2),f.Q6J("ngModel",t._fDate)("bsConfig",f.DdM(83,He)),f.xp6(1),f.Q6J("ngModel",t._tDate)("bsConfig",f.DdM(84,He)),f.xp6(1),f.Q6J("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),f.xp6(2),f.AsE(" ",f.lcZ(15,47,"Print")," ",f.lcZ(16,49,"Report")," "),f.xp6(3),f.Q6J("ngIf",t._isLoading),f.xp6(3),f.Q6J("ngModel",t.pageSize),f.xp6(13),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(37,51,"Total of records"),": ",t.totalRow," - ",f.lcZ(38,53,"Page")," ",t.pageIndex," ",f.lcZ(39,55,"of")," ",t.totalPage," ",f.lcZ(40,57,"page"),""),f.xp6(13),f.hij(" ",f.lcZ(50,59,"Order code")," "),f.xp6(3),f.hij(" ",f.lcZ(53,61,"Received date")," "),f.xp6(3),f.Oqu(f.lcZ(56,63,"Returned date")),f.xp6(3),f.hij(" ",f.lcZ(59,65,"Total of samples")," "),f.xp6(3),f.Oqu(f.lcZ(62,67,"Total of tests")),f.xp6(3),f.Oqu(f.lcZ(65,69,"Total of results")),f.xp6(3),f.hij(" ",f.lcZ(68,71,"Total of validation labs")," "),f.xp6(3),f.hij(" ",f.lcZ(71,73,"Status")," "),f.xp6(3),f.Q6J("ngIf",0==t._preparationlist.length),f.xp6(1),f.Q6J("ngIf",t._preparationlist.length>0),f.xp6(4),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(82,75,"Total of records"),": ",t.totalRow," - ",f.lcZ(83,77,"Page")," ",t.pageIndex," ",f.lcZ(84,79,"of")," ",t.totalPage," ",f.lcZ(85,81,"page"),""))},directives:[i.Fj,i.JJ,i.On,q.Y5,q.Np,a.O5,o.rH,i.EJ,i.YN,i.Kr,v.Qt,a.sg,a.mk,o.yS,i._Y,i.JL,i.F],pipes:[S.X$,a.uU],styles:[""]}),e})();var je=n(84487),Ge=n(59543);function Be(e,t){if(1&e&&(f.TgZ(0,"option",47),f._uU(1),f.qZA()),2&e){const e=t.$implicit,n=f.oxw();f.Q6J("value",e.id),f.xp6(1),f.hij(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function ze(e,t){if(1&e&&(f.TgZ(0,"option",47),f._uU(1),f.qZA()),2&e){const e=t.$implicit,n=f.oxw();f.Q6J("value",e.id),f.xp6(1),f.hij(" ","en"==n.user.lang?e.pl_name_e:e.pl_name_l," ")}}function Ve(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",48),f.NdJ("click",function(){f.CHM(e);const t=f.oxw();return t._exportAll(t._preparationlist)}),f._UZ(1,"i",49),f._uU(2),f.ALo(3,"translate"),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Export")," "))}function $e(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",50),f.NdJ("click",function(){return f.CHM(e),f.oxw()._exportAllForImport()}),f._UZ(1,"i",49),f._uU(2),f.ALo(3,"translate"),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Download file")," "))}function Ke(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",51),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(),n=f.MAs(142);return t._importFile(n)}),f._UZ(1,"i",52),f._uU(2),f.ALo(3,"translate"),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Import")," "))}function Xe(e,t){1&e&&f._UZ(0,"img",53)}function et(e,t){1&e&&(f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td",54),f.TgZ(3,"h3",55),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.qZA(),f.qZA(),f.BQk()),2&e&&(f.xp6(4),f.hij(" ",f.lcZ(5,1,"No records now!!!")," "))}function tt(e,t){1&e&&f._UZ(0,"i",72)}function nt(e,t){1&e&&f._UZ(0,"i",73)}function at(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"button",69),f.NdJ("click",function(){return f.CHM(e),f.oxw(3)._switchFlagEdit()}),f.ALo(2,"translate"),f.YNc(3,tt,1,0,"i",70),f.YNc(4,nt,1,0,"i",71),f.qZA(),f.BQk()}if(2&e){const e=f.oxw().$implicit,t=f.oxw(2);f.xp6(1),f.Q6J("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!t._authenService.hasPermission("REQ-RES","update"))("title",f.lcZ(2,5,e.flag?"Cancel":"Edit")),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag)}}function it(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",74),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(3);return t._updateStatusv2(t._preparationlist)}),f.ALo(1,"translate"),f._UZ(2,"i",75),f.qZA()}2&e&&f.Q6J("title",f.lcZ(1,1,"Save"))}function ot(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.hij(" ",e.note_asm,"")}}function lt(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",76),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.note_asm=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","noteasm",t+1,""),f.Q6J("ngModel",n.note_asm)}}function rt(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.hij(" ",e.unit,"")}}function st(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",76),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.unit=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","unit",t+1,""),f.Q6J("ngModel",n.unit)}}function ct(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.hij(" ",e.lod,"")}}function dt(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",76),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.lod=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","lod",t+1,""),f.Q6J("ngModel",n.lod)}}function ut(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.hij(" ",e.loq,"")}}function gt(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",76),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.loq=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","loq",t+1,""),f.Q6J("ngModel",n.loq)}}function pt(e,t){if(1&e&&(f.ynx(0),f._UZ(1,"span",77),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.Q6J("innerHTML",e.result_record,f.oJD)}}function _t(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",78),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.result_record=t}),f.ALo(2,"translate"),f.qZA(),f.TgZ(3,"input",78),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.result_record_e=t}),f.ALo(4,"translate"),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","result_record",t+1,""),f.Q6J("ngModel",n.result_record)("placeholder",f.lcZ(2,6,"Vietnamese")),f.xp6(2),f.MGl("name","result_recorde",t+1,""),f.Q6J("ngModel",n.result_record_e)("placeholder",f.lcZ(4,8,"English"))}}function ht(e,t){1&e&&(f.TgZ(0,"span",79),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"None")))}function mt(e,t){1&e&&(f.TgZ(0,"span",80),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Preparation")))}function ft(e,t){1&e&&(f.TgZ(0,"span",81),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Technical validation")))}function Zt(e,t){1&e&&(f.TgZ(0,"span",82),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Validation")))}function xt(e,t){1&e&&(f.TgZ(0,"span",83),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Done")))}function At(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"th",57),f._uU(3),f.qZA(),f.TgZ(4,"td",58),f.YNc(5,at,5,7,"ng-container",45),f.YNc(6,it,3,3,"button",59),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.qZA(),f.TgZ(9,"td"),f._uU(10),f.qZA(),f.TgZ(11,"td"),f._uU(12),f.qZA(),f.TgZ(13,"td"),f._uU(14),f.qZA(),f.TgZ(15,"td"),f._uU(16),f.qZA(),f.TgZ(17,"td"),f._uU(18),f.qZA(),f.TgZ(19,"td"),f._uU(20),f.qZA(),f.TgZ(21,"td"),f.YNc(22,ot,2,1,"ng-container",45),f.YNc(23,lt,2,2,"ng-container",45),f.qZA(),f.TgZ(24,"td"),f.YNc(25,rt,2,1,"ng-container",45),f.YNc(26,st,2,2,"ng-container",45),f.qZA(),f.TgZ(27,"td"),f.YNc(28,ct,2,1,"ng-container",45),f.YNc(29,dt,2,2,"ng-container",45),f.qZA(),f.TgZ(30,"td"),f.YNc(31,ut,2,1,"ng-container",45),f.YNc(32,gt,2,2,"ng-container",45),f.qZA(),f.TgZ(33,"td"),f.YNc(34,pt,2,1,"ng-container",45),f.YNc(35,_t,5,10,"ng-container",45),f.qZA(),f.TgZ(36,"td",60),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw(2);return t.flag?n._updateStatusOnly(t,t.status):null}),f.YNc(37,ht,3,3,"span",61),f.YNc(38,mt,3,3,"span",62),f.YNc(39,ft,3,3,"span",63),f.YNc(40,Zt,3,3,"span",64),f.YNc(41,xt,3,3,"span",65),f.qZA(),f.TgZ(42,"td",66),f.TgZ(43,"input",67),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.hide=t}),f.qZA(),f.qZA(),f.TgZ(44,"td"),f._uU(45),f.ALo(46,"date"),f.qZA(),f.TgZ(47,"td",68),f._uU(48),f.ALo(49,"date"),f.qZA(),f.qZA(),f.BQk()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(2),f.Q6J("ngClass",4==e.status?"":e.remaining_days<=1?"jbadge-danger text-white":e.remaining_days>1&&e.remaining_days<=3?"jbadge-warning text-white":""),f.xp6(1),f.hij(" ",n+1+a.pageSize*(a.pageIndex-1)," "),f.xp6(2),f.Q6J("ngIf",1==e.status),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Oqu(e.inner_code),f.xp6(2),f.Oqu(e.code),f.xp6(2),f.hij(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),f.xp6(2),f.hij(" ","en"==a.user.lang?e.para_name_e:e.para_name_l," "),f.xp6(2),f.hij(" ","en"==a.user.lang?e.nature_name_e:e.nature_name_l," "),f.xp6(2),f.Oqu(e.tat),f.xp6(2),f.Oqu(e.note_lab),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",0==e.status),f.xp6(1),f.Q6J("ngIf",1==e.status),f.xp6(1),f.Q6J("ngIf",2==e.status),f.xp6(1),f.Q6J("ngIf",3==e.status),f.xp6(1),f.Q6J("ngIf",4==e.status),f.xp6(2),f.MGl("name","hid",n+1,""),f.Q6J("ngModel",e.hide)("disabled",!e.flag),f.xp6(2),f.hij(" ",f.xi3(46,32,e.received_date,"dd/MM/yyyy HH:mm")," "),f.xp6(2),f.Q6J("ngClass",4==e.status?"":e.remaining_days<=1?"jbadge-danger text-white":e.remaining_days>1&&e.remaining_days<=3?"jbadge-warning text-white":""),f.xp6(1),f.hij(" ",f.xi3(49,35,e.returned_date,"dd/MM/yyyy HH:mm")," ")}}function bt(e,t){if(1&e&&(f.ynx(0),f.YNc(1,At,50,38,"ng-container",56),f.BQk()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngForOf",e._preparationlist)}}function Tt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"input",94,95),f.NdJ("change",function(t){return f.CHM(e),f.oxw(2).onFileChange(t)}),f.qZA()}}function yt(e,t){1&e&&(f.TgZ(0,"h4",55),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.hij("",f.lcZ(2,1,"Processing"),"..."))}function qt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",84),f.TgZ(1,"div",85),f.TgZ(2,"h4",86),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"button",87),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(6,"span",88),f._uU(7,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"div",89),f.TgZ(9,"div",90),f.TgZ(10,"div",91),f.TgZ(11,"div",58),f.YNc(12,Tt,2,0,"input",92),f.YNc(13,yt,3,3,"h4",93),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(3),f.hij(" ",f.lcZ(4,3,"Import")," "),f.xp6(9),f.Q6J("ngIf",!e._isLoadingImport),f.xp6(1),f.Q6J("ngIf",e._isLoadingImport)}}const vt=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let Mt=(()=>{class e{constructor(e,t,n,a,i,o,l,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=i,this._excelService=o,this._numberFormat=l,this.modalService=r,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=1,this.entity={},this._depts="",this._isLoadingImport=!1,(!1===e.checkAccess("REQ-RES")||!1===e.hasPermission("REQ-RES","read"))&&this._route.navigate(["/error/404"]),this.socket=c()(d.h.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL()}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,e.dept_ids=this.user.department,this._dataService.post("/lab/getlistresultlabsbydepts",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,nature_name_e:n.nature_name_e,nature_name_l:n.nature_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,tat:n.tat,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l,pl_name_e:n.pl_name_e,pl_name_l:n.pl_name_l,hide:n.hide,remaining_days:n.remaining_days,result_record_e:n.result_record_e});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_exportAllForImport(){let e={};e.domain=this.user.short_code,e.flag_status=this._status,e.dept_ids=this.user.department,this._dataService.post("/lab/exportresultlabsbydepts",e).subscribe(e=>{console.log("Origin",e);let t=[];for(let n of e.data)t.push({inner_code:n.inner_code,code:n.code,note_asm:null==n.note_asm?"":n.note_asm,unit:null==n.unit?"":n.unit,lod:null==n.lod?"":n.lod,loq:null==n.loq?"":n.loq,result_record:null==n.result_record?"":n.result_record,result_record_e:null==n.result_record_e?"":n.result_record_e,status:n.status,hide:null!=n.hide&&n.hide,sample_id:n.sample_id,parameter_id:n.parameter_id,category_id:n.category_id});this._excelService.exportAsExcelFile(t,"Result-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+t.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+t.length+" "+m.W.record,"OK")})}_pageSizeChange(e){this.pageSize=e.target.value,this.loadData()}pageChanged(e){this.pageIndex=e.page,this.loadData()}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyPL(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",e).subscribe(e=>{this._pllist=e.data})}_exportAll(e){let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?m.W.s_done_en:m.W.s_done),3==n.status&&(e="en"==this.user.lang?m.W.s_validate_en:m.W.s_validate),2==n.status&&(e="en"==this.user.lang?m.W.s_techvalidate_en:m.W.s_techvalidate),1==n.status&&(e="en"==this.user.lang?m.W.s_prepare_en:m.W.s_prepare),0==n.status&&(e="en"==this.user.lang?m.W.s_none_en:m.W.s_none);let a=new Date(n.received_date).getTime()+864e5*n.tat,i="en"==this.user.lang?n.pl_name_e:n.pl_name_l;t.push({"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,"Note Lab":null==n.note_lab?"":n.note_lab,"Note ASM":null==n.note_asm?"":n.note_asm,Unit:null==n.unit?"":n.unit,LOD:null==n.lod?"":n.lod,LOQ:null==n.loq?"":n.loq,Result:null==n.result_record?"":n.result_record,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(a)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l,PL:null==i?"":i,"Sample name":n.sample_name})}this._excelService.exportAsExcelFile(t,"Result-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+e.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+e.length+" "+m.W.record,"OK")}orgValueChange1(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=r(e).format("YYYY-MM-DD")}_switchFlagEdit(){for(let e of this._preparationlist)e.flag=!e.flag,e.flag||(e.status=1)}_updateStatusv2(e){this._dataService.post("/lab/updateResultv2",{getlist:e,ipaddress:this.user.ipaddress,user_id:this.user.id,short_code:this.user.short_code}).subscribe(e=>{this.loadData()})}_updateStatusOnly(e,t){t=1==t?2:1,console.log(t),this._preparationlist.filter(t=>t.sample_id==e.sample_id&&t.parameter_id==e.parameter_id&&t.category_id==e.category_id)[0].status=t}_updateStatus(e,t){2==t?(e.status=t,h().fire({title:"en"==this.user.lang?m.W.are_u_sure_switch_en:m.W.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData()}):this.loadData()})):(console.log("Update",e),this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData()}))}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.loadData(),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_ADD_EN:m.W.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}_importFile(e){this.modalService.open(e,{size:"md",centered:!0})}onFileChange(e){let t=null,n=null;const a=new FileReader,i=e.target.files[0];if(void 0===i||void 0===i.name)e.target.value=null,this._notifyService.showError("en"==this.user.lang?m.W.recheck_file_en:m.W.recheck_file,"en"==this.user.lang?m.W.error_title_en:m.W.error_title);else{let o=i.name.split(".").pop();"xls"===o||"xlsx"===o?(a.onload=i=>{t=je.read(a.result,{type:"binary"}),n=t.SheetNames.reduce((e,n)=>(e[n]=je.utils.sheet_to_json(t.Sheets[n]),e),{}),e.target.value=null,this.setUpload(n.data)},a.readAsBinaryString(i)):(this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title),e.target.value=null)}}setUpload(e){let t={};t.getlist=e,t.short_code=this.user.short_code,t.ipaddress=this.user.ipaddress,t.userid=this.user.id,this._isLoadingImport=!0,this._dataService.post("/lab/updateResultForImportv2",t).subscribe(e=>{console.log(e),"ok"==e.result&&(e.data_error.length>0&&this._excelService.exportAsExcelFile(e.data_error,"ErrorTestFamilyPL-"+r(new Date).format("YYYY-MM-DD")),e.count>0&&this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK")),this._isLoadingImport=!1,this.loadData(),this.modalService.dismissAll()},()=>this._isLoadingImport=!1)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(Z.e),f.Y36(x.D),f.Y36(o.F0),f.Y36(A.c),f.Y36(b.C),f.Y36(T.x),f.Y36(Ge.p),f.Y36(y.FF))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-req-result"]],decls:143,vars:140,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],["contentImport",""],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-cloud-upload"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","18",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row",3,"ngClass"],[2,"text-align","center"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"text-truncate"],["type","checkbox",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],[3,"ngClass"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],["type","text",1,"form-control",2,"width","250px",3,"name","ngModel","placeholder","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],["name","fileUpload","type","file","id","upload","class","form-control",3,"change",4,"ngIf"],["class","text-danger",4,"ngIf"],["name","fileUpload","type","file","id","upload",1,"form-control",3,"change"],["fileUpload",""]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",1),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"input",7),f.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"input",8),f.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),f.qZA(),f.TgZ(11,"input",9),f.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),f.qZA(),f.TgZ(12,"select",10),f.NdJ("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),f.TgZ(13,"option",11),f._uU(14),f.ALo(15,"translate"),f.ALo(16,"translate"),f.qZA(),f.YNc(17,Be,2,2,"option",12),f.qZA(),f.TgZ(18,"select",13),f.NdJ("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),f.TgZ(19,"option",11),f._uU(20),f.ALo(21,"translate"),f.qZA(),f.YNc(22,ze,2,2,"option",12),f.qZA(),f.TgZ(23,"select",14),f.NdJ("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),f.TgZ(24,"option",15),f._uU(25),f.ALo(26,"translate"),f.qZA(),f.TgZ(27,"option",16),f._uU(28),f.ALo(29,"translate"),f.qZA(),f.TgZ(30,"option",17),f._uU(31),f.ALo(32,"translate"),f.qZA(),f.TgZ(33,"option",18),f._uU(34),f.ALo(35,"translate"),f.qZA(),f.TgZ(36,"option",19),f._uU(37),f.ALo(38,"translate"),f.qZA(),f.TgZ(39,"option",20),f._uU(40),f.ALo(41,"translate"),f.qZA(),f.qZA(),f.YNc(42,Ve,4,3,"button",21),f.YNc(43,$e,4,3,"button",22),f.YNc(44,Ke,4,3,"button",23),f.YNc(45,Xe,1,0,"img",24),f.qZA(),f.qZA(),f.TgZ(46,"div",25),f.TgZ(47,"div",26),f.TgZ(48,"select",27),f.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),f.TgZ(49,"option",28),f._uU(50,"#10"),f.qZA(),f.TgZ(51,"option",29),f._uU(52,"#25"),f.qZA(),f.TgZ(53,"option",30),f._uU(54,"#50"),f.qZA(),f.TgZ(55,"option",31),f._uU(56,"#100"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(57,"div",32),f.TgZ(58,"div",33),f.TgZ(59,"div",34),f.TgZ(60,"div",35),f.TgZ(61,"pagination",36),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(62,"div",37),f.TgZ(63,"a",38),f._uU(64),f.ALo(65,"translate"),f.ALo(66,"translate"),f.ALo(67,"translate"),f.ALo(68,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(69,"div",33),f.TgZ(70,"div",39),f.TgZ(71,"table",40),f.TgZ(72,"thead",41),f.TgZ(73,"tr"),f.TgZ(74,"th",42),f._uU(75,"#"),f.qZA(),f.TgZ(76,"th",43),f._uU(77),f.ALo(78,"translate"),f.qZA(),f.TgZ(79,"th",44),f._uU(80),f.ALo(81,"translate"),f.qZA(),f.TgZ(82,"th",44),f._uU(83),f.ALo(84,"translate"),f.qZA(),f.TgZ(85,"th",44),f._uU(86),f.ALo(87,"translate"),f.qZA(),f.TgZ(88,"th",44),f._uU(89),f.ALo(90,"translate"),f.qZA(),f.TgZ(91,"th",44),f._uU(92),f.ALo(93,"translate"),f.qZA(),f.TgZ(94,"th",44),f._uU(95),f.ALo(96,"translate"),f.qZA(),f.TgZ(97,"th",44),f._uU(98),f.ALo(99,"translate"),f.qZA(),f.TgZ(100,"th",44),f._uU(101),f.ALo(102,"translate"),f.qZA(),f.TgZ(103,"th",44),f._uU(104),f.ALo(105,"translate"),f.qZA(),f.TgZ(106,"th",44),f._uU(107),f.ALo(108,"translate"),f.qZA(),f.TgZ(109,"th",44),f._uU(110),f.ALo(111,"translate"),f.qZA(),f.TgZ(112,"th",44),f._uU(113),f.ALo(114,"translate"),f.qZA(),f.TgZ(115,"th",44),f._uU(116),f.ALo(117,"translate"),f.qZA(),f.TgZ(118,"th",44),f._uU(119),f.ALo(120,"translate"),f.qZA(),f.TgZ(121,"th",44),f._uU(122),f.ALo(123,"translate"),f.qZA(),f.TgZ(124,"th",44),f._uU(125),f.ALo(126,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(127,"tbody"),f.YNc(128,et,6,3,"ng-container",45),f.YNc(129,bt,2,1,"ng-container",45),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(130,"div",33),f.TgZ(131,"div",34),f.TgZ(132,"div",35),f.TgZ(133,"pagination",36),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(134,"div",37),f.TgZ(135,"a",38),f._uU(136),f.ALo(137,"translate"),f.ALo(138,"translate"),f.ALo(139,"translate"),f.ALo(140,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(141,qt,14,5,"ng-template",null,46,f.W1O)),2&e&&(f.xp6(8),f.Q6J("placeholder",f.lcZ(9,68,"Search"))("ngModel",t._keyword),f.xp6(2),f.Q6J("ngModel",t._fDate)("bsConfig",f.DdM(138,vt)),f.xp6(1),f.Q6J("ngModel",t._tDate)("bsConfig",f.DdM(139,vt)),f.xp6(1),f.Q6J("ngModel",t.department_id),f.xp6(2),f.AsE(" ",f.lcZ(15,70,"All")," ",f.lcZ(16,72,"Department")," "),f.xp6(3),f.Q6J("ngForOf",t._deptlist),f.xp6(1),f.Q6J("ngModel",t.testcsp_id),f.xp6(2),f.hij("",f.lcZ(21,74,"All")," PL"),f.xp6(2),f.Q6J("ngForOf",t._pllist),f.xp6(1),f.Q6J("ngModel",t._status),f.xp6(2),f.hij(" ",f.lcZ(26,76,"All")," "),f.xp6(3),f.hij(" ",f.lcZ(29,78,"None")," "),f.xp6(3),f.hij(" ",f.lcZ(32,80,"Preparation")," "),f.xp6(3),f.hij(" ",f.lcZ(35,82,"Technical validation")," "),f.xp6(3),f.hij(" ",f.lcZ(38,84,"Validation")," "),f.xp6(3),f.hij(" ",f.lcZ(41,86,"Done")," "),f.xp6(2),f.Q6J("ngIf",t._authenService.hasPermission("REQ-RES","report")),f.xp6(1),f.Q6J("ngIf",t._authenService.hasPermission("REQ-RES","update")),f.xp6(1),f.Q6J("ngIf",t._authenService.hasPermission("REQ-RES","update")),f.xp6(1),f.Q6J("ngIf",t._isLoading),f.xp6(3),f.Q6J("ngModel",t.pageSize),f.xp6(13),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(65,88,"Total of records"),": ",t.totalRow," - ",f.lcZ(66,90,"Page")," ",t.pageIndex," ",f.lcZ(67,92,"of")," ",t.totalPage," ",f.lcZ(68,94,"page"),""),f.xp6(13),f.Oqu(f.lcZ(78,96,"Actions")),f.xp6(3),f.hij(" ",f.lcZ(81,98,"Inner code")," "),f.xp6(3),f.hij(" ",f.lcZ(84,100,"Code")," "),f.xp6(3),f.Oqu(f.lcZ(87,102,"Internal testing")),f.xp6(3),f.Oqu(f.lcZ(90,104,"Parameter name")),f.xp6(3),f.Oqu(f.lcZ(93,106,"Sample nature")),f.xp6(3),f.Oqu(f.lcZ(96,108,"Priority")),f.xp6(3),f.Oqu(f.lcZ(99,110,"Note lab")),f.xp6(3),f.Oqu(f.lcZ(102,112,"Note asm")),f.xp6(3),f.Oqu(f.lcZ(105,114,"Unit")),f.xp6(3),f.Oqu(f.lcZ(108,116,"LOD")),f.xp6(3),f.Oqu(f.lcZ(111,118,"LOQ")),f.xp6(3),f.Oqu(f.lcZ(114,120,"Results")),f.xp6(3),f.Oqu(f.lcZ(117,122,"Status")),f.xp6(3),f.Oqu(f.lcZ(120,124,"Hidden")),f.xp6(3),f.Oqu(f.lcZ(123,126,"Received date")),f.xp6(3),f.Oqu(f.lcZ(126,128,"Returned date")),f.xp6(3),f.Q6J("ngIf",0==t._preparationlist.length),f.xp6(1),f.Q6J("ngIf",t._preparationlist.length>0),f.xp6(4),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(137,130,"Total of records"),": ",t.totalRow," - ",f.lcZ(138,132,"Page")," ",t.pageIndex," ",f.lcZ(139,134,"of")," ",t.totalPage," ",f.lcZ(140,136,"page"),""))},directives:[i.Fj,i.JJ,i.On,q.Y5,q.Np,i.EJ,i.YN,i.Kr,a.sg,a.O5,v.Qt,a.mk,i.Wl,i._Y,i.JL,i.F],pipes:[S.X$,a.uU],styles:[""]}),e})();function St(e,t){if(1&e&&(f.TgZ(0,"option",42),f._uU(1),f.qZA()),2&e){const e=t.$implicit,n=f.oxw();f.Q6J("value",e.id),f.xp6(1),f.hij(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function Ct(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",43),f.NdJ("click",function(){f.CHM(e);const t=f.oxw();return t._exportAll(t._preparationlist)}),f._UZ(1,"i",44),f._uU(2),f.ALo(3,"translate"),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Export")," "))}function wt(e,t){1&e&&f._UZ(0,"img",45)}function Lt(e,t){1&e&&(f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td",46),f.TgZ(3,"h3",47),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.qZA(),f.qZA(),f.BQk()),2&e&&(f.xp6(4),f.hij(" ",f.lcZ(5,1,"No records now!!!")," "))}function Ut(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.hij(" ",e.note_asm,"")}}function Nt(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",61),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.note_asm=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","note_asm",t+1,""),f.Q6J("ngModel",n.note_asm)}}function Dt(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.hij(" ",e.lod,"")}}function kt(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",61),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.lod=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","lod",t+1,""),f.Q6J("ngModel",n.lod)}}function It(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.hij(" ",e.loq,"")}}function Yt(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",61),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.loq=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","loq",t+1,""),f.Q6J("ngModel",n.loq)}}function Jt(e,t){if(1&e&&(f.ynx(0),f._UZ(1,"span",62),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.Q6J("innerHTML",e.result_record,f.oJD)}}function Ot(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",61),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.result_record=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","result_record",t+1,""),f.Q6J("ngModel",n.result_record)}}function Qt(e,t){1&e&&(f.TgZ(0,"span",63),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"None")))}function Pt(e,t){1&e&&(f.TgZ(0,"span",64),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Preparation")))}function Et(e,t){1&e&&(f.TgZ(0,"span",65),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Technical validation")))}function Rt(e,t){1&e&&(f.TgZ(0,"span",66),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Validation")))}function Ft(e,t){1&e&&(f.TgZ(0,"span",67),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Done")))}function Ht(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",68),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit;return f.oxw(2)._updateStatus(t,1)}),f._UZ(1,"i",69),f.qZA()}}function Wt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",70),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit;return f.oxw(2)._updateStatus(t,4)}),f._UZ(1,"i",71),f.qZA()}}function jt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",72),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit;return f.oxw(2)._updateStatus(t,2)}),f._UZ(1,"i",73),f.qZA()}}function Gt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"th",49),f._uU(2),f.qZA(),f.TgZ(3,"td"),f.TgZ(4,"a",50),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return f.oxw(2)._updateStatusAll(t,3==t.status?4:3)}),f._uU(5),f.qZA(),f.qZA(),f.TgZ(6,"td"),f._uU(7),f.qZA(),f.TgZ(8,"td"),f._uU(9),f.qZA(),f.TgZ(10,"td"),f._uU(11),f.qZA(),f.TgZ(12,"td"),f._uU(13),f.qZA(),f.TgZ(14,"td"),f._uU(15),f.qZA(),f.TgZ(16,"td"),f._uU(17),f.qZA(),f.TgZ(18,"td"),f.YNc(19,Ut,2,1,"ng-container",41),f.YNc(20,Nt,2,2,"ng-container",41),f.qZA(),f.TgZ(21,"td"),f._uU(22),f.qZA(),f.TgZ(23,"td"),f.YNc(24,Dt,2,1,"ng-container",41),f.YNc(25,kt,2,2,"ng-container",41),f.qZA(),f.TgZ(26,"td"),f.YNc(27,It,2,1,"ng-container",41),f.YNc(28,Yt,2,2,"ng-container",41),f.qZA(),f.TgZ(29,"td"),f.YNc(30,Jt,2,1,"ng-container",41),f.YNc(31,Ot,2,2,"ng-container",41),f.qZA(),f.TgZ(32,"td"),f.TgZ(33,"a",51),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw(2);return 2==t.status?n._updateStatus(t,3):null}),f.YNc(34,Qt,3,3,"span",52),f.YNc(35,Pt,3,3,"span",53),f.YNc(36,Et,3,3,"span",54),f.YNc(37,Rt,3,3,"span",55),f.YNc(38,Ft,3,3,"span",56),f.qZA(),f.YNc(39,Ht,2,0,"a",57),f.qZA(),f.TgZ(40,"td",58),f.YNc(41,Wt,2,0,"a",59),f.YNc(42,jt,2,0,"a",60),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(2),f.hij(" ",n+1+a.pageSize*(a.pageIndex-1)," "),f.xp6(3),f.Oqu(e.inner_code),f.xp6(2),f.Oqu(e.code),f.xp6(2),f.hij(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),f.xp6(2),f.hij(" ","en"==a.user.lang?e.para_name_e:e.para_name_l," "),f.xp6(2),f.Oqu(e.tat),f.xp6(2),f.Oqu(e.note),f.xp6(2),f.Oqu(e.note_lab),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Oqu(e.unit),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(3),f.Q6J("ngIf",0==e.status),f.xp6(1),f.Q6J("ngIf",1==e.status),f.xp6(1),f.Q6J("ngIf",2==e.status),f.xp6(1),f.Q6J("ngIf",3==e.status),f.xp6(1),f.Q6J("ngIf",4==e.status),f.xp6(1),f.Q6J("ngIf",2==e.status),f.xp6(2),f.Q6J("ngIf",3==e.status),f.xp6(1),f.Q6J("ngIf",3==e.status)}}function Bt(e,t){if(1&e&&(f.ynx(0),f.YNc(1,Gt,43,25,"tr",48),f.BQk()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngForOf",e._preparationlist)}}const zt=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let Vt=(()=>{class e{constructor(e,t,n,a,i,o,l){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=i,this._excelService=o,this.modalService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=2,this.entity={},(!1===e.checkAccess("RES-VALID")||!1===e.hasPermission("RES-VALID","read"))&&this._route.navigate(["/error/404"]),this.socket=c()(d.h.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,e.dept_ids=this.user.department,this._dataService.post("/lab/getlistresultlabs",e).subscribe(e=>{console.log(e);let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,tat:n.tat,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyPL(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",e).subscribe(e=>{this._pllist=e.data})}_exportAll(e){let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?m.W.s_done_en:m.W.s_done),3==n.status&&(e="en"==this.user.lang?m.W.s_validate_en:m.W.s_validate),2==n.status&&(e="en"==this.user.lang?m.W.s_techvalidate_en:m.W.s_techvalidate),1==n.status&&(e="en"==this.user.lang?m.W.s_prepare_en:m.W.s_prepare),0==n.status&&(e="en"==this.user.lang?m.W.s_none_en:m.W.s_none);let a=new Date(n.received_date).getTime()+864e5*n.tat;t.push({"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,Note:null==n.note?"":n.note,"Note Lab":null==n.note_lab?"":n.note_lab,"Note ASM":null==n.note_asm?"":n.note_asm,Unit:null==n.unit?"":n.unit,LOD:null==n.lod?"":n.lod,LOQ:null==n.loq?"":n.loq,Result:null==n.result_record?"":n.result_record,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(a)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l})}this._excelService.exportAsExcelFile(t,"LabValidation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+e.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+e.length+" "+m.W.record,"OK")}orgValueChange1(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e,t){3==t||4==t?(e.status=t,h().fire({title:"en"==this.user.lang?m.W.are_u_sure_switch_en:m.W.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.socket.emit("refresh",{})}):this.socket.emit("refresh",{})})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.socket.emit("refresh",{})}))}_updateStatusAll(e,t){let n=this._preparationlist.filter(t=>t.sample_id==e.sample_id);for(let a of n)a.status=t;h().fire({title:"en"==this.user.lang?m.W.are_u_sure_switch_en:m.W.are_u_sure_switch,text:"en"==this.user.lang?"Total: "+n.length:"T\u1ed5ng s\u1ed1: "+n.length,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(e=>{e.value?this._dataService.post("/lab/updateValidationv2BySampleId",{getlist:n,user_id:this.user.id,ipaddress:this.user.ipaddress,short_code:this.user.short_code}).subscribe(e=>{this.socket.emit("refresh",{})}):this.socket.emit("refresh",{})})}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_ADD_EN:m.W.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(Z.e),f.Y36(x.D),f.Y36(o.F0),f.Y36(A.c),f.Y36(b.C),f.Y36(T.x),f.Y36(y.FF))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-req-validation"]],decls:125,vars:124,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","15",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",3,"click"],["href","javascript:;",2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["href","javascript:;","style","cursor: pointer; color: red",3,"click",4,"ngIf"],[2,"text-align","center"],["href","javascript:;","style","cursor: pointer; color: blue; font-size: 18px;",3,"click",4,"ngIf"],["href","javascript:;","style","cursor: pointer; color: tomato; font-size: 18px;",3,"click",4,"ngIf"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],["href","javascript:;",2,"cursor","pointer","color","red",3,"click"],[1,"fa","fa-close"],["href","javascript:;",2,"cursor","pointer","color","blue","font-size","18px",3,"click"],[1,"fa","fa-check-square-o","mr-ms-2"],["href","javascript:;",2,"cursor","pointer","color","tomato","font-size","18px",3,"click"],[1,"fa","fa-times-circle-o"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",1),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"input",7),f.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"input",8),f.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),f.qZA(),f.TgZ(11,"input",9),f.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),f.qZA(),f.TgZ(12,"select",10),f.NdJ("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),f.TgZ(13,"option",11),f._uU(14),f.ALo(15,"translate"),f.ALo(16,"translate"),f.qZA(),f.YNc(17,St,2,2,"option",12),f.qZA(),f.TgZ(18,"select",13),f.NdJ("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),f.TgZ(19,"option",14),f._uU(20),f.ALo(21,"translate"),f.qZA(),f.TgZ(22,"option",15),f._uU(23),f.ALo(24,"translate"),f.qZA(),f.TgZ(25,"option",16),f._uU(26),f.ALo(27,"translate"),f.qZA(),f.TgZ(28,"option",17),f._uU(29),f.ALo(30,"translate"),f.qZA(),f.TgZ(31,"option",18),f._uU(32),f.ALo(33,"translate"),f.qZA(),f.TgZ(34,"option",19),f._uU(35),f.ALo(36,"translate"),f.qZA(),f.qZA(),f.YNc(37,Ct,4,3,"button",20),f.YNc(38,wt,1,0,"img",21),f.qZA(),f.qZA(),f.TgZ(39,"div",22),f.TgZ(40,"div",23),f.TgZ(41,"select",24),f.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),f.TgZ(42,"option",25),f._uU(43,"#10"),f.qZA(),f.TgZ(44,"option",26),f._uU(45,"#25"),f.qZA(),f.TgZ(46,"option",27),f._uU(47,"#50"),f.qZA(),f.TgZ(48,"option",28),f._uU(49,"#100"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(50,"div",29),f.TgZ(51,"div",30),f.TgZ(52,"div",31),f.TgZ(53,"div",32),f.TgZ(54,"pagination",33),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(55,"div",34),f.TgZ(56,"a",35),f._uU(57),f.ALo(58,"translate"),f.ALo(59,"translate"),f.ALo(60,"translate"),f.ALo(61,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(62,"div",30),f.TgZ(63,"div",36),f.TgZ(64,"table",37),f.TgZ(65,"thead",38),f.TgZ(66,"tr"),f.TgZ(67,"th",39),f._uU(68,"#"),f.qZA(),f.TgZ(69,"th",40),f._uU(70),f.ALo(71,"translate"),f.qZA(),f.TgZ(72,"th",40),f._uU(73),f.ALo(74,"translate"),f.qZA(),f.TgZ(75,"th",40),f._uU(76),f.ALo(77,"translate"),f.qZA(),f.TgZ(78,"th",40),f._uU(79),f.ALo(80,"translate"),f.qZA(),f.TgZ(81,"th",40),f._uU(82),f.ALo(83,"translate"),f.qZA(),f.TgZ(84,"th",40),f._uU(85),f.ALo(86,"translate"),f.qZA(),f.TgZ(87,"th",40),f._uU(88),f.ALo(89,"translate"),f.qZA(),f.TgZ(90,"th",40),f._uU(91),f.ALo(92,"translate"),f.qZA(),f.TgZ(93,"th",40),f._uU(94),f.ALo(95,"translate"),f.qZA(),f.TgZ(96,"th",40),f._uU(97),f.ALo(98,"translate"),f.qZA(),f.TgZ(99,"th",40),f._uU(100),f.ALo(101,"translate"),f.qZA(),f.TgZ(102,"th",40),f._uU(103),f.ALo(104,"translate"),f.qZA(),f.TgZ(105,"th",40),f._uU(106),f.ALo(107,"translate"),f.qZA(),f.TgZ(108,"th",40),f._uU(109),f.ALo(110,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(111,"tbody"),f.YNc(112,Lt,6,3,"ng-container",41),f.YNc(113,Bt,2,1,"ng-container",41),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(114,"div",30),f.TgZ(115,"div",31),f.TgZ(116,"div",32),f.TgZ(117,"pagination",33),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(118,"div",34),f.TgZ(119,"a",35),f._uU(120),f.ALo(121,"translate"),f.ALo(122,"translate"),f.ALo(123,"translate"),f.ALo(124,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(8),f.Q6J("placeholder",f.lcZ(9,60,"Search"))("ngModel",t._keyword),f.xp6(2),f.Q6J("ngModel",t._fDate)("bsConfig",f.DdM(122,zt)),f.xp6(1),f.Q6J("ngModel",t._tDate)("bsConfig",f.DdM(123,zt)),f.xp6(1),f.Q6J("ngModel",t.department_id),f.xp6(2),f.AsE(" ",f.lcZ(15,62,"All")," ",f.lcZ(16,64,"Department")," "),f.xp6(3),f.Q6J("ngForOf",t._deptlist),f.xp6(1),f.Q6J("ngModel",t._status),f.xp6(2),f.hij(" ",f.lcZ(21,66,"All")," "),f.xp6(3),f.hij(" ",f.lcZ(24,68,"None")," "),f.xp6(3),f.hij(" ",f.lcZ(27,70,"Preparation")," "),f.xp6(3),f.hij(" ",f.lcZ(30,72,"Technical validation")," "),f.xp6(3),f.hij(" ",f.lcZ(33,74,"Validation")," "),f.xp6(3),f.hij(" ",f.lcZ(36,76,"Done")," "),f.xp6(2),f.Q6J("ngIf",t._authenService.hasPermission("REQ-VALID","report")),f.xp6(1),f.Q6J("ngIf",t._isLoading),f.xp6(3),f.Q6J("ngModel",t.pageSize),f.xp6(13),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(58,78,"Total of records"),": ",t.totalRow," - ",f.lcZ(59,80,"Page")," ",t.pageIndex," ",f.lcZ(60,82,"of")," ",t.totalPage," ",f.lcZ(61,84,"page"),""),f.xp6(13),f.hij(" ",f.lcZ(71,86,"Inner code")," "),f.xp6(3),f.hij(" ",f.lcZ(74,88,"Code")," "),f.xp6(3),f.Oqu(f.lcZ(77,90,"Internal testing")),f.xp6(3),f.Oqu(f.lcZ(80,92,"Parameter name")),f.xp6(3),f.Oqu(f.lcZ(83,94,"Priority")),f.xp6(3),f.Oqu(f.lcZ(86,96,"Note")),f.xp6(3),f.Oqu(f.lcZ(89,98,"Note lab")),f.xp6(3),f.Oqu(f.lcZ(92,100,"Note asm")),f.xp6(3),f.Oqu(f.lcZ(95,102,"Unit")),f.xp6(3),f.Oqu(f.lcZ(98,104,"LOD")),f.xp6(3),f.Oqu(f.lcZ(101,106,"LOQ")),f.xp6(3),f.Oqu(f.lcZ(104,108,"Results")),f.xp6(3),f.Oqu(f.lcZ(107,110,"Status")),f.xp6(3),f.Oqu(f.lcZ(110,112,"Actions")),f.xp6(3),f.Q6J("ngIf",0==t._preparationlist.length),f.xp6(1),f.Q6J("ngIf",t._preparationlist.length>0),f.xp6(4),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(121,114,"Total of records"),": ",t.totalRow," - ",f.lcZ(122,116,"Page")," ",t.pageIndex," ",f.lcZ(123,118,"of")," ",t.totalPage," ",f.lcZ(124,120,"page"),""))},directives:[i.Fj,i.JJ,i.On,q.Y5,q.Np,i.EJ,i.YN,i.Kr,a.sg,a.O5,v.Qt],pipes:[S.X$],styles:[""]}),e})();var $t=n(32579),Kt=n(72808);function Xt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",21),f.TgZ(1,"button",22),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.TgZ(4,"div",23),f.TgZ(5,"button",24),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(),n=f.MAs(78);return t.popUpLanguage(n,1)}),f._uU(6),f.ALo(7,"translate"),f.qZA(),f.TgZ(8,"button",24),f.NdJ("click",function(){return f.CHM(e),f.oxw().exportQuotationExcel()}),f._uU(9),f.ALo(10,"translate"),f.qZA(),f.TgZ(11,"button",24),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(),n=f.MAs(78);return t.popUpLanguage(n,2)}),f._uU(12),f.ALo(13,"translate"),f.qZA(),f.TgZ(14,"button",24),f.NdJ("click",function(){return f.CHM(e),f.oxw().exportBOExcel()}),f._uU(15),f.ALo(16,"translate"),f.qZA(),f.qZA(),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,5,"Print")," "),f.xp6(4),f.hij(" ",f.lcZ(7,7,"Quotation")," "),f.xp6(3),f.hij(" ",f.lcZ(10,9,"Quotation")," - Excel "),f.xp6(3),f.hij(" ",f.lcZ(13,11,"Receipt")," "),f.xp6(3),f.hij(" ",f.lcZ(16,13,"Receipt")," - Excel "))}function en(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"button",25),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return f.oxw()._chooseTab(t,t.order_no)}),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.BQk()}if(2&e){const e=t.$implicit,n=f.oxw();f.xp6(1),f.Q6J("ngClass",n._currentTabActivated==e.order_no?"btn btn-sm btn-warning":"btn btn-sm btn-secondary"),f.xp6(1),f.AsE(" ",f.lcZ(3,3,"Sample")," ",e.order_no," ")}}function tn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",27),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2);return null==t.entity0.inner_code?t._removeTab(t.entity0.sample_id):null}),f._uU(1,"X"),f.qZA()}}function nn(e,t){if(1&e&&(f.ynx(0),f.YNc(1,tn,2,0,"a",26),f.BQk()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngIf",0!=e._currentTabActivated&&null==e.entity0.inner_code)}}function an(e,t){if(1&e&&(f.TgZ(0,"div",60),f._uU(1),f.ALo(2,"slice"),f.qZA()),2&e){const e=t.item;f.Q6J("ngbTooltip",e.name.length>25?e.name:""),f.xp6(1),f.hij(" ",e.name.length>25?f.Dn7(2,2,e.name,0,20)+"..":e.name," ")}}function on(e,t){if(1&e&&(f.TgZ(0,"div",60),f._uU(1),f.ALo(2,"slice"),f.qZA()),2&e){const e=t.item;f.Q6J("ngbTooltip",e.name.length>25?e.name:""),f.xp6(1),f.hij(" ",e.name.length>25?f.Dn7(2,2,e.name,0,20)+"..":e.name," ")}}function ln(e,t){if(1&e&&(f.TgZ(0,"div",60),f._uU(1),f.ALo(2,"slice"),f.qZA()),2&e){const e=t.item;f.Q6J("ngbTooltip",e.name.length>25?e.name:""),f.xp6(1),f.hij(" ",e.name.length>25?f.Dn7(2,2,e.name,0,20)+"..":e.name," ")}}function rn(e,t){if(1&e&&(f.TgZ(0,"div",60),f._uU(1),f.ALo(2,"slice"),f.qZA()),2&e){const e=t.item;f.Q6J("ngbTooltip",e.name.length>25?e.name:""),f.xp6(1),f.hij(" ",e.name.length>25?f.Dn7(2,2,e.name,0,20)+"..":e.name," ")}}function sn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",61),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2);return t._saveTemplate(t.entity0)}),f._uU(1),f.ALo(2,"translate"),f.qZA()}2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Save")))}function cn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",69),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit;return f.oxw(2)._removeItem(t)}),f._UZ(1,"i",58),f.qZA()}}function dn(e,t){1&e&&f._UZ(0,"i",73)}function un(e,t){1&e&&f._UZ(0,"i",74)}function gn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",70),f.NdJ("click",function(){return f.CHM(e),f.oxw(3)._switchFlagEdit()}),f.ALo(1,"translate"),f.YNc(2,dn,1,0,"i",71),f.YNc(3,un,1,0,"i",72),f.qZA()}if(2&e){const e=f.oxw().$implicit;f.Q6J("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("ngbTooltip",f.lcZ(1,4,e.flag?"Cancel":"Edit")),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag)}}function pn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",75),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(3);return t._updatePricev2(t._orderdetailists)}),f._UZ(1,"i",76),f.qZA()}}function _n(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",null==e.quantity||""==e.quantity?1:e.quantity,"")}}function hn(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw(2).$implicit;f.xp6(1),f.Oqu(e.quantity)}}function mn(e,t){if(1&e&&(f.ynx(0),f.YNc(1,_n,2,1,"ng-container",17),f.YNc(2,hn,2,1,"ng-container",17),f.BQk()),2&e){const e=f.oxw(3);f.xp6(1),f.Q6J("ngIf",0==e.entity0.is_active),f.xp6(1),f.Q6J("ngIf",0!=e.entity0.is_active)}}function fn(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",77),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.quantity=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit,a=f.oxw(2);f.xp6(1),f.MGl("name","qty",t+1,""),f.Q6J("ngModel",n.quantity)("ngClass",null!=n.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=n.code_father)}}function Zn(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.ALo(2,"number"),f.BQk()),2&e){const e=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",f.lcZ(2,1,e.price),"")}}function xn(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.ALo(2,"number"),f.BQk()),2&e){const e=f.oxw(2).$implicit;f.xp6(1),f.Oqu(f.lcZ(2,1,e.price))}}function An(e,t){if(1&e&&(f.ynx(0),f.YNc(1,Zn,3,3,"ng-container",17),f.YNc(2,xn,3,3,"ng-container",17),f.BQk()),2&e){const e=f.oxw(3);f.xp6(1),f.Q6J("ngIf",0==e.entity0.is_active),f.xp6(1),f.Q6J("ngIf",0!=e.entity0.is_active)}}function bn(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",78),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.price=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit,a=f.oxw(2);f.xp6(1),f.MGl("name","p",t+1,""),f.Q6J("ngModel",n.price)("ngClass",null!=n.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=n.code_father)}}function Tn(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.ALo(2,"number"),f.BQk()),2&e){const e=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",f.xi3(2,1,e.discount,"1.1"),"")}}function yn(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.ALo(2,"number"),f.BQk()),2&e){const e=f.oxw(2).$implicit;f.xp6(1),f.Oqu(f.xi3(2,1,e.discount,"1.1"))}}function qn(e,t){if(1&e&&(f.ynx(0),f.YNc(1,Tn,3,4,"ng-container",17),f.YNc(2,yn,3,4,"ng-container",17),f.BQk()),2&e){const e=f.oxw(3);f.xp6(1),f.Q6J("ngIf",0==e.entity0.is_active),f.xp6(1),f.Q6J("ngIf",0!=e.entity0.is_active)}}function vn(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",78),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.discount=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit,a=f.oxw(2);f.xp6(1),f.MGl("name","gg",t+1,""),f.Q6J("ngModel",n.discount)("ngClass",null!=n.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=n.code_father)}}function Mn(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",null==e.priority||""==e.priority?0:e.priority,"")}}function Sn(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw(2).$implicit;f.xp6(1),f.Oqu(e.priority)}}function Cn(e,t){if(1&e&&(f.ynx(0),f.YNc(1,Mn,2,1,"ng-container",17),f.YNc(2,Sn,2,1,"ng-container",17),f.BQk()),2&e){const e=f.oxw(3);f.xp6(1),f.Q6J("ngIf",0==e.entity0.is_active),f.xp6(1),f.Q6J("ngIf",0!=e.entity0.is_active)}}function wn(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",79),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.priority=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit,a=f.oxw(2);f.xp6(1),f.MGl("name","pri",t+1,""),f.Q6J("ngModel",n.priority)("ngClass",null!=n.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=n.code_father)}}function Ln(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",e.tat," ")}}function Un(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",e.tat," ")}}function Nn(e,t){if(1&e&&(f.ynx(0),f.YNc(1,Ln,2,1,"ng-container",17),f.YNc(2,Un,2,1,"ng-container",17),f.BQk()),2&e){const e=f.oxw(3);f.xp6(1),f.Q6J("ngIf",0==e.entity0.is_active),f.xp6(1),f.Q6J("ngIf",0!=e.entity0.is_active)}}function Dn(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",79),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.tat=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit,a=f.oxw(2);f.xp6(1),f.MGl("name","ta",t+1,""),f.Q6J("ngModel",n.tat)("ngClass",null!=n.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=n.code_father)}}function kn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f.YNc(4,cn,2,0,"a",62),f.YNc(5,gn,4,6,"button",63),f.YNc(6,pn,2,0,"a",64),f.qZA(),f.TgZ(7,"td"),f.TgZ(8,"span",65),f._uU(9),f.qZA(),f.qZA(),f.TgZ(10,"td"),f._uU(11),f.qZA(),f.TgZ(12,"td",66),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw(2),a=f.MAs(80);return n._addComment(a,t)}),f._uU(13),f.qZA(),f.TgZ(14,"td"),f._uU(15),f.qZA(),f.TgZ(16,"td"),f._uU(17),f.qZA(),f.TgZ(18,"td"),f._uU(19),f.qZA(),f.TgZ(20,"td"),f.YNc(21,mn,3,2,"ng-container",17),f.YNc(22,fn,2,4,"ng-container",17),f.qZA(),f.TgZ(23,"td"),f.YNc(24,An,3,2,"ng-container",17),f.YNc(25,bn,2,4,"ng-container",17),f.qZA(),f.TgZ(26,"td"),f.YNc(27,qn,3,2,"ng-container",17),f.YNc(28,vn,2,4,"ng-container",17),f.qZA(),f.TgZ(29,"td"),f._uU(30),f.ALo(31,"number"),f.qZA(),f.TgZ(32,"td"),f.YNc(33,Cn,3,2,"ng-container",17),f.YNc(34,wn,2,4,"ng-container",17),f.qZA(),f.TgZ(35,"td"),f.YNc(36,Nn,3,2,"ng-container",17),f.YNc(37,Dn,2,4,"ng-container",17),f.qZA(),f.TgZ(38,"td"),f.TgZ(39,"input",67),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.order_no=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._assignOrderDetail(t._orderdetailists)}),f.qZA(),f.qZA(),f.TgZ(40,"td"),f.TgZ(41,"input",68),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.hide=t}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(2),f.Oqu(n+1),f.xp6(2),f.Q6J("ngIf",0==a.entity0.is_active&&!e.flag&&a._authenService.hasPermission("REQ-LIST","delete")),f.xp6(1),f.Q6J("ngIf",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","update")),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngClass",null==e.code_father?"text-bold jtext-default":"text-warning"),f.xp6(1),f.Oqu(e.code),f.xp6(2),f.hij(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),f.xp6(2),f.hij(" ",e.comment_ext," "),f.xp6(2),f.Oqu(e.method),f.xp6(2),f.Oqu(e.lod),f.xp6(2),f.hij(" ",e.unit," "),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.hij(" ",f.lcZ(31,29,e.amount)," "),f.xp6(3),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.MGl("name","odd",n+1,""),f.Q6J("ngModel",e.order_no)("ngClass",null!=e.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=e.code_father),f.xp6(2),f.MGl("name","ckb",n+1,""),f.Q6J("ngModel",e.hide)("disabled",!e.flag)}}function In(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",28),f.TgZ(1,"div",9),f.TgZ(2,"div",1),f.TgZ(3,"div",29),f.TgZ(4,"div",30),f.TgZ(5,"label",31),f.TgZ(6,"strong"),f._uU(7),f.ALo(8,"translate"),f.qZA(),f.qZA(),f.TgZ(9,"div",32),f.TgZ(10,"input",33),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.sample_name=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)}),f.ALo(11,"translate"),f.qZA(),f.TgZ(12,"input",33),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.sample_name_e=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)}),f.ALo(13,"translate"),f.ALo(14,"translate"),f.qZA(),f.TgZ(15,"input",34),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.sample_id=t}),f.qZA(),f.qZA(),f.TgZ(16,"label",31),f.TgZ(17,"strong"),f._uU(18),f.ALo(19,"translate"),f.qZA(),f.qZA(),f.TgZ(20,"div",32),f.TgZ(21,"input",35),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.sample_code=t}),f.ALo(22,"translate"),f.qZA(),f.qZA(),f.TgZ(23,"label",31),f.TgZ(24,"strong"),f._uU(25),f.ALo(26,"translate"),f.ALo(27,"translate"),f.qZA(),f.qZA(),f.TgZ(28,"div",32),f.TgZ(29,"input",33),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.description=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)}),f.ALo(30,"translate"),f.qZA(),f.TgZ(31,"input",33),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.description_e=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)}),f.ALo(32,"translate"),f.ALo(33,"translate"),f.qZA(),f.qZA(),f.TgZ(34,"label",31),f.TgZ(35,"strong"),f._uU(36),f.ALo(37,"translate"),f.qZA(),f.qZA(),f.TgZ(38,"div",32),f.TgZ(39,"input",35),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.inner_code=t}),f.ALo(40,"translate"),f.qZA(),f.qZA(),f.TgZ(41,"label",31),f.TgZ(42,"strong"),f._uU(43),f.ALo(44,"translate"),f.qZA(),f.qZA(),f.TgZ(45,"div",32),f.TgZ(46,"textarea",36),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.note=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)}),f.ALo(47,"translate"),f.qZA(),f.qZA(),f.TgZ(48,"label",31),f.TgZ(49,"strong"),f._uU(50),f.ALo(51,"translate"),f.qZA(),f.qZA(),f.TgZ(52,"div",32),f.TgZ(53,"input",33),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.weight=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)}),f.ALo(54,"translate"),f.qZA(),f.qZA(),f.TgZ(55,"label",31),f.TgZ(56,"strong"),f._uU(57),f.ALo(58,"translate"),f.qZA(),f.qZA(),f.TgZ(59,"div",32),f.TgZ(60,"select",37),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.is_active=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)}),f.TgZ(61,"option",38),f._uU(62),f.ALo(63,"translate"),f.qZA(),f.TgZ(64,"option",39),f._uU(65),f.ALo(66,"translate"),f.qZA(),f.TgZ(67,"option",40),f._uU(68),f.ALo(69,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(70,"label",41),f.TgZ(71,"strong"),f._uU(72),f.ALo(73,"translate"),f.qZA(),f.qZA(),f.TgZ(74,"div",32),f.TgZ(75,"ng-select",42),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity0.sample_nature_id=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSampleOrder(t.entity0)}),f.ALo(76,"translate"),f.ALo(77,"translate"),f.YNc(78,an,3,6,"ng-template",43),f.qZA(),f.qZA(),f.TgZ(79,"label",31),f.TgZ(80,"strong"),f._uU(81),f.ALo(82,"translate"),f.qZA(),f.qZA(),f.TgZ(83,"div",32),f.TgZ(84,"ng-select",44),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().selectedCategory0=t})("change",function(){return f.CHM(e),f.oxw().changeCategoryMatrix()}),f.ALo(85,"translate"),f.ALo(86,"translate"),f.YNc(87,on,3,6,"ng-template",43),f.qZA(),f.qZA(),f.TgZ(88,"label",31),f.TgZ(89,"strong"),f._uU(90),f.ALo(91,"translate"),f.qZA(),f.qZA(),f.TgZ(92,"div",32),f.TgZ(93,"ng-select",45),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().selectedSpecification0=t})("change",function(){f.CHM(e);const t=f.oxw();return t.changeSpecification(t.entity0,t.selectedCategory0)}),f.YNc(94,ln,3,6,"ng-template",43),f.qZA(),f.qZA(),f.TgZ(95,"label",31),f.TgZ(96,"strong"),f._uU(97),f.ALo(98,"translate"),f.qZA(),f.qZA(),f.TgZ(99,"div",32),f.TgZ(100,"input",46),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw()._tat=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateTAT(t.entity0,t._tat)}),f.ALo(101,"translate"),f.qZA(),f.qZA(),f.TgZ(102,"label",47),f.TgZ(103,"strong"),f._uU(104),f.ALo(105,"translate"),f.qZA(),f.qZA(),f.TgZ(106,"div",32),f.TgZ(107,"ng-select",48),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().selectedTemplate0=t})("change",function(){f.CHM(e);const t=f.oxw();return t.changeTemplate(t.entity0)}),f.YNc(108,rn,3,6,"ng-template",43),f.qZA(),f._uU(109," \xa0"),f.YNc(110,sn,3,3,"a",49),f.qZA(),f.TgZ(111,"div",50),f.TgZ(112,"div",51),f.TgZ(113,"table",52),f.TgZ(114,"thead",53),f.TgZ(115,"tr"),f.TgZ(116,"th",54),f._uU(117),f.ALo(118,"translate"),f.ALo(119,"number"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(120,"thead",55),f.TgZ(121,"tr"),f.TgZ(122,"th",56),f._uU(123,"#"),f.qZA(),f.TgZ(124,"th",57),f._UZ(125,"i",58),f.qZA(),f.TgZ(126,"th",59),f._uU(127),f.ALo(128,"translate"),f.qZA(),f.TgZ(129,"th",59),f._uU(130),f.ALo(131,"translate"),f.qZA(),f.TgZ(132,"th",59),f._uU(133),f.ALo(134,"translate"),f.qZA(),f.TgZ(135,"th",59),f._uU(136),f.ALo(137,"translate"),f.qZA(),f.TgZ(138,"th",59),f._uU(139,"LOD"),f.qZA(),f.TgZ(140,"th",59),f._uU(141),f.ALo(142,"translate"),f.qZA(),f.TgZ(143,"th",59),f._uU(144),f.ALo(145,"translate"),f.qZA(),f.TgZ(146,"th",59),f._uU(147),f.ALo(148,"translate"),f.qZA(),f.TgZ(149,"th",59),f._uU(150),f.ALo(151,"translate"),f.qZA(),f.TgZ(152,"th",59),f._uU(153),f.ALo(154,"translate"),f.qZA(),f.TgZ(155,"th",59),f._uU(156),f.ALo(157,"translate"),f.qZA(),f.TgZ(158,"th",59),f._uU(159),f.ALo(160,"translate"),f.qZA(),f.TgZ(161,"th",59),f._uU(162),f.ALo(163,"translate"),f.qZA(),f.TgZ(164,"th",59),f._uU(165),f.ALo(166,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(167,"tbody"),f.YNc(168,kn,42,31,"tr",15),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(5),f.MGl("for","sn",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(8,130,"Sample name")),f.xp6(3),f.MGl("id","sn",e._currentTabActivated,""),f.MGl("name","sample_name",e._currentTabActivated,""),f.Q6J("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",f.lcZ(11,132,"Sample")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_name)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),f.xp6(2),f.MGl("id","sne",e._currentTabActivated,""),f.MGl("name","sample_namee",e._currentTabActivated,""),f.Q6J("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",f.lcZ(13,134,"Sample")+" "+f.lcZ(14,136,"English")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_name_e)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),f.xp6(3),f.MGl("id","id",e._currentTabActivated,""),f.MGl("name","id",e._currentTabActivated,""),f.Q6J("ngModel",e.entity0.sample_id),f.xp6(1),f.MGl("for","sample_code",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(19,138,"Sample code")),f.xp6(3),f.MGl("id","sample_code",e._currentTabActivated,""),f.MGl("name","sample_code",e._currentTabActivated,""),f.Q6J("placeholder",f.lcZ(22,140,"Sample code")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_code),f.xp6(2),f.MGl("for","description",e._currentTabActivated,""),f.xp6(2),f.AsE("",f.lcZ(26,142,"Description")," (",f.lcZ(27,144,"State of sample"),")"),f.xp6(4),f.MGl("id","description",e._currentTabActivated,""),f.MGl("name","description",e._currentTabActivated,""),f.Q6J("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",f.lcZ(30,146,"Description")+" "+e._currentTabActivated)("ngModel",e.entity0.description)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),f.xp6(2),f.MGl("id","descriptione",e._currentTabActivated,""),f.MGl("name","descriptione",e._currentTabActivated,""),f.Q6J("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",f.lcZ(32,148,"Description")+" "+f.lcZ(33,150,"English")+" "+e._currentTabActivated)("ngModel",e.entity0.description_e)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),f.xp6(3),f.MGl("for","inner_code",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(37,152,"Inner code")),f.xp6(3),f.MGl("id","inner_code",e._currentTabActivated,""),f.MGl("name","inner_code",e._currentTabActivated,""),f.Q6J("placeholder",f.lcZ(40,154,"Inner code")+" "+e._currentTabActivated)("ngModel",e.entity0.inner_code),f.xp6(2),f.MGl("for","note",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(44,156,"Note")),f.xp6(3),f.MGl("id","note",e._currentTabActivated,""),f.MGl("name","note",e._currentTabActivated,""),f.Q6J("placeholder",f.lcZ(47,158,"Note")+" "+e._currentTabActivated)("ngModel",e.entity0.note)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),f.xp6(2),f.MGl("for","weight",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(51,160,"Weight")),f.xp6(3),f.MGl("id","weight",e._currentTabActivated,""),f.MGl("name","weight",e._currentTabActivated,""),f.Q6J("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",f.lcZ(54,162,"Weight")+" "+e._currentTabActivated)("ngModel",e.entity0.weight)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),f.xp6(2),f.MGl("for","state",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(58,164,"State")),f.xp6(3),f.Q6J("ngModel",e.entity0.is_active)("disabled",0!=e.entity.is_active||!e._authenService.hasPermission("REQ-LIST","create")),f.xp6(2),f.hij(" ",f.lcZ(63,166,"Pending")," "),f.xp6(3),f.hij(" ",f.lcZ(66,168,"Confirmed")," "),f.xp6(3),f.hij(" ",f.lcZ(69,170,"Cancel")," "),f.xp6(2),f.MGl("for","_samplenatures",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(73,172,"Sample nature")),f.xp6(3),f.Tol("ajustar"),f.MGl("name","_samplenatures",e._currentTabActivated,""),f.Q6J("items",e._samplenatures)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.entity0.sample_nature_id)("placeholder",f.lcZ(76,174,"Please choose"))("notFoundText",f.lcZ(77,176,"Not found item")),f.xp6(4),f.MGl("for","matrix_category",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(82,178,"Matrix category")),f.xp6(3),f.Tol("ajustar"),f.Q6J("items",e._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCategory0)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create"))("placeholder",f.lcZ(85,180,"Please choose"))("notFoundText",f.lcZ(86,182,"Not found item")),f.xp6(4),f.MGl("for","para_assignment",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(91,184,"Parameter assignment")),f.xp6(3),f.Q6J("items",e._specifications)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSpecification0)("disabled",0!=e.entity0.is_active||null==e.selectedCategory0||!e._authenService.hasPermission("REQ-LIST","create")),f.xp6(2),f.MGl("for","tatc",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(98,186,"TAT")),f.xp6(3),f.MGl("id","tatc",e._currentTabActivated,""),f.MGl("name","tatc",e._currentTabActivated,""),f.Q6J("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",f.lcZ(101,188,"TAT")+" "+e._currentTabActivated)("ngModel",e._tat)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),f.xp6(4),f.Oqu(f.lcZ(105,190,"Copy sample")),f.xp6(3),f.Q6J("items",e._templates)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedTemplate0)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),f.xp6(3),f.Q6J("ngIf",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","update")),f.xp6(7),f.AsE(" ",f.lcZ(118,192,"Subtotal"),": ",f.lcZ(119,194,e._totalSub)," (VND) "),f.xp6(10),f.hij(" ",f.lcZ(128,196,"Code")," "),f.xp6(3),f.hij(" ",f.lcZ(131,198,"Specification")," "),f.xp6(3),f.hij(" ",f.lcZ(134,200,"Note")," "),f.xp6(3),f.hij(" ",f.lcZ(137,202,"Method")," "),f.xp6(5),f.hij(" ",f.lcZ(142,204,"Unit")," "),f.xp6(3),f.hij(" ",f.lcZ(145,206,"Quantity")," "),f.xp6(3),f.hij(" ",f.lcZ(148,208,"Unit price")," "),f.xp6(3),f.hij("",f.lcZ(151,210,"Discount")," %"),f.xp6(3),f.hij(" ",f.lcZ(154,212,"Amount")," "),f.xp6(3),f.hij(" ",f.lcZ(157,214,"Priority")," "),f.xp6(3),f.hij(" ",f.lcZ(160,216,"TAT")," "),f.xp6(3),f.hij(" ",f.lcZ(163,218,"Order")," "),f.xp6(3),f.hij(" ",f.lcZ(166,220,"Hidden")," "),f.xp6(3),f.Q6J("ngForOf",e._orderdetailists)}}function Yn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",28),f.TgZ(1,"div",80),f.TgZ(2,"h4",81),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"button",82),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(6,"span",83),f._uU(7,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"div",84),f.TgZ(9,"div",30),f.TgZ(10,"div",50),f.TgZ(11,"div",85),f.TgZ(12,"button",86),f.NdJ("click",function(){return f.CHM(e),f.oxw()._print("vn")}),f._uU(13),f.ALo(14,"translate"),f.qZA(),f.TgZ(15,"button",87),f.NdJ("click",function(){return f.CHM(e),f.oxw()._print("en")}),f._uU(16),f.ALo(17,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&e&&(f.xp6(3),f.hij(" ",f.lcZ(4,3,"Language")," "),f.xp6(10),f.hij(" ",f.lcZ(14,5,"Vietnamese")," "),f.xp6(3),f.hij(" ",f.lcZ(17,7,"English")," "))}function Jn(e,t){1&e&&(f.ynx(0),f.TgZ(1,"a",94),f._UZ(2,"img",95),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.BQk()),2&e&&(f.xp6(3),f.hij(" ",f.lcZ(4,1,"Processing")," "))}function On(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",96),f.NdJ("click",function(){return f.CHM(e),f.oxw(2).saveComment()}),f._uU(1),f.ALo(2,"translate"),f.qZA()}2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Save & close")," "))}function Qn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",28),f.TgZ(1,"div",80),f.TgZ(2,"h4",81),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"button",82),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(6,"span",83),f._uU(7,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"div",84),f.TgZ(9,"div",30),f.TgZ(10,"div",50),f.TgZ(11,"div",88),f.TgZ(12,"label",89),f._uU(13),f.ALo(14,"translate"),f.qZA(),f.TgZ(15,"textarea",90),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entityComment.comment_ext=t}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(16,"div",91),f.TgZ(17,"a",92),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f._uU(18),f.ALo(19,"translate"),f.qZA(),f.YNc(20,Jn,5,3,"ng-container",17),f.YNc(21,On,3,3,"a",93),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(3),f.AsE(" ",f.lcZ(4,7,"Note")," - ",e.entityComment.code," "),f.xp6(10),f.Oqu(f.lcZ(14,9,"Note")),f.xp6(2),f.Q6J("ngModel",e.entityComment.comment_ext),f.xp6(3),f.hij(" ",f.lcZ(19,11,"Close")," "),f.xp6(2),f.Q6J("ngIf",e.isSaveNote),f.xp6(1),f.Q6J("ngIf",!e.isSaveNote)}}g().vfs=p.I.vfs;let Pn=(()=>{class e{constructor(e,t,n,a,i,o,l,r,s,u){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=i,this._excelService=o,this._activatedRoute=l,this._utilityService=r,this.formatPipe=s,this.modalService=u,this.isSave=!1,this._flagModal="",this._flagPrintPreview=!1,this.entity={},this.baseFolder=d.h.BASE_API+"/",this._id="",this.entityDetail={},this._xList=[],this._tabOrder=9,this._categories=[],this._specifications=[],this._templates=[],this._orderdetailists=[],this._totalSub=0,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._flagEdit=!1,this.isLoadingEmail=!1,this._currentTab=0,this.isLoadingEmail1=!1,this.isLoadingEmail2=!0,this.config={displayKey:"name",search:!0,limitTo:5},this.selectedSpecification0=null,this.selectedCategory0=null,this.selectedTemplate0=null,this._currentTabActivated=0,this._currentTabSampleId="",this._logoPath=d.h.BASE_API+"/",this._logoIsoPath=d.h.BASE_API+"/",this.entity0={},this.entityComment={},this.isSaveNote=!1,this._samplenatures=[],(!1===e.checkAccess("REQ-LIST")||!1===e.hasPermission("REQ-LIST","read"))&&this._route.navigate(["/error/404"]),this.user=this._authenService.getLoggedInUser(),this.socket=c()(d.h.BASE_API)}ngOnInit(){this.loadImgs(),this._activatedRoute.params.subscribe(e=>{this._id=e.id,this.loadDetail(this._id),this.loadSampleNature(),this.loadCategories(),this.loadSpecs(null),this.socket.on("refreshPage",e=>{this.loadCategories()})})}ngAfterViewInit(){}counter(e,t){return console.log(e,t),new Array(e-t)}loadDetail(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{this.entity=e.data;let t=[];for(let a of e.data.orders_list)t.push({sample_id:a.sample_id,sample_name:a.sample_name,sample_name_e:a.sample_name_e,sample_code:a.sample_code,inner_code:a.inner_code,description:a.description,description_e:a.description_e,note:a.note,weight:a.weight,is_active:a.is_active,userid:a.userid,total_sub:a.total_sub,order_no:a.order_no,flag_close:!1,sample_nature_id:a.sample_nature_id});this._xList=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0];let n={};n.id=this.entity.userid,n.short_code=this.user.short_code,this.updateEmployeeCode(n)})}removeOrderWithNull(e){let t={};t.sample_id=e,this._dataService.post("/request/removeOrderWithNull",t).subscribe(e=>{})}loadDetailWithNoloadOrderSampleTabs(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{this.entity.total=e.data.total})}updateEmployeeCode(e){this._dataService.post("/user/updateCodeEmployee",e).subscribe(e=>{})}loadDetail1(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{this.entity=e.data;let t=[];if(0==e.data.orders_list.length){var n=0;for(let a of this.counter(e.data.number_sample,0))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}else{n=0;for(let a of e.data.orders_list)t.push({sample_id:a.sample_id,sample_name:a.sample_name,sample_code:a.sample_code,inner_code:a.inner_code,description:a.description,note:a.note,weight:a.weight,is_active:a.is_active,userid:a.userid,order_no:n}),n+=1;for(let a of this.counter(e.data.number_sample,e.data.orders_list.length))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}this._xList=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0],this.loadTemplates(this.entity.customer_id)})}loadDetailByTab(e,t){this._currentTab=t;let n={};n.id=e,this._dataService.post("/request/detailA",n).subscribe(e=>{this.entity=e.data;let t=[];if(0==e.data.orders_list.length){var n=0;for(let a of this.counter(e.data.number_sample,0))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}else{n=0;for(let a of e.data.orders_list)t.push({sample_id:a.sample_id,sample_name:a.sample_name,sample_code:a.sample_code,inner_code:a.inner_code,description:a.description,note:a.note,weight:a.weight,is_active:a.is_active,userid:a.userid,order_no:n}),n+=1;for(let a of this.counter(e.data.number_sample,e.data.orders_list.length))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}this._xList=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0],this.loadTemplates(this.entity.customer_id)})}loadTemplates(e){let t={};t.customer_id=e,this._dataService.post("/sample_matrix/getallsampletemplates",t).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.sample_name,code:n.id});this._templates=t})}loadCategories(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:"en"==this.user.lang?n.category_name_e:n.category_name_l,code:n.id});this._categories=t})}loadSpecs(e){if(null!=e){let t={};t.domain=this.user.short_code,t.id=e,this._dataService.post("/sample_matrix/getallparametersnopagingbycat",t).subscribe(e=>{let t=[];for(let n of e.data.filter(e=>e.is_active))t.push({name:n.specification_name_l,code:n.parameter_id});this._specifications=t})}else{let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparametersnopaging",e).subscribe(e=>{let t=[];for(let n of e.data.filter(e=>e.is_active))t.push({name:n.specification_name_l,code:n.id});this._specifications=t})}}_updateRequest(){console.log(this.entity),this._dataService.post("/request/update",this.entity).subscribe(e=>{console.log(e.data),"failed"==e.result?this._notifyService.showError("en"==this.user.lang?m.W.MSG_UPDATENO_EN:m.W.MSG_UPDATENO,"en"==this.user.lang?m.W.error_title_en:m.W.error_title):(this.loadDetail(e.data[0]._id),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"))})}_updateSampleOrder(e){e.request_id=this._id,e.userid=this.user.id,this._tabOrder=e.order_no,null!=e.sample_name&&""!=e.sample_name&&(console.log("Params",e),this._dataService.post("/request/updateSampleOrder",e).subscribe(t=>{1==e.is_active&&null==e.sample_code&&this._updateCodeInSampleOrder(e),this._updateSubTotal(e.sample_id),this._currentTabSampleId=e.sample_id,this._currentTabActivated=t.data.order_no,this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK")}))}_updateCodeInSampleOrder(e){let t={};t.sample_id=e.sample_id,t.sample_code=e.sample_code,t.inner_code=e.inner_code,t.is_active=e.is_active,t.userid=this.user.id,console.log("Code",t),this._dataService.post("/request/addCodesInSampleOrder",t).subscribe(t=>{this.loadDetail(this._id),this._updateSubTotal(e.sample_id)})}loadDetailSampleOrder(e){let t={};t.sample_id=e,this._dataService.post("/request/detailSampleOrder",t).subscribe(e=>{null!=e.data&&(this._totalSub=e.data.total_sub)})}_removeTab(e){console.log("Call here",e),this._currentTabActivated=0,this._dataService.post("/request/removeOrder",{id:e,request_id:this._id,number_sample:this.entity.number_sample}).subscribe(e=>{console.log("Call KQ",e),this.entity0={},this.loadDetail(this._id)})}_updateSampleNo(){if(0==this.entity.number_sample)return this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_SAMPLE_ZERO_EN:m.W.MSG_ERROR_SAMPLE_ZERO,"en"==this.user.lang?m.W.error_title_en:m.W.error_title),void(this.entity.number_sample=1);this._dataService.post("/request/update2",{request_id:this._id,number_sample:this.entity.number_sample,short_code:this.user.short_code,ipaddress:this.user.ipaddress}).subscribe(e=>{console.log("Run here",e),this.loadDetail(this._id)})}_chooseTab(e,t){for(let n of this._xList)n.flag_close=n.order_no==t&&!n.flag_close;this.entity0=e,this._orderdetailists=[],this.selectedCategory=null,this.selectedSpecification=null,this.selectedTemplate=null,this._tat=null,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this.totalPage=0,this._updateSubTotalWithNoloadOrderSampleTabs(e.sample_id),this.loadDetailSampleOrder(e.sample_id),this.loadOrderDetailList(e.sample_id),this._currentTabActivated=t}changeCategoryMatrix(){this.loadSpecs(this.selectedCategory0)}changeTemplate(e){this._getTemplate(this.selectedTemplate0,e)}changeSpecification(e,t){console.log(this.selectedSpecification0,t),null!=this.selectedSpecification0&&null!=t&&this._addItems(this.selectedSpecification0,e,t)}_addItems(e,t,n){if(console.log(e,t),null!=t.sample_id)if(null!=e){let a={};a.sample_id=t.sample_id,a.parameter_id=e,a.category_id=n,a.priority=0,a.short_code=this.user.short_code,this._dataService.post("/request/addItemOrderv2",a).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_ADD_EN:m.W.MSG_ADD,"OK"),this.selectedSpecification0=null,this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id),this._updateSubTotal(t.sample_id),this.loadDetail(this._id)},()=>{this.selectedSpecification0=null,this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}else this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id);else this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)}loadOrderDetailList(e){if(null!=e){let t={page:1,limit:9999};t.sample_id=e,this._dataService.post("/request/getlistorderdetail",t).subscribe(e=>{let t=[];this._totalSub=0;for(let n of e.data)0==t.filter(e=>e.code==n.code&&e.category_id==n.category_id).length&&(t.push({code:n.code,code_father:0==e.data.filter(e=>e.code==n.code_father).length||n.code==n.code_father?null:n.code_father,lod:n.lod,mark:n.mark,method:n.method,parameter_id:n.parameter_id,category_id:n.category_id,price:null==n.price?0:n.price,priority:n.priority,sample_id:n.sample_id,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,tat:n.tat,unit:n.unit,quantity:n.quantity,flag:!1,comment_ext:n.comment_ext,discount:null==n.discount?0:parseFloat(n.discount),amount:(1-parseFloat(null==n.discount?0:n.discount)/100)*parseInt(n.quantity)*parseFloat(null==n.price?0:n.price),order_no:null==n.order_no?9:n.order_no,hide:null!=n.hide&&null!=n.hide&&n.hide}),this._totalSub+=parseInt(null==n.price?0:n.price)*n.quantity);this._orderdetailists=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages,this.selectedSpecification=null})}}_assignOrderDetail(e){let t=[];for(let n of e)t.push({sample_id:n.sample_id,parameter_id:n.parameter_id,category_id:n.category_id,order_no:n.order_no,code:n.code,code_father:n.code_father});this._dataService.post("/request/re-assignOrders",{getlist:t}).subscribe(t=>{this._updateSubTotal(e[0].sample_id),this.loadOrderDetailList(e[0].sample_id),this.loadDetail(this._id)})}_switchFlagEdit(){for(let e of this._orderdetailists)e.flag=!e.flag}pageChanged(e,t){this.pageIndex=e.page,this.loadOrderDetailList(t)}_removeItem(e){let t={};t.sample_id=e.sample_id,t.parameter_id=e.parameter_id,t.category_id=e.category_id,t.code=e.code,t.code_father=e.code_father,this._dataService.post("/request/removeItemOrderv2",t).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_DELETE_EN:m.W.MSG_DELETE,"OK"),this._updateSubTotal(e.sample_id),this.loadDetailSampleOrder(e.sample_id),this.loadOrderDetailList(e.sample_id)})}_updateTAT(e,t){this._tat=null;let n={};n.sample_id=e.sample_id,n.tat=t,this._dataService.post("/request/updateTAT",n).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this._updateSubTotal(e.sample_id),this.loadOrderDetailList(e.sample_id)})}_updatePrice(e){let t={};t.sample_id=e.sample_id,t.parameter_id=e.parameter_id,t.category_id=e.category_id,t.price=e.price,t.mark=e.mark,t.priority=e.priority,t.tat=e.tat,t.quantity=e.quantity,t.discount=e.discount,this._dataService.post("/request/updatePriceOrder",t).subscribe(t=>{console.log("KQ",t),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this._updateSubTotal(e.sample_id),this.loadOrderDetailList(e.sample_id),this.loadDetail(this._id)})}_updatePricev2(e){console.log("List",e),this._dataService.post("/request/updatePriceOrderv2",{getlist:e}).subscribe(t=>{console.log("KQ",t),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this._updateSubTotal(e[0].sample_id),this.loadOrderDetailList(e[0].sample_id),this.loadDetail(this._id)})}_updateSubTotal(e){let t={};t.sample_id=e,this._dataService.post("/request/updateSubTotal",t).subscribe(t=>{this._updateTotal(this._id),this.loadDetailSampleOrder(e)})}_updateSubTotalWithNoloadOrderSampleTabs(e){this.selectedCategory0=null;let t={};t.sample_id=e,this._dataService.post("/request/updateSubTotal",t).subscribe(t=>{this._updateTotalWithNoloadOrderSampleTabs(this._id),this.loadDetailSampleOrder(e)})}_updateTotalWithNoloadOrderSampleTabs(e){let t={};t.request_id=e,this._dataService.post("/request/updateTotal",t).subscribe(e=>{this.loadDetailWithNoloadOrderSampleTabs(this._id)})}_updateTotal(e){let t={};t.request_id=e,this._dataService.post("/request/updateTotal",t).subscribe(e=>{this.loadDetail(this._id)})}_addComment(e,t){this.entityComment=t,this.modalService.open(e,{size:"md",centered:!0})}saveComment(){this.isSaveNote=!0,this._dataService.post("/request/addCommentParameter",{sample_id:this.entityComment.sample_id,parameter_id:this.entityComment.parameter_id,category_id:this.entityComment.category_id,comment_ext:this.entityComment.comment_ext}).subscribe(e=>{this.isSaveNote=!1,this.loadOrderDetailList(this.entityComment.sample_id),this.modalService.dismissAll()})}_saveTemplate(e){if(null==e.sample_name||""==e.sample_name)return void this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title);let t={};t.sample_name=e.sample_name,t.weight=e.weight,t.customer_id=this.entity.customer_id;let n=[];for(let a of this._orderdetailists)n.push({code:a.code,flag:a.flag,lod:a.lod,mark:a.mark,method:a.method,loq:a.loq,parameter_id:a.parameter_id,category_id:a.category_id,price:a.price,priority:a.priority,sample_id:null,specification_name_e:a.specification_name_e,specification_name_l:a.specification_name_l,tat:a.tat,unit:a.unit,quantity:a.quantity});t.json=JSON.stringify(n),this._dataService.post("/request/addSampleTemplate",t).subscribe(e=>{"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_ADD_EN:m.W.MSG_ADD,"OK"),this.loadTemplates(this.entity.customer_id)):this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}_getTemplate(e,t){if(console.log(e,t),null!=t.sample_name&&null!=e)h().fire({title:"en"==this.user.lang?m.W.are_u_sure_replace_en:m.W.are_u_sure_replace,text:t.sample_name,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(n=>{if(n.value){let n={};n.id=e,n.sample_id=t.sample_id,n.userid=this.user.id,console.log(n),this._dataService.post("/request/replaceOrderDetailBySampleId",n).subscribe(e=>{this.selectedTemplate=null,"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_ADD_EN:m.W.MSG_ADD,"OK"),this.selectedTemplate0=[],this._updateSubTotal(t.sample_id),this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id)):this._notifyService.showError("en"==this.user.lang?m.W.MSG_ADDNO_EN:m.W.MSG_ADDNO,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}else this.selectedTemplate=null});else if(null!=e){let n={};n.id=e,n.sample_id=t.sample_id,n.request_id=this._id;let a=new Date;n.timestamp=new Date(r(a.setHours(a.getHours()+7)).format("YYYY-MM-DD HH:mm:ss")),n.is_active=0,n.userid=this.user.id,this._dataService.post("/request/replaceOrderDetailBySampleId",n).subscribe(e=>{this.selectedTemplate=null,"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_ADD_EN:m.W.MSG_ADD,"OK"),this.selectedTemplate0=null,this._updateSubTotal(e.data.sample_id),this.socket.emit("refresh",{}),this.loadDetailSampleOrder(e.data.sample_id),this.loadOrderDetailList(e.data.sample_id)):(this.selectedTemplate0=null,this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title))})}}_currentTabClicked(e){console.log(e)}popUpLanguage(e,t){this.choosePrintType=t,this.modalService.open(e,{size:"md",centered:!0})}_print(e){1==this.choosePrintType&&this.printQuotationAsPDF(e),2==this.choosePrintType&&this.printBOAsPDF(e)}printQuotationAsPDF(e){return(0,l.__awaiter)(this,void 0,void 0,function*(){let t={};t.id=this._id,this._dataService.post("/request/detailIn",t).subscribe(t=>(0,l.__awaiter)(this,void 0,void 0,function*(){console.log("KQ In",t),this.entity=t.data;let n=t.data;var a=new Date(n.received_date),i=new Date(a.getTime()+24*n.valid_number*60*60*1e3),o=(r(i).format("DD/MM/YYYY"),r(a).format("DD/MM/YYYY")),l=[];l.push({text:"\n"});let s="en"==e?this.entity.company_name_e:this.entity.company_name_l,c="en"==e?this.entity.address_e:this.entity.address_l,d="en"==e?"Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 b\xe1o gi\xe1: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length);"0"==e&&(d="M\xe3 s\u1ed1 b\xe1o gi\xe1/ Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)),l.push({alignment:"justify",columns:[{text:[{text:s,bold:!0},"\n",{text:c},"\n",{text:this.entity.contact_name_sender,bold:!0},"\n",{text:null==this.entity.sender_phone?"":this.entity.sender_phone},"\n",{text:null==this.entity.email?"":this.entity.email}],style:"body_top"},{qr:d,foreground:"#20a8d8",fit:65,alignment:"right"}]});let u="en"==e?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,";"0"==e&&(u="K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng/ Dear customers,");let p="en"==e?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.";0==e&&(p="Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.");let _="en"==e?"Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any).":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3).";0==e&&(_="Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3)/ Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any).");let h="en"==e?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",m="en"==e?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",f="en"==e?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",Z="en"==e?"QUOTATION":"B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M";"0"==e&&(Z="B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M\nQUOTATION"),l.push({text:"\n"}),l.push({table:{widths:["*"],body:[[{text:u,alignment:"left",style:"body_footer"}],[{text:p,alignment:"left",style:"body_footer"}],[{text:_,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),l.push({text:"\n"});let x=this.formatPipe.localeString(n.total),A="0.00";var b=n.total*n.promo_perorder/100;let T=this.formatPipe.localeString((n.total-b)*n.tax_vat/100),y=this.formatPipe.localeString(parseFloat(n.total)-b+(n.total-b)*n.tax_vat/100);null!=n.promo_special&&""!=n.promo_special&&(A=this.formatPipe.localeString(n.promo_special),T=this.formatPipe.localeString((n.total-n.promo_special-(b=(n.total-n.promo_special)*n.promo_perorder/100))*n.tax_vat/100),y=this.formatPipe.localeString(parseFloat(n.total)-parseFloat(n.promo_special)-b+(n.total-n.promo_special-b)*n.tax_vat/100));let q=this.formatPipe.localeString(b),v=1,M=!1,S="en"==e?"No.":"STT";"0"==e&&(S="STT\nNo.");let C="en"==e?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m";"0"==e&&(C="Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m\nParameters");let w="en"==e?"Method":"Ph\u01b0\u01a1ng ph\xe1p";"0"==e&&(w="Ph\u01b0\u01a1ng ph\xe1p\nMethod");let L="en"==e?"Note":"Ghi ch\xfa";"0"==e&&(L="Ghi ch\xfa\nNote");let U="en"==e?"Unit price":"\u0110\u01a1n gi\xe1";"0"==e&&(U="\u0110\u01a1n gi\xe1\nUnit price");let N="en"==e?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng";"0"==e&&(N="S\u1ed1 l\u01b0\u1ee3ng\nQuantity");let D="en"==e?"Discount":"Gi\u1ea3m gi\xe1";"0"==e&&(D="Gi\u1ea3m gi\xe1Discount");let k="en"==e?"Amount":"Th\xe0nh ti\u1ec1n";"0"==e&&(k="Th\xe0nh ti\u1ec1n\nAmount");for(let t of n.orders_list.filter(e=>2!=e.is_active))if(t.orderdetail_list.length>0){l.push({table:{widths:[20,"*",120,100,50,50,60],body:[[{border:[!0,!0,!0,!0],text:{text:S,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:C,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:w,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:L,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:U,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:N,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:k,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}});let a=null==t.weight?"":t.weight,i="en"==e?"Sample volume: "+a:"L\u01b0\u1ee3ng m\u1eabu: "+a;"0"==e&&(i="L\u01b0\u1ee3ng m\u1eabu/ Sample volume: "+a),l.push({table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:v+". "+("0"==e?t.sample_name+"/ "+t.sample_name_e:"en"==e?t.sample_name_e:t.sample_name),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:{text:this.formatPipe.localeString(t.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:6,text:{text:i,italics:!0,bold:!1},border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}});var I=[],Y=1,J=[];let o="en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",r="en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",s="en"==e?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)";"0"==e&&(o="T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)/ Total (not incluled VAT)",r="T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)/ Total (incluled VAT)",s="Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)/ Discount on total orders (%)");for(let n of t.orderdetail_list){let t=!1;"b709ca6e-2823-11eb-9a33-acde48001122"==n.department_id?(J.push(!0),t=!0):(J.push(!1),t=!1);let a="",i=null==n.standards?[]:JSON.parse(n.standards);for(let e of i.filter(e=>null!=e))null==e.id?null!=e&&(a+="("+e+")"):a+="("+e.id+")";let o="en"==e?n.specification_ex_name_e:n.specification_ex_name_l;"0"==e&&(o=n.specification_ex_name_l+"/ "+n.specification_ex_name_e),I.push({STT:Y,Para:[{text:o+" ",italics:t},{text:a,fontSize:8,italics:t}],Method:n.method,Note:n.comment_ext,Price:this.formatPipe.localeString(n.price*(1-(null==n.discount?0:n.discount)/100)),Qty:n.quantity,Amount:this.formatPipe.localeString(n.price*n.quantity*(1-(null==n.discount?0:n.discount)/100))}),Y+=1}l.push(this.tablePrintQuotation(I,["STT","Para","Method","Note","Price","Qty","Amount"],[20,"*",120,100,50,50,60],J));let c=""!=n.title_promo_spec&&null!=n.title_promo_spec?n.title_promo_spec:"en"==e?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m";"0"==e&&(c=""!=n.title_promo_spec&&null!=n.title_promo_spec?n.title_promo_spec:"Gi\u1ea3m gi\xe1 cho nh\xf3m/ Discount on group"),v==n.orders_list.filter(e=>2!=e.is_active).length&&(M=!0,l.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:o,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:T,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:o,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:s,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:T,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:o,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:c,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:A,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:T,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:o,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:c,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:A,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:s,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:T,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}})),v+=1}if(l.push({text:"\n"}),this.entity.standard_list.length>0){let t="";for(let n of this.entity.standard_list){let a="("+n.id+") "+("en"==e?n.description_e:n.description_l);t.includes(a)||(t+=a+"\n")}l.push({text:t,fontSize:8,italics:!0})}l.push({text:"\n"});let O="en"==e?"These prices are valid for one month if the quotation is accepted within one month.\nPayment period: on order.\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + Account number (VND): 15000168\n       + Bank name: Asia Commercial Bank\n       +Bank branch: Dong Sai Gon":"Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\n       + S\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",Q="en"==e?"Estimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.":"Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng",P="en"==e?"For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form":"N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.";if(0==e&&(O="Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1./ These prices are valid for one month if the quotation is accepted within one month.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng./ Payment period: on order.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + S\u1ed1 t\xe0i kho\u1ea3n/ Account number (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u/ Bank name: Asia Commercial Bank\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n/ Bank branch: Dong Sai Gon",Q="Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nEstimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.",P="N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.\n For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form."),l.push({text:O,fontSize:10}),l.push({text:"\n"}),l.push({text:Q,fontSize:8,italics:!0}),l.push({text:"\n"}),l.push({columns:[{width:"*",text:P,fontSize:10},{width:"*",qr:"http://phieuyeucauthunghiemtv.com",foreground:"#20a8d8",fit:45,alignment:"center"}]}),l.push({text:"\n"}),l.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:o+"\n"+("en"==e?"Valid by":"Ng\u01b0\u1eddi l\u1eadp b\xe1o gi\xe1"),alignment:"center",fontSize:10}]}),l.push({text:"\n"}),null!=this.entity.signature_user){let e=this.baseFolder+this.entity.signature_user;l.push({columns:[{width:"*",text:"",fontSize:10},{width:"150",image:yield this._convertBase64ImageFromURL(e),alignment:"center"}]})}const E={pageSize:"A4",pageMargins:[25,80,25,70],defaultStyle:{fontSize:12,columnGap:20},content:[{text:Z,style:"title_top"},{text:"\n"},{text:d,alignment:"right",fontSize:13,bold:!0},l],footer:function(e,t){return r(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:m+"\n"+h,alignment:"left",style:"body_footer"},{height:150,text:f,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},header:(e,t,n)=>({table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}),styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},images:{myLogo:yield this._convertBase64ImageFromURL(this._logoPath),myIso:yield this._convertBase64ImageFromURL(this._logoIsoPath)}};var R="'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf";R=R.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g().createPdf(E).download(R),g().createPdf(E).open()}))})}printBOAsPDF(e){return(0,l.__awaiter)(this,void 0,void 0,function*(){let t={};t.id=this._id,this._dataService.post("/request/detailIn",t).subscribe(t=>(0,l.__awaiter)(this,void 0,void 0,function*(){this.entity=t.data;let n=t.data;var a=new Date(n.received_date),i=new Date(a.getTime()+24*n.valid_number*60*60*1e3),o=(r(i).format("DD/MM/YYYY"),r(a).format("DD/MM/YYYY")),l=[];l.push({text:"\n"});let s=null==this.entity.company_receiver?this.entity.company_name_l:"en"==e?null==this.entity.company_receiver.company_name_e?this.entity.company_receiver.company_name_l:this.entity.company_receiver.company_name_e:this.entity.company_receiver.company_name_l,c=null==this.entity.company_receiver?null==this.entity.address_l?"":this.entity.address_l:"en"==e?null==this.entity.company_receiver.address_e?this.entity.company_receiver.address_l:this.entity.company_receiver.address_e:this.entity.company_receiver.address_l,d="en"==e?"Order code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 \u0111\u01a1n h\xe0ng: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length);l.push({alignment:"justify",columns:[{text:[{text:s,bold:!0},"\n",{text:c},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.contact_name?"":this.entity.contact_receiver.contact_name,bold:!0},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.phone||"-"==this.entity.contact_receiver.phone?"":this.entity.contact_receiver.phone},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.email?"":this.entity.contact_receiver.email}],style:"body_top"},{qr:d,foreground:"#20a8d8",fit:65,alignment:"right"}]});let u="en"==e?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,",p="en"==e?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.",_="en"==e?"Sac Ky Tien Phong Science & Technology JSC would like to confirm we received the sample provided by customers (please see attachment).":"C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong xin x\xe1c nh\u1eadn \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c m\u1eabu do qu\xfd kh\xe1ch h\xe0ng cung c\u1ea5p (vui l\xf2ng xem danh s\xe1ch \u0111\xednh k\xe8m).",h="en"==e?"Please check and confirm the information: sample name, sample description, parameters, etc\u2026 and notify us immediately in case corrections are needed. The information in this receipt will be used for outputting the testing report.":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra v\xe0 x\xe1c nh\u1eadn l\u1ea1i c\xe1c th\xf4ng tin: t\xean m\u1eabu, m\xf4 t\u1ea3 m\u1eabu, ch\u1ec9 ti\xeau ph\xe2n t\xedch, \u2026 v\xe0 th\xf4ng b\xe1o ngay cho ch\xfang t\xf4i trong tr\u01b0\u1eddng h\u1ee3p c\u1ea7n ch\u1ec9nh s\u1eeda. Nh\u1eefng th\xf4ng tin trong bi\xean nh\u1eadn n\xe0y s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho vi\u1ec7c xu\u1ea5t k\u1ebft qu\u1ea3.",m="en"==e?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",f="en"==e?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",Z="en"==e?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",x="en"==e?"RECEIPT":"BI\xcaN NH\u1eacN";l.push({text:"\n"}),l.push({table:{widths:["*"],body:[[{text:u,alignment:"left",style:"body_footer"}],[{text:p,alignment:"left",style:"body_footer"}],[{text:_,alignment:"left",style:"body_footer"}],[{text:h,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),l.push({text:"\n"});let A=this.formatPipe.localeString(n.total),b="0.00";var T=n.total*n.promo_perorder/100;let y=this.formatPipe.localeString((n.total-T)*n.tax_vat/100),q=this.formatPipe.localeString(parseFloat(n.total)-T+(n.total-T)*n.tax_vat/100);null!=n.promo_special&&""!=n.promo_special&&(b=this.formatPipe.localeString(n.promo_special),y=this.formatPipe.localeString((n.total-n.promo_special-(T=(n.total-n.promo_special)*n.promo_perorder/100))*n.tax_vat/100),q=this.formatPipe.localeString(parseFloat(n.total)-parseFloat(n.promo_special)-T+(n.total-n.promo_special-T)*n.tax_vat/100));let v=this.formatPipe.localeString(T),M=1,S="en"==e?"No.":"STT",C="en"==e?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m",w="en"==e?"Method":"Ph\u01b0\u01a1ng ph\xe1p ",L="en"==e?"Unit price":"\u0110\u01a1n gi\xe1",U="en"==e?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng",N="en"==e?"Amount":"Th\xe0nh ti\u1ec1n",D="en"==e?"Sample code: ":"M\xe3 m\u1eabu: ",k="en"==e?"Sample description: ":"T\xecnh tr\u1ea1ng m\u1eabu: ",I="en"==e?"Amount of samples: ":"Kh\u1ed1i l\u01b0\u1ee3ng m\u1eabu: ",Y="en"==e?"Date of receiving samples: "+r(new Date(n.received_date)).format("DD/MM/YYYY"):"Ng\xe0y nh\u1eadn m\u1eabu: "+r(new Date(n.received_date)).format("DD/MM/YYYY");for(let t of n.orders_list.filter(e=>2!=e.is_active)){let a="en"==e?"Client estimated due date: "+r(new Date(t.estimated_date)).format("DD/MM/YYYY"):"Ng\xe0y d\u1ef1 ki\u1ebfn tr\u1ea3 k\u1ebft qu\u1ea3: "+r(new Date(t.estimated_date)).format("DD/MM/YYYY");l.push({table:{headerRows:1,widths:[30,"*","*",50,50,110],body:[[{border:[!0,!0,!0,!0],text:{text:S,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:C,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:w,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:L,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:U,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:N,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}});let i=null==t.weight?"":t.weight;l.push({table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:M+". "+t.sample_name,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{text:{text:this.formatPipe.localeString(t.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:5,text:D+(null==t.inner_code?"":t.inner_code),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:k+(null==t.description?"":t.description),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:I+": "+i,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:Y,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:a,border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}});var J=[],O=1,Q=[];for(let n of t.orderdetail_list){let t=!1;"b709ca6e-2823-11eb-9a33-acde48001122"==n.department_id?(Q.push(!0),t=!0):(Q.push(!1),t=!1);let a="",i=null==n.standards?[]:JSON.parse(n.standards);for(let e of i.filter(e=>null!=e))null==e.id?null!=e&&(a+="("+e+")"):a+="("+e.id+")";J.push({STT:O,Para:[{text:("en"==e?n.specification_ex_name_e:n.specification_ex_name_l)+" ",italics:t},{text:a,fontSize:8,italics:t}],Method:n.method,Price:this.formatPipe.localeString(n.price*(1-(null==n.discount?0:n.discount)/100)),Qty:n.quantity,Amount:this.formatPipe.localeString(n.price*n.quantity*(1-(null==n.discount?0:n.discount)/100))}),O+=1}l.push(this.tablePrintQuotationa(J,["STT","Para","Method","Price","Qty","Amount"],[30,"*","*",50,50,110],Q));let o=""!=n.title_promo_spec&&null!=n.title_promo_spec?n.title_promo_spec:"en"==e?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m";M==n.orders_list.filter(e=>2!=e.is_active).length&&l.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:A,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:A,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:A,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:o,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:b,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:A,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:o,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:b,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}),M+=1}if(this.entity.standard_list.length>0){let t="";for(let n of this.entity.standard_list){let a="("+n.id+") "+("en"==e?n.description_e:n.description_l);t.includes(a)||(t+=a+"\n")}l.push({text:t,fontSize:8,italics:!0})}l.push({text:"\n"});let P="en"==e?"BILLING INFORMATION :":"Th\xf4ng tin xu\u1ea5t ho\xe1 \u0111\u01a1n :",E="en"==e?"Bank transfer information :":"Th\xf4ng tin chuy\u1ec3n kho\u1ea3n :",R="en"==e?"Account name: CONG TY CP KHCN SAC KY TIEN PHONG\nAccount number (VND): 15000168\nBank name: Asia Commercial Bank Bank branch: Dong Sai Gon":"T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\nS\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\nNg\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\nChi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",F="en"==e?"Company\u2019s name: ":"T\xean c\xf4ng ty: ",H="en"==e?"Address: ":"\u0110\u1ecba ch\u1ec9: ",W="en"==e?"Tax number: ":"M\xe3 s\u1ed1 thu\u1ebf: ",j=null==this.entity.company_bill?s:this.entity.company_bill.company_name_l,G=null==this.entity.company_bill?m:null==this.entity.company_bill.address_l?"":this.entity.company_bill.address_l,B=null==this.entity.company_bill?this.entity.tax_code:null==this.entity.company_bill.tax_code?"":this.entity.company_bill.tax_code,z=n.orders_list.filter(e=>null!=e.note&&""!=e.note),V=0,$="";for(let e of z)V<=e.note.length&&($=e.note,V=e.note.length);if(l.push({table:{widths:["*","*"],body:[[{border:[!0,!0,!0,!1],text:{text:P,bold:!0},style:"body_footer",alignment:"left"},{border:[!0,!0,!0,!1],text:{text:E,bold:!0},style:"body_footer",alignment:"left"}],[{border:[!0,!1,!0,!0],text:{text:F+j+"\n"+H+G+"\n"+W+B,bold:!1},style:"body_footer",alignment:"left"},{border:[!0,!1,!0,!0],text:{text:R,bold:!1},style:"body_footer",alignment:"left"}]]},layout:{defaultBorder:!1}}),l.push({text:"\n"}),l.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:o+"\n"+("en"==e?"Valid by":"Ng\u01b0\u1eddi l\u1eadp bi\xean nh\u1eadn"),alignment:"center",fontSize:10}]}),l.push({text:"\n"}),null!=this.entity.signature_user){let e=this.baseFolder+this.entity.signature_user;l.push({columns:[{width:"*",text:"",fontSize:10},{width:"150",image:yield this._convertBase64ImageFromURL(e),alignment:"center"}]})}const K={pageSize:"A4",pageMargins:[25,80,25,70],defaultStyle:{fontSize:12,columnGap:20},content:[{text:x,style:"title_top"},{text:"\n"},{text:d,alignment:"right",fontSize:13,bold:!0},l],footer:function(e,t){return r(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:f+"\n"+m,alignment:"left",style:"body_footer"},{height:150,text:Z,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},header:(e,t,n)=>({table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}),styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},images:{myLogo:yield this._convertBase64ImageFromURL(this._logoPath),myIso:yield this._convertBase64ImageFromURL(this._logoIsoPath)}};var X="'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf";X=X.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g().createPdf(K).open()}))})}tablePrintQuotation(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,a)}}}buildTableBodyPrintQuotation(e,t,n){var a=[];let i=0;return e.forEach(function(e){var o=[],l=1;t.forEach(function(t){o.push({text:{text:e[t]},alignment:2==l||3==l||4==l?"left":5==l||7==l?"right":"center",fontSize:10,italics:2==l&&n[i]}),l+=1,i+=1}),a.push(o)}),a}tablePrintQuotationa(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotationa(e,t,a)}}}buildTableBodyPrintQuotationa(e,t,n){var a=[];let i=0;return e.forEach(function(e){var o=[],l=1;t.forEach(function(t){o.push({text:{text:e[t]},alignment:2==l||3==l?"left":4==l||6==l?"right":"center",fontSize:10,italics:2==l&&n[i]}),l+=1,i+=1}),a.push(o)}),a}_convertBase64ImageFromURL(e){return new Promise((t,n)=>{var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=e=>{n(e)},a.src=e})}loadImgs(){let e={};e.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",e).subscribe(e=>(0,l.__awaiter)(this,void 0,void 0,function*(){this._logoPath+=e.data.filter(e=>"logo-stp"==e.file_name_e)[0].path_file,this._logoIsoPath+=e.data.filter(e=>"logo-iso"==e.file_name_e)[0].path_file}))}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}createImageFromBlob(e){let t=new FileReader;t.addEventListener("load",()=>{this.imageToShow=t.result},!1),e&&t.readAsDataURL(e)}loadSampleNature(){this._dataService.post("/sample_matrix/getallsamplenaturenopaging",{short_code:this.user.short_code}).subscribe(e=>{console.log(e);let t=[];for(let n of e.data)t.push({id:n.id,name:"en"==this.user.lang?n.name_e:n.name_l});this._samplenatures=t})}exportQuotationExcel(){this._dataService.post("/request/detailIn",{id:this._id}).subscribe(e=>(0,l.__awaiter)(this,void 0,void 0,function*(){let t=[],n=1;for(let a of e.data.orders_list.filter(e=>2!=e.is_active)){t.push({"No.":n+". "+(null==a.sample_name_e?a.sample_name:a.sample_name_e),Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(parseFloat(a.total_sub))}),t.push({"No.":"Sample volume: "+(null==a.weight?"":a.weight),Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:""});let e=1;for(let n of a.orderdetail_list)t.push({"No.":e,Parameters:n.specification_ex_name_l,Method:n.method,Note:n.comment_ext,"Unit Price":this.formatPipe.localeString(parseFloat(n.price)),Quantity:n.quantity,Discount:n.discount+"%",Amount:this.formatPipe.localeString(parseFloat(n.price)*parseInt(n.quantity)*(1-parseFloat(null==n.discount?0:n.discount)/100))}),e+=1;n+=1}if(t.push({"No.":"Total (before tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(e.data.total)}),null==e.data.promo_special)if(null==e.data.promo_perorder){let n=parseFloat(e.data.total)*parseFloat(e.data.tax_vat)/100,a=Math.round(parseFloat(e.data.total)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeStringEn(n)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(a)})}else{let n=parseFloat(e.data.total)*parseFloat(e.data.promo_perorder)/100,a=(parseFloat(e.data.total)-n)*parseFloat(e.data.tax_vat)/100,i=Math.round((parseFloat(e.data.total)-n)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on parameters",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.promo_perorder+"%",Amount:this.formatPipe.localeString(n)}),t.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(i)})}else if(null==e.promo_perorder){let n=parseFloat(e.data.promo_special),a=(parseFloat(e.data.total)-n)*parseFloat(e.data.tax_vat)/100,i=Math.round((parseFloat(e.data.total)-n)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on group",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(n),Amount:this.formatPipe.localeString(n)}),t.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(i)})}else{let n=parseFloat(e.data.promo_special),a=parseFloat(e.data.total)*parseFloat(e.data.promo_perorder)/100,i=(parseFloat(e.data.total)-n-a)*parseFloat(e.data.tax_vat)/100,o=Math.round((parseFloat(e.data.total)-n-a)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on group",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(n),Amount:this.formatPipe.localeString(n)}),t.push({"No.":"Discount on parameters",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.promo_perorder+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(i)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(o)})}this._excelService.exportAsExcelFile(t,"Requests-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+t.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+t.length+" "+m.W.record,"OK")}))}exportBOExcel(){this._dataService.post("/request/detailIn",{id:this._id}).subscribe(e=>(0,l.__awaiter)(this,void 0,void 0,function*(){let t=[],n=1;for(let a of e.data.orders_list.filter(e=>2!=e.is_active)){t.push({"No.":n+". "+(null==a.sample_name_e?a.sample_name:a.sample_name_e),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(parseFloat(a.total_sub))}),t.push({"No.":"Sample code: "+(null==a.sample_code?"":a.sample_code),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),t.push({"No.":"Sample description: "+(null==a.description_e&&null==a.description?"":a.description),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),t.push({"No.":"Sample volume: "+(null==a.weight?"":a.weight),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),t.push({"No.":"Received date: "+r(new Date(e.data.received_date)).format("DD/MM/YYYY"),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),t.push({"No.":"Returned date: "+r(new Date(e.data.returned_date)).format("DD/MM/YYYY"),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""});let i=1;for(let e of a.orderdetail_list)t.push({"No.":i,Parameters:e.specification_ex_name_l,Method:e.method,"Unit Price":this.formatPipe.localeString(parseFloat(e.price)),Quantity:e.quantity,Discount:e.discount+"%",Amount:this.formatPipe.localeString(parseFloat(e.price)*parseInt(e.quantity)*(1-parseFloat(null==e.discount?0:e.discount)/100))}),i+=1;n+=1}if(t.push({"No.":"Total (before tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(e.data.total)}),null==e.data.promo_special)if(null==e.data.promo_perorder){let n=parseFloat(e.data.total)*parseFloat(e.data.tax_vat)/100,a=Math.round(parseFloat(e.data.total)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeStringEn(n)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(a)})}else{let n=parseFloat(e.data.total)*parseFloat(e.data.promo_perorder)/100,a=(parseFloat(e.data.total)-n)*parseFloat(e.data.tax_vat)/100,i=Math.round((parseFloat(e.data.total)-n)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on parameters",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.promo_perorder+"%",Amount:this.formatPipe.localeString(n)}),t.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(i)})}else if(null==e.promo_perorder){let n=parseFloat(e.data.promo_special),a=(parseFloat(e.data.total)-n)*parseFloat(e.data.tax_vat)/100,i=Math.round((parseFloat(e.data.total)-n)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on group",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(n),Amount:this.formatPipe.localeString(n)}),t.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(i)})}else{let n=parseFloat(e.data.promo_special),a=parseFloat(e.data.total)*parseFloat(e.data.promo_perorder)/100,i=(parseFloat(e.data.total)-n-a)*parseFloat(e.data.tax_vat)/100,o=Math.round((parseFloat(e.data.total)-n-a)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on group",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(n),Amount:this.formatPipe.localeString(n)}),t.push({"No.":"Discount on parameters",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.promo_perorder+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(i)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(o)})}this._excelService.exportAsExcelFile(t,"BO-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+t.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+t.length+" "+m.W.record,"OK")}))}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(Z.e),f.Y36(x.D),f.Y36(o.F0),f.Y36(A.c),f.Y36(b.C),f.Y36(T.x),f.Y36(o.gz),f.Y36($t.t),f.Y36(Ge.p),f.Y36(y.FF))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-req-detail"]],decls:81,vars:48,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","button","routerLink","/request/list",1,"btn","btn-sm","btn-primary","mr-sm-2"],["ngbDropdown","","class","btn-group","role","group",4,"ngIf"],[1,"card-body"],[1,"col-xl-3","xl-100"],["type","number","min","0","name","number_sample",1,"form-control","form-control-sm",3,"ngModel","disabled","ngModelChange","change"],[1,"text-danger"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"btn-group","flex-wrap"],[4,"ngFor","ngForOf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[4,"ngIf"],["class","form theme-form",4,"ngIf"],["contentLanguage",""],["contentComment",""],["ngbDropdown","","role","group",1,"btn-group"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[1,"dropdown-item",3,"click"],["type","button",3,"ngClass","click"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],[1,"form","theme-form"],[1,"col"],[1,"form-group","row"],[1,"col-md-3","col-form-label",3,"for"],[1,"col-md-3"],["type","text",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change","keypress.enter"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["type","text","disabled","",1,"form-control","jdisabled",3,"id","placeholder","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","disabled","ngModelChange","change"],["name","_status",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["value","0"],["value","1"],["value","2"],[1,"col-md-3",3,"for"],["bindValue","id","bindLabel","name",3,"items","name","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["ng-option-tmp",""],["name","selectedCategory0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","placeholder","notFoundText","ngModelChange","change"],["name","selectedSpecification0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["type","number",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change"],[1,"col-md-3","col-form-label"],["name","selectedTemplate0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["href","javascript:;",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-secondary"],["colspan","16",1,"text-right"],[1,"table-primary"],[2,"width","50px"],[2,"width","100px"],[1,"fa","fa-trash"],["scope","col"],["container","body",3,"ngbTooltip"],["href","javascript:;",3,"click"],["href","javascript:;","class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],[3,"ngClass","ngbTooltip","click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[3,"ngClass"],[2,"cursor","pointer",3,"click"],["type","number","min","0",2,"width","65px",3,"name","ngModel","ngClass","disabled","ngModelChange","change"],["type","checkbox",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],["href","javascript:;",1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[3,"ngClass","ngbTooltip","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],["type","text",3,"name","ngModel","ngClass","disabled","ngModelChange"],["type","text","min","0","mask","separator.2","thousandSeparator",",",3,"name","ngModel","ngClass","disabled","ngModelChange"],["type","number","min","0",3,"name","ngModel","ngClass","disabled","ngModelChange"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"form-group"],["for","takenote"],["id","takenote","rows","3","name","takenote",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["href","javascript:;",1,"btn","btn-light",3,"click"],["href","javascript:;","class","btn btn-primary",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["href","javascript:;",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",1),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"button",7),f._uU(9),f.ALo(10,"translate"),f.qZA(),f.YNc(11,Xt,17,15,"div",8),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(12,"div",9),f.TgZ(13,"div",1),f.TgZ(14,"div",10),f.TgZ(15,"strong"),f._uU(16),f.ALo(17,"translate"),f.qZA(),f.qZA(),f.TgZ(18,"div",10),f._uU(19),f.qZA(),f.TgZ(20,"div",10),f.TgZ(21,"strong"),f._uU(22),f.ALo(23,"translate"),f.qZA(),f.qZA(),f.TgZ(24,"div",10),f._uU(25),f.qZA(),f.TgZ(26,"div",10),f.TgZ(27,"strong"),f._uU(28),f.ALo(29,"translate"),f.qZA(),f.qZA(),f.TgZ(30,"div",10),f._uU(31),f.ALo(32,"date"),f.qZA(),f.TgZ(33,"div",10),f.TgZ(34,"strong"),f._uU(35),f.ALo(36,"translate"),f.qZA(),f.qZA(),f.TgZ(37,"div",10),f._uU(38),f.ALo(39,"date"),f.qZA(),f.TgZ(40,"div",10),f.TgZ(41,"strong"),f._uU(42),f.ALo(43,"translate"),f.qZA(),f.qZA(),f.TgZ(44,"div",10),f.TgZ(45,"input",11),f.NdJ("ngModelChange",function(e){return t.entity.number_sample=e})("change",function(){return t._updateSampleNo()}),f.qZA(),f.qZA(),f.TgZ(46,"div",10),f.TgZ(47,"strong"),f._uU(48),f.ALo(49,"translate"),f.qZA(),f.qZA(),f.TgZ(50,"div",10),f._uU(51),f.qZA(),f.TgZ(52,"div",10),f.TgZ(53,"strong"),f._uU(54),f.ALo(55,"translate"),f.qZA(),f.qZA(),f.TgZ(56,"div",10),f.TgZ(57,"strong"),f._uU(58),f.qZA(),f.qZA(),f.TgZ(59,"div",10),f.TgZ(60,"strong"),f._uU(61),f.ALo(62,"translate"),f.qZA(),f.qZA(),f.TgZ(63,"div",10),f.TgZ(64,"strong",12),f._uU(65),f.ALo(66,"number"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(67,"div",2),f.TgZ(68,"div",3),f.TgZ(69,"div",4),f.TgZ(70,"div",1),f.TgZ(71,"div",13),f.TgZ(72,"div",14),f.YNc(73,en,4,5,"ng-container",15),f.qZA(),f.qZA(),f.TgZ(74,"div",16),f.YNc(75,nn,2,1,"ng-container",17),f.qZA(),f.qZA(),f.qZA(),f.YNc(76,In,169,222,"form",18),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(77,Yn,18,9,"ng-template",null,19,f.W1O),f.YNc(79,Qn,22,13,"ng-template",null,20,f.W1O)),2&e&&(f.xp6(9),f.hij(" ",f.lcZ(10,22,"Go back")," "),f.xp6(2),f.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","print")),f.xp6(5),f.Oqu(f.lcZ(17,24,"Company")),f.xp6(3),f.hij(" ","en"==t.user.lang?t.entity.company_name_e:t.entity.company_name_l," "),f.xp6(3),f.Oqu(f.lcZ(23,26,"Contact")),f.xp6(3),f.hij(" ",t.entity.contact_name," "),f.xp6(3),f.Oqu(f.lcZ(29,28,"Received date")),f.xp6(3),f.hij(" ",f.xi3(32,30,t.entity.received_date,"dd/MM/yyyy HH:mm")," "),f.xp6(4),f.Oqu(f.lcZ(36,33,"Returned date")),f.xp6(3),f.hij(" ",f.xi3(39,35,t.entity.returned_date,"dd/MM/yyyy HH:mm")," "),f.xp6(4),f.Oqu(f.lcZ(43,38,"Number of sample")),f.xp6(3),f.Q6J("ngModel",t.entity.number_sample)("disabled",0!=t.entity.is_active||!t._authenService.hasPermission("REQ-LIST","create")),f.xp6(3),f.Oqu(f.lcZ(49,40,"Created by")),f.xp6(3),f.hij(" ",t.entity.created_by," "),f.xp6(3),f.Oqu(f.lcZ(55,42,"Request code")),f.xp6(4),f.Oqu(t.entity.request_no),f.xp6(3),f.Oqu(f.lcZ(62,44,"Total")),f.xp6(4),f.hij("",null==t.entity.total||"NaN"==t.entity.total?0:f.lcZ(66,46,t.entity.total)," (VND)"),f.xp6(8),f.Q6J("ngForOf",t._xList),f.xp6(2),f.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","create")),f.xp6(1),f.Q6J("ngIf",0!=t._currentTabActivated))},directives:[o.rH,a.O5,i.qQ,i.wV,i.Fj,i.JJ,i.On,a.sg,y.jt,y.iD,y.Vi,a.mk,i._Y,i.JL,i.F,i.EJ,i.YN,i.Kr,M.w9,M.Z2,y._L,i.Wl,Kt.hx],pipes:[S.X$,a.uU,a.JJ,a.OU],styles:[""]}),e})();function En(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",46),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(),n=f.MAs(108);return t._openModal(n,null)}),f._uU(1),f.ALo(2,"translate"),f.qZA()}2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Add new request")," "))}function Rn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",47),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(),n=f.MAs(114);return t._exportAllRangeWithStatus(n)}),f._UZ(1,"i",48),f._uU(2),f.ALo(3,"translate"),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Export")," "))}function Fn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",49),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(),n=f.MAs(112);return t.openCopyModal(n,t.exportList,1)}),f._UZ(1,"i",50),f._uU(2),f.ALo(3,"translate"),f.ALo(4,"translate"),f.qZA()}2&e&&(f.xp6(2),f.AsE(" ",f.lcZ(3,2,"Copy")," ",f.lcZ(4,4,"All")," "))}function Hn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",51),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(),n=f.MAs(116);return t.openTemplateModal(n)}),f._UZ(1,"i",52),f._uU(2),f.ALo(3,"translate"),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Request template")," "))}function Wn(e,t){1&e&&f._UZ(0,"img",53)}function jn(e,t){1&e&&(f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td",54),f.TgZ(3,"h3",55),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.qZA(),f.qZA(),f.BQk()),2&e&&(f.xp6(4),f.hij(" ",f.lcZ(5,1,"No records now!!!")," "))}function Gn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",68),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit,n=f.oxw(2),a=f.MAs(108);return n._openModal(a,t)}),f.ALo(1,"translate"),f._UZ(2,"i",69),f.qZA()}if(2&e){const e=f.oxw(3);f.MGl("ngbTooltip","\n                          ",f.lcZ(1,2,"Edit"),"\n                          "),f.Q6J("disabled",!e._authenService.hasPermission("REQ-LIST","update"))}}function Bn(e,t){if(1&e&&(f.TgZ(0,"strong"),f._uU(1),f.ALo(2,"number"),f.qZA()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.Oqu(f.lcZ(2,1,e.total))}}function zn(e,t){if(1&e&&(f.TgZ(0,"i"),f._uU(1),f.ALo(2,"number"),f.qZA()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.Oqu(f.lcZ(2,1,e.total_estimated))}}function Vn(e,t){1&e&&(f.TgZ(0,"span",70),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Pending")))}function $n(e,t){1&e&&(f.TgZ(0,"span",71),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Confirmed")))}function Kn(e,t){1&e&&(f.TgZ(0,"span",72),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Cancel")))}function Xn(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"th",57),f._uU(2),f.qZA(),f.TgZ(3,"th",57),f.TgZ(4,"input",58),f.NdJ("change",function(t){const n=f.CHM(e).$implicit;return f.oxw(2).selectItem(t,n.id)}),f.qZA(),f.qZA(),f.TgZ(5,"td"),f.TgZ(6,"button",59),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return f.oxw(2)._routeDetail(t)}),f.ALo(7,"translate"),f._UZ(8,"i",60),f.qZA(),f.YNc(9,Gn,3,4,"button",61),f.TgZ(10,"button",62),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw(2),a=f.MAs(112);return n.openCopyModal(a,t,0)}),f.ALo(11,"translate"),f._UZ(12,"i",50),f.qZA(),f.qZA(),f.TgZ(13,"td"),f._uU(14),f.qZA(),f.TgZ(15,"td"),f._uU(16),f.qZA(),f.TgZ(17,"td"),f._uU(18),f.ALo(19,"date"),f.qZA(),f.TgZ(20,"td"),f.TgZ(21,"span",63),f._uU(22),f.qZA(),f.qZA(),f.TgZ(23,"td"),f._uU(24),f.qZA(),f.TgZ(25,"td",64),f.YNc(26,Bn,3,3,"strong",39),f.YNc(27,zn,3,3,"i",39),f.qZA(),f.TgZ(28,"td"),f._uU(29),f.qZA(),f.TgZ(30,"td"),f._uU(31),f.ALo(32,"date"),f.qZA(),f.TgZ(33,"td"),f.YNc(34,Vn,3,3,"span",65),f.YNc(35,$n,3,3,"span",66),f.YNc(36,Kn,3,3,"span",67),f.qZA(),f.TgZ(37,"td"),f._uU(38),f.ALo(39,"date"),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(2),f.hij(" ",n+1+a.pageSize*(a.pageIndex-1)," "),f.xp6(2),f.MGl("name","ckU",n+1,""),f.Q6J("checked",a.exportList.includes(e.id)),f.xp6(2),f.MGl("ngbTooltip","\n                          ",f.lcZ(7,22,"View detail"),"\n                          "),f.Q6J("disabled",!a._authenService.hasPermission("REQ-LIST","read")),f.xp6(3),f.Q6J("ngIf",e.is_active<=2),f.xp6(1),f.MGl("ngbTooltip","\n                          ",f.lcZ(11,24,"Copy"),"\n                          "),f.Q6J("disabled",!a._authenService.hasPermission("REQ-LIST","update")),f.xp6(4),f.hij(" ",e.request_no," "),f.xp6(2),f.Oqu(e.order_no),f.xp6(2),f.Oqu(f.xi3(19,26,e.received_date,"dd/MM/yyyy HH:mm")),f.xp6(3),f.Q6J("ngbTooltip",e.note),f.xp6(1),f.Oqu("en"==a.user.lang?e.company_name_e:e.company_name_l),f.xp6(2),f.hij(" ","en"==a.user.lang?e.receive_company_e:e.receive_company_l," "),f.xp6(2),f.Q6J("ngIf",1==e.is_active),f.xp6(1),f.Q6J("ngIf",1!=e.is_active),f.xp6(2),f.Oqu(e.contact_name),f.xp6(2),f.Oqu(f.xi3(32,29,e.returned_date,"dd/MM/yyyy HH:mm")),f.xp6(3),f.Q6J("ngIf",0==e.is_active),f.xp6(1),f.Q6J("ngIf",0!=e.is_active&&2!=e.is_active),f.xp6(1),f.Q6J("ngIf",2==e.is_active),f.xp6(2),f.Oqu(f.xi3(39,32,e.timestamp,"dd/MM/yyyy HH:mm"))}}function ea(e,t){if(1&e&&(f.ynx(0),f.YNc(1,Xn,40,35,"tr",56),f.BQk()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngForOf",e._requestslist)}}function ta(e,t){if(1&e&&(f.TgZ(0,"small",115),f._uU(1),f.qZA()),2&e){const e=f.oxw(2);f.xp6(1),f.Oqu(e.selectedCustomerLabel)}}function na(e,t){1&e&&(f.ynx(0),f.TgZ(1,"a",116),f._UZ(2,"img",117),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.BQk()),2&e&&(f.xp6(3),f.hij(" ",f.lcZ(4,1,"Processing")," "))}function aa(e,t){1&e&&(f.TgZ(0,"button",118),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Save & close")," "))}const ia=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function oa(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",73,74),f.NdJ("ngSubmit",function(){f.CHM(e);const t=f.oxw();return t.saveChange(t.selectedCustomer)}),f.TgZ(2,"div",75),f.TgZ(3,"h4",76),f._uU(4),f.ALo(5,"translate"),f.ALo(6,"translate"),f.qZA(),f.TgZ(7,"button",77),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(8,"span",78),f._uU(9,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"div",79),f.TgZ(11,"div",80),f.TgZ(12,"div",81),f.TgZ(13,"div",82),f.TgZ(14,"label",83),f._uU(15),f.ALo(16,"translate"),f.TgZ(17,"span",55),f._uU(18,"(*)"),f.qZA(),f.qZA(),f.TgZ(19,"input",84),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.number_sample=t}),f.ALo(20,"translate"),f.qZA(),f.TgZ(21,"input",85),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.id=t}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(22,"div",86),f.TgZ(23,"div",82),f.TgZ(24,"label",87),f._uU(25,"VAT (%) "),f.TgZ(26,"span",55),f._uU(27,"(*)"),f.qZA(),f.qZA(),f.TgZ(28,"input",88),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.tax_vat=t}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(29,"div",86),f.TgZ(30,"div",82),f.TgZ(31,"label",89),f._uU(32),f.ALo(33,"translate"),f.qZA(),f.TgZ(34,"div",90),f.TgZ(35,"input",91),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.is_issue_bill=t}),f.qZA(),f._UZ(36,"label",89),f.qZA(),f.qZA(),f.qZA(),f.TgZ(37,"div",92),f.TgZ(38,"div",82),f.TgZ(39,"label",93),f._uU(40),f.ALo(41,"translate"),f.qZA(),f.TgZ(42,"input",94),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.title_promo_spec=t}),f.ALo(43,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(44,"div",81),f.TgZ(45,"div",82),f.TgZ(46,"label",95),f._uU(47),f.ALo(48,"translate"),f.qZA(),f.TgZ(49,"input",96),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.promo_special=t}),f.ALo(50,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(51,"div",81),f.TgZ(52,"div",82),f.TgZ(53,"label",97),f._uU(54),f.ALo(55,"translate"),f.qZA(),f.TgZ(56,"input",98),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.promo_perorder=t})("change",function(){f.CHM(e);const t=f.oxw();return t._switchPercent(t.entity.promo_perorder)}),f.ALo(57,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(58,"div",92),f.TgZ(59,"div",82),f.TgZ(60,"label",99),f._uU(61),f.ALo(62,"translate"),f.TgZ(63,"span",55),f._uU(64,"(*)"),f.qZA(),f.qZA(),f.TgZ(65,"ng-select",100),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().selectedCustomer=t})("change",function(){return f.CHM(e),f.oxw()._getInfoLabelCustomer()}),f.ALo(66,"translate"),f.ALo(67,"translate"),f.qZA(),f.YNc(68,ta,2,1,"small",101),f.qZA(),f.qZA(),f.TgZ(69,"div",81),f.TgZ(70,"div",82),f.TgZ(71,"label",102),f._uU(72),f.ALo(73,"translate"),f.TgZ(74,"span",55),f._uU(75,"(*)"),f.qZA(),f.qZA(),f.TgZ(76,"input",103),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw()._fdate=t})("bsValueChange",function(t){return f.CHM(e),f.oxw().orgValueChange1(t)}),f.ALo(77,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(78,"div",81),f.TgZ(79,"div",82),f.TgZ(80,"label",104),f._uU(81),f.ALo(82,"translate"),f.TgZ(83,"span",55),f._uU(84,"(*)"),f.qZA(),f.qZA(),f.TgZ(85,"input",105),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw()._tdate=t})("bsValueChange",function(t){return f.CHM(e),f.oxw().orgValueChange2(t)}),f.ALo(86,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(87,"div",81),f.TgZ(88,"div",82),f.TgZ(89,"label",106),f._uU(90),f.ALo(91,"translate"),f.qZA(),f.TgZ(92,"input",107),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.valid_number=t})("change",function(){return f.CHM(e),f.oxw()._calculateDays()}),f.ALo(93,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(94,"div",81),f.TgZ(95,"div",82),f.TgZ(96,"label",108),f._uU(97),f.ALo(98,"translate"),f.qZA(),f.TgZ(99,"select",109),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.is_active=t}),f.TgZ(100,"option",22),f._uU(101),f.ALo(102,"translate"),f.qZA(),f.TgZ(103,"option",23),f._uU(104),f.ALo(105,"translate"),f.qZA(),f.TgZ(106,"option",24),f._uU(107),f.ALo(108,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(109,"div",92),f.TgZ(110,"div",82),f.TgZ(111,"label",110),f._uU(112),f.ALo(113,"translate"),f.qZA(),f.TgZ(114,"textarea",111),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.note=t}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(115,"div",112),f.TgZ(116,"button",113),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f._uU(117),f.ALo(118,"translate"),f.qZA(),f.YNc(119,na,5,3,"ng-container",39),f.YNc(120,aa,3,3,"button",114),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(4),f.hij(" ","ADD"==e._flagModal?f.lcZ(5,68,"Add new"):f.lcZ(6,70,"Update")," "),f.xp6(11),f.hij("",f.lcZ(16,72,"Number of sample")," "),f.xp6(4),f.Q6J("ngClass","ADD"==e._flagModal?"form-control":"form-control jdisabled")("placeholder",f.lcZ(20,74,"Number of sample"))("ngModel",e.entity.number_sample)("disabled","ADD"!=e._flagModal),f.xp6(2),f.Q6J("ngModel",e.entity.id),f.xp6(7),f.Q6J("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("placeholder","VAT")("ngModel",e.entity.tax_vat)("disabled",0!=e.entity.is_active),f.xp6(4),f.Oqu(f.lcZ(33,76,"Issue bill")),f.xp6(3),f.Q6J("ngModel",e.entity.is_issue_bill),f.xp6(5),f.Oqu(f.lcZ(41,78,"Promotion title")),f.xp6(2),f.Q6J("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("placeholder",f.lcZ(43,80,"Promotion title"))("ngModel",e.entity.title_promo_spec)("disabled",0!=e.entity.is_active),f.xp6(5),f.hij("",f.lcZ(48,82,"Promotion per order")," (VND)"),f.xp6(2),f.Q6J("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("placeholder",f.lcZ(50,84,"Promotion per order"))("ngModel",e.entity.promo_special)("disabled",0!=e.entity.is_active),f.xp6(5),f.hij("",f.lcZ(55,86,"Total promotion")," (%)"),f.xp6(2),f.Q6J("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("placeholder",f.lcZ(57,88,"Total promotion"))("ngModel",e.entity.promo_perorder)("min",0)("max",100)("disabled",0!=e.entity.is_active),f.xp6(5),f.hij("",f.lcZ(62,90,"Company")," "),f.xp6(4),f.Q6J("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCustomer)("placeholder",f.lcZ(66,92,"Please choose"))("notFoundText",f.lcZ(67,94,"Not found item")),f.xp6(3),f.Q6J("ngIf",null!=e.selectedCustomer),f.xp6(4),f.hij("",f.lcZ(73,96,"Received date")," "),f.xp6(4),f.Q6J("placeholder",f.lcZ(77,98,"Received date"))("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("ngModel",e._fdate)("bsConfig",f.DdM(120,ia))("disabled",0!=e.entity.is_active),f.xp6(5),f.hij("",f.lcZ(82,100,"Returned date")," "),f.xp6(4),f.Q6J("placeholder",f.lcZ(86,102,"Returned date"))("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("ngModel",e._tdate)("bsConfig",f.DdM(121,ia))("disabled",0!=e.entity.is_active),f.xp6(5),f.Oqu(f.lcZ(91,104,"Valid date")),f.xp6(2),f.Q6J("type","number")("placeholder",f.lcZ(93,106,"Valid date"))("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("ngModel",e.entity.valid_number)("disabled",0!=e.entity.is_active)("min",0),f.xp6(5),f.Oqu(f.lcZ(98,108,"Status")),f.xp6(2),f.Q6J("ngModel",e.entity.is_active),f.xp6(2),f.hij(" ",f.lcZ(102,110,"Pending")," "),f.xp6(3),f.hij(" ",f.lcZ(105,112,"Confirmed")," "),f.xp6(3),f.hij(" ",f.lcZ(108,114,"Cancel")," "),f.xp6(5),f.Oqu(f.lcZ(113,116,"Note")),f.xp6(2),f.Q6J("ngModel",e.entity.note),f.xp6(3),f.hij(" ",f.lcZ(118,118,"Close")," "),f.xp6(2),f.Q6J("ngIf",e.isSave),f.xp6(1),f.Q6J("ngIf",!e.isSave)}}function la(e,t){1&e&&(f.TgZ(0,"h4",76),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Relationship")," "))}function ra(e,t){if(1&e&&(f.TgZ(0,"h4",76),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e){const e=f.oxw(2);f.xp6(1),f.AsE(" ",f.lcZ(2,2,"Contact")," - ",e._diaName," ")}}function sa(e,t){if(1&e&&(f.TgZ(0,"h4",76),f._uU(1),f.ALo(2,"translate"),f.ALo(3,"translate"),f.qZA()),2&e){const e=f.oxw(2);f.xp6(1),f.AsE(" ",f.lcZ(2,2,"Relationship")," - ",f.lcZ(3,4,"ADDREL"==e._flagModal1?"Add new":"Update")," ")}}function ca(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",127),f.TgZ(1,"pagination",128),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(3).pageIndexRel=t})("pageChanged",function(t){return f.CHM(e),f.oxw(3).pageChangedRel(t)}),f.qZA(),f.TgZ(2,"a",31),f._uU(3),f.ALo(4,"translate"),f.ALo(5,"translate"),f.ALo(6,"translate"),f.ALo(7,"translate"),f.qZA(),f.qZA()}if(2&e){const e=f.oxw(3);f.xp6(1),f.Q6J("boundaryLinks",!0)("totalItems",e.totalRowRel)("ngModel",e.pageIndexRel)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSizeRel),f.xp6(2),f.Q0o("",f.lcZ(4,12,"Total of records"),": ",e.totalRowRel," - ",f.lcZ(5,14,"Page")," ",e.pageIndexRel," ",f.lcZ(6,16,"of")," ",e.totalPageRel," ",f.lcZ(7,18,"page"),"")}}function da(e,t){1&e&&(f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td",129),f.TgZ(3,"h3",55),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.qZA(),f.qZA(),f.BQk()),2&e&&(f.xp6(4),f.hij(" ",f.lcZ(5,1,"No records now!!!")," "))}function ua(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"td",130),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return f.oxw(4).editLinkPopUp(t)}),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.qZA(),f.TgZ(9,"td"),f._uU(10),f.qZA(),f.TgZ(11,"td"),f._uU(12),f.qZA(),f.TgZ(13,"td"),f._uU(14),f.qZA(),f.TgZ(15,"td"),f.TgZ(16,"button",131),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return f.oxw(4).deleteItemLinkContact(t)}),f.ALo(17,"translate"),f._UZ(18,"i",132),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=f.oxw(4);f.xp6(2),f.hij(" ",e.code_link," "),f.xp6(2),f.Oqu(e.company_name_l),f.xp6(2),f.Oqu(e.sender_name),f.xp6(2),f.hij(" ",e.receive_company_l," "),f.xp6(2),f.hij(" ",e.receive_name," "),f.xp6(2),f.hij(" ",e.bill_company_l," "),f.xp6(2),f.hij(" ",e.bill_name," "),f.xp6(2),f.s9C("ngbTooltip",f.lcZ(17,9,"Delete")),f.Q6J("disabled",!n._authenService.hasPermission("CUSTOMER","delete"))}}function ga(e,t){if(1&e&&(f.ynx(0),f.YNc(1,ua,19,11,"tr",56),f.BQk()),2&e){const e=f.oxw(3);f.xp6(1),f.Q6J("ngForOf",e._relationslist)}}function pa(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",127),f.TgZ(1,"pagination",128),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(3).pageIndexRel=t})("pageChanged",function(t){return f.CHM(e),f.oxw(3).pageChangedRel(t)}),f.qZA(),f.TgZ(2,"a",31),f._uU(3),f.ALo(4,"translate"),f.ALo(5,"translate"),f.ALo(6,"translate"),f.ALo(7,"translate"),f.qZA(),f.qZA()}if(2&e){const e=f.oxw(3);f.xp6(1),f.Q6J("boundaryLinks",!0)("totalItems",e.totalRowRel)("ngModel",e.pageIndexRel)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSizeRel),f.xp6(2),f.Q0o("",f.lcZ(4,12,"Total of records"),": ",e.totalRowRel," - ",f.lcZ(5,14,"Page")," ",e.pageIndexRel," ",f.lcZ(6,16,"of")," ",e.totalPageRel," ",f.lcZ(7,18,"page"),"")}}function _a(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",80),f.TgZ(1,"div",122),f.TgZ(2,"input",123),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2)._keywordRel=t})("change",function(){return f.CHM(e),f.oxw(2).loadRelationship()})("keyup.enter",function(){return f.CHM(e),f.oxw(2).loadRelationship()}),f.ALo(3,"translate"),f.qZA(),f.qZA(),f.TgZ(4,"div",124),f.TgZ(5,"button",125),f.NdJ("click",function(){return f.CHM(e),f.oxw(2).linkContactPopUp1()}),f._uU(6),f.ALo(7,"translate"),f.qZA(),f.qZA(),f.TgZ(8,"div",92),f._UZ(9,"br"),f.YNc(10,ca,8,20,"div",126),f.TgZ(11,"div",32),f.TgZ(12,"table",33),f.TgZ(13,"thead",34),f.TgZ(14,"tr"),f.TgZ(15,"th",36),f._uU(16),f.ALo(17,"translate"),f.qZA(),f.TgZ(18,"th",36),f._uU(19),f.ALo(20,"translate"),f.qZA(),f.TgZ(21,"th",36),f._uU(22),f.ALo(23,"translate"),f.qZA(),f.TgZ(24,"th",36),f._uU(25),f.ALo(26,"translate"),f.qZA(),f.TgZ(27,"th",36),f._uU(28),f.ALo(29,"translate"),f.qZA(),f.TgZ(30,"th",36),f._uU(31),f.ALo(32,"translate"),f.qZA(),f.TgZ(33,"th",36),f._uU(34),f.ALo(35,"translate"),f.qZA(),f.TgZ(36,"th",36),f._uU(37),f.ALo(38,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(39,"tbody"),f.YNc(40,da,6,3,"ng-container",39),f.YNc(41,ga,2,1,"ng-container",39),f.qZA(),f.qZA(),f.qZA(),f.YNc(42,pa,8,20,"div",126),f.qZA(),f.qZA()}if(2&e){const e=f.oxw(2);f.xp6(2),f.Q6J("placeholder",f.lcZ(3,15,"Search"))("ngModel",e._keywordRel),f.xp6(4),f.hij(" ",f.lcZ(7,17,"Add new")," "),f.xp6(4),f.Q6J("ngIf",e._relationslist.length>0),f.xp6(6),f.hij(" ",f.lcZ(17,19,"Relevant code")," "),f.xp6(3),f.hij(" ",f.lcZ(20,21,"Company")," "),f.xp6(3),f.hij(" ",f.lcZ(23,23,"Sender")," "),f.xp6(3),f.hij(" ",f.lcZ(26,25,"Received company")," "),f.xp6(3),f.hij(" ",f.lcZ(29,27,"Receiver")," "),f.xp6(3),f.hij(" ",f.lcZ(32,29,"Bill company")," "),f.xp6(3),f.hij(" ",f.lcZ(35,31,"Bill receiver")," "),f.xp6(3),f.Oqu(f.lcZ(38,33,"Actions")),f.xp6(3),f.Q6J("ngIf",0==e._relationslist.length),f.xp6(1),f.Q6J("ngIf",e._relationslist.length>0),f.xp6(1),f.Q6J("ngIf",e._relationslist.length>0)}}function ha(e,t){1&e&&(f.ynx(0),f.TgZ(1,"a",116),f._UZ(2,"img",117),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.BQk()),2&e&&(f.xp6(3),f.hij(" ",f.lcZ(4,1,"Processing"),""))}function ma(e,t){if(1&e&&(f.TgZ(0,"button",152),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e){f.oxw();const e=f.MAs(2);f.Q6J("disabled",!e.valid),f.xp6(1),f.hij(" ",f.lcZ(2,2,"Save")," ")}}function fa(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",153),f.NdJ("click",function(){return f.CHM(e),f.oxw(3)._clearContact()}),f._uU(1),f.ALo(2,"translate"),f.qZA()}2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Add new")," "))}function Za(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.qZA(),f.TgZ(9,"td"),f._uU(10),f.qZA(),f.TgZ(11,"td"),f.TgZ(12,"button",154),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw(3);return n.loadDetail1(t.id,n.entityContact.company_id)}),f._UZ(13,"i",69),f.qZA(),f.TgZ(14,"button",155),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return f.oxw(3).deleteItem0(t)}),f._UZ(15,"i",132),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=f.oxw(3);f.xp6(2),f.hij(" ",e.contact_code," "),f.xp6(2),f.hij(" ",e.contact_name," "),f.xp6(2),f.hij(" ",e.phone," "),f.xp6(2),f.Oqu(e.email),f.xp6(2),f.Oqu(e.note_l),f.xp6(2),f.Q6J("disabled",!n._authenService.hasPermission("CUSTOMER","update")),f.xp6(2),f.Q6J("disabled",!n._authenService.hasPermission("CUSTOMER","delete"))}}function xa(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"form",73,133),f.NdJ("ngSubmit",function(){return f.CHM(e),f.oxw(2).saveChange0()}),f.TgZ(3,"div",80),f.TgZ(4,"div",81),f.TgZ(5,"div",82),f.TgZ(6,"label",134),f._uU(7),f.ALo(8,"translate"),f.TgZ(9,"span",55),f._uU(10,"(*)"),f.qZA(),f.qZA(),f.TgZ(11,"input",135),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).entityContact.contact_name=t}),f.ALo(12,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(13,"div",81),f.TgZ(14,"div",82),f.TgZ(15,"label",136),f._uU(16),f.ALo(17,"translate"),f.qZA(),f.TgZ(18,"input",137),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).entityContact.contact_code=t}),f.ALo(19,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(20,"div",81),f.TgZ(21,"div",82),f.TgZ(22,"label",138),f._uU(23),f.ALo(24,"translate"),f.TgZ(25,"span",55),f._uU(26,"(*)"),f.qZA(),f.qZA(),f.TgZ(27,"input",139),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).entityContact.phone=t}),f.ALo(28,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(29,"div",81),f.TgZ(30,"div",82),f.TgZ(31,"label",140),f._uU(32,"Email"),f.qZA(),f.TgZ(33,"input",141),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).entityContact.email=t}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(34,"div",81),f.TgZ(35,"div",82),f.TgZ(36,"label",142),f._uU(37),f.ALo(38,"translate"),f.ALo(39,"translate"),f.qZA(),f.TgZ(40,"textarea",143),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).entityContact.note_l=t}),f.ALo(41,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(42,"div",81),f.TgZ(43,"div",82),f.TgZ(44,"label",144),f._uU(45),f.ALo(46,"translate"),f.ALo(47,"translate"),f.qZA(),f.TgZ(48,"textarea",145),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).entityContact.note_e=t}),f.ALo(49,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(50,"div",81),f.TgZ(51,"div",82),f.TgZ(52,"label",108),f._uU(53),f.ALo(54,"translate"),f.qZA(),f.TgZ(55,"div",90),f.TgZ(56,"input",146),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2)._status=t}),f.qZA(),f._UZ(57,"label",108),f.qZA(),f.qZA(),f.qZA(),f.TgZ(58,"div",81),f.TgZ(59,"div",82),f.YNc(60,ha,5,3,"ng-container",39),f.YNc(61,ma,3,4,"button",147),f.YNc(62,fa,3,3,"button",148),f.qZA(),f.qZA(),f.TgZ(63,"div",92),f.TgZ(64,"div",82),f.TgZ(65,"input",149),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2)._keyword1=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t.loadDataContact(t.entityContact.company_id)})("keyup.enter",function(){f.CHM(e);const t=f.oxw(2);return t.loadDataContact(t.entityContact.company_id)}),f.ALo(66,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(67,"div",92),f.TgZ(68,"div",127),f.TgZ(69,"pagination",150),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).pageIndex1=t})("pageChanged",function(t){return f.CHM(e),f.oxw(2).pageChanged1(t)}),f.qZA(),f.TgZ(70,"a",31),f._uU(71),f.ALo(72,"translate"),f.ALo(73,"translate"),f.ALo(74,"translate"),f.ALo(75,"translate"),f.qZA(),f.qZA(),f.TgZ(76,"div",151),f.TgZ(77,"table",33),f.TgZ(78,"thead",34),f.TgZ(79,"tr"),f.TgZ(80,"th",36),f._uU(81),f.ALo(82,"translate"),f.qZA(),f.TgZ(83,"th",36),f._uU(84),f.ALo(85,"translate"),f.qZA(),f.TgZ(86,"th",36),f._uU(87),f.ALo(88,"translate"),f.qZA(),f.TgZ(89,"th",36),f._uU(90,"Email"),f.qZA(),f.TgZ(91,"th",36),f._uU(92),f.ALo(93,"translate"),f.qZA(),f.TgZ(94,"th",36),f._uU(95),f.ALo(96,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(97,"tbody"),f.YNc(98,Za,16,7,"tr",56),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(2);f.xp6(7),f.hij("",f.lcZ(8,45,"Customer name")," "),f.xp6(4),f.Q6J("placeholder",f.lcZ(12,47,"Customer name"))("ngModel",e.entityContact.contact_name),f.xp6(5),f.Oqu(f.lcZ(17,49,"Customer code")),f.xp6(2),f.Q6J("placeholder",f.lcZ(19,51,"Customer code"))("ngModel",e.entityContact.contact_code)("disabled",!0),f.xp6(5),f.hij("",f.lcZ(24,53,"Phone")," "),f.xp6(4),f.Q6J("placeholder",f.lcZ(28,55,"Phone"))("ngModel",e.entityContact.phone),f.xp6(6),f.Q6J("placeholder","abc@company.com")("ngModel",e.entityContact.email),f.xp6(4),f.AsE("",f.lcZ(38,57,"Note")," (",f.lcZ(39,59,"Vietnamese"),")"),f.xp6(3),f.s9C("placeholder",f.lcZ(41,61,"Note")),f.Q6J("ngModel",e.entityContact.note_l),f.xp6(5),f.AsE("",f.lcZ(46,63,"Note")," (",f.lcZ(47,65,"English"),")"),f.xp6(3),f.s9C("placeholder",f.lcZ(49,67,"Note")),f.Q6J("ngModel",e.entityContact.note_e),f.xp6(5),f.Oqu(f.lcZ(54,69,"Status")),f.xp6(3),f.Q6J("ngModel",e._status),f.xp6(4),f.Q6J("ngIf",e.isSave1),f.xp6(1),f.Q6J("ngIf",!e.isSave1),f.xp6(1),f.Q6J("ngIf","UPDATE"==e._flagModal1),f.xp6(3),f.s9C("placeholder",f.lcZ(66,71,"Search")),f.Q6J("ngModel",e._keyword1),f.xp6(4),f.Q6J("boundaryLinks",!0)("totalItems",e.totalRow1)("ngModel",e.pageIndex1)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize1),f.xp6(2),f.Q0o("",f.lcZ(72,73,"Total of records"),": ",e.totalRow1," - ",f.lcZ(73,75,"Page")," ",e.pageIndex1," ",f.lcZ(74,77,"of")," ",e.totalPage1," ",f.lcZ(75,79,"page"),""),f.xp6(10),f.hij(" ",f.lcZ(82,81,"Customer code")," "),f.xp6(3),f.hij(" ",f.lcZ(85,83,"Customer name")," "),f.xp6(3),f.hij(" ",f.lcZ(88,85,"Phone")," "),f.xp6(5),f.hij(" ",f.lcZ(93,87,"Note")," "),f.xp6(3),f.hij(" ",f.lcZ(96,89,"Actions")," "),f.xp6(3),f.Q6J("ngForOf",e._contacts)}}function Aa(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"form",null,156),f.TgZ(3,"div",80),f.TgZ(4,"div",92),f.TgZ(5,"div",82),f.TgZ(6,"label",157),f._uU(7),f.ALo(8,"translate"),f.TgZ(9,"span",55),f._uU(10,"(*)"),f.qZA(),f.qZA(),f.TgZ(11,"textarea",158),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).entityLinkC.code_link=t}),f.ALo(12,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(13,"div",81),f.TgZ(14,"div",82),f.TgZ(15,"label",159),f._uU(16),f.ALo(17,"translate"),f.TgZ(18,"span",55),f._uU(19,"(*)"),f.qZA(),f._uU(20),f.ALo(21,"translate"),f.qZA(),f.TgZ(22,"ng-select",160),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).selectedCompany=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._changeCompanyInfo("cty",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),f.ALo(23,"translate"),f.ALo(24,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(25,"div",81),f.TgZ(26,"div",82),f.TgZ(27,"label",159),f._uU(28),f.ALo(29,"translate"),f.TgZ(30,"span",55),f._uU(31,"(*)"),f.qZA(),f._uU(32),f.ALo(33,"translate"),f.qZA(),f.TgZ(34,"ng-select",161),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).selectedSender=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._changeCompanyInfo("lh",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),f.ALo(35,"translate"),f.ALo(36,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(37,"div",81),f.TgZ(38,"div",82),f.TgZ(39,"label"),f._uU(40),f.ALo(41,"translate"),f.TgZ(42,"span",55),f._uU(43,"(*)"),f.qZA(),f._uU(44),f.ALo(45,"translate"),f.qZA(),f.TgZ(46,"ng-select",162),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).selectedCompanyKQ=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._changeCompanyInfo("kq",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),f.ALo(47,"translate"),f.ALo(48,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(49,"div",81),f.TgZ(50,"div",82),f.TgZ(51,"label"),f._uU(52),f.ALo(53,"translate"),f.TgZ(54,"span",55),f._uU(55,"(*)"),f.qZA(),f._uU(56),f.ALo(57,"translate"),f.qZA(),f.TgZ(58,"ng-select",163),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).selectedSenderKQ=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._changeCompanyInfo("lhkq",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),f.ALo(59,"translate"),f.ALo(60,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(61,"div",81),f.TgZ(62,"div",82),f.TgZ(63,"label"),f._uU(64),f.ALo(65,"translate"),f.TgZ(66,"span",55),f._uU(67,"(*)"),f.qZA(),f._uU(68),f.ALo(69,"translate"),f.qZA(),f.TgZ(70,"ng-select",164),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).selectedCompanyBill=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._changeCompanyInfo("bill",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),f.ALo(71,"translate"),f.ALo(72,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(73,"div",81),f.TgZ(74,"div",82),f.TgZ(75,"label"),f._uU(76),f.ALo(77,"translate"),f.TgZ(78,"span",55),f._uU(79,"(*)"),f.qZA(),f._uU(80),f.ALo(81,"translate"),f.qZA(),f.TgZ(82,"ng-select",165),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).selectedSenderBill=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._changeCompanyInfo("lhbill",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),f.ALo(83,"translate"),f.ALo(84,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(2);f.xp6(7),f.hij("",f.lcZ(8,58,"Code")," "),f.xp6(4),f.Q6J("placeholder",f.lcZ(12,60,"Code"))("ngModel",e.entityLinkC.code_link)("disabled",!0),f.xp6(5),f.hij("",f.lcZ(17,62,"Customer")," "),f.xp6(4),f.hij(" - ",f.lcZ(21,64,"Information"),""),f.xp6(2),f.Q6J("items",e._getlistcompany)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCompany)("placeholder",f.lcZ(23,66,"Please choose"))("notFoundText",f.lcZ(24,68,"Not found item")),f.xp6(6),f.hij("",f.lcZ(29,70,"Contact")," "),f.xp6(4),f.hij(" - ",f.lcZ(33,72,"Sender"),""),f.xp6(2),f.Q6J("items",e._getlistsender)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSender)("placeholder",f.lcZ(35,74,"Please choose"))("notFoundText",f.lcZ(36,76,"Not found item")),f.xp6(6),f.hij("",f.lcZ(41,78,"Customer")," "),f.xp6(4),f.hij(" - ",f.lcZ(45,80,"Received company"),""),f.xp6(2),f.Q6J("items",e._getlistcompanyKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCompanyKQ)("placeholder",f.lcZ(47,82,"Please choose"))("notFoundText",f.lcZ(48,84,"Not found item")),f.xp6(6),f.hij("",f.lcZ(53,86,"Contact")," "),f.xp6(4),f.hij(" - ",f.lcZ(57,88,"Received company"),""),f.xp6(2),f.Q6J("items",e._getlistsenderKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSenderKQ)("placeholder",f.lcZ(59,90,"Please choose"))("notFoundText",f.lcZ(60,92,"Not found item")),f.xp6(6),f.hij("",f.lcZ(65,94,"Customer")," "),f.xp6(4),f.hij(" - ",f.lcZ(69,96,"Bill company"),""),f.xp6(2),f.Q6J("items",e._getlistcompanyBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCompanyBill)("placeholder",f.lcZ(71,98,"Please choose"))("notFoundText",f.lcZ(72,100,"Not found item")),f.xp6(6),f.hij("",f.lcZ(77,102,"Contact")," "),f.xp6(4),f.hij(" - ",f.lcZ(81,104,"Bill company"),""),f.xp6(2),f.Q6J("items",e._getlistsenderBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSenderBill)("placeholder",f.lcZ(83,106,"Please choose"))("notFoundText",f.lcZ(84,108,"Not found item"))}}function ba(e,t){1&e&&(f.ynx(0),f.TgZ(1,"a",116),f._UZ(2,"img",117),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.BQk()),2&e&&(f.xp6(3),f.hij(" ",f.lcZ(4,1,"Processing"),""))}function Ta(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",168),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(3);return t.saveChangeLink(t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),f._uU(1),f.ALo(2,"translate"),f.qZA()}2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Save & close")," "))}function ya(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",112),f.TgZ(1,"button",166),f.NdJ("click",function(){return f.CHM(e),f.oxw(2).closeModal()}),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.TgZ(4,"button",153),f.NdJ("click",function(){return f.CHM(e),f.oxw(2)._switchLinkList()}),f._uU(5),f.ALo(6,"translate"),f.qZA(),f.YNc(7,ba,5,3,"ng-container",39),f.YNc(8,Ta,3,3,"button",167),f.qZA()}if(2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,4,"Close")," "),f.xp6(3),f.hij(" ",f.lcZ(6,6,"Relationship")," "),f.xp6(2),f.Q6J("ngIf",e.isSave),f.xp6(1),f.Q6J("ngIf",!e.isSave)}}function qa(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",75),f.YNc(1,la,3,3,"h4",119),f.YNc(2,ra,3,4,"h4",119),f.YNc(3,sa,4,6,"h4",119),f.TgZ(4,"button",77),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(5,"span",78),f._uU(6,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(7,"div",79),f.YNc(8,_a,43,35,"div",120),f.YNc(9,xa,99,91,"ng-container",39),f.YNc(10,Aa,85,110,"ng-container",39),f.qZA(),f.YNc(11,ya,9,8,"div",121)}if(2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngIf","LIST"==e._flagModal1),f.xp6(1),f.Q6J("ngIf","ADD"==e._flagModal1||"UPDATE"==e._flagModal1),f.xp6(1),f.Q6J("ngIf","ADDREL"==e._flagModal1||"UPDATEREL"==e._flagModal1),f.xp6(5),f.Q6J("ngIf","LIST"==e._flagModal1),f.xp6(1),f.Q6J("ngIf","ADD"==e._flagModal1||"UPDATE"==e._flagModal1),f.xp6(1),f.Q6J("ngIf","ADDREL"==e._flagModal1||"UPDATEREL"==e._flagModal1),f.xp6(1),f.Q6J("ngIf","ADDREL"==e._flagModal1||"UPDATEREL"==e._flagModal1)}}function va(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"ng-select",171),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).selectedCustomer1=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t.exportList.length>0?t._copyAll(t.exportList,t.selectedCustomer1):t._copyRequest(t.selectedCustomer1)}),f.ALo(2,"translate"),f.ALo(3,"translate"),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(2);f.xp6(1),f.Q6J("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCustomer1)("placeholder",f.lcZ(2,7,"Please choose"))("notFoundText",f.lcZ(3,9,"Not found item"))}}function Ma(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"ng-select",171),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).selectedCustomer1=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._copyTemplate(t._idTemplate,t.selectedCustomer1)}),f.ALo(2,"translate"),f.ALo(3,"translate"),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(2);f.xp6(1),f.Q6J("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCustomer1)("placeholder",f.lcZ(2,7,"Please choose"))("notFoundText",f.lcZ(3,9,"Not found item"))}}function Sa(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",169),f.TgZ(1,"div",75),f.TgZ(2,"h4",76),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"button",77),f.NdJ("click",function(){return f.CHM(e).$implicit.dismiss("Cross click")}),f.TgZ(6,"span",78),f._uU(7,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"div",79),f.TgZ(9,"div",80),f.TgZ(10,"div",92),f.TgZ(11,"div",82),f.TgZ(12,"label",170),f._uU(13),f.ALo(14,"translate"),f.qZA(),f.YNc(15,va,4,11,"ng-container",39),f.YNc(16,Ma,4,11,"ng-container",39),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(3),f.AsE("",f.lcZ(4,5,"Copy")," - ",e._titleCopy,""),f.xp6(10),f.Oqu(f.lcZ(14,7,"Company")),f.xp6(2),f.Q6J("ngIf",!e._flagChooseTemplate),f.xp6(1),f.Q6J("ngIf",e._flagChooseTemplate)}}function Ca(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",179),f.NdJ("click",function(){return f.CHM(e),f.oxw(2)._exportAllRangeWithStatusA()}),f._uU(1),f.ALo(2,"translate"),f.qZA()}2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Submit")))}function wa(e,t){1&e&&(f.TgZ(0,"a",180),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.hij("",f.lcZ(2,1,"Loading"),"..."))}const La=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};function Ua(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",169),f.TgZ(1,"div",75),f.TgZ(2,"h4",76),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"button",77),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(6,"span",78),f._uU(7,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"div",79),f.TgZ(9,"div",80),f.TgZ(10,"div",81),f.TgZ(11,"label",172),f._uU(12),f.ALo(13,"translate"),f.qZA(),f.TgZ(14,"input",173),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw()._fDate=t})("bsValueChange",function(t){return f.CHM(e),f.oxw().changeFromDate(t)})("keypress",function(t){return f.CHM(e),f.oxw().changeFromDate(t)}),f.qZA(),f.qZA(),f.TgZ(15,"div",81),f.TgZ(16,"label",174),f._uU(17),f.ALo(18,"translate"),f.qZA(),f.TgZ(19,"input",175),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw()._tDate=t})("bsValueChange",function(t){return f.CHM(e),f.oxw().changeToDate(t)})("keypress",function(t){return f.CHM(e),f.oxw().changeToDate(t)}),f.qZA(),f.qZA(),f.TgZ(20,"div",176),f.TgZ(21,"div",82),f._UZ(22,"br"),f.YNc(23,Ca,3,3,"a",177),f.YNc(24,wa,3,3,"a",178),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(3),f.Oqu(f.lcZ(4,9,"Export")),f.xp6(9),f.Oqu(f.lcZ(13,11,"From date")),f.xp6(2),f.Q6J("ngModel",e._fDate)("bsConfig",f.DdM(15,La)),f.xp6(3),f.Oqu(f.lcZ(18,13,"To date")),f.xp6(2),f.Q6J("ngModel",e._tDate)("bsConfig",f.DdM(16,La)),f.xp6(4),f.Q6J("ngIf",!e.isExportLoading),f.xp6(1),f.Q6J("ngIf",e.isExportLoading)}}function Na(e,t){1&e&&f._UZ(0,"img",189)}function Da(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",26),f.TgZ(1,"div",27),f.TgZ(2,"div",28),f.TgZ(3,"pagination",29),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).pageIndex1=t})("pageChanged",function(t){return f.CHM(e),f.oxw(2).pageChangedTemplate(t)}),f.qZA(),f.qZA(),f.TgZ(4,"div",30),f.TgZ(5,"a",31),f._uU(6),f.ALo(7,"translate"),f.ALo(8,"translate"),f.ALo(9,"translate"),f.ALo(10,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw(2);f.xp6(3),f.Q6J("boundaryLinks",!0)("totalItems",e.totalRow1)("ngModel",e.pageIndex1)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize1),f.xp6(3),f.Q0o("",f.lcZ(7,12,"Total of records"),": ",e.totalRow1," - ",f.lcZ(8,14,"Page")," ",e.pageIndex1," ",f.lcZ(9,16,"of")," ",e.totalPage1," ",f.lcZ(10,18,"page"),"")}}function ka(e,t){1&e&&(f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td",190),f.TgZ(3,"h4",55),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.qZA(),f.qZA(),f.BQk()),2&e&&(f.xp6(4),f.hij(" ",f.lcZ(5,1,"No records now!!!")," "))}function Ia(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.qZA(),f.TgZ(9,"td"),f._uU(10),f.ALo(11,"number"),f.qZA(),f.TgZ(12,"td"),f._uU(13),f.ALo(14,"date"),f.qZA(),f.TgZ(15,"td"),f.TgZ(16,"button",191),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw(3),a=f.MAs(118);return n.popupTemplateModal(a,t)}),f.ALo(17,"translate"),f._UZ(18,"i",192),f.qZA(),f.TgZ(19,"button",193),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw(3),a=f.MAs(112);return n._popupCopyTemplate(a,t)}),f.ALo(20,"translate"),f._UZ(21,"i",50),f.qZA(),f.TgZ(22,"button",194),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return f.oxw(3).deleteItemTemplate(t)}),f.ALo(23,"translate"),f._UZ(24,"i",132),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(3);f.xp6(2),f.Oqu(n+1+a.pageSize1*(a.pageIndex1-1)),f.xp6(2),f.Oqu(e.name),f.xp6(2),f.Oqu(e.number_sample),f.xp6(2),f.Oqu(e.total_parameters),f.xp6(2),f.Oqu(f.lcZ(11,9,e.total)),f.xp6(3),f.Oqu(f.xi3(14,11,e.timestamp,"dd/MM/YYYY HH:mm:ss a")),f.xp6(3),f.Q6J("ngbTooltip",f.lcZ(17,14,"Edit")),f.xp6(3),f.Q6J("ngbTooltip",f.lcZ(20,16,"Copy")),f.xp6(3),f.Q6J("ngbTooltip",f.lcZ(23,18,"Delete"))}}function Ya(e,t){if(1&e&&(f.ynx(0),f.YNc(1,Ia,25,20,"tr",56),f.BQk()),2&e){const e=f.oxw(2);f.xp6(1),f.Q6J("ngForOf",e._templatelist)}}function Ja(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",169),f.TgZ(1,"div",75),f.TgZ(2,"h4",76),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"button",77),f.NdJ("click",function(){return f.CHM(e),f.oxw().closeModal()}),f.TgZ(6,"span",78),f._uU(7,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"div",79),f.TgZ(9,"div",80),f.TgZ(10,"div",181),f.TgZ(11,"div",182),f.TgZ(12,"input",183),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw()._keyword1=t})("keyup.enter",function(){return f.CHM(e),f.oxw().loadTemplateList()})("change",function(){return f.CHM(e),f.oxw().loadTemplateList()}),f.ALo(13,"translate"),f.qZA(),f.TgZ(14,"button",184),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(),n=f.MAs(118);return t.popupTemplateModal(n,null)}),f._uU(15),f.ALo(16,"translate"),f.qZA(),f.YNc(17,Na,1,0,"img",185),f.qZA(),f.qZA(),f.TgZ(18,"div",86),f.TgZ(19,"div",82),f.TgZ(20,"div",14),f.TgZ(21,"select",186),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().pageSize1=t})("change",function(t){return f.CHM(e),f.oxw()._pageSizeChangeTemplate(t)}),f.TgZ(22,"option",16),f._uU(23,"#10"),f.qZA(),f.TgZ(24,"option",17),f._uU(25,"#25"),f.qZA(),f.TgZ(26,"option",18),f._uU(27,"#50"),f.qZA(),f.TgZ(28,"option",19),f._uU(29,"#100"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(30,"div",92),f.TgZ(31,"div",32),f.YNc(32,Da,11,20,"div",187),f.TgZ(33,"table",33),f.TgZ(34,"thead",34),f.TgZ(35,"tr"),f.TgZ(36,"th",188),f._uU(37,"#"),f.qZA(),f.TgZ(38,"th",36),f._uU(39),f.ALo(40,"translate"),f.qZA(),f.TgZ(41,"th",36),f._uU(42),f.ALo(43,"translate"),f.qZA(),f.TgZ(44,"th",36),f._uU(45),f.ALo(46,"translate"),f.qZA(),f.TgZ(47,"th",36),f._uU(48),f.ALo(49,"translate"),f.qZA(),f.TgZ(50,"th",36),f._uU(51),f.ALo(52,"translate"),f.qZA(),f.TgZ(53,"th",36),f._uU(54),f.ALo(55,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(56,"tbody"),f.YNc(57,ka,6,3,"ng-container",39),f.YNc(58,Ya,2,1,"ng-container",39),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(3),f.Oqu(f.lcZ(4,15,"Request template")),f.xp6(9),f.MGl("placeholder","",f.lcZ(13,17,"Search"),"..."),f.Q6J("ngModel",e._keyword1),f.xp6(3),f.hij(" ",f.lcZ(16,19,"Add new")," "),f.xp6(2),f.Q6J("ngIf",e.isLoadingTemplate),f.xp6(4),f.Q6J("ngModel",e.pageSize1),f.xp6(11),f.Q6J("ngIf",e._templatelist.length>0),f.xp6(7),f.hij(" ",f.lcZ(40,21,"Name")," "),f.xp6(3),f.hij(" ",f.lcZ(43,23,"Total of sample")," "),f.xp6(3),f.hij(" ",f.lcZ(46,25,"Total of parameter")," "),f.xp6(3),f.hij(" ",f.lcZ(49,27,"Total")," "),f.xp6(3),f.hij(" ",f.lcZ(52,29,"Timestamp")," "),f.xp6(3),f.Oqu(f.lcZ(55,31,"Actions")),f.xp6(3),f.Q6J("ngIf",0==e._templatelist.length),f.xp6(1),f.Q6J("ngIf",e._templatelist.length>0)}}function Oa(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"button",218),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return f.oxw(2)._chooseTab(t)}),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.BQk()}if(2&e){const e=t.$implicit,n=f.oxw(2);f.xp6(1),f.Q6J("ngClass",n._currentTabActivated==e.id?"btn btn-sm btn-warning":"btn btn-sm btn-secondary"),f.xp6(1),f.AsE(" ",f.lcZ(3,3,"Sample")," ",e.id," ")}}function Qa(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"a",219),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2);return t._removeTab(t._currentTabActivated)}),f._uU(1,"X"),f.qZA()}}function Pa(e,t){if(1&e&&(f.TgZ(0,"div",220),f._uU(1),f.ALo(2,"slice"),f.qZA()),2&e){const e=t.item;f.Q6J("ngbTooltip",e.name.length>25?e.name:""),f.xp6(1),f.hij(" ",e.name.length>25?f.Dn7(2,2,e.name,0,20)+"..":e.name," ")}}function Ea(e,t){if(1&e&&(f.TgZ(0,"div",220),f._uU(1),f.ALo(2,"slice"),f.qZA()),2&e){const e=t.item;f.Q6J("ngbTooltip",e.name.length>25?e.name:""),f.xp6(1),f.hij(" ",e.name.length>25?f.Dn7(2,2,e.name,0,20)+"..":e.name," ")}}function Ra(e,t){if(1&e&&(f.TgZ(0,"div",220),f._uU(1),f.ALo(2,"slice"),f.qZA()),2&e){const e=t.item;f.Q6J("ngbTooltip",e.name.length>25?e.name:""),f.xp6(1),f.hij(" ",e.name.length>25?f.Dn7(2,2,e.name,0,20)+"..":e.name," ")}}function Fa(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"td",216),f._uU(2),f.qZA(),f.TgZ(3,"td",216),f.TgZ(4,"a",221),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return f.oxw(2)._removeItemTemplate(t)}),f._UZ(5,"i",132),f.qZA(),f.qZA(),f.TgZ(6,"td",217),f.TgZ(7,"span",222),f._uU(8),f.qZA(),f.qZA(),f.TgZ(9,"td",217),f._uU(10),f.qZA(),f.TgZ(11,"td",217),f._uU(12),f.qZA(),f.TgZ(13,"td",217),f._uU(14),f.qZA(),f.TgZ(15,"td",216),f.TgZ(16,"input",223),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.quantity=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)}),f.qZA(),f.qZA(),f.TgZ(17,"td",217),f._uU(18),f.qZA(),f.TgZ(19,"td",216),f.TgZ(20,"input",224),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.price=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)}),f.qZA(),f.qZA(),f.TgZ(21,"td",216),f.TgZ(22,"input",225),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.discount=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)}),f.qZA(),f.qZA(),f.TgZ(23,"td",216),f._uU(24),f.ALo(25,"number"),f.qZA(),f.TgZ(26,"td",216),f.TgZ(27,"input",226),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.priority=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)}),f.qZA(),f.qZA(),f.TgZ(28,"td",216),f.TgZ(29,"input",226),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.tat=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)}),f.qZA(),f.qZA(),f.TgZ(30,"td",216),f.TgZ(31,"input",226),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.order_no=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)}),f.qZA(),f.qZA(),f.TgZ(32,"td",216),f.TgZ(33,"input",227),f.NdJ("ngModelChange",function(t){return f.CHM(e).$implicit.hide=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t._updateItemTemplate(t._orderdetailists)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(2),f.Oqu(n+1),f.xp6(5),f.Q6J("ngClass",null==e.code_father?"text-bold text-default":"text-warning"),f.xp6(1),f.Oqu(e.code),f.xp6(2),f.hij(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),f.xp6(2),f.Oqu(e.method),f.xp6(2),f.Oqu(e.lod),f.xp6(2),f.MGl("name","qty",n+1,""),f.Q6J("ngModel",e.quantity),f.xp6(2),f.hij(" ",e.unit," "),f.xp6(2),f.MGl("name","p",n+1,""),f.Q6J("ngModel",e.price),f.xp6(2),f.MGl("name","gg",n+1,""),f.Q6J("ngModel",e.discount),f.xp6(2),f.hij(" ",f.lcZ(25,22,e.amount)," "),f.xp6(3),f.MGl("name","pri",n+1,""),f.Q6J("ngModel",e.priority),f.xp6(2),f.MGl("name","ta",n+1,""),f.Q6J("ngModel",e.tat),f.xp6(2),f.MGl("name","odd",n+1,""),f.Q6J("ngModel",e.order_no),f.xp6(2),f.MGl("name","hid",n+1,""),f.Q6J("ngModel",e.hide)}}function Ha(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",169),f.TgZ(1,"div",75),f.TgZ(2,"h4",76),f._uU(3),f.ALo(4,"translate"),f.ALo(5,"translate"),f.qZA(),f.TgZ(6,"button",77),f.NdJ("click",function(){return f.CHM(e).$implicit.dismiss("Cross click")}),f.TgZ(7,"span",78),f._uU(8,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(9,"div",79),f.TgZ(10,"div",80),f.TgZ(11,"div",195),f.TgZ(12,"label",196),f._uU(13),f.ALo(14,"translate"),f.qZA(),f.TgZ(15,"input",197),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entityTemplate.name=t})("change",function(){return f.CHM(e),f.oxw().saveChangeSample()}),f.qZA(),f.qZA(),f.TgZ(16,"div",86),f.TgZ(17,"label",198),f._uU(18),f.ALo(19,"translate"),f.qZA(),f.TgZ(20,"input",199),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entityTemplate.number_sample=t})("keyup.enter",function(){f.CHM(e);const t=f.oxw();return t._changeSample(t.entityTemplate.number_sample)})("change",function(){f.CHM(e);const t=f.oxw();return t._changeSample(t.entityTemplate.number_sample)}),f.qZA(),f.qZA(),f.TgZ(21,"div",124),f.TgZ(22,"label"),f._uU(23),f.ALo(24,"translate"),f.qZA(),f.TgZ(25,"input",200),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entityTemplate.total=t}),f.qZA(),f.qZA(),f.TgZ(26,"div",92),f._UZ(27,"hr"),f.TgZ(28,"div",1),f.TgZ(29,"div",201),f.TgZ(30,"div",202),f.YNc(31,Oa,4,5,"ng-container",56),f.qZA(),f.qZA(),f.TgZ(32,"div",203),f.YNc(33,Qa,2,0,"a",204),f.qZA(),f.qZA(),f.qZA(),f.TgZ(34,"div",81),f.TgZ(35,"label",205),f.TgZ(36,"strong"),f._uU(37),f.ALo(38,"translate"),f.qZA(),f.qZA(),f.TgZ(39,"input",206),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entitySample.sample_name=t})("keyup.enter",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)}),f.ALo(40,"translate"),f.ALo(41,"translate"),f.qZA(),f.TgZ(42,"input",206),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entitySample.sample_name_e=t})("keyup.enter",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)}),f.ALo(43,"translate"),f.ALo(44,"translate"),f.qZA(),f.qZA(),f.TgZ(45,"div",81),f.TgZ(46,"label",205),f.TgZ(47,"strong"),f._uU(48),f.ALo(49,"translate"),f.ALo(50,"translate"),f.qZA(),f.qZA(),f.TgZ(51,"input",206),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entitySample.description=t})("keyup.enter",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)}),f.ALo(52,"translate"),f.ALo(53,"translate"),f.qZA(),f.TgZ(54,"input",206),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entitySample.description_e=t})("keyup.enter",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)}),f.ALo(55,"translate"),f.ALo(56,"translate"),f.qZA(),f.qZA(),f.TgZ(57,"div",81),f.TgZ(58,"label",205),f.TgZ(59,"strong"),f._uU(60),f.ALo(61,"translate"),f.qZA(),f.qZA(),f.TgZ(62,"textarea",207),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entitySample.note=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)}),f.ALo(63,"translate"),f.qZA(),f.qZA(),f.TgZ(64,"div",86),f.TgZ(65,"label",205),f.TgZ(66,"strong"),f._uU(67),f.ALo(68,"translate"),f.qZA(),f.qZA(),f.TgZ(69,"input",208),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entitySample.weight=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)})("keypress.enter",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)}),f.ALo(70,"translate"),f.qZA(),f.qZA(),f.TgZ(71,"div",86),f.TgZ(72,"label",205),f.TgZ(73,"strong"),f._uU(74),f.ALo(75,"translate"),f.qZA(),f.qZA(),f.TgZ(76,"ng-select",209),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entitySample.sample_nature_id=t})("change",function(){f.CHM(e);const t=f.oxw();return t._updateSample(t.entitySample)}),f.ALo(77,"translate"),f.ALo(78,"translate"),f.YNc(79,Pa,3,6,"ng-template",210),f.qZA(),f.qZA(),f.TgZ(80,"div",81),f.TgZ(81,"label",205),f.TgZ(82,"strong"),f._uU(83),f.ALo(84,"translate"),f.qZA(),f.qZA(),f.TgZ(85,"ng-select",211),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().selectedCategory0=t})("change",function(){return f.CHM(e),f.oxw().changeCategoryMatrix()}),f.ALo(86,"translate"),f.ALo(87,"translate"),f.YNc(88,Ea,3,6,"ng-template",210),f.qZA(),f.qZA(),f.TgZ(89,"div",81),f.TgZ(90,"label",205),f.TgZ(91,"strong"),f._uU(92),f.ALo(93,"translate"),f.qZA(),f.qZA(),f.TgZ(94,"ng-select",212),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().selectedSpecification0=t})("change",function(){f.CHM(e);const t=f.oxw();return t.changeSpecification(t.entitySample,t.selectedCategory0)}),f.YNc(95,Ra,3,6,"ng-template",210),f.qZA(),f.qZA(),f.TgZ(96,"div",92),f._UZ(97,"br"),f.TgZ(98,"div",213),f.TgZ(99,"table",214),f.TgZ(100,"thead"),f.TgZ(101,"tr"),f.TgZ(102,"th",215),f._uU(103),f.ALo(104,"translate"),f.ALo(105,"number"),f.qZA(),f.qZA(),f.TgZ(106,"tr"),f.TgZ(107,"th",216),f._uU(108,"#"),f.qZA(),f.TgZ(109,"th",216),f._UZ(110,"i",132),f.qZA(),f.TgZ(111,"th",216),f._uU(112),f.ALo(113,"translate"),f.qZA(),f.TgZ(114,"th",216),f._uU(115),f.ALo(116,"translate"),f.qZA(),f.TgZ(117,"th",216),f._uU(118),f.ALo(119,"translate"),f.qZA(),f.TgZ(120,"th",216),f._uU(121,"LOD"),f.qZA(),f.TgZ(122,"th",217),f._uU(123),f.ALo(124,"translate"),f.qZA(),f.TgZ(125,"th",217),f._uU(126),f.ALo(127,"translate"),f.qZA(),f.TgZ(128,"th",216),f._uU(129),f.ALo(130,"translate"),f.qZA(),f.TgZ(131,"th",217),f._uU(132),f.ALo(133,"translate"),f.qZA(),f.TgZ(134,"th",216),f._uU(135),f.ALo(136,"translate"),f.qZA(),f.TgZ(137,"th",217),f._uU(138),f.ALo(139,"translate"),f.qZA(),f.TgZ(140,"th",217),f._uU(141),f.ALo(142,"translate"),f.qZA(),f.TgZ(143,"th",217),f._uU(144),f.ALo(145,"translate"),f.qZA(),f.TgZ(146,"th",217),f._uU(147),f.ALo(148,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(149,"tbody"),f.YNc(150,Fa,34,24,"tr",56),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(3),f.AsE(" ",f.lcZ(4,89,"Add new"),"/ ",f.lcZ(5,91,"Update")," "),f.xp6(10),f.Oqu(f.lcZ(14,93,"Name")),f.xp6(2),f.Q6J("ngModel",e.entityTemplate.name),f.xp6(3),f.Oqu(f.lcZ(19,95,"Number of sample")),f.xp6(2),f.Q6J("ngModel",e.entityTemplate.number_sample),f.xp6(3),f.Oqu(f.lcZ(24,97,"Total")),f.xp6(2),f.Q6J("ngModel",e.entityTemplate.total),f.xp6(6),f.Q6J("ngForOf",e._samples),f.xp6(2),f.Q6J("ngIf",e._samples.length>1),f.xp6(2),f.MGl("for","sample_name",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(38,99,"Sample name")),f.xp6(2),f.MGl("id","sample_name",e._currentTabActivated,""),f.MGl("name","sample_name",e._currentTabActivated,""),f.Q6J("ngModel",e.entitySample.sample_name)("placeholder",f.lcZ(40,101,"Sample name")+" "+e._currentTabActivated+" ("+f.lcZ(41,103,"Vietnamese")+")"),f.xp6(3),f.MGl("id","sample_namee",e._currentTabActivated,""),f.MGl("name","sample_namee",e._currentTabActivated,""),f.Q6J("ngModel",e.entitySample.sample_name_e)("placeholder",f.lcZ(43,105,"Sample name")+" "+e._currentTabActivated+" ("+f.lcZ(44,107,"English")+")"),f.xp6(4),f.MGl("for","description",e._currentTabActivated,""),f.xp6(2),f.AsE("",f.lcZ(49,109,"Description")," (",f.lcZ(50,111,"State of sample"),")"),f.xp6(3),f.MGl("id","description",e._currentTabActivated,""),f.MGl("name","description",e._currentTabActivated,""),f.Q6J("ngModel",e.entitySample.description)("placeholder",f.lcZ(52,113,"Description")+" "+e._currentTabActivated+" ("+f.lcZ(53,115,"Vietnamese")+")"),f.xp6(3),f.MGl("id","descriptione",e._currentTabActivated,""),f.MGl("name","descriptione",e._currentTabActivated,""),f.Q6J("ngModel",e.entitySample.description_e)("placeholder",f.lcZ(55,117,"Description")+" "+e._currentTabActivated+" ("+f.lcZ(56,119,"English")+")"),f.xp6(4),f.MGl("for","note",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(61,121,"Note")),f.xp6(2),f.MGl("id","note",e._currentTabActivated,""),f.MGl("name","note",e._currentTabActivated,""),f.Q6J("placeholder",f.lcZ(63,123,"Note")+" "+e._currentTabActivated)("ngModel",e.entitySample.note),f.xp6(3),f.MGl("for","weight",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(68,125,"Weight")),f.xp6(2),f.MGl("id","weight",e._currentTabActivated,""),f.MGl("name","weight",e._currentTabActivated,""),f.Q6J("placeholder",f.lcZ(70,127,"Weight")+" "+e._currentTabActivated)("ngModel",e.entitySample.weight),f.xp6(3),f.MGl("for","_samplenatures",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(75,129,"Sample nature")),f.xp6(2),f.Tol("ajustar"),f.MGl("name","_samplenatures",e._currentTabActivated,""),f.Q6J("items",e._samplenatures)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.entitySample.sample_nature_id)("placeholder",f.lcZ(77,131,"Please choose"))("notFoundText",f.lcZ(78,133,"Not found item")),f.xp6(5),f.MGl("for","matrix_category",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(84,135,"Matrix category")),f.xp6(2),f.Tol("ajustar"),f.Q6J("items",e._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCategory0)("placeholder",f.lcZ(86,137,"Please choose"))("notFoundText",f.lcZ(87,139,"Not found item")),f.xp6(5),f.MGl("for","para_assignment",e._currentTabActivated,""),f.xp6(2),f.Oqu(f.lcZ(93,141,"Parameter assignment")),f.xp6(2),f.Q6J("items",e._specifications)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSpecification0)("disabled",null==e.selectedCategory0),f.xp6(9),f.AsE(" ",f.lcZ(104,143,"Subtotal"),": ",f.lcZ(105,145,e.entitySample.total_sub)," (VND) "),f.xp6(9),f.Oqu(f.lcZ(113,147,"Code")),f.xp6(3),f.hij(" ",f.lcZ(116,149,"Specification")," "),f.xp6(3),f.Oqu(f.lcZ(119,151,"Method")),f.xp6(5),f.Oqu(f.lcZ(124,153,"Quantity")),f.xp6(3),f.Oqu(f.lcZ(127,155,"Unit")),f.xp6(3),f.Oqu(f.lcZ(130,157,"Unit price")),f.xp6(3),f.Oqu(f.lcZ(133,159,"Discount")),f.xp6(3),f.Oqu(f.lcZ(136,161,"Amount")),f.xp6(3),f.Oqu(f.lcZ(139,163,"Priority")),f.xp6(3),f.Oqu(f.lcZ(142,165,"TAT")),f.xp6(3),f.Oqu(f.lcZ(145,167,"Order")),f.xp6(3),f.Oqu(f.lcZ(148,169,"Hidden")),f.xp6(3),f.Q6J("ngForOf",e._orderdetailists)}}let Wa=(()=>{class e{constructor(e,t,n,a,i,o,l,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=i,this._excelService=o,this._numberFormat=l,this.modalService=r,this.isSave=!1,this._flagModal="",this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this.filter_status="",this._requestslist=[],this.entity={},this.baseFolder=d.h.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this._reqlist=[],this._checkAll=!1,this._dt1="",this._dt2="",this._fdate=new Date,this._tdate=new Date,this.selectedCustomer=null,this.selectedCustomerLabel=null,this.selectedCustomer1=null,this._customers=[],this._contacts=[],this._today=new Date,this.singleSelect=[],this._titleCopy="",this._idCopy="",this.exportList=[],this.isExportLoading=!1,this._fromdateStr="",this._todateStr="",this._fromdate=new Date,this._todate=new Date,this.pageIndex1=1,this.pageSize1=10,this.totalRow1=0,this.pageIndex2=1,this.pageSize2=10,this.totalRow2=0,this.isLoadingTemplate=!1,this._templatelist=[],this._keyword1="",this.entityTemplate={},this._currentTabActivated=1,this._samples=[],this.entitySample={},this._categories=[],this.selectedCategory0=null,this._specifications=[],this.selectedSpecification0=null,this._orderdetailists=[],this._idTemplate="",this._flagChooseTemplate=!1,this._samplenatures=[],this.sample_nature_id=null,(!1===e.checkAccess("REQ-LIST")||!1===e.hasPermission("REQ-LIST","read"))&&this._route.navigate(["/error/404"]),this.socket=c()(d.h.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadCompanyLinks(),this.socket.on("refreshPage",e=>{this.loadData(),this.loadCompanyLinks()})}loadData(){this._isLoading=!0;let e={};e.page=this.pageIndex,e.limit=this.pageSize,e.filter=this._keyword,e.status=this.filter_status,e.domain=this.user.short_code,e.user_id=this.user.id,this._dataService.post("/request/getall",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,company_name_l:n.company_name_l,company_name_e:n.company_name_e,receive_company_e:n.receive_company_e,receive_company_l:n.receive_company_l,contact_name:n.contact_name,short_code:n.short_code,flag:!1,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat,total:(parseFloat("NaN"==n.total?0:n.total)-parseInt(null==n.promo_special?0:n.promo_special))*(1-parseFloat(null==n.promo_perorder?0:n.promo_perorder)/100)*(1+parseFloat(null==n.tax_vat?0:n.tax_vat)/100),total_estimated:(parseFloat("NaN"==n.total_estimated?0:n.total_estimated)-parseInt(null==n.promo_special?0:n.promo_special))*(1-parseFloat(null==n.promo_perorder?0:n.promo_perorder)/100)*(1+parseFloat(null==n.tax_vat?0:n.tax_vat)/100),created_by:n.created_by,ordered_samples:n.ordered_samples,note:n.note,order_no:(null==n.employee_nr?"":n.employee_nr)+n.request_no.substr(2,n.request_no.length)});this._requestslist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages,this._isLoading=!1})}loadCustomers(){let e={};e.domain=this.user.short_code,this._dataService.post("/customer/getallcustomersnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.name_l,code:n.id});this._customers=t})}loadCompanyLinks(){let e={};e.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.code_link,code:n.id});this._customers=t})}_getInfoLabelCustomer(){this.selectedCustomerLabel=null!=this.selectedCustomer?this._customers.filter(e=>e.code==this.selectedCustomer)[0].name:null}_switchPercent(e){e>100&&(this.entity.promo_perorder=100)}selectAll(e){e.target.checked?(this.exportList=[],this._requestslist.forEach(e=>this.exportList.push(e.id))):this.exportList=[]}selectItem(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(e=>e!==t)}loadContacts(e){if(null==e)this.selectedContact=null;else{let t={};t.customer_id=e,this._dataService.post("/customer/getallcontactsnopaging",t).subscribe(e=>{console.log("Contact",e);let t=[];for(let n of e.data)t.push({name:n.name_l,code:n.id});this._contacts=t})}}changeCheckAll(e){let t=[];if(this._checkAll)for(let n of e)t.push({id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:!0,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat,total:n.total,created_by:n.created_by,ordered_samples:n.ordered_samples});else for(let n of e)t.push({id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:!1,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat,total:n.total,created_by:n.created_by,ordered_samples:n.ordered_samples});this._requestslist=t}_changeCheckOne(e){this._checkAll=!0;let t=[];for(let n of this._requestslist)t.push(n.id==e.id?{id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:e.flag,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat}:{id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:n.flag,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat});this._requestslist=t}_pageSizeChange(e){this.pageSize=e.target.value,this._checkAll||this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this._checkAll||this.socket.emit("refresh",{})}loadDetail(e){let t={};t.id=e,this._dataService.post("/request/detail",t).subscribe(e=>{this.entity=e.data,null!=e.data.customer_id?(this.selectedCustomer=e.data.customer_id,this.selectedCustomerLabel=this._customers.filter(e=>e.code==this.selectedCustomer)[0].name):(this.selectedCustomer=null,this.selectedCustomerLabel=null),null!=e.data.received_date&&(this._dt1=r(new Date(e.data.received_date)).format("YYYY-MM-DD HH:mm"),this._fdate=new Date(e.data.received_date)),null!=e.data.returned_date&&(this._dt2=r(new Date(e.data.returned_date)).format("YYYY-MM-DD HH:mm"),this._tdate=new Date(e.data.returned_date))})}deleteItem(e){h().fire({title:"en"==this.user.lang?m.W.are_you_sure_en:m.W.are_you_sure,text:"en"==this.user.lang?e.category_name_e:e.category_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{if(t.value){let t={};t.id=e.id,this._dataService.post("/sample_matrix/deleteCat",t).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_DELETE_EN:m.W.MSG_DELETE,"OK"),this.socket.emit("refresh",{})},()=>{this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}})}saveChange(e){if(this._fdate>this._tdate||null==e||0==this.entity.number_sample||null==this._fdate||null==this._tdate)this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_DATE_EN:m.W.MSG_ERROR_DATE,"en"==this.user.lang?m.W.error_title_en:m.W.error_title);else if(this.isSave=!0,this.entity.customer_id=e,this.entity.received_date=this._dt1,this.entity.returned_date=this._dt2,this.entity.userid=this.user.id,this.entity.ipaddress=this.user.ipaddress,"ADD"==this._flagModal){this.entity.short_code=this.user.short_code;let e=new Date;this.entity.timestamp=r(e).format("YYYY-MM-DD HH:mm:ss"),console.log(this.entity),this._dataService.post("/request/add",this.entity).subscribe(e=>{this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_ADD_EN:m.W.MSG_ADD,"OK"),this.entity={},this.entity.tax_vat=10,this.entity.number_sample=1,this.entity.is_active=0,this.entity.valid_number=5,this.selectedContact=null,this.selectedCustomer=null,this._fdate=null,this._tdate=null,this._dt1="",this._dt2="",this.isSave=!1,this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}else console.log("Update",this.entity),this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/request/update",this.entity).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}orgValueChange1(e){null!=e&&"Invalid date"!=e?(this._fdate=e,this._tdate=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1=r(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=r(this._tdate).format("YYYY-MM-DD HH:mm")):(this._dt1="",this._fdate=null)}orgValueChange2(e){null!=e&&"Invalid date"!=e?(this._tdate=e,this._dt1=r(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=r(this._tdate).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdate-this._fdate)/864e5)):(this._dt2="",this._tdate=null)}_calculateDays(){null!=this._fdate&&(this._tdate=new Date(this._fdate.getTime()+864e5*this.entity.valid_number))}_openModal(e,t){null==t?(this._flagModal="ADD",this.entity={},this.entity.tax_vat=10,this.entity.number_sample=1,this.entity.is_active=0,this.entity.valid_number=7,this.entity.is_issue_bill=!0,this.selectedContact=null,this.selectedCustomer=null,this._fdate=null,this._tdate=null,this._dt1="",this._dt2=""):(this._flagModal="UPDATE",this.loadDetail(t.id)),this.modalService.open(e,{size:"lg",centered:!0})}_routeDetail(e){this._route.navigate(["/request/detail/"+e.id])}_exportAll(e){console.log(e),this.isExportLoading=!0,this._dataService.post("/request/exportRequest",e).subscribe(e=>{if(e.data.length>0){let t=[];for(let n of e.data)t.push({"Request No":n.request_no,"Customer Name":n.company_name_l,Contact:n.contact_name,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(n.returned_date)).format("DD/MM/YYYY"),"Samples Ordered":n.ordered_samples+"/"+(null==n.number_sample?"0":n.number_sample),"VAT (%)":null==n.tax_vat?"":n.tax_vat,Total:0==n.ordered_samples?"0":this._numberFormat.localeString(parseFloat(n.total)),Status:n.is_active?"Confirmed":"Cancelled","Created By":n.created_by,"Promotion Per Group":this._numberFormat.localeString(parseFloat(n.promotion_per_group)),"Promotion Per Order":this._numberFormat.localeString(parseFloat(n.promotion_per_order)),"Total before tax":this._numberFormat.localeString(parseFloat(n.before_tax)),"Total after tax":this._numberFormat.localeString(parseFloat(n.after_tax)).substr(0,this._numberFormat.localeString(parseFloat(n.after_tax)).lastIndexOf("."))});this._excelService.exportAsExcelFile(t,"Requests-"+r(new Date).format("YYYY-MM-DD")),this.isExportLoading=!1,this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+e.data.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+e.data.length+" "+m.W.record,"OK")}else this.isExportLoading=!1,this._notifyService.showWarning("en"==this.user.lang?m.W.MSG_EXPORT_EN+" 0 "+m.W.record_en:m.W.MSG_EXPORT+" 0 "+m.W.record,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)},()=>{this.isExportLoading=!1,this._notifyService.showError("en"==this.user.lang?m.W.MSG_EXPORTNO_EN:m.W.MSG_EXPORT_NO,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}_exportAllRangeWithStatus(e){this.modalService.open(e,{size:"md",centered:!0})}openCopyModal(e,t,n){0==n?(this._titleCopy=t.request_no,this._idCopy=t.id):(this._titleCopy="en"==this.user.lang?"total of requests: ":"t\u1ed5ng s\u1ed1 y\xeau c\u1ea7u: "+t.length,this._idCopy=t),this.modalService.open(e,{size:"md",centered:!0})}_copyRequest(e){let t={};t.id=this._idCopy,t.customer_id=e,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/request/copy",t).subscribe(e=>{this._idCopy="",this._titleCopy="",this.selectedCustomer1=null,this.modalService.dismissAll(),this._notifyService.showSuccess("en"==this.user.lang?m.W.copy_msgok_en:m.W.copy_msgok,"OK"),this.socket.emit("refresh",{})})}_copyAll(e,t){console.log(e,t);let n={};n.ids=e,n.customer_id=t,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,this._dataService.post("/request/copyAll",n).subscribe(e=>{this._idCopy="",this._titleCopy="",this.selectedCustomer1=null,this.modalService.dismissAll(),this._notifyService.showSuccess("en"==this.user.lang?m.W.copy_msgok_en:m.W.copy_msgok,"OK"),this.exportList=[],this.socket.emit("refresh",{})})}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}changeFromDate(e){null==e?(this._fromdateStr="",this._fromdate=null):(this._fromdateStr=r(e).format("YYYY-MM-DD"),this._fromdate=e)}changeToDate(e){null==e?(this._todateStr="",this._todate=null):(this._todateStr=r(e).format("YYYY-MM-DD"),this._todate=e)}_exportAllRangeWithStatusA(){console.log(this._fromdate,this._todate),this._fromdate>this._todate||null==this._fromdate||null==this._todate?this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_DATE_EN:m.W.MSG_ERROR_DATE,"en"==this.user.lang?m.W.error_title_en:m.W.error_title):this._dataService.post("/request/exportRange",{from_date:this._fromdateStr,to_date:this._todateStr,short_code:this.user.short_code}).subscribe(e=>{if(e.data.length>0){let t=[];for(let n of e.data)t.push({"Request No":n.request_no,"Customer Name":n.company_name_l,Contact:n.contact_name,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(n.returned_date)).format("DD/MM/YYYY"),"Samples Ordered":n.ordered_samples+"/"+(null==n.number_sample?"0":n.number_sample),"VAT (%)":null==n.tax_vat?"":n.tax_vat,Total:0==n.ordered_samples?"0":this._numberFormat.localeString(parseFloat(n.total)),Status:n.is_active?"Confirmed":"Cancelled","Created By":n.created_by,"Promotion Per Group":this._numberFormat.localeString(parseFloat(n.promotion_per_group)),"Promotion Per Order":this._numberFormat.localeString(parseFloat(n.promotion_per_order)),"Total Before Tax":this._numberFormat.localeString(parseFloat(n.before_tax)),"Total After Tax":this._numberFormat.localeString(parseFloat(n.after_tax)).substr(0,this._numberFormat.localeString(parseFloat(n.after_tax)).lastIndexOf(".")),"Issue Bill VAT":null!=n.is_issue_bill&&n.is_issue_bill?"Yes":"No",Note:n.note});this._excelService.exportAsExcelFile(t,"Requests-"+r(new Date).format("YYYY-MM-DD")),this.isExportLoading=!1,this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+e.data.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+e.data.length+" "+m.W.record,"OK"),this.modalService.dismissAll()}else this.isExportLoading=!1,this._notifyService.showWarning("en"==this.user.lang?m.W.MSG_EXPORT_EN+" 0 "+m.W.record_en:m.W.MSG_EXPORT+" 0 "+m.W.record,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)},()=>{this.isExportLoading=!1,this._notifyService.showError("en"==this.user.lang?m.W.MSG_EXPORTNO_EN:m.W.MSG_EXPORT_NO,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}loadTemplateList(){this.isLoadingTemplate=!0;let e={};e.page=this.pageIndex1,e.limit=this.pageSize1,e.filter=this._keyword1,e.domain=this.user.short_code,this._dataService.post("/request/getalltemplates",e).subscribe(e=>{console.log(e);let t=[];for(let n of e.data){let e=0;for(let t of n.json.data)e+=t.order_details.length;t.push({id:n.id,name:n.name,number_sample:n.number_sample,json:n.json,short_code:n.short_code,timestamp:n.timestamp,total:n.total,total_parameters:e})}this._templatelist=t,this.totalRow1=e.rowCount,this.totalPage1=e.totalPages,this.isLoadingTemplate=!1})}_pageSizeChangeTemplate(e){this.pageSize1=e.target.value,this.loadTemplateList()}pageChangedTemplate(e){this.pageIndex1=e.page,this.loadTemplateList()}openTemplateModal(e){this.loadTemplateList(),this.modalService.open(e,{size:"xl",centered:!0,backdrop:!1})}popupTemplateModal(e,t){this.loadSampleNature(),this.loadCategories(),null==t?(this._currentTabActivated=1,this.entitySample={},this.entityTemplate={},this.entityTemplate.id=null,this.entityTemplate.name=null,this.entityTemplate.number_sample=1,this.entityTemplate.short_code=this.user.short_code,this.entityTemplate.total=0,this._orderdetailists=[],this._samples=[{id:1,sample_name:null,sample_name_e:null,description:null,description_e:null,note:null,weight:null,order_details:this._orderdetailists,total_sub:0,sample_nature_id:null}],this.entityTemplate.json={data:this._samples}):this.loadDetailRequestTemplate(t.id),this.modalService.open(e,{size:"xl",centered:!0})}_changeSample(e){if(e>this._samples.length){for(let t=0;t<e-this._samples.length;t++)this._samples.push({id:this._samples.length+t+1,sample_name:null,sample_name_e:null,description:null,description_e:null,note:null,weight:null,order_details:[],total_sub:0});this.entityTemplate.json={data:this._samples},this.saveChangeSample()}else null!=this.entityTemplate.id&&this.loadDetailRequestTemplate(this.entityTemplate.id)}_chooseTab(e){this.selectedSpecification0=null,this.selectedCategory0=null,this.sample_nature_id=null,this._currentTabActivated=e.id,this.entitySample=this._samples.filter(t=>t.id==e.id)[0],this._orderdetailists=this._samples.filter(t=>t.id==e.id)[0].order_details}_updateSample(e){for(let t of this._samples)t.id==this._currentTabActivated&&(t.sample_name=null==e.sample_name?null:e.sample_name,t.sample_name_e=null==e.sample_name_e?null:e.sample_name_e,t.description=null==e.description?null:e.description,t.description_e=null==e.description_e?null:e.description_e,t.note=null==e.note?null:e.note,t.weight=null==e.weight?null:e.weight,t.total_sub=e.total_sub);this.entityTemplate.json={data:this._samples},this.saveChangeSample()}_removeTab(e){let t=[],n=1;for(let a of this._samples.filter(t=>t.id!=e))t.push({id:n,sample_name:a.sample_name,sample_name_e:a.sample_name_e,description:a.description,description_e:a.description_e,note:a.note,weight:a.weight,order_details:a.order_details}),n+=1;this.entityTemplate.number_sample=t.length,this.entityTemplate.json={data:t},this.saveChangeSample()}saveChangeSample(){null==this.entityTemplate.id?this._dataService.post("/request/addRequestTemplate",this.entityTemplate).subscribe(e=>{this.loadDetailRequestTemplate(e.data.id),this.loadTemplateList()}):this._dataService.post("/request/updateRequestTemplate",this.entityTemplate).subscribe(e=>{this.loadDetailRequestTemplate(e.data.id)})}loadDetailRequestTemplate(e){this._dataService.post("/request/detailRequestTemplate",{id:e}).subscribe(e=>{this.entityTemplate=e.data,this._samples=e.data.json.data,this.entitySample=this._samples.filter(e=>e.id==this._currentTabActivated)[0],this._orderdetailists=this._samples.filter(e=>e.id==this._currentTabActivated)[0].order_details})}loadCategories(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:"en"==this.user.lang?n.category_name_e:n.category_name_l,code:n.id});this._categories=t})}changeCategoryMatrix(){this.loadSpecs(this.selectedCategory0)}loadSpecs(e){if(null!=e){let t={};t.domain=this.user.short_code,t.id=e,this._dataService.post("/sample_matrix/getallparametersnopagingbycat",t).subscribe(e=>{let t=[];for(let n of e.data.filter(e=>e.is_active))t.push({name:n.specification_name_l,code:n.parameter_id});this._specifications=t})}else{let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparametersnopaging",e).subscribe(e=>{let t=[];for(let n of e.data.filter(e=>e.is_active))t.push({name:n.specification_name_l,code:n.id});this._specifications=t})}}changeSpecification(e,t){console.log(this.selectedSpecification0,t),null!=this.selectedSpecification0&&null!=t&&this._addItemsTemplate(this.selectedSpecification0,e,t)}_removeItemTemplate(e){this._dataService.post("/request/removeItemOrderTemplate",{sample_id:e.sample_id,parameter_id:e.parameter_id,category_id:e.category_id,id:this.entityTemplate.id}).subscribe(e=>{this.loadDetailRequestTemplate(this.entityTemplate.id),this.loadTemplateList()})}_addItemsTemplate(e,t,n){console.log(e,t),this._dataService.post("/request/addItemOrderTemplate",{sample_id:this._currentTabActivated,parameter_id:e,category_id:n,priority:0,id:this.entityTemplate.id}).subscribe(e=>{console.log(e),this.selectedSpecification0=null,this.loadDetailRequestTemplate(this.entityTemplate.id),this.loadTemplateList()})}_updateItemTemplate(e){this._dataService.post("/request/updateItemTemplate",{id:this.entityTemplate.id,getlist:e}).subscribe(e=>{this.loadDetailRequestTemplate(this.entityTemplate.id)})}_popupCopyTemplate(e,t){this.selectedCustomer1=null,this._idTemplate=t.id,this._flagChooseTemplate=!0,this._titleCopy="en"==this.user.lang?"From Template: "+t.name:"T\u1eeb nguy\xean m\u1eabu: "+t.name,this.modalService.open(e,{size:"md",centered:!0,backdrop:!1})}deleteItemTemplate(e){this._dataService.post("/request/deleteItemTemplate",{id:e.id}).subscribe(e=>{this.loadTemplateList(),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_DELETE_EN:m.W.MSG_DELETE,"OK")})}_copyTemplate(e,t){this._dataService.post("/request/convertTemplate2Request",{id:e,customer_id:t,userid:this.user.id,ipaddress:this.user.ipaddress,short_code:this.user.short_code}).subscribe(e=>{console.log(e),this._notifyService.showSuccess("en"==this.user.lang?m.W.copy_msgok_en:m.W.copy_msgok,"OK"),this.selectedCustomer1=null,this.modalService.dismissAll(),this.socket.emit("refresh",{})})}loadSampleNature(){this._dataService.post("/sample_matrix/getallsamplenaturenopaging",{short_code:this.user.short_code}).subscribe(e=>{console.log(e);let t=[];for(let n of e.data)t.push({id:n.id,name:"en"==this.user.lang?n.name_e:n.name_l});this._samplenatures=t})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(Z.e),f.Y36(x.D),f.Y36(o.F0),f.Y36(A.c),f.Y36(b.C),f.Y36(T.x),f.Y36(Ge.p),f.Y36(y.FF))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-req-management"]],decls:119,vars:100,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[2,"width","130px"],[4,"ngIf"],["content",""],["contentRelationship",""],["contentCopy",""],["contentRangeDate",""],["contentTemplate",""],["contentAddTemplateModal",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-copy"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-bookmark-o"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","13",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-eye"],["class","btn btn-sm btn-primary mr-sm-1",3,"disabled","ngbTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"disabled","ngbTooltip","click"],[3,"ngbTooltip"],[1,"text-right"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-pencil"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"form","theme-form",3,"ngSubmit"],["f0","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","number_sample"],["type","number","id","number_sample","name","number_sample","required","","autocomplete","off","min","0",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["type","hidden","name","ID",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-3"],["for","tax_vat"],["type","number","id","tax_vat","name","tax_vat","required","","autocomplete","off","min","0",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","isOnOff"],[1,"checkbox","checkbox-primary"],["id","isOnOff","type","checkbox","name","isOnOff",3,"ngModel","ngModelChange"],[1,"col-md-12"],["for","title_promo_spec"],["type","text","id","title_promo_spec","name","title_promo_spec","autocomplete","off",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","promo_special_en"],["type","text","id","promo_special_en","name","promo_special_en","autocomplete","off","min","0","mask","separator.2","thousandSeparator",",",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","promo_perorder"],["type","number","id","promo_perorder","name","promo_perorder","autocomplete","off",3,"ngClass","placeholder","ngModel","min","max","disabled","ngModelChange","change"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["class","mute",4,"ngIf"],["for","received_date"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",3,"placeholder","ngClass","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdate","bsDatepicker","","autocomplete","off","required","",3,"placeholder","ngClass","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",3,"type","placeholder","ngClass","ngModel","disabled","min","ngModelChange","change"],["for","permission_write"],["id","permission_write","name","permission_write",1,"form-control",3,"ngModel","ngModelChange"],["for","comment"],["rows","2","id","comment","name","comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",4,"ngIf"],[1,"mute"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary"],["class","modal-title",4,"ngIf"],["class","form-group row",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"col-md-10"],["type","search","aria-label","Search","name","_keywordRel","autocomplete","off",1,"form-control","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"col-md-2"],["type","button",1,"btn","btn-primary","bt-sm",3,"click"],["class","form-inline my-2 my-lg-0",4,"ngIf"],[1,"form-inline","my-2","my-lg-0"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],["colspan","8",2,"text-align","center"],[2,"cursor","pointer",3,"click"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-trash"],["form1","ngForm"],["for","contact_name"],["type","text","id","contact_name","name","contact_name","required","","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","ngModelChange"],["for","contact_code"],["type","text","id","contact_code","name","contact_code","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","phone"],["type","text","id","phone","name","phone","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","email"],["type","text","id","email","name","email","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Descriptiona"],["rows","2","id","Descriptiona","name","Descriptiona",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Description1a"],["rows","2","id","Description1a","name","Description1a",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["id","permission_write","type","checkbox","name","permission_write",3,"ngModel","ngModelChange"],["type","submit","class","btn btn-primary mr-sm-1",3,"disabled",4,"ngIf"],["type","button","class","btn btn-warning mr-sm-1",3,"click",4,"ngIf"],["type","text","autocomplete","off","name","_keyword1",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["name","mypage","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[2,"overflow-x","auto"],["type","submit",1,"btn","btn-primary","mr-sm-1",3,"disabled"],["type","button",1,"btn","btn-warning","mr-sm-1",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","click"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],["form2","ngForm"],["for","link_code"],["id","link_code","name","link_code","rows","2",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","info_company_id"],["name","selectedCompany","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSender","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","button",1,"btn","btn-secondary","mr-sm-1",3,"click"],["type","button","class","btn btn-primary mr-sm-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","mr-sm-1",3,"click"],[1,"form","theme-form"],["for","company_en"],["name","selectedCustomer1","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["for","fromdate"],["id","fromdate","type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","fromdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["for","todate"],["id","todate","type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","todate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],[1,"col-md-12","text-center"],["href","javascript:;","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-warning",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-warning",3,"click"],["href","javascript:;",1,"btn","btn-sm","btn-warning"],[1,"col-md-9"],[1,"form-group","form-inline"],["type","text","name","_keyword",1,"form-control","mr-sm-1",3,"placeholder","ngModel","ngModelChange","keyup.enter","change"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"click"],["src","../../../../assets/img/circles.svg","width","17px","class","mr-sm-1",4,"ngIf"],["id","select151","name","select151",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["class","col-sm-12 col-lg-12 col-xl-12",4,"ngIf"],[2,"width","2px","text-align","center"],["src","../../../../assets/img/circles.svg","width","17px",1,"mr-sm-1"],["colspan","7",1,"text-center"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],[1,"btn","btn-sm","btn-secondary","mr-sm-1",3,"ngbTooltip","click"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"ngbTooltip","click"],[1,"col-md-7"],["for","temp_name"],["type","text","id","temp_name","name","temp_name","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","change"],["for","tmep_num_sample"],["type","number","id","tmep_num_sample","name","tmep_num_sample","autocomplete","off","min","1",1,"form-control",3,"ngModel","ngModelChange","keyup.enter","change"],["type","text","name","temp_total","autocomplete","off","mask","separator.2","thousandSeparator",",","disabled","",1,"form-control","jdisabled",3,"ngModel","ngModelChange"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"btn-group","flex-wrap"],[1,"col-sm-12","col-lg-12","col-xl-1","text-right"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[3,"for"],["type","text","autocomplete","off",1,"form-control",3,"id","name","ngModel","placeholder","ngModelChange","keyup.enter","change"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange","change"],["type","text",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange","change","keypress.enter"],["bindValue","id","bindLabel","name",3,"items","name","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["ng-option-tmp",""],["name","matrix_category","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSpecification0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],[1,"table-responsive",2,"max-height","200px"],["id","hor-minimalist-line-border"],["colspan","15",1,"text-right",2,"background-color","rgb(201, 201, 201)","color","black"],[1,"text-truncate"],[1,"scope"],["type","button",3,"ngClass","click"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],["container","body",3,"ngbTooltip"],["href","javascript:;",1,"text-danger",3,"click"],[3,"ngClass"],["type","text",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","text","min","0","mask","separator.2","thousandSeparator",",",1,"form-control",2,"width","100px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","text","min","0","mask","separator.2","thousandSeparator",",",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","number","min","0",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","checkbox",1,"form-control",3,"name","ngModel","ngModelChange","change"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",1),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"input",7),f.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),f.ALo(9,"translate"),f.qZA(),f.YNc(10,En,3,3,"button",8),f.YNc(11,Rn,4,3,"button",9),f.YNc(12,Fn,5,6,"button",10),f.YNc(13,Hn,4,3,"button",11),f.YNc(14,Wn,1,0,"img",12),f.qZA(),f.qZA(),f.TgZ(15,"div",13),f.TgZ(16,"div",14),f.TgZ(17,"select",15),f.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),f.TgZ(18,"option",16),f._uU(19,"#10"),f.qZA(),f.TgZ(20,"option",17),f._uU(21,"#25"),f.qZA(),f.TgZ(22,"option",18),f._uU(23,"#50"),f.qZA(),f.TgZ(24,"option",19),f._uU(25,"#100"),f.qZA(),f.qZA(),f.TgZ(26,"select",20),f.NdJ("ngModelChange",function(e){return t.filter_status=e})("change",function(){return t.loadData()}),f.TgZ(27,"option",21),f._uU(28),f.ALo(29,"translate"),f.qZA(),f.TgZ(30,"option",22),f._uU(31),f.ALo(32,"translate"),f.qZA(),f.TgZ(33,"option",23),f._uU(34),f.ALo(35,"translate"),f.qZA(),f.TgZ(36,"option",24),f._uU(37),f.ALo(38,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(39,"div",25),f.TgZ(40,"div",26),f.TgZ(41,"div",27),f.TgZ(42,"div",28),f.TgZ(43,"pagination",29),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(44,"div",30),f.TgZ(45,"a",31),f._uU(46),f.ALo(47,"translate"),f.ALo(48,"translate"),f.ALo(49,"translate"),f.ALo(50,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(51,"div",26),f.TgZ(52,"div",32),f.TgZ(53,"table",33),f.TgZ(54,"thead",34),f.TgZ(55,"tr"),f.TgZ(56,"th",35),f._uU(57,"#"),f.qZA(),f.TgZ(58,"th",36),f.TgZ(59,"input",37),f.NdJ("change",function(e){return t.selectAll(e)}),f.qZA(),f.qZA(),f.TgZ(60,"th",38),f._uU(61),f.ALo(62,"translate"),f.qZA(),f.TgZ(63,"th",36),f._uU(64),f.ALo(65,"translate"),f.qZA(),f.TgZ(66,"th",36),f._uU(67),f.ALo(68,"translate"),f.qZA(),f.TgZ(69,"th",36),f._uU(70),f.ALo(71,"translate"),f.qZA(),f.TgZ(72,"th",36),f._uU(73),f.ALo(74,"translate"),f.qZA(),f.TgZ(75,"th",36),f._uU(76),f.ALo(77,"translate"),f.qZA(),f.TgZ(78,"th",36),f._uU(79),f.ALo(80,"translate"),f.qZA(),f.TgZ(81,"th",36),f._uU(82),f.ALo(83,"translate"),f.qZA(),f.TgZ(84,"th",36),f._uU(85),f.ALo(86,"translate"),f.qZA(),f.TgZ(87,"th",36),f._uU(88),f.ALo(89,"translate"),f.qZA(),f.TgZ(90,"th",36),f._uU(91),f.ALo(92,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(93,"tbody"),f.YNc(94,jn,6,3,"ng-container",39),f.YNc(95,ea,2,1,"ng-container",39),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(96,"div",26),f.TgZ(97,"div",27),f.TgZ(98,"div",28),f.TgZ(99,"pagination",29),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(100,"div",30),f.TgZ(101,"a",31),f._uU(102),f.ALo(103,"translate"),f.ALo(104,"translate"),f.ALo(105,"translate"),f.ALo(106,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(107,oa,121,122,"ng-template",null,40,f.W1O),f.YNc(109,qa,12,7,"ng-template",null,41,f.W1O),f.YNc(111,Sa,17,9,"ng-template",null,42,f.W1O),f.YNc(113,Ua,25,17,"ng-template",null,43,f.W1O),f.YNc(115,Ja,59,33,"ng-template",null,44,f.W1O),f.YNc(117,Ha,151,171,"ng-template",null,45,f.W1O)),2&e&&(f.xp6(8),f.Q6J("placeholder",f.lcZ(9,52,"Search"))("ngModel",t._keyword),f.xp6(2),f.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","create")),f.xp6(1),f.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","report")),f.xp6(1),f.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","create")&&t.exportList.length>0),f.xp6(1),f.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","report")),f.xp6(1),f.Q6J("ngIf",t._isLoading),f.xp6(3),f.Q6J("ngModel",t.pageSize),f.xp6(9),f.Q6J("ngModel",t.filter_status),f.xp6(2),f.hij(" ",f.lcZ(29,54,"All")," "),f.xp6(3),f.hij(" ",f.lcZ(32,56,"Pending")," "),f.xp6(3),f.hij(" ",f.lcZ(35,58,"Confirmed")," "),f.xp6(3),f.hij(" ",f.lcZ(38,60,"Cancel")," "),f.xp6(6),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(47,62,"Total of records"),": ",t.totalRow," - ",f.lcZ(48,64,"Page")," ",t.pageIndex," ",f.lcZ(49,66,"of")," ",t.totalPage," ",f.lcZ(50,68,"page"),""),f.xp6(13),f.Q6J("disabled",0==t._requestslist.length)("checked",t.exportList.length==t._requestslist.length),f.xp6(2),f.Oqu(f.lcZ(62,70,"Actions")),f.xp6(3),f.hij(" ",f.lcZ(65,72,"Request code")," "),f.xp6(3),f.hij(" ",f.lcZ(68,74,"Order code")," "),f.xp6(3),f.hij(" ",f.lcZ(71,76,"Received date")," "),f.xp6(3),f.hij(" ",f.lcZ(74,78,"Customer")," "),f.xp6(3),f.hij(" ",f.lcZ(77,80,"Report company")," "),f.xp6(3),f.hij(" ",f.lcZ(80,82,"Total")," "),f.xp6(3),f.Oqu(f.lcZ(83,84,"Contact")),f.xp6(3),f.Oqu(f.lcZ(86,86,"Returned date")),f.xp6(3),f.Oqu(f.lcZ(89,88,"Status")),f.xp6(3),f.Oqu(f.lcZ(92,90,"Timestamp")),f.xp6(3),f.Q6J("ngIf",0==t._requestslist.length),f.xp6(1),f.Q6J("ngIf",t._requestslist.length>0),f.xp6(4),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(103,92,"Total of records"),": ",t.totalRow," - ",f.lcZ(104,94,"Page")," ",t.pageIndex," ",f.lcZ(105,96,"of")," ",t.totalPage," ",f.lcZ(106,98,"page"),""))},directives:[i.Fj,i.JJ,i.On,a.O5,i.EJ,i.YN,i.Kr,v.Qt,a.sg,y._L,i._Y,i.JL,i.F,i.qQ,i.wV,i.Q7,a.mk,i.Wl,Kt.hx,i.Fd,M.w9,q.Y5,q.Np,i.c5,M.Z2],pipes:[S.X$,a.uU,a.JJ,a.OU],styles:[""]}),e})();function ja(e,t){if(1&e&&(f.TgZ(0,"option",45),f._uU(1),f.qZA()),2&e){const e=t.$implicit,n=f.oxw();f.Q6J("value",e.id),f.xp6(1),f.hij(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function Ga(e,t){if(1&e&&(f.TgZ(0,"option",45),f._uU(1),f.qZA()),2&e){const e=t.$implicit,n=f.oxw();f.Q6J("value",e.id),f.xp6(1),f.hij(" ","en"==n.user.lang?e.csp_name_e:e.csp_name_l," ")}}function Ba(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",46),f.NdJ("click",function(){f.CHM(e);const t=f.oxw();return t._exportAll(t._preparationlist)}),f._UZ(1,"i",47),f._uU(2),f.ALo(3,"translate"),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Export")," "))}function za(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",48),f.NdJ("click",function(){return f.CHM(e),f.oxw()._exportAll1()}),f._UZ(1,"i",47),f._uU(2),f.ALo(3,"translate"),f.ALo(4,"translate"),f.qZA()}2&e&&(f.xp6(2),f.AsE(" ",f.lcZ(3,2,"Export")," ",f.lcZ(4,4,"All")," "))}function Va(e,t){1&e&&f._UZ(0,"img",49)}function $a(e,t){1&e&&(f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td",50),f.TgZ(3,"h3",51),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.qZA(),f.qZA(),f.BQk()),2&e&&(f.xp6(4),f.hij(" ",f.lcZ(5,1,"No records now!!!")," "))}function Ka(e,t){1&e&&f._UZ(0,"i",65)}function Xa(e,t){1&e&&f._UZ(0,"i",66)}function ei(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",62),f.NdJ("click",function(){return f.CHM(e),f.oxw(3)._switchFlagEdit()}),f.ALo(1,"translate"),f.YNc(2,Ka,1,0,"i",63),f.YNc(3,Xa,1,0,"i",64),f.qZA()}if(2&e){const e=f.oxw().$implicit,t=f.oxw(2);f.Q6J("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!t._authenService.hasPermission("REQ-PRE","update"))("title",f.lcZ(1,5,e.flag?"Edit":"Cancel")),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag)}}function ti(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",67),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(3);return t._updateStatusv2(t._preparationlist)}),f.ALo(1,"translate"),f._UZ(2,"i",68),f.qZA()}2&e&&f.Q6J("title",f.lcZ(1,1,"Save"))}function ni(e,t){if(1&e&&(f.ynx(0),f._uU(1),f.BQk()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.hij(" ",e.note_lab,"")}}function ai(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"input",69),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.note_lab=t}),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.xp6(1),f.MGl("name","note_lab",t+1,""),f.Q6J("ngModel",n.note_lab)}}function ii(e,t){1&e&&(f.TgZ(0,"span",70),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"None")))}function oi(e,t){1&e&&(f.TgZ(0,"span",71),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Preparation")))}function li(e,t){1&e&&(f.TgZ(0,"span",72),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Technical validation")))}function ri(e,t){1&e&&(f.TgZ(0,"span",73),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Validation")))}function si(e,t){1&e&&(f.TgZ(0,"span",74),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Done")))}function ci(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"th",53),f._uU(2),f.qZA(),f.TgZ(3,"td"),f.YNc(4,ei,4,7,"button",54),f.YNc(5,ti,3,3,"button",55),f.qZA(),f.TgZ(6,"td"),f._uU(7),f.qZA(),f.TgZ(8,"td"),f._uU(9),f.qZA(),f.TgZ(10,"td"),f._uU(11),f.qZA(),f.TgZ(12,"td"),f._uU(13),f.qZA(),f.TgZ(14,"td"),f._uU(15),f.qZA(),f.TgZ(16,"td"),f._uU(17),f.qZA(),f.TgZ(18,"td"),f._uU(19),f.qZA(),f.TgZ(20,"td"),f._uU(21),f.qZA(),f.TgZ(22,"td"),f._uU(23),f.qZA(),f.TgZ(24,"td"),f.YNc(25,ni,2,1,"ng-container",44),f.YNc(26,ai,2,2,"ng-container",44),f.qZA(),f.TgZ(27,"td",56),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw(2);return(1==t.status||0==t.status)&&t.flag&&n._authenService.hasPermission("REQ-PRE","update")?n._updateStatusItem(t):null}),f.YNc(28,ii,3,3,"span",57),f.YNc(29,oi,3,3,"span",58),f.YNc(30,li,3,3,"span",59),f.YNc(31,ri,3,3,"span",60),f.YNc(32,si,3,3,"span",61),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(2),f.hij(" ",n+1+a.pageSize*(a.pageIndex-1)," "),f.xp6(2),f.Q6J("ngIf",0==e.status||1==e.status),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.hij(" ",e.order_code," "),f.xp6(2),f.Oqu(e.inner_code),f.xp6(2),f.hij(" ",e.code," "),f.xp6(2),f.hij(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),f.xp6(2),f.hij(" ","en"==a.user.lang?e.para_name_e:e.para_name_l," "),f.xp6(2),f.hij(" ","en"==a.user.lang?e.category_name_e:e.category_name_l," "),f.xp6(2),f.Oqu("en"==a.user.lang?e.nature_name_e:e.nature_name_l),f.xp6(2),f.Oqu(e.tat),f.xp6(2),f.Oqu(e.note),f.xp6(2),f.Q6J("ngIf",!e.flag),f.xp6(1),f.Q6J("ngIf",e.flag),f.xp6(2),f.Q6J("ngIf",0==e.status),f.xp6(1),f.Q6J("ngIf",1==e.status),f.xp6(1),f.Q6J("ngIf",2==e.status),f.xp6(1),f.Q6J("ngIf",3==e.status),f.xp6(1),f.Q6J("ngIf",4==e.status)}}function di(e,t){if(1&e&&(f.ynx(0),f.YNc(1,ci,33,19,"tr",52),f.BQk()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngForOf",e._preparationlist)}}const ui=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let gi=(()=>{class e{constructor(e,t,n,a,i,o,l,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=i,this._excelService=o,this.formatPipe=l,this.modalService=r,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=9,this.entity={},(!1===e.checkAccess("REQ-LIST")||!1===e.hasPermission("REQ-LIST","read"))&&this._route.navigate(["/error/404"]),this.socket=c()(d.h.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyCSP()}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,this._dataService.post("/lab/getlistlabspre",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({order_code:n.employee_nr+n.request_no.substr(2,n.request_no.length),code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,nature_name_e:n.nature_name_e,nature_name_l:n.nature_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,tat:n.tat,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l,csp_name_e:n.csp_name_e,csp_name_l:n.csp_name_l,receiver_company:n.receiver_company,receiver_contact:n.receiver_contact,biller_company:n.biller_company,biller_contact:n.biller_contact,price:n.price,quantity:n.quantity,state_of_report:n.state_of_report});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_pageSizeChange(e){this.pageSize=e.target.value,this.loadData()}pageChanged(e){this.pageIndex=e.page,this.loadData()}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyCSP(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",e).subscribe(e=>{this._csplist=e.data})}_exportAll(e){console.log("Origin",e);let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?m.W.s_done_en:m.W.s_done),3==n.status&&(e="en"==this.user.lang?m.W.s_validate_en:m.W.s_validate),2==n.status&&(e="en"==this.user.lang?m.W.s_techvalidate_en:m.W.s_techvalidate),1==n.status&&(e="en"==this.user.lang?m.W.s_prepare_en:m.W.s_prepare),0==n.status&&(e="en"==this.user.lang?m.W.s_none_en:m.W.s_none);let a=new Date(n.received_date).getTime()+864e5*n.tat,i="en"==this.user.lang?n.csp_name_e:n.csp_name_l,o=n.company_name_l+(null==n.phone?"":"/Phone: "+n.phone),l="";null!=n.receiver_company&&(l=n.receiver_company.company_name_l+(null==n.receiver_company.address_l?"":"/Address: "+n.receiver_company.address_l));let s="";null!=n.biller_company&&(s=n.biller_company.company_name_l+(null==n.biller_company.tax_code?"":"/Tax code: "+n.biller_company.tax_code)+(null==n.biller_company.address_l?"":"/Address: "+n.biller_company.address_l),null!=n.biller_contact&&(s+=(null==n.biller_contact.email?"":"/Email: "+n.biller_contact.email)+(null==n.biller_contact.phone?"":"/Phone: "+n.biller_contact.phone)));let c="Unknown";0==n.state_of_report&&(c="Draft"),1==n.state_of_report&&(c="Official"),2==n.state_of_report&&(c="Evicted"),3==n.state_of_report&&(c="Printed"),4==n.state_of_report&&(c="Cancel"),t.push({"Request No":n.request_no,"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,Note:null==n.note?"":n.note,"Note to Lab":null==n.note_lab?"":n.note_lab,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(a)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l,CSP:null==i?"":i,"Sample name":n.sample_name,Sender:o,Receiver:l,Biller:s,"Customer code":n.company_code,BD:n.employee_nr,Amount:this.formatPipe.localeString(n.price*n.quantity),"State of report":c})}this._excelService.exportAsExcelFile(t,"Preparation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+e.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+e.length+" "+m.W.record,"OK")}_exportAll1(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,this._dataService.post("/lab/exportgetlistlabspre",e).subscribe(e=>{let t=[];for(let n of e.data){let e="";4==n.status&&(e="en"==this.user.lang?m.W.s_done_en:m.W.s_done),3==n.status&&(e="en"==this.user.lang?m.W.s_validate_en:m.W.s_validate),2==n.status&&(e="en"==this.user.lang?m.W.s_techvalidate_en:m.W.s_techvalidate),1==n.status&&(e="en"==this.user.lang?m.W.s_prepare_en:m.W.s_prepare),0==n.status&&(e="en"==this.user.lang?m.W.s_none_en:m.W.s_none);let a=new Date(n.received_date).getTime()+864e5*n.tat,i="en"==this.user.lang?n.csp_name_e:n.csp_name_l,o=n.company_name_l+(null==n.phone?"":"/Phone: "+n.phone),l="";null!=n.receiver_company&&(l=n.receiver_company.company_name_l+(null==n.receiver_company.address_l?"":"/Address: "+n.receiver_company.address_l));let s="";null!=n.biller_company&&(s=n.biller_company.company_name_l+(null==n.biller_company.tax_code?"":"/Tax code: "+n.biller_company.tax_code)+(null==n.biller_company.address_l?"":"/Address: "+n.biller_company.address_l),null!=n.biller_contact&&(s+=(null==n.biller_contact.email?"":"/Email: "+n.biller_contact.email)+(null==n.biller_contact.phone?"":"/Phone: "+n.biller_contact.phone)));let c="Unknown";0==n.state_of_report&&(c="Draft"),1==n.state_of_report&&(c="Official"),2==n.state_of_report&&(c="Evicted"),3==n.state_of_report&&(c="Printed"),4==n.state_of_report&&(c="Cancel"),t.push({"Request No":n.request_no,"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,Note:null==n.note?"":n.note,"Note to Lab":null==n.note_lab?"":n.note_lab,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(a)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l,CSP:null==i?"":i,"Sample name":n.sample_name,Sender:o,Receiver:l,Biller:s,"Customer code":n.company_code,BD:n.employee_nr,Amount:this.formatPipe.localeString(n.price*n.quantity),"State of report":c})}this._excelService.exportAsExcelFile(t,"Preparation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_EXPORT_EN+" "+t.length+" "+m.W.record_en:m.W.MSG_EXPORT+" "+t.length+" "+m.W.record,"OK")})}orgValueChange1(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e,t){console.log(e),1==t?(e.status=t,h().fire({title:"en"==this.user.lang?m.W.are_u_sure_switch_en:m.W.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData()}):this.loadData()})):(console.log(e),this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData()}))}_switchFlagEdit(){for(let e of this._preparationlist)e.flag=!e.flag}_updateStatusItem(e,t){e.status=0==e.status?1:0,this._preparationlist.filter(t=>t.sample_id==e.sample_id&&t.parameter_id==e.parameter_id&&t.category_id==e.category_id)[0].status=e.status}_updateStatusv2(e){h().fire({title:"en"==this.user.lang?m.W.are_u_sure_switch_en:m.W.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(t=>{t.value&&this._dataService.post("/lab/updateResultPreparationv2",{getlist:e,ipaddress:this.user.ipaddress,user_id:this.user.id,short_code:this.user.short_code}).subscribe(e=>{this.loadData()})})}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.loadData(),this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_ADD_EN:m.W.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(Z.e),f.Y36(x.D),f.Y36(o.F0),f.Y36(A.c),f.Y36(b.C),f.Y36(T.x),f.Y36(Ge.p),f.Y36(y.FF))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-req-preparelab"]],hostBindings:function(e,t){1&e&&f.NdJ("click",function(e){return t.ngOnInit(e)},!1,f.evT)},decls:125,vars:124,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","13",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],[3,"ngClass","disabled","title","click",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",1),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"input",7),f.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"input",8),f.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),f.qZA(),f.TgZ(11,"input",9),f.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),f.qZA(),f.TgZ(12,"select",10),f.NdJ("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),f.TgZ(13,"option",11),f._uU(14),f.ALo(15,"translate"),f.ALo(16,"translate"),f.qZA(),f.YNc(17,ja,2,2,"option",12),f.qZA(),f.TgZ(18,"select",13),f.NdJ("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),f.TgZ(19,"option",11),f._uU(20),f.ALo(21,"translate"),f.qZA(),f.YNc(22,Ga,2,2,"option",12),f.qZA(),f.TgZ(23,"select",14),f.NdJ("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),f.TgZ(24,"option",15),f._uU(25),f.ALo(26,"translate"),f.qZA(),f.TgZ(27,"option",16),f._uU(28),f.ALo(29,"translate"),f.qZA(),f.TgZ(30,"option",17),f._uU(31),f.ALo(32,"translate"),f.qZA(),f.TgZ(33,"option",18),f._uU(34),f.ALo(35,"translate"),f.qZA(),f.TgZ(36,"option",19),f._uU(37),f.ALo(38,"translate"),f.qZA(),f.TgZ(39,"option",20),f._uU(40),f.ALo(41,"translate"),f.qZA(),f.qZA(),f.YNc(42,Ba,4,3,"button",21),f.YNc(43,za,5,6,"button",22),f.YNc(44,Va,1,0,"img",23),f.qZA(),f.qZA(),f.TgZ(45,"div",24),f.TgZ(46,"div",25),f.TgZ(47,"select",26),f.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),f.TgZ(48,"option",27),f._uU(49,"#10"),f.qZA(),f.TgZ(50,"option",28),f._uU(51,"#25"),f.qZA(),f.TgZ(52,"option",29),f._uU(53,"#50"),f.qZA(),f.TgZ(54,"option",30),f._uU(55,"#100"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(56,"div",31),f.TgZ(57,"div",32),f.TgZ(58,"div",33),f.TgZ(59,"div",34),f.TgZ(60,"pagination",35),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(61,"div",36),f.TgZ(62,"a",37),f._uU(63),f.ALo(64,"translate"),f.ALo(65,"translate"),f.ALo(66,"translate"),f.ALo(67,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(68,"div",32),f.TgZ(69,"div",38),f.TgZ(70,"table",39),f.TgZ(71,"thead",40),f.TgZ(72,"tr"),f.TgZ(73,"th",41),f._uU(74,"#"),f.qZA(),f.TgZ(75,"th",42),f._uU(76),f.ALo(77,"translate"),f.qZA(),f.TgZ(78,"th",43),f._uU(79),f.ALo(80,"translate"),f.qZA(),f.TgZ(81,"th",43),f._uU(82),f.ALo(83,"translate"),f.qZA(),f.TgZ(84,"th",43),f._uU(85),f.ALo(86,"translate"),f.qZA(),f.TgZ(87,"th",43),f._uU(88),f.ALo(89,"translate"),f.qZA(),f.TgZ(90,"th",43),f._uU(91),f.ALo(92,"translate"),f.qZA(),f.TgZ(93,"th",43),f._uU(94),f.ALo(95,"translate"),f.qZA(),f.TgZ(96,"th",43),f._uU(97),f.ALo(98,"translate"),f.qZA(),f.TgZ(99,"th",43),f._uU(100),f.ALo(101,"translate"),f.qZA(),f.TgZ(102,"th",43),f._uU(103),f.ALo(104,"translate"),f.qZA(),f.TgZ(105,"th",43),f._uU(106),f.ALo(107,"translate"),f.qZA(),f.TgZ(108,"th",43),f._uU(109),f.ALo(110,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(111,"tbody"),f.YNc(112,$a,6,3,"ng-container",44),f.YNc(113,di,2,1,"ng-container",44),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(114,"div",32),f.TgZ(115,"div",33),f.TgZ(116,"div",34),f.TgZ(117,"pagination",35),f.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),f.qZA(),f.qZA(),f.TgZ(118,"div",36),f.TgZ(119,"a",37),f._uU(120),f.ALo(121,"translate"),f.ALo(122,"translate"),f.ALo(123,"translate"),f.ALo(124,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(8),f.Q6J("placeholder",f.lcZ(9,62,"Search"))("ngModel",t._keyword),f.xp6(2),f.Q6J("ngModel",t._fDate)("bsConfig",f.DdM(122,ui)),f.xp6(1),f.Q6J("ngModel",t._tDate)("bsConfig",f.DdM(123,ui)),f.xp6(1),f.Q6J("ngModel",t.department_id),f.xp6(2),f.AsE(" ",f.lcZ(15,64,"All")," ",f.lcZ(16,66,"Department")," "),f.xp6(3),f.Q6J("ngForOf",t._deptlist),f.xp6(1),f.Q6J("ngModel",t.testcsp_id),f.xp6(2),f.hij("",f.lcZ(21,68,"All")," CSP"),f.xp6(2),f.Q6J("ngForOf",t._csplist),f.xp6(1),f.Q6J("ngModel",t._status),f.xp6(2),f.hij(" ",f.lcZ(26,70,"All")," "),f.xp6(3),f.hij(" ",f.lcZ(29,72,"None")," "),f.xp6(3),f.hij(" ",f.lcZ(32,74,"Preparation")," "),f.xp6(3),f.hij(" ",f.lcZ(35,76,"Technical validation")," "),f.xp6(3),f.hij(" ",f.lcZ(38,78,"Validation")," "),f.xp6(3),f.hij(" ",f.lcZ(41,80,"Done")," "),f.xp6(2),f.Q6J("ngIf",t._authenService.hasPermission("REQ-PRE","report")),f.xp6(1),f.Q6J("ngIf",t._authenService.hasPermission("REQ-PRE","report")),f.xp6(1),f.Q6J("ngIf",t._isLoading),f.xp6(3),f.Q6J("ngModel",t.pageSize),f.xp6(13),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(64,82,"Total of records"),": ",t.totalRow," - ",f.lcZ(65,84,"Page")," ",t.pageIndex," ",f.lcZ(66,86,"of")," ",t.totalPage," ",f.lcZ(67,88,"page"),""),f.xp6(13),f.Oqu(f.lcZ(77,90,"Actions")),f.xp6(3),f.hij(" ",f.lcZ(80,92,"Order code")," "),f.xp6(3),f.hij(" ",f.lcZ(83,94,"Inner code")," "),f.xp6(3),f.hij(" ",f.lcZ(86,96,"Code")," "),f.xp6(3),f.Oqu(f.lcZ(89,98,"Internal testing")),f.xp6(3),f.Oqu(f.lcZ(92,100,"Parameter name")),f.xp6(3),f.Oqu(f.lcZ(95,102,"Sample matrix")),f.xp6(3),f.Oqu(f.lcZ(98,104,"Sample nature")),f.xp6(3),f.Oqu(f.lcZ(101,106,"Priority")),f.xp6(3),f.Oqu(f.lcZ(104,108,"Note")),f.xp6(3),f.Oqu(f.lcZ(107,110,"Note lab")),f.xp6(3),f.Oqu(f.lcZ(110,112,"Status")),f.xp6(3),f.Q6J("ngIf",0==t._preparationlist.length),f.xp6(1),f.Q6J("ngIf",t._preparationlist.length>0),f.xp6(4),f.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),f.xp6(3),f.Q0o("",f.lcZ(121,114,"Total of records"),": ",t.totalRow," - ",f.lcZ(122,116,"Page")," ",t.pageIndex," ",f.lcZ(123,118,"of")," ",t.totalPage," ",f.lcZ(124,120,"page"),""))},directives:[i.Fj,i.JJ,i.On,q.Y5,q.Np,i.EJ,i.YN,i.Kr,a.sg,a.O5,v.Qt,a.mk],pipes:[S.X$],styles:[""]}),e})();const pi=["tagInput"];function _i(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",37),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(),n=f.MAs(88);return t._openModal(n,null)}),f._uU(1),f.ALo(2,"translate"),f.qZA()}2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Add new request")," "))}function hi(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",38),f.NdJ("click",function(){f.CHM(e);const t=f.oxw();return t._exportAll(t.exportList)}),f._UZ(1,"i",39),f._uU(2),f.ALo(3,"translate"),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Export")," "))}function mi(e,t){1&e&&f._UZ(0,"img",40)}function fi(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",41),f.TgZ(1,"div",42),f.TgZ(2,"pagination",43),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().pageIndex=t})("pageChanged",function(t){return f.CHM(e),f.oxw().pageChanged(t)}),f.qZA(),f.qZA(),f.TgZ(3,"div",44),f.TgZ(4,"a",45),f._uU(5),f.ALo(6,"translate"),f.ALo(7,"translate"),f.ALo(8,"translate"),f.ALo(9,"translate"),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(2),f.Q6J("boundaryLinks",!0)("totalItems",e.totalRow)("ngModel",e.pageIndex)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize),f.xp6(3),f.Q0o("",f.lcZ(6,12,"Total of records"),": ",e.totalRow," - ",f.lcZ(7,14,"Page")," ",e.pageIndex," ",f.lcZ(8,16,"of")," ",e.totalPage," ",f.lcZ(9,18,"page"),"")}}function Zi(e,t){1&e&&(f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td",46),f.TgZ(3,"h4"),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.qZA(),f.qZA(),f.BQk()),2&e&&(f.xp6(4),f.Oqu(f.lcZ(5,1,"No records now!!!")))}function xi(e,t){1&e&&(f.TgZ(0,"span"),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Cash")))}function Ai(e,t){1&e&&(f.TgZ(0,"span"),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Transfer bank")))}function bi(e,t){1&e&&(f.TgZ(0,"span"),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Visa/Master")))}function Ti(e,t){1&e&&(f.TgZ(0,"span"),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Cheque")))}function yi(e,t){1&e&&(f.TgZ(0,"span",59),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Unpaid")))}function qi(e,t){1&e&&(f.TgZ(0,"span",60),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Delivery-Unpaid")))}function vi(e,t){1&e&&(f.TgZ(0,"span",61),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Delivery-Paid")))}function Mi(e,t){1&e&&(f.TgZ(0,"span",62),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Cancel-Unpaid")))}function Si(e,t){1&e&&(f.TgZ(0,"span",63),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"Cancel-Refund")))}function Ci(e,t){if(1&e&&(f.TgZ(0,"span",69),f._uU(1),f.qZA()),2&e){const e=t.$implicit;f.xp6(1),f.Oqu(e)}}function wi(e,t){if(1&e&&(f.TgZ(0,"tr"),f.TgZ(1,"td",66),f._uU(2),f.qZA(),f.TgZ(3,"td",66),f._uU(4),f.qZA(),f.TgZ(5,"td",66),f._uU(6),f.qZA(),f.TgZ(7,"td",66),f._uU(8),f.qZA(),f.TgZ(9,"td",66),f._uU(10),f.qZA(),f.TgZ(11,"td",66),f.YNc(12,Ci,2,1,"span",67),f.qZA(),f.TgZ(13,"td",66),f._uU(14),f.qZA(),f.TgZ(15,"td",68),f._uU(16),f.ALo(17,"number"),f.qZA(),f.TgZ(18,"td",68),f._uU(19),f.ALo(20,"number"),f.qZA(),f.qZA()),2&e){const e=t.$implicit,n=t.index,a=f.oxw(4);f.xp6(2),f.Oqu(n+1),f.xp6(2),f.hij(" ","en"==a.user.lang?e.name_e:e.name_l," "),f.xp6(2),f.hij(" ",e.color_name_l," "),f.xp6(2),f.Oqu(e.code),f.xp6(2),f.hij(" ",e.quantity_info," "),f.xp6(2),f.Q6J("ngForOf",e.tags),f.xp6(2),f.hij(" ",e.total," "),f.xp6(2),f.hij(" ",f.lcZ(17,9,e.price)," "),f.xp6(3),f.hij(" ",f.lcZ(20,11,e.amount)," ")}}function Li(e,t){if(1&e&&(f.TgZ(0,"tr"),f.TgZ(1,"td",64),f.TgZ(2,"strong"),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"div",28),f.TgZ(6,"table",65),f.TgZ(7,"thead"),f.TgZ(8,"th",66),f._uU(9,"#"),f.qZA(),f.TgZ(10,"th",66),f._uU(11),f.ALo(12,"translate"),f.qZA(),f.TgZ(13,"th",66),f._uU(14),f.ALo(15,"translate"),f.qZA(),f.TgZ(16,"th",66),f._uU(17),f.ALo(18,"translate"),f.qZA(),f.TgZ(19,"th",66),f._uU(20),f.ALo(21,"translate"),f.qZA(),f.TgZ(22,"th",66),f._uU(23),f.ALo(24,"translate"),f.qZA(),f.TgZ(25,"th",66),f._uU(26),f.ALo(27,"translate"),f.qZA(),f.TgZ(28,"th",66),f._uU(29),f.ALo(30,"translate"),f.qZA(),f.TgZ(31,"th",66),f._uU(32),f.ALo(33,"translate"),f.qZA(),f.qZA(),f.TgZ(34,"tbody"),f.YNc(35,wi,21,13,"tr",47),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e){const e=f.oxw().$implicit;f.xp6(3),f.Oqu(f.lcZ(4,10,"Items Information")),f.xp6(8),f.hij(" ",f.lcZ(12,12,"Type of fabric")," "),f.xp6(3),f.hij(" ",f.lcZ(15,14,"Color name")," "),f.xp6(3),f.hij(" ",f.lcZ(18,16,"Mix-Fabric code")," "),f.xp6(3),f.hij(" ",f.lcZ(21,18,"Quantity")," "),f.xp6(3),f.hij(" ",f.lcZ(24,20,"Description")," "),f.xp6(3),f.hij(" ",f.lcZ(27,22,"Total")," (kg) "),f.xp6(3),f.hij(" ",f.lcZ(30,24,"Price")," "),f.xp6(3),f.hij(" ",f.lcZ(33,26,"Amount")," "),f.xp6(3),f.Q6J("ngForOf",e.orders)}}function Ui(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td"),f._uU(3),f.qZA(),f.TgZ(4,"td"),f.TgZ(5,"input",48),f.NdJ("change",function(t){const n=f.CHM(e).$implicit;return f.oxw(2).selectItem(t,n.id)}),f.qZA(),f.qZA(),f.TgZ(6,"td"),f._uU(7),f.ALo(8,"date"),f.qZA(),f.TgZ(9,"td",49),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return t.expanded=!t.expanded}),f._uU(10),f.qZA(),f.TgZ(11,"td"),f._uU(12),f.qZA(),f.TgZ(13,"td"),f._uU(14),f.qZA(),f.TgZ(15,"td"),f._uU(16),f.ALo(17,"number"),f.qZA(),f.TgZ(18,"td"),f.YNc(19,xi,3,3,"span",35),f.YNc(20,Ai,3,3,"span",35),f.YNc(21,bi,3,3,"span",35),f.YNc(22,Ti,3,3,"span",35),f.qZA(),f.TgZ(23,"td"),f.YNc(24,yi,3,3,"span",50),f.YNc(25,qi,3,3,"span",51),f.YNc(26,vi,3,3,"span",52),f.YNc(27,Mi,3,3,"span",53),f.YNc(28,Si,3,3,"span",54),f.qZA(),f.TgZ(29,"td"),f._uU(30),f.qZA(),f.TgZ(31,"td"),f.TgZ(32,"button",55),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw(2),a=f.MAs(88);return n._openModal(a,t)}),f.ALo(33,"translate"),f._UZ(34,"i",56),f.qZA(),f.TgZ(35,"button",57),f.NdJ("click",function(){const t=f.CHM(e).$implicit;return f.oxw(2).printQuotationAsPDF(t)}),f.ALo(36,"translate"),f._UZ(37,"i",58),f.qZA(),f.qZA(),f.qZA(),f.YNc(38,Li,36,28,"tr",35),f.BQk()}if(2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(3),f.Oqu(n+1+a.pageSize*(a.pageIndex-1)),f.xp6(2),f.MGl("name","ckU1",n+1,""),f.Q6J("checked",a.exportList.includes(e.id)),f.xp6(2),f.Oqu(f.xi3(8,21,e.issue_date,"dd/MM/yyyy HH:mm")),f.xp6(3),f.hij(" ",e.code," "),f.xp6(2),f.hij(" ","en"==a.user.lang?e.company_name_e:e.company_name_l," "),f.xp6(2),f.Oqu(e.phone),f.xp6(2),f.Oqu(f.lcZ(17,24,e.total)),f.xp6(3),f.Q6J("ngIf",0==e.payment),f.xp6(1),f.Q6J("ngIf",1==e.payment),f.xp6(1),f.Q6J("ngIf",2==e.payment),f.xp6(1),f.Q6J("ngIf",3==e.payment),f.xp6(2),f.Q6J("ngIf",0==e.is_active),f.xp6(1),f.Q6J("ngIf",1==e.is_active),f.xp6(1),f.Q6J("ngIf",2==e.is_active),f.xp6(1),f.Q6J("ngIf",3==e.is_active),f.xp6(1),f.Q6J("ngIf",4==e.is_active),f.xp6(2),f.Oqu(e.username),f.xp6(2),f.Q6J("ngbTooltip",f.lcZ(33,26,"Edit")),f.xp6(3),f.Q6J("ngbTooltip",f.lcZ(36,28,"Print")),f.xp6(3),f.Q6J("ngIf",e.expanded)}}function Ni(e,t){if(1&e&&(f.ynx(0),f.YNc(1,Ui,39,30,"ng-container",47),f.BQk()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngForOf",e._categories)}}function Di(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",41),f.TgZ(1,"div",42),f.TgZ(2,"pagination",43),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().pageIndex=t})("pageChanged",function(t){return f.CHM(e),f.oxw().pageChanged(t)}),f.qZA(),f.qZA(),f.TgZ(3,"div",44),f.TgZ(4,"a",45),f._uU(5),f.ALo(6,"translate"),f.ALo(7,"translate"),f.ALo(8,"translate"),f.ALo(9,"translate"),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(2),f.Q6J("boundaryLinks",!0)("totalItems",e.totalRow)("ngModel",e.pageIndex)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize),f.xp6(3),f.Q0o("",f.lcZ(6,12,"Total of records"),": ",e.totalRow," - ",f.lcZ(7,14,"Page")," ",e.pageIndex," ",f.lcZ(8,16,"of")," ",e.totalPage," ",f.lcZ(9,18,"page"),"")}}function ki(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"ng-select",100),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2).entity.customer_id=t})("change",function(){f.CHM(e);const t=f.oxw(2);return t.loadLabel(t.entity.customer_id)}),f.ALo(1,"translate"),f.ALo(2,"translate"),f.qZA()}if(2&e){const e=f.oxw(2);f.Q6J("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("bindLabel","en"==e.user.lang?"company_name_e":"company_name_l")("ngModel",e.entity.customer_id)("placeholder",f.lcZ(1,8,"Please choose"))("notFoundText",f.lcZ(2,10,"Not found item"))}}const Ii=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function Yi(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"input",101),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2)._fdate=t})("bsValueChange",function(t){return f.CHM(e),f.oxw(2).orgValueChange(t)}),f.ALo(1,"translate"),f.qZA()}if(2&e){const e=f.oxw(2);f.Q6J("placeholder",f.lcZ(1,3,"Issue of date"))("ngModel",e._fdate)("bsConfig",f.DdM(5,Ii))}}function Ji(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"input",102),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(2)._dt1=t}),f.qZA()}if(2&e){const e=f.oxw(2);f.Q6J("ngModel",e._dt1)}}function Oi(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",77),f.TgZ(1,"div",84),f.TgZ(2,"label",103),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"select",104),f.NdJ("change",function(){f.CHM(e);const t=f.oxw(2);return 2!=t.entity.is_active?null:t._confirmFinalOrder()})("ngModelChange",function(t){return f.CHM(e),f.oxw(2).entity.is_active=t}),f.TgZ(6,"option",20),f._uU(7),f.ALo(8,"translate"),f.qZA(),f.TgZ(9,"option",21),f._uU(10),f.ALo(11,"translate"),f.qZA(),f.TgZ(12,"option",22),f._uU(13),f.ALo(14,"translate"),f.qZA(),f.TgZ(15,"option",23),f._uU(16),f.ALo(17,"translate"),f.qZA(),f.TgZ(18,"option",24),f._uU(19),f.ALo(20,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw(2);f.xp6(3),f.Oqu(f.lcZ(4,8,"Status")),f.xp6(2),f.Q6J("disabled",2==e.entity.is_active)("ngModel",e.entity.is_active),f.xp6(2),f.Oqu(f.lcZ(8,10,"Unpaid")),f.xp6(3),f.Oqu(f.lcZ(11,12,"Delivery-Unpaid")),f.xp6(3),f.Oqu(f.lcZ(14,14,"Delivery-Paid")),f.xp6(3),f.Oqu(f.lcZ(17,16,"Cancel-Unpaid")),f.xp6(3),f.Oqu(f.lcZ(20,18,"Cancel-Refund"))}}function Qi(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"ng-select",107),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(3).selectId=t})("change",function(){f.CHM(e);const t=f.oxw(3);return t.addItem(t.selectId)}),f.ALo(2,"translate"),f.ALo(3,"translate"),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(3);f.xp6(1),f.Q6J("items",e._fabrics)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectId)("placeholder",f.lcZ(2,7,"Please choose"))("notFoundText",f.lcZ(3,9,"Not found item"))}}function Pi(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"ng-select",107),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw(3).selectId=t})("change",function(){f.CHM(e);const t=f.oxw(3);return t.addItem(t.selectId)}),f.ALo(2,"translate"),f.ALo(3,"translate"),f.qZA(),f.BQk()}if(2&e){const e=f.oxw(3);f.xp6(1),f.Q6J("items",e._fabrics)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectId)("placeholder",f.lcZ(2,7,"Please choose"))("notFoundText",f.lcZ(3,9,"Not found item"))}}function Ei(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",79),f.TgZ(1,"label",105),f.TgZ(2,"a",106),f.NdJ("click",function(){return f.CHM(e),f.oxw(2).loadProducts(!0)}),f._uU(3),f.ALo(4,"translate"),f.ALo(5,"translate"),f.qZA(),f._uU(6," | "),f.TgZ(7,"a",106),f.NdJ("click",function(){return f.CHM(e),f.oxw(2).loadProducts(!1)}),f._uU(8),f.ALo(9,"translate"),f.ALo(10,"translate"),f.qZA(),f.qZA(),f.YNc(11,Qi,4,11,"ng-container",35),f.YNc(12,Pi,4,11,"ng-container",35),f.qZA()}if(2&e){const e=f.oxw(2);f.xp6(2),f.Q6J("ngClass",e.flagIsType?"text-danger":"text-secondary"),f.xp6(1),f.AsE("",f.lcZ(4,8,"Items")," ",f.lcZ(5,10,"Mixed fabrics"),""),f.xp6(4),f.Q6J("ngClass",e.flagIsType?"text-secondary":"text-danger"),f.xp6(1),f.AsE("",f.lcZ(9,12,"Items")," ",f.lcZ(10,14,"Fabrics"),""),f.xp6(3),f.Q6J("ngIf",e.flagIsType),f.xp6(1),f.Q6J("ngIf",!e.flagIsType)}}function Ri(e,t){1&e&&(f.TgZ(0,"th",66),f._UZ(1,"i",108),f.qZA())}function Fi(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"td",66),f.TgZ(1,"a",115),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().$implicit;return f.oxw(2).removeItem(t.mixfabric_id)}),f._UZ(2,"i",108),f.qZA(),f.qZA()}}function Hi(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"input",116),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.quantity_info=t})("change",function(){f.CHM(e);const t=f.oxw().$implicit;return f.oxw(2).updateItem(t)}),f.qZA()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.MGl("id","ck",t+1,""),f.MGl("name","ck",t+1,""),f.Q6J("ngModel",n.quantity_info)}}function Wi(e,t){if(1&e&&(f.TgZ(0,"span"),f._uU(1),f.qZA()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.Oqu(e.quantity_info)}}function ji(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"input",117),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.tag=t})("keyup.enter",function(){f.CHM(e);const t=f.oxw().$implicit;return f.oxw(2)._addTag(t)})("change",function(){f.CHM(e);const t=f.oxw().$implicit;return f.oxw(2)._addTag(t)}),f.qZA()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.MGl("id","tag",t+1,""),f.MGl("name","tag",t+1,""),f.Q6J("ngModel",n.tag)}}function Gi(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"span",118),f.NdJ("click",function(){const t=f.CHM(e).$implicit,n=f.oxw().$implicit,a=f.oxw(2);return 0==a.entity.is_active?a._removeTag(n,t):null}),f._uU(1),f.qZA()}if(2&e){const e=t.$implicit;f.xp6(1),f.Oqu(e)}}function Bi(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"input",119),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().$implicit.price=t})("change",function(){f.CHM(e);const t=f.oxw().$implicit;return f.oxw(2).updateItem(t)}),f.qZA()}if(2&e){const e=f.oxw(),t=e.index,n=e.$implicit;f.MGl("id","p",t+1,""),f.MGl("name","p",t+1,""),f.Q6J("ngModel",n.price)}}function zi(e,t){if(1&e&&(f.TgZ(0,"span"),f._uU(1),f.ALo(2,"number"),f.qZA()),2&e){const e=f.oxw().$implicit;f.xp6(1),f.Oqu(f.lcZ(2,1,e.price))}}function Vi(e,t){if(1&e&&(f.TgZ(0,"tr"),f.YNc(1,Fi,3,0,"td",96),f.TgZ(2,"td",66),f._uU(3),f.qZA(),f.TgZ(4,"td",66),f._uU(5),f.qZA(),f.TgZ(6,"td",66),f._uU(7),f.qZA(),f.TgZ(8,"td",66),f._uU(9),f.qZA(),f.TgZ(10,"td",66),f.YNc(11,Hi,1,3,"input",109),f.YNc(12,Wi,2,1,"span",35),f.qZA(),f.TgZ(13,"td"),f.YNc(14,ji,1,3,"input",110),f._uU(15," ("),f.TgZ(16,"span",82),f._uU(17),f.qZA(),f._uU(18,") "),f.TgZ(19,"small",111),f.YNc(20,Gi,2,1,"span",112),f.qZA(),f.qZA(),f.TgZ(21,"td",113),f._uU(22),f.ALo(23,"number"),f.qZA(),f.TgZ(24,"td",68),f.YNc(25,Bi,1,3,"input",114),f.YNc(26,zi,3,3,"span",35),f.qZA(),f.TgZ(27,"td",68),f._uU(28),f.ALo(29,"number"),f.qZA(),f.qZA()),2&e){const e=t.$implicit,n=t.index,a=f.oxw(2);f.xp6(1),f.Q6J("ngIf",0==a.entity.is_active),f.xp6(2),f.Oqu(n+1),f.xp6(2),f.hij(" ",e.fabric_name," "),f.xp6(2),f.Oqu(e.color_name_l),f.xp6(2),f.Oqu(e.code),f.xp6(2),f.Q6J("ngIf",0==a.entity.is_active),f.xp6(1),f.Q6J("ngIf",0!=a.entity.is_active),f.xp6(2),f.Q6J("ngIf",0==a.entity.is_active),f.xp6(3),f.Oqu(e.count),f.xp6(3),f.Q6J("ngForOf",e.tags),f.xp6(2),f.hij(" ",f.lcZ(23,14,e.total)," "),f.xp6(3),f.Q6J("ngIf",0==a.entity.is_active),f.xp6(1),f.Q6J("ngIf",0!=a.entity.is_active),f.xp6(2),f.hij(" ",f.lcZ(29,16,e.amount)," ")}}function $i(e,t){1&e&&(f.ynx(0),f.TgZ(1,"a",120),f._UZ(2,"img",121),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.BQk()),2&e&&(f.xp6(3),f.hij(" ",f.lcZ(4,1,"Processing")," "))}function Ki(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"button",122),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2);return t.printQuotationAsPDF(t.entity)}),f.ALo(1,"translate"),f._UZ(2,"i",58),f._uU(3),f.ALo(4,"translate"),f.qZA()}2&e&&(f.Q6J("ngbTooltip",f.lcZ(1,2,"Print")),f.xp6(3),f.hij(" ",f.lcZ(4,4,"Print")," "))}function Xi(e,t){if(1&e&&(f.TgZ(0,"button",123),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e){f.oxw();const e=f.MAs(1);f.Q6J("disabled",!e.valid),f.xp6(1),f.hij(" ",f.lcZ(2,2,"Save")," ")}}function eo(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",70,71),f.NdJ("ngSubmit",function(){return f.CHM(e),f.oxw().saveChange()}),f.TgZ(2,"div",72),f.TgZ(3,"h4",73),f._uU(4),f.ALo(5,"translate"),f.ALo(6,"translate"),f.ALo(7,"translate"),f.qZA(),f.TgZ(8,"button",74),f.NdJ("click",function(){return f.CHM(e).$implicit.dismiss("Cross click")}),f.TgZ(9,"span",75),f._uU(10,"\xd7"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(11,"div",76),f.TgZ(12,"div",1),f.TgZ(13,"div",77),f.TgZ(14,"div",78),f.TgZ(15,"div",79),f.TgZ(16,"label",80),f.TgZ(17,"strong"),f._uU(18),f.ALo(19,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(20,"div",79),f.TgZ(21,"label",81),f._uU(22),f.ALo(23,"translate"),f.TgZ(24,"span",82),f._uU(25,"(*)"),f.qZA(),f.qZA(),f.YNc(26,ki,3,12,"ng-select",83),f.qZA(),f.TgZ(27,"div",77),f.TgZ(28,"div",84),f.TgZ(29,"label",85),f._uU(30),f.ALo(31,"translate"),f.TgZ(32,"span",82),f._uU(33,"(*)"),f.qZA(),f.qZA(),f.YNc(34,Yi,2,6,"input",86),f.YNc(35,Ji,1,1,"input",87),f.qZA(),f.qZA(),f.TgZ(36,"div",77),f.TgZ(37,"div",84),f.TgZ(38,"label",88),f._uU(39),f.ALo(40,"translate"),f.qZA(),f.TgZ(41,"select",89),f.NdJ("ngModelChange",function(t){return f.CHM(e),f.oxw().entity.payment=t}),f.TgZ(42,"option",90),f._uU(43),f.ALo(44,"translate"),f.qZA(),f.TgZ(45,"option",20),f._uU(46),f.ALo(47,"translate"),f.qZA(),f.TgZ(48,"option",21),f._uU(49),f.ALo(50,"translate"),f.qZA(),f.TgZ(51,"option",22),f._uU(52),f.ALo(53,"translate"),f.qZA(),f.TgZ(54,"option",23),f._uU(55),f.ALo(56,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(57,Oi,21,20,"div",91),f.TgZ(58,"div",79),f.TgZ(59,"div",84),f.TgZ(60,"label",92),f._uU(61),f.ALo(62,"translate"),f.qZA(),f._uU(63,"\xa0 "),f.TgZ(64,"span",93),f.TgZ(65,"strong"),f._uU(66),f.ALo(67,"number"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(68,"div",77),f.TgZ(69,"div",78),f.TgZ(70,"div",79),f.TgZ(71,"label",80),f.TgZ(72,"strong"),f._uU(73),f.ALo(74,"translate"),f.qZA(),f.qZA(),f.qZA(),f.YNc(75,Ei,13,16,"div",94),f.TgZ(76,"div",95),f.TgZ(77,"div",28),f.TgZ(78,"table",65),f.TgZ(79,"thead"),f.YNc(80,Ri,2,0,"th",96),f.TgZ(81,"th",66),f._uU(82,"#"),f.qZA(),f.TgZ(83,"th",66),f._uU(84),f.ALo(85,"translate"),f.qZA(),f.TgZ(86,"th",66),f._uU(87),f.ALo(88,"translate"),f.qZA(),f.TgZ(89,"th",66),f._uU(90),f.ALo(91,"translate"),f.qZA(),f.TgZ(92,"th",66),f._uU(93),f.ALo(94,"translate"),f.qZA(),f.TgZ(95,"th",66),f._uU(96),f.ALo(97,"translate"),f._UZ(98,"br"),f._uU(99,"VD: 10.5-12.4-11-12.5 "),f.qZA(),f.TgZ(100,"th",66),f._uU(101),f.ALo(102,"translate"),f.qZA(),f.TgZ(103,"th",66),f._uU(104),f.ALo(105,"translate"),f.qZA(),f.TgZ(106,"th",66),f._uU(107),f.ALo(108,"translate"),f.qZA(),f.qZA(),f.TgZ(109,"tbody"),f.YNc(110,Vi,30,18,"tr",47),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(111,"div",97),f.YNc(112,$i,5,3,"ng-container",35),f.YNc(113,Ki,5,6,"button",98),f.YNc(114,Xi,3,4,"button",99),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.xp6(4),f.AsE(" ","ADD"==e._flagModal?f.lcZ(5,34,"Add new"):f.lcZ(6,36,"Update")," #",f.lcZ(7,38,e.entity.code)," "),f.xp6(14),f.Oqu(f.lcZ(19,40,"General Information")),f.xp6(4),f.hij("",f.lcZ(23,42,"Customer")," "),f.xp6(4),f.Q6J("ngIf",0==e.entity.is_active),f.xp6(4),f.hij("",f.lcZ(31,44,"Issue of date")," "),f.xp6(4),f.Q6J("ngIf",0==e.entity.is_active),f.xp6(1),f.Q6J("ngIf",0!=e.entity.is_active),f.xp6(4),f.Oqu(f.lcZ(40,46,"Payment method")),f.xp6(2),f.Q6J("ngModel",e.entity.payment)("disabled",0!=e.entity.is_active),f.xp6(2),f.hij(" ",f.lcZ(44,48,"Please choose")," "),f.xp6(3),f.Oqu(f.lcZ(47,50,"Cash")),f.xp6(3),f.Oqu(f.lcZ(50,52,"Transfer bank")),f.xp6(3),f.Oqu(f.lcZ(53,54,"Visa/Mater")),f.xp6(3),f.Oqu(f.lcZ(56,56,"Cheque")),f.xp6(2),f.Q6J("ngIf","ADD"!=e._flagModal),f.xp6(4),f.Oqu(f.lcZ(62,58,"Total")),f.xp6(5),f.hij("",f.lcZ(67,60,e.entity.total)," VND"),f.xp6(7),f.Oqu(f.lcZ(74,62,"Items Information")),f.xp6(2),f.Q6J("ngIf",0==e.entity.is_active),f.xp6(5),f.Q6J("ngIf",0==e.entity.is_active),f.xp6(4),f.hij(" ",f.lcZ(85,64,"Type of fabric")," "),f.xp6(3),f.hij(" ",f.lcZ(88,66,"Color name")," "),f.xp6(3),f.hij(" ",f.lcZ(91,68,"Mix-Fabric code")," "),f.xp6(3),f.Oqu(f.lcZ(94,70,"Quantity")),f.xp6(3),f.hij(" ",f.lcZ(97,72,"Description")," "),f.xp6(5),f.hij(" ",f.lcZ(102,74,"Total")," (kg) "),f.xp6(3),f.Oqu(f.lcZ(105,76,"Price")),f.xp6(3),f.Oqu(f.lcZ(108,78,"Amount")),f.xp6(3),f.Q6J("ngForOf",e._orders),f.xp6(2),f.Q6J("ngIf",e.isSave),f.xp6(1),f.Q6J("ngIf",null!=e.entity.id),f.xp6(1),f.Q6J("ngIf",!e.isSave&&2!=e.entity.is_active)}}g().vfs=p.I.vfs;const to=[{path:"",children:[{path:"list",component:Wa,data:{title:"Request Management",breadcrumb:"Request Management"}},{path:"detail/:id",component:Pn,data:{title:"Request detail",breadcrumb:"Request detail"}},{path:"lab-preparation",component:gi,data:{title:"Lab preparation",breadcrumb:"Lab preparation"}},{path:"lab-result",component:Mt,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"lab-validation",component:Vt,data:{title:"Lab validation",breadcrumb:"Lab validation"}},{path:"lab-report-validation",component:Ne,data:{title:"Lab Report Validation",breadcrumb:"Lab Report Validation"}},{path:"lab-report-validation/:id",component:Ne,data:{title:"Validation"}},{path:"lab-report",component:We,data:{title:"Lab report",breadcrumb:"Lab report"}},{path:"lab-results/:id",component:re,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"orders-fabric",component:(()=>{class e{constructor(e,t,n,a,i,o,l,r,s){this._authService=e,this.modalService=t,this._dataService=n,this._route=a,this._notifyService=i,this._uploadService=o,this._excelService=l,this.formatPipe=r,this._utilityServce=s,this.isSave=!1,this.isSaveSub=!1,this.isImport=!1,this._flagModal="ADD",this._flagSubModal="",this._title="",this._subTitle="",this.baseFolder=d.h.BASE_API+"/",this._categories=[],this.exportList=[],this.entity={},this.entitySub={},this.formData=new FormData,this.pageIndex=1,this.pageSize=10,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._payment="",this._customers=[],this._fdate=null,this._dt1=null,this._fabrics=[],this._fabricsCompare=[],this._fabricsCompare1=[],this._orders=[],this.selectId=null,this.tags=["html","Angular"],this._numTags=0,this.flagIsType=!0,(!1===e.checkAccess("FAB-ORDER")||!1===e.hasPermission("FAB-ORDER","read"))&&this._route.navigate(["/error/404"]),this.socket=c()(d.h.BASE_API)}ngOnInit(){this.user=this._authService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",e=>{this.loadData(),this.loadCompany(),this.loadProducts(this.flagIsType)})}loadData(){let e={};e.page=this.pageIndex,e.limit=this.pageSize,e.filter=this._keyword,e.payment=this._payment,console.log(e),this._dataService.post("/order/getall",e).subscribe(e=>{console.log("Test",e),this._categories=e.data;for(let t of this._categories){let e=[];for(let n of t.orders)e.push({amount:n.amount,code:n.code,color_id:n.color_id,color_name_e:n.color_name_e,color_name_l:n.color_name_l,description:n.description,is_active:n.is_active,mixfabric_id:n.mixfabric_id,name_e:n.name_e,name_l:n.name_l,order_id:n.order_id,price:n.price,provider_name_e:n.provider_name_e,provider_name_l:n.provider_name_l,quantity_info:n.quantity_info,total:n.total,type_id:n.type_id,tags:JSON.parse(n.description)});t.orders=e}this.totalRow=e.rowCount,this.totalPage=e.totalPages})}loadProducts(e){this.flagIsType=e,e?this._dataService.post("/mix-fabric/getallnp",null).subscribe(e=>{console.log("Check warehouse",e);let t=[];for(let n of e.data){let e="en"==this.user.lang?"-Quantity (segment/kg):":"-S\u1ed1 l\u01b0\u1ee3ng (c\xe2y/kg):",a="Lo\u1ea1i: "+n.name_l+"- M\xe0u: "+n.color_name_l;n.total_segment_re>0&&t.push({id:n.id,name:n.code+"-"+a+e+n.total_segment_re+"/"+n.total_kg_re})}this._fabrics=t,this._fabricsCompare=e.data}):(this._fabrics=[],this._dataService.post("/mix-fabric/getalloriginfabricsnp",null).subscribe(e=>{console.log("Check warehouse IN",e);let t=[];for(let n of e.data){let e="en"==this.user.lang?"-Quantity (segment/kg):":"-S\u1ed1 l\u01b0\u1ee3ng (c\xe2y/kg):",a="Lo\u1ea1i: "+n.name_l;n.remaining_segment>0&&t.push({id:n.id,name:a+e+n.remaining_segment+"/"+n.remaining_kg})}this._fabrics=t,this._fabricsCompare1=e.data}))}loadProductNull(){this._dataService.post("/mix-fabric/getalloriginfabricsnp",null).subscribe(e=>{this._fabricsCompare1=e.data})}loadCompany(){let e={};e.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",e).subscribe(e=>{this._customers=e.data})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}selectAll(e){e.target.checked?(this.exportList=[],this._categories.forEach(e=>this.exportList.push(e.id))):this.exportList=[]}selectItem(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(e=>e!==t)}loadLabel(e){let t=this._customers.filter(t=>t.id==e);this._flagSubModal=null==e?"":t[0].code_link}_openModal(e,t){this.loadCompany(),this.loadProducts(this.flagIsType),null==t?(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.code=null,this.entity.payment=null,this.entity.total=0,this._orders=[],this._fdate=null,this._dt1=null,this.entity.is_active=0,this._flagSubModal=""):(this.loadProductNull(),this._flagModal="UPDATE",this._flagSubModal="en"==this.user.lang?t.company_name_e:t.company_name_l,this.loadDetail(t.id)),this.modalService.open(e,{size:"xl",centered:!0})}loadDetail(e){this._dataService.post("/order/detail",{id:e}).subscribe(e=>{console.log("Testing detail",e),this.entity=e.data,this._fdate=new Date(e.data.issue_date),this._dt1=r(new Date(e.data.issue_date)).format("YYYY-MM-DD HH:mm"),this._orders=e.data.orders;for(let t of this._orders){t.fabric_name="en"==this.user.lang?t.name_e:t.name_l,t.tag=null,t.tags=null==t.description?[]:JSON.parse(t.description),t.total_count=Math.ceil(t.quantity_info);let e=0;for(let n of t.tags)e+=n.split("-").length;t.count=e}})}saveChange(){let e={};e=this.entity,e.orders=this._orders,e.issue_date=this._dt1,e.created_by=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code,console.log("Ktra type",e);let t=!1,n=!1;for(let a of this._orders.filter(e=>2==e.type_id))if(console.log("QT",a.total_count),a.total_count>a.count&&(t=!0),null!=a.description&&""!=a.description){let e=JSON.parse(a.description),t=0;console.log("Test",e);for(let a of e){let e=a.split("-");console.log("Test1",e);for(let n of e)if(n>37){t+=1,console.log("Found",n);break}if(t>0){n=!0;break}}}console.log("Ktra type",t,n),t?this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_ORDER_EN:m.W.MSG_ERROR_ORDER,"en"==this.user.lang?m.W.error_title_en:m.W.error_title):n?this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_ORDER_QTY_EN:m.W.MSG_ERROR_ORDER_QTY,"en"==this.user.lang?m.W.error_title_en:m.W.error_title):(console.log("save",e),"ADD"==this._flagModal?this._dataService.post("/order/add",e).subscribe(e=>{this.socket.emit("refresh",{}),"failed"!=e.result?(this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_ADD_EN:m.W.MSG_ADD,"OK"),this.modalService.dismissAll()):this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)}):this._dataService.post("/order/update",e).subscribe(e=>{console.log(e),this.socket.emit("refresh",{}),"failed"!=e.result?(this._notifyService.showSuccess("en"==this.user.lang?m.W.MSG_UPDATE_EN:m.W.MSG_UPDATE,"OK"),this.modalService.dismissAll()):this._notifyService.showError("en"==this.user.lang?m.W.MSG_ERROR_EN:m.W.MSG_ERROR,"en"==this.user.lang?m.W.error_title_en:m.W.error_title)}))}orgValueChange(e){null!=e&&"Invalid date"!=e?(this._fdate=e,this._dt1=r(this._fdate).format("YYYY-MM-DD HH:mm")):(this._fdate=null,this._dt1=null)}addItem(e){if(null!=e){let t={};if(t.id=e,this.flagIsType)this._dataService.post("/mix-fabric/detail",t).subscribe(e=>{let t={};t={mixfabric_id:e.data.id,color_name_l:e.data.color_name_l,color_name_e:e.data.color_name_e,code:e.data.code,fabric_name:"en"==this.user.lang?e.data.cat_name_e:e.data.cat_name_l,price:0,quantity_info:1,amount:0,is_active:!0,tag:null,tags:null==e.data.description||null==e.data.description?[]:JSON.parse(e.data.description),total:0,type_id:e.data.type_id,count:0,total_count:Math.ceil(1),is_type:this.flagIsType},this._orders.length>0&&this._orders.filter(t=>t.mixfabric_id==e.data.id).length>0||this._orders.push(t),console.log("Order",this._orders),this.selectId=null;let n=0;for(let a of this._orders)n+=parseInt(a.amount);this.entity.total=Math.round(n);for(let a of this._orders)a.total_count=Math.ceil(a.quantity_info)});else{let t={},n=this._fabrics.filter(t=>t.id==e);console.log("testing",n);let a=this._fabricsCompare1.filter(t=>t.id==e);console.log("testing",a[0]);let i=n[0].name.substr(6,n[0].name.length);i=i.substr(0,i.indexOf("-")),t={mixfabric_id:e,color_name_l:null,color_name_e:null,code:null,fabric_name:i,price:0,quantity_info:1,amount:0,is_active:!0,tag:null,tags:[],total:0,type_id:a[0].type_id,count:0,total_count:Math.ceil(1),is_type:this.flagIsType},this._orders.length>0&&this._orders.filter(t=>t.mixfabric_id==e).length>0?(this._orders.filter(t=>t.mixfabric_id==e)[0].quantity_info+=1,0==n[0].type_id||1==n[0].type_id?this._orders.filter(t=>t.mixfabric_id==e)[0].quantity_info>n[0].qty_kg_after&&(this._orders.filter(t=>t.mixfabric_id==e)[0].quantity_info=n[0].qty_kg_after):this._orders.filter(t=>t.mixfabric_id==e)[0].quantity_info>n[0].quantity_tree&&(this._orders.filter(t=>t.mixfabric_id==e)[0].quantity_info=n[0].quantity_tree),this._orders.filter(t=>t.mixfabric_id==e)[0].amount=Math.round(this._orders.filter(t=>t.mixfabric_id==e)[0].total*this._orders.filter(t=>t.mixfabric_id==e)[0].price)):this._orders.push(t),console.log("Order",this._orders),this.selectId=null;let o=0;for(let e of this._orders)o+=parseInt(e.amount);this.entity.total=Math.round(o);for(let e of this._orders)e.total_count=Math.ceil(e.quantity_info)}}}removeItem(e){const t=this._orders.findIndex(t=>t.mixfabric_id==e);t>-1&&this._orders.splice(t,1);let n=0;for(let a of this._orders)n+=parseInt(a.amount),a.total_count=Math.ceil(a.quantity_info);this.entity.total=n,this.socket.emit("refresh",{})}updateItem(e){let t=this._fabricsCompare.filter(t=>t.id==e.mixfabric_id);if(0==e.is_type&&(t=this._fabricsCompare1.filter(t=>t.id==e.mixfabric_id)),(null==t[0]||e.is_type)&&(t=this._fabricsCompare.filter(t=>t.id==e.mixfabric_id)),0==t[0].type_id||1==t[0].type_id){console.log("chon Moc",t[0]);let n=parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info),a=e.is_type?t[0].total_kg_re:t[0].remaining_kg;console.log("SS",n,a),n>a?(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info=a,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].total=a):this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].total=n;let i=""==e.description||null==e.description||0==JSON.parse(e.description).length?0:JSON.parse(e.description)[0];this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].amount=Math.round(parseFloat(i)*parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].price))}else parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info)>parseFloat(t[0].quantity_tree)&&(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info=parseFloat(t[0].quantity_tree)),this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].amount=Math.round(parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].total)*parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].price));let n=0;for(let a of this._orders)n+=parseFloat(a.amount),a.total_count=Math.ceil(a.quantity_info);this.entity.total=Math.round(n),this.socket.emit("refresh",{}),console.log("Here",this._orders)}_confirmFinalOrder(){h().fire({title:"en"==this.user.lang?m.W.are_you_sure_en:m.W.are_you_sure,text:"en"==this.user.lang?m.W.MSG_CONFIRM_ORDER_EN:m.W.MSG_CONFIRM_ORDER,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?m.W.cancel_en:m.W.cancel,confirmButtonText:"en"==this.user.lang?m.W.confirmtext_en:m.W.confirmtext}).then(e=>{e.value?this.saveChange():this.loadDetail(this.entity.id)})}_addTag(e){let t=this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0];if(console.log("Add tag",t),0==t.type_id||1==t.type_id){let n=this._fabricsCompare.filter(t=>t.id==e.mixfabric_id);t.is_type||(n=this._fabricsCompare1.filter(t=>t.id==e.mixfabric_id)),console.log("Kiem tra",n[0]);let a=t.is_type?n[0].total_segment_re:n[0].remaining_segment,i=""==e.tag||null==e.tag?0:parseInt(e.tag);if(console.log("Kiem tra",a,i),i>a)return void this._notifyService.showError("S\u1ed1 l\u01b0\u1ee3ng Bo c\u1ed5/tay v\u01b0\u1ee3t qu\xe1 trong kho","B\xe1o l\u1ed7i");if(0==t.tags.length){let n="";for(let t of e.tag.split("-"))this._utilityServce.isNumber(t)&&(n+=t+"-");t.tags.push(n.substr(0,n.length-1)),t.amount=i*parseFloat(t.price)}this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tag=null,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tags=t.tags;let o=0;for(let e of t.tags)o+=e.split("-").length;this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].count=o;let l=0;for(let e of this._orders)l+=parseFloat(e.amount);this.entity.total=l,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].description=JSON.stringify(t.tags)}else{if(t.total_count<t.count+e.tag.split("-").length)return void console.log("Overload");if(0==t.tags.length){let n="",a=0;for(let t of e.tag.split("-"))this._utilityServce.isNumber(t)&&(n+=t+"-",a+=parseFloat(t));t.tags.push(n.substr(0,n.length-1)),t.total=a,t.amount=a*parseFloat(t.price)}else{t.tags.push(e.tag);let n=0;for(let e of t.tags){let t="";for(let a of e.split("-"))this._utilityServce.isNumber(a)&&(t+=a+"-",n+=parseFloat(a));e=t.substr(0,t.length-1)}t.total=n,t.amount=n*parseFloat(t.price)}this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tag=null,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tags=t.tags;let n=0;for(let e of t.tags)n+=e.split("-").length;this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].count=n;let a=0;for(let e of this._orders)a+=parseFloat(e.amount);this.entity.total=a,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].description=JSON.stringify(t.tags)}console.log("Added tag",this._orders)}_removeTag(e,t){let n=this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0];if(0==n.type_id||1==n.type_id){n.tags.findIndex(e=>e==t)>-1&&n.tags.splice(n.tags.findIndex(e=>e==t),1),this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tag=null,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tags=n.tags;for(let e of n.tags){let t="";for(let n of e.split("-"))this._utilityServce.isNumber(n)&&(t+=n+"-");e=t.substr(0,t.length-1)}n.amount=0;let a=0;for(let e of this._orders)a+=parseFloat(e.amount);this.entity.total=a;let i=0;for(let e of n.tags)i+=e.split("-").length;this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].count=i,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].description=JSON.stringify(n.tags)}else{n.tags.findIndex(e=>e==t)>-1&&n.tags.splice(n.tags.findIndex(e=>e==t),1),this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tag=null,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tags=n.tags;let a=0;for(let e of n.tags){let t="";for(let n of e.split("-"))this._utilityServce.isNumber(n)&&(t+=n+"-",a+=parseFloat(n));e=t.substr(0,t.length-1)}n.total=a,n.amount=a*parseFloat(n.price);let i=0;for(let e of this._orders)i+=parseFloat(e.amount);this.entity.total=i;let o=0;for(let e of n.tags)o+=e.split("-").length;this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].count=o,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].description=JSON.stringify(n.tags)}console.log("Removed tag",this._orders)}printQuotationAsPDF(e){return(0,l.__awaiter)(this,void 0,void 0,function*(){let t=r(new Date).format("YYYYMMDD");console.log("KQ In",e);var n=[];n.push({text:"\n"}),n.push({alignment:"justify",columns:[{text:["T\xean kh\xe1ch h\xe0ng: ",{text:e.company_name_l,bold:!0},"\n","\u0110\u1ecba ch\u1ec9: ",{text:null==e.address_l?"":e.address_l,bold:!0},"\n","Ng\u01b0\u1eddi li\xean h\u1ec7: ",{text:null==e.contact_name?"":e.contact_name,bold:!0},"\n","\u0110i\u1ec7n tho\u1ea1i: ",{text:null==e.phone?"":e.phone,bold:!0},"\n","Email: ",{text:null==e.email?"":e.email,bold:!0}],style:"body_top"},{qr:e.code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),n.push({text:"\n"}),n.push({text:"\n"}),n.push({table:{headerRows:1,widths:[25,"*",90,90,40,180,55,50,70],body:[[{border:[!0,!0,!0,!0],text:{text:"STT",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Lo\u1ea1i v\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe0u",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe3 m\u1ec5",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"S\u1ed1 c\xe2y",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Di\u1ec5n gi\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"T\u1ed5ng (kg)",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"\u0110\u01a1n gi\xe1",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Th\xe0nh ti\u1ec1n",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}});var a=1,i=[];for(let r of e.orders){let e="",t=null==r.description?[]:JSON.parse(r.description);for(let n of t)for(let t of n.split("-"))e+=t+" - ";i.push({STT:a,LoaiVai:r.name_l,Mau:null==r.color_name_l?"":r.color_name_l,Code:null==r.code?"":r.code.toUpperCase().toUpperCase(),SoCay:r.quantity_info,DienGiai:""==e?"":e.substr(0,e.length-3),Tong:r.total,Price:this.formatPipe.localeString(r.price),Amount:this.formatPipe.localeString(r.amount)}),a+=1}n.push(this.tablePrintQuotation(i,["STT","LoaiVai","Mau","Code","SoCay","DienGiai","Tong","Price","Amount"],[25,"*",90,90,40,180,55,50,70],!0)),n.push({text:"\n"}),n.push({columns:[{width:"*",text:"Ch\u1eef k\xfd kh\xe1ch h\xe0ng",fontSize:10},{width:"200",text:"Ng\xe0y l\u1eadp "+r(new Date(e.issue_date)).format("DD/MM/YYYY HH:mm a"),alignment:"center",fontSize:10}]});const o={pageSize:"A4",pageMargins:[25,30,25,70],defaultStyle:{fontSize:12,columnGap:20},pageOrientation:"landscape",content:[{text:"TH\xd4NG TIN \u0110\u01a0N H\xc0NG",style:"title_top"},{text:"\n"},n],footer:(e,t,n)=>({table:{widths:[160,"*"],body:[[{border:[!1,!0,!1,!1],text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],text:"",alignment:"right",style:"body_footer"}],[{width:160,text:"",alignment:"left"},{width:150,alignment:"right",text:"Trang "+e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}),header:(e,t,n)=>({table:{widths:[160,"*"],body:[[{width:160,height:30,text:"C\u1eeda h\xe0ng v\u1ea3i VA",alignment:"left"},{width:150,height:30,alignment:"right",text:""}],[{width:160,border:[!1,!0,!1,!1],text:"",alignment:"left"},{width:150,border:[!1,!0,!1,!1],alignment:"right",text:""}]]},layout:{defaultBorder:!1}}),styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}}};var l="'print-'"+t+".pdf";l=l.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g().createPdf(o).open()})}tablePrintQuotation(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,a)}}}buildTableBodyPrintQuotation(e,t,n){var a=[];let i=0;return e.forEach(function(e){var o=[],l=1;t.forEach(function(t){o.push({text:{text:e[t],noWrap:!1},alignment:2==l||3==l?"left":8==l||9==l?"right":"center",fontSize:10,italics:2==l&&n[i]}),l+=1,i+=1}),a.push(o)}),a}_convertBase64ImageFromURL(e){return new Promise((t,n)=>{var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=e=>{n(e)},a.src=e})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(Z.e),f.Y36(y.FF),f.Y36(x.D),f.Y36(o.F0),f.Y36(A.c),f.Y36(b.C),f.Y36(T.x),f.Y36(Ge.p),f.Y36($t.t))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-fab-orders"]],viewQuery:function(e,t){if(1&e&&f.Gf(pi,5),2&e){let e;f.iGM(e=f.CRH())&&(t.tagInputRef=e.first)}},decls:89,vars:60,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],["class","form-inline",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"table-primary"],[2,"width","2px","text-align","center"],[2,"width","10px","text-align","center"],["type","checkbox","name","checkAll",3,"disabled","checked","change"],["scope","col"],[4,"ngIf"],["orderModal",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],["colspan","11",1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["type","checkbox",3,"name","checked","change"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-light",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],[1,"btn","btn-sm","btn-info","mr-sm-1",3,"ngbTooltip","click"],[1,"fa","fa-print"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"badge","badge-light"],["colspan","11",1,"text-truncate"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate"],["class","badge badge-primary","style","cursor: pointer",4,"ngFor","ngForOf"],[1,"text-truncate","text-right"],[1,"badge","badge-primary",2,"cursor","pointer"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-6"],[1,"form-group","row"],[1,"col-12"],[1,"text-primary"],["for","Company"],[1,"text-danger"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change",4,"ngIf"],[1,"form-group"],["for","issue_date"],["type","text","class","form-control","bsDatepicker","","name","_fdate","autocomplete","off","required","",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange",4,"ngIf"],["type","text","class","form-control","style","background-color: rgb(235, 235, 235)","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],["for","payment"],["name","payment",1,"form-control",3,"ngModel","disabled","ngModelChange"],["value","null"],["class","col-6",4,"ngIf"],["for","total"],[1,"title","text-danger"],["class","col-12",4,"ngIf"],[1,"col-md-12"],["class","text-truncate",4,"ngIf"],[1,"modal-footer"],["class","btn btn-info mr-sm-1",3,"ngbTooltip","click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["type","text","disabled","",1,"form-control",2,"background-color","rgb(235, 235, 235)",3,"ngModel","ngModelChange"],["for","status"],["id","status","name","status",1,"form-control",3,"disabled","ngModel","change","ngModelChange"],["for","Items"],["href","javascript:;",3,"ngClass","click"],["name","Items","bindValue","id","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],[1,"fa","fa-trash"],["type","text","min","1","class","form-control form-control-sm","style","width: 80px","autocomplete","off","mask","separator.2","thousandSeparator",",",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["type","text","class","form-control form-control-sm","style","width: 100%","autocomplete","off",3,"id","name","ngModel","ngModelChange","keyup.enter","change",4,"ngIf"],[1,"mute"],["class","badge badge-primary","style","cursor: pointer",3,"click",4,"ngFor","ngForOf"],[1,"text-truncate","text-center"],["type","text","mask","separator.2","thousandSeparator",",","class","form-control form-control-sm","style","width: 100px",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["href","javascript:;",1,"text-primary",3,"click"],["type","text","min","1","autocomplete","off","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","80px",3,"id","name","ngModel","ngModelChange","change"],["type","text","autocomplete","off",1,"form-control","form-control-sm",2,"width","100%",3,"id","name","ngModel","ngModelChange","keyup.enter","change"],[1,"badge","badge-primary",2,"cursor","pointer",3,"click"],["type","text","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","100px",3,"id","name","ngModel","ngModelChange","change"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],[1,"btn","btn-info","mr-sm-1",3,"ngbTooltip","click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",1),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"input",7),f.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),f.ALo(9,"translate"),f.qZA(),f.YNc(10,_i,3,3,"button",8),f.YNc(11,hi,4,3,"button",9),f.YNc(12,mi,1,0,"img",10),f.qZA(),f.qZA(),f.TgZ(13,"div",11),f.TgZ(14,"div",12),f.TgZ(15,"select",13),f.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),f.TgZ(16,"option",14),f._uU(17,"#10"),f.qZA(),f.TgZ(18,"option",15),f._uU(19,"#25"),f.qZA(),f.TgZ(20,"option",16),f._uU(21,"#50"),f.qZA(),f.TgZ(22,"option",17),f._uU(23,"#100"),f.qZA(),f.qZA(),f.TgZ(24,"select",18),f.NdJ("ngModelChange",function(e){return t._payment=e})("change",function(){return t.loadData()}),f.TgZ(25,"option",19),f._uU(26),f.ALo(27,"translate"),f.qZA(),f.TgZ(28,"option",20),f._uU(29),f.ALo(30,"translate"),f.qZA(),f.TgZ(31,"option",21),f._uU(32),f.ALo(33,"translate"),f.qZA(),f.TgZ(34,"option",22),f._uU(35),f.ALo(36,"translate"),f.qZA(),f.TgZ(37,"option",23),f._uU(38),f.ALo(39,"translate"),f.qZA(),f.TgZ(40,"option",24),f._uU(41),f.ALo(42,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(43,"div",25),f.TgZ(44,"div",26),f.YNc(45,fi,10,20,"div",27),f.qZA(),f.TgZ(46,"div",26),f.TgZ(47,"div",28),f.TgZ(48,"table",29),f.TgZ(49,"thead",30),f.TgZ(50,"tr"),f.TgZ(51,"th",31),f._uU(52,"#"),f.qZA(),f.TgZ(53,"th",32),f.TgZ(54,"input",33),f.NdJ("change",function(e){return t.selectAll(e)}),f.qZA(),f.qZA(),f.TgZ(55,"th",34),f._uU(56),f.ALo(57,"translate"),f.qZA(),f.TgZ(58,"th",34),f._uU(59),f.ALo(60,"translate"),f.qZA(),f.TgZ(61,"th",34),f._uU(62),f.ALo(63,"translate"),f.qZA(),f.TgZ(64,"th",34),f._uU(65),f.ALo(66,"translate"),f.qZA(),f.TgZ(67,"th",34),f._uU(68),f.ALo(69,"translate"),f.qZA(),f.TgZ(70,"th",34),f._uU(71),f.ALo(72,"translate"),f.qZA(),f.TgZ(73,"th",34),f._uU(74),f.ALo(75,"translate"),f.qZA(),f.TgZ(76,"th",34),f._uU(77),f.ALo(78,"translate"),f.qZA(),f.TgZ(79,"th",34),f._uU(80),f.ALo(81,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(82,"tbody"),f.YNc(83,Zi,6,3,"ng-container",35),f.YNc(84,Ni,2,1,"ng-container",35),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(85,"div",26),f.YNc(86,Di,10,20,"div",27),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(87,eo,115,80,"ng-template",null,36,f.W1O)),2&e&&(f.xp6(8),f.Q6J("placeholder",f.lcZ(9,28,"Search"))("ngModel",t._keyword),f.xp6(2),f.Q6J("ngIf",t._authService.hasPermission("FAB-ORDER","create")),f.xp6(1),f.Q6J("ngIf",t._authService.hasPermission("FAB-ORDER","report")),f.xp6(1),f.Q6J("ngIf",t._isLoading),f.xp6(3),f.Q6J("ngModel",t.pageSize),f.xp6(9),f.Q6J("ngModel",t._payment),f.xp6(2),f.hij(" ",f.lcZ(27,30,"All")," "),f.xp6(3),f.hij(" ",f.lcZ(30,32,"Unpaid")," "),f.xp6(3),f.hij(" ",f.lcZ(33,34,"Delivery-Unpaid")," "),f.xp6(3),f.hij(" ",f.lcZ(36,36,"Delivery-Paid")," "),f.xp6(3),f.hij(" ",f.lcZ(39,38,"Cancel-Unpaid")," "),f.xp6(3),f.hij(" ",f.lcZ(42,40,"Cancel-Refund")," "),f.xp6(4),f.Q6J("ngIf",t._categories.length>0),f.xp6(9),f.Q6J("disabled",0==t._categories.length)("checked",t.exportList.length==t._categories.length),f.xp6(2),f.hij(" ",f.lcZ(57,42,"Issue of date")," "),f.xp6(3),f.hij(" ",f.lcZ(60,44,"Order code")," "),f.xp6(3),f.hij(" ",f.lcZ(63,46,"Customers")," "),f.xp6(3),f.hij(" ",f.lcZ(66,48,"Phone")," "),f.xp6(3),f.hij(" ",f.lcZ(69,50,"Total")," "),f.xp6(3),f.hij(" ",f.lcZ(72,52,"Payment method")," "),f.xp6(3),f.Oqu(f.lcZ(75,54,"Status")),f.xp6(3),f.Oqu(f.lcZ(78,56,"Created by")),f.xp6(3),f.Oqu(f.lcZ(81,58,"Actions")),f.xp6(3),f.Q6J("ngIf",0==t._categories.length),f.xp6(1),f.Q6J("ngIf",t._categories.length>0),f.xp6(2),f.Q6J("ngIf",t._categories.length>0))},directives:[i.Fj,i.JJ,i.On,a.O5,i.EJ,i.YN,i.Kr,v.Qt,a.sg,y._L,i._Y,i.JL,i.F,M.w9,i.Q7,q.Y5,q.Np,a.mk,Kt.hx],pipes:[S.X$,a.uU,a.JJ],styles:[""]}),e})(),data:{title:"Orders",breadcrumb:"Orders"}}]}];let no=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[o.Bz.forChild(to)],o.Bz]}),e})();var ao=n(72533),io=n(93184),oo=n(10743),lo=n(70453),ro=n(63301),so=n(75690),co=n(16417),uo=n(25689),go=n(26853);let po=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({providers:[Z.e,x.D,S.sK,b.C,$t.t,Ge.p,go.A],imports:[[a.ez,i.u5,no,ao.JX,io.m9,oo.mr,q.kn.forRoot(),v.u3.forRoot(),lo.f.forRoot(),ro.zk.forRoot(),S.aw,so.P4.forRoot(),y.IJ,co.xc,uo.kW,M.A0,Kt.yI.forRoot()]]}),e})()}}]);