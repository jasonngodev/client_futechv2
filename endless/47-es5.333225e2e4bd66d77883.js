!function(){function e(e,n){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var c=0,i=function(){};return{s:i,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==a.return||a.return()}finally{if(l)throw o}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{d8eE:function(t,a,i){"use strict";i.r(a),i.d(a,"RequestModule",function(){return Tc});var o=i("ofXK"),r=i("3Pt+"),l=i("tyNb"),d=i("mrSG"),s=i("wd/R"),h=i("gFX4"),g=i.n(h),u=i("CMKA"),f=i("5JmO"),_=i.n(f),m=i("TruH"),p=i.n(m),b=i("PSD3"),v=i.n(b),y=i("piOG"),x=i("fXoL"),S=i("7dP1"),w=i("cplz"),N=i("3t6R"),D=i("25+x"),M=i("VToC"),C=i("1kSV"),k=i("hzby"),T=i("Lm2G"),I=i("ZOsW"),P=i("sYmb");function R(e,t){if(1&e){var n=x.ic();x.hc(0,"button",44),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e._getlist)}),x.cc(1,"i",45),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function E(e,t){1&e&&x.cc(0,"img",46)}function A(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",47),x.hc(3,"h3",48),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function O(e,t){if(1&e){var n=x.ic();x.hc(0,"a",62),x.rc("click",function(){x.Uc(n);var e=x.vc(2).$implicit,t=x.vc(2),a=x.Rc(108);return t._switchLanguage(a,3,e)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Report standard compared")))}function Y(e,t){if(1&e){var n=x.ic();x.hc(0,"a",62),x.rc("click",function(){x.Uc(n);var e=x.vc(2).$implicit,t=x.vc(2),a=x.Rc(108);return t._switchLanguage(a,4,e)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Report standard attached")))}function U(e,t){if(1&e){var n=x.ic();x.hc(0,"div",58),x.hc(1,"button",59),x.cc(2,"i",60),x.gc(),x.hc(3,"div",61),x.hc(4,"a",62),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit,t=x.vc(2),a=x.Rc(108);return t._switchLanguage(a,0,e)}),x.dd(5),x.wc(6,"translate"),x.gc(),x.hc(7,"a",62),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit,t=x.vc(2),a=x.Rc(108);return t._switchLanguage(a,1,e)}),x.dd(8),x.wc(9,"translate"),x.gc(),x.bd(10,O,3,3,"a",63),x.bd(11,Y,3,3,"a",63),x.gc(),x.gc()}if(2&e){var a=x.vc().$implicit;x.Nb(5),x.ed(x.xc(6,4,"All")),x.Nb(3),x.ed(x.xc(9,6,"Report standard")),x.Nb(2),x.Dc("ngIf",a.flag_compare),x.Nb(1),x.Dc("ngIf",null!=a.url_img)}}function F(e,t){if(1&e){var n=x.ic();x.hc(0,"a",65),x.rc("click",function(){x.Uc(n);var e=x.vc(2).$implicit,t=x.vc(2),a=x.Rc(112);return t._editInformation(a,e)}),x.cc(1,"i",66),x.gc()}}function L(e,t){if(1&e&&(x.fc(0),x.bd(1,F,2,0,"a",64),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngIf",n._authenService.hasPermission("REQ-REPORT","update"))}}function q(e,t){1&e&&(x.hc(0,"span",67),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Draft")," "))}function z(e,t){1&e&&(x.hc(0,"span",68),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Official")," "))}function G(e,t){1&e&&(x.hc(0,"span",69),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Evicted")," "))}function V(e,t){1&e&&(x.hc(0,"span",70),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Printed")," "))}function B(e,t){1&e&&(x.hc(0,"span",71),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Cancel")," "))}function H(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",50),x.dd(2),x.gc(),x.hc(3,"td"),x.bd(4,U,12,8,"div",51),x.bd(5,L,2,1,"ng-container",40),x.gc(),x.hc(6,"td"),x.dd(7),x.gc(),x.hc(8,"td"),x.dd(9),x.gc(),x.hc(10,"td"),x.dd(11),x.gc(),x.hc(12,"td"),x.dd(13),x.wc(14,"date"),x.gc(),x.hc(15,"td"),x.dd(16),x.wc(17,"date"),x.gc(),x.hc(18,"td"),x.dd(19),x.gc(),x.hc(20,"td"),x.dd(21),x.gc(),x.hc(22,"td",52),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2),c=x.Rc(110);return 2!=e.is_active&&a._authenService.hasPermission("REQ-REPORT","update")?3==e.is_active?a._switchEviction(e):a._popupStates(c,e):null}),x.bd(23,q,3,3,"span",53),x.bd(24,z,3,3,"span",54),x.bd(25,G,3,3,"span",55),x.bd(26,V,3,3,"span",56),x.bd(27,B,3,3,"span",57),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.Dc("ngIf",i._authenService.hasPermission("REQ-REPORT","print")),x.Nb(1),x.Dc("ngIf",0==a.is_active||1==a.is_active),x.Nb(2),x.fd(" ",a.report_inner_code," "),x.Nb(2),x.fd(" ",a.request_no," "),x.Nb(2),x.fd(" ",a.sample_name," "),x.Nb(2),x.ed(x.yc(14,15,a.received_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.ed(x.yc(17,18,a.returned_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.ed(a.company_sender_l),x.Nb(2),x.ed(a.sender_name),x.Nb(2),x.Dc("ngIf",0==a.is_active),x.Nb(1),x.Dc("ngIf",1==a.is_active),x.Nb(1),x.Dc("ngIf",2==a.is_active),x.Nb(1),x.Dc("ngIf",3==a.is_active),x.Nb(1),x.Dc("ngIf",4==a.is_active)}}function Q(e,t){if(1&e&&(x.fc(0),x.bd(1,H,28,21,"tr",49),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._getlist)}}function $(e,t){if(1&e){var n=x.ic();x.hc(0,"form",72),x.hc(1,"div",73),x.hc(2,"h4",74),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",75),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",76),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",77),x.hc(9,"div",78),x.hc(10,"div",79),x.hc(11,"div",80),x.hc(12,"button",81),x.rc("click",function(){return x.Uc(n),x.vc()._print("vn")}),x.dd(13),x.wc(14,"translate"),x.gc(),x.hc(15,"button",82),x.rc("click",function(){return x.Uc(n),x.vc()._print("en")}),x.dd(16),x.wc(17,"translate"),x.gc(),x.hc(18,"button",83),x.rc("click",function(){return x.Uc(n),x.vc()._print("0")}),x.dd(19),x.wc(20,"translate"),x.wc(21,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}2&e&&(x.Nb(3),x.fd(" ",x.xc(4,5,"Language")," "),x.Nb(10),x.fd(" ",x.xc(14,7,"Vietnamese")," "),x.Nb(3),x.fd(" ",x.xc(17,9,"English")," "),x.Nb(3),x.gd(" ",x.xc(20,11,"Vietnamese"),"/",x.xc(21,13,"English")," "))}function K(e,t){if(1&e){var n=x.ic();x.hc(0,"form",72),x.hc(1,"div",73),x.hc(2,"h4",74),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",75),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",76),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",77),x.hc(9,"div",78),x.hc(10,"div",79),x.hc(11,"div",80),x.hc(12,"select",84),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().changeState=e})("change",function(){return x.Uc(n),x.vc()._updateState()}),x.hc(13,"option",85),x.dd(14),x.wc(15,"translate"),x.gc(),x.hc(16,"option",85),x.dd(17),x.wc(18,"translate"),x.gc(),x.hc(19,"option",85),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"option",85),x.dd(23),x.wc(24,"translate"),x.gc(),x.hc(25,"option",85),x.dd(26),x.wc(27,"translate"),x.gc(),x.hc(28,"option",85),x.dd(29),x.wc(30,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.gd(" ",x.xc(4,15,"Status")," - ",a._titleLanguage," "),x.Nb(9),x.Dc("ngModel",a.changeState),x.Nb(1),x.Dc("value",null),x.Nb(1),x.ed(x.xc(15,17,"Please choose")),x.Nb(2),x.Dc("value",0),x.Nb(1),x.ed(x.xc(18,19,"Draft")),x.Nb(2),x.Dc("value",1),x.Nb(1),x.ed(x.xc(21,21,"Official")),x.Nb(2),x.Dc("value",2),x.Nb(1),x.ed(x.xc(24,23,"Evicted")),x.Nb(2),x.Dc("value",3),x.Nb(1),x.ed(x.xc(27,25,"Printed")),x.Nb(2),x.Dc("value",4),x.Nb(1),x.ed(x.xc(30,27,"Cancel"))}}function j(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"button",108),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(2)._chooseTab(e,e.order_no)}),x.dd(2),x.wc(3,"translate"),x.gc(),x.ec()}if(2&e){var a=t.$implicit,c=x.vc(2);x.Nb(1),x.Dc("ngClass",a.order_no==c._currentTabActivated?"btn btn-sm btn-primary":"btn btn-sm btn-secondary"),x.Nb(1),x.gd(" ",x.xc(3,3,"Sample")," ",a.order_no," ")}}var W=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function J(e,t){if(1&e){var n=x.ic();x.hc(0,"form",72),x.hc(1,"div",73),x.hc(2,"h4",74),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",75),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",76),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",77),x.hc(9,"div",78),x.hc(10,"div",79),x.hc(11,"div",86),x.hc(12,"label",87),x.dd(13),x.wc(14,"translate"),x.hc(15,"span",48),x.dd(16,"(*)"),x.gc(),x.gc(),x.hc(17,"ng-select",88),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.customer_id=e}),x.wc(18,"translate"),x.wc(19,"translate"),x.gc(),x.gc(),x.gc(),x.hc(20,"div",89),x.hc(21,"div",86),x.hc(22,"label",90),x.dd(23),x.wc(24,"translate"),x.hc(25,"span",48),x.dd(26,"(*)"),x.gc(),x.gc(),x.hc(27,"input",91),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._fdatea=e})("bsValueChange",function(e){return x.Uc(n),x.vc().orgValueChange1a(e)}),x.wc(28,"translate"),x.gc(),x.gc(),x.gc(),x.hc(29,"div",89),x.hc(30,"div",86),x.hc(31,"label",92),x.dd(32),x.wc(33,"translate"),x.hc(34,"span",48),x.dd(35,"(*)"),x.gc(),x.gc(),x.hc(36,"input",93),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._tdatea=e})("bsValueChange",function(e){return x.Uc(n),x.vc().orgValueChange2a(e)}),x.wc(37,"translate"),x.gc(),x.gc(),x.gc(),x.hc(38,"div",89),x.hc(39,"div",86),x.hc(40,"label",94),x.dd(41),x.wc(42,"translate"),x.gc(),x.hc(43,"div",29),x.hc(44,"input",95),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.valid_number=e})("change",function(){return x.Uc(n),x.vc()._calculateDays()}),x.wc(45,"translate"),x.gc(),x.hc(46,"button",96),x.rc("click",function(){return x.Uc(n),x.vc().saveChangeRequest()}),x.cc(47,"i",97),x.dd(48),x.wc(49,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(50,"div",79),x.cc(51,"hr"),x.hc(52,"div",98),x.hc(53,"div",99),x.bd(54,j,4,5,"ng-container",49),x.gc(),x.gc(),x.cc(55,"hr"),x.gc(),x.hc(56,"div",100),x.hc(57,"div",86),x.hc(58,"label",101),x.hc(59,"strong"),x.dd(60),x.wc(61,"translate"),x.gc(),x.gc(),x.hc(62,"input",102),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_name=e}),x.wc(63,"translate"),x.gc(),x.hc(64,"input",103),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_id=e}),x.gc(),x.gc(),x.gc(),x.hc(65,"div",100),x.hc(66,"div",86),x.hc(67,"label",101),x.hc(68,"strong"),x.dd(69),x.wc(70,"translate"),x.gc(),x.gc(),x.hc(71,"input",102),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.weight=e}),x.wc(72,"translate"),x.gc(),x.gc(),x.gc(),x.hc(73,"div",100),x.hc(74,"div",86),x.hc(75,"label",101),x.hc(76,"strong"),x.dd(77),x.wc(78,"translate"),x.wc(79,"translate"),x.gc(),x.gc(),x.hc(80,"textarea",104),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.description=e}),x.wc(81,"translate"),x.gc(),x.gc(),x.gc(),x.hc(82,"div",100),x.hc(83,"div",86),x.hc(84,"label",101),x.hc(85,"strong"),x.dd(86),x.wc(87,"translate"),x.gc(),x.gc(),x.hc(88,"textarea",104),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.note=e}),x.wc(89,"translate"),x.gc(),x.gc(),x.gc(),x.hc(90,"div",105),x.hc(91,"button",106),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.cc(92,"i",107),x.dd(93),x.wc(94,"translate"),x.gc(),x.hc(95,"button",96),x.rc("click",function(){return x.Uc(n),x.vc().saveChangeSample()}),x.cc(96,"i",97),x.dd(97),x.wc(98,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.gd(" ",x.xc(4,55,"Request code")," - ",a._titleLanguage," "),x.Nb(10),x.fd("",x.xc(14,57,"Company")," "),x.Nb(4),x.Dc("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.entity.customer_id)("placeholder",x.xc(18,59,"Please choose"))("notFoundText",x.xc(19,61,"Not found item")),x.Nb(6),x.fd("",x.xc(24,63,"Received date")," "),x.Nb(4),x.Dc("placeholder",x.xc(28,65,"Received date"))("ngModel",a._fdatea)("bsConfig",x.Hc(99,W)),x.Nb(5),x.fd("",x.xc(33,67,"Returned date")," "),x.Nb(4),x.Dc("placeholder",x.xc(37,69,"Returned date"))("ngModel",a._tdatea)("bsConfig",x.Hc(100,W)),x.Nb(5),x.ed(x.xc(42,71,"Valid date")),x.Nb(3),x.Dc("type","number")("placeholder",x.xc(45,73,"Valid date"))("ngModel",a.entity.valid_number)("min",0),x.Nb(4),x.fd(" ",x.xc(49,75,"Save")," "),x.Nb(6),x.Dc("ngForOf",a.entity._samples),x.Nb(4),x.Fc("for","sn",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(61,77,"Sample name")),x.Nb(2),x.Fc("id","sn",a._currentTabActivated,""),x.Fc("name","sample_name",a._currentTabActivated,""),x.Dc("placeholder",x.xc(63,79,"Sample")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_name),x.Nb(2),x.Fc("id","id",a._currentTabActivated,""),x.Fc("name","id",a._currentTabActivated,""),x.Dc("ngModel",a.entity0.sample_id),x.Nb(3),x.Fc("for","weight",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(70,81,"Weight")),x.Nb(2),x.Fc("id","weight",a._currentTabActivated,""),x.Fc("name","weight",a._currentTabActivated,""),x.Dc("placeholder",x.xc(72,83,"Weight")+" "+a._currentTabActivated)("ngModel",a.entity0.weight),x.Nb(4),x.Fc("for","description",a._currentTabActivated,""),x.Nb(2),x.gd("",x.xc(78,85,"Description")," (",x.xc(79,87,"State of sample"),")"),x.Nb(3),x.Fc("id","description",a._currentTabActivated,""),x.Fc("name","description",a._currentTabActivated,""),x.Dc("placeholder",x.xc(81,89,"Description")+" "+a._currentTabActivated)("ngModel",a.entity0.description),x.Nb(4),x.Fc("for","note",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(87,91,"Note")),x.Nb(2),x.Fc("id","note",a._currentTabActivated,""),x.Fc("name","note",a._currentTabActivated,""),x.Dc("placeholder",x.xc(89,93,"Note")+" "+a._currentTabActivated)("ngModel",a.entity0.note),x.Nb(5),x.fd(" ",x.xc(94,95,"Close")," "),x.Nb(4),x.fd(" ",x.xc(98,97,"Save")," ")}}var X=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};_.a.vfs=p.a.pdfMake.vfs;var Z,ee=((Z=function(){function t(e,a,c,i,o,r,l){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=o,this._excelService=r,this.modalService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._getlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this._status="",this._titleLanguage="",this._detail={},this._logoPath=u.a.BASE_API+"/",this._logoIsoPath=u.a.BASE_API+"/",this._signatureCTOPath=u.a.BASE_API+"/",this._signatureCEOPath=u.a.BASE_API+"/",this.changeState=null,this._printAll=[],this._langMain=1,this.entity={},this.entity0={},this.requestId="",this._customers=[],this._dt1a="",this._dt2a="",this._fdatea=new Date,this._tdatea=new Date,this._currentTabActivated=0,!1!==e.checkAccess("REQ-REPORT")&&!1!==e.hasPermission("REQ-REPORT","read")||this._route.navigate(["/error/404"]),this.socket=g()(u.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadImgs(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var e=this,t={};t.filter=this._keyword,t.domain=this.user.short_code,t.start_date=this._dt1,t.end_date=this._dt2,t.flag_status=this._status,t.page=this.pageIndex,t.limit=this.pageSize,console.log(t),this._dataService.post("/labresult/getlistbypaging",t).subscribe(function(t){console.log(t),e._getlist=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"orgValueChange1",value:function(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=s(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=s(e).format("YYYY-MM-DD")}},{key:"_switchLanguage",value:function(e,t,n){this.loadAllReportByRequestId(n.request_id),this._titleLanguage=n.report_code,this._chooseOne=t,this._detail=n,this.modalService.open(e,{size:"md",centered:!0})}},{key:"loadAllReportByRequestId",value:function(e){var t=this,n={};n.request_id=e,console.log(n),this._dataService.post("/labresult/getlistbyrequestId",n).subscribe(function(e){t._printAll=e.data})}},{key:"_print",value:function(t){return Object(d.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,c,i,o,r,l,d,h,g,f,m,p,b,v,y,x,S,w,N,D,M,C,k,T,I,P,R,E,A,O,Y,U,F,L,q,z,G,V,B,H,Q,$,K,j,W,J,X,Z,ee,te,ne,ae,ce,ie,oe,re,le,de,se,he,ge,ue,fe,_e,me,pe,be,ve,ye,xe,Se,we,Ne,De,Me,Ce,ke,Te,Ie,Pe,Re,Ee,Ae,Oe,Ye,Ue,Fe,Le,qe,ze,Ge,Ve,Be,He,Qe,$e,Ke,je,We,Je,Xe,Ze,et,tt,nt,at,ct,it,ot,rt,lt,dt,st,ht,gt,ut,ft,_t,mt,pt,bt,vt,yt,xt,St,wt,Nt,Dt,Mt,Ct,kt,Tt,It,Pt,Rt,Et,At,Ot,Yt=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this._langMain=t,console.log("Detail",this._detail),a=[],0==this._chooseOne){n.next=100;break}if(null!=this._detail.old_report_detail&&(c="(* K\u1ebft qu\u1ea3 n\xe0y thay th\u1ebf cho k\u1ebft qu\u1ea3  "+this._detail.old_report_detail.report_code+", xu\u1ea5t ng\xe0y  "+s(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; b\u1ea3n k\u1ebft qu\u1ea3 c\u0169 s\u1ebd b\u1ecb h\u1ee7y)",i="(* This report cancels and replaces the previous one numbered "+this._detail.old_report_detail.report_code+", date "+s(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; which must be destroyed)",o="vn"==t?c:i,"0"==t&&(o=c+"\n"+i),a.push({text:o,alignment:"right",italics:!0,fontSize:10})),a.push({text:"\n"}),r="en"==t?null==this._detail.company_sender_e?this._detail.company_sender_l.toUpperCase():this._detail.company_sender_e.toUpperCase():this._detail.company_sender_l.toUpperCase(),null==this._detail.company_receiver_l&&null==this._detail.company_receiver_e||(r="en"==t||"0"==t?null==this._detail.company_receiver_e?this._detail.company_receiver_l.toUpperCase():this._detail.company_receiver_e.toUpperCase():this._detail.company_receiver_l.toUpperCase()),"0"==t&&(r="en"==t,this._detail.company_sender_l.toUpperCase(),null==this._detail.company_sender_e||this._detail.company_sender_e.toUpperCase(),null==this._detail.company_receiver_l&&null==this._detail.company_receiver_e||(r=this._detail.company_receiver_l.toUpperCase()+"\n"+(null==this._detail.company_receiver_e?"":this._detail.company_receiver_e.toUpperCase()))),this._detail.address_receiver_l=null==this._detail.address_receiver_l?this._detail.address_l:this._detail.address_receiver_l,l="en"==t?null==this._detail.address_receiver_e?this._detail.address_receiver_l:this._detail.address_receiver_e:this._detail.address_receiver_l,"0"==t&&(l=this._detail.address_receiver_l+"\n"+(null==this._detail.address_receiver_e?"":this._detail.address_receiver_e)),d="en"==t?"Sample described as":"T\xean m\u1eabu","0"==t&&(d="T\xean m\u1eabu/ Sample described as"),h="en"==t?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng","0"==t&&(h="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference"),g=this._detail.employee_code+this._detail.request_no.substr(2,this._detail.request_no.length),null==this._detail.employee_code&&(g=this._detail.request_no.substr(2,this._detail.request_no.length)),f="en"==t?"Sample code":"M\xe3 s\u1ed1 m\u1eabu","0"==t&&(f="M\xe3 s\u1ed1 m\u1eabu/ Sample code"),m="en"==t?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu","0"==t&&(m="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning"),p="en"==t?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu","0"==t&&(p="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date"),b="en"==t?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m","0"==t&&(b="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time"),v="en"==t?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng","0"==t&&(v="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date"),y=s(new Date(this._detail.returned_date)).subtract(7,"hours").format("DD/MM/YYYY"),a.push({alignment:"justify",columns:[[{text:[{text:r,bold:!0,fontSize:12},"\n\n",{text:l},"\n\n\n"],style:"body_top"}],{width:150,qr:this._detail.report_code+","+this._detail.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),x="en"==t?null==this._detail.sample_name_e?"":this._detail.sample_name_e:this._detail.sample_name,"0"==t&&(x=this._detail.sample_name+(null==this._detail.sample_name_e?"":"/ "+this._detail.sample_name_e)),S="en"==t?null==this._detail.description_e?"":this._detail.description_e:null==this._detail.description?"":this._detail.description,"0"==t&&(S=(null==this._detail.description?"":this._detail.description)+(null==this._detail.description_e?"":"/ "+this._detail.description_e)),a.push({table:{widths:[150,5,"*"],body:[[{text:d,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:x,bold:!0,fontSize:11}],[{text:h,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:g,bold:!0,style:"body_footer"}],[{text:f,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:this._detail.report_inner_code,bold:!0,style:"body_footer"}],[{text:m,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:S,style:"body_footer"}],[{text:p,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:s(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:b,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:s(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+y,style:"body_footer"}],[{text:v,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:y,style:"body_footer"}]]},layout:{defaultBorder:!1}}),a.push({text:"\n"}),w=!1,1==this._chooseOne&&(N=[],D=1,this._detail.order_details.length>0)){M=e(this._detail.order_details);try{for(M.s();!(C=M.n()).done;){k=C.value,T="b709ca6e-2823-11eb-9a33-acde48001122"==k.department_id,I="",P=null==k.standards?[]:JSON.parse(k.standards),R=e(P.filter(function(e){return null!=e}));try{for(R.s();!(E=R.n()).done;)null==(A=E.value).id?null!=A&&(I+="("+A+")"):I+="("+A.id+")"}catch(Ut){R.e(Ut)}finally{R.f()}O="vn"==t?k.para_name_l:k.para_name_e,"0"==t&&(O=k.para_name_l+"/ "+k.para_name_e),Y=k.unit,U=k.method,F=k.result_record.includes("<sup>")?k.result_record.substr(0,k.result_record.indexOf("<")):k.result_record,L=k.result_record.substr(k.result_record.indexOf("<sup>")+5,k.result_record.indexOf("</sup>")).replace("</sup>",""),console.log(L),N.push({STT:D,Para:{columns:[{text:O,fontSize:10,italics:T,width:"auto",bold:!0},{text:I,fontSize:8,italics:T,bold:!0}],columnGap:3},Unit:Y,Method:U,Results:[{columns:[{text:F,width:"auto",fontSize:10,bold:!0},{text:L,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:k.allow_lod?"(LOD="+k.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),D+=1,k.allow_lod&&(w=!0)}}catch(Ut){M.e(Ut)}finally{M.f()}a.push(this.tablePrintQuotation5(N,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if(3==this._chooseOne){N=[],D=1,q=e(this._detail.order_details);try{for(q.s();!(z=q.n()).done;){G=z.value,V="b709ca6e-2823-11eb-9a33-acde48001122"==G.department_id,B="",H=null==G.standards?[]:JSON.parse(G.standards),Q=e(H.filter(function(e){return null!=e}));try{for(Q.s();!($=Q.n()).done;)null==(K=$.value).id?null!=K&&(B+="("+K+")"):B+="("+K.id+")"}catch(Ut){Q.e(Ut)}finally{Q.f()}j="vn"==t?G.para_name_l:G.para_name_e,"0"==t&&(j=G.para_name_l+"/ "+G.para_name_e),W=G.unit,J=G.method,X=G.result_record.includes("<sup>")?G.result_record.substr(0,G.result_record.indexOf("<")):G.result_record,Z=G.result_record.substr(G.result_record.indexOf("<sup>")+5,G.result_record.indexOf("</sup>")).replace("</sup>",""),N.push({STT:D,Para:{columns:[{text:j,fontSize:10,italics:V,width:"auto",bold:!0},{text:B,fontSize:8,italics:V,bold:!0}],columnGap:3},Unit:W,Method:J,Results:[{columns:[{text:X,width:"auto",fontSize:10,bold:!0},{text:Z,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:G.allow_lod?"(LOD="+G.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:G.compare_note}),D+=1,G.allow_lod&&(w=!0)}}catch(Ut){q.e(Ut)}finally{q.f()}a.push(this.tablePrintQuotation(N,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}if(4==this._chooseOne)if(this._detail.flag_compare){N=[],D=1,ee=e(this._detail.order_details);try{for(ee.s();!(te=ee.n()).done;){ne=te.value,ae="b709ca6e-2823-11eb-9a33-acde48001122"==ne.department_id,ce="",ie=null==ne.standards?[]:JSON.parse(ne.standards),oe=e(ie.filter(function(e){return null!=e}));try{for(oe.s();!(re=oe.n()).done;)null==(le=re.value).id?null!=le&&(ce+="("+le+")"):ce+="("+le.id+")"}catch(Ut){oe.e(Ut)}finally{oe.f()}de="vn"==t?ne.para_name_l:ne.para_name_e,"0"==t&&(de=ne.para_name_l+"/ "+ne.para_name_e),se=ne.unit,he=ne.method,ge=ne.result_record.includes("<sup>")?ne.result_record.substr(0,ne.result_record.indexOf("<")):ne.result_record,ue=ne.result_record.substr(ne.result_record.indexOf("<sup>")+5,ne.result_record.indexOf("</sup>")).replace("</sup>",""),console.log(ue),N.push({STT:D,Para:{columns:[{text:de,fontSize:10,italics:ae,width:"auto",bold:!0},{text:ce,fontSize:8,italics:ae,bold:!0}],columnGap:3},Unit:se,Method:he,Results:[{columns:[{text:ge,width:"auto",fontSize:10,bold:!0},{text:ue,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:ne.allow_lod?"(LOD="+ne.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:ne.compare_note}),D+=1,ne.allow_lod&&(w=!0)}}catch(Ut){ee.e(Ut)}finally{ee.f()}a.push(this.tablePrintQuotation(N,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}else if(N=[],D=1,this._detail.order_details.length>0){fe=e(this._detail.order_details);try{for(fe.s();!(_e=fe.n()).done;){me=_e.value,pe="b709ca6e-2823-11eb-9a33-acde48001122"==me.department_id,be="",ve=null==me.standards?[]:JSON.parse(me.standards),ye=e(ve.filter(function(e){return null!=e}));try{for(ye.s();!(xe=ye.n()).done;)null==(Se=xe.value).id?null!=Se&&(be+="("+Se+")"):be+="("+Se.id+")"}catch(Ut){ye.e(Ut)}finally{ye.f()}we="vn"==t?me.para_name_l:me.para_name_e,"0"==t&&(we=me.para_name_l+"/ "+me.para_name_e),Ne=me.unit,De=me.method,Me=me.result_record.includes("<sup>")?me.result_record.substr(0,me.result_record.indexOf("<")):me.result_record,Ce=me.result_record.substr(me.result_record.indexOf("<sup>")+5,me.result_record.indexOf("</sup>")).replace("</sup>",""),N.push({STT:D,Para:{columns:[{text:we,fontSize:10,italics:pe,width:"auto",bold:!0},{text:be,fontSize:8,italics:pe,bold:!0}],columnGap:3},Unit:Ne,Method:De,Results:[{columns:[{text:Me,width:"auto",fontSize:10,bold:!0},{text:Ce,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:me.allow_lod?"(LOD="+me.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),D+=1,me.allow_lod&&(w=!0)}}catch(Ut){fe.e(Ut)}finally{fe.f()}a.push(this.tablePrintQuotation5(N,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if((null!=this._detail.take_note||w)&&(Te="vn"==t?"Ghi ch\xfa: ":"Note: ","0"==t&&(Te="Ghi ch\xfa/ Note: "),Ie="vn"==t?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection","0"==t&&(Ie="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),(ke=[]).push({LOD:Te+(null==this._detail.take_note?"":this._detail.take_note)+(w?Ie:"")}),a.push(this.tablePrintQuotation5A(ke,["LOD"],["*"]))),a.push({text:"\n"}),Pe="vn"==t?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR","0"==t&&(Pe="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR"),Re="vn"==t?"GI\xc1M \u0110\u1ed0C":"DIRECTOR","0"==t&&(Re="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==this._detail.is_active&&(a.push({columns:[{width:50,text:""},{width:180,text:Pe,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:Re,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"})),null==this._signatureCTOPath||null==this._signatureCEOPath||0==this._detail.is_active){n.next=77;break}return n.t0=a,n.t1={width:50,text:""},n.next=59,this._convertBase64ImageFromURL(this._signatureCTOPath);case 59:return n.t2=n.sent,n.t3=!0,n.t4=[190,190],n.t5={width:180,image:n.t2,alignment:"center",fontSize:10,bold:n.t3,fit:n.t4},n.t6={width:"*",text:""},n.next=66,this._convertBase64ImageFromURL(this._signatureCEOPath);case 66:n.t7=n.sent,n.t8=!0,n.t9=[190,190],n.t10={width:180,image:n.t7,alignment:"center",fontSize:10,bold:n.t8,fit:n.t9},n.t11={width:50,text:""},n.t12=[n.t1,n.t5,n.t6,n.t10,n.t11],n.t13={columns:n.t12},n.t0.push.call(n.t0,n.t13),a.push({text:"\n"}),n.next=78;break;case 77:a.push({columns:[{width:50,text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]});case 78:if(0==this._detail.is_active&&a.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"}),Ee="vn"==t?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note","0"==t&&(Ee="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note"),Ae="vn"==t?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.","0"==t&&(Ae="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample."),Oe="vn"==t?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.","0"==t&&(Oe="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request."),Ye="",this._detail.standard_list.length>0){Ue=e(this._detail.standard_list);try{for(Ue.s();!(Fe=Ue.n()).done;)Le=Fe.value,qe="vn"==t?Le.description_l:Le.description_e,"0"==t&&(qe=Le.description_l+"/ "+Le.description_e),Ye+="("+Le.id+") "+qe+"\n"}catch(Ut){Ue.e(Ut)}finally{Ue.f()}}if(a.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:Ee,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:Ae+"\n"+Oe+"\n"},{text:Ye,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null==this._detail.url_img||4!=this._chooseOne){n.next=98;break}return ze="en"==t?"Sample photo":"H\xecnh m\u1eabu","0"==t&&(ze="H\xecnh m\u1eabu/ Sample photo"),a.push({text:"",pageBreak:"after"}),a.push({text:ze+"\n",alignment:"center"}),Ge=u.a.BASE_API+"/"+this._detail.url_img,n.t14=a,n.next=95,this._convertBase64ImageFromURL(Ge);case 95:n.t15=n.sent,n.t16={image:n.t15,alignment:"center",width:430},n.t14.push.call(n.t14,n.t16);case 98:n.next=205;break;case 100:Ve=0,Be=e(this._printAll),n.prev=102,Be.s();case 104:if((He=Be.n()).done){n.next=197;break}if(null!=(Qe=He.value).old_report_detail&&($e="(This report cancels and replaces the previous one numbered "+Qe.old_report_detail.report_code+" date "+s(new Date(Qe.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)",Ke="(This report cancels and replaces the previous one numbered "+Qe.old_report_detail.report_code+" date "+s(new Date(Qe.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)",a.push({text:"vn"==t?$e:Ke,alignment:"right",italics:!0,fontSize:10})),a.push({text:"\n"}),je="en"==t?null==Qe.company_sender_e?Qe.company_sender_l.toUpperCase():Qe.company_sender_e.toUpperCase():Qe.company_sender_l.toUpperCase(),null==Qe.company_receiver_l&&null==Qe.company_receiver_e||(je="en"==t||"0"==t?null==Qe.company_receiver_e?Qe.company_receiver_l.toUpperCase():Qe.company_receiver_e.toUpperCase():Qe.company_receiver_l.toUpperCase()),Qe.address_receiver_l=null==Qe.address_receiver_l?Qe.address_l:Qe.address_receiver_l,We="en"==t?null==Qe.address_receiver_e?Qe.address_receiver_l:Qe.address_receiver_e:Qe.address_receiver_l,"0"==t&&(je=Qe.company_sender_l.toUpperCase()+"\n"+(null==Qe.company_sender_e?"":Qe.company_sender_e.toUpperCase()),null==Qe.company_receiver_l&&null==Qe.company_receiver_e||(je=Qe.company_receiver_l.toUpperCase()+"\n"+(null==Qe.company_receiver_e?"":Qe.company_receiver_e.toUpperCase())),We=Qe.address_receiver_l+"\n"+(null==Qe.address_receiver_e?"":Qe.address_receiver_e)),Je="en"==t?"Sample described as":"T\xean m\u1eabu","0"==t&&(Je="T\xean m\u1eabu/ Sample described as"),Xe="en"==t?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng","0"==t&&(Xe="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference"),Ze=Qe.employee_code+Qe.request_no.substr(2,Qe.request_no.length),null==Qe.employee_code&&(Ze=Qe.request_no.substr(2,Qe.request_no.length)),et="en"==t?"Sample code":"M\xe3 s\u1ed1 m\u1eabu","0"==t&&(et="M\xe3 s\u1ed1 m\u1eabu/ Sample code"),tt="en"==t?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu","0"==t&&(tt="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning"),nt="en"==t?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu","0"==t&&(nt="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date"),at="en"==t?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m","0"==t&&(at="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time"),ct="en"==t?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng","0"==t&&(ct="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date"),it=1==Qe.is_active?s(new Date(Qe.timestamp)).subtract(7,"hours").format("DD/MM/YYYY"):s(new Date(Qe.returned_date)).subtract(7,"hours").format("DD/MM/YYYY"),a.push({alignment:"justify",columns:[[{text:[{text:je,bold:!0,fontSize:12},"\n\n",{text:We},"\n\n\n"],style:"body_top"}],{width:150,qr:Qe.report_code+","+Qe.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),a.push({table:{widths:[150,5,"*"],body:[[{text:Je,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:Qe.sample_name,bold:!0,fontSize:11}],[{text:Xe,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:Ze,bold:!0,style:"body_footer"}],[{text:et,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:Qe.report_inner_code,bold:!0,style:"body_footer"}],[{text:tt,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:null==Qe.description?"":Qe.description,style:"body_footer"}],[{text:nt,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:s(new Date(Qe.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:at,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:s(new Date(Qe.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+it,style:"body_footer"}],[{text:ct,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:it,style:"body_footer"}]]},layout:{defaultBorder:!1}}),a.push({text:"\n"}),ot=!1,N=[],D=1,Qe.order_details.length>0){rt=e(Qe.order_details);try{for(rt.s();!(lt=rt.n()).done;){dt=lt.value,st="b709ca6e-2823-11eb-9a33-acde48001122"==dt.department_id,ht="",gt=null==dt.standards?[]:JSON.parse(dt.standards),ut=e(gt.filter(function(e){return null!=e}));try{for(ut.s();!(ft=ut.n()).done;)null==(_t=ft.value).id?null!=_t&&(ht+="("+_t+")"):ht+="("+_t.id+")"}catch(Ut){ut.e(Ut)}finally{ut.f()}mt="vn"==t?dt.para_name_l:dt.para_name_e,"0"==t&&(mt=dt.para_name_l+"/ "+dt.para_name_e),pt=dt.unit,bt=dt.method,vt=dt.result_record.includes("<sup>")?dt.result_record.substr(0,dt.result_record.indexOf("<")):dt.result_record,yt=dt.result_record.substr(dt.result_record.indexOf("<sup>")+5,dt.result_record.indexOf("</sup>")).replace("</sup>",""),console.log(yt),N.push({STT:D,Para:{columns:[{text:mt,fontSize:10,italics:st,width:"auto",bold:!0},{text:ht,fontSize:8,italics:st,bold:!0}],columnGap:3,bold:!0},Unit:pt,Method:bt,Results:[{columns:[{text:vt,width:"auto",fontSize:10,bold:!0},{text:yt,fontSize:6,bold:!0}],columnGap:0,alignment:"center"},{columns:[{text:dt.allow_lod?"(LOD="+dt.lod+")":"",width:"auto",fontSize:10,bold:!0,alignment:"center"}],columnGap:0}]}),D+=1,dt.allow_lod&&(ot=!0)}}catch(Ut){rt.e(Ut)}finally{rt.f()}a.push(this.tablePrintQuotation5(N,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if((null!=Qe.take_note||ot)&&(St="vn"==t?"Ghi ch\xfa: ":"Note: ","0"==t&&(St="Ghi ch\xfa/ Note: "),wt="vn"==t?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection","0"==t&&(wt="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),(xt=[]).push({LOD:St+(null==Qe.take_note?"":Qe.take_note)+(ot?wt:"")}),a.push(this.tablePrintQuotation5A(xt,["LOD"],["*"]))),a.push({text:"\n"}),Nt="vn"==t?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR","0"==t&&(Nt="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR"),Dt="vn"==t?"GI\xc1M \u0110\u1ed0C":"DIRECTOR","0"==t&&(Dt="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==Qe.is_active&&(a.push({columns:[{width:50,text:""},{width:180,text:Nt,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:Dt,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"})),null==this._signatureCTOPath||null==this._signatureCEOPath||0==Qe.is_active){n.next=174;break}return n.t17=a,n.t18={width:50,text:""},n.next=156,this._convertBase64ImageFromURL(this._signatureCTOPath);case 156:return n.t19=n.sent,n.t20=!0,n.t21=[190,190],n.t22={width:180,image:n.t19,alignment:"center",fontSize:10,bold:n.t20,fit:n.t21},n.t23={width:"*",text:""},n.next=163,this._convertBase64ImageFromURL(this._signatureCEOPath);case 163:n.t24=n.sent,n.t25=!0,n.t26=[190,190],n.t27={width:180,image:n.t24,alignment:"center",fontSize:10,bold:n.t25,fit:n.t26},n.t28={width:50,text:""},n.t29=[n.t18,n.t22,n.t23,n.t27,n.t28],n.t30={columns:n.t29},n.t17.push.call(n.t17,n.t30),a.push({text:"\n"}),n.next=175;break;case 174:a.push({columns:[{width:50,text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]});case 175:if(0==Qe.is_active&&a.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"}),Mt="vn"==t?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note","0"==t&&(Mt="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note"),Ct="vn"==t?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.","0"==t&&(Ct="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample."),kt="vn"==t?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.","0"==t&&(kt="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request."),Tt="",Qe.standard_list.length>0){It=e(Qe.standard_list);try{for(It.s();!(Pt=It.n()).done;)Rt=Pt.value,Et="vn"==t?Rt.description_l:Rt.description_e,"0"==t&&(Et=Rt.description_l+"/ "+Rt.description_e),Tt+="("+Rt.id+") "+Et+"\n"}catch(Ut){It.e(Ut)}finally{It.f()}}if(a.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:Mt,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:Ct+"\n"+kt+"\n"},{text:Tt,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null==Qe.url_img||2!=Qe.is_active){n.next=194;break}return a.push({text:"",pageBreak:"after"}),At=u.a.BASE_API+"/"+Qe.url_img,n.t31=a,n.next=191,this._convertBase64ImageFromURL(At);case 191:n.t32=n.sent,n.t33={image:n.t32,alignment:"center"},n.t31.push.call(n.t31,n.t33);case 194:(Ve+=1)<this._printAll.length&&a.push({text:"",pageBreak:"after"});case 195:n.next=104;break;case 197:n.next=202;break;case 199:n.prev=199,n.t34=n.catch(102),Be.e(n.t34);case 202:return n.prev=202,Be.f(),n.finish(202);case 205:return n.t35="vn"==t?[25,120,25,70]:[25,140,25,90],n.t36={fontSize:12,columnGap:20},n.t37=[a],n.t38=function(e,n){return{table:{widths:[5,"*","*","*"],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:("en"==t||"0"==t?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG")+"\n"+("en"==t||"0"==t?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam"),alignment:"left",style:"body_footer"},{height:150,text:"en"==t||"0"==t?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",alignment:"left",style:"body_footer"},{height:150,text:"en"==t||"0"==t?"Document number : EPR-QP-0023/F02\nVersion : 01\nEffective day : 03/09/2020":"M\xe3 t\xe0i li\u1ec7u : EPR-QP-0023/F02\nL\u1ea7n ban h\xe0nh : 01\nNg\xe0y ban h\xe0nh : 03/09/2020",alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},n.t39=function(e,n,a){var c="vn"==t?"K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M":"ANALYTICAL REPORT";"0"==t&&(c="K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M\nANALYTICAL REPORT");var i="vn"==t?"M\xe3 k\u1ebft qu\u1ea3: ":"Report code: ";"0"==t&&(i="M\xe3 k\u1ebft qu\u1ea3/Report code: ");var o="vn"==t?"Trang ":"Page: ";return"0"==t&&(o="Trang/Page "),{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:167,height:70,alignment:"right",image:"myIso"}],[{colSpan:2,text:c,alignment:"center",fontSize:16,bold:!0}],[{colSpan:2,width:"*",text:[{text:i+Yt._detail.report_code+"-"+o+e.toString()+"/"+n},{text:"__",color:"#ffffff"}],alignment:"right",bold:!0}]]},layout:{defaultBorder:!1}}},n.t40={header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},n.next=213,this._convertBase64ImageFromURL(this._logoPath);case 213:return n.t41=n.sent,n.next=216,this._convertBase64ImageFromURL(this._logoIsoPath);case 216:n.t42=n.sent,n.t43={myLogo:n.t41,myIso:n.t42},Ot={pageSize:"A4",pageMargins:n.t35,defaultStyle:n.t36,content:n.t37,footer:n.t38,header:n.t39,styles:n.t40,images:n.t43},("'print-'"+this._detail.report_code+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),_.a.createPdf(Ot).open();case 221:case"end":return n.stop()}},n,this,[[102,199,202,205]])}))}},{key:"_exportAll",value:function(t){var n,a=[],c=1,i=e(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,r="";4==o.is_active&&(r="en"==this.user.lang?y.a.cancel_en:y.a.cancel),3==o.is_active&&(r="en"==this.user.lang?y.a.printed_en:y.a.printed),2==o.is_active&&(r="en"==this.user.lang?y.a.evicted_en:y.a.evicted),1==o.is_active&&(r="en"==this.user.lang?y.a.official_en:y.a.official),0==o.is_active&&(r="en"==this.user.lang?y.a.draft_en:y.a.draft);var l=new Date(o.received_date).getTime()+864e5*o.tat;a.push({"No.":c,"Report code":o.report_inner_code,"Request No":o.request_no,"Sample name":o.sample_name,"Received Date":s(new Date(o.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),"Returned Date":s(new Date(l)).subtract(7,"hours").format("DD/MM/YYYY"),Company:o.company_sender_l,Contact:null==o.sender_name?"":o.sender_name,State:r}),c+=1}}catch(d){i.e(d)}finally{i.f()}this._excelService.exportAsExcelFile(a,"ResultReport-"+s(new Date).subtract(7,"hours").format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+t.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.length+" "+y.a.record,"OK")}},{key:"tablePrintQuotation",value:function(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation(e,t)}}}},{key:"buildTableBodyPrintQuotation",value:function(e,t){var n=[],a=[],c="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(c="STT\nNO.");var i="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(i="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");var o="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(o="\u0110\u01a0N V\u1eca\nUNIT");var r="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(r="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");var l="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";0==this._langMain&&(l="K\u1ebeT QU\u1ea2\nRESULTS");var d="en"==this._langMain.toString()?"COMPARE / GUIDELINES":"SO S\xc1NH";return 0==this._langMain&&(d="SO S\xc1NH\nCOMPARE / GUIDELINES"),a.push({text:c,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:d,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(a),e.forEach(function(e){var a=[],c=1;t.forEach(function(t){a.push(2==c||5==c?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==c?"left":"center",fontSize:10}),c+=1}),n.push(a)}),n}},{key:"tablePrintQuotation5",value:function(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation5(e,t)}}}},{key:"buildTableBodyPrintQuotation5",value:function(e,t){var n=[],a=[],c="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(c="STT\nNO.");var i="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(i="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");var o="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(o="\u0110\u01a0N V\u1eca\nUNIT");var r="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(r="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");var l="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";return 0==this._langMain&&(l="K\u1ebeT QU\u1ea2\nRESULTS"),this._langMain.toString(),this._langMain,a.push({text:c,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(a),e.forEach(function(e){var a=[],c=1;t.forEach(function(t){a.push(2==c||5==c?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==c?"left":"center",fontSize:10}),c+=1}),n.push(a)}),n}},{key:"tablePrintQuotation5A",value:function(e,t,n){return{table:{widths:n,body:this.buildTableBodyPrintQuotation5A(e,t)}}}},{key:"buildTableBodyPrintQuotation5A",value:function(e,t){var n=[];return e.forEach(function(e){var a=[];t.forEach(function(t){a.push({text:{text:e[t]},alignment:"left",fontSize:10,italics:!0})}),n.push(a)}),n}},{key:"_convertBase64ImageFromURL",value:function(e){return new Promise(function(t,n){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=function(e){n(e)},a.src=e})}},{key:"loadImgs",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",t).subscribe(function(t){return Object(d.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._logoPath+=t.data.filter(function(e){return"logo-stp"==e.file_name_e})[0].path_file,this._logoIsoPath+=t.data.filter(function(e){return"logo-iso"==e.file_name_e})[0].path_file,this._signatureCTOPath+=t.data.filter(function(e){return"signature-cto"==e.file_name_e})[0].path_file,this._signatureCEOPath+=t.data.filter(function(e){return"signature-ceo"==e.file_name_e})[0].path_file;case 1:case"end":return e.stop()}},e,this)}))})}},{key:"_popupStates",value:function(e,t){this._titleLanguage=t.report_code,this.changeState=t.is_active,this._detail=t,this.modalService.open(e,{size:"sm",centered:!0})}},{key:"_updateState",value:function(){var e=this,t={};if(t.report_id=this._detail.report_id,t.is_active=this.changeState,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,2==this.changeState||4==this.changeState){var n=this._titleLanguage.substr(this._titleLanguage.lastIndexOf("-RV")+3,this._titleLanguage.length);if(parseInt(n)+1>9&&2==this.changeState)return void this._notifyService.showError("en"==this.user.lang?y.a.MSG_EXPORTNO_EN:y.a.MSG_EXPORT_NO,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);if(this._detail.flag_warning_eviction)return this._notifyService.showError("en"==this.user.lang?y.a.error_eviction_msg_en:y.a.error_eviction_msg,"en"==this.user.lang?y.a.error_title_en:y.a.error_title),void this.modalService.dismissAll();v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_evic_en:y.a.are_u_sure_evic,text:this._detail.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(n){n.value?e._dataService.post("/labresult/updateState",t).subscribe(function(t){e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),e.socket.emit("refresh",{}),e._updateStateOfSample(e._detail,t.flag),e.modalService.dismissAll()}):e.modalService.dismissAll()})}else this._dataService.post("/labresult/updateState",t).subscribe(function(t){e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),e.socket.emit("refresh",{}),e.modalService.dismissAll()})}},{key:"_switchEviction",value:function(e){var t=this;console.log(e),v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_evic_en:y.a.are_u_sure_evic,text:e.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(n){if(n.value){var a={};a.report_id=e.report_id,a.is_active=2,a.userid=t.user.id,a.ipaddress=t.user.ipaddress,a.short_code=t.user.short_code,t._dataService.post("/labresult/updateState",a).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t.socket.emit("refresh",{}),t._updateStateOfSample(e,n.flag),t.modalService.dismissAll()})}else t.modalService.dismissAll()})}},{key:"_updateStateOfSample",value:function(e,t){var n={};n.getlist=e.order_details,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,n.status=3,this._dataService.post("/labresult/updateStateOfSample",n).subscribe(function(e){console.log(e)})}},{key:"_editInformation",value:function(e,t){console.log(t),this._currentTabActivated=0,this._titleLanguage=t.request_no,this.requestId=t.request_id,this.loadRequestDetail(t.request_id),this.modalService.open(e,{size:"lg",centered:!0,backdrop:!1})}},{key:"loadRequestDetail",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/request/detailA",a).subscribe(function(t){console.log("Again",t.data),n.entity=t.data,n._fdatea=new Date(t.data.received_date),n._tdatea=new Date(t.data.returned_date),n._dt1a=s(n._fdatea).format("YYYY-MM-DD HH:mm"),n._dt2a=s(n._tdatea).format("YYYY-MM-DD HH:mm");var a,c=[],i=0,o=e(t.data.orders_list.filter(function(e){return null!=e.inner_code}));try{for(o.s();!(a=o.n()).done;){var r=a.value;c.push({sample_id:r.sample_id,sample_name:r.sample_name,sample_code:r.sample_code,inner_code:r.inner_code,description:r.description,note:r.note,weight:r.weight,is_active:r.is_active,userid:r.userid,total_sub:r.total_sub,order_no:i}),i+=1}}catch(l){o.e(l)}finally{o.f()}console.log(c),n.entity._samples=c,n.entity0=c.filter(function(e){return e.order_no==n._currentTabActivated})[0],n.loadCustomers()})}},{key:"loadCustomers",value:function(){var t=this,n={};n.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({name:o.code_link,code:o.id})}}catch(r){i.e(r)}finally{i.f()}t._customers=c})}},{key:"orgValueChange1a",value:function(e){null!=e&&"Invalid date"!=e?(this._fdatea=e,this._tdatea=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1a=s(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=s(this._tdatea).format("YYYY-MM-DD HH:mm")):(this._fdatea=null,this._dt1a=null)}},{key:"orgValueChange2a",value:function(e){null!=e&&"Invalid date"!=e?(this._tdatea=e,this._dt1a=s(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=s(this._tdatea).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdatea-this._fdatea)/864e5)):(this._tdatea=null,this._dt2a=null)}},{key:"_calculateDays",value:function(){null!=this._fdatea&&(this._tdatea=new Date(this._fdatea.getTime()+864e5*this.entity.valid_number))}},{key:"_chooseTab",value:function(e,t){console.log(e,"Tab: ",t),this.entity0=e,this._currentTabActivated=t}},{key:"saveChangeRequest",value:function(){var e=this;if(null==this._dt1a||null==this._dt2a||this._fdatea>this._tdatea)this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);else{var t={};t.id=this.entity.id,t.customer_id=this.entity.customer_id,t.received_date=this._dt1a,t.returned_date=this._dt2a,t.valid_number=this.entity.valid_number,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/labresult/updateRequestInfo",t).subscribe(function(t){"ok"==t.result?(e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),e.socket.emit("refresh",{})):e._notifyService.showWarning("en"==e.user.lang?y.a.MSG_UPDATENO_EN:y.a.MSG_UPDATENO,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)},function(){e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)})}}},{key:"saveChangeSample",value:function(){var e=this,t={};t.sample_id=this.entity0.sample_id,t.sample_name=this.entity0.sample_name,t.weight=this.entity0.weight,t.description=this.entity0.description,t.note=this.entity0.note,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,""!=this.entity0.sample_name&&null!=this.entity0.sample_name?this._dataService.post("/labresult/updateSampleInfo",t).subscribe(function(t){"ok"==t.result?(e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),e.socket.emit("refresh",{})):e._notifyService.showWarning("en"==e.user.lang?y.a.MSG_UPDATENO_EN:y.a.MSG_UPDATENO,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)},function(){e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)}):this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==this.user.lang?y.a.error_title_en:y.a.error_title)}},{key:"closeModal",value:function(){this.modalService.dismissAll()}}]),t}()).\u0275fac=function(e){return new(e||Z)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(C.s))},Z.\u0275cmp=x.Vb({type:Z,selectors:[["app-lab-results"]],decls:113,vars:104,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["type","button","routerLink","/request/lab-report",1,"btn","btn-sm","btn-primary","mr-sm-2"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","90px"],["scope","col"],[4,"ngIf"],["contentLanguage",""],["contentStatus",""],["contentRequest",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","10",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["ngbDropdown","","class","btn-group mr-sm-1","role","group",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-default",4,"ngIf"],["ngbDropdown","","role","group",1,"btn-group","mr-sm-1"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["href","javascript:;",1,"dropdown-item",3,"click"],["class","dropdown-item","href","javascript:;",3,"click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-warning",3,"click"],[1,"icofont","icofont-pencil-alt-5"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-danger"],[1,"badge","badge-success"],[1,"badge","badge-default"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-danger","mr-sm-2",3,"click"],["name","changestate",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value"],[1,"form-group"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],[1,"col-md-4"],["for","received_date"],["type","text","bsDatepicker","","name","_fdatea","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdatea","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",1,"form-control","mr-sm-2",3,"type","placeholder","ngModel","min","ngModelChange","change"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],[1,"flex-wrap"],[1,"btn-group","flex-wrap"],[1,"col-md-6"],[3,"for"],["type","text",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],[1,"col-md-12","text-right"],[1,"btn","btn-sm","btn-light","mr-sm-2",3,"click"],[1,"fa","fa-times-circle-o"],["type","button",3,"ngClass","click"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.hc(12,"select",10),x.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.hc(13,"option",11),x.dd(14),x.wc(15,"translate"),x.gc(),x.hc(16,"option",12),x.dd(17),x.wc(18,"translate"),x.gc(),x.hc(19,"option",13),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"option",14),x.dd(23),x.wc(24,"translate"),x.gc(),x.hc(25,"option",15),x.dd(26),x.wc(27,"translate"),x.gc(),x.hc(28,"option",16),x.dd(29),x.wc(30,"translate"),x.gc(),x.gc(),x.bd(31,R,4,3,"button",17),x.hc(32,"button",18),x.dd(33),x.wc(34,"translate"),x.gc(),x.bd(35,E,1,0,"img",19),x.gc(),x.gc(),x.hc(36,"div",20),x.hc(37,"div",21),x.hc(38,"select",22),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(39,"option",23),x.dd(40,"#10"),x.gc(),x.hc(41,"option",24),x.dd(42,"#25"),x.gc(),x.hc(43,"option",25),x.dd(44,"#50"),x.gc(),x.hc(45,"option",26),x.dd(46,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(47,"div",27),x.hc(48,"div",28),x.hc(49,"div",29),x.hc(50,"div",30),x.hc(51,"pagination",31),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(52,"div",32),x.hc(53,"a",33),x.dd(54),x.wc(55,"translate"),x.wc(56,"translate"),x.wc(57,"translate"),x.wc(58,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(59,"div",28),x.hc(60,"div",34),x.hc(61,"table",35),x.hc(62,"thead",36),x.hc(63,"tr"),x.hc(64,"th",37),x.dd(65,"#"),x.gc(),x.hc(66,"th",38),x.dd(67),x.wc(68,"translate"),x.gc(),x.hc(69,"th",39),x.dd(70),x.wc(71,"translate"),x.gc(),x.hc(72,"th",39),x.dd(73),x.wc(74,"translate"),x.gc(),x.hc(75,"th",39),x.dd(76),x.wc(77,"translate"),x.gc(),x.hc(78,"th",39),x.dd(79),x.wc(80,"translate"),x.gc(),x.hc(81,"th",39),x.dd(82),x.wc(83,"translate"),x.gc(),x.hc(84,"th",39),x.dd(85),x.wc(86,"translate"),x.gc(),x.hc(87,"th",39),x.dd(88),x.wc(89,"translate"),x.gc(),x.hc(90,"th",39),x.dd(91),x.wc(92,"translate"),x.gc(),x.gc(),x.gc(),x.hc(93,"tbody"),x.bd(94,A,6,3,"ng-container",40),x.bd(95,Q,2,1,"ng-container",40),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(96,"div",28),x.hc(97,"div",29),x.hc(98,"div",30),x.hc(99,"pagination",31),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(100,"div",32),x.hc(101,"a",33),x.dd(102),x.wc(103,"translate"),x.wc(104,"translate"),x.wc(105,"translate"),x.wc(106,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(107,$,22,15,"ng-template",null,41,x.cd),x.bd(109,K,31,29,"ng-template",null,42,x.cd),x.bd(111,J,99,101,"ng-template",null,43,x.cd)),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,52,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(102,X)),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(103,X)),x.Nb(1),x.Dc("ngModel",t._status),x.Nb(2),x.fd(" ",x.xc(15,54,"All")," "),x.Nb(3),x.fd(" ",x.xc(18,56,"Draft")," "),x.Nb(3),x.fd(" ",x.xc(21,58,"Official")," "),x.Nb(3),x.fd(" ",x.xc(24,60,"Evicted")," "),x.Nb(3),x.fd(" ",x.xc(27,62,"Printed")," "),x.Nb(3),x.fd(" ",x.xc(30,64,"Cancel")," "),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),x.Nb(2),x.fd(" ",x.xc(34,66,"Go back")," "),x.Nb(2),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(55,68,"Total of records"),": ",t.totalRow," - ",x.xc(56,70,"Page")," ",t.pageIndex," ",x.xc(57,72,"of")," ",t.totalPage," ",x.xc(58,74,"page"),""),x.Nb(13),x.fd(" ",x.xc(68,76,"Actions")," "),x.Nb(3),x.fd(" ",x.xc(71,78,"Report code")," "),x.Nb(3),x.fd(" ",x.xc(74,80,"Request code")," "),x.Nb(3),x.fd(" ",x.xc(77,82,"Sample name")," "),x.Nb(3),x.fd(" ",x.xc(80,84,"Received date")," "),x.Nb(3),x.ed(x.xc(83,86,"Returned date")),x.Nb(3),x.fd(" ",x.xc(86,88,"Company")," "),x.Nb(3),x.ed(x.xc(89,90,"Contact")),x.Nb(3),x.ed(x.xc(92,92,"Status")),x.Nb(3),x.Dc("ngIf",0==t._getlist.length),x.Nb(1),x.Dc("ngIf",t._getlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(103,94,"Total of records"),": ",t.totalRow," - ",x.xc(104,96,"Page")," ",t.pageIndex," ",x.xc(105,98,"of")," ",t.totalPage," ",x.xc(106,100,"page"),""))},directives:[r.c,r.n,r.q,k.b,k.a,r.x,r.r,r.A,o.q,l.e,T.a,o.p,C.l,C.p,C.o,r.z,r.o,r.p,I.a,r.w,r.t,o.o],pipes:[P.c,o.f],styles:[""]}),Z),te=["fileUpload"];function ne(e,t){if(1&e&&(x.hc(0,"option",36),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function ae(e,t){if(1&e){var n=x.ic();x.hc(0,"button",37),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e._preparationlist)}),x.cc(1,"i",38),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function ce(e,t){1&e&&x.cc(0,"img",39)}function ie(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",40),x.hc(3,"h3",41),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function oe(e,t){1&e&&x.cc(0,"i",53)}function re(e,t){1&e&&x.cc(0,"i",54)}function le(e,t){if(1&e){var n=x.ic();x.hc(0,"button",55),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._updateValidation(e,0)}),x.wc(1,"translate"),x.cc(2,"i",56),x.gc()}2&e&&x.Dc("title",x.xc(1,1,"Save"))}function de(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"a",57),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit,t=x.vc(2),a=x.Rc(116);return t.popupComment(a,e)}),x.dd(2),x.gc(),x.ec()}if(2&e){var a=x.vc().$implicit;x.Nb(2),x.ed(a.inner_code)}}function se(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.ed(n.inner_code)}}function he(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"a",57),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._updateStatusSample(e)}),x.dd(2),x.wc(3,"translate"),x.gc(),x.ec()}2&e&&(x.Nb(2),x.ed(x.xc(3,1,"Return lab")))}function ge(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.mark," ")}}function ue(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",58),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.mark=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","mark",c+1,""),x.Dc("ngModel",i.mark)}}function fe(e,t){1&e&&x.cc(0,"i",59)}function _e(e,t){1&e&&x.cc(0,"i",60)}function me(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.compare_note," ")}}function pe(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",58),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.compare_note=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","comparenote",c+1,""),x.Dc("ngModel",i.compare_note)}}function be(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",43),x.dd(2),x.gc(),x.hc(3,"td",44),x.hc(4,"button",45),x.rc("click",function(){var e=t.$implicit;return e.flag=!e.flag}),x.wc(5,"translate"),x.bd(6,oe,1,0,"i",46),x.bd(7,re,1,0,"i",47),x.gc(),x.bd(8,le,3,3,"button",48),x.gc(),x.hc(9,"td"),x.bd(10,de,3,1,"ng-container",34),x.bd(11,se,2,1,"ng-container",34),x.gc(),x.hc(12,"td"),x.dd(13),x.gc(),x.hc(14,"td"),x.dd(15),x.gc(),x.hc(16,"td"),x.dd(17),x.gc(),x.hc(18,"td"),x.dd(19),x.gc(),x.hc(20,"td"),x.dd(21),x.gc(),x.hc(22,"td"),x.dd(23),x.gc(),x.hc(24,"td"),x.dd(25),x.gc(),x.hc(26,"td"),x.dd(27),x.gc(),x.hc(28,"td"),x.dd(29),x.gc(),x.hc(30,"td"),x.dd(31),x.gc(),x.hc(32,"td"),x.cc(33,"span",49),x.gc(),x.hc(34,"td"),x.bd(35,he,4,3,"ng-container",34),x.gc(),x.hc(36,"td"),x.bd(37,ge,2,1,"ng-container",34),x.bd(38,ue,2,2,"ng-container",34),x.gc(),x.hc(39,"td",50),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(2)._updateValidationLOD(e,1)}),x.bd(40,fe,1,0,"i",51),x.bd(41,_e,1,0,"i",52),x.gc(),x.hc(42,"td"),x.bd(43,me,2,1,"ng-container",34),x.bd(44,pe,2,2,"ng-container",34),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.Dc("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!i._authenService.hasPermission("REQ-REPORT","update"))("title",x.xc(5,27,a.flag?"Cancel":"_Edit")),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",i._authenService.hasPermission("REQ-REPORT","update")),x.Nb(1),x.Dc("ngIf",!i._authenService.hasPermission("REQ-REPORT","update")),x.Nb(2),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.para_name_e:a.para_name_l," "),x.Nb(2),x.ed(a.tat),x.Nb(2),x.ed(a.note),x.Nb(2),x.ed(a.note_lab),x.Nb(2),x.fd(" ",a.note_asm," "),x.Nb(2),x.ed(a.unit),x.Nb(2),x.fd(" ",a.lod," "),x.Nb(2),x.fd(" ",a.loq," "),x.Nb(2),x.Dc("innerHTML",a.result_record,x.Vc),x.Nb(2),x.Dc("ngIf",i._authenService.hasPermission("REQ-REPORT","update")&&i._authenService.hasPermission("REQ-REPORT","delete")),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",a.allow_lod),x.Nb(1),x.Dc("ngIf",!a.allow_lod),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag)}}function ve(e,t){if(1&e&&(x.fc(0),x.bd(1,be,45,29,"tr",42),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._preparationlist)}}function ye(e,t){1&e&&(x.fc(0),x.hc(1,"a",81),x.cc(2,"img",82),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing"),""))}function xe(e,t){1&e&&(x.hc(0,"button",83),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Save & close")," "))}function Se(e,t){if(1&e){var n=x.ic();x.hc(0,"form",61,62),x.rc("ngSubmit",function(){x.Uc(n);var e=x.vc();return e.saveChangeComment(e.entityComment,0)}),x.hc(2,"div",63),x.hc(3,"h4",64),x.dd(4),x.wc(5,"translate"),x.gc(),x.hc(6,"button",65),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(7,"span",66),x.dd(8,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(9,"div",67),x.hc(10,"div",68),x.hc(11,"div",69),x.hc(12,"div",70),x.hc(13,"label",71),x.dd(14),x.wc(15,"translate"),x.gc(),x.hc(16,"textarea",72),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entityComment.take_note=e}),x.gc(),x.gc(),x.gc(),x.hc(17,"div",69),x.hc(18,"div",70),x.hc(19,"label",73),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"input",74,75),x.rc("change",function(e){return x.Uc(n),x.vc().fileEvent(e)}),x.gc(),x.hc(24,"input",76),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entityComment.url_img=e}),x.gc(),x.hc(25,"small",77),x.hc(26,"a",57),x.rc("click",function(){x.Uc(n);var e=x.vc();return e.removeAttachment(e.entityComment)}),x.dd(27),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(28,"div",78),x.hc(29,"button",79),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.dd(30),x.wc(31,"translate"),x.gc(),x.bd(32,ye,5,3,"ng-container",34),x.bd(33,xe,3,3,"button",80),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(4),x.gd(" ",x.xc(5,10,"Note")," - ",a.entityComment.inner_code," "),x.Nb(10),x.fd("",x.xc(15,12,"Content")," "),x.Nb(2),x.Dc("ngModel",a.entityComment.take_note),x.Nb(4),x.ed(x.xc(21,14,"Attachment")),x.Nb(4),x.Dc("ngModel",a.entityComment.url_img),x.Nb(3),x.ed(a._path),x.Nb(3),x.fd(" ",x.xc(31,16,"Close")," "),x.Nb(2),x.Dc("ngIf",a.isSave),x.Nb(1),x.Dc("ngIf",!a.isSave)}}var we=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};_.a.vfs=p.a.pdfMake.vfs;var Ne,De=((Ne=function(){function t(e,a,c,i,o,r,l,d){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=o,this._excelService=r,this.modalService=l,this._activatedRoute=d,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=3,this.entity={},this.entityComment={},this._path="",this._id="",!1!==e.checkAccess("RES-VALID")&&!1!==e.hasPermission("RES-VALID","read")||this._route.navigate(["/404"]),this.socket=g()(u.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this._activatedRoute.params.subscribe(function(t){e._id=t.id,e.loadData(e._id),e.socket.on("refreshPage",function(t){console.log(e._id),e.loadData(e._id)})}),this.loadDepartment(),this.loadTestFamilyPL()}},{key:"loadData",value:function(t){var n=this;if(null==t){var a={};a.filter=this._keyword,a.domain=this.user.short_code,a.start_date=this._dt1,a.end_date=this._dt2,a.department_id=this.department_id,a.family_id=this.testcsp_id,a.flag_status=this._status,a.page=this.pageIndex,a.limit=this.pageSize,this._dataService.post("/lab/getlistresultlabs",a).subscribe(function(t){console.log(t);var a,c=[],i=e(t.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({code:o.code,code_father:o.code_father,company_code:o.company_code,company_name_e:o.company_name_e,company_name_l:o.company_name_l,contact_name:o.contact_name,customer_id:o.customer_id,email:o.email,employee_nr:o.employee_nr,id:o.id,is_active:o.is_active,lod:o.lod,loq:o.loq,tat:o.tat,mark:o.mark,note_asm:o.note_asm,para_name_e:o.para_name_e,para_name_l:o.para_name_l,parameter_id:o.parameter_id,phone:o.phone,received_date:o.received_date,request_no:o.request_no,result_record:o.result_record,returned_date:o.returned_date,sale_man:o.sale_man,sample_code:o.sample_code,inner_code:o.inner_code,sample_id:o.sample_id,category_id:o.category_id,sample_name:o.sample_name,specification_name_e:o.specification_name_e,specification_name_l:o.specification_name_l,unit:o.unit,userid:o.userid,flag:!1,note_lab:o.note_lab,status:o.status,note:o.note,category_name_e:o.category_name_e,category_name_l:o.category_name_l,export_result:null==o.export_result?1:o.export_result,allow_lod:null!=o.allow_lod&&o.allow_lod,compare_note:o.compare_note,dept_name_e:o.dept_name_e,dept_name_l:o.dept_name_l})}}catch(r){i.e(r)}finally{i.f()}n._preparationlist=c,n.totalRow=t.rowCount,n.totalPage=t.totalPages})}else{var c={};c.filter=this._keyword,c.page=this.pageIndex,c.limit=this.pageSize,c.request_id=this._id,this._dataService.post("/lab/getlistresultlabsbyid",c).subscribe(function(t){console.log(t);var a,c=[],i=e(t.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({code:o.code,code_father:o.code_father,company_code:o.company_code,company_name_e:o.company_name_e,company_name_l:o.company_name_l,contact_name:o.contact_name,customer_id:o.customer_id,email:o.email,employee_nr:o.employee_nr,id:o.id,is_active:o.is_active,lod:o.lod,loq:o.loq,tat:o.tat,mark:o.mark,note_asm:o.note_asm,para_name_e:o.para_name_e,para_name_l:o.para_name_l,parameter_id:o.parameter_id,phone:o.phone,received_date:o.received_date,request_no:o.request_no,result_record:o.result_record,returned_date:o.returned_date,sale_man:o.sale_man,sample_code:o.sample_code,inner_code:o.inner_code,sample_id:o.sample_id,category_id:o.category_id,sample_name:o.sample_name,specification_name_e:o.specification_name_e,specification_name_l:o.specification_name_l,unit:o.unit,userid:o.userid,flag:!1,note_lab:o.note_lab,status:o.status,note:o.note,category_name_e:o.category_name_e,category_name_l:o.category_name_l,export_result:null==o.export_result?1:o.export_result,allow_lod:null!=o.allow_lod&&o.allow_lod,compare_note:o.compare_note,dept_name_e:o.dept_name_e,dept_name_l:o.dept_name_l})}}catch(r){i.e(r)}finally{i.f()}n._preparationlist=c,n.totalRow=t.rowCount,n.totalPage=t.totalPages})}}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyPL",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",t).subscribe(function(t){e._pllist=t.data})}},{key:"_exportAll",value:function(t){var n,a=[],c=e(t);try{for(c.s();!(n=c.n()).done;){var i=n.value,o="";4==i.status&&(o="en"==this.user.lang?y.a.s_done_en:y.a.s_done),3==i.status&&(o="en"==this.user.lang?y.a.s_validate_en:y.a.s_validate),2==i.status&&(o="en"==this.user.lang?y.a.s_techvalidate_en:y.a.s_techvalidate),1==i.status&&(o="en"==this.user.lang?y.a.s_prepare_en:y.a.s_prepare),0==i.status&&(o="en"==this.user.lang?y.a.s_none_en:y.a.s_none);var r=new Date(i.received_date).getTime()+864e5*i.tat;a.push({"Inner code":i.inner_code,Code:i.code,"Internal test":i.specification_name_l,Parameter:i.para_name_l,"Sample matrix":i.category_name_l,"Priority TAT":i.tat,Note:null==i.note?"":i.note,"Note Lab":null==i.note_lab?"":i.note_lab,"Note ASM":null==i.note_asm?"":i.note_asm,Unit:null==i.unit?"":i.unit,LOD:null==i.lod?"":i.lod,LOQ:null==i.loq?"":i.loq,Result:null==i.result_record?"":i.result_record,Status:o,"Received Date":s(new Date(i.received_date)).format("DD/MM/YYYY"),"Returned Date":s(new Date(r)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?i.dept_name_e:i.dept_name_l})}}catch(l){c.e(l)}finally{c.f()}this._excelService.exportAsExcelFile(a,"LabValidation-"+s(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+t.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.length+" "+y.a.record,"OK")}},{key:"orgValueChange1",value:function(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt1=s(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt2=s(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e,t){var n=this;3==t||4==t?(e.status=t,v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_switch_en:y.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData(n._id)}):n.loadData(n._id)})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData(n._id)}))}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)})}},{key:"_updateValidation",value:function(e,t){var n=this;1==t&&(e.allow_lod=!e.allow_lod),v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure0_en:y.a.are_u_sure0,text:e.code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value&&n._dataService.post("/lab/updateValidation",e).subscribe(function(e){n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),n.socket.emit("refresh",{})})})}},{key:"_updateValidationLOD",value:function(e,t){var n=this;1==t&&(e.allow_lod=!e.allow_lod),v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_allow_en:y.a.are_u_sure_allow,text:e.code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value&&n._dataService.post("/lab/updateValidationLOD",e).subscribe(function(e){n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),n.socket.emit("refresh",{})})})}},{key:"popupComment",value:function(e,t){this.loadDetailSample(t.sample_id),this.modalService.open(e,{size:"md",centered:!0})}},{key:"saveChangeComment",value:function(e,t){var n=this,a={};a.sample_id=this.entityComment.sample_id,a.take_note=this.entityComment.take_note,a.url_img=e,a.flag=t,this._dataService.post("/request/updateComment",a).subscribe(function(e){n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),n.socket.emit("refresh",{}),n.fileUpload=null,n.entityComment.url_img=null,n.fileUpload1.nativeElement.value=null,n.modalService.dismissAll()})}},{key:"loadDetailSample",value:function(e){var t=this,n={};n.sample_id=e,this._dataService.post("/request/detailSampleOrder",n).subscribe(function(e){console.log(e),t.entityComment=e.data,t.entityComment.url_img=e.data.url_img,t._path=null==e.data.url_img?null:e.data.url_img.substr(e.data.url_img.lastIndexOf("/")+1,e.data.url_img.length)})}},{key:"fileEvent",value:function(e){var t=e.target.files[0];if(void 0===t||void 0===t.name)this.fileUpload=null,this.entityComment.url_img=null,this._notifyService.showError("en"==this.user.lang?y.a.recheck_file_en:y.a.recheck_file,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);else{this.fileUpload=t.name;var n=this.fileUpload.split(".").pop();"jpg"===n||"jpeg"===n||"png"===n?(console.log("ok"),this.entityComment.url_img=t.name,this._processUpload(e.target)):(this._notifyService.showError("en"==this.user.lang?y.a.format_incorrect_en:y.a.format_incorrect,"en"==this.user.lang?y.a.error_title_en:y.a.error_title),this.fileUpload=null,this.entityComment.url_img=null,this.fileUpload1.nativeElement.value=null)}}},{key:"_processUpload",value:function(e){var t=this;if(null==e)this._notifyService.showError("en"==this.user.lang?y.a.recheck_file_en:y.a.recheck_file,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);else{var n={folder_name:"lab_attachment"};n.id=this.entityComment.sample_id,this._uploadService.uploadFile("/services/uploads/"+n.id+"/"+n.folder_name,e.files).subscribe(function(e){console.log(e),t.saveChangeComment(e.data,1)})}}},{key:"removeAttachment",value:function(e){var t=this,n={};n.url=e.url_img,console.log(n),this._dataService.post("/services/deletefile1",n).subscribe(function(n){var a={};a.sample_id=e.sample_id,a.take_note=e.take_note,a.url_img=null,t._dataService.post("/request/updateComment",a).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t.socket.emit("refresh",{}),t._path="",t.loadDetailSample(e.sample_id)})})}},{key:"_updateStatusSample",value:function(e){var t=this;console.log(e);var n={};n.sample_id=e.sample_id,n.parameter_id=e.parameter_id,n.category_id=e.category_id,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,this._dataService.post("/labresult/updateReturnSample",n).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t.socket.emit("refresh",{})})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}()).\u0275fac=function(e){return new(e||Ne)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(C.s),x.bc(l.a))},Ne.\u0275cmp=x.Vb({type:Ne,selectors:[["app-labrep-detaillist"]],viewQuery:function(e,t){var n;1&e&&(x.jd(te,1),x.jd(te,1)),2&e&&(x.Qc(n=x.sc())&&(t.fileUpload=n.first),x.Qc(n=x.sc())&&(t.fileUpload1=n.first))},decls:117,vars:117,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","disabled","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],["contentCommentUpload",""],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","18",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],[2,"text-align","center"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[3,"innerHTML"],[2,"cursor","pointer",3,"click"],["class","fa fa-check-circle text-success",4,"ngIf"],["class","fa fa-times-circle text-danger",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["href","javascript:;",3,"click"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"fa","fa-check-circle","text-success"],[1,"fa","fa-times-circle","text-danger"],[1,"form","theme-form",3,"ngSubmit"],["form1","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group"],["for","comment"],["rows","2","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["for","img",1,"mr-sm-2"],["name","fileUpload","type","file",3,"change"],["fileUpload",""],["type","hidden","name","fileUpload",3,"ngModel","ngModelChange"],[1,"mute"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit","class","btn btn-primary mr-sm-1",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary","mr-sm-1"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData(t._id)})("keyup.enter",function(){return t.loadData(t._id)}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.hc(12,"select",10),x.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData(t._id)}),x.hc(13,"option",11),x.dd(14),x.wc(15,"translate"),x.wc(16,"translate"),x.gc(),x.bd(17,ne,2,2,"option",12),x.gc(),x.bd(18,ae,4,3,"button",13),x.bd(19,ce,1,0,"img",14),x.gc(),x.gc(),x.hc(20,"div",15),x.hc(21,"div",16),x.hc(22,"select",17),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(23,"option",18),x.dd(24,"#10"),x.gc(),x.hc(25,"option",19),x.dd(26,"#25"),x.gc(),x.hc(27,"option",20),x.dd(28,"#50"),x.gc(),x.hc(29,"option",21),x.dd(30,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(31,"div",22),x.hc(32,"div",23),x.hc(33,"div",24),x.hc(34,"div",25),x.hc(35,"pagination",26),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(36,"div",27),x.hc(37,"a",28),x.dd(38),x.wc(39,"translate"),x.wc(40,"translate"),x.wc(41,"translate"),x.wc(42,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(43,"div",23),x.hc(44,"div",29),x.hc(45,"table",30),x.hc(46,"thead",31),x.hc(47,"tr"),x.hc(48,"th",32),x.dd(49,"#"),x.gc(),x.hc(50,"th",33),x.dd(51),x.wc(52,"translate"),x.gc(),x.hc(53,"th",33),x.dd(54),x.wc(55,"translate"),x.gc(),x.hc(56,"th",33),x.dd(57),x.wc(58,"translate"),x.gc(),x.hc(59,"th",33),x.dd(60),x.wc(61,"translate"),x.gc(),x.hc(62,"th",33),x.dd(63),x.wc(64,"translate"),x.gc(),x.hc(65,"th",33),x.dd(66),x.wc(67,"translate"),x.gc(),x.hc(68,"th",33),x.dd(69),x.wc(70,"translate"),x.gc(),x.hc(71,"th",33),x.dd(72),x.wc(73,"translate"),x.gc(),x.hc(74,"th",33),x.dd(75),x.wc(76,"translate"),x.gc(),x.hc(77,"th",33),x.dd(78),x.wc(79,"translate"),x.gc(),x.hc(80,"th",33),x.dd(81),x.wc(82,"translate"),x.gc(),x.hc(83,"th",33),x.dd(84),x.wc(85,"translate"),x.gc(),x.hc(86,"th",33),x.dd(87),x.wc(88,"translate"),x.gc(),x.hc(89,"th",33),x.dd(90),x.wc(91,"translate"),x.gc(),x.hc(92,"th",33),x.dd(93),x.wc(94,"translate"),x.gc(),x.hc(95,"th",33),x.dd(96),x.wc(97,"translate"),x.gc(),x.hc(98,"th",33),x.dd(99),x.wc(100,"translate"),x.gc(),x.gc(),x.gc(),x.hc(101,"tbody"),x.bd(102,ie,6,3,"ng-container",34),x.bd(103,ve,2,1,"ng-container",34),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(104,"div",23),x.hc(105,"div",24),x.hc(106,"div",25),x.hc(107,"pagination",26),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(108,"div",27),x.hc(109,"a",28),x.dd(110),x.wc(111,"translate"),x.wc(112,"translate"),x.wc(113,"translate"),x.wc(114,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(115,Se,34,18,"ng-template",null,35,x.cd)),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,59,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(115,we))("disabled",null!=t._id),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(116,we))("disabled",null!=t._id),x.Nb(1),x.Dc("ngModel",t.department_id)("disabled",null!=t._id),x.Nb(2),x.gd(" ",x.xc(15,61,"All")," ",x.xc(16,63,"Department")," "),x.Nb(3),x.Dc("ngForOf",t._deptlist),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-VALID","report")),x.Nb(1),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(39,65,"Total of records"),": ",t.totalRow," - ",x.xc(40,67,"Page")," ",t.pageIndex," ",x.xc(41,69,"of")," ",t.totalPage," ",x.xc(42,71,"page"),""),x.Nb(13),x.ed(x.xc(52,73,"Actions")),x.Nb(3),x.fd(" ",x.xc(55,75,"Inner code")," "),x.Nb(3),x.fd(" ",x.xc(58,77,"Code")," "),x.Nb(3),x.ed(x.xc(61,79,"Internal testing")),x.Nb(3),x.ed(x.xc(64,81,"Parameter name")),x.Nb(3),x.ed(x.xc(67,83,"Priority")),x.Nb(3),x.ed(x.xc(70,85,"Note")),x.Nb(3),x.ed(x.xc(73,87,"Note lab")),x.Nb(3),x.ed(x.xc(76,89,"Note asm")),x.Nb(3),x.ed(x.xc(79,91,"Unit")),x.Nb(3),x.ed(x.xc(82,93,"LOD")),x.Nb(3),x.ed(x.xc(85,95,"LOQ")),x.Nb(3),x.ed(x.xc(88,97,"Results")),x.Nb(3),x.ed(x.xc(91,99,"Status")),x.Nb(3),x.ed(x.xc(94,101,"Mark")),x.Nb(3),x.ed(x.xc(97,103,"Tick LOD?")),x.Nb(3),x.ed(x.xc(100,105,"Compare")),x.Nb(3),x.Dc("ngIf",0==t._preparationlist.length),x.Nb(1),x.Dc("ngIf",t._preparationlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(111,107,"Total of records"),": ",t.totalRow," - ",x.xc(112,109,"Page")," ",t.pageIndex," ",x.xc(113,111,"of")," ",t.totalPage," ",x.xc(114,113,"page"),""))},directives:[r.c,r.n,r.q,k.b,k.a,r.x,r.r,r.A,o.p,o.q,T.a,o.o,r.z,r.o,r.p],pipes:[P.c],styles:[""]}),Ne);function Me(e,t){if(1&e){var n=x.ic();x.hc(0,"button",34),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e.exportList)}),x.cc(1,"i",35),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function Ce(e,t){1&e&&x.cc(0,"img",36)}function ke(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",37),x.hc(3,"h3",38),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function Te(e,t){if(1&e&&(x.hc(0,"a",44),x.hc(1,"strong",38),x.dd(2),x.gc(),x.gc()),2&e){var n=x.vc().$implicit;x.Fc("routerLink","/request/lab-report-validation/",n.id,""),x.Nb(2),x.ed(n.total_validation)}}function Ie(e,t){1&e&&(x.fc(0),x.hc(1,"strong"),x.dd(2,"0"),x.gc(),x.ec())}function Pe(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",40),x.dd(2),x.gc(),x.hc(3,"td"),x.dd(4),x.gc(),x.hc(5,"td"),x.dd(6),x.wc(7,"date"),x.gc(),x.hc(8,"td"),x.dd(9),x.wc(10,"date"),x.gc(),x.hc(11,"td"),x.dd(12),x.gc(),x.hc(13,"td"),x.hc(14,"strong"),x.dd(15),x.gc(),x.gc(),x.hc(16,"td"),x.hc(17,"a",41),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2),c=x.Rc(84);return e.total_results>0?a._openResults(c,e):null}),x.hc(18,"strong",42),x.dd(19),x.gc(),x.gc(),x.gc(),x.hc(20,"td"),x.bd(21,Te,3,2,"a",43),x.bd(22,Ie,3,0,"ng-container",32),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.fd(" ",a.request_no," "),x.Nb(2),x.ed(x.yc(7,10,a.received_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.ed(x.yc(10,13,a.returned_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.ed(a.total_sample),x.Nb(3),x.ed(a.total_tests),x.Nb(3),x.Dc("ngClass",a.total_results<a.total_tests?"text-danger":""),x.Nb(1),x.ed(a.total_results),x.Nb(2),x.Dc("ngIf",a.total_validation>0),x.Nb(1),x.Dc("ngIf",0==a.total_validation)}}function Re(e,t){if(1&e&&(x.fc(0),x.bd(1,Pe,23,16,"tr",39),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._preparationlist)}}function Ee(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"td"),x.hc(2,"input",57),x.rc("change",function(e){x.Uc(n);var a=t.$implicit;return x.vc(2).selectItem(e,a.sample_id+","+a.parameter_id+","+a.category_id)}),x.gc(),x.gc(),x.hc(3,"td"),x.hc(4,"span",42),x.dd(5),x.gc(),x.gc(),x.hc(6,"td"),x.dd(7),x.gc(),x.hc(8,"td"),x.dd(9),x.gc(),x.hc(10,"td"),x.dd(11),x.gc(),x.hc(12,"td"),x.cc(13,"span",58),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.Fc("name","ckU",c+1,""),x.Dc("checked",i.exportList.includes(a.sample_id+","+a.parameter_id+","+a.category_id)),x.Nb(2),x.Dc("ngClass",a.flagEvicted?"text-danger":""),x.Nb(1),x.ed(a.inner_code),x.Nb(2),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.para_name_e:a.para_name_l," "),x.Nb(2),x.Dc("innerHTML",a.result_record,x.Vc)}}function Ae(e,t){if(1&e){var n=x.ic();x.hc(0,"form",45),x.hc(1,"div",46),x.hc(2,"h4",47),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",48),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",49),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",50),x.hc(9,"div",51),x.hc(10,"div",52),x.hc(11,"div",27),x.hc(12,"button",53),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._switch(1,e.exportList)}),x.dd(13),x.wc(14,"translate"),x.gc(),x.hc(15,"button",54),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._switch(2,e.exportList)}),x.dd(16),x.wc(17,"translate"),x.gc(),x.cc(18,"hr"),x.hc(19,"table",28),x.hc(20,"thead",29),x.hc(21,"tr"),x.hc(22,"th",55),x.hc(23,"input",56),x.rc("change",function(e){return x.Uc(n),x.vc().selectAll(e)}),x.gc(),x.gc(),x.hc(24,"th",31),x.dd(25),x.wc(26,"translate"),x.gc(),x.hc(27,"th",31),x.dd(28),x.wc(29,"translate"),x.gc(),x.hc(30,"th",31),x.dd(31),x.wc(32,"translate"),x.gc(),x.hc(33,"th",31),x.dd(34),x.wc(35,"translate"),x.gc(),x.hc(36,"th",31),x.dd(37),x.wc(38,"translate"),x.gc(),x.gc(),x.gc(),x.hc(39,"tbody"),x.bd(40,Ee,14,8,"tr",39),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.gd(" ",x.xc(4,14,"Report")," - ",a._titleRequest," "),x.Nb(9),x.Dc("disabled",0==a.resultlist.length),x.Nb(1),x.fd(" ",x.xc(14,16,"Action draft")," "),x.Nb(2),x.Dc("disabled",0==a.resultlist.length),x.Nb(1),x.fd(" ",x.xc(17,18,"Action direct")," "),x.Nb(7),x.Dc("disabled",0==a.resultlist.length)("checked",a.exportList.length==a.resultlist.length),x.Nb(2),x.fd(" ",x.xc(26,20,"Sample code")," "),x.Nb(3),x.fd(" ",x.xc(29,22,"Code")," "),x.Nb(3),x.fd(" ",x.xc(32,24,"Internal testing")," "),x.Nb(3),x.fd(" ",x.xc(35,26,"Parameter name")," "),x.Nb(3),x.fd(" ",x.xc(38,28,"Results")," "),x.Nb(3),x.Dc("ngForOf",a.resultlist)}}var Oe,Ye=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},Ue=((Oe=function(){function t(e,a,c,i,o,r,l){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=o,this._excelService=r,this.modalService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=0,this.entity={},this.resultlist=[],this._orderdetails=[],this._titleRequest="",this.exportList=[],this._idRequest="",!1!==e.checkAccess("REQ-REPORT")&&!1!==e.hasPermission("REQ-REPORT","read")||this._route.navigate(["/error/404"]),this.socket=g()(u.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var e=this,t={};t.filter=this._keyword,t.domain=this.user.short_code,t.start_date=this._dt1,t.end_date=this._dt2,t.page=this.pageIndex,t.limit=this.pageSize,console.log(t),this._dataService.post("/lab/getlistreportlabs",t).subscribe(function(t){console.log("Load data",t),e._preparationlist=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyCSP",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",t).subscribe(function(t){e._csplist=t.data})}},{key:"_exportAll",value:function(){var t=this,n={filter:""};n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.page=1,n.limit=99999,this._dataService.post("/lab/getlistreportlabs",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({Ma_Yeu_Cau:o.request_no,Ngay_Nhan:s(o.received_date).format("DD/MM/YYYY HH:mm"),Ngay_Tra:s(o.returned_date).format("DD/MM/YYYY HH:mm"),Tong_Mau:parseInt(o.total_sample),Tong_Test:o.total_tests,Tong_Ket_Qua:o.total_results,Tong_Lab_Validation:o.total_validation,Moi_Lien_He:"",Doanh_Thu:""})}}catch(r){i.e(r)}finally{i.f()}t._excelService.exportAsExcelFile(c,"LabReport-"+s(new Date).format("YYYY-MM-DD"))})}},{key:"orgValueChange1",value:function(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=s(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=s(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e){this.entity=e}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_complete_en:y.a.are_u_sure_complete,text:this.entity.request_no,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(n){n.value?e._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)}):(e.isSave=!1,e.socket.emit("refresh",{}))})}},{key:"_openResults",value:function(e,t){console.log(t),this._titleRequest=t.request_no,this._idRequest=t.id,this.loadOrderDetailDoneById(t.id),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"loadOrderDetailDoneById",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/labresult/getlist-result-byrequestId",a).subscribe(function(a){console.log("ABC",a);var c={};c.id=t,n._dataService.post("/lab/labcompleted",c).subscribe(function(t){console.log("KQ0",t);var c,i=[],o=e(t.data);try{var r=function(){var e=c.value,t=a.data.filter(function(t){return t.sample_id==e.sample_id&&t.parameter_id==e.parameter_id&&t.category_id==e.category_id});0==t.length?(e.flagEvicted=!1,i.push(e)):2==t[0].is_active&&0==t.filter(function(e){return 2!=e.is_active&&4!=e.is_active}).length&&(e.flagEvicted=!0,i.push(e))};for(o.s();!(c=o.n()).done;)r()}catch(l){o.e(l)}finally{o.f()}console.log("KQ",i),n.resultlist=i})})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this.resultlist.forEach(function(e){return t.exportList.push(e.sample_id+","+e.parameter_id+","+e.category_id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!=t})}},{key:"_switch",value:function(t,n){if(1==t)if(0==n.length){var a,c=[],i=e(this.resultlist);try{for(i.s();!(a=i.n()).done;){var o=a.value,r="";r+=o.sample_id+","+o.parameter_id+","+o.category_id,c.push(r)}}catch(u){i.e(u)}finally{i.f()}this._processByIds(c,"draft")}else this._processByIds(n,"draft");if(2==t)if(0==n.length){var l,d=[],s=e(this.resultlist);try{for(s.s();!(l=s.n()).done;){var h=l.value,g="";g+=h.sample_id+","+h.parameter_id+","+h.category_id,d.push(g)}}catch(u){s.e(u)}finally{s.f()}this._processByIds(d,"official")}else this._processByIds(n,"official")}},{key:"_processByRequestId",value:function(e,t){var n=this,a={};a.id=e,a.state=t,a.userId=this.user.id,console.log(a),this._dataService.post("/labresult/processAll",a).subscribe(function(e){console.log(e),"ok"==e.result&&n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK")})}},{key:"_processByIds",value:function(t,n){var a=this,c={};c.state=n,c.userId=this.user.id;var i,o=[],r=e(t);try{for(r.s();!(i=r.n()).done;){var l=i.value,d={},s=l.split(",");d.sample_id=s[0],d.parameter_id=s[1],d.category_id=s[2],o.push(d)}}catch(h){r.e(h)}finally{r.f()}c.getlist=o,console.log("Process",c),this._dataService.post("/labresult/processByIds",c).subscribe(function(e){console.log("actions",e),"ok"==e.result&&a._notifyService.showSuccess("en"==a.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),a.exportList=[],a.loadOrderDetailDoneById(a._idRequest)})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}()).\u0275fac=function(e){return new(e||Oe)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(C.s))},Oe.\u0275cmp=x.Vb({type:Oe,selectors:[["app-req-report"]],decls:85,vars:82,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["routerLink","/request/lab-results/list",1,"btn","btn-sm","btn-warning"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],["content",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","8",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",3,"click"],[3,"ngClass"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"disabled","click"],[1,"btn","btn-sm","btn-success","mr-sm-2",3,"disabled","click"],[2,"text-align","center","width","40px"],["type","checkbox","name","checkAll",1,"form-control",3,"disabled","checked","change"],["type","checkbox",1,"form-control",3,"name","checked","change"],[3,"innerHTML"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.bd(12,Me,4,3,"button",10),x.hc(13,"button",11),x.dd(14),x.wc(15,"translate"),x.wc(16,"translate"),x.gc(),x.bd(17,Ce,1,0,"img",12),x.gc(),x.gc(),x.hc(18,"div",13),x.hc(19,"div",14),x.hc(20,"select",15),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(21,"option",16),x.dd(22,"#10"),x.gc(),x.hc(23,"option",17),x.dd(24,"#25"),x.gc(),x.hc(25,"option",18),x.dd(26,"#50"),x.gc(),x.hc(27,"option",19),x.dd(28,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(29,"div",20),x.hc(30,"div",21),x.hc(31,"div",22),x.hc(32,"div",23),x.hc(33,"pagination",24),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(34,"div",25),x.hc(35,"a",26),x.dd(36),x.wc(37,"translate"),x.wc(38,"translate"),x.wc(39,"translate"),x.wc(40,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(41,"div",21),x.hc(42,"div",27),x.hc(43,"table",28),x.hc(44,"thead",29),x.hc(45,"tr"),x.hc(46,"th",30),x.dd(47,"#"),x.gc(),x.hc(48,"th",31),x.dd(49),x.wc(50,"translate"),x.gc(),x.hc(51,"th",31),x.dd(52),x.wc(53,"translate"),x.gc(),x.hc(54,"th",31),x.dd(55),x.wc(56,"translate"),x.gc(),x.hc(57,"th",31),x.dd(58),x.wc(59,"translate"),x.gc(),x.hc(60,"th",31),x.dd(61),x.wc(62,"translate"),x.gc(),x.hc(63,"th",31),x.dd(64),x.wc(65,"translate"),x.gc(),x.hc(66,"th",31),x.dd(67),x.wc(68,"translate"),x.gc(),x.gc(),x.gc(),x.hc(69,"tbody"),x.bd(70,ke,6,3,"ng-container",32),x.bd(71,Re,2,1,"ng-container",32),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(72,"div",21),x.hc(73,"div",22),x.hc(74,"div",23),x.hc(75,"pagination",24),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(76,"div",25),x.hc(77,"a",26),x.dd(78),x.wc(79,"translate"),x.wc(80,"translate"),x.wc(81,"translate"),x.wc(82,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(83,Ae,41,30,"ng-template",null,33,x.cd)),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,44,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(80,Ye)),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(81,Ye)),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),x.Nb(2),x.gd(" ",x.xc(15,46,"Print")," ",x.xc(16,48,"Report")," "),x.Nb(3),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(37,50,"Total of records"),": ",t.totalRow," - ",x.xc(38,52,"Page")," ",t.pageIndex," ",x.xc(39,54,"of")," ",t.totalPage," ",x.xc(40,56,"page"),""),x.Nb(13),x.fd(" ",x.xc(50,58,"Request code")," "),x.Nb(3),x.fd(" ",x.xc(53,60,"Received date")," "),x.Nb(3),x.ed(x.xc(56,62,"Returned date")),x.Nb(3),x.fd(" ",x.xc(59,64,"Total of samples")," "),x.Nb(3),x.ed(x.xc(62,66,"Total of tests")),x.Nb(3),x.ed(x.xc(65,68,"Total of results")),x.Nb(3),x.fd(" ",x.xc(68,70,"Total of validation labs")," "),x.Nb(3),x.Dc("ngIf",0==t._preparationlist.length),x.Nb(1),x.Dc("ngIf",t._preparationlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(79,72,"Total of records"),": ",t.totalRow," - ",x.xc(80,74,"Page")," ",t.pageIndex," ",x.xc(81,76,"of")," ",t.totalPage," ",x.xc(82,78,"page"),""))},directives:[r.c,r.n,r.q,k.b,k.a,o.q,l.e,r.x,r.r,r.A,T.a,o.p,o.o,l.g,r.z,r.o,r.p],pipes:[P.c,o.f],styles:[""]}),Oe),Fe=i("REEf");function Le(e,t){if(1&e&&(x.hc(0,"option",44),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function qe(e,t){if(1&e&&(x.hc(0,"option",44),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.pl_name_e:n.pl_name_l," ")}}function ze(e,t){if(1&e){var n=x.ic();x.hc(0,"button",45),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e._preparationlist)}),x.cc(1,"i",46),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function Ge(e,t){1&e&&x.cc(0,"img",47)}function Ve(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",48),x.hc(3,"h3",49),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function Be(e,t){1&e&&x.cc(0,"i",64)}function He(e,t){1&e&&x.cc(0,"i",65)}function Qe(e,t){if(1&e){var n=x.ic();x.hc(0,"button",61),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return e.flag=!e.flag}),x.wc(1,"translate"),x.bd(2,Be,1,0,"i",62),x.bd(3,He,1,0,"i",63),x.gc()}if(2&e){var a=x.vc().$implicit,c=x.vc(2);x.Dc("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!c._authenService.hasPermission("REQ-RES","update"))("title",x.xc(1,5,a.flag?"Cancel":"Edit")),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag)}}function $e(e,t){if(1&e){var n=x.ic();x.hc(0,"button",66),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._updateStatus(e,0)}),x.wc(1,"translate"),x.cc(2,"i",67),x.gc()}2&e&&x.Dc("title",x.xc(1,1,"Save"))}function Ke(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.note_asm,"")}}function je(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",68),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.note_asm=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","noteasm",c+1,""),x.Dc("ngModel",i.note_asm)}}function We(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.unit,"")}}function Je(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",68),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.unit=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","unit",c+1,""),x.Dc("ngModel",i.unit)}}function Xe(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.lod,"")}}function Ze(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",68),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.lod=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","lod",c+1,""),x.Dc("ngModel",i.lod)}}function et(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.loq,"")}}function tt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",68),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.loq=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","loq",c+1,""),x.Dc("ngModel",i.loq)}}function nt(e,t){if(1&e&&(x.fc(0),x.cc(1,"span",69),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.Dc("innerHTML",n.result_record,x.Vc)}}function at(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",70),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.result_record=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","result_record",c+1,""),x.Dc("ngModel",i.result_record)}}function ct(e,t){1&e&&(x.hc(0,"span",71),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"None")))}function it(e,t){1&e&&(x.hc(0,"span",72),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Preparation")))}function ot(e,t){1&e&&(x.hc(0,"span",73),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Technical validation")))}function rt(e,t){1&e&&(x.hc(0,"span",74),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Validation")))}function lt(e,t){1&e&&(x.hc(0,"span",75),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Done")))}function dt(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",51),x.dd(2),x.gc(),x.hc(3,"td",52),x.bd(4,Qe,4,7,"button",53),x.bd(5,$e,3,3,"button",54),x.gc(),x.hc(6,"td"),x.dd(7),x.gc(),x.hc(8,"td"),x.dd(9),x.gc(),x.hc(10,"td"),x.dd(11),x.gc(),x.hc(12,"td"),x.dd(13),x.gc(),x.hc(14,"td"),x.dd(15),x.gc(),x.hc(16,"td"),x.dd(17),x.gc(),x.hc(18,"td"),x.bd(19,Ke,2,1,"ng-container",43),x.bd(20,je,2,2,"ng-container",43),x.gc(),x.hc(21,"td"),x.bd(22,We,2,1,"ng-container",43),x.bd(23,Je,2,2,"ng-container",43),x.gc(),x.hc(24,"td"),x.bd(25,Xe,2,1,"ng-container",43),x.bd(26,Ze,2,2,"ng-container",43),x.gc(),x.hc(27,"td"),x.bd(28,et,2,1,"ng-container",43),x.bd(29,tt,2,2,"ng-container",43),x.gc(),x.hc(30,"td"),x.bd(31,nt,2,1,"ng-container",43),x.bd(32,at,2,2,"ng-container",43),x.gc(),x.hc(33,"td",55),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2);return 1==e.status&&null!=e.result_record&&""!=e.result_record?a._updateStatus(e,2):null}),x.bd(34,ct,3,3,"span",56),x.bd(35,it,3,3,"span",57),x.bd(36,ot,3,3,"span",58),x.bd(37,rt,3,3,"span",59),x.bd(38,lt,3,3,"span",60),x.gc(),x.hc(39,"td"),x.dd(40),x.wc(41,"date"),x.gc(),x.hc(42,"td"),x.dd(43),x.wc(44,"date"),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.Dc("ngIf",1==a.status),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.ed(a.inner_code),x.Nb(2),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.para_name_e:a.para_name_l," "),x.Nb(2),x.ed(a.tat),x.Nb(2),x.ed(a.note_lab),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",0==a.status),x.Nb(1),x.Dc("ngIf",1==a.status),x.Nb(1),x.Dc("ngIf",2==a.status),x.Nb(1),x.Dc("ngIf",3==a.status),x.Nb(1),x.Dc("ngIf",4==a.status),x.Nb(2),x.ed(x.yc(41,26,a.received_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.ed(x.yc(44,29,a.returned_date,"dd/MM/yyyy HH:mm"))}}function st(e,t){if(1&e&&(x.fc(0),x.bd(1,dt,45,32,"tr",50),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._preparationlist)}}var ht,gt=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},ut=((ht=function(){function t(e,a,c,i,o,r,l,d){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=o,this._excelService=r,this._numberFormat=l,this.modalService=d,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=1,this.entity={},!1!==e.checkAccess("REQ-RES")&&!1!==e.hasPermission("REQ-RES","read")||this._route.navigate(["/error/404"]),this.socket=g()(u.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var t=this,n={};n.filter=this._keyword,n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.department_id=this.department_id,n.family_id=this.testcsp_id,n.flag_status=this._status,n.page=this.pageIndex,n.limit=this.pageSize,this._dataService.post("/lab/getlistresultlabs",n).subscribe(function(n){console.log(n);var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({code:o.code,code_father:o.code_father,company_code:o.company_code,company_name_e:o.company_name_e,company_name_l:o.company_name_l,contact_name:o.contact_name,customer_id:o.customer_id,email:o.email,employee_nr:o.employee_nr,id:o.id,is_active:o.is_active,lod:o.lod,loq:o.loq,mark:o.mark,note_asm:o.note_asm,para_name_e:o.para_name_e,para_name_l:o.para_name_l,parameter_id:o.parameter_id,phone:o.phone,received_date:o.received_date,request_no:o.request_no,result_record:o.result_record,returned_date:o.returned_date,sale_man:o.sale_man,sample_code:o.sample_code,inner_code:o.inner_code,sample_id:o.sample_id,category_id:o.category_id,sample_name:o.sample_name,specification_name_e:o.specification_name_e,specification_name_l:o.specification_name_l,unit:o.unit,userid:o.userid,flag:!1,note_lab:o.note_lab,status:o.status,note:o.note,category_name_e:o.category_name_e,category_name_l:o.category_name_l,tat:o.tat,dept_name_e:o.dept_name_e,dept_name_l:o.dept_name_l,pl_name_e:o.pl_name_e,pl_name_l:o.pl_name_l})}}catch(r){i.e(r)}finally{i.f()}t._preparationlist=c,t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyPL",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",t).subscribe(function(t){e._pllist=t.data})}},{key:"_exportAll",value:function(t){var n,a=[],c=e(t);try{for(c.s();!(n=c.n()).done;){var i=n.value,o="";4==i.status&&(o="en"==this.user.lang?y.a.s_done_en:y.a.s_done),3==i.status&&(o="en"==this.user.lang?y.a.s_validate_en:y.a.s_validate),2==i.status&&(o="en"==this.user.lang?y.a.s_techvalidate_en:y.a.s_techvalidate),1==i.status&&(o="en"==this.user.lang?y.a.s_prepare_en:y.a.s_prepare),0==i.status&&(o="en"==this.user.lang?y.a.s_none_en:y.a.s_none);var r=new Date(i.received_date).getTime()+864e5*i.tat,l="en"==this.user.lang?i.pl_name_e:i.pl_name_l;a.push({"Inner code":i.inner_code,Code:i.code,"Internal test":i.specification_name_l,Parameter:i.para_name_l,"Sample matrix":i.category_name_l,"Priority TAT":i.tat,"Note Lab":null==i.note_lab?"":i.note_lab,"Note ASM":null==i.note_asm?"":i.note_asm,Unit:null==i.unit?"":i.unit,LOD:null==i.lod?"":i.lod,LOQ:null==i.loq?"":i.loq,Result:null==i.result_record?"":i.result_record,Status:o,"Received Date":s(new Date(i.received_date)).format("DD/MM/YYYY"),"Returned Date":s(new Date(r)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?i.dept_name_e:i.dept_name_l,PL:null==l?"":l,"Sample name":i.sample_name})}}catch(d){c.e(d)}finally{c.f()}this._excelService.exportAsExcelFile(a,"Result-"+s(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+t.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.length+" "+y.a.record,"OK")}},{key:"orgValueChange1",value:function(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt1=s(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt2=s(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e,t){var n=this;2==t?(e.status=t,v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_switch_en:y.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.socket.emit("refresh",{})}):n.socket.emit("refresh",{})})):(console.log("Update",e),this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.socket.emit("refresh",{})}))}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)})}}]),t}()).\u0275fac=function(e){return new(e||ht)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(Fe.a),x.bc(C.s))},ht.\u0275cmp=x.Vb({type:ht,selectors:[["app-req-result"]],decls:133,vars:132,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","16",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],[2,"text-align","center"],[3,"ngClass","disabled","title","click",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],["type","text",1,"form-control",2,"width","250px",3,"name","ngModel","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.hc(12,"select",10),x.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),x.hc(13,"option",11),x.dd(14),x.wc(15,"translate"),x.wc(16,"translate"),x.gc(),x.bd(17,Le,2,2,"option",12),x.gc(),x.hc(18,"select",13),x.rc("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),x.hc(19,"option",11),x.dd(20),x.wc(21,"translate"),x.gc(),x.bd(22,qe,2,2,"option",12),x.gc(),x.hc(23,"select",14),x.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.hc(24,"option",15),x.dd(25),x.wc(26,"translate"),x.gc(),x.hc(27,"option",16),x.dd(28),x.wc(29,"translate"),x.gc(),x.hc(30,"option",17),x.dd(31),x.wc(32,"translate"),x.gc(),x.hc(33,"option",18),x.dd(34),x.wc(35,"translate"),x.gc(),x.hc(36,"option",19),x.dd(37),x.wc(38,"translate"),x.gc(),x.hc(39,"option",20),x.dd(40),x.wc(41,"translate"),x.gc(),x.gc(),x.bd(42,ze,4,3,"button",21),x.bd(43,Ge,1,0,"img",22),x.gc(),x.gc(),x.hc(44,"div",23),x.hc(45,"div",24),x.hc(46,"select",25),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(47,"option",26),x.dd(48,"#10"),x.gc(),x.hc(49,"option",27),x.dd(50,"#25"),x.gc(),x.hc(51,"option",28),x.dd(52,"#50"),x.gc(),x.hc(53,"option",29),x.dd(54,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(55,"div",30),x.hc(56,"div",31),x.hc(57,"div",32),x.hc(58,"div",33),x.hc(59,"pagination",34),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(60,"div",35),x.hc(61,"a",36),x.dd(62),x.wc(63,"translate"),x.wc(64,"translate"),x.wc(65,"translate"),x.wc(66,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(67,"div",31),x.hc(68,"div",37),x.hc(69,"table",38),x.hc(70,"thead",39),x.hc(71,"tr"),x.hc(72,"th",40),x.dd(73,"#"),x.gc(),x.hc(74,"th",41),x.dd(75),x.wc(76,"translate"),x.gc(),x.hc(77,"th",42),x.dd(78),x.wc(79,"translate"),x.gc(),x.hc(80,"th",42),x.dd(81),x.wc(82,"translate"),x.gc(),x.hc(83,"th",42),x.dd(84),x.wc(85,"translate"),x.gc(),x.hc(86,"th",42),x.dd(87),x.wc(88,"translate"),x.gc(),x.hc(89,"th",42),x.dd(90),x.wc(91,"translate"),x.gc(),x.hc(92,"th",42),x.dd(93),x.wc(94,"translate"),x.gc(),x.hc(95,"th",42),x.dd(96),x.wc(97,"translate"),x.gc(),x.hc(98,"th",42),x.dd(99),x.wc(100,"translate"),x.gc(),x.hc(101,"th",42),x.dd(102),x.wc(103,"translate"),x.gc(),x.hc(104,"th",42),x.dd(105),x.wc(106,"translate"),x.gc(),x.hc(107,"th",42),x.dd(108),x.wc(109,"translate"),x.gc(),x.hc(110,"th",42),x.dd(111),x.wc(112,"translate"),x.gc(),x.hc(113,"th",42),x.dd(114),x.wc(115,"translate"),x.gc(),x.hc(116,"th",42),x.dd(117),x.wc(118,"translate"),x.gc(),x.gc(),x.gc(),x.hc(119,"tbody"),x.bd(120,Ve,6,3,"ng-container",43),x.bd(121,st,2,1,"ng-container",43),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(122,"div",31),x.hc(123,"div",32),x.hc(124,"div",33),x.hc(125,"pagination",34),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(126,"div",35),x.hc(127,"a",36),x.dd(128),x.wc(129,"translate"),x.wc(130,"translate"),x.wc(131,"translate"),x.wc(132,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,64,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(130,gt)),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(131,gt)),x.Nb(1),x.Dc("ngModel",t.department_id),x.Nb(2),x.gd(" ",x.xc(15,66,"All")," ",x.xc(16,68,"Department")," "),x.Nb(3),x.Dc("ngForOf",t._deptlist),x.Nb(1),x.Dc("ngModel",t.testcsp_id),x.Nb(2),x.fd("",x.xc(21,70,"All")," PL"),x.Nb(2),x.Dc("ngForOf",t._pllist),x.Nb(1),x.Dc("ngModel",t._status),x.Nb(2),x.fd(" ",x.xc(26,72,"All")," "),x.Nb(3),x.fd(" ",x.xc(29,74,"None")," "),x.Nb(3),x.fd(" ",x.xc(32,76,"Preparation")," "),x.Nb(3),x.fd(" ",x.xc(35,78,"Technical validation")," "),x.Nb(3),x.fd(" ",x.xc(38,80,"Validation")," "),x.Nb(3),x.fd(" ",x.xc(41,82,"Done")," "),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-RES","report")),x.Nb(1),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(63,84,"Total of records"),": ",t.totalRow," - ",x.xc(64,86,"Page")," ",t.pageIndex," ",x.xc(65,88,"of")," ",t.totalPage," ",x.xc(66,90,"page"),""),x.Nb(13),x.ed(x.xc(76,92,"Actions")),x.Nb(3),x.fd(" ",x.xc(79,94,"Inner code")," "),x.Nb(3),x.fd(" ",x.xc(82,96,"Code")," "),x.Nb(3),x.ed(x.xc(85,98,"Internal testing")),x.Nb(3),x.ed(x.xc(88,100,"Parameter name")),x.Nb(3),x.ed(x.xc(91,102,"Priority")),x.Nb(3),x.ed(x.xc(94,104,"Note lab")),x.Nb(3),x.ed(x.xc(97,106,"Note asm")),x.Nb(3),x.ed(x.xc(100,108,"Unit")),x.Nb(3),x.ed(x.xc(103,110,"LOD")),x.Nb(3),x.ed(x.xc(106,112,"LOQ")),x.Nb(3),x.ed(x.xc(109,114,"Results")),x.Nb(3),x.ed(x.xc(112,116,"Status")),x.Nb(3),x.ed(x.xc(115,118,"Received date")),x.Nb(3),x.ed(x.xc(118,120,"Returned date")),x.Nb(3),x.Dc("ngIf",0==t._preparationlist.length),x.Nb(1),x.Dc("ngIf",t._preparationlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(129,122,"Total of records"),": ",t.totalRow," - ",x.xc(130,124,"Page")," ",t.pageIndex," ",x.xc(131,126,"of")," ",t.totalPage," ",x.xc(132,128,"page"),""))},directives:[r.c,r.n,r.q,k.b,k.a,r.x,r.r,r.A,o.p,o.q,T.a,o.o],pipes:[P.c,o.f],styles:[""]}),ht);function ft(e,t){if(1&e&&(x.hc(0,"option",42),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function _t(e,t){if(1&e){var n=x.ic();x.hc(0,"button",43),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e._preparationlist)}),x.cc(1,"i",44),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function mt(e,t){1&e&&x.cc(0,"img",45)}function pt(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",46),x.hc(3,"h3",47),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function bt(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.note_asm,"")}}function vt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",59),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.note_asm=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","note_asm",c+1,""),x.Dc("ngModel",i.note_asm)}}function yt(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.lod,"")}}function xt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",59),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.lod=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","lod",c+1,""),x.Dc("ngModel",i.lod)}}function St(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.loq,"")}}function wt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",59),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.loq=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","loq",c+1,""),x.Dc("ngModel",i.loq)}}function Nt(e,t){if(1&e&&(x.fc(0),x.cc(1,"span",60),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.Dc("innerHTML",n.result_record,x.Vc)}}function Dt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",59),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.result_record=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","result_record",c+1,""),x.Dc("ngModel",i.result_record)}}function Mt(e,t){1&e&&(x.hc(0,"span",61),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"None")))}function Ct(e,t){1&e&&(x.hc(0,"span",62),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Preparation")))}function kt(e,t){1&e&&(x.hc(0,"span",63),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Technical validation")))}function Tt(e,t){1&e&&(x.hc(0,"span",64),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Validation")))}function It(e,t){1&e&&(x.hc(0,"span",65),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Done")))}function Pt(e,t){if(1&e){var n=x.ic();x.hc(0,"a",66),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._updateStatus(e,1)}),x.cc(1,"i",67),x.gc()}}function Rt(e,t){if(1&e){var n=x.ic();x.hc(0,"a",68),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._updateStatus(e,4)}),x.cc(1,"i",69),x.gc()}}function Et(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",49),x.dd(2),x.gc(),x.hc(3,"td"),x.dd(4),x.gc(),x.hc(5,"td"),x.dd(6),x.gc(),x.hc(7,"td"),x.dd(8),x.gc(),x.hc(9,"td"),x.dd(10),x.gc(),x.hc(11,"td"),x.dd(12),x.gc(),x.hc(13,"td"),x.dd(14),x.gc(),x.hc(15,"td"),x.dd(16),x.gc(),x.hc(17,"td"),x.bd(18,bt,2,1,"ng-container",41),x.bd(19,vt,2,2,"ng-container",41),x.gc(),x.hc(20,"td"),x.dd(21),x.gc(),x.hc(22,"td"),x.bd(23,yt,2,1,"ng-container",41),x.bd(24,xt,2,2,"ng-container",41),x.gc(),x.hc(25,"td"),x.bd(26,St,2,1,"ng-container",41),x.bd(27,wt,2,2,"ng-container",41),x.gc(),x.hc(28,"td"),x.bd(29,Nt,2,1,"ng-container",41),x.bd(30,Dt,2,2,"ng-container",41),x.gc(),x.hc(31,"td"),x.hc(32,"a",50),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2);return 2==e.status?a._updateStatus(e,3):null}),x.bd(33,Mt,3,3,"span",51),x.bd(34,Ct,3,3,"span",52),x.bd(35,kt,3,3,"span",53),x.bd(36,Tt,3,3,"span",54),x.bd(37,It,3,3,"span",55),x.gc(),x.bd(38,Pt,2,0,"a",56),x.gc(),x.hc(39,"td",57),x.bd(40,Rt,2,0,"a",58),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.ed(a.inner_code),x.Nb(2),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.para_name_e:a.para_name_l," "),x.Nb(2),x.ed(a.tat),x.Nb(2),x.ed(a.note),x.Nb(2),x.ed(a.note_lab),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.ed(a.unit),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(3),x.Dc("ngIf",0==a.status),x.Nb(1),x.Dc("ngIf",1==a.status),x.Nb(1),x.Dc("ngIf",2==a.status),x.Nb(1),x.Dc("ngIf",3==a.status),x.Nb(1),x.Dc("ngIf",4==a.status),x.Nb(1),x.Dc("ngIf",2==a.status),x.Nb(2),x.Dc("ngIf",3==a.status)}}function At(e,t){if(1&e&&(x.fc(0),x.bd(1,Et,41,24,"tr",48),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._preparationlist)}}var Ot,Yt=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},Ut=((Ot=function(){function t(e,a,c,i,o,r,l){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=o,this._excelService=r,this.modalService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=2,this.entity={},!1!==e.checkAccess("RES-VALID")&&!1!==e.hasPermission("RES-VALID","read")||this._route.navigate(["/error/404"]),this.socket=g()(u.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var t=this,n={};n.filter=this._keyword,n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.department_id=this.department_id,n.family_id=this.testcsp_id,n.flag_status=this._status,n.page=this.pageIndex,n.limit=this.pageSize,this._dataService.post("/lab/getlistresultlabs",n).subscribe(function(n){console.log(n);var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({code:o.code,code_father:o.code_father,company_code:o.company_code,company_name_e:o.company_name_e,company_name_l:o.company_name_l,contact_name:o.contact_name,customer_id:o.customer_id,email:o.email,employee_nr:o.employee_nr,id:o.id,is_active:o.is_active,lod:o.lod,loq:o.loq,tat:o.tat,mark:o.mark,note_asm:o.note_asm,para_name_e:o.para_name_e,para_name_l:o.para_name_l,parameter_id:o.parameter_id,phone:o.phone,received_date:o.received_date,request_no:o.request_no,result_record:o.result_record,returned_date:o.returned_date,sale_man:o.sale_man,sample_code:o.sample_code,inner_code:o.inner_code,sample_id:o.sample_id,category_id:o.category_id,sample_name:o.sample_name,specification_name_e:o.specification_name_e,specification_name_l:o.specification_name_l,unit:o.unit,userid:o.userid,flag:!1,note_lab:o.note_lab,status:o.status,note:o.note,category_name_e:o.category_name_e,category_name_l:o.category_name_l,dept_name_e:o.dept_name_e,dept_name_l:o.dept_name_l})}}catch(r){i.e(r)}finally{i.f()}t._preparationlist=c,t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyPL",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",t).subscribe(function(t){e._pllist=t.data})}},{key:"_exportAll",value:function(t){var n,a=[],c=e(t);try{for(c.s();!(n=c.n()).done;){var i=n.value,o="";4==i.status&&(o="en"==this.user.lang?y.a.s_done_en:y.a.s_done),3==i.status&&(o="en"==this.user.lang?y.a.s_validate_en:y.a.s_validate),2==i.status&&(o="en"==this.user.lang?y.a.s_techvalidate_en:y.a.s_techvalidate),1==i.status&&(o="en"==this.user.lang?y.a.s_prepare_en:y.a.s_prepare),0==i.status&&(o="en"==this.user.lang?y.a.s_none_en:y.a.s_none);var r=new Date(i.received_date).getTime()+864e5*i.tat;a.push({"Inner code":i.inner_code,Code:i.code,"Internal test":i.specification_name_l,Parameter:i.para_name_l,"Sample matrix":i.category_name_l,"Priority TAT":i.tat,Note:null==i.note?"":i.note,"Note Lab":null==i.note_lab?"":i.note_lab,"Note ASM":null==i.note_asm?"":i.note_asm,Unit:null==i.unit?"":i.unit,LOD:null==i.lod?"":i.lod,LOQ:null==i.loq?"":i.loq,Result:null==i.result_record?"":i.result_record,Status:o,"Received Date":s(new Date(i.received_date)).format("DD/MM/YYYY"),"Returned Date":s(new Date(r)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?i.dept_name_e:i.dept_name_l})}}catch(l){c.e(l)}finally{c.f()}this._excelService.exportAsExcelFile(a,"LabValidation-"+s(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+t.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.length+" "+y.a.record,"OK")}},{key:"orgValueChange1",value:function(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt1=s(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt2=s(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e,t){var n=this;3==t||4==t?(e.status=t,v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_switch_en:y.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.socket.emit("refresh",{})}):n.socket.emit("refresh",{})})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.socket.emit("refresh",{})}))}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)})}}]),t}()).\u0275fac=function(e){return new(e||Ot)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(C.s))},Ot.\u0275cmp=x.Vb({type:Ot,selectors:[["app-req-validation"]],decls:125,vars:124,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","15",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["href","javascript:;","style","cursor: pointer; color: red",3,"click",4,"ngIf"],[2,"text-align","center"],["href","javascript:;","style","cursor: pointer; color: tomato",3,"click",4,"ngIf"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],["href","javascript:;",2,"cursor","pointer","color","red",3,"click"],[1,"fa","fa-close"],["href","javascript:;",2,"cursor","pointer","color","tomato",3,"click"],[1,"fa","fa-check-square-o"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.hc(12,"select",10),x.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),x.hc(13,"option",11),x.dd(14),x.wc(15,"translate"),x.wc(16,"translate"),x.gc(),x.bd(17,ft,2,2,"option",12),x.gc(),x.hc(18,"select",13),x.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.hc(19,"option",14),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"option",15),x.dd(23),x.wc(24,"translate"),x.gc(),x.hc(25,"option",16),x.dd(26),x.wc(27,"translate"),x.gc(),x.hc(28,"option",17),x.dd(29),x.wc(30,"translate"),x.gc(),x.hc(31,"option",18),x.dd(32),x.wc(33,"translate"),x.gc(),x.hc(34,"option",19),x.dd(35),x.wc(36,"translate"),x.gc(),x.gc(),x.bd(37,_t,4,3,"button",20),x.bd(38,mt,1,0,"img",21),x.gc(),x.gc(),x.hc(39,"div",22),x.hc(40,"div",23),x.hc(41,"select",24),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(42,"option",25),x.dd(43,"#10"),x.gc(),x.hc(44,"option",26),x.dd(45,"#25"),x.gc(),x.hc(46,"option",27),x.dd(47,"#50"),x.gc(),x.hc(48,"option",28),x.dd(49,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(50,"div",29),x.hc(51,"div",30),x.hc(52,"div",31),x.hc(53,"div",32),x.hc(54,"pagination",33),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(55,"div",34),x.hc(56,"a",35),x.dd(57),x.wc(58,"translate"),x.wc(59,"translate"),x.wc(60,"translate"),x.wc(61,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(62,"div",30),x.hc(63,"div",36),x.hc(64,"table",37),x.hc(65,"thead",38),x.hc(66,"tr"),x.hc(67,"th",39),x.dd(68,"#"),x.gc(),x.hc(69,"th",40),x.dd(70),x.wc(71,"translate"),x.gc(),x.hc(72,"th",40),x.dd(73),x.wc(74,"translate"),x.gc(),x.hc(75,"th",40),x.dd(76),x.wc(77,"translate"),x.gc(),x.hc(78,"th",40),x.dd(79),x.wc(80,"translate"),x.gc(),x.hc(81,"th",40),x.dd(82),x.wc(83,"translate"),x.gc(),x.hc(84,"th",40),x.dd(85),x.wc(86,"translate"),x.gc(),x.hc(87,"th",40),x.dd(88),x.wc(89,"translate"),x.gc(),x.hc(90,"th",40),x.dd(91),x.wc(92,"translate"),x.gc(),x.hc(93,"th",40),x.dd(94),x.wc(95,"translate"),x.gc(),x.hc(96,"th",40),x.dd(97),x.wc(98,"translate"),x.gc(),x.hc(99,"th",40),x.dd(100),x.wc(101,"translate"),x.gc(),x.hc(102,"th",40),x.dd(103),x.wc(104,"translate"),x.gc(),x.hc(105,"th",40),x.dd(106),x.wc(107,"translate"),x.gc(),x.hc(108,"th",40),x.dd(109),x.wc(110,"translate"),x.gc(),x.gc(),x.gc(),x.hc(111,"tbody"),x.bd(112,pt,6,3,"ng-container",41),x.bd(113,At,2,1,"ng-container",41),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(114,"div",30),x.hc(115,"div",31),x.hc(116,"div",32),x.hc(117,"pagination",33),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(118,"div",34),x.hc(119,"a",35),x.dd(120),x.wc(121,"translate"),x.wc(122,"translate"),x.wc(123,"translate"),x.wc(124,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,60,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(122,Yt)),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(123,Yt)),x.Nb(1),x.Dc("ngModel",t.department_id),x.Nb(2),x.gd(" ",x.xc(15,62,"All")," ",x.xc(16,64,"Department")," "),x.Nb(3),x.Dc("ngForOf",t._deptlist),x.Nb(1),x.Dc("ngModel",t._status),x.Nb(2),x.fd(" ",x.xc(21,66,"All")," "),x.Nb(3),x.fd(" ",x.xc(24,68,"None")," "),x.Nb(3),x.fd(" ",x.xc(27,70,"Preparation")," "),x.Nb(3),x.fd(" ",x.xc(30,72,"Technical validation")," "),x.Nb(3),x.fd(" ",x.xc(33,74,"Validation")," "),x.Nb(3),x.fd(" ",x.xc(36,76,"Done")," "),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-VALID","report")),x.Nb(1),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(58,78,"Total of records"),": ",t.totalRow," - ",x.xc(59,80,"Page")," ",t.pageIndex," ",x.xc(60,82,"of")," ",t.totalPage," ",x.xc(61,84,"page"),""),x.Nb(13),x.fd(" ",x.xc(71,86,"Inner code")," "),x.Nb(3),x.fd(" ",x.xc(74,88,"Code")," "),x.Nb(3),x.ed(x.xc(77,90,"Internal testing")),x.Nb(3),x.ed(x.xc(80,92,"Parameter name")),x.Nb(3),x.ed(x.xc(83,94,"Priority")),x.Nb(3),x.ed(x.xc(86,96,"Note")),x.Nb(3),x.ed(x.xc(89,98,"Note lab")),x.Nb(3),x.ed(x.xc(92,100,"Note asm")),x.Nb(3),x.ed(x.xc(95,102,"Unit")),x.Nb(3),x.ed(x.xc(98,104,"LOD")),x.Nb(3),x.ed(x.xc(101,106,"LOQ")),x.Nb(3),x.ed(x.xc(104,108,"Results")),x.Nb(3),x.ed(x.xc(107,110,"Status")),x.Nb(3),x.ed(x.xc(110,112,"Actions")),x.Nb(3),x.Dc("ngIf",0==t._preparationlist.length),x.Nb(1),x.Dc("ngIf",t._preparationlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(121,114,"Total of records"),": ",t.totalRow," - ",x.xc(122,116,"Page")," ",t.pageIndex," ",x.xc(123,118,"of")," ",t.totalPage," ",x.xc(124,120,"page"),""))},directives:[r.c,r.n,r.q,k.b,k.a,r.x,r.r,r.A,o.p,o.q,T.a],pipes:[P.c],styles:[""]}),Ot),Ft=i("qeeY"),Lt=i("tmjD");function qt(e,t){if(1&e){var n=x.ic();x.hc(0,"div",20),x.hc(1,"button",21),x.dd(2),x.wc(3,"translate"),x.gc(),x.hc(4,"div",22),x.hc(5,"button",23),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(71);return e.popUpLanguage(t,1)}),x.dd(6),x.wc(7,"translate"),x.gc(),x.hc(8,"button",23),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(71);return e.popUpLanguage(t,1)}),x.dd(9),x.wc(10,"translate"),x.gc(),x.hc(11,"button",23),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(71);return e.popUpLanguage(t,2)}),x.dd(12),x.wc(13,"translate"),x.gc(),x.gc(),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,4,"Print")," "),x.Nb(4),x.fd(" ",x.xc(7,6,"Quotation")," "),x.Nb(3),x.fd(" ",x.xc(10,8,"Quotation")," - Excel "),x.Nb(3),x.fd(" ",x.xc(13,10,"Receipt")," "))}function zt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"button",24),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc()._chooseTab(e,e.order_no)}),x.dd(2),x.wc(3,"translate"),x.gc(),x.ec()}if(2&e){var a=t.$implicit,c=x.vc();x.Nb(1),x.Dc("ngClass",c._currentTabActivated==a.order_no?"btn btn-sm btn-warning":"btn btn-sm btn-secondary"),x.Nb(1),x.gd(" ",x.xc(3,3,"Sample")," ",a.order_no," ")}}function Gt(e,t){if(1&e){var n=x.ic();x.hc(0,"a",26),x.rc("click",function(){x.Uc(n);var e=x.vc(2);return null==e.entity0.inner_code?e._removeTab(e.entity0.sample_id):null}),x.dd(1,"X"),x.gc()}}function Vt(e,t){if(1&e&&(x.fc(0),x.bd(1,Gt,2,0,"a",25),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngIf",0!=n._currentTabActivated&&null==n.entity0.inner_code)}}function Bt(e,t){if(1&e&&(x.hc(0,"div",58),x.dd(1),x.wc(2,"slice"),x.gc()),2&e){var n=t.item;x.Dc("ngbTooltip",n.name.length>25?n.name:""),x.Nb(1),x.fd(" ",n.name.length>25?x.zc(2,2,n.name,0,20)+"..":n.name," ")}}function Ht(e,t){if(1&e&&(x.hc(0,"div",58),x.dd(1),x.wc(2,"slice"),x.gc()),2&e){var n=t.item;x.Dc("ngbTooltip",n.name.length>25?n.name:""),x.Nb(1),x.fd(" ",n.name.length>25?x.zc(2,2,n.name,0,20)+"..":n.name," ")}}function Qt(e,t){if(1&e&&(x.hc(0,"div",58),x.dd(1),x.wc(2,"slice"),x.gc()),2&e){var n=t.item;x.Dc("ngbTooltip",n.name.length>25?n.name:""),x.Nb(1),x.fd(" ",n.name.length>25?x.zc(2,2,n.name,0,20)+"..":n.name," ")}}function $t(e,t){if(1&e){var n=x.ic();x.hc(0,"a",59),x.rc("click",function(){x.Uc(n);var e=x.vc(2);return e._saveTemplate(e.entity0)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Save")))}function Kt(e,t){if(1&e){var n=x.ic();x.hc(0,"a",65),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._removeItem(e)}),x.cc(1,"i",56),x.gc()}}function jt(e,t){1&e&&x.cc(0,"i",69)}function Wt(e,t){1&e&&x.cc(0,"i",70)}function Jt(e,t){if(1&e){var n=x.ic();x.hc(0,"button",66),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return e.flag=!e.flag}),x.wc(1,"translate"),x.bd(2,jt,1,0,"i",67),x.bd(3,Wt,1,0,"i",68),x.gc()}if(2&e){var a=x.vc().$implicit;x.Dc("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("ngbTooltip",x.xc(1,4,a.flag?"Cancel":"Edit")),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag)}}function Xt(e,t){if(1&e){var n=x.ic();x.hc(0,"a",71),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._updatePrice(e)}),x.cc(1,"i",72),x.gc()}}function Zt(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.fd(" ",null==n.quantity||""==n.quantity?1:n.quantity,"")}}function en(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.ed(n.quantity)}}function tn(e,t){if(1&e&&(x.fc(0),x.bd(1,Zt,2,1,"ng-container",16),x.bd(2,en,2,1,"ng-container",16),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngIf",0==n.entity0.is_active),x.Nb(1),x.Dc("ngIf",0!=n.entity0.is_active)}}function nn(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",73),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.quantity=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit,o=x.vc(2);x.Nb(1),x.Fc("name","qty",c+1,""),x.Dc("ngModel",i.quantity)("disabled",0!=o.entity0.is_active)}}function an(e,t){if(1&e&&(x.fc(0),x.dd(1),x.wc(2,"number"),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.fd(" ",x.xc(2,1,n.price),"")}}function cn(e,t){if(1&e&&(x.fc(0),x.dd(1),x.wc(2,"number"),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.ed(x.xc(2,1,n.price))}}function on(e,t){if(1&e&&(x.fc(0),x.bd(1,an,3,3,"ng-container",16),x.bd(2,cn,3,3,"ng-container",16),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngIf",0==n.entity0.is_active),x.Nb(1),x.Dc("ngIf",0!=n.entity0.is_active)}}function rn(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",74),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.price=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit,o=x.vc(2);x.Nb(1),x.Fc("name","p",c+1,""),x.Dc("ngModel",i.price)("disabled",0!=o.entity0.is_active)}}function ln(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.fd(" ",null==n.priority||""==n.priority?0:n.priority,"")}}function dn(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.ed(n.priority)}}function sn(e,t){if(1&e&&(x.fc(0),x.bd(1,ln,2,1,"ng-container",16),x.bd(2,dn,2,1,"ng-container",16),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngIf",0==n.entity0.is_active),x.Nb(1),x.Dc("ngIf",0!=n.entity0.is_active)}}function hn(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",75),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.priority=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit,o=x.vc(2);x.Nb(1),x.Fc("name","pri",c+1,""),x.Dc("ngModel",i.priority)("disabled",0!=o.entity0.is_active)}}function gn(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.fd(" ",n.tat," ")}}function un(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.fd(" ",n.tat," ")}}function fn(e,t){if(1&e&&(x.fc(0),x.bd(1,gn,2,1,"ng-container",16),x.bd(2,un,2,1,"ng-container",16),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngIf",0==n.entity0.is_active),x.Nb(1),x.Dc("ngIf",0!=n.entity0.is_active)}}function _n(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",75),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.tat=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit,o=x.vc(2);x.Nb(1),x.Fc("name","ta",c+1,""),x.Dc("ngModel",i.tat)("disabled",0!=o.entity0.is_active)}}function mn(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"td"),x.dd(2),x.gc(),x.hc(3,"td"),x.bd(4,Kt,2,0,"a",60),x.bd(5,Jt,4,6,"button",61),x.bd(6,Xt,2,0,"a",62),x.gc(),x.hc(7,"td"),x.hc(8,"span",63),x.dd(9),x.gc(),x.gc(),x.hc(10,"td"),x.dd(11),x.gc(),x.hc(12,"td",64),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2),c=x.Rc(73);return a._addComment(c,e)}),x.dd(13),x.gc(),x.hc(14,"td"),x.dd(15),x.gc(),x.hc(16,"td"),x.dd(17),x.gc(),x.hc(18,"td"),x.bd(19,tn,3,2,"ng-container",16),x.bd(20,nn,2,3,"ng-container",16),x.gc(),x.hc(21,"td"),x.dd(22),x.gc(),x.hc(23,"td"),x.bd(24,on,3,2,"ng-container",16),x.bd(25,rn,2,3,"ng-container",16),x.gc(),x.hc(26,"td"),x.bd(27,sn,3,2,"ng-container",16),x.bd(28,hn,2,3,"ng-container",16),x.gc(),x.hc(29,"td"),x.bd(30,fn,3,2,"ng-container",16),x.bd(31,_n,2,3,"ng-container",16),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.ed(c+1),x.Nb(2),x.Dc("ngIf",0==i.entity0.is_active&&!a.flag&&i._authenService.hasPermission("REQ-LIST","delete")),x.Nb(1),x.Dc("ngIf",0==i.entity0.is_active&&i._authenService.hasPermission("REQ-LIST","update")),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngClass",null==a.code_father?"text-bold jtext-default":""),x.Nb(1),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ",a.comment_ext," "),x.Nb(2),x.ed(a.method),x.Nb(2),x.ed(a.lod),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.fd(" ",a.unit," "),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag)}}function pn(e,t){if(1&e){var n=x.ic();x.hc(0,"form",27),x.hc(1,"div",9),x.hc(2,"div",1),x.hc(3,"div",28),x.hc(4,"div",29),x.hc(5,"label",30),x.hc(6,"strong"),x.dd(7),x.wc(8,"translate"),x.gc(),x.gc(),x.hc(9,"div",31),x.hc(10,"input",32),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_name=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(11,"translate"),x.gc(),x.hc(12,"input",32),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_name_e=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(13,"translate"),x.wc(14,"translate"),x.gc(),x.hc(15,"input",33),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_id=e}),x.gc(),x.gc(),x.hc(16,"label",30),x.hc(17,"strong"),x.dd(18),x.wc(19,"translate"),x.gc(),x.gc(),x.hc(20,"div",31),x.hc(21,"input",34),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_code=e}),x.wc(22,"translate"),x.gc(),x.gc(),x.hc(23,"label",30),x.hc(24,"strong"),x.dd(25),x.wc(26,"translate"),x.wc(27,"translate"),x.gc(),x.gc(),x.hc(28,"div",31),x.hc(29,"input",32),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.description=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(30,"translate"),x.gc(),x.hc(31,"input",32),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.description_e=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(32,"translate"),x.wc(33,"translate"),x.gc(),x.gc(),x.hc(34,"label",30),x.hc(35,"strong"),x.dd(36),x.wc(37,"translate"),x.gc(),x.gc(),x.hc(38,"div",31),x.hc(39,"input",34),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.inner_code=e}),x.wc(40,"translate"),x.gc(),x.gc(),x.hc(41,"label",30),x.hc(42,"strong"),x.dd(43),x.wc(44,"translate"),x.gc(),x.gc(),x.hc(45,"div",31),x.hc(46,"textarea",35),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.note=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(47,"translate"),x.gc(),x.gc(),x.hc(48,"label",30),x.hc(49,"strong"),x.dd(50),x.wc(51,"translate"),x.gc(),x.gc(),x.hc(52,"div",31),x.hc(53,"input",32),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.weight=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(54,"translate"),x.gc(),x.gc(),x.hc(55,"label",30),x.hc(56,"strong"),x.dd(57),x.wc(58,"translate"),x.gc(),x.gc(),x.hc(59,"div",31),x.hc(60,"select",36),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.is_active=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.hc(61,"option",37),x.dd(62),x.wc(63,"translate"),x.gc(),x.hc(64,"option",38),x.dd(65),x.wc(66,"translate"),x.gc(),x.hc(67,"option",39),x.dd(68),x.wc(69,"translate"),x.gc(),x.gc(),x.gc(),x.cc(70,"div",40),x.hc(71,"label",30),x.hc(72,"strong"),x.dd(73),x.wc(74,"translate"),x.gc(),x.gc(),x.hc(75,"div",31),x.hc(76,"ng-select",41),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().selectedCategory0=e})("change",function(){return x.Uc(n),x.vc().changeCategoryMatrix()}),x.wc(77,"translate"),x.wc(78,"translate"),x.bd(79,Bt,3,6,"ng-template",42),x.gc(),x.gc(),x.hc(80,"label",30),x.hc(81,"strong"),x.dd(82),x.wc(83,"translate"),x.gc(),x.gc(),x.hc(84,"div",31),x.hc(85,"ng-select",43),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().selectedSpecification0=e})("change",function(){x.Uc(n);var e=x.vc();return e.changeSpecification(e.entity0,e.selectedCategory0)}),x.bd(86,Ht,3,6,"ng-template",42),x.gc(),x.gc(),x.hc(87,"label",30),x.hc(88,"strong"),x.dd(89),x.wc(90,"translate"),x.gc(),x.gc(),x.hc(91,"div",31),x.hc(92,"input",44),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._tat=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateTAT(e.entity0,e._tat)}),x.wc(93,"translate"),x.gc(),x.gc(),x.hc(94,"label",45),x.hc(95,"strong"),x.dd(96),x.wc(97,"translate"),x.gc(),x.gc(),x.hc(98,"div",31),x.hc(99,"ng-select",46),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().selectedTemplate0=e})("change",function(){x.Uc(n);var e=x.vc();return e.changeTemplate(e.entity0)}),x.bd(100,Qt,3,6,"ng-template",42),x.gc(),x.dd(101," \xa0"),x.bd(102,$t,3,3,"a",47),x.gc(),x.hc(103,"div",48),x.hc(104,"div",49),x.hc(105,"table",50),x.hc(106,"thead",51),x.hc(107,"tr"),x.hc(108,"th",52),x.dd(109),x.wc(110,"translate"),x.wc(111,"number"),x.gc(),x.gc(),x.gc(),x.hc(112,"thead",53),x.hc(113,"tr"),x.hc(114,"th",54),x.dd(115,"#"),x.gc(),x.hc(116,"th",55),x.cc(117,"i",56),x.gc(),x.hc(118,"th",57),x.dd(119),x.wc(120,"translate"),x.gc(),x.hc(121,"th",57),x.dd(122),x.wc(123,"translate"),x.gc(),x.hc(124,"th",57),x.dd(125),x.wc(126,"translate"),x.gc(),x.hc(127,"th",57),x.dd(128),x.wc(129,"translate"),x.gc(),x.hc(130,"th",57),x.dd(131,"LOD"),x.gc(),x.hc(132,"th",57),x.dd(133),x.wc(134,"translate"),x.gc(),x.hc(135,"th",57),x.dd(136),x.wc(137,"translate"),x.gc(),x.hc(138,"th",57),x.dd(139),x.wc(140,"translate"),x.gc(),x.hc(141,"th",57),x.dd(142),x.wc(143,"translate"),x.gc(),x.hc(144,"th",57),x.dd(145),x.wc(146,"translate"),x.gc(),x.gc(),x.gc(),x.hc(147,"tbody"),x.bd(148,mn,32,19,"tr",14),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(5),x.Fc("for","sn",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(8,114,"Sample name")),x.Nb(3),x.Fc("id","sn",a._currentTabActivated,""),x.Fc("name","sample_name",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(11,116,"Sample")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_name)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.Fc("id","sne",a._currentTabActivated,""),x.Fc("name","sample_namee",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(13,118,"Sample")+" "+x.xc(14,120,"English")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_name_e)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(3),x.Fc("id","id",a._currentTabActivated,""),x.Fc("name","id",a._currentTabActivated,""),x.Dc("ngModel",a.entity0.sample_id),x.Nb(1),x.Fc("for","sample_code",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(19,122,"Sample code")),x.Nb(3),x.Fc("id","sample_code",a._currentTabActivated,""),x.Fc("name","sample_code",a._currentTabActivated,""),x.Dc("placeholder",x.xc(22,124,"Sample code")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_code),x.Nb(2),x.Fc("for","description",a._currentTabActivated,""),x.Nb(2),x.gd("",x.xc(26,126,"Description")," (",x.xc(27,128,"State of sample"),")"),x.Nb(4),x.Fc("id","description",a._currentTabActivated,""),x.Fc("name","description",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(30,130,"Description")+" "+a._currentTabActivated)("ngModel",a.entity0.description)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.Fc("id","descriptione",a._currentTabActivated,""),x.Fc("name","descriptione",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(32,132,"Description")+" "+x.xc(33,134,"English")+" "+a._currentTabActivated)("ngModel",a.entity0.description_e)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(3),x.Fc("for","inner_code",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(37,136,"Inner code")),x.Nb(3),x.Fc("id","inner_code",a._currentTabActivated,""),x.Fc("name","inner_code",a._currentTabActivated,""),x.Dc("placeholder",x.xc(40,138,"Inner code")+" "+a._currentTabActivated)("ngModel",a.entity0.inner_code),x.Nb(2),x.Fc("for","note",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(44,140,"Note")),x.Nb(3),x.Fc("id","note",a._currentTabActivated,""),x.Fc("name","note",a._currentTabActivated,""),x.Dc("placeholder",x.xc(47,142,"Note")+" "+a._currentTabActivated)("ngModel",a.entity0.note)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.Fc("for","weight",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(51,144,"Weight")),x.Nb(3),x.Fc("id","weight",a._currentTabActivated,""),x.Fc("name","weight",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(54,146,"Weight")+" "+a._currentTabActivated)("ngModel",a.entity0.weight)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.Fc("for","state",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(58,148,"State")),x.Nb(3),x.Dc("ngModel",a.entity0.is_active)("disabled",0!=a.entity.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.fd(" ",x.xc(63,150,"Pending")," "),x.Nb(3),x.fd(" ",x.xc(66,152,"Confirmed")," "),x.Nb(3),x.fd(" ",x.xc(69,154,"Cancel")," "),x.Nb(3),x.Fc("for","matrix_category",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(74,156,"Matrix category")),x.Nb(3),x.Pb("ajustar"),x.Dc("items",a._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCategory0)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create"))("placeholder",x.xc(77,158,"Please choose"))("notFoundText",x.xc(78,160,"Not found item")),x.Nb(4),x.Fc("for","para_assignment",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(83,162,"Parameter assignment")),x.Nb(3),x.Dc("items",a._specifications)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSpecification0)("disabled",0!=a.entity0.is_active||null==a.selectedCategory0||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.Fc("for","tatc",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(90,164,"TAT")),x.Nb(3),x.Fc("id","tatc",a._currentTabActivated,""),x.Fc("name","tatc",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(93,166,"TAT")+" "+a._currentTabActivated)("ngModel",a._tat)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(4),x.ed(x.xc(97,168,"Copy sample")),x.Nb(3),x.Dc("items",a._templates)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedTemplate0)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(3),x.Dc("ngIf",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","update")),x.Nb(7),x.gd(" ",x.xc(110,170,"Subtotal"),": ",x.xc(111,172,a._totalSub)," (VND) "),x.Nb(10),x.fd(" ",x.xc(120,174,"Code")," "),x.Nb(3),x.fd(" ",x.xc(123,176,"Specification")," "),x.Nb(3),x.fd(" ",x.xc(126,178,"Note")," "),x.Nb(3),x.fd(" ",x.xc(129,180,"Method")," "),x.Nb(5),x.fd(" ",x.xc(134,182,"Quantity")," "),x.Nb(3),x.fd(" ",x.xc(137,184,"Unit")," "),x.Nb(3),x.fd(" ",x.xc(140,186,"Unit price")," "),x.Nb(3),x.fd(" ",x.xc(143,188,"Priority")," "),x.Nb(3),x.fd(" ",x.xc(146,190,"TAT")," "),x.Nb(3),x.Dc("ngForOf",a._orderdetailists)}}function bn(e,t){if(1&e){var n=x.ic();x.hc(0,"form",27),x.hc(1,"div",76),x.hc(2,"h4",77),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",78),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",79),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",80),x.hc(9,"div",29),x.hc(10,"div",48),x.hc(11,"div",81),x.hc(12,"button",82),x.rc("click",function(){return x.Uc(n),x.vc()._print("vn")}),x.dd(13),x.wc(14,"translate"),x.gc(),x.hc(15,"button",83),x.rc("click",function(){return x.Uc(n),x.vc()._print("en")}),x.dd(16),x.wc(17,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}2&e&&(x.Nb(3),x.fd(" ",x.xc(4,3,"Language")," "),x.Nb(10),x.fd(" ",x.xc(14,5,"Vietnamese")," "),x.Nb(3),x.fd(" ",x.xc(17,7,"English")," "))}function vn(e,t){1&e&&(x.fc(0),x.hc(1,"a",90),x.cc(2,"img",91),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing")," "))}function yn(e,t){if(1&e){var n=x.ic();x.hc(0,"a",92),x.rc("click",function(){return x.Uc(n),x.vc(2).saveComment()}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Save & close")," "))}function xn(e,t){if(1&e){var n=x.ic();x.hc(0,"form",27),x.hc(1,"div",76),x.hc(2,"h4",77),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",78),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",79),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",80),x.hc(9,"div",29),x.hc(10,"div",48),x.hc(11,"div",84),x.hc(12,"label",85),x.dd(13),x.gc(),x.hc(14,"textarea",86),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entityComment.comment_ext=e}),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(15,"div",87),x.hc(16,"a",88),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.dd(17),x.wc(18,"translate"),x.gc(),x.bd(19,vn,5,3,"ng-container",16),x.bd(20,yn,3,3,"a",89),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.gd(" ",x.xc(4,7,"Note")," - ",a.entityComment.code," "),x.Nb(10),x.ed("Note"),x.Nb(1),x.Dc("ngModel",a.entityComment.comment_ext),x.Nb(3),x.fd(" ",x.xc(18,9,"Close")," "),x.Nb(2),x.Dc("ngIf",a.isSaveNote),x.Nb(1),x.Dc("ngIf",!a.isSaveNote)}}_.a.vfs=p.a.pdfMake.vfs;var Sn,wn=((Sn=function(){function t(e,a,c,i,o,r,l,d,s,h){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=o,this._excelService=r,this._activatedRoute=l,this._utilityService=d,this.formatPipe=s,this.modalService=h,this.isSave=!1,this._flagModal="",this._flagPrintPreview=!1,this.entity={},this.baseFolder=u.a.BASE_API+"/",this._id="",this.entityDetail={},this._xList=[],this._tabOrder=9,this._categories=[],this._specifications=[],this._templates=[],this._orderdetailists=[],this._totalSub=0,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._flagEdit=!1,this.isLoadingEmail=!1,this._currentTab=0,this.isLoadingEmail1=!1,this.isLoadingEmail2=!0,this.config={displayKey:"name",search:!0,limitTo:5},this.selectedSpecification0=null,this.selectedCategory0=null,this.selectedTemplate0=null,this._currentTabActivated=0,this._currentTabSampleId="",this._logoPath=u.a.BASE_API+"/",this._logoIsoPath=u.a.BASE_API+"/",this.entity0={},this.entityComment={},this.isSaveNote=!1,!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.user=this._authenService.getLoggedInUser(),this.socket=g()(u.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.loadImgs(),this._activatedRoute.params.subscribe(function(t){e._id=t.id,e.loadDetail(e._id),e.loadCategories(),e.loadSpecs(null),e.socket.on("refreshPage",function(t){e.loadCategories()})})}},{key:"ngAfterViewInit",value:function(){}},{key:"counter",value:function(e,t){return console.log(e,t),new Array(e-t)}},{key:"loadDetail",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/request/detailA",a).subscribe(function(t){n.entity=t.data;var a,c=[],i=e(t.data.orders_list);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({sample_id:o.sample_id,sample_name:o.sample_name,sample_name_e:o.sample_name_e,sample_code:o.sample_code,inner_code:o.inner_code,description:o.description,description_e:o.description_e,note:o.note,weight:o.weight,is_active:o.is_active,userid:o.userid,total_sub:o.total_sub,order_no:o.order_no,flag_close:!1})}}catch(l){i.e(l)}finally{i.f()}n._xList=c,n.entity0=c.filter(function(e){return e.order_no==n._currentTabActivated})[0];var r={};r.id=n.entity.userid,r.short_code=n.user.short_code,n.updateEmployeeCode(r)})}},{key:"removeOrderWithNull",value:function(e){var t={};t.sample_id=e,this._dataService.post("/request/removeOrderWithNull",t).subscribe(function(e){})}},{key:"loadDetailWithNoloadOrderSampleTabs",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/request/detailA",n).subscribe(function(e){t.entity.total=e.data.total})}},{key:"updateEmployeeCode",value:function(e){this._dataService.post("/user/updateCodeEmployee",e).subscribe(function(e){})}},{key:"loadDetail1",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/request/detailA",a).subscribe(function(t){n.entity=t.data;var a=[];if(0==t.data.orders_list.length){var c,i=0,o=e(n.counter(t.data.number_sample,0));try{for(o.s();!(c=o.n()).done;)c.value,a.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:i}),i+=1}catch(g){o.e(g)}finally{o.f()}}else{i=0;var r,l=e(t.data.orders_list);try{for(l.s();!(r=l.n()).done;){var d=r.value;a.push({sample_id:d.sample_id,sample_name:d.sample_name,sample_code:d.sample_code,inner_code:d.inner_code,description:d.description,note:d.note,weight:d.weight,is_active:d.is_active,userid:d.userid,order_no:i}),i+=1}}catch(g){l.e(g)}finally{l.f()}var s,h=e(n.counter(t.data.number_sample,t.data.orders_list.length));try{for(h.s();!(s=h.n()).done;)s.value,a.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:i}),i+=1}catch(g){h.e(g)}finally{h.f()}}n._xList=a,n.entity0=a.filter(function(e){return e.order_no==n._currentTabActivated})[0],n.loadTemplates(n.entity.customer_id)})}},{key:"loadDetailByTab",value:function(t,n){var a=this;this._currentTab=n;var c={};c.id=t,this._dataService.post("/request/detailA",c).subscribe(function(t){a.entity=t.data;var n=[];if(0==t.data.orders_list.length){var c,i=0,o=e(a.counter(t.data.number_sample,0));try{for(o.s();!(c=o.n()).done;)c.value,n.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:i}),i+=1}catch(g){o.e(g)}finally{o.f()}}else{i=0;var r,l=e(t.data.orders_list);try{for(l.s();!(r=l.n()).done;){var d=r.value;n.push({sample_id:d.sample_id,sample_name:d.sample_name,sample_code:d.sample_code,inner_code:d.inner_code,description:d.description,note:d.note,weight:d.weight,is_active:d.is_active,userid:d.userid,order_no:i}),i+=1}}catch(g){l.e(g)}finally{l.f()}var s,h=e(a.counter(t.data.number_sample,t.data.orders_list.length));try{for(h.s();!(s=h.n()).done;)s.value,n.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:i}),i+=1}catch(g){h.e(g)}finally{h.f()}}a._xList=n,a.entity0=n.filter(function(e){return e.order_no==a._currentTabActivated})[0],a.loadTemplates(a.entity.customer_id)})}},{key:"loadTemplates",value:function(t){var n=this,a={};a.customer_id=t,this._dataService.post("/sample_matrix/getallsampletemplates",a).subscribe(function(t){var a,c=[],i=e(t.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({name:o.sample_name,code:o.id})}}catch(r){i.e(r)}finally{i.f()}n._templates=c})}},{key:"loadCategories",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({name:"en"==t.user.lang?o.category_name_e:o.category_name_l,code:o.id})}}catch(r){i.e(r)}finally{i.f()}t._categories=c})}},{key:"loadSpecs",value:function(t){var n=this;if(null!=t){var a={};a.domain=this.user.short_code,a.id=t,this._dataService.post("/sample_matrix/getallparametersnopagingbycat",a).subscribe(function(t){var a,c=[],i=e(t.data.filter(function(e){return e.is_active}));try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({name:o.specification_name_l,code:o.parameter_id})}}catch(r){i.e(r)}finally{i.f()}n._specifications=c})}else{var c={};c.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparametersnopaging",c).subscribe(function(t){var a,c=[],i=e(t.data.filter(function(e){return e.is_active}));try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({name:o.specification_name_l,code:o.id})}}catch(r){i.e(r)}finally{i.f()}n._specifications=c})}}},{key:"_updateRequest",value:function(){var e=this;console.log(this.entity),this._dataService.post("/request/update",this.entity).subscribe(function(t){console.log(t.data),"failed"==t.result?e._notifyService.showError("en"==e.user.lang?y.a.MSG_UPDATENO_EN:y.a.MSG_UPDATENO,"en"==e.user.lang?y.a.error_title_en:y.a.error_title):(e.loadDetail(t.data[0]._id),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"))})}},{key:"_updateSampleOrder",value:function(e){var t=this;e.request_id=this._id,e.userid=this.user.id,this._tabOrder=e.order_no,null!=e.sample_name&&""!=e.sample_name&&(console.log("Params",e),this._dataService.post("/request/updateSampleOrder",e).subscribe(function(n){1==e.is_active&&null==e.sample_code&&t._updateCodeInSampleOrder(e),t._updateSubTotal(e.sample_id),t._currentTabSampleId=e.sample_id,t._currentTabActivated=n.data.order_no,t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK")}))}},{key:"_updateCodeInSampleOrder",value:function(e){var t=this,n={};n.sample_id=e.sample_id,n.sample_code=e.sample_code,n.inner_code=e.inner_code,n.is_active=e.is_active,n.userid=this.user.id,console.log("Code",n),this._dataService.post("/request/addCodesInSampleOrder",n).subscribe(function(n){t.loadDetail(t._id),t._updateSubTotal(e.sample_id)})}},{key:"loadDetailSampleOrder",value:function(e){var t=this,n={};n.sample_id=e,this._dataService.post("/request/detailSampleOrder",n).subscribe(function(e){null!=e.data&&(t._totalSub=e.data.total_sub)})}},{key:"_removeTab",value:function(e){var t=this;console.log("Call here",e),this._currentTabActivated=0,this._dataService.post("/request/removeOrder",{id:e,request_id:this._id,number_sample:this.entity.number_sample}).subscribe(function(e){console.log("Call KQ",e),t.entity0={},t.loadDetail(t._id)})}},{key:"_updateSampleNo",value:function(){var e=this;if(0==this.entity.number_sample)return this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_SAMPLE_ZERO_EN:y.a.MSG_ERROR_SAMPLE_ZERO,"en"==this.user.lang?y.a.error_title_en:y.a.error_title),void(this.entity.number_sample=1);this._dataService.post("/request/update2",{request_id:this._id,number_sample:this.entity.number_sample,short_code:this.user.short_code,ipaddress:this.user.ipaddress}).subscribe(function(t){console.log("Run here",t),e.loadDetail(e._id)})}},{key:"_chooseTab",value:function(t,n){var a,c=e(this._xList);try{for(c.s();!(a=c.n()).done;){var i=a.value;i.flag_close=i.order_no==n&&!i.flag_close}}catch(o){c.e(o)}finally{c.f()}this.entity0=t,this._orderdetailists=[],this.selectedCategory=null,this.selectedSpecification=null,this.selectedTemplate=null,this._tat=null,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this.totalPage=0,this._updateSubTotalWithNoloadOrderSampleTabs(t.sample_id),this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id),this._currentTabActivated=n}},{key:"changeCategoryMatrix",value:function(){this.loadSpecs(this.selectedCategory0)}},{key:"changeTemplate",value:function(e){this._getTemplate(this.selectedTemplate0,e)}},{key:"changeSpecification",value:function(e,t){console.log(this.selectedSpecification0,t),null!=this.selectedSpecification0&&null!=t&&this._addItems(this.selectedSpecification0,e,t)}},{key:"_addItems",value:function(e,t,n){var a=this;if(console.log(e,t),null!=t.sample_id)if(null!=e){var c={};c.sample_id=t.sample_id,c.parameter_id=e,c.category_id=n,c.priority=0,c.short_code=this.user.short_code,this._dataService.post("/request/addItemOrder",c).subscribe(function(e){a._notifyService.showSuccess("en"==a.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),a.selectedSpecification0=null,a.loadDetailSampleOrder(t.sample_id),a.loadOrderDetailList(t.sample_id),a._updateSubTotal(t.sample_id),a.loadDetail(a._id)},function(){a.selectedSpecification0=null,a._notifyService.showError("en"==a.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==a.user.lang?y.a.error_title_en:y.a.error_title)})}else this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id);else this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==this.user.lang?y.a.error_title_en:y.a.error_title)}},{key:"loadOrderDetailList",value:function(t){var n=this;if(null!=t){var a={page:1,limit:9999};a.sample_id=t,this._dataService.post("/request/getlistorderdetail",a).subscribe(function(t){var a=[];n._totalSub=0;var c,i=e(t.data);try{var o=function(){var e=c.value;0==a.filter(function(t){return t.code==e.code&&t.category_id==e.category_id}).length&&(a.push({code:e.code,code_father:e.code_father,lod:e.lod,mark:e.mark,method:e.method,parameter_id:e.parameter_id,category_id:e.category_id,price:null==e.price?0:e.price,priority:e.priority,sample_id:e.sample_id,specification_name_e:e.specification_name_e,specification_name_l:e.specification_name_l,tat:e.tat,unit:e.unit,quantity:e.quantity,flag:!1,comment_ext:e.comment_ext}),n._totalSub+=parseInt(null==e.price?0:e.price)*e.quantity)};for(i.s();!(c=i.n()).done;)o()}catch(r){i.e(r)}finally{i.f()}n._orderdetailists=a,n.totalRow=t.rowCount,n.totalPage=t.totalPages,n.selectedSpecification=null})}}},{key:"pageChanged",value:function(e,t){this.pageIndex=e.page,this.loadOrderDetailList(t)}},{key:"_removeItem",value:function(e){var t=this,n={};n.sample_id=e.sample_id,n.parameter_id=e.parameter_id,n.category_id=e.category_id,this._dataService.post("/request/removeItemOrder",n).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_DELETE_EN:y.a.MSG_DELETE,"OK"),t._updateSubTotal(e.sample_id),t.loadDetailSampleOrder(e.sample_id),t.loadOrderDetailList(e.sample_id)})}},{key:"_updateTAT",value:function(e,t){var n=this;this._tat=null;var a={};a.sample_id=e.sample_id,a.tat=t,this._dataService.post("/request/updateTAT",a).subscribe(function(t){n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),n._updateSubTotal(e.sample_id),n.loadOrderDetailList(e.sample_id)})}},{key:"_updatePrice",value:function(e){var t=this,n={};n.sample_id=e.sample_id,n.parameter_id=e.parameter_id,n.category_id=e.category_id,n.price=e.price,n.mark=e.mark,n.priority=e.priority,n.tat=e.tat,n.quantity=e.quantity,console.log("KQ",n),this._dataService.post("/request/updatePriceOrder",n).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t._updateSubTotal(e.sample_id),t.loadOrderDetailList(e.sample_id),t.loadDetail(t._id)})}},{key:"_updateSubTotal",value:function(e){var t=this,n={};n.sample_id=e,this._dataService.post("/request/updateSubTotal",n).subscribe(function(n){t._updateTotal(t._id),t.loadDetailSampleOrder(e)})}},{key:"_updateSubTotalWithNoloadOrderSampleTabs",value:function(e){var t=this;this.selectedCategory0=null;var n={};n.sample_id=e,this._dataService.post("/request/updateSubTotal",n).subscribe(function(n){t._updateTotalWithNoloadOrderSampleTabs(t._id),t.loadDetailSampleOrder(e)})}},{key:"_updateTotalWithNoloadOrderSampleTabs",value:function(e){var t=this,n={};n.request_id=e,this._dataService.post("/request/updateTotal",n).subscribe(function(e){t.loadDetailWithNoloadOrderSampleTabs(t._id)})}},{key:"_updateTotal",value:function(e){var t=this,n={};n.request_id=e,this._dataService.post("/request/updateTotal",n).subscribe(function(e){console.log(e),t.loadDetail(t._id)})}},{key:"_addComment",value:function(e,t){this.entityComment=t,this.modalService.open(e,{size:"md",centered:!0})}},{key:"saveComment",value:function(){var e=this;this.isSaveNote=!0,this._dataService.post("/request/addCommentParameter",{sample_id:this.entityComment.sample_id,parameter_id:this.entityComment.parameter_id,category_id:this.entityComment.category_id,comment_ext:this.entityComment.comment_ext}).subscribe(function(t){e.isSaveNote=!1,e.loadOrderDetailList(e.entityComment.sample_id),e.modalService.dismissAll()})}},{key:"_saveTemplate",value:function(t){var n=this;if(null!=t.sample_name&&""!=t.sample_name){var a={};a.sample_name=t.sample_name,a.weight=t.weight,a.customer_id=this.entity.customer_id;var c,i=[],o=e(this._orderdetailists);try{for(o.s();!(c=o.n()).done;){var r=c.value;i.push({code:r.code,flag:r.flag,lod:r.lod,mark:r.mark,method:r.method,loq:r.loq,parameter_id:r.parameter_id,category_id:r.category_id,price:r.price,priority:r.priority,sample_id:null,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,tat:r.tat,unit:r.unit,quantity:r.quantity})}}catch(l){o.e(l)}finally{o.f()}a.json=JSON.stringify(i),this._dataService.post("/request/addSampleTemplate",a).subscribe(function(e){"ok"==e.result?(n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),n.loadTemplates(n.entity.customer_id)):n._notifyService.showError("en"==n.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==n.user.lang?y.a.error_title_en:y.a.error_title)})}else this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==this.user.lang?y.a.error_title_en:y.a.error_title)}},{key:"_getTemplate",value:function(e,t){var n=this;if(console.log(e,t),null!=t.sample_name&&null!=e)v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_replace_en:y.a.are_u_sure_replace,text:t.sample_name,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(a){if(a.value){var c={};c.id=e,c.sample_id=t.sample_id,c.userid=n.user.id,console.log(c),n._dataService.post("/request/replaceOrderDetailBySampleId",c).subscribe(function(e){n.selectedTemplate=null,"ok"==e.result?(n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),n.selectedTemplate0=[],n._updateSubTotal(t.sample_id),n.loadDetailSampleOrder(t.sample_id),n.loadOrderDetailList(t.sample_id)):n._notifyService.showError("en"==n.user.lang?y.a.MSG_ADDNO_EN:y.a.MSG_ADDNO,"en"==n.user.lang?y.a.error_title_en:y.a.error_title)})}else n.selectedTemplate=null});else if(null!=e){var a={};a.id=e,a.sample_id=t.sample_id,a.request_id=this._id;var c=new Date;a.timestamp=new Date(s(c.setHours(c.getHours()+7)).format("YYYY-MM-DD HH:mm:ss")),a.is_active=0,a.userid=this.user.id,this._dataService.post("/request/replaceOrderDetailBySampleId",a).subscribe(function(e){n.selectedTemplate=null,"ok"==e.result?(n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),n.selectedTemplate0=null,n._updateSubTotal(e.data.sample_id),n.socket.emit("refresh",{}),n.loadDetailSampleOrder(e.data.sample_id),n.loadOrderDetailList(e.data.sample_id)):(n.selectedTemplate0=null,n._notifyService.showError("en"==n.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==n.user.lang?y.a.error_title_en:y.a.error_title))})}}},{key:"_currentTabClicked",value:function(e){console.log(e)}},{key:"popUpLanguage",value:function(e,t){this.choosePrintType=t,this.modalService.open(e,{size:"md",centered:!0})}},{key:"_print",value:function(e){1==this.choosePrintType&&this.printQuotationAsPDF(e),2==this.choosePrintType&&this.printBOAsPDF(e)}},{key:"printQuotationAsPDF",value:function(t){return Object(d.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,c=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(a={}).id=this._id,this._dataService.post("/request/detailIn",a).subscribe(function(n){return Object(d.__awaiter)(c,void 0,void 0,regeneratorRuntime.mark(function a(){var c,i,o,r,l,d,h,g,u,f,m,p,b,v,y,x,S,w,N,D,M,C,k,T,I,P,R,E,A,O,Y,U,F,L,q,z,G,V,B,H,Q,$,K,j,W,J,X,Z,ee,te,ne,ae,ce,ie,oe,re,le,de,se,he,ge;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:console.log("KQ In",n),this.entity=n.data,c=n.data,i=new Date(c.received_date),o=new Date(i.getTime()+24*c.valid_number*60*60*1e3),s(o).format("DD/MM/YYYY"),r=s(i).format("DD/MM/YYYY"),(l=[]).push({text:"\n"}),d="en"==t?this.entity.company_name_e:this.entity.company_name_l,h="en"==t?this.entity.address_e:this.entity.address_l,g="en"==t?"Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 b\xe1o gi\xe1: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length),"0"==t&&(g="M\xe3 s\u1ed1 b\xe1o gi\xe1/ Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)),l.push({alignment:"justify",columns:[{text:[{text:d,bold:!0},"\n",{text:h},"\n",{text:this.entity.contact_name_sender,bold:!0},"\n",{text:null==this.entity.sender_phone?"":this.entity.sender_phone},"\n",{text:null==this.entity.email?"":this.entity.email}],style:"body_top"},{qr:g,foreground:"#20a8d8",fit:65,alignment:"right"}]}),u="en"==t?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,","0"==t&&(u="K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng/ Dear customers,"),f="en"==t?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.",0==t&&(f="Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry."),m="en"==t?"Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any).":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3).",0==t&&(m="Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3)/ Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any)."),p="en"==t?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",b="en"==t?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",v="en"==t?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",y="en"==t?"QUOTATION":"B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M","0"==t&&(y="B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M\nQUOTATION"),l.push({text:"\n"}),l.push({table:{widths:["*"],body:[[{text:u,alignment:"left",style:"body_footer"}],[{text:f,alignment:"left",style:"body_footer"}],[{text:m,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),l.push({text:"\n"}),x=this.formatPipe.localeString(c.total),S="0.00",w=c.total*c.promo_perorder/100,N=this.formatPipe.localeString((c.total-w)*c.tax_vat/100),D=this.formatPipe.localeString(parseFloat(c.total)-w+(c.total-w)*c.tax_vat/100),null!=c.promo_special&&""!=c.promo_special&&(S=this.formatPipe.localeString(c.promo_special),N=this.formatPipe.localeString((c.total-c.promo_special-(w=(c.total-c.promo_special)*c.promo_perorder/100))*c.tax_vat/100),D=this.formatPipe.localeString(parseFloat(c.total)-parseFloat(c.promo_special)-w+(c.total-c.promo_special-w)*c.tax_vat/100)),M=this.formatPipe.localeString(w),C=1,k="en"==t?"No.":"STT","0"==t&&(k="STT\nNo."),T="en"==t?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m","0"==t&&(T="Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m\nParameters"),I="en"==t?"Method":"Ph\u01b0\u01a1ng ph\xe1p","0"==t&&(I="Ph\u01b0\u01a1ng ph\xe1p\nMethod"),P="en"==t?"Note":"Ghi ch\xfa","0"==t&&(P="Ghi ch\xfa\nNote"),R="en"==t?"Unit price":"\u0110\u01a1n gi\xe1","0"==t&&(R="\u0110\u01a1n gi\xe1\nUnit price"),E="en"==t?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng","0"==t&&(E="S\u1ed1 l\u01b0\u1ee3ng\nQuantity"),A="en"==t?"Amount":"Th\xe0nh ti\u1ec1n","0"==t&&(A="Th\xe0nh ti\u1ec1n\nAmount"),O=e(c.orders_list.filter(function(e){return 2!=e.is_active}));try{for(O.s();!(Y=O.n()).done;)if((U=Y.value).orderdetail_list.length>0){l.push({table:{widths:[30,"*",110,80,50,50,60],body:[[{border:[!0,!0,!0,!0],text:{text:k,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:T,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:I,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:P,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:R,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:E,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:A,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}}),F=null==U.weight?"":U.weight,L="en"==t?"Sample volume: "+F:"L\u01b0\u1ee3ng m\u1eabu: "+F,"0"==t&&(L="L\u01b0\u1ee3ng m\u1eabu/ Sample volume: "+F),l.push({table:{widths:[30,"*",110,80,50,50,60],body:[[{colSpan:6,text:C+". "+("0"==t?U.sample_name+"/ "+U.sample_name_e:"en"==t?U.sample_name_e:U.sample_name),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:{text:this.formatPipe.localeString(U.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:6,text:{text:L,italics:!0,bold:!1},border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}}),q=[],z=1,G=[],V="en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",B="en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",H="en"==t?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)","0"==t&&(V="T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)/ Total (not incluled VAT)",B="T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)/ Total (incluled VAT)",H="Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)/ Discount on total orders (%)"),Q=e(U.orderdetail_list);try{for(Q.s();!($=Q.n()).done;){K=$.value,j=!1,"b709ca6e-2823-11eb-9a33-acde48001122"==K.department_id?(G.push(!0),j=!0):(G.push(!1),j=!1),W="",J=null==K.standards?[]:JSON.parse(K.standards),X=e(J.filter(function(e){return null!=e}));try{for(X.s();!(Z=X.n()).done;)null==(ee=Z.value).id?null!=ee&&(W+="("+ee+")"):W+="("+ee.id+")"}catch(ue){X.e(ue)}finally{X.f()}te="en"==t?K.specification_ex_name_e:K.specification_ex_name_l,"0"==t&&(te=K.specification_ex_name_l+"/ "+K.specification_ex_name_e),q.push({STT:z,Para:[{text:te+" ",italics:j},{text:W,fontSize:8,italics:j}],Method:K.method,Note:K.comment_ext,Price:this.formatPipe.localeString(K.price),Qty:K.quantity,Amount:this.formatPipe.localeString(K.price*K.quantity)}),z+=1}}catch(ue){Q.e(ue)}finally{Q.f()}l.push(this.tablePrintQuotation(q,["STT","Para","Method","Note","Price","Qty","Amount"],[30,"*",110,80,50,50,60],G)),ne=""!=c.title_promo_spec&&null!=c.title_promo_spec?c.title_promo_spec:"en"==t?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m","0"==t&&(ne=""!=c.title_promo_spec&&null!=c.title_promo_spec?c.title_promo_spec:"Gi\u1ea3m gi\xe1 cho nh\xf3m/ Discount on group"),C==c.orders_list.filter(function(e){return 2!=e.is_active}).length&&l.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*",110,80,50,50,60],body:[[{colSpan:6,text:V,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:B,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*",110,80,50,50,60],body:[[{colSpan:6,text:V,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:H,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:B,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*",110,80,50,50,60],body:[[{colSpan:6,text:V,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:B,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*",110,80,50,50,60],body:[[{colSpan:6,text:V,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:H,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:B,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}),C+=1}}catch(ue){O.e(ue)}finally{O.f()}if(l.push({text:"\n"}),this.entity.standard_list.length>0){ae="",ce=e(this.entity.standard_list);try{for(ce.s();!(ie=ce.n()).done;)oe=ie.value,re="("+oe.id+") "+("en"==t?oe.description_e:oe.description_l),ae.includes(re)||(ae+=re+"\n")}catch(ue){ce.e(ue)}finally{ce.f()}l.push({text:ae,fontSize:8,italics:!0})}if(l.push({text:"\n"}),le="en"==t?"These prices are valid for one month if the quotation is accepted within one month.\nPayment period: on order.\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + Account number (VND): 15000168\n       + Bank name: Asia Commercial Bank\n       +Bank branch: Dong Sai Gon":"Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\n       + S\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",de="en"==t?"Estimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.":"Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng",se="en"==t?"For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form":"N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.",0==t&&(le="Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1./ These prices are valid for one month if the quotation is accepted within one month.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng./ Payment period: on order.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + S\u1ed1 t\xe0i kho\u1ea3n/ Account number (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u/ Bank name: Asia Commercial Bank\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n/ Bank branch: Dong Sai Gon",de="Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nEstimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.",se="N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.\n For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form."),l.push({text:le,fontSize:10}),l.push({text:"\n"}),l.push({text:de,fontSize:8,italics:!0}),l.push({text:"\n"}),l.push({columns:[{width:"*",text:se,fontSize:10},{width:"*",qr:"http://phieuyeucauthunghiemtv.com",foreground:"#20a8d8",fit:45,alignment:"center"}]}),l.push({text:"\n"}),l.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:r+"\n"+("en"==t?"Valid by":"Ng\u01b0\u1eddi l\u1eadp b\xe1o gi\xe1"),alignment:"center",fontSize:10}]}),l.push({text:"\n"}),null==this.entity.signature_user){a.next=48;break}return he=this.baseFolder+this.entity.signature_user,a.t0=l,a.t1={width:"*",text:"",fontSize:10},a.next=43,this._convertBase64ImageFromURL(he);case 43:a.t2=a.sent,a.t3={width:"150",image:a.t2,alignment:"center"},a.t4=[a.t1,a.t3],a.t5={columns:a.t4},a.t0.push.call(a.t0,a.t5);case 48:return a.t6=[25,80,25,70],a.t7={fontSize:12,columnGap:20},a.t8=[{text:y,style:"title_top"},{text:"\n"},{text:g,alignment:"right",fontSize:13,bold:!0},l],a.t9=function(e,t){return s(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:b+"\n"+p,alignment:"left",style:"body_footer"},{height:150,text:v,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},a.t10=function(e,t,n){return{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}},a.t11={header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},a.next=56,this._convertBase64ImageFromURL(this._logoPath);case 56:return a.t12=a.sent,a.next=59,this._convertBase64ImageFromURL(this._logoIsoPath);case 59:a.t13=a.sent,a.t14={myLogo:a.t12,myIso:a.t13},ge={pageSize:"A4",pageMargins:a.t6,defaultStyle:a.t7,content:a.t8,footer:a.t9,header:a.t10,styles:a.t11,images:a.t14},("'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),_.a.createPdf(ge).open();case 64:case"end":return a.stop()}},a,this)}))});case 2:case"end":return n.stop()}},n,this)}))}},{key:"printBOAsPDF",value:function(t){return Object(d.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,c=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(a={}).id=this._id,this._dataService.post("/request/detailIn",a).subscribe(function(n){return Object(d.__awaiter)(c,void 0,void 0,regeneratorRuntime.mark(function a(){var c,i,o,r,l,d,h,g,u,f,m,p,b,v,y,x,S,w,N,D,M,C,k,T,I,P,R,E,A,O,Y,U,F,L,q,z,G,V,B,H,Q,$,K,j,W,J,X,Z,ee,te,ne,ae,ce,ie,oe,re,le,de,se,he,ge,ue,fe,_e,me,pe,be,ve,ye,xe,Se,we,Ne,De;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:console.log("KQ In",n.data),this.entity=n.data,c=n.data,i=new Date(c.received_date),o=new Date(i.getTime()+24*c.valid_number*60*60*1e3),s(o).format("DD/MM/YYYY"),r=s(i).format("DD/MM/YYYY"),(l=[]).push({text:"\n"}),d=null==this.entity.company_receiver?this.entity.company_name_l:"en"==t?null==this.entity.company_receiver.company_name_e?this.entity.company_receiver.company_name_l:this.entity.company_receiver.company_name_e:this.entity.company_receiver.company_name_l,h=null==this.entity.company_receiver?null==this.entity.address_l?"":this.entity.address_l:"en"==t?null==this.entity.company_receiver.address_e?this.entity.company_receiver.address_l:this.entity.company_receiver.address_e:this.entity.company_receiver.address_l,g="en"==t?"Order code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 \u0111\u01a1n h\xe0ng: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length),l.push({alignment:"justify",columns:[{text:[{text:d,bold:!0},"\n",{text:h},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.contact_name?"":this.entity.contact_receiver.contact_name,bold:!0},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.phone||"-"==this.entity.contact_receiver.phone?"":this.entity.contact_receiver.phone},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.email?"":this.entity.contact_receiver.email}],style:"body_top"},{qr:g,foreground:"#20a8d8",fit:65,alignment:"right"}]}),u="en"==t?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,",f="en"==t?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.",m="en"==t?"Sac Ky Tien Phong Science & Technology JSC would like to confirm we received the sample provided by customers (please see attachment).":"C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong xin x\xe1c nh\u1eadn \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c m\u1eabu do qu\xfd kh\xe1ch h\xe0ng cung c\u1ea5p (vui l\xf2ng xem danh s\xe1ch \u0111\xednh k\xe8m).",p="en"==t?"Please check and confirm the information: sample name, sample description, parameters, etc\u2026 and notify us immediately in case corrections are needed. The information in this receipt will be used for outputting the testing report.":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra v\xe0 x\xe1c nh\u1eadn l\u1ea1i c\xe1c th\xf4ng tin: t\xean m\u1eabu, m\xf4 t\u1ea3 m\u1eabu, ch\u1ec9 ti\xeau ph\xe2n t\xedch, \u2026 v\xe0 th\xf4ng b\xe1o ngay cho ch\xfang t\xf4i trong tr\u01b0\u1eddng h\u1ee3p c\u1ea7n ch\u1ec9nh s\u1eeda. Nh\u1eefng th\xf4ng tin trong bi\xean nh\u1eadn n\xe0y s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho vi\u1ec7c xu\u1ea5t k\u1ebft qu\u1ea3.",b="en"==t?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",v="en"==t?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",y="en"==t?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",x="en"==t?"RECEIPT":"BI\xcaN NH\u1eacN",l.push({text:"\n"}),l.push({table:{widths:["*"],body:[[{text:u,alignment:"left",style:"body_footer"}],[{text:f,alignment:"left",style:"body_footer"}],[{text:m,alignment:"left",style:"body_footer"}],[{text:p,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),l.push({text:"\n"}),S=this.formatPipe.localeString(c.total),w="0.00",N=c.total*c.promo_perorder/100,D=this.formatPipe.localeString((c.total-N)*c.tax_vat/100),M=this.formatPipe.localeString(parseFloat(c.total)-N+(c.total-N)*c.tax_vat/100),null!=c.promo_special&&""!=c.promo_special&&(w=this.formatPipe.localeString(c.promo_special),D=this.formatPipe.localeString((c.total-c.promo_special-(N=(c.total-c.promo_special)*c.promo_perorder/100))*c.tax_vat/100),M=this.formatPipe.localeString(parseFloat(c.total)-parseFloat(c.promo_special)-N+(c.total-c.promo_special-N)*c.tax_vat/100)),C=this.formatPipe.localeString(N),k=1,T="en"==t?"No.":"STT",I="en"==t?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m",P="en"==t?"Method":"Ph\u01b0\u01a1ng ph\xe1p ",R="en"==t?"Unit price":"\u0110\u01a1n gi\xe1",E="en"==t?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng",A="en"==t?"Amount":"Th\xe0nh ti\u1ec1n",O="en"==t?"Sample code: ":"M\xe3 m\u1eabu: ",Y="en"==t?"Sample description: ":"T\xecnh tr\u1ea1ng m\u1eabu: ",U="en"==t?"Amount of samples: ":"Kh\u1ed1i l\u01b0\u1ee3ng m\u1eabu: ",F="en"==t?"Date of receiving samples: "+s(new Date(c.received_date)).format("DD/MM/YYYY"):"Ng\xe0y nh\u1eadn m\u1eabu: "+s(new Date(c.received_date)).format("DD/MM/YYYY"),L=e(c.orders_list.filter(function(e){return 2!=e.is_active}));try{for(L.s();!(q=L.n()).done;){z=q.value,G="en"==t?"Client estimated due date: "+s(new Date(z.estimated_date)).format("DD/MM/YYYY"):"Ng\xe0y d\u1ef1 ki\u1ebfn tr\u1ea3 k\u1ebft qu\u1ea3: "+s(new Date(z.estimated_date)).format("DD/MM/YYYY"),l.push({table:{headerRows:1,widths:[30,"*","*",50,50,110],body:[[{border:[!0,!0,!0,!0],text:{text:T,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:I,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:P,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:R,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:E,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:A,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}}),V=null==z.weight?"":z.weight,l.push({table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:k+". "+z.sample_name,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{text:{text:this.formatPipe.localeString(z.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:5,text:O+(null==z.inner_code?"":z.inner_code),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:Y+(null==z.description?"":z.description),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:U+": "+V,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:F,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:G,border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}}),B=[],H=1,Q=[],$=e(z.orderdetail_list);try{for($.s();!(K=$.n()).done;){j=K.value,W=!1,"b709ca6e-2823-11eb-9a33-acde48001122"==j.department_id?(Q.push(!0),W=!0):(Q.push(!1),W=!1),J="",X=null==j.standards?[]:JSON.parse(j.standards),Z=e(X.filter(function(e){return null!=e}));try{for(Z.s();!(ee=Z.n()).done;)null==(te=ee.value).id?null!=te&&(J+="("+te+")"):J+="("+te.id+")"}catch(Me){Z.e(Me)}finally{Z.f()}B.push({STT:H,Para:[{text:("en"==t?j.specification_ex_name_e:j.specification_ex_name_l)+" ",italics:W},{text:J,fontSize:8,italics:W}],Method:j.method,Price:this.formatPipe.localeString(j.price),Qty:j.quantity,Amount:this.formatPipe.localeString(j.price*j.quantity)}),H+=1}}catch(Me){$.e(Me)}finally{$.f()}l.push(this.tablePrintQuotation(B,["STT","Para","Method","Price","Qty","Amount"],[30,"*","*",50,50,110],Q)),ne=""!=c.title_promo_spec&&null!=c.title_promo_spec?c.title_promo_spec:"en"==t?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m",k==c.orders_list.filter(function(e){return 2!=e.is_active}).length&&l.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:C,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:C,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}),k+=1}}catch(Me){L.e(Me)}finally{L.f()}if(this.entity.standard_list.length>0){ae="",ce=e(this.entity.standard_list);try{for(ce.s();!(ie=ce.n()).done;)oe=ie.value,re="("+oe.id+") "+("en"==t?oe.description_e:oe.description_l),ae.includes(re)||(ae+=re+"\n")}catch(Me){ce.e(Me)}finally{ce.f()}l.push({text:ae,fontSize:8,italics:!0})}l.push({text:"\n"}),le="en"==t?"BILLING INFORMATION :":"Th\xf4ng tin xu\u1ea5t ho\xe1 \u0111\u01a1n :",de="en"==t?"Bank transfer information :":"Th\xf4ng tin chuy\u1ec3n kho\u1ea3n :",se="en"==t?"Account name: CONG TY CP KHCN SAC KY TIEN PHONG\nAccount number (VND): 15000168\nBank name: Asia Commercial Bank Bank branch: Dong Sai Gon":"T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\nS\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\nNg\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\nChi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",he="en"==t?"Company\u2019s name: ":"T\xean c\xf4ng ty: ",ge="en"==t?"Address: ":"\u0110\u1ecba ch\u1ec9: ",ue="en"==t?"Tax number: ":"M\xe3 s\u1ed1 thu\u1ebf: ",fe=null==this.entity.company_bill?d:this.entity.company_bill.company_name_l,_e=null==this.entity.company_bill?b:null==this.entity.company_bill.address_l?"":this.entity.company_bill.address_l,me=null==this.entity.company_bill?this.entity.tax_code:null==this.entity.company_bill.tax_code?"":this.entity.company_bill.tax_code,pe=c.orders_list.filter(function(e){return null!=e.note&&""!=e.note}),be=0,ve="",ye=e(pe);try{for(ye.s();!(xe=ye.n()).done;)Se=xe.value,be<=Se.note.length&&(ve=Se.note,be=Se.note.length)}catch(Me){ye.e(Me)}finally{ye.f()}if(we="",""!=ve&&(we="en"==t?"OTHERS INFORMATION :":"Th\xf4ng tin kh\xe1c :"),l.push(""!=ve?{table:{widths:["*","*"],body:[[{border:[!0,!0,!0,!1],text:{text:le,bold:!0},style:"body_footer",alignment:"left"},{border:[!0,!0,!0,!1],text:{text:de,bold:!0},style:"body_footer",alignment:"left"}],[{border:[!0,!1,!0,!0],text:{text:he+fe+"\n"+ge+_e+"\n"+ue+me,bold:!1},style:"body_footer",alignment:"left"},{border:[!0,!1,!0,!0],text:{text:se,bold:!1},style:"body_footer",alignment:"left"}],[{colSpan:2,border:[!0,!0,!0,!1],text:{text:we,bold:!0},style:"body_footer",alignment:"left"},{}],[{colSpan:2,border:[!0,!1,!0,!0],text:{text:ve,bold:!1},style:"body_footer",alignment:"left"},{}]]},layout:{defaultBorder:!1}}:{table:{widths:["*","*"],body:[[{border:[!0,!0,!0,!1],text:{text:le,bold:!0},style:"body_footer",alignment:"left"},{border:[!0,!0,!0,!1],text:{text:de,bold:!0},style:"body_footer",alignment:"left"}],[{border:[!0,!1,!0,!0],text:{text:he+fe+"\n"+ge+_e+"\n"+ue+me,bold:!1},style:"body_footer",alignment:"left"},{border:[!0,!1,!0,!0],text:{text:se,bold:!1},style:"body_footer",alignment:"left"}]]},layout:{defaultBorder:!1}}),l.push({text:"\n"}),l.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:r+"\n"+("en"==t?"Valid by":"Ng\u01b0\u1eddi l\u1eadp bi\xean nh\u1eadn"),alignment:"center",fontSize:10}]}),l.push({text:"\n"}),null==this.entity.signature_user){a.next=32;break}return Ne=this.baseFolder+this.entity.signature_user,a.t0=l,a.t1={width:"*",text:"",fontSize:10},a.next=27,this._convertBase64ImageFromURL(Ne);case 27:a.t2=a.sent,a.t3={width:"150",image:a.t2,alignment:"center"},a.t4=[a.t1,a.t3],a.t5={columns:a.t4},a.t0.push.call(a.t0,a.t5);case 32:return a.t6=[25,80,25,70],a.t7={fontSize:12,columnGap:20},a.t8=[{text:x,style:"title_top"},{text:"\n"},{text:g,alignment:"right",fontSize:13,bold:!0},l],a.t9=function(e,t){return s(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:v+"\n"+b,alignment:"left",style:"body_footer"},{height:150,text:y,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},a.t10=function(e,t,n){return{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}},a.t11={header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},a.next=40,this._convertBase64ImageFromURL(this._logoPath);case 40:return a.t12=a.sent,a.next=43,this._convertBase64ImageFromURL(this._logoIsoPath);case 43:a.t13=a.sent,a.t14={myLogo:a.t12,myIso:a.t13},De={pageSize:"A4",pageMargins:a.t6,defaultStyle:a.t7,content:a.t8,footer:a.t9,header:a.t10,styles:a.t11,images:a.t14},("'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),_.a.createPdf(De).open();case 48:case"end":return a.stop()}},a,this)}))});case 2:case"end":return n.stop()}},n,this)}))}},{key:"tablePrintQuotation",value:function(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,a)}}}},{key:"buildTableBodyPrintQuotation",value:function(e,t,n){var a=[],c=0;return e.forEach(function(e){var i=[],o=1;t.forEach(function(t){i.push({text:{text:e[t]},alignment:2==o||3==o||4==o?"left":5==o||7==o?"right":"center",fontSize:10,italics:2==o&&n[c]}),o+=1,c+=1}),a.push(i)}),a}},{key:"_convertBase64ImageFromURL",value:function(e){return new Promise(function(t,n){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=function(e){n(e)},a.src=e})}},{key:"loadImgs",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",t).subscribe(function(t){return Object(d.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._logoPath+=t.data.filter(function(e){return"logo-stp"==e.file_name_e})[0].path_file,this._logoIsoPath+=t.data.filter(function(e){return"logo-iso"==e.file_name_e})[0].path_file;case 1:case"end":return e.stop()}},e,this)}))})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}},{key:"createImageFromBlob",value:function(e){var t=this,n=new FileReader;n.addEventListener("load",function(){t.imageToShow=n.result},!1),e&&n.readAsDataURL(e)}}]),t}()).\u0275fac=function(e){return new(e||Sn)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(l.a),x.bc(Ft.a),x.bc(Fe.a),x.bc(C.s))},Sn.\u0275cmp=x.Vb({type:Sn,selectors:[["app-req-detail"]],decls:74,vars:44,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","button","routerLink","/request/list",1,"btn","btn-sm","btn-primary","mr-sm-2"],["ngbDropdown","","class","btn-group","role","group",4,"ngIf"],[1,"card-body"],[1,"col-xl-3","xl-100"],["type","number","min","0","name","number_sample",1,"form-control","form-control-sm",3,"ngModel","disabled","ngModelChange","change"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"btn-group","flex-wrap"],[4,"ngFor","ngForOf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[4,"ngIf"],["class","form theme-form",4,"ngIf"],["contentLanguage",""],["contentComment",""],["ngbDropdown","","role","group",1,"btn-group"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[1,"dropdown-item",3,"click"],["type","button",3,"ngClass","click"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],[1,"form","theme-form"],[1,"col"],[1,"form-group","row"],[1,"col-md-3","col-form-label",3,"for"],[1,"col-md-3"],["type","text",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change","keypress.enter"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["type","text","disabled","",1,"form-control","jdisabled",3,"id","placeholder","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","disabled","ngModelChange","change"],["name","_status",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["value","0"],["value","1"],["value","2"],[1,"col-md-6"],["name","selectedCategory0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","placeholder","notFoundText","ngModelChange","change"],["ng-option-tmp",""],["name","selectedSpecification0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["type","number",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change"],[1,"col-md-3","col-form-label"],["name","selectedTemplate0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["href","javascript:;",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-secondary"],["colspan","12",1,"text-right"],[1,"table-primary"],[2,"width","50px"],[2,"width","100px"],[1,"fa","fa-trash"],["scope","col"],["container","body",3,"ngbTooltip"],["href","javascript:;",3,"click"],["href","javascript:;","class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],[3,"ngClass","ngbTooltip","click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[3,"ngClass"],[2,"cursor","pointer",3,"click"],["href","javascript:;",1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[3,"ngClass","ngbTooltip","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],["type","text","min","0","mask","separator.2","thousandSeparator",",",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],["type","number","min","0",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"form-group"],["for","takenote"],["id","takenote","rows","3","name","takenote",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["href","javascript:;",1,"btn","btn-light",3,"click"],["href","javascript:;","class","btn btn-primary",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["href","javascript:;",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"button",7),x.dd(9),x.wc(10,"translate"),x.gc(),x.bd(11,qt,14,12,"div",8),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(12,"div",9),x.hc(13,"div",1),x.hc(14,"div",10),x.hc(15,"strong"),x.dd(16),x.wc(17,"translate"),x.gc(),x.gc(),x.hc(18,"div",10),x.dd(19),x.gc(),x.hc(20,"div",10),x.hc(21,"strong"),x.dd(22),x.wc(23,"translate"),x.gc(),x.gc(),x.hc(24,"div",10),x.dd(25),x.gc(),x.hc(26,"div",10),x.hc(27,"strong"),x.dd(28),x.wc(29,"translate"),x.gc(),x.gc(),x.hc(30,"div",10),x.dd(31),x.wc(32,"date"),x.gc(),x.hc(33,"div",10),x.hc(34,"strong"),x.dd(35),x.wc(36,"translate"),x.gc(),x.gc(),x.hc(37,"div",10),x.dd(38),x.wc(39,"date"),x.gc(),x.hc(40,"div",10),x.hc(41,"strong"),x.dd(42),x.wc(43,"translate"),x.gc(),x.gc(),x.hc(44,"div",10),x.hc(45,"input",11),x.rc("ngModelChange",function(e){return t.entity.number_sample=e})("change",function(){return t._updateSampleNo()}),x.gc(),x.gc(),x.hc(46,"div",10),x.hc(47,"strong"),x.dd(48),x.wc(49,"translate"),x.gc(),x.gc(),x.hc(50,"div",10),x.dd(51),x.gc(),x.hc(52,"div",10),x.hc(53,"strong"),x.dd(54),x.wc(55,"translate"),x.gc(),x.gc(),x.hc(56,"div",10),x.hc(57,"strong"),x.dd(58),x.wc(59,"number"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(60,"div",2),x.hc(61,"div",3),x.hc(62,"div",4),x.hc(63,"div",1),x.hc(64,"div",12),x.hc(65,"div",13),x.bd(66,zt,4,5,"ng-container",14),x.gc(),x.gc(),x.hc(67,"div",15),x.bd(68,Vt,2,1,"ng-container",16),x.gc(),x.gc(),x.gc(),x.bd(69,pn,149,192,"form",17),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(70,bn,18,9,"ng-template",null,18,x.cd),x.bd(72,xn,21,11,"ng-template",null,19,x.cd)),2&e&&(x.Nb(9),x.fd(" ",x.xc(10,20,"Go back")," "),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","print")),x.Nb(5),x.ed(x.xc(17,22,"Company")),x.Nb(3),x.fd(" ","en"==t.user.lang?t.entity.company_name_e:t.entity.company_name_l," "),x.Nb(3),x.ed(x.xc(23,24,"Contact")),x.Nb(3),x.fd(" ",t.entity.contact_name," "),x.Nb(3),x.ed(x.xc(29,26,"Received date")),x.Nb(3),x.fd(" ",x.yc(32,28,t.entity.received_date,"dd/MM/yyyy HH:mm")," "),x.Nb(4),x.ed(x.xc(36,31,"Returned date")),x.Nb(3),x.fd(" ",x.yc(39,33,t.entity.returned_date,"dd/MM/yyyy HH:mm")," "),x.Nb(4),x.ed(x.xc(43,36,"Number of sample")),x.Nb(3),x.Dc("ngModel",t.entity.number_sample)("disabled",0!=t.entity.is_active||!t._authenService.hasPermission("REQ-LIST","create")),x.Nb(3),x.ed(x.xc(49,38,"Created by")),x.Nb(3),x.fd(" ",t.entity.created_by," "),x.Nb(3),x.ed(x.xc(55,40,"Total")),x.Nb(4),x.fd("",null==t.entity.total||"NaN"==t.entity.total?0:x.xc(59,42,t.entity.total)," (VND)"),x.Nb(8),x.Dc("ngForOf",t._xList),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")),x.Nb(1),x.Dc("ngIf",0!=t._currentTabActivated))},directives:[l.e,o.q,r.s,r.c,r.n,r.q,o.p,C.l,C.p,C.o,o.o,r.z,r.o,r.p,r.x,r.r,r.A,I.a,I.c,C.N,Lt.a],pipes:[P.c,o.f,o.g,o.y],styles:[""]}),Sn);function Nn(e,t){if(1&e){var n=x.ic();x.hc(0,"button",42),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(107);return e._openModal(t,null)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Add new request")," "))}function Dn(e,t){if(1&e){var n=x.ic();x.hc(0,"button",43),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e.exportList)}),x.cc(1,"i",44),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function Mn(e,t){if(1&e){var n=x.ic();x.hc(0,"button",45),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(111);return e.openCopyModal(t,e.exportList,1)}),x.cc(1,"i",46),x.dd(2),x.wc(3,"translate"),x.wc(4,"translate"),x.gc()}2&e&&(x.Nb(2),x.gd(" ",x.xc(3,2,"Copy")," ",x.xc(4,4,"All")," "))}function Cn(e,t){1&e&&x.cc(0,"img",47)}function kn(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",48),x.hc(3,"h3",49),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function Tn(e,t){if(1&e){var n=x.ic();x.hc(0,"button",62),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit,t=x.vc(2),a=x.Rc(107);return t._openModal(a,e)}),x.wc(1,"translate"),x.cc(2,"i",63),x.gc()}if(2&e){var a=x.vc(3);x.Fc("ngbTooltip","\n                          ",x.xc(1,2,"Edit"),"\n                          "),x.Dc("disabled",!a._authenService.hasPermission("REQ-LIST","update"))}}function In(e,t){1&e&&(x.hc(0,"span",64),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Pending")))}function Pn(e,t){1&e&&(x.hc(0,"span",65),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Confirmed")))}function Rn(e,t){1&e&&(x.hc(0,"span",66),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cancel")))}function En(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",51),x.dd(2),x.gc(),x.hc(3,"th",51),x.hc(4,"input",52),x.rc("change",function(e){x.Uc(n);var a=t.$implicit;return x.vc(2).selectItem(e,a.id)}),x.gc(),x.gc(),x.hc(5,"td"),x.hc(6,"button",53),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(2)._routeDetail(e)}),x.wc(7,"translate"),x.cc(8,"i",54),x.gc(),x.bd(9,Tn,3,4,"button",55),x.hc(10,"button",56),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2),c=x.Rc(111);return a.openCopyModal(c,e,0)}),x.wc(11,"translate"),x.cc(12,"i",46),x.gc(),x.gc(),x.hc(13,"td"),x.dd(14),x.gc(),x.hc(15,"td"),x.dd(16),x.gc(),x.hc(17,"td"),x.dd(18),x.wc(19,"date"),x.gc(),x.hc(20,"td"),x.hc(21,"span",57),x.dd(22),x.gc(),x.gc(),x.hc(23,"td"),x.dd(24),x.gc(),x.hc(25,"td",58),x.dd(26),x.wc(27,"number"),x.gc(),x.hc(28,"td"),x.dd(29),x.gc(),x.hc(30,"td"),x.dd(31),x.wc(32,"date"),x.gc(),x.hc(33,"td"),x.bd(34,In,3,3,"span",59),x.bd(35,Pn,3,3,"span",60),x.bd(36,Rn,3,3,"span",61),x.gc(),x.hc(37,"td"),x.dd(38),x.wc(39,"date"),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.Fc("name","ckU",c+1,""),x.Dc("checked",i.exportList.includes(a.id)),x.Nb(2),x.Fc("ngbTooltip","\n                          ",x.xc(7,21,"View detail"),"\n                          "),x.Dc("disabled",!i._authenService.hasPermission("REQ-LIST","read")),x.Nb(3),x.Dc("ngIf",a.is_active<=2),x.Nb(1),x.Fc("ngbTooltip","\n                          ",x.xc(11,23,"Copy"),"\n                          "),x.Dc("disabled",!i._authenService.hasPermission("REQ-LIST","update")),x.Nb(4),x.fd(" ",a.request_no," "),x.Nb(2),x.ed(a.order_no),x.Nb(2),x.ed(x.yc(19,25,a.received_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.Dc("ngbTooltip",a.note),x.Nb(1),x.ed("en"==i.user.lang?a.company_name_e:a.company_name_l),x.Nb(2),x.fd(" ","en"==i.user.lang?a.receive_company_e:a.receive_company_l," "),x.Nb(2),x.ed(x.xc(27,28,a.total)),x.Nb(3),x.ed(a.contact_name),x.Nb(2),x.ed(x.yc(32,30,a.returned_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.Dc("ngIf",0==a.is_active),x.Nb(1),x.Dc("ngIf",0!=a.is_active&&2!=a.is_active),x.Nb(1),x.Dc("ngIf",2==a.is_active),x.Nb(2),x.ed(x.yc(39,33,a.timestamp,"dd/MM/yyyy HH:mm"))}}function An(e,t){if(1&e&&(x.fc(0),x.bd(1,En,40,36,"tr",50),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._requestslist)}}function On(e,t){if(1&e&&(x.hc(0,"small",105),x.dd(1),x.gc()),2&e){var n=x.vc(2);x.Nb(1),x.ed(n.selectedCustomerLabel)}}function Yn(e,t){1&e&&(x.fc(0),x.hc(1,"a",106),x.cc(2,"img",107),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing")," "))}function Un(e,t){1&e&&(x.hc(0,"button",108),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Save & close")," "))}var Fn=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function Ln(e,t){if(1&e){var n=x.ic();x.hc(0,"form",67,68),x.rc("ngSubmit",function(){x.Uc(n);var e=x.vc();return e.saveChange(e.selectedCustomer)}),x.hc(2,"div",69),x.hc(3,"h4",70),x.dd(4),x.wc(5,"translate"),x.wc(6,"translate"),x.gc(),x.hc(7,"button",71),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(8,"span",72),x.dd(9,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(10,"div",73),x.hc(11,"div",74),x.hc(12,"div",75),x.hc(13,"div",76),x.hc(14,"label",77),x.dd(15),x.wc(16,"translate"),x.hc(17,"span",49),x.dd(18,"(*)"),x.gc(),x.gc(),x.hc(19,"input",78),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.number_sample=e}),x.wc(20,"translate"),x.gc(),x.hc(21,"input",79),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.id=e}),x.gc(),x.gc(),x.gc(),x.hc(22,"div",75),x.hc(23,"div",76),x.hc(24,"label",80),x.dd(25,"VAT (%) "),x.hc(26,"span",49),x.dd(27,"(*)"),x.gc(),x.gc(),x.hc(28,"input",81),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.tax_vat=e}),x.gc(),x.gc(),x.gc(),x.hc(29,"div",82),x.hc(30,"div",76),x.hc(31,"label",83),x.dd(32),x.wc(33,"translate"),x.gc(),x.hc(34,"input",84),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.title_promo_spec=e}),x.wc(35,"translate"),x.gc(),x.gc(),x.gc(),x.hc(36,"div",75),x.hc(37,"div",76),x.hc(38,"label",85),x.dd(39),x.wc(40,"translate"),x.gc(),x.hc(41,"input",86),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.promo_special=e}),x.wc(42,"translate"),x.gc(),x.gc(),x.gc(),x.hc(43,"div",75),x.hc(44,"div",76),x.hc(45,"label",87),x.dd(46),x.wc(47,"translate"),x.gc(),x.hc(48,"input",88),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.promo_perorder=e}),x.wc(49,"translate"),x.gc(),x.gc(),x.gc(),x.hc(50,"div",82),x.hc(51,"div",76),x.hc(52,"label",89),x.dd(53),x.wc(54,"translate"),x.hc(55,"span",49),x.dd(56,"(*)"),x.gc(),x.gc(),x.hc(57,"ng-select",90),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().selectedCustomer=e})("change",function(){return x.Uc(n),x.vc()._getInfoLabelCustomer()}),x.wc(58,"translate"),x.wc(59,"translate"),x.gc(),x.bd(60,On,2,1,"small",91),x.gc(),x.gc(),x.hc(61,"div",75),x.hc(62,"div",76),x.hc(63,"label",92),x.dd(64),x.wc(65,"translate"),x.hc(66,"span",49),x.dd(67,"(*)"),x.gc(),x.gc(),x.hc(68,"input",93),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._fdate=e})("bsValueChange",function(e){return x.Uc(n),x.vc().orgValueChange1(e)}),x.wc(69,"translate"),x.gc(),x.gc(),x.gc(),x.hc(70,"div",75),x.hc(71,"div",76),x.hc(72,"label",94),x.dd(73),x.wc(74,"translate"),x.hc(75,"span",49),x.dd(76,"(*)"),x.gc(),x.gc(),x.hc(77,"input",95),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._tdate=e})("bsValueChange",function(e){return x.Uc(n),x.vc().orgValueChange2(e)}),x.wc(78,"translate"),x.gc(),x.gc(),x.gc(),x.hc(79,"div",75),x.hc(80,"div",76),x.hc(81,"label",96),x.dd(82),x.wc(83,"translate"),x.gc(),x.hc(84,"input",97),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.valid_number=e})("change",function(){return x.Uc(n),x.vc()._calculateDays()}),x.wc(85,"translate"),x.gc(),x.gc(),x.gc(),x.hc(86,"div",75),x.hc(87,"div",76),x.hc(88,"label",98),x.dd(89),x.wc(90,"translate"),x.gc(),x.hc(91,"select",99),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.is_active=e}),x.hc(92,"option",21),x.dd(93),x.wc(94,"translate"),x.gc(),x.hc(95,"option",22),x.dd(96),x.wc(97,"translate"),x.gc(),x.hc(98,"option",23),x.dd(99),x.wc(100,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(101,"div",82),x.hc(102,"div",76),x.hc(103,"label",100),x.dd(104),x.wc(105,"translate"),x.gc(),x.hc(106,"textarea",101),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.note=e}),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(107,"div",102),x.hc(108,"button",103),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.dd(109),x.wc(110,"translate"),x.gc(),x.bd(111,Yn,5,3,"ng-container",38),x.bd(112,Un,3,3,"button",104),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(4),x.fd(" ","ADD"==a._flagModal?x.xc(5,57,"Add new"):x.xc(6,59,"Update")," "),x.Nb(11),x.fd("",x.xc(16,61,"Number of sample")," "),x.Nb(4),x.Dc("ngClass","ADD"==a._flagModal?"form-control":"form-control jdisabled")("placeholder",x.xc(20,63,"Number of sample"))("ngModel",a.entity.number_sample)("disabled","ADD"!=a._flagModal),x.Nb(2),x.Dc("ngModel",a.entity.id),x.Nb(7),x.Dc("placeholder","VAT")("ngModel",a.entity.tax_vat)("disabled",0!=a.entity.is_active),x.Nb(4),x.ed(x.xc(33,65,"Promotion title")),x.Nb(2),x.Dc("placeholder",x.xc(35,67,"Promotion title"))("ngModel",a.entity.title_promo_spec)("disabled",0!=a.entity.is_active),x.Nb(5),x.fd("",x.xc(40,69,"Promotion per order")," (VND)"),x.Nb(2),x.Dc("placeholder",x.xc(42,71,"Promotion per order"))("ngModel",a.entity.promo_special)("disabled",0!=a.entity.is_active),x.Nb(5),x.fd("",x.xc(47,73,"Total promotion")," (%)"),x.Nb(2),x.Dc("placeholder",x.xc(49,75,"Total promotion"))("ngModel",a.entity.promo_perorder)("disabled",0!=a.entity.is_active),x.Nb(5),x.fd("",x.xc(54,77,"Company")," "),x.Nb(4),x.Dc("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCustomer)("placeholder",x.xc(58,79,"Please choose"))("notFoundText",x.xc(59,81,"Not found item")),x.Nb(3),x.Dc("ngIf",null!=a.selectedCustomer),x.Nb(4),x.fd("",x.xc(65,83,"Received date")," "),x.Nb(4),x.Dc("placeholder",x.xc(69,85,"Received date"))("ngModel",a._fdate)("bsConfig",x.Hc(107,Fn))("disabled",0!=a.entity.is_active),x.Nb(5),x.fd("",x.xc(74,87,"Returned date")," "),x.Nb(4),x.Dc("placeholder",x.xc(78,89,"Returned date"))("ngModel",a._tdate)("bsConfig",x.Hc(108,Fn))("disabled",0!=a.entity.is_active),x.Nb(5),x.ed(x.xc(83,91,"Valid date")),x.Nb(2),x.Dc("type","number")("placeholder",x.xc(85,93,"Valid date"))("ngModel",a.entity.valid_number)("disabled",0!=a.entity.is_active)("min",0),x.Nb(5),x.ed(x.xc(90,95,"Status")),x.Nb(2),x.Dc("ngModel",a.entity.is_active),x.Nb(2),x.fd(" ",x.xc(94,97,"Pending")," "),x.Nb(3),x.fd(" ",x.xc(97,99,"Confirmed")," "),x.Nb(3),x.fd(" ",x.xc(100,101,"Cancel")," "),x.Nb(5),x.ed(x.xc(105,103,"Note")),x.Nb(2),x.Dc("ngModel",a.entity.note),x.Nb(3),x.fd(" ",x.xc(110,105,"Close")," "),x.Nb(2),x.Dc("ngIf",a.isSave),x.Nb(1),x.Dc("ngIf",!a.isSave)}}function qn(e,t){1&e&&(x.hc(0,"h4",70),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Relationship")," "))}function zn(e,t){if(1&e&&(x.hc(0,"h4",70),x.dd(1),x.wc(2,"translate"),x.gc()),2&e){var n=x.vc(2);x.Nb(1),x.gd(" ",x.xc(2,2,"Contact")," - ",n._diaName," ")}}function Gn(e,t){if(1&e&&(x.hc(0,"h4",70),x.dd(1),x.wc(2,"translate"),x.wc(3,"translate"),x.gc()),2&e){var n=x.vc(2);x.Nb(1),x.gd(" ",x.xc(2,2,"Relationship")," - ",x.xc(3,4,"ADDREL"==n._flagModal1?"Add new":"Update")," ")}}function Vn(e,t){if(1&e){var n=x.ic();x.hc(0,"div",117),x.hc(1,"pagination",118),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(3).pageIndexRel=e})("pageChanged",function(e){return x.Uc(n),x.vc(3).pageChangedRel(e)}),x.gc(),x.hc(2,"a",30),x.dd(3),x.wc(4,"translate"),x.wc(5,"translate"),x.wc(6,"translate"),x.wc(7,"translate"),x.gc(),x.gc()}if(2&e){var a=x.vc(3);x.Nb(1),x.Dc("boundaryLinks",!0)("totalItems",a.totalRowRel)("ngModel",a.pageIndexRel)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSizeRel),x.Nb(2),x.id("",x.xc(4,12,"Total of records"),": ",a.totalRowRel," - ",x.xc(5,14,"Page")," ",a.pageIndexRel," ",x.xc(6,16,"of")," ",a.totalPageRel," ",x.xc(7,18,"page"),"")}}function Bn(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",119),x.hc(3,"h3",49),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function Hn(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"td",120),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(4).editLinkPopUp(e)}),x.dd(2),x.gc(),x.hc(3,"td"),x.dd(4),x.gc(),x.hc(5,"td"),x.dd(6),x.gc(),x.hc(7,"td"),x.dd(8),x.gc(),x.hc(9,"td"),x.dd(10),x.gc(),x.hc(11,"td"),x.dd(12),x.gc(),x.hc(13,"td"),x.dd(14),x.gc(),x.hc(15,"td"),x.hc(16,"button",121),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(4).deleteItemLinkContact(e)}),x.wc(17,"translate"),x.cc(18,"i",122),x.gc(),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=x.vc(4);x.Nb(2),x.fd(" ",a.code_link," "),x.Nb(2),x.ed(a.company_name_l),x.Nb(2),x.ed(a.sender_name),x.Nb(2),x.fd(" ",a.receive_company_l," "),x.Nb(2),x.fd(" ",a.receive_name," "),x.Nb(2),x.fd(" ",a.bill_company_l," "),x.Nb(2),x.fd(" ",a.bill_name," "),x.Nb(2),x.Ec("ngbTooltip",x.xc(17,9,"Delete")),x.Dc("disabled",!c._authenService.hasPermission("CUSTOMER","delete"))}}function Qn(e,t){if(1&e&&(x.fc(0),x.bd(1,Hn,19,11,"tr",50),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngForOf",n._relationslist)}}function $n(e,t){if(1&e){var n=x.ic();x.hc(0,"div",117),x.hc(1,"pagination",118),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(3).pageIndexRel=e})("pageChanged",function(e){return x.Uc(n),x.vc(3).pageChangedRel(e)}),x.gc(),x.hc(2,"a",30),x.dd(3),x.wc(4,"translate"),x.wc(5,"translate"),x.wc(6,"translate"),x.wc(7,"translate"),x.gc(),x.gc()}if(2&e){var a=x.vc(3);x.Nb(1),x.Dc("boundaryLinks",!0)("totalItems",a.totalRowRel)("ngModel",a.pageIndexRel)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSizeRel),x.Nb(2),x.id("",x.xc(4,12,"Total of records"),": ",a.totalRowRel," - ",x.xc(5,14,"Page")," ",a.pageIndexRel," ",x.xc(6,16,"of")," ",a.totalPageRel," ",x.xc(7,18,"page"),"")}}function Kn(e,t){if(1&e){var n=x.ic();x.hc(0,"div",74),x.hc(1,"div",112),x.hc(2,"input",113),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2)._keywordRel=e})("change",function(){return x.Uc(n),x.vc(2).loadRelationship()})("keyup.enter",function(){return x.Uc(n),x.vc(2).loadRelationship()}),x.wc(3,"translate"),x.gc(),x.gc(),x.hc(4,"div",114),x.hc(5,"button",115),x.rc("click",function(){return x.Uc(n),x.vc(2).linkContactPopUp1()}),x.dd(6),x.wc(7,"translate"),x.gc(),x.gc(),x.hc(8,"div",82),x.cc(9,"br"),x.bd(10,Vn,8,20,"div",116),x.hc(11,"div",31),x.hc(12,"table",32),x.hc(13,"thead",33),x.hc(14,"tr"),x.hc(15,"th",35),x.dd(16),x.wc(17,"translate"),x.gc(),x.hc(18,"th",35),x.dd(19),x.wc(20,"translate"),x.gc(),x.hc(21,"th",35),x.dd(22),x.wc(23,"translate"),x.gc(),x.hc(24,"th",35),x.dd(25),x.wc(26,"translate"),x.gc(),x.hc(27,"th",35),x.dd(28),x.wc(29,"translate"),x.gc(),x.hc(30,"th",35),x.dd(31),x.wc(32,"translate"),x.gc(),x.hc(33,"th",35),x.dd(34),x.wc(35,"translate"),x.gc(),x.hc(36,"th",35),x.dd(37),x.wc(38,"translate"),x.gc(),x.gc(),x.gc(),x.hc(39,"tbody"),x.bd(40,Bn,6,3,"ng-container",38),x.bd(41,Qn,2,1,"ng-container",38),x.gc(),x.gc(),x.gc(),x.bd(42,$n,8,20,"div",116),x.gc(),x.gc()}if(2&e){var a=x.vc(2);x.Nb(2),x.Dc("placeholder",x.xc(3,15,"Search"))("ngModel",a._keywordRel),x.Nb(4),x.fd(" ",x.xc(7,17,"Add new")," "),x.Nb(4),x.Dc("ngIf",a._relationslist.length>0),x.Nb(6),x.fd(" ",x.xc(17,19,"Relevant code")," "),x.Nb(3),x.fd(" ",x.xc(20,21,"Company")," "),x.Nb(3),x.fd(" ",x.xc(23,23,"Sender")," "),x.Nb(3),x.fd(" ",x.xc(26,25,"Received company")," "),x.Nb(3),x.fd(" ",x.xc(29,27,"Receiver")," "),x.Nb(3),x.fd(" ",x.xc(32,29,"Bill company")," "),x.Nb(3),x.fd(" ",x.xc(35,31,"Bill receiver")," "),x.Nb(3),x.ed(x.xc(38,33,"Actions")),x.Nb(3),x.Dc("ngIf",0==a._relationslist.length),x.Nb(1),x.Dc("ngIf",a._relationslist.length>0),x.Nb(1),x.Dc("ngIf",a._relationslist.length>0)}}function jn(e,t){1&e&&(x.fc(0),x.hc(1,"a",106),x.cc(2,"img",107),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing"),""))}function Wn(e,t){if(1&e&&(x.hc(0,"button",143),x.dd(1),x.wc(2,"translate"),x.gc()),2&e){x.vc();var n=x.Rc(2);x.Dc("disabled",!n.valid),x.Nb(1),x.fd(" ",x.xc(2,2,"Save")," ")}}function Jn(e,t){if(1&e){var n=x.ic();x.hc(0,"button",144),x.rc("click",function(){return x.Uc(n),x.vc(3)._clearContact()}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Add new")," "))}function Xn(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"td"),x.dd(2),x.gc(),x.hc(3,"td"),x.dd(4),x.gc(),x.hc(5,"td"),x.dd(6),x.gc(),x.hc(7,"td"),x.dd(8),x.gc(),x.hc(9,"td"),x.dd(10),x.gc(),x.hc(11,"td"),x.hc(12,"button",145),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(3);return a.loadDetail1(e.id,a.entityContact.company_id)}),x.cc(13,"i",63),x.gc(),x.hc(14,"button",146),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(3).deleteItem0(e)}),x.cc(15,"i",122),x.gc(),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=x.vc(3);x.Nb(2),x.fd(" ",a.contact_code," "),x.Nb(2),x.fd(" ",a.contact_name," "),x.Nb(2),x.fd(" ",a.phone," "),x.Nb(2),x.ed(a.email),x.Nb(2),x.ed(a.note_l),x.Nb(2),x.Dc("disabled",!c._authenService.hasPermission("CUSTOMER","update")),x.Nb(2),x.Dc("disabled",!c._authenService.hasPermission("CUSTOMER","delete"))}}function Zn(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"form",67,123),x.rc("ngSubmit",function(){return x.Uc(n),x.vc(2).saveChange0()}),x.hc(3,"div",74),x.hc(4,"div",75),x.hc(5,"div",76),x.hc(6,"label",124),x.dd(7),x.wc(8,"translate"),x.hc(9,"span",49),x.dd(10,"(*)"),x.gc(),x.gc(),x.hc(11,"input",125),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.contact_name=e}),x.wc(12,"translate"),x.gc(),x.gc(),x.gc(),x.hc(13,"div",75),x.hc(14,"div",76),x.hc(15,"label",126),x.dd(16),x.wc(17,"translate"),x.gc(),x.hc(18,"input",127),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.contact_code=e}),x.wc(19,"translate"),x.gc(),x.gc(),x.gc(),x.hc(20,"div",75),x.hc(21,"div",76),x.hc(22,"label",128),x.dd(23),x.wc(24,"translate"),x.hc(25,"span",49),x.dd(26,"(*)"),x.gc(),x.gc(),x.hc(27,"input",129),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.phone=e}),x.wc(28,"translate"),x.gc(),x.gc(),x.gc(),x.hc(29,"div",75),x.hc(30,"div",76),x.hc(31,"label",130),x.dd(32,"Email"),x.gc(),x.hc(33,"input",131),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.email=e}),x.gc(),x.gc(),x.gc(),x.hc(34,"div",75),x.hc(35,"div",76),x.hc(36,"label",132),x.dd(37),x.wc(38,"translate"),x.wc(39,"translate"),x.gc(),x.hc(40,"textarea",133),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.note_l=e}),x.wc(41,"translate"),x.gc(),x.gc(),x.gc(),x.hc(42,"div",75),x.hc(43,"div",76),x.hc(44,"label",134),x.dd(45),x.wc(46,"translate"),x.wc(47,"translate"),x.gc(),x.hc(48,"textarea",135),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.note_e=e}),x.wc(49,"translate"),x.gc(),x.gc(),x.gc(),x.hc(50,"div",75),x.hc(51,"div",76),x.hc(52,"label",98),x.dd(53),x.wc(54,"translate"),x.gc(),x.hc(55,"div",136),x.hc(56,"input",137),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2)._status=e}),x.gc(),x.cc(57,"label",98),x.gc(),x.gc(),x.gc(),x.hc(58,"div",75),x.hc(59,"div",76),x.bd(60,jn,5,3,"ng-container",38),x.bd(61,Wn,3,4,"button",138),x.bd(62,Jn,3,3,"button",139),x.gc(),x.gc(),x.hc(63,"div",82),x.hc(64,"div",76),x.hc(65,"input",140),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2)._keyword1=e})("change",function(){x.Uc(n);var e=x.vc(2);return e.loadDataContact(e.entityContact.company_id)})("keyup.enter",function(){x.Uc(n);var e=x.vc(2);return e.loadDataContact(e.entityContact.company_id)}),x.wc(66,"translate"),x.gc(),x.gc(),x.gc(),x.hc(67,"div",82),x.hc(68,"div",117),x.hc(69,"pagination",141),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).pageIndex1=e})("pageChanged",function(e){return x.Uc(n),x.vc(2).pageChanged1(e)}),x.gc(),x.hc(70,"a",30),x.dd(71),x.wc(72,"translate"),x.wc(73,"translate"),x.wc(74,"translate"),x.wc(75,"translate"),x.gc(),x.gc(),x.hc(76,"div",142),x.hc(77,"table",32),x.hc(78,"thead",33),x.hc(79,"tr"),x.hc(80,"th",35),x.dd(81),x.wc(82,"translate"),x.gc(),x.hc(83,"th",35),x.dd(84),x.wc(85,"translate"),x.gc(),x.hc(86,"th",35),x.dd(87),x.wc(88,"translate"),x.gc(),x.hc(89,"th",35),x.dd(90,"Email"),x.gc(),x.hc(91,"th",35),x.dd(92),x.wc(93,"translate"),x.gc(),x.hc(94,"th",35),x.dd(95),x.wc(96,"translate"),x.gc(),x.gc(),x.gc(),x.hc(97,"tbody"),x.bd(98,Xn,16,7,"tr",50),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.ec()}if(2&e){var a=x.vc(2);x.Nb(7),x.fd("",x.xc(8,45,"Customer name")," "),x.Nb(4),x.Dc("placeholder",x.xc(12,47,"Customer name"))("ngModel",a.entityContact.contact_name),x.Nb(5),x.ed(x.xc(17,49,"Customer code")),x.Nb(2),x.Dc("placeholder",x.xc(19,51,"Customer code"))("ngModel",a.entityContact.contact_code)("disabled",!0),x.Nb(5),x.fd("",x.xc(24,53,"Phone")," "),x.Nb(4),x.Dc("placeholder",x.xc(28,55,"Phone"))("ngModel",a.entityContact.phone),x.Nb(6),x.Dc("placeholder","abc@company.com")("ngModel",a.entityContact.email),x.Nb(4),x.gd("",x.xc(38,57,"Note")," (",x.xc(39,59,"Vietnamese"),")"),x.Nb(3),x.Ec("placeholder",x.xc(41,61,"Note")),x.Dc("ngModel",a.entityContact.note_l),x.Nb(5),x.gd("",x.xc(46,63,"Note")," (",x.xc(47,65,"English"),")"),x.Nb(3),x.Ec("placeholder",x.xc(49,67,"Note")),x.Dc("ngModel",a.entityContact.note_e),x.Nb(5),x.ed(x.xc(54,69,"Status")),x.Nb(3),x.Dc("ngModel",a._status),x.Nb(4),x.Dc("ngIf",a.isSave1),x.Nb(1),x.Dc("ngIf",!a.isSave1),x.Nb(1),x.Dc("ngIf","UPDATE"==a._flagModal1),x.Nb(3),x.Ec("placeholder",x.xc(66,71,"Search")),x.Dc("ngModel",a._keyword1),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",a.totalRow1)("ngModel",a.pageIndex1)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSize1),x.Nb(2),x.id("",x.xc(72,73,"Total of records"),": ",a.totalRow1," - ",x.xc(73,75,"Page")," ",a.pageIndex1," ",x.xc(74,77,"of")," ",a.totalPage1," ",x.xc(75,79,"page"),""),x.Nb(10),x.fd(" ",x.xc(82,81,"Customer code")," "),x.Nb(3),x.fd(" ",x.xc(85,83,"Customer name")," "),x.Nb(3),x.fd(" ",x.xc(88,85,"Phone")," "),x.Nb(5),x.fd(" ",x.xc(93,87,"Note")," "),x.Nb(3),x.fd(" ",x.xc(96,89,"Actions")," "),x.Nb(3),x.Dc("ngForOf",a._contacts)}}function ea(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"form",null,147),x.hc(3,"div",74),x.hc(4,"div",82),x.hc(5,"div",76),x.hc(6,"label",148),x.dd(7),x.wc(8,"translate"),x.hc(9,"span",49),x.dd(10,"(*)"),x.gc(),x.gc(),x.hc(11,"textarea",149),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityLinkC.code_link=e}),x.wc(12,"translate"),x.gc(),x.gc(),x.gc(),x.hc(13,"div",75),x.hc(14,"div",76),x.hc(15,"label",150),x.dd(16),x.wc(17,"translate"),x.hc(18,"span",49),x.dd(19,"(*)"),x.gc(),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"ng-select",151),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedCompany=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("cty",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(23,"translate"),x.wc(24,"translate"),x.gc(),x.gc(),x.gc(),x.hc(25,"div",75),x.hc(26,"div",76),x.hc(27,"label",150),x.dd(28),x.wc(29,"translate"),x.hc(30,"span",49),x.dd(31,"(*)"),x.gc(),x.dd(32),x.wc(33,"translate"),x.gc(),x.hc(34,"ng-select",152),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedSender=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("lh",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(35,"translate"),x.wc(36,"translate"),x.gc(),x.gc(),x.gc(),x.hc(37,"div",75),x.hc(38,"div",76),x.hc(39,"label"),x.dd(40),x.wc(41,"translate"),x.hc(42,"span",49),x.dd(43,"(*)"),x.gc(),x.dd(44),x.wc(45,"translate"),x.gc(),x.hc(46,"ng-select",153),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedCompanyKQ=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("kq",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(47,"translate"),x.wc(48,"translate"),x.gc(),x.gc(),x.gc(),x.hc(49,"div",75),x.hc(50,"div",76),x.hc(51,"label"),x.dd(52),x.wc(53,"translate"),x.hc(54,"span",49),x.dd(55,"(*)"),x.gc(),x.dd(56),x.wc(57,"translate"),x.gc(),x.hc(58,"ng-select",154),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedSenderKQ=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("lhkq",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(59,"translate"),x.wc(60,"translate"),x.gc(),x.gc(),x.gc(),x.hc(61,"div",75),x.hc(62,"div",76),x.hc(63,"label"),x.dd(64),x.wc(65,"translate"),x.hc(66,"span",49),x.dd(67,"(*)"),x.gc(),x.dd(68),x.wc(69,"translate"),x.gc(),x.hc(70,"ng-select",155),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedCompanyBill=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("bill",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(71,"translate"),x.wc(72,"translate"),x.gc(),x.gc(),x.gc(),x.hc(73,"div",75),x.hc(74,"div",76),x.hc(75,"label"),x.dd(76),x.wc(77,"translate"),x.hc(78,"span",49),x.dd(79,"(*)"),x.gc(),x.dd(80),x.wc(81,"translate"),x.gc(),x.hc(82,"ng-select",156),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedSenderBill=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("lhbill",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(83,"translate"),x.wc(84,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.ec()}if(2&e){var a=x.vc(2);x.Nb(7),x.fd("",x.xc(8,58,"Code")," "),x.Nb(4),x.Dc("placeholder",x.xc(12,60,"Code"))("ngModel",a.entityLinkC.code_link)("disabled",!0),x.Nb(5),x.fd("",x.xc(17,62,"Customer")," "),x.Nb(4),x.fd(" - ",x.xc(21,64,"Information"),""),x.Nb(2),x.Dc("items",a._getlistcompany)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCompany)("placeholder",x.xc(23,66,"Please choose"))("notFoundText",x.xc(24,68,"Not found item")),x.Nb(6),x.fd("",x.xc(29,70,"Contact")," "),x.Nb(4),x.fd(" - ",x.xc(33,72,"Sender"),""),x.Nb(2),x.Dc("items",a._getlistsender)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSender)("placeholder",x.xc(35,74,"Please choose"))("notFoundText",x.xc(36,76,"Not found item")),x.Nb(6),x.fd("",x.xc(41,78,"Customer")," "),x.Nb(4),x.fd(" - ",x.xc(45,80,"Received company"),""),x.Nb(2),x.Dc("items",a._getlistcompanyKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCompanyKQ)("placeholder",x.xc(47,82,"Please choose"))("notFoundText",x.xc(48,84,"Not found item")),x.Nb(6),x.fd("",x.xc(53,86,"Contact")," "),x.Nb(4),x.fd(" - ",x.xc(57,88,"Received company"),""),x.Nb(2),x.Dc("items",a._getlistsenderKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSenderKQ)("placeholder",x.xc(59,90,"Please choose"))("notFoundText",x.xc(60,92,"Not found item")),x.Nb(6),x.fd("",x.xc(65,94,"Customer")," "),x.Nb(4),x.fd(" - ",x.xc(69,96,"Bill company"),""),x.Nb(2),x.Dc("items",a._getlistcompanyBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCompanyBill)("placeholder",x.xc(71,98,"Please choose"))("notFoundText",x.xc(72,100,"Not found item")),x.Nb(6),x.fd("",x.xc(77,102,"Contact")," "),x.Nb(4),x.fd(" - ",x.xc(81,104,"Bill company"),""),x.Nb(2),x.Dc("items",a._getlistsenderBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSenderBill)("placeholder",x.xc(83,106,"Please choose"))("notFoundText",x.xc(84,108,"Not found item"))}}function ta(e,t){1&e&&(x.fc(0),x.hc(1,"a",106),x.cc(2,"img",107),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing"),""))}function na(e,t){if(1&e){var n=x.ic();x.hc(0,"button",159),x.rc("click",function(){x.Uc(n);var e=x.vc(3);return e.saveChangeLink(e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Save & close")," "))}function aa(e,t){if(1&e){var n=x.ic();x.hc(0,"div",102),x.hc(1,"button",157),x.rc("click",function(){return x.Uc(n),x.vc(2).closeModal()}),x.dd(2),x.wc(3,"translate"),x.gc(),x.hc(4,"button",144),x.rc("click",function(){return x.Uc(n),x.vc(2)._switchLinkList()}),x.dd(5),x.wc(6,"translate"),x.gc(),x.bd(7,ta,5,3,"ng-container",38),x.bd(8,na,3,3,"button",158),x.gc()}if(2&e){var a=x.vc(2);x.Nb(2),x.fd(" ",x.xc(3,4,"Close")," "),x.Nb(3),x.fd(" ",x.xc(6,6,"Relationship")," "),x.Nb(2),x.Dc("ngIf",a.isSave),x.Nb(1),x.Dc("ngIf",!a.isSave)}}function ca(e,t){if(1&e){var n=x.ic();x.hc(0,"div",69),x.bd(1,qn,3,3,"h4",109),x.bd(2,zn,3,4,"h4",109),x.bd(3,Gn,4,6,"h4",109),x.hc(4,"button",71),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(5,"span",72),x.dd(6,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(7,"div",73),x.bd(8,Kn,43,35,"div",110),x.bd(9,Zn,99,91,"ng-container",38),x.bd(10,ea,85,110,"ng-container",38),x.gc(),x.bd(11,aa,9,8,"div",111)}if(2&e){var a=x.vc();x.Nb(1),x.Dc("ngIf","LIST"==a._flagModal1),x.Nb(1),x.Dc("ngIf","ADD"==a._flagModal1||"UPDATE"==a._flagModal1),x.Nb(1),x.Dc("ngIf","ADDREL"==a._flagModal1||"UPDATEREL"==a._flagModal1),x.Nb(5),x.Dc("ngIf","LIST"==a._flagModal1),x.Nb(1),x.Dc("ngIf","ADD"==a._flagModal1||"UPDATE"==a._flagModal1),x.Nb(1),x.Dc("ngIf","ADDREL"==a._flagModal1||"UPDATEREL"==a._flagModal1),x.Nb(1),x.Dc("ngIf","ADDREL"==a._flagModal1||"UPDATEREL"==a._flagModal1)}}function ia(e,t){if(1&e){var n=x.ic();x.hc(0,"form",160),x.hc(1,"div",69),x.hc(2,"h4",70),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",71),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",72),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",73),x.hc(9,"div",74),x.hc(10,"div",82),x.hc(11,"div",76),x.hc(12,"label",161),x.dd(13),x.wc(14,"translate"),x.gc(),x.hc(15,"ng-select",162),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().selectedCustomer1=e})("change",function(){x.Uc(n);var e=x.vc();return e.exportList.length>0?e._copyAll(e.exportList,e.selectedCustomer1):e._copyRequest(e.selectedCustomer1)}),x.wc(16,"translate"),x.wc(17,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.gd("",x.xc(4,10,"Copy")," - ",a._titleCopy,""),x.Nb(10),x.ed(x.xc(14,12,"Company")),x.Nb(2),x.Dc("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCustomer1)("placeholder",x.xc(16,14,"Please choose"))("notFoundText",x.xc(17,16,"Not found item"))}}var oa,ra=((oa=function(){function t(e,a,c,i,o,r,l,d){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=o,this._excelService=r,this._numberFormat=l,this.modalService=d,this.isSave=!1,this._flagModal="",this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this.filter_status="",this._requestslist=[],this.entity={},this.baseFolder=u.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this._reqlist=[],this._checkAll=!1,this._dt1="",this._dt2="",this._fdate=new Date,this._tdate=new Date,this.selectedCustomer=null,this.selectedCustomerLabel=null,this.selectedCustomer1=null,this._customers=[],this._contacts=[],this._today=new Date,this.singleSelect=[],this._titleCopy="",this._idCopy="",this.exportList=[],this.isExportLoading=!1,!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.socket=g()(u.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadCompanyLinks(),this.socket.on("refreshPage",function(t){e.loadData(),e.loadCompanyLinks()})}},{key:"loadData",value:function(){var t=this;this._isLoading=!0;var n={};n.page=this.pageIndex,n.limit=this.pageSize,n.filter=this._keyword,n.status=this.filter_status,n.domain=this.user.short_code,n.user_id=this.user.id,this._dataService.post("/request/getall",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({id:o.id,request_no:o.request_no,received_date:o.received_date,returned_date:o.returned_date,company_name_l:o.company_name_l,company_name_e:o.company_name_e,receive_company_e:o.receive_company_e,receive_company_l:o.receive_company_l,contact_name:o.contact_name,short_code:o.short_code,flag:!1,number_sample:o.number_sample,is_active:o.is_active,timestamp:o.timestamp,tax_vat:o.tax_vat,total:o.total,created_by:o.created_by,ordered_samples:o.ordered_samples,note:o.note,order_no:(null==o.employee_nr?"":o.employee_nr)+o.request_no.substr(2,o.request_no.length)})}}catch(r){i.e(r)}finally{i.f()}t._requestslist=c,t.totalRow=n.rowCount,t.totalPage=n.totalPages,t._isLoading=!1})}},{key:"loadCustomers",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/customer/getallcustomersnopaging",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({name:o.name_l,code:o.id})}}catch(r){i.e(r)}finally{i.f()}t._customers=c})}},{key:"loadCompanyLinks",value:function(){var t=this,n={};n.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({name:o.code_link,code:o.id})}}catch(r){i.e(r)}finally{i.f()}t._customers=c})}},{key:"_getInfoLabelCustomer",value:function(){var e=this;this.selectedCustomerLabel=null!=this.selectedCustomer?this._customers.filter(function(t){return t.code==e.selectedCustomer})[0].name:null}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._requestslist.forEach(function(e){return t.exportList.push(e.id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!==t})}},{key:"loadContacts",value:function(t){var n=this;if(null==t)this.selectedContact=null;else{var a={};a.customer_id=t,this._dataService.post("/customer/getallcontactsnopaging",a).subscribe(function(t){console.log("Contact",t);var a,c=[],i=e(t.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({name:o.name_l,code:o.id})}}catch(r){i.e(r)}finally{i.f()}n._contacts=c})}}},{key:"changeCheckAll",value:function(t){var n=[];if(this._checkAll){var a,c=e(t);try{for(c.s();!(a=c.n()).done;){var i=a.value;n.push({id:i.id,request_no:i.request_no,received_date:i.received_date,returned_date:i.returned_date,cus_name_l:i.cus_name_l,cus_name_e:i.cus_name_e,contact_name_l:i.contact_name_l,contact_name_e:i.contact_name_e,short_code:i.short_code,flag:!0,number_sample:i.number_sample,is_active:i.is_active,timestamp:i.timestamp,tax_vat:i.tax_vat,total:i.total,created_by:i.created_by,ordered_samples:i.ordered_samples})}}catch(d){c.e(d)}finally{c.f()}}else{var o,r=e(t);try{for(r.s();!(o=r.n()).done;){var l=o.value;n.push({id:l.id,request_no:l.request_no,received_date:l.received_date,returned_date:l.returned_date,cus_name_l:l.cus_name_l,cus_name_e:l.cus_name_e,contact_name_l:l.contact_name_l,contact_name_e:l.contact_name_e,short_code:l.short_code,flag:!1,number_sample:l.number_sample,is_active:l.is_active,timestamp:l.timestamp,tax_vat:l.tax_vat,total:l.total,created_by:l.created_by,ordered_samples:l.ordered_samples})}}catch(d){r.e(d)}finally{r.f()}}this._requestslist=n}},{key:"_changeCheckOne",value:function(t){this._checkAll=!0;var n,a=[],c=e(this._requestslist);try{for(c.s();!(n=c.n()).done;){var i=n.value;a.push(i.id==t.id?{id:i.id,request_no:i.request_no,received_date:i.received_date,returned_date:i.returned_date,cus_name_l:i.cus_name_l,cus_name_e:i.cus_name_e,contact_name_l:i.contact_name_l,contact_name_e:i.contact_name_e,short_code:i.short_code,flag:t.flag,number_sample:i.number_sample,is_active:i.is_active,timestamp:i.timestamp,tax_vat:i.tax_vat}:{id:i.id,request_no:i.request_no,received_date:i.received_date,returned_date:i.returned_date,cus_name_l:i.cus_name_l,cus_name_e:i.cus_name_e,contact_name_l:i.contact_name_l,contact_name_e:i.contact_name_e,short_code:i.short_code,flag:i.flag,number_sample:i.number_sample,is_active:i.is_active,timestamp:i.timestamp,tax_vat:i.tax_vat})}}catch(o){c.e(o)}finally{c.f()}this._requestslist=a}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this._checkAll||this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this._checkAll||this.socket.emit("refresh",{})}},{key:"loadDetail",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/request/detail",n).subscribe(function(e){t.entity=e.data,console.log(e.data),null!=e.data.customer_id?(t.selectedCustomer=e.data.customer_id,t.selectedCustomerLabel=t._customers.filter(function(e){return e.code==t.selectedCustomer})[0].name):(t.selectedCustomer=null,t.selectedCustomerLabel=null),null!=e.data.received_date&&(t._dt1=s(new Date(e.data.received_date)).format("YYYY-MM-DD HH:mm"),t._fdate=new Date(e.data.received_date)),null!=e.data.returned_date&&(t._dt2=s(new Date(e.data.returned_date)).format("YYYY-MM-DD HH:mm"),t._tdate=new Date(e.data.returned_date))})}},{key:"deleteItem",value:function(e){var t=this;v.a.fire({title:"en"==this.user.lang?y.a.are_you_sure_en:y.a.are_you_sure,text:"en"==this.user.lang?e.category_name_e:e.category_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(n){if(n.value){var a={};a.id=e.id,t._dataService.post("/sample_matrix/deleteCat",a).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_DELETE_EN:y.a.MSG_DELETE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)})}})}},{key:"saveChange",value:function(e){var t=this;if(this._fdate>this._tdate||null==e||0==this.entity.number_sample||null==this._fdate||null==this._tdate)this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_DATE_EN:y.a.MSG_ERROR_DATE,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);else if(this.isSave=!0,this.entity.customer_id=e,this.entity.received_date=this._dt1,this.entity.returned_date=this._dt2,this.entity.userid=this.user.id,this.entity.ipaddress=this.user.ipaddress,"ADD"==this._flagModal){this.entity.short_code=this.user.short_code;var n=new Date;this.entity.timestamp=s(n).format("YYYY-MM-DD HH:mm:ss"),console.log(this.entity),this._dataService.post("/request/add",this.entity).subscribe(function(e){t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),t.entity={},t.entity.tax_vat=10,t.entity.number_sample=1,t.entity.is_active=0,t.entity.valid_number=5,t.selectedContact=null,t.selectedCustomer=null,t._fdate=null,t._tdate=null,t._dt1="",t._dt2="",t.isSave=!1,t.modalService.dismissAll()},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)})}else console.log("Update",this.entity),this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/request/update",this.entity).subscribe(function(e){t.isSave=!1,t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t.modalService.dismissAll()},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)})}},{key:"orgValueChange1",value:function(e){null!=e&&"Invalid date"!=e&&(this._fdate=e,this._tdate=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1=s(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=s(this._tdate).format("YYYY-MM-DD HH:mm"))}},{key:"orgValueChange2",value:function(e){null!=e&&"Invalid date"!=e&&(this._tdate=e,this._dt1=s(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=s(this._tdate).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdate-this._fdate)/864e5))}},{key:"_calculateDays",value:function(){null!=this._fdate&&(this._tdate=new Date(this._fdate.getTime()+864e5*this.entity.valid_number))}},{key:"_openModal",value:function(e,t){null==t?(this._flagModal="ADD",this.entity={},this.entity.tax_vat=10,this.entity.number_sample=1,this.entity.is_active=0,this.entity.valid_number=7,this.selectedContact=null,this.selectedCustomer=null,this._fdate=null,this._tdate=null,this._dt1="",this._dt2=""):(this._flagModal="UPDATE",this.loadDetail(t.id)),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"_routeDetail",value:function(e){this._route.navigate(["/request/detail/"+e.id])}},{key:"_exportAll",value:function(t){var n=this;console.log(t),this.isExportLoading=!0,this._dataService.post("/request/exportRequest",t).subscribe(function(t){if(t.data.length>0){var a,c=[],i=e(t.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({"Request No":o.request_no,"Customer Name":o.company_name_l,Contact:o.contact_name,"Received Date":s(new Date(o.received_date)).format("DD/MM/YYYY"),"Returned Date":s(new Date(o.returned_date)).format("DD/MM/YYYY"),"Samples Ordered":o.ordered_samples+"/"+(null==o.number_sample?"0":o.number_sample),"VAT (%)":null==o.tax_vat?"":o.tax_vat,Total:0==o.ordered_samples?"0":n._numberFormat.localeString(parseFloat(o.total)),Status:o.is_active?"Confirmed":"Cancelled","Created By":o.created_by,"Promotion Per Group":n._numberFormat.localeString(parseFloat(o.promotion_per_group)),"Promotion Per Order":n._numberFormat.localeString(parseFloat(o.promotion_per_order)),"Total before tax":n._numberFormat.localeString(parseFloat(o.before_tax)),"Total after tax":n._numberFormat.localeString(parseFloat(o.after_tax)).substr(0,n._numberFormat.localeString(parseFloat(o.after_tax)).lastIndexOf("."))})}}catch(r){i.e(r)}finally{i.f()}n._excelService.exportAsExcelFile(c,"Requests-"+s(new Date).format("YYYY-MM-DD")),n.isExportLoading=!1,n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_EXPORT_EN+" "+t.data.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.data.length+" "+y.a.record,"OK")}else n.isExportLoading=!1,n._notifyService.showWarning("en"==n.user.lang?y.a.MSG_EXPORT_EN+" 0 "+y.a.record_en:y.a.MSG_EXPORT+" 0 "+y.a.record,"en"==n.user.lang?y.a.error_title_en:y.a.error_title)},function(){n.isExportLoading=!1,n._notifyService.showError("en"==n.user.lang?y.a.MSG_EXPORTNO_EN:y.a.MSG_EXPORT_NO,"en"==n.user.lang?y.a.error_title_en:y.a.error_title)})}},{key:"openCopyModal",value:function(e,t,n){0==n?(this._titleCopy=t.request_no,this._idCopy=t.id):(this._titleCopy="en"==this.user.lang?"total of requests: ":"t\u1ed5ng s\u1ed1 y\xeau c\u1ea7u: "+t.length,this._idCopy=t),this.modalService.open(e,{size:"md",centered:!0})}},{key:"_copyRequest",value:function(e){var t=this,n={};n.id=this._idCopy,n.customer_id=e,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,this._dataService.post("/request/copy",n).subscribe(function(e){t._idCopy="",t._titleCopy="",t.selectedCustomer1=null,t.modalService.dismissAll(),t._notifyService.showSuccess("en"==t.user.lang?y.a.copy_msgok_en:y.a.copy_msgok,"OK"),t.socket.emit("refresh",{})})}},{key:"_copyAll",value:function(e,t){var n=this;console.log(e,t);var a={};a.ids=e,a.customer_id=t,a.userid=this.user.id,a.ipaddress=this.user.ipaddress,a.short_code=this.user.short_code,this._dataService.post("/request/copyAll",a).subscribe(function(e){n._idCopy="",n._titleCopy="",n.selectedCustomer1=null,n.modalService.dismissAll(),n._notifyService.showSuccess("en"==n.user.lang?y.a.copy_msgok_en:y.a.copy_msgok,"OK"),n.exportList=[],n.socket.emit("refresh",{})})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}()).\u0275fac=function(e){return new(e||oa)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(Fe.a),x.bc(C.s))},oa.\u0275cmp=x.Vb({type:oa,selectors:[["app-req-management"]],decls:112,vars:99,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[2,"width","130px"],[4,"ngIf"],["content",""],["contentRelationship",""],["contentCopy",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-copy"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","13",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-eye"],["class","btn btn-sm btn-primary mr-sm-1",3,"disabled","ngbTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"disabled","ngbTooltip","click"],[3,"ngbTooltip"],[1,"text-right"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-pencil"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"form","theme-form",3,"ngSubmit"],["f0","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","number_sample"],["type","number","id","number_sample","name","number_sample","required","","autocomplete","off","min","0",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["type","hidden","name","ID",1,"form-control",3,"ngModel","ngModelChange"],["for","tax_vat"],["type","number","id","tax_vat","name","tax_vat","required","","autocomplete","off","min","0",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],[1,"col-md-12"],["for","title_promo_spec"],["type","text","id","title_promo_spec","name","title_promo_spec","autocomplete","off",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],["for","promo_special_en"],["type","number","id","promo_special_en","name","promo_special_en","autocomplete","off","min","0",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],["for","promo_perorder"],["type","number","id","promo_perorder","name","promo_perorder","autocomplete","off","min","0",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["class","mute",4,"ngIf"],["for","received_date"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdate","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",1,"form-control",3,"type","placeholder","ngModel","disabled","min","ngModelChange","change"],["for","permission_write"],["id","permission_write","name","permission_write",1,"form-control",3,"ngModel","ngModelChange"],["for","comment"],["rows","2","id","comment","name","comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",4,"ngIf"],[1,"mute"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary"],["class","modal-title",4,"ngIf"],["class","form-group row",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"col-md-10"],["type","search","aria-label","Search","name","_keywordRel","autocomplete","off",1,"form-control","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"col-md-2"],["type","button",1,"btn","btn-primary","bt-sm",3,"click"],["class","form-inline my-2 my-lg-0",4,"ngIf"],[1,"form-inline","my-2","my-lg-0"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],["colspan","8",2,"text-align","center"],[2,"cursor","pointer",3,"click"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-trash"],["form1","ngForm"],["for","contact_name"],["type","text","id","contact_name","name","contact_name","required","","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","ngModelChange"],["for","contact_code"],["type","text","id","contact_code","name","contact_code","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","phone"],["type","text","id","phone","name","phone","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","email"],["type","text","id","email","name","email","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Descriptiona"],["rows","2","id","Descriptiona","name","Descriptiona",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Description1a"],["rows","2","id","Description1a","name","Description1a",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"checkbox","checkbox-primary"],["id","permission_write","type","checkbox","name","permission_write",3,"ngModel","ngModelChange"],["type","submit","class","btn btn-primary mr-sm-1",3,"disabled",4,"ngIf"],["type","button","class","btn btn-warning mr-sm-1",3,"click",4,"ngIf"],["type","text","autocomplete","off","name","_keyword1",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["name","mypage","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[2,"overflow-x","auto"],["type","submit",1,"btn","btn-primary","mr-sm-1",3,"disabled"],["type","button",1,"btn","btn-warning","mr-sm-1",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","click"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],["form2","ngForm"],["for","link_code"],["id","link_code","name","link_code","rows","2",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","info_company_id"],["name","selectedCompany","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSender","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","button",1,"btn","btn-secondary","mr-sm-1",3,"click"],["type","button","class","btn btn-primary mr-sm-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","mr-sm-1",3,"click"],[1,"form","theme-form"],["for","company_en"],["name","selectedCustomer1","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.bd(10,Nn,3,3,"button",8),x.bd(11,Dn,4,3,"button",9),x.bd(12,Mn,5,6,"button",10),x.bd(13,Cn,1,0,"img",11),x.gc(),x.gc(),x.hc(14,"div",12),x.hc(15,"div",13),x.hc(16,"select",14),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(17,"option",15),x.dd(18,"#10"),x.gc(),x.hc(19,"option",16),x.dd(20,"#25"),x.gc(),x.hc(21,"option",17),x.dd(22,"#50"),x.gc(),x.hc(23,"option",18),x.dd(24,"#100"),x.gc(),x.gc(),x.hc(25,"select",19),x.rc("ngModelChange",function(e){return t.filter_status=e})("change",function(){return t.loadData()}),x.hc(26,"option",20),x.dd(27),x.wc(28,"translate"),x.gc(),x.hc(29,"option",21),x.dd(30),x.wc(31,"translate"),x.gc(),x.hc(32,"option",22),x.dd(33),x.wc(34,"translate"),x.gc(),x.hc(35,"option",23),x.dd(36),x.wc(37,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(38,"div",24),x.hc(39,"div",25),x.hc(40,"div",26),x.hc(41,"div",27),x.hc(42,"pagination",28),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(43,"div",29),x.hc(44,"a",30),x.dd(45),x.wc(46,"translate"),x.wc(47,"translate"),x.wc(48,"translate"),x.wc(49,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(50,"div",25),x.hc(51,"div",31),x.hc(52,"table",32),x.hc(53,"thead",33),x.hc(54,"tr"),x.hc(55,"th",34),x.dd(56,"#"),x.gc(),x.hc(57,"th",35),x.hc(58,"input",36),x.rc("change",function(e){return t.selectAll(e)}),x.gc(),x.gc(),x.hc(59,"th",37),x.dd(60),x.wc(61,"translate"),x.gc(),x.hc(62,"th",35),x.dd(63),x.wc(64,"translate"),x.gc(),x.hc(65,"th",35),x.dd(66),x.wc(67,"translate"),x.gc(),x.hc(68,"th",35),x.dd(69),x.wc(70,"translate"),x.gc(),x.hc(71,"th",35),x.dd(72),x.wc(73,"translate"),x.gc(),x.hc(74,"th",35),x.dd(75),x.wc(76,"translate"),x.gc(),x.hc(77,"th",35),x.dd(78),x.wc(79,"translate"),x.gc(),x.hc(80,"th",35),x.dd(81),x.wc(82,"translate"),x.gc(),x.hc(83,"th",35),x.dd(84),x.wc(85,"translate"),x.gc(),x.hc(86,"th",35),x.dd(87),x.wc(88,"translate"),x.gc(),x.hc(89,"th",35),x.dd(90),x.wc(91,"translate"),x.gc(),x.gc(),x.gc(),x.hc(92,"tbody"),x.bd(93,kn,6,3,"ng-container",38),x.bd(94,An,2,1,"ng-container",38),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(95,"div",25),x.hc(96,"div",26),x.hc(97,"div",27),x.hc(98,"pagination",28),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(99,"div",29),x.hc(100,"a",30),x.dd(101),x.wc(102,"translate"),x.wc(103,"translate"),x.wc(104,"translate"),x.wc(105,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(106,Ln,113,109,"ng-template",null,39,x.cd),x.bd(108,ca,12,7,"ng-template",null,40,x.cd),x.bd(110,ia,18,18,"ng-template",null,41,x.cd)),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,51,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","report")),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")&&t.exportList.length>0),x.Nb(1),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(9),x.Dc("ngModel",t.filter_status),x.Nb(2),x.fd(" ",x.xc(28,53,"All")," "),x.Nb(3),x.fd(" ",x.xc(31,55,"Pending")," "),x.Nb(3),x.fd(" ",x.xc(34,57,"Confirmed")," "),x.Nb(3),x.fd(" ",x.xc(37,59,"Cancel")," "),x.Nb(6),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(46,61,"Total of records"),": ",t.totalRow," - ",x.xc(47,63,"Page")," ",t.pageIndex," ",x.xc(48,65,"of")," ",t.totalPage," ",x.xc(49,67,"page"),""),x.Nb(13),x.Dc("disabled",0==t._requestslist.length)("checked",t.exportList.length==t._requestslist.length),x.Nb(2),x.ed(x.xc(61,69,"Actions")),x.Nb(3),x.fd(" ",x.xc(64,71,"Request code")," "),x.Nb(3),x.fd(" ",x.xc(67,73,"Order code")," "),x.Nb(3),x.fd(" ",x.xc(70,75,"Received date")," "),x.Nb(3),x.fd(" ",x.xc(73,77,"Customer")," "),x.Nb(3),x.fd(" ",x.xc(76,79,"Report company")," "),x.Nb(3),x.fd(" ",x.xc(79,81,"Total")," "),x.Nb(3),x.ed(x.xc(82,83,"Contact")),x.Nb(3),x.ed(x.xc(85,85,"Returned date")),x.Nb(3),x.ed(x.xc(88,87,"Status")),x.Nb(3),x.ed(x.xc(91,89,"Timestamp")),x.Nb(3),x.Dc("ngIf",0==t._requestslist.length),x.Nb(1),x.Dc("ngIf",t._requestslist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(102,91,"Total of records"),": ",t.totalRow," - ",x.xc(103,93,"Page")," ",t.pageIndex," ",x.xc(104,95,"of")," ",t.totalPage," ",x.xc(105,97,"page"),""))},directives:[r.c,r.n,r.q,o.q,r.x,r.r,r.A,T.a,o.p,C.N,r.z,r.o,r.p,r.s,r.w,o.o,I.a,k.b,k.a,r.t,r.b],pipes:[P.c,o.f,o.g],styles:[""]}),oa);function la(e,t){if(1&e&&(x.hc(0,"option",44),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function da(e,t){if(1&e&&(x.hc(0,"option",44),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.csp_name_e:n.csp_name_l," ")}}function sa(e,t){if(1&e){var n=x.ic();x.hc(0,"button",45),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e._preparationlist)}),x.cc(1,"i",46),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function ha(e,t){1&e&&x.cc(0,"img",47)}function ga(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",48),x.hc(3,"h3",49),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function ua(e,t){1&e&&x.cc(0,"i",63)}function fa(e,t){1&e&&x.cc(0,"i",64)}function _a(e,t){if(1&e){var n=x.ic();x.hc(0,"button",60),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return e.flag=!e.flag}),x.wc(1,"translate"),x.bd(2,ua,1,0,"i",61),x.bd(3,fa,1,0,"i",62),x.gc()}if(2&e){var a=x.vc().$implicit,c=x.vc(2);x.Dc("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!c._authenService.hasPermission("REQ-PRE","update"))("title",x.xc(1,5,a.flag?"Edit":"Cancel")),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag)}}function ma(e,t){if(1&e){var n=x.ic();x.hc(0,"button",65),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._updateStatus(e,0)}),x.wc(1,"translate"),x.cc(2,"i",66),x.gc()}2&e&&x.Dc("title",x.xc(1,1,"Save"))}function pa(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.note_lab,"")}}function ba(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",67),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.note_lab=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","note_lab",c+1,""),x.Dc("ngModel",i.note_lab)}}function va(e,t){1&e&&(x.hc(0,"span",68),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"None")))}function ya(e,t){1&e&&(x.hc(0,"span",69),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Preparation")))}function xa(e,t){1&e&&(x.hc(0,"span",70),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Technical validation")))}function Sa(e,t){1&e&&(x.hc(0,"span",71),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Validation")))}function wa(e,t){1&e&&(x.hc(0,"span",72),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Done")))}function Na(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",51),x.dd(2),x.gc(),x.hc(3,"td"),x.bd(4,_a,4,7,"button",52),x.bd(5,ma,3,3,"button",53),x.gc(),x.hc(6,"td"),x.dd(7),x.gc(),x.hc(8,"td"),x.dd(9),x.gc(),x.hc(10,"td"),x.dd(11),x.gc(),x.hc(12,"td"),x.dd(13),x.gc(),x.hc(14,"td"),x.dd(15),x.gc(),x.hc(16,"td"),x.dd(17),x.gc(),x.hc(18,"td"),x.dd(19),x.gc(),x.hc(20,"td"),x.dd(21),x.gc(),x.hc(22,"td"),x.bd(23,pa,2,1,"ng-container",43),x.bd(24,ba,2,2,"ng-container",43),x.gc(),x.hc(25,"td",54),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2);return 1!=e.status&&3!=e.status&&4!=e.status||a._authenService.hasPermission("REQ-PRE","update")?a._updateStatus(e,1):null}),x.bd(26,va,3,3,"span",55),x.bd(27,ya,3,3,"span",56),x.bd(28,xa,3,3,"span",57),x.bd(29,Sa,3,3,"span",58),x.bd(30,wa,3,3,"span",59),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.Dc("ngIf",0==a.status),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.fd(" ",a.request_no," "),x.Nb(2),x.ed(a.inner_code),x.Nb(2),x.fd(" ",a.code," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.para_name_e:a.para_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.category_name_e:a.category_name_l," "),x.Nb(2),x.ed(a.tat),x.Nb(2),x.ed(a.note),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",0==a.status),x.Nb(1),x.Dc("ngIf",1==a.status),x.Nb(1),x.Dc("ngIf",2==a.status),x.Nb(1),x.Dc("ngIf",3==a.status),x.Nb(1),x.Dc("ngIf",4==a.status)}}function Da(e,t){if(1&e&&(x.fc(0),x.bd(1,Na,31,18,"tr",50),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._preparationlist)}}var Ma,Ca=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},ka=((Ma=function(){function t(e,a,c,i,o,r,l,d){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=o,this._excelService=r,this.formatPipe=l,this.modalService=d,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=9,this.entity={},!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.socket=g()(u.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyCSP(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var t=this,n={};n.filter=this._keyword,n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.department_id=this.department_id,n.family_id=this.testcsp_id,n.flag_status=this._status,n.page=this.pageIndex,n.limit=this.pageSize,console.log(n),this._dataService.post("/lab/getlistlabspre",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var o=a.value;c.push({code:o.code,code_father:o.code_father,company_code:o.company_code,company_name_e:o.company_name_e,company_name_l:o.company_name_l,contact_name:o.contact_name,customer_id:o.customer_id,email:o.email,employee_nr:o.employee_nr,id:o.id,is_active:o.is_active,lod:o.lod,loq:o.loq,mark:o.mark,note_asm:o.note_asm,para_name_e:o.para_name_e,para_name_l:o.para_name_l,parameter_id:o.parameter_id,phone:o.phone,received_date:o.received_date,request_no:o.request_no,result_record:o.result_record,returned_date:o.returned_date,sale_man:o.sale_man,sample_code:o.sample_code,inner_code:o.inner_code,sample_id:o.sample_id,category_id:o.category_id,sample_name:o.sample_name,specification_name_e:o.specification_name_e,specification_name_l:o.specification_name_l,unit:o.unit,userid:o.userid,flag:!1,note_lab:o.note_lab,status:o.status,note:o.note,category_name_e:o.category_name_e,category_name_l:o.category_name_l,tat:o.tat,dept_name_e:o.dept_name_e,dept_name_l:o.dept_name_l,csp_name_e:o.csp_name_e,csp_name_l:o.csp_name_l,receiver_company:o.receiver_company,receiver_contact:o.receiver_contact,biller_company:o.biller_company,biller_contact:o.biller_contact,price:o.price,quantity:o.quantity,state_of_report:o.state_of_report})}}catch(r){i.e(r)}finally{i.f()}t._preparationlist=c,t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyCSP",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",t).subscribe(function(t){e._csplist=t.data})}},{key:"_exportAll",value:function(t){console.log("Origin",t);var n,a=[],c=e(t);try{for(c.s();!(n=c.n()).done;){var i=n.value,o="";4==i.status&&(o="en"==this.user.lang?y.a.s_done_en:y.a.s_done),3==i.status&&(o="en"==this.user.lang?y.a.s_validate_en:y.a.s_validate),2==i.status&&(o="en"==this.user.lang?y.a.s_techvalidate_en:y.a.s_techvalidate),1==i.status&&(o="en"==this.user.lang?y.a.s_prepare_en:y.a.s_prepare),0==i.status&&(o="en"==this.user.lang?y.a.s_none_en:y.a.s_none);var r=new Date(i.received_date).getTime()+864e5*i.tat,l="en"==this.user.lang?i.csp_name_e:i.csp_name_l,d=i.company_name_l+(null==i.phone?"":"/Phone: "+i.phone),h="";null!=i.receiver_company&&(h=i.receiver_company.company_name_l+(null==i.receiver_company.address_l?"":"/Address: "+i.receiver_company.address_l));var g="";null!=i.biller_company&&(g=i.biller_company.company_name_l+(null==i.biller_company.tax_code?"":"/Tax code: "+i.biller_company.tax_code)+(null==i.biller_company.address_l?"":"/Address: "+i.biller_company.address_l),null!=i.biller_contact&&(g+=(null==i.biller_contact.email?"":"/Email: "+i.biller_contact.email)+(null==i.biller_contact.phone?"":"/Phone: "+i.biller_contact.phone)));var u="Unknown";0==i.state_of_report&&(u="Draft"),1==i.state_of_report&&(u="Official"),2==i.state_of_report&&(u="Evicted"),3==i.state_of_report&&(u="Printed"),4==i.state_of_report&&(u="Cancel"),a.push({"Request No":i.request_no,"Inner code":i.inner_code,Code:i.code,"Internal test":i.specification_name_l,Parameter:i.para_name_l,"Sample matrix":i.category_name_l,"Priority TAT":i.tat,Note:null==i.note?"":i.note,"Note to Lab":null==i.note_lab?"":i.note_lab,Status:o,"Received Date":s(new Date(i.received_date)).format("DD/MM/YYYY"),"Returned Date":s(new Date(r)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?i.dept_name_e:i.dept_name_l,CSP:null==l?"":l,"Sample name":i.sample_name,Sender:d,Receiver:h,Biller:g,"Customer code":i.company_code,BD:i.employee_nr,Amount:this.formatPipe.localeString(i.price*i.quantity),"State of report":u})}}catch(f){c.e(f)}finally{c.f()}this._excelService.exportAsExcelFile(a,"Preparation-"+s(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+t.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.length+" "+y.a.record,"OK")}},{key:"orgValueChange1",value:function(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=s(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=s(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=s(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e,t){var n=this;console.log(e),1==t?(e.status=t,v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_switch_en:y.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData()}):n.loadData()})):(console.log(e),this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData()}))}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)})}}]),t}()).\u0275fac=function(e){return new(e||Ma)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(Fe.a),x.bc(C.s))},Ma.\u0275cmp=x.Vb({type:Ma,selectors:[["app-req-preparelab"]],hostBindings:function(e,t){1&e&&x.rc("click",function(e){return t.ngOnInit(e)},!1,x.Sc)},decls:121,vars:120,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","12",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],[3,"ngClass","disabled","title","click",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.hc(12,"select",10),x.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),x.hc(13,"option",11),x.dd(14),x.wc(15,"translate"),x.wc(16,"translate"),x.gc(),x.bd(17,la,2,2,"option",12),x.gc(),x.hc(18,"select",13),x.rc("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),x.hc(19,"option",11),x.dd(20),x.wc(21,"translate"),x.gc(),x.bd(22,da,2,2,"option",12),x.gc(),x.hc(23,"select",14),x.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.hc(24,"option",15),x.dd(25),x.wc(26,"translate"),x.gc(),x.hc(27,"option",16),x.dd(28),x.wc(29,"translate"),x.gc(),x.hc(30,"option",17),x.dd(31),x.wc(32,"translate"),x.gc(),x.hc(33,"option",18),x.dd(34),x.wc(35,"translate"),x.gc(),x.hc(36,"option",19),x.dd(37),x.wc(38,"translate"),x.gc(),x.hc(39,"option",20),x.dd(40),x.wc(41,"translate"),x.gc(),x.gc(),x.bd(42,sa,4,3,"button",21),x.bd(43,ha,1,0,"img",22),x.gc(),x.gc(),x.hc(44,"div",23),x.hc(45,"div",24),x.hc(46,"select",25),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(47,"option",26),x.dd(48,"#10"),x.gc(),x.hc(49,"option",27),x.dd(50,"#25"),x.gc(),x.hc(51,"option",28),x.dd(52,"#50"),x.gc(),x.hc(53,"option",29),x.dd(54,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(55,"div",30),x.hc(56,"div",31),x.hc(57,"div",32),x.hc(58,"div",33),x.hc(59,"pagination",34),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(60,"div",35),x.hc(61,"a",36),x.dd(62),x.wc(63,"translate"),x.wc(64,"translate"),x.wc(65,"translate"),x.wc(66,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(67,"div",31),x.hc(68,"div",37),x.hc(69,"table",38),x.hc(70,"thead",39),x.hc(71,"tr"),x.hc(72,"th",40),x.dd(73,"#"),x.gc(),x.hc(74,"th",41),x.dd(75),x.wc(76,"translate"),x.gc(),x.hc(77,"th",42),x.dd(78),x.wc(79,"translate"),x.gc(),x.hc(80,"th",42),x.dd(81),x.wc(82,"translate"),x.gc(),x.hc(83,"th",42),x.dd(84),x.wc(85,"translate"),x.gc(),x.hc(86,"th",42),x.dd(87),x.wc(88,"translate"),x.gc(),x.hc(89,"th",42),x.dd(90),x.wc(91,"translate"),x.gc(),x.hc(92,"th",42),x.dd(93),x.wc(94,"translate"),x.gc(),x.hc(95,"th",42),x.dd(96),x.wc(97,"translate"),x.gc(),x.hc(98,"th",42),x.dd(99),x.wc(100,"translate"),x.gc(),x.hc(101,"th",42),x.dd(102),x.wc(103,"translate"),x.gc(),x.hc(104,"th",42),x.dd(105),x.wc(106,"translate"),x.gc(),x.gc(),x.gc(),x.hc(107,"tbody"),x.bd(108,ga,6,3,"ng-container",43),x.bd(109,Da,2,1,"ng-container",43),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(110,"div",31),x.hc(111,"div",32),x.hc(112,"div",33),x.hc(113,"pagination",34),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(114,"div",35),x.hc(115,"a",36),x.dd(116),x.wc(117,"translate"),x.wc(118,"translate"),x.wc(119,"translate"),x.wc(120,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,60,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(118,Ca)),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(119,Ca)),x.Nb(1),x.Dc("ngModel",t.department_id),x.Nb(2),x.gd(" ",x.xc(15,62,"All")," ",x.xc(16,64,"Department")," "),x.Nb(3),x.Dc("ngForOf",t._deptlist),x.Nb(1),x.Dc("ngModel",t.testcsp_id),x.Nb(2),x.fd("",x.xc(21,66,"All")," CSP"),x.Nb(2),x.Dc("ngForOf",t._csplist),x.Nb(1),x.Dc("ngModel",t._status),x.Nb(2),x.fd(" ",x.xc(26,68,"All")," "),x.Nb(3),x.fd(" ",x.xc(29,70,"None")," "),x.Nb(3),x.fd(" ",x.xc(32,72,"Preparation")," "),x.Nb(3),x.fd(" ",x.xc(35,74,"Technical validation")," "),x.Nb(3),x.fd(" ",x.xc(38,76,"Validation")," "),x.Nb(3),x.fd(" ",x.xc(41,78,"Done")," "),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-PRE","report")),x.Nb(1),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(63,80,"Total of records"),": ",t.totalRow," - ",x.xc(64,82,"Page")," ",t.pageIndex," ",x.xc(65,84,"of")," ",t.totalPage," ",x.xc(66,86,"page"),""),x.Nb(13),x.ed(x.xc(76,88,"Actions")),x.Nb(3),x.fd(" ",x.xc(79,90,"Request code")," "),x.Nb(3),x.fd(" ",x.xc(82,92,"Inner code")," "),x.Nb(3),x.fd(" ",x.xc(85,94,"Code")," "),x.Nb(3),x.ed(x.xc(88,96,"Internal testing")),x.Nb(3),x.ed(x.xc(91,98,"Parameter name")),x.Nb(3),x.ed(x.xc(94,100,"Sample matrix")),x.Nb(3),x.ed(x.xc(97,102,"Priority")),x.Nb(3),x.ed(x.xc(100,104,"Note")),x.Nb(3),x.ed(x.xc(103,106,"Note lab")),x.Nb(3),x.ed(x.xc(106,108,"Status")),x.Nb(3),x.Dc("ngIf",0==t._preparationlist.length),x.Nb(1),x.Dc("ngIf",t._preparationlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(117,110,"Total of records"),": ",t.totalRow," - ",x.xc(118,112,"Page")," ",t.pageIndex," ",x.xc(119,114,"of")," ",t.totalPage," ",x.xc(120,116,"page"),""))},directives:[r.c,r.n,r.q,k.b,k.a,r.x,r.r,r.A,o.p,o.q,T.a,o.o],pipes:[P.c],styles:[""]}),Ma),Ta=["tagInput"];function Ia(e,t){if(1&e){var n=x.ic();x.hc(0,"button",37),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(88);return e._openModal(t,null)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Add new request")," "))}function Pa(e,t){if(1&e){var n=x.ic();x.hc(0,"button",38),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e.exportList)}),x.cc(1,"i",39),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function Ra(e,t){1&e&&x.cc(0,"img",40)}function Ea(e,t){if(1&e){var n=x.ic();x.hc(0,"div",41),x.hc(1,"div",42),x.hc(2,"pagination",43),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().pageIndex=e})("pageChanged",function(e){return x.Uc(n),x.vc().pageChanged(e)}),x.gc(),x.gc(),x.hc(3,"div",44),x.hc(4,"a",45),x.dd(5),x.wc(6,"translate"),x.wc(7,"translate"),x.wc(8,"translate"),x.wc(9,"translate"),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(2),x.Dc("boundaryLinks",!0)("totalItems",a.totalRow)("ngModel",a.pageIndex)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSize),x.Nb(3),x.id("",x.xc(6,12,"Total of records"),": ",a.totalRow," - ",x.xc(7,14,"Page")," ",a.pageIndex," ",x.xc(8,16,"of")," ",a.totalPage," ",x.xc(9,18,"page"),"")}}function Aa(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",46),x.hc(3,"h4"),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.ed(x.xc(5,1,"No records now!!!")))}function Oa(e,t){1&e&&(x.hc(0,"span"),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cash")))}function Ya(e,t){1&e&&(x.hc(0,"span"),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Transfer bank")))}function Ua(e,t){1&e&&(x.hc(0,"span"),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Visa/Master")))}function Fa(e,t){1&e&&(x.hc(0,"span"),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cheque")))}function La(e,t){1&e&&(x.hc(0,"span",59),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Unpaid")))}function qa(e,t){1&e&&(x.hc(0,"span",60),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Delivery-Unpaid")))}function za(e,t){1&e&&(x.hc(0,"span",61),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Delivery-Paid")))}function Ga(e,t){1&e&&(x.hc(0,"span",62),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cancel-Unpaid")))}function Va(e,t){1&e&&(x.hc(0,"span",63),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cancel-Refund")))}function Ba(e,t){if(1&e&&(x.hc(0,"span",69),x.dd(1),x.gc()),2&e){var n=t.$implicit;x.Nb(1),x.ed(n)}}function Ha(e,t){if(1&e&&(x.hc(0,"tr"),x.hc(1,"td",66),x.dd(2),x.gc(),x.hc(3,"td",66),x.dd(4),x.gc(),x.hc(5,"td",66),x.dd(6),x.gc(),x.hc(7,"td",66),x.dd(8),x.gc(),x.hc(9,"td",66),x.dd(10),x.gc(),x.hc(11,"td",66),x.bd(12,Ba,2,1,"span",67),x.gc(),x.hc(13,"td",66),x.dd(14),x.gc(),x.hc(15,"td",68),x.dd(16),x.wc(17,"number"),x.gc(),x.hc(18,"td",68),x.dd(19),x.wc(20,"number"),x.gc(),x.gc()),2&e){var n=t.$implicit,a=t.index,c=x.vc(4);x.Nb(2),x.ed(a+1),x.Nb(2),x.fd(" ","en"==c.user.lang?n.fabric_name_e:n.fabric_name_l," "),x.Nb(2),x.fd(" ",n.color_name_l," "),x.Nb(2),x.ed(n.code),x.Nb(2),x.fd(" ",n.quantity_info," "),x.Nb(2),x.Dc("ngForOf",n.tags),x.Nb(2),x.fd(" ",n.total," "),x.Nb(2),x.fd(" ",x.xc(17,9,n.price)," "),x.Nb(3),x.fd(" ",x.xc(20,11,n.amount)," ")}}function Qa(e,t){if(1&e&&(x.hc(0,"tr"),x.hc(1,"td",64),x.hc(2,"strong"),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"div",28),x.hc(6,"table",65),x.hc(7,"thead"),x.hc(8,"th",66),x.dd(9,"#"),x.gc(),x.hc(10,"th",66),x.dd(11),x.wc(12,"translate"),x.gc(),x.hc(13,"th",66),x.dd(14),x.wc(15,"translate"),x.gc(),x.hc(16,"th",66),x.dd(17),x.wc(18,"translate"),x.gc(),x.hc(19,"th",66),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"th",66),x.dd(23),x.wc(24,"translate"),x.gc(),x.hc(25,"th",66),x.dd(26),x.wc(27,"translate"),x.gc(),x.hc(28,"th",66),x.dd(29),x.wc(30,"translate"),x.gc(),x.hc(31,"th",66),x.dd(32),x.wc(33,"translate"),x.gc(),x.gc(),x.hc(34,"tbody"),x.bd(35,Ha,21,13,"tr",47),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()),2&e){var n=x.vc().$implicit;x.Nb(3),x.ed(x.xc(4,10,"Items Information")),x.Nb(8),x.fd(" ",x.xc(12,12,"Type of fabric")," "),x.Nb(3),x.fd(" ",x.xc(15,14,"Color name")," "),x.Nb(3),x.fd(" ",x.xc(18,16,"Mix-Fabric code")," "),x.Nb(3),x.fd(" ",x.xc(21,18,"Quantity")," "),x.Nb(3),x.fd(" ",x.xc(24,20,"Description")," "),x.Nb(3),x.fd(" ",x.xc(27,22,"Total")," (kg) "),x.Nb(3),x.fd(" ",x.xc(30,24,"Price")," "),x.Nb(3),x.fd(" ",x.xc(33,26,"Amount")," "),x.Nb(3),x.Dc("ngForOf",n.orders)}}function $a(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"tr"),x.hc(2,"td"),x.dd(3),x.gc(),x.hc(4,"td"),x.hc(5,"input",48),x.rc("change",function(e){x.Uc(n);var a=t.$implicit;return x.vc(2).selectItem(e,a.id)}),x.gc(),x.gc(),x.hc(6,"td"),x.dd(7),x.wc(8,"date"),x.gc(),x.hc(9,"td",49),x.rc("click",function(){var e=t.$implicit;return e.expanded=!e.expanded}),x.dd(10),x.gc(),x.hc(11,"td"),x.dd(12),x.gc(),x.hc(13,"td"),x.dd(14),x.gc(),x.hc(15,"td"),x.dd(16),x.wc(17,"number"),x.gc(),x.hc(18,"td"),x.bd(19,Oa,3,3,"span",35),x.bd(20,Ya,3,3,"span",35),x.bd(21,Ua,3,3,"span",35),x.bd(22,Fa,3,3,"span",35),x.gc(),x.hc(23,"td"),x.bd(24,La,3,3,"span",50),x.bd(25,qa,3,3,"span",51),x.bd(26,za,3,3,"span",52),x.bd(27,Ga,3,3,"span",53),x.bd(28,Va,3,3,"span",54),x.gc(),x.hc(29,"td"),x.dd(30),x.gc(),x.hc(31,"td"),x.hc(32,"button",55),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2),c=x.Rc(88);return a._openModal(c,e)}),x.wc(33,"translate"),x.cc(34,"i",56),x.gc(),x.hc(35,"button",57),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(2).printQuotationAsPDF(e)}),x.wc(36,"translate"),x.cc(37,"i",58),x.gc(),x.gc(),x.gc(),x.bd(38,Qa,36,28,"tr",35),x.ec()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(3),x.ed(c+1+i.pageSize*(i.pageIndex-1)),x.Nb(2),x.Fc("name","ckU1",c+1,""),x.Dc("checked",i.exportList.includes(a.id)),x.Nb(2),x.ed(x.yc(8,21,a.issue_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.fd(" ",a.code," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.company_name_e:a.company_name_l," "),x.Nb(2),x.ed(a.phone),x.Nb(2),x.ed(x.xc(17,24,a.total)),x.Nb(3),x.Dc("ngIf",0==a.payment),x.Nb(1),x.Dc("ngIf",1==a.payment),x.Nb(1),x.Dc("ngIf",2==a.payment),x.Nb(1),x.Dc("ngIf",3==a.payment),x.Nb(2),x.Dc("ngIf",0==a.is_active),x.Nb(1),x.Dc("ngIf",1==a.is_active),x.Nb(1),x.Dc("ngIf",2==a.is_active),x.Nb(1),x.Dc("ngIf",3==a.is_active),x.Nb(1),x.Dc("ngIf",4==a.is_active),x.Nb(2),x.ed(a.username),x.Nb(2),x.Dc("ngbTooltip",x.xc(33,26,"Edit")),x.Nb(3),x.Dc("ngbTooltip",x.xc(36,28,"Print")),x.Nb(3),x.Dc("ngIf",a.expanded)}}function Ka(e,t){if(1&e&&(x.fc(0),x.bd(1,$a,39,30,"ng-container",47),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._categories)}}function ja(e,t){if(1&e){var n=x.ic();x.hc(0,"div",41),x.hc(1,"div",42),x.hc(2,"pagination",43),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().pageIndex=e})("pageChanged",function(e){return x.Uc(n),x.vc().pageChanged(e)}),x.gc(),x.gc(),x.hc(3,"div",44),x.hc(4,"a",45),x.dd(5),x.wc(6,"translate"),x.wc(7,"translate"),x.wc(8,"translate"),x.wc(9,"translate"),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(2),x.Dc("boundaryLinks",!0)("totalItems",a.totalRow)("ngModel",a.pageIndex)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSize),x.Nb(3),x.id("",x.xc(6,12,"Total of records"),": ",a.totalRow," - ",x.xc(7,14,"Page")," ",a.pageIndex," ",x.xc(8,16,"of")," ",a.totalPage," ",x.xc(9,18,"page"),"")}}function Wa(e,t){if(1&e){var n=x.ic();x.hc(0,"ng-select",100),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entity.customer_id=e})("change",function(){x.Uc(n);var e=x.vc(2);return e.loadLabel(e.entity.customer_id)}),x.wc(1,"translate"),x.wc(2,"translate"),x.gc()}if(2&e){var a=x.vc(2);x.Dc("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("bindLabel","en"==a.user.lang?"company_name_e":"company_name_l")("ngModel",a.entity.customer_id)("placeholder",x.xc(1,8,"Please choose"))("notFoundText",x.xc(2,10,"Not found item"))}}var Ja=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function Xa(e,t){if(1&e){var n=x.ic();x.hc(0,"input",101),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2)._fdate=e})("bsValueChange",function(e){return x.Uc(n),x.vc(2).orgValueChange(e)}),x.wc(1,"translate"),x.gc()}if(2&e){var a=x.vc(2);x.Dc("placeholder",x.xc(1,3,"Issue of date"))("ngModel",a._fdate)("bsConfig",x.Hc(5,Ja))}}function Za(e,t){if(1&e){var n=x.ic();x.hc(0,"input",102),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2)._dt1=e}),x.gc()}if(2&e){var a=x.vc(2);x.Dc("ngModel",a._dt1)}}function ec(e,t){if(1&e){var n=x.ic();x.hc(0,"div",77),x.hc(1,"div",84),x.hc(2,"label",103),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"select",104),x.rc("change",function(){x.Uc(n);var e=x.vc(2);return 2!=e.entity.is_active?null:e._confirmFinalOrder()})("ngModelChange",function(e){return x.Uc(n),x.vc(2).entity.is_active=e}),x.hc(6,"option",20),x.dd(7),x.wc(8,"translate"),x.gc(),x.hc(9,"option",21),x.dd(10),x.wc(11,"translate"),x.gc(),x.hc(12,"option",22),x.dd(13),x.wc(14,"translate"),x.gc(),x.hc(15,"option",23),x.dd(16),x.wc(17,"translate"),x.gc(),x.hc(18,"option",24),x.dd(19),x.wc(20,"translate"),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc(2);x.Nb(3),x.ed(x.xc(4,8,"Status")),x.Nb(2),x.Dc("disabled",2==a.entity.is_active)("ngModel",a.entity.is_active),x.Nb(2),x.ed(x.xc(8,10,"Unpaid")),x.Nb(3),x.ed(x.xc(11,12,"Delivery-Unpaid")),x.Nb(3),x.ed(x.xc(14,14,"Delivery-Paid")),x.Nb(3),x.ed(x.xc(17,16,"Cancel-Unpaid")),x.Nb(3),x.ed(x.xc(20,18,"Cancel-Refund"))}}function tc(e,t){if(1&e){var n=x.ic();x.hc(0,"div",79),x.hc(1,"label",105),x.dd(2),x.wc(3,"translate"),x.gc(),x.hc(4,"ng-select",106),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectId=e})("change",function(){x.Uc(n);var e=x.vc(2);return e.addItem(e.selectId)}),x.wc(5,"translate"),x.wc(6,"translate"),x.gc(),x.gc()}if(2&e){var a=x.vc(2);x.Nb(2),x.ed(x.xc(3,8,"Items")),x.Nb(2),x.Dc("items",a._fabrics)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectId)("placeholder",x.xc(5,10,"Please choose"))("notFoundText",x.xc(6,12,"Not found item"))}}function nc(e,t){1&e&&(x.hc(0,"th",66),x.cc(1,"i",107),x.gc())}function ac(e,t){if(1&e){var n=x.ic();x.hc(0,"td",66),x.hc(1,"a",114),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2).removeItem(e.mixfabric_id)}),x.cc(2,"i",107),x.gc(),x.gc()}}function cc(e,t){if(1&e){var n=x.ic();x.hc(0,"input",115),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.quantity_info=e})("change",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2).updateItem(e)}),x.gc()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Fc("id","ck",c+1,""),x.Fc("name","ck",c+1,""),x.Dc("ngModel",i.quantity_info)}}function ic(e,t){if(1&e&&(x.hc(0,"span"),x.dd(1),x.gc()),2&e){var n=x.vc().$implicit;x.Nb(1),x.ed(n.quantity_info)}}function oc(e,t){if(1&e){var n=x.ic();x.hc(0,"input",116),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.tag=e})("keyup.enter",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._addTag(e)})("change",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._addTag(e)}),x.gc()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Fc("id","tag",c+1,""),x.Fc("name","tag",c+1,""),x.Dc("ngModel",i.tag)}}function rc(e,t){if(1&e){var n=x.ic();x.hc(0,"span",117),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc().$implicit,c=x.vc(2);return 0==c.entity.is_active?c._removeTag(a,e):null}),x.dd(1),x.gc()}if(2&e){var a=t.$implicit;x.Nb(1),x.ed(a)}}function lc(e,t){if(1&e){var n=x.ic();x.hc(0,"input",118),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.price=e})("change",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2).updateItem(e)}),x.gc()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Fc("id","p",c+1,""),x.Fc("name","p",c+1,""),x.Dc("ngModel",i.price)}}function dc(e,t){if(1&e&&(x.hc(0,"span"),x.dd(1),x.wc(2,"number"),x.gc()),2&e){var n=x.vc().$implicit;x.Nb(1),x.ed(x.xc(2,1,n.price))}}function sc(e,t){if(1&e&&(x.hc(0,"tr"),x.bd(1,ac,3,0,"td",96),x.hc(2,"td",66),x.dd(3),x.gc(),x.hc(4,"td",66),x.dd(5),x.gc(),x.hc(6,"td",66),x.dd(7),x.gc(),x.hc(8,"td",66),x.dd(9),x.gc(),x.hc(10,"td",66),x.bd(11,cc,1,3,"input",108),x.bd(12,ic,2,1,"span",35),x.gc(),x.hc(13,"td",66),x.bd(14,oc,1,3,"input",109),x.dd(15," ("),x.hc(16,"span",82),x.dd(17),x.gc(),x.dd(18,") "),x.hc(19,"small",110),x.bd(20,rc,2,1,"span",111),x.gc(),x.gc(),x.hc(21,"td",112),x.dd(22),x.wc(23,"number"),x.gc(),x.hc(24,"td",68),x.bd(25,lc,1,3,"input",113),x.bd(26,dc,3,3,"span",35),x.gc(),x.hc(27,"td",68),x.dd(28),x.wc(29,"number"),x.gc(),x.gc()),2&e){var n=t.$implicit,a=t.index,c=x.vc(2);x.Nb(1),x.Dc("ngIf",0==c.entity.is_active),x.Nb(2),x.ed(a+1),x.Nb(2),x.fd(" ",n.fabric_name," "),x.Nb(2),x.ed(n.color_name_l),x.Nb(2),x.ed(n.code),x.Nb(2),x.Dc("ngIf",0==c.entity.is_active),x.Nb(1),x.Dc("ngIf",0!=c.entity.is_active),x.Nb(2),x.Dc("ngIf",0==c.entity.is_active),x.Nb(3),x.ed(n.count),x.Nb(3),x.Dc("ngForOf",n.tags),x.Nb(2),x.fd(" ",x.xc(23,14,n.total)," "),x.Nb(3),x.Dc("ngIf",0==c.entity.is_active),x.Nb(1),x.Dc("ngIf",0!=c.entity.is_active),x.Nb(2),x.fd(" ",x.xc(29,16,n.amount)," ")}}function hc(e,t){1&e&&(x.fc(0),x.hc(1,"a",119),x.cc(2,"img",120),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing")," "))}function gc(e,t){if(1&e){var n=x.ic();x.hc(0,"button",121),x.rc("click",function(){x.Uc(n);var e=x.vc(2);return e.printQuotationAsPDF(e.entity)}),x.wc(1,"translate"),x.cc(2,"i",58),x.dd(3),x.wc(4,"translate"),x.gc()}2&e&&(x.Dc("ngbTooltip",x.xc(1,2,"Print")),x.Nb(3),x.fd(" ",x.xc(4,4,"Print")," "))}function uc(e,t){if(1&e&&(x.hc(0,"button",122),x.dd(1),x.wc(2,"translate"),x.gc()),2&e){x.vc();var n=x.Rc(1);x.Dc("disabled",!n.valid),x.Nb(1),x.fd(" ",x.xc(2,2,"Save")," ")}}function fc(e,t){if(1&e){var n=x.ic();x.hc(0,"form",70,71),x.rc("ngSubmit",function(){return x.Uc(n),x.vc().saveChange()}),x.hc(2,"div",72),x.hc(3,"h4",73),x.dd(4),x.wc(5,"translate"),x.wc(6,"translate"),x.wc(7,"translate"),x.gc(),x.hc(8,"button",74),x.rc("click",function(){return t.$implicit.dismiss("Cross click")}),x.hc(9,"span",75),x.dd(10,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(11,"div",76),x.hc(12,"div",1),x.hc(13,"div",77),x.hc(14,"div",78),x.hc(15,"div",79),x.hc(16,"label",80),x.hc(17,"strong"),x.dd(18),x.wc(19,"translate"),x.gc(),x.gc(),x.gc(),x.hc(20,"div",79),x.hc(21,"label",81),x.dd(22),x.wc(23,"translate"),x.hc(24,"span",82),x.dd(25,"(*)"),x.gc(),x.gc(),x.bd(26,Wa,3,12,"ng-select",83),x.gc(),x.hc(27,"div",77),x.hc(28,"div",84),x.hc(29,"label",85),x.dd(30),x.wc(31,"translate"),x.hc(32,"span",82),x.dd(33,"(*)"),x.gc(),x.gc(),x.bd(34,Xa,2,6,"input",86),x.bd(35,Za,1,1,"input",87),x.gc(),x.gc(),x.hc(36,"div",77),x.hc(37,"div",84),x.hc(38,"label",88),x.dd(39),x.wc(40,"translate"),x.gc(),x.hc(41,"select",89),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.payment=e}),x.hc(42,"option",90),x.dd(43),x.wc(44,"translate"),x.gc(),x.hc(45,"option",20),x.dd(46),x.wc(47,"translate"),x.gc(),x.hc(48,"option",21),x.dd(49),x.wc(50,"translate"),x.gc(),x.hc(51,"option",22),x.dd(52),x.wc(53,"translate"),x.gc(),x.hc(54,"option",23),x.dd(55),x.wc(56,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(57,ec,21,20,"div",91),x.hc(58,"div",79),x.hc(59,"div",84),x.hc(60,"label",92),x.dd(61),x.wc(62,"translate"),x.gc(),x.dd(63,"\xa0 "),x.hc(64,"span",93),x.hc(65,"strong"),x.dd(66),x.wc(67,"number"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(68,"div",77),x.hc(69,"div",78),x.hc(70,"div",79),x.hc(71,"label",80),x.hc(72,"strong"),x.dd(73),x.wc(74,"translate"),x.gc(),x.gc(),x.gc(),x.bd(75,tc,7,14,"div",94),x.hc(76,"div",95),x.hc(77,"div",28),x.hc(78,"table",65),x.hc(79,"thead"),x.bd(80,nc,2,0,"th",96),x.hc(81,"th",66),x.dd(82,"#"),x.gc(),x.hc(83,"th",66),x.dd(84),x.wc(85,"translate"),x.gc(),x.hc(86,"th",66),x.dd(87),x.wc(88,"translate"),x.gc(),x.hc(89,"th",66),x.dd(90),x.wc(91,"translate"),x.gc(),x.hc(92,"th",66),x.dd(93),x.wc(94,"translate"),x.gc(),x.hc(95,"th",66),x.dd(96),x.wc(97,"translate"),x.gc(),x.hc(98,"th",66),x.dd(99),x.wc(100,"translate"),x.gc(),x.hc(101,"th",66),x.dd(102),x.wc(103,"translate"),x.gc(),x.hc(104,"th",66),x.dd(105),x.wc(106,"translate"),x.gc(),x.gc(),x.hc(107,"tbody"),x.bd(108,sc,30,18,"tr",47),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(109,"div",97),x.bd(110,hc,5,3,"ng-container",35),x.bd(111,gc,5,6,"button",98),x.bd(112,uc,3,4,"button",99),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(4),x.gd(" ","ADD"==a._flagModal?x.xc(5,34,"Add new"):x.xc(6,36,"Update")," #",x.xc(7,38,a.entity.code)," "),x.Nb(14),x.ed(x.xc(19,40,"General Information")),x.Nb(4),x.fd("",x.xc(23,42,"Customer")," "),x.Nb(4),x.Dc("ngIf",0==a.entity.is_active),x.Nb(4),x.fd("",x.xc(31,44,"Issue of date")," "),x.Nb(4),x.Dc("ngIf",0==a.entity.is_active),x.Nb(1),x.Dc("ngIf",0!=a.entity.is_active),x.Nb(4),x.ed(x.xc(40,46,"Payment method")),x.Nb(2),x.Dc("ngModel",a.entity.payment)("disabled",0!=a.entity.is_active),x.Nb(2),x.fd(" ",x.xc(44,48,"Please choose")," "),x.Nb(3),x.ed(x.xc(47,50,"Cash")),x.Nb(3),x.ed(x.xc(50,52,"Transfer bank")),x.Nb(3),x.ed(x.xc(53,54,"Visa/Mater")),x.Nb(3),x.ed(x.xc(56,56,"Cheque")),x.Nb(2),x.Dc("ngIf","ADD"!=a._flagModal),x.Nb(4),x.ed(x.xc(62,58,"Total")),x.Nb(5),x.fd("",x.xc(67,60,a.entity.total)," VND"),x.Nb(7),x.ed(x.xc(74,62,"Items Information")),x.Nb(2),x.Dc("ngIf",0==a.entity.is_active),x.Nb(5),x.Dc("ngIf",0==a.entity.is_active),x.Nb(4),x.fd(" ",x.xc(85,64,"Type of fabric")," "),x.Nb(3),x.fd(" ",x.xc(88,66,"Color name")," "),x.Nb(3),x.fd(" ",x.xc(91,68,"Mix-Fabric code")," "),x.Nb(3),x.ed(x.xc(94,70,"Quantity")),x.Nb(3),x.fd(" ",x.xc(97,72,"Description")," "),x.Nb(3),x.fd(" ",x.xc(100,74,"Total")," (kg) "),x.Nb(3),x.ed(x.xc(103,76,"Price")),x.Nb(3),x.ed(x.xc(106,78,"Amount")),x.Nb(3),x.Dc("ngForOf",a._orders),x.Nb(2),x.Dc("ngIf",a.isSave),x.Nb(1),x.Dc("ngIf",null!=a.entity.id),x.Nb(1),x.Dc("ngIf",!a.isSave&&2!=a.entity.is_active)}}_.a.vfs=p.a.pdfMake.vfs;var _c,mc,pc,bc=[{path:"",children:[{path:"list",component:ra,data:{title:"Request Management",breadcrumb:"Request Management"}},{path:"detail/:id",component:wn,data:{title:"Request detail",breadcrumb:"Request detail"}},{path:"lab-preparation",component:ka,data:{title:"Lab preparation",breadcrumb:"Lab preparation"}},{path:"lab-result",component:ut,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"lab-validation",component:Ut,data:{title:"Lab validation",breadcrumb:"Lab validation"}},{path:"lab-report-validation",component:De,data:{title:"Lab Report Validation",breadcrumb:"Lab Report Validation"}},{path:"lab-report-validation/:id",component:De,data:{title:"Validation"}},{path:"lab-report",component:Ue,data:{title:"Lab report",breadcrumb:"Lab report"}},{path:"lab-results/:id",component:ee,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"orders-fabric",component:(_c=function(){function t(e,a,c,i,o,r,l,d,s){n(this,t),this._authService=e,this.modalService=a,this._dataService=c,this._route=i,this._notifyService=o,this._uploadService=r,this._excelService=l,this.formatPipe=d,this._utilityServce=s,this.isSave=!1,this.isSaveSub=!1,this.isImport=!1,this._flagModal="ADD",this._flagSubModal="",this._title="",this._subTitle="",this.baseFolder=u.a.BASE_API+"/",this._categories=[],this.exportList=[],this.entity={},this.entitySub={},this.formData=new FormData,this.pageIndex=1,this.pageSize=10,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._customers=[],this._fdate=null,this._dt1=null,this._fabrics=[],this._fabricsCompare=[],this._orders=[],this.selectId=null,this.tags=["html","Angular"],this._numTags=0,!1!==e.checkAccess("FAB-ORDER")&&!1!==e.hasPermission("FAB-ORDER","read")||this._route.navigate(["/error/404"]),this.socket=g()(u.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",function(t){e.loadData(),e.loadCompany(),e.loadProducts()})}},{key:"loadData",value:function(){var t=this,n={};n.page=this.pageIndex,n.limit=this.pageSize,n.filter=this._keyword,this._dataService.post("/order/getall",n).subscribe(function(n){console.log("Test",n),t._categories=n.data;var a,c=e(t._categories);try{for(c.s();!(a=c.n()).done;){var i,o=a.value,r=[],l=e(o.orders);try{for(l.s();!(i=l.n()).done;){var d=i.value;r.push({amount:d.amount,code:d.code,color_id:d.color_id,color_name_e:d.color_name_e,color_name_l:d.color_name_l,description:d.description,is_active:d.is_active,mixfabric_id:d.mixfabric_id,name_e:d.name_e,name_l:d.name_l,order_id:d.order_id,price:d.price,provider_name_e:d.provider_name_e,provider_name_l:d.provider_name_l,quantity_info:d.quantity_info,total:d.total,type_id:d.type_id,tags:JSON.parse(d.description)})}}catch(s){l.e(s)}finally{l.f()}o.orders=r}}catch(s){c.e(s)}finally{c.f()}console.log(t._categories),t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"loadProducts",value:function(){var t=this;this._dataService.post("/mix-fabric/getallnp",null).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var o=a.value,r="Type: "+(0==o.type_id?"Neck":1==o.type_id?"Hand":"Fabric");"en"!=t.user.lang&&(r="Lo\u1ea1i: "+(0==o.type_id?"Bo c\u1ed5":1==o.type_id?"Bo tay":"V\u1ea3i")),c.push({id:o.id,name:o.code+"-"+r+("en"==t.user.lang?"-Quantity (segment/kg):":"-S\u1ed1 l\u01b0\u1ee3ng (c\xe2y/kg):")+o.total_segment_re+"/"+o.total_kg_re})}}catch(l){i.e(l)}finally{i.f()}t._fabrics=c,t._fabricsCompare=n.data})}},{key:"loadCompany",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",t).subscribe(function(t){e._customers=t.data})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._categories.forEach(function(e){return t.exportList.push(e.id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!==t})}},{key:"loadLabel",value:function(e){var t=this._customers.filter(function(t){return t.id==e});this._flagSubModal=null==e?"":t[0].code_link}},{key:"_openModal",value:function(t,n){if(this.loadCompany(),this.loadProducts(),null==n)this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.code=null,this.entity.payment=null,this.entity.total=0,this._orders=[],this._fdate=null,this._dt1=null,this.entity.is_active=0,this._flagSubModal="";else{this._flagModal="UPDATE",this._flagSubModal="en"==this.user.lang?n.company_name_e:n.company_name_l,this.entity=n,this._fdate=new Date(n.issue_date),this._dt1=s(new Date(n.issue_date)).format("DD-MM-YYYY HH:mm"),this._orders=n.orders,console.log("Order",this._orders);var a,c=e(this._orders);try{for(c.s();!(a=c.n()).done;){var i=a.value;i.fabric_name="en"==this.user.lang?i.name_e:i.name_l,i.tag=null,i.tags=null==i.description?[]:JSON.parse(i.description),i.total_count=Math.ceil(i.quantity_info);var o,r=0,l=e(i.tags);try{for(l.s();!(o=l.n()).done;)r+=o.value.split("-").length}catch(d){l.e(d)}finally{l.f()}i.count=r}}catch(d){c.e(d)}finally{c.f()}}this.modalService.open(t,{size:"xl",centered:!0})}},{key:"saveChange",value:function(){var t=this,n={};(n=this.entity).orders=this._orders,n.issue_date=this._dt1,n.created_by=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code;var a,c=!1,i=e(this._orders);try{for(i.s();!(a=i.n()).done;){var o=a.value;console.log("QT",o.total_count),o.total_count>o.count&&(c=!0)}}catch(r){i.e(r)}finally{i.f()}c?this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_ORDER_EN:y.a.MSG_ERROR_ORDER,"en"==this.user.lang?y.a.error_title_en:y.a.error_title):(console.log("save",n),"ADD"==this._flagModal?this._dataService.post("/order/add",n).subscribe(function(e){t.socket.emit("refresh",{}),"failed"!=e.result?(t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),t.modalService.dismissAll()):t._notifyService.showError("en"==t.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)}):this._dataService.post("/order/update",n).subscribe(function(e){console.log(e),t.socket.emit("refresh",{}),"failed"!=e.result?(t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t.modalService.dismissAll()):t._notifyService.showError("en"==t.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)}))}},{key:"orgValueChange",value:function(e){null!=e&&"Invalid date"!=e?(this._fdate=e,this._dt1=s(this._fdate).format("YYYY-MM-DD HH:mm")):(this._fdate=null,this._dt1=null)}},{key:"addItem",value:function(t){var n=this;if(null!=t){var a={};a.id=t,this._dataService.post("/mix-fabric/detail",a).subscribe(function(t){var a;a={mixfabric_id:t.data.id,color_name_l:t.data.color_name_l,color_name_e:t.data.color_name_e,code:t.data.code,fabric_name:"en"==n.user.lang?t.data.cat_name_e:t.data.cat_name_l,price:0,quantity_info:1,amount:0,is_active:!0,tag:null,tags:null==t.data.description||null==t.data.description?[]:JSON.parse(t.data.description),total:0,type_id:t.data.type_id,count:0,total_count:Math.ceil(1)},n._orders.length>0&&n._orders.filter(function(e){return e.mixfabric_id==t.data.id}).length>0?(n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].quantity_info+=1,0==t.data.type_id||1==t.data.type_id?n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].quantity_info>t.data.qty_kg_after&&(n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].quantity_info=t.data.qty_kg_after):n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].quantity_info>t.data.quantity_tree&&(n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].quantity_info=t.data.quantity_tree),n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].amount=n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].total*n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].price):n._orders.push(a),n.selectId=null;var c,i=0,o=e(n._orders);try{for(o.s();!(c=o.n()).done;){var r=c.value;i+=parseInt(r.amount)}}catch(h){o.e(h)}finally{o.f()}n.entity.total=i;var l,d=e(n._orders);try{for(d.s();!(l=d.n()).done;){var s=l.value;s.total_count=Math.ceil(s.quantity_info)}}catch(h){d.e(h)}finally{d.f()}})}}},{key:"removeItem",value:function(t){var n=this._orders.findIndex(function(e){return e.mixfabric_id==t});n>-1&&this._orders.splice(n,1);var a,c=0,i=e(this._orders);try{for(i.s();!(a=i.n()).done;){var o=a.value;c+=parseInt(o.amount),o.total_count=Math.ceil(o.quantity_info)}}catch(r){i.e(r)}finally{i.f()}this.entity.total=c,this.socket.emit("refresh",{})}},{key:"updateItem",value:function(t){var n=this._fabricsCompare.filter(function(e){return e.id==t.mixfabric_id});0==n[0].type_id||1==n[0].type_id?parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info)>parseFloat(n[0].qty_kg_after)&&(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info=parseFloat(n[0].qty_kg_after)):parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info)>parseFloat(n[0].quantity_tree)&&(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info=parseFloat(n[0].quantity_tree)),this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].amount=parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].total)*parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].price);var a,c=0,i=e(this._orders);try{for(i.s();!(a=i.n()).done;){var o=a.value;c+=parseFloat(o.amount),o.total_count=Math.ceil(o.quantity_info)}}catch(r){i.e(r)}finally{i.f()}this.entity.total=c,this.socket.emit("refresh",{})}},{key:"_confirmFinalOrder",value:function(){var e=this;v.a.fire({title:"en"==this.user.lang?y.a.are_you_sure_en:y.a.are_you_sure,text:"en"==this.user.lang?y.a.MSG_CONFIRM_ORDER_EN:y.a.MSG_CONFIRM_ORDER,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value&&e.saveChange()})}},{key:"_addTag",value:function(t){console.log(t);var n=this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0];if(n.total_count<n.count+t.tag.split("-").length)console.log("Overload");else{if(0==n.tags.length){var a,c="",i=0,o=e(t.tag.split("-"));try{for(o.s();!(a=o.n()).done;){var r=a.value;this._utilityServce.isNumber(r)&&(c+=r+"-",i+=parseFloat(r))}}catch(w){o.e(w)}finally{o.f()}n.tags.push(c.substr(0,c.length-1)),n.total=i,n.amount=i*parseFloat(n.price)}else{n.tags.push(t.tag);var l,d=0,s=e(n.tags);try{for(s.s();!(l=s.n()).done;){var h,g=l.value,u="",f=e(g.split("-"));try{for(f.s();!(h=f.n()).done;){var _=h.value;this._utilityServce.isNumber(_)&&(u+=_+"-",d+=parseFloat(_))}}catch(w){f.e(w)}finally{f.f()}g=u.substr(0,u.length-1)}}catch(w){s.e(w)}finally{s.f()}n.total=d,n.amount=d*parseFloat(n.price)}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tag=null,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tags=n.tags;var m,p=0,b=e(n.tags);try{for(b.s();!(m=b.n()).done;)p+=m.value.split("-").length}catch(w){b.e(w)}finally{b.f()}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].count=p;var v,y=0,x=e(this._orders);try{for(x.s();!(v=x.n()).done;){var S=v.value;y+=parseFloat(S.amount)}}catch(w){x.e(w)}finally{x.f()}this.entity.total=y}}},{key:"_removeTag",value:function(t,n){var a=this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0];a.tags.findIndex(function(e){return e==n})>-1&&a.tags.splice(a.tags.findIndex(function(e){return e==n}),1),this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tag=null,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tags=a.tags;var c,i=0,o=e(a.tags);try{for(o.s();!(c=o.n()).done;){var r,l=c.value,d="",s=e(l.split("-"));try{for(s.s();!(r=s.n()).done;){var h=r.value;this._utilityServce.isNumber(h)&&(d+=h+"-",i+=parseFloat(h))}}catch(v){s.e(v)}finally{s.f()}l=d.substr(0,d.length-1)}}catch(v){o.e(v)}finally{o.f()}a.total=i,a.amount=i*parseFloat(a.price);var g,u=0,f=e(this._orders);try{for(f.s();!(g=f.n()).done;){var _=g.value;u+=parseFloat(_.amount)}}catch(v){f.e(v)}finally{f.f()}this.entity.total=u;var m,p=0,b=e(a.tags);try{for(b.s();!(m=b.n()).done;)p+=m.value.split("-").length}catch(v){b.e(v)}finally{b.f()}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].count=p}},{key:"printQuotationAsPDF",value:function(t){return Object(d.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,c,i,o,r,l,d,h,g,u,f,m,p,b,v,y;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=s(new Date).format("YYYYMMDD"),console.log("KQ In",t),(c=[]).push({text:"\n"}),c.push({alignment:"justify",columns:[{text:["T\xean kh\xe1ch h\xe0ng: ",{text:t.company_name_l,bold:!0},"\n","\u0110\u1ecba ch\u1ec9: ",{text:null==t.address_l?"":t.address_l,bold:!0},"\n","Ng\u01b0\u1eddi li\xean h\u1ec7: ",{text:null==t.contact_name?"":t.contact_name,bold:!0},"\n","\u0110i\u1ec7n tho\u1ea1i: ",{text:null==t.phone?"":t.phone,bold:!0},"\n","Email: ",{text:null==t.email?"":t.email,bold:!0}],style:"body_top"},{qr:t.code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),c.push({text:"\n"}),c.push({text:"\n"}),c.push({table:{headerRows:1,widths:[25,"*",90,90,40,180,55,50,70],body:[[{border:[!0,!0,!0,!0],text:{text:"STT",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Lo\u1ea1i v\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe0u",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe3 m\u1ec5",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"S\u1ed1 c\xe2y",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Di\u1ec5n gi\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"T\u1ed5ng (kg)",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"\u0110\u01a1n gi\xe1",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Th\xe0nh ti\u1ec1n",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}}),i=1,o=[],r=e(t.orders);try{for(r.s();!(l=r.n()).done;){d=l.value,h="",g=null==d.description?[]:JSON.parse(d.description),u=e(g);try{for(u.s();!(f=u.n()).done;){m=f.value,p=e(m.split("-"));try{for(p.s();!(b=p.n()).done;)v=b.value,h+=v+" - "}catch(x){p.e(x)}finally{p.f()}}}catch(x){u.e(x)}finally{u.f()}o.push({STT:i,LoaiVai:d.name_l,Mau:d.color_name_l,Code:d.code.toUpperCase(),SoCay:d.quantity_info,DienGiai:""==h?"":h.substr(0,h.length-3),Tong:d.total,Price:this.formatPipe.localeString(d.price),Amount:this.formatPipe.localeString(d.amount)}),i+=1}}catch(x){r.e(x)}finally{r.f()}c.push(this.tablePrintQuotation(o,["STT","LoaiVai","Mau","Code","SoCay","DienGiai","Tong","Price","Amount"],[25,"*",90,90,40,180,55,50,70],!0)),c.push({text:"\n"}),c.push({columns:[{width:"*",text:"Ch\u1eef k\xfd kh\xe1ch h\xe0ng",fontSize:10},{width:"200",text:"Ng\xe0y l\u1eadp "+s(new Date(t.issue_date)).format("DD/MM/YYYY HH:mm a"),alignment:"center",fontSize:10}]}),y={pageSize:"A4",pageMargins:[25,30,25,70],defaultStyle:{fontSize:12,columnGap:20},pageOrientation:"landscape",content:[{text:"TH\xd4NG TIN \u0110\u01a0N H\xc0NG",style:"title_top"},{text:"\n"},c],footer:function(e,t,n){return{table:{widths:[160,"*"],body:[[{border:[!1,!0,!1,!1],text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],text:"",alignment:"right",style:"body_footer"}],[{width:160,text:"",alignment:"left"},{width:150,alignment:"right",text:"Trang "+e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}},header:function(e,t,n){return{table:{widths:[160,"*"],body:[[{width:160,height:30,text:"C\u1eeda h\xe0ng v\u1ea3i VA",alignment:"left"},{width:150,height:30,alignment:"right",text:""}],[{width:160,border:[!1,!0,!1,!1],text:"",alignment:"left"},{width:150,border:[!1,!0,!1,!1],alignment:"right",text:""}]]},layout:{defaultBorder:!1}}},styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}}},("'print-'"+a+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),_.a.createPdf(y).open();case 11:case"end":return n.stop()}},n,this)}))}},{key:"tablePrintQuotation",value:function(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,a)}}}},{key:"buildTableBodyPrintQuotation",value:function(e,t,n){var a=[],c=0;return e.forEach(function(e){var i=[],o=1;t.forEach(function(t){i.push({text:{text:e[t],noWrap:!1},alignment:2==o||3==o?"left":8==o||9==o?"right":"center",fontSize:10,italics:2==o&&n[c]}),o+=1,c+=1}),a.push(i)}),a}},{key:"_convertBase64ImageFromURL",value:function(e){return new Promise(function(t,n){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=function(e){n(e)},a.src=e})}}]),t}(),_c.\u0275fac=function(e){return new(e||_c)(x.bc(S.a),x.bc(C.s),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(Fe.a),x.bc(Ft.a))},_c.\u0275cmp=x.Vb({type:_c,selectors:[["app-fab-orders"]],viewQuery:function(e,t){var n;1&e&&x.jd(Ta,1),2&e&&x.Qc(n=x.sc())&&(t.tagInputRef=n.first)},decls:89,vars:60,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],["class","form-inline",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"table-primary"],[2,"width","2px","text-align","center"],[2,"width","10px","text-align","center"],["type","checkbox","name","checkAll",3,"disabled","checked","change"],["scope","col"],[4,"ngIf"],["orderModal",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],["colspan","11",1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["type","checkbox",3,"name","checked","change"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-light",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],[1,"btn","btn-sm","btn-info","mr-sm-1",3,"ngbTooltip","click"],[1,"fa","fa-print"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"badge","badge-light"],["colspan","11",1,"text-truncate"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate"],["class","badge badge-primary","style","cursor: pointer",4,"ngFor","ngForOf"],[1,"text-truncate","text-right"],[1,"badge","badge-primary",2,"cursor","pointer"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-6"],[1,"form-group","row"],[1,"col-12"],[1,"text-primary"],["for","Company"],[1,"text-danger"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change",4,"ngIf"],[1,"form-group"],["for","issue_date"],["type","text","class","form-control","bsDatepicker","","name","_fdate","autocomplete","off","required","",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange",4,"ngIf"],["type","text","class","form-control","style","background-color: rgb(235, 235, 235)","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],["for","payment"],["name","payment",1,"form-control",3,"ngModel","disabled","ngModelChange"],["value","null"],["class","col-6",4,"ngIf"],["for","total"],[1,"title","text-danger"],["class","col-12",4,"ngIf"],[1,"col-md-12"],["class","text-truncate",4,"ngIf"],[1,"modal-footer"],["class","btn btn-info mr-sm-1",3,"ngbTooltip","click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["type","text","disabled","",1,"form-control",2,"background-color","rgb(235, 235, 235)",3,"ngModel","ngModelChange"],["for","status"],["id","status","name","status",1,"form-control",3,"disabled","ngModel","change","ngModelChange"],["for","Items"],["name","Items","bindValue","id","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],[1,"fa","fa-trash"],["type","text","min","1","class","form-control form-control-sm","style","width: 80px","autocomplete","off","mask","separator.2","thousandSeparator",",",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["type","text","class","form-control form-control-sm","style","width: 80px",3,"id","name","ngModel","ngModelChange","keyup.enter","change",4,"ngIf"],[1,"mute"],["class","badge badge-primary","style","cursor: pointer",3,"click",4,"ngFor","ngForOf"],[1,"text-truncate","text-center"],["type","text","mask","separator.2","thousandSeparator",",","class","form-control form-control-sm","style","width: 100px",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["href","javascript:;",1,"text-primary",3,"click"],["type","text","min","1","autocomplete","off","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","80px",3,"id","name","ngModel","ngModelChange","change"],["type","text",1,"form-control","form-control-sm",2,"width","80px",3,"id","name","ngModel","ngModelChange","keyup.enter","change"],[1,"badge","badge-primary",2,"cursor","pointer",3,"click"],["type","text","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","100px",3,"id","name","ngModel","ngModelChange","change"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],[1,"btn","btn-info","mr-sm-1",3,"ngbTooltip","click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.bd(10,Ia,3,3,"button",8),x.bd(11,Pa,4,3,"button",9),x.bd(12,Ra,1,0,"img",10),x.gc(),x.gc(),x.hc(13,"div",11),x.hc(14,"div",12),x.hc(15,"select",13),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(16,"option",14),x.dd(17,"#10"),x.gc(),x.hc(18,"option",15),x.dd(19,"#25"),x.gc(),x.hc(20,"option",16),x.dd(21,"#50"),x.gc(),x.hc(22,"option",17),x.dd(23,"#100"),x.gc(),x.gc(),x.hc(24,"select",18),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()}),x.hc(25,"option",19),x.dd(26),x.wc(27,"translate"),x.gc(),x.hc(28,"option",20),x.dd(29),x.wc(30,"translate"),x.gc(),x.hc(31,"option",21),x.dd(32),x.wc(33,"translate"),x.gc(),x.hc(34,"option",22),x.dd(35),x.wc(36,"translate"),x.gc(),x.hc(37,"option",23),x.dd(38),x.wc(39,"translate"),x.gc(),x.hc(40,"option",24),x.dd(41),x.wc(42,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(43,"div",25),x.hc(44,"div",26),x.bd(45,Ea,10,20,"div",27),x.gc(),x.hc(46,"div",26),x.hc(47,"div",28),x.hc(48,"table",29),x.hc(49,"thead",30),x.hc(50,"tr"),x.hc(51,"th",31),x.dd(52,"#"),x.gc(),x.hc(53,"th",32),x.hc(54,"input",33),x.rc("change",function(e){return t.selectAll(e)}),x.gc(),x.gc(),x.hc(55,"th",34),x.dd(56),x.wc(57,"translate"),x.gc(),x.hc(58,"th",34),x.dd(59),x.wc(60,"translate"),x.gc(),x.hc(61,"th",34),x.dd(62),x.wc(63,"translate"),x.gc(),x.hc(64,"th",34),x.dd(65),x.wc(66,"translate"),x.gc(),x.hc(67,"th",34),x.dd(68),x.wc(69,"translate"),x.gc(),x.hc(70,"th",34),x.dd(71),x.wc(72,"translate"),x.gc(),x.hc(73,"th",34),x.dd(74),x.wc(75,"translate"),x.gc(),x.hc(76,"th",34),x.dd(77),x.wc(78,"translate"),x.gc(),x.hc(79,"th",34),x.dd(80),x.wc(81,"translate"),x.gc(),x.gc(),x.gc(),x.hc(82,"tbody"),x.bd(83,Aa,6,3,"ng-container",35),x.bd(84,Ka,2,1,"ng-container",35),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(85,"div",26),x.bd(86,ja,10,20,"div",27),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(87,fc,113,80,"ng-template",null,36,x.cd)),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,28,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngIf",t._authService.hasPermission("FAB-ORDER","create")),x.Nb(1),x.Dc("ngIf",t._authService.hasPermission("FAB-ORDER","report")),x.Nb(1),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(9),x.Dc("ngModel",t._keyword),x.Nb(2),x.fd(" ",x.xc(27,30,"All")," "),x.Nb(3),x.fd(" ",x.xc(30,32,"Unpaid")," "),x.Nb(3),x.fd(" ",x.xc(33,34,"Delivery-Unpaid")," "),x.Nb(3),x.fd(" ",x.xc(36,36,"Delivery-Paid")," "),x.Nb(3),x.fd(" ",x.xc(39,38,"Cancel-Unpaid")," "),x.Nb(3),x.fd(" ",x.xc(42,40,"Cancel-Refund")," "),x.Nb(4),x.Dc("ngIf",t._categories.length>0),x.Nb(9),x.Dc("disabled",0==t._categories.length)("checked",t.exportList.length==t._categories.length),x.Nb(2),x.fd(" ",x.xc(57,42,"Issue of date")," "),x.Nb(3),x.fd(" ",x.xc(60,44,"Order code")," "),x.Nb(3),x.fd(" ",x.xc(63,46,"Customers")," "),x.Nb(3),x.fd(" ",x.xc(66,48,"Phone")," "),x.Nb(3),x.fd(" ",x.xc(69,50,"Total")," "),x.Nb(3),x.fd(" ",x.xc(72,52,"Payment method")," "),x.Nb(3),x.ed(x.xc(75,54,"Status")),x.Nb(3),x.ed(x.xc(78,56,"Created by")),x.Nb(3),x.ed(x.xc(81,58,"Actions")),x.Nb(3),x.Dc("ngIf",0==t._categories.length),x.Nb(1),x.Dc("ngIf",t._categories.length>0),x.Nb(2),x.Dc("ngIf",t._categories.length>0))},directives:[r.c,r.n,r.q,o.q,r.x,r.r,r.A,T.a,o.p,C.N,r.z,r.o,r.p,I.a,r.w,k.b,k.a,Lt.a],pipes:[P.c,o.f,o.g],styles:[""]}),_c),data:{title:"Orders",breadcrumb:"Orders"}}]}],vc=((mc=function e(){n(this,e)}).\u0275mod=x.Zb({type:mc}),mc.\u0275inj=x.Yb({factory:function(e){return new(e||mc)},imports:[[l.h.forChild(bc)],l.h]}),mc),yc=i("oOf3"),xc=i("LPYB"),Sc=i("dZIy"),wc=i("+Cnu"),Nc=i("K3ix"),Dc=i("44PX"),Mc=i("g9iH"),Cc=i("arFO"),kc=i("5gP/"),Tc=((pc=function e(){n(this,e)}).\u0275mod=x.Zb({type:pc}),pc.\u0275inj=x.Yb({factory:function(e){return new(e||pc)},providers:[S.a,w.a,P.d,D.a,Ft.a,Fe.a,kc.a],imports:[[o.c,r.k,vc,yc.a,xc.b,Sc.a,k.c.forRoot(),T.b.forRoot(),wc.a.forRoot(),Nc.a.forRoot(),P.b,Dc.a.forRoot(),C.u,Mc.b,Cc.a,I.b,Lt.b.forRoot()]]}),pc)}}])}();