(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{REEf:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var c=i("fXoL");let a=(()=>{class e{transform(e){return this.localeString(e)}missingOneDecimalCheck(e){const t=(e+="").split(",")[1];return!(!t||1!==t.length)}missingAllDecimalsCheck(e){return!(e+="").split(",")[1]}missingOneDecimalCheck1(e){const t=(e+="").split(".")[1];return!(!t||1!==t.length)}missingAllDecimalsCheck1(e){return!(e+="").split(".")[1]}localeString(e){if(""===e)return"";let t,i,c,a,s,n;for(t=(e+="").split(","),i=t[0],c=t.length>1?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(i);)i=i.replace(a,"$1,$2");if(-1!==i.indexOf("."))s=i.slice(i.lastIndexOf(".")).replace(/\,/g,""),n=i.split("."),t=n[0]+s;else{if(t=i+c,this.missingOneDecimalCheck(t))return t+"0";if(this.missingAllDecimalsCheck(t))return t+""}return t}localeStringEn(e){if(""===e)return"";let t,i,c,a,s,n;for(t=(e+="").split(","),i=t[0],c=t.length>1?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(i);)i=i.replace(a,"$1,$2");if(-1!==i.indexOf("."))s=i.slice(i.lastIndexOf(".")).replace(/\,/g,""),n=i.split("."),t=n[0]+s;else{if(t=i+c,this.missingOneDecimalCheck(t))return t+"0";if(this.missingAllDecimalsCheck(t))return t+".00"}return t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.ac({name:"numberFormat",type:e,pure:!0}),e})()},fRIO:function(e,t,i){"use strict";i.r(t),i.d(t,"TasksModule",function(){return Qe});var c=i("ofXK"),a=i("VToC"),s=i("25+x"),n=i("cplz"),l=i("7dP1"),r=i("bmg4"),o=i("44PX"),d=i("K3ix"),h=i("+Cnu"),g=i("Lm2G"),u=i("hzby"),f=i("dZIy"),b=i("LPYB"),p=i("oOf3"),m=i("3Pt+"),_=i("tyNb"),v=i("WuMH"),S=i("gFX4"),y=i.n(S),w=i("CMKA"),D=i("piOG"),N=i("PSD3"),E=i.n(N),x=i("fXoL"),k=i("3t6R"),M=i("REEf"),R=i("1kSV"),C=i("qeeY"),I=i("jhN1"),U=i("eLGb"),O=i("ZOsW"),T=i("sYmb");function A(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",69),x.ec()),2&e){const e=x.vc();x.Nb(1),x.Ec("alt",e.user.name)}}function G(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",70),x.ec()),2&e){const e=x.vc();x.Nb(1),x.Ec("alt",e.user.name),x.Dc("src",e.baseFolder+"/"+e.user.avatar,x.Wc)}}function P(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",72),x.ec()),2&e){const e=x.vc().$implicit,t=x.vc();x.Nb(1),x.Ec("alt",e.name),x.Dc("src",t.baseFolder+"/"+e.avatar,x.Wc)("ngbTooltip",e.name)}}function F(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",73),x.ec()),2&e){const e=x.vc().$implicit;x.Nb(1),x.Ec("alt",e.name),x.Dc("ngbTooltip",e.name)}}function $(e,t){if(1&e&&(x.hc(0,"li",71),x.bd(1,P,2,3,"ng-container",10),x.bd(2,F,2,2,"ng-container",10),x.gc()),2&e){const e=t.$implicit;x.Nb(1),x.Dc("ngIf",null!=e.avatar),x.Nb(1),x.Dc("ngIf",null==e.avatar)}}function j(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",72),x.ec()),2&e){const e=x.vc().$implicit,t=x.vc(2);x.Nb(1),x.Ec("alt",e.name),x.Dc("src",t.baseFolder+"/"+e.avatar,x.Wc)("ngbTooltip",e.name)}}function L(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",73),x.ec()),2&e){const e=x.vc().$implicit;x.Nb(1),x.Ec("alt",e.name),x.Dc("ngbTooltip",e.name)}}function z(e,t){if(1&e&&(x.hc(0,"li",71),x.bd(1,j,2,3,"ng-container",10),x.bd(2,L,2,2,"ng-container",10),x.gc()),2&e){const e=t.$implicit;x.Nb(1),x.Dc("ngIf",null!=e.avatar),x.Nb(1),x.Dc("ngIf",null==e.avatar)}}function q(e,t){if(1&e&&(x.fc(0),x.hc(1,"p"),x.dd(2),x.wc(3,"translate"),x.gc(),x.hc(4,"div",13),x.hc(5,"ul"),x.bd(6,z,3,2,"li",14),x.gc(),x.gc(),x.ec()),2&e){const e=x.vc();x.Nb(2),x.fd("",x.xc(3,2,"Followers"),":"),x.Nb(4),x.Dc("ngForOf",e.ccList)}}function B(e,t){if(1&e){const e=x.ic();x.hc(0,"a",74),x.rc("click",function(){x.Uc(e);const t=x.vc();return t.closeTask(t.entity)}),x.cc(1,"i",75),x.dd(2),x.wc(3,"translate"),x.wc(4,"translate"),x.gc()}2&e&&(x.Nb(2),x.gd(" ",x.xc(3,2,"Close")," ",x.xc(4,4,"Task")," "))}function H(e,t){if(1&e){const e=x.ic();x.hc(0,"li",21),x.rc("click",function(){return x.Uc(e),x.vc()._createNew()}),x.hc(1,"a",22),x.hc(2,"span",23),x.cc(3,"i",30),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc()}2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"Create new"),""))}function K(e,t){if(1&e){const e=x.ic();x.hc(0,"li",26),x.rc("click",function(){x.Uc(e);const t=x.vc();return t.getUserEmail(t.type="trash")}),x.hc(1,"a",27),x.hc(2,"span",23),x.cc(3,"i",76),x.dd(4),x.wc(5,"translate"),x.gc(),x.hc(6,"span",25),x.dd(7),x.gc(),x.gc(),x.gc()}if(2&e){const e=x.vc();x.Nb(4),x.fd(" ",x.xc(5,2,"Trash"),""),x.Nb(3),x.fd("(",e.getUserEmail("trash").length,")")}}function V(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",81),x.ec()),2&e){const e=x.vc().$implicit,t=x.vc();x.Nb(1),x.Ec("alt",e.name),x.Dc("src",t.baseFolder+"/"+e.avatar,x.Wc)}}function Y(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",82),x.ec()),2&e){const e=x.vc().$implicit;x.Nb(1),x.Ec("alt",e.name)}}function W(e,t){1&e&&x.cc(0,"img",83)}function J(e,t){if(1&e){const e=x.ic();x.fc(0),x.dd(1," | "),x.hc(2,"a",84),x.rc("click",function(){x.Uc(e);const t=x.vc().$implicit;return x.vc()._editComposer(t)}),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()}2&e&&(x.Nb(3),x.ed(x.xc(4,1,"Edit")))}function X(e,t){if(1&e){const e=x.ic();x.hc(0,"a",27),x.hc(1,"div",8),x.hc(2,"div",77),x.rc("click",function(){x.Uc(e);const i=t.$implicit;return x.vc().selectedUserEmail(i)}),x.bd(3,V,2,2,"ng-container",10),x.bd(4,Y,2,1,"ng-container",10),x.gc(),x.hc(5,"div",31),x.hc(6,"h6"),x.hc(7,"span",26),x.rc("click",function(){x.Uc(e);const i=t.$implicit;return x.vc().selectedUserEmail(i)}),x.dd(8),x.gc(),x.hc(9,"small",26),x.rc("click",function(){x.Uc(e);const i=t.$implicit;return x.vc().selectedUserEmail(i)}),x.dd(10,"("),x.hc(11,"span",78),x.dd(12),x.wc(13,"date"),x.gc(),x.dd(14,") "),x.bd(15,W,1,0,"img",79),x.bd(16,J,5,3,"ng-container",10),x.gc(),x.gc(),x.hc(17,"p"),x.hc(18,"span",80),x.rc("click",function(){x.Uc(e);const i=t.$implicit;return x.vc().selectedUserEmail(i)}),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){const e=t.$implicit,i=x.vc();x.Nb(3),x.Dc("ngIf",null!=e.avatar),x.Nb(1),x.Dc("ngIf",null==e.avatar),x.Nb(1),x.Dc("ngClass",2==e.type?"media-body jignore":"media-body"),x.Nb(3),x.fd("",e.title," "),x.Nb(4),x.ed(x.yc(13,8,e.timestamp,"dd/MM/yyyy HH:mm")),x.Nb(3),x.Dc("ngIf",e.is_active),x.Nb(1),x.Dc("ngIf",!e.is_active&&i.user.id==e.created_by),x.Nb(2),x.Dc("innerHtml",e.content,x.Vc)}}function Z(e,t){1&e&&(x.fc(0),x.hc(1,"div",85),x.hc(2,"div",86),x.cc(3,"img",87),x.hc(4,"p",49),x.dd(5),x.wc(6,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(5),x.ed(x.xc(6,1,"Not found items")))}function Q(e,t){1&e&&(x.fc(0),x.dd(1),x.wc(2,"translate"),x.ec()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Send")))}function ee(e,t){1&e&&(x.fc(0),x.dd(1),x.wc(2,"translate"),x.ec()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Loading")))}function te(e,t){if(1&e){const e=x.ic();x.hc(0,"div",55),x.hc(1,"label",88),x.dd(2),x.wc(3,"translate"),x.gc(),x.hc(4,"ng-select",89),x.rc("ngModelChange",function(t){return x.Uc(e),x.vc().follow_users=t}),x.wc(5,"translate"),x.wc(6,"translate"),x.gc(),x.gc()}if(2&e){const e=x.vc();x.Nb(2),x.ed(x.xc(3,9,"Followers")),x.Nb(2),x.Dc("items",e._users)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",e.follow_users)("placeholder",x.xc(5,11,"Please choose"))("notFoundText",x.xc(6,13,"Not found item"))}}function ie(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",82),x.ec()),2&e){const e=x.vc(2);x.Nb(1),x.Ec("alt",null==e.selectEmail?null:e.selectEmail.name)}}function ce(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",102),x.ec()),2&e){const e=x.vc(2);x.Nb(1),x.Dc("src",e.baseFolder+"/"+(null==e.selectEmail?null:e.selectEmail.avatar),x.Wc)}}function ae(e,t){if(1&e&&(x.hc(0,"span"),x.dd(1),x.gc()),2&e){const e=t.$implicit;x.Nb(1),x.fd("",e.name,", ")}}function se(e,t){if(1&e){const e=x.ic();x.hc(0,"li",111),x.hc(1,"img",112),x.rc("click",function(){x.Uc(e);const i=t.$implicit;return x.vc(3)._downloadFileResult(i)}),x.gc(),x.gc()}}function ne(e,t){if(1&e&&(x.fc(0),x.hc(1,"div",71),x.hc(2,"h6",103),x.cc(3,"i",104),x.dd(4),x.wc(5,"translate"),x.gc(),x.hc(6,"a",105),x.cc(7,"i",106),x.dd(8),x.wc(9,"translate"),x.gc(),x.cc(10,"div",107),x.gc(),x.hc(11,"div",108),x.hc(12,"ul",109),x.bd(13,se,2,0,"li",110),x.gc(),x.gc(),x.cc(14,"hr"),x.ec()),2&e){const e=x.vc(2);x.Nb(4),x.fd(" ",x.xc(5,3,"Attachment")," "),x.Nb(4),x.ed(x.xc(9,5,"All")),x.Nb(5),x.Dc("ngForOf",null==e.selectEmail?null:e.selectEmail.urls.data)}}function le(e,t){if(1&e){const e=x.ic();x.hc(0,"li"),x.hc(1,"a",113),x.rc("click",function(){x.Uc(e);const t=x.vc(2);return t.flagReply=!t.flagReply}),x.cc(2,"i",114),x.dd(3),x.wc(4,"translate"),x.gc(),x.gc()}2&e&&(x.Nb(3),x.ed(x.xc(4,1,"Reply")))}function re(e,t){if(1&e){const e=x.ic();x.hc(0,"li"),x.hc(1,"a",113),x.rc("click",function(){x.Uc(e);const t=x.vc(2);return t.selectedmail(null,t.selectEmail)}),x.cc(2,"i",115),x.dd(3),x.wc(4,"translate"),x.gc(),x.gc()}2&e&&(x.Nb(3),x.ed(x.xc(4,1,"Complete")))}function oe(e,t){if(1&e){const e=x.ic();x.hc(0,"li"),x.hc(1,"a",113),x.rc("click",function(){x.Uc(e);const t=x.vc(2);return t.updateType(t.selectEmail,2)}),x.cc(2,"i",116),x.dd(3),x.wc(4,"translate"),x.gc(),x.gc()}2&e&&(x.Nb(3),x.ed(x.xc(4,1,"Delete")))}function de(e,t){if(1&e){const e=x.ic();x.hc(0,"li"),x.hc(1,"a",113),x.rc("click",function(){x.Uc(e);const t=x.vc(2);return t.updateType(t.selectEmail,null)}),x.cc(2,"i",117),x.dd(3),x.wc(4,"translate"),x.gc(),x.gc()}2&e&&(x.Nb(3),x.ed(x.xc(4,1,"Recall")))}function he(e,t){1&e&&x.cc(0,"i",128)}function ge(e,t){1&e&&(x.fc(0),x.dd(1),x.wc(2,"translate"),x.ec()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Processing")))}function ue(e,t){if(1&e){const e=x.ic();x.fc(0),x.cc(1,"hr"),x.hc(2,"div",2),x.hc(3,"div",118),x.hc(4,"div",55),x.hc(5,"div",119),x.hc(6,"input",120),x.rc("ngModelChange",function(t){return x.Uc(e),x.vc(2).entitySubDID.content=t}),x.wc(7,"translate"),x.gc(),x.hc(8,"div",121),x.hc(9,"span",122),x.cc(10,"i",123),x.hc(11,"input",124,125),x.rc("change",function(t){x.Uc(e);const i=x.Rc(12);return x.vc(2).fileEvent1(t,i)}),x.gc(),x.gc(),x.hc(13,"span",126),x.rc("click",function(){x.Uc(e);const t=x.vc(2);return t.isSaveComment?null:t.submitComment(t.selectEmail)}),x.bd(14,he,1,0,"i",127),x.bd(15,ge,3,3,"ng-container",10),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.ec()}if(2&e){const e=x.vc(2);x.Nb(6),x.Ec("placeholder",x.xc(7,4,"Comment")),x.Dc("ngModel",e.entitySubDID.content),x.Nb(8),x.Dc("ngIf",!e.isSaveComment),x.Nb(1),x.Dc("ngIf",e.isSaveComment)}}function fe(e,t){1&e&&x.cc(0,"hr")}function be(e,t){if(1&e){const e=x.ic();x.hc(0,"li",111),x.hc(1,"img",112),x.rc("click",function(){x.Uc(e);const i=t.$implicit;return x.vc(4)._downloadFileResult(i)}),x.gc(),x.gc()}}const pe=function(){return[]};function me(e,t){if(1&e&&(x.hc(0,"tr"),x.hc(1,"td"),x.dd(2),x.gc(),x.hc(3,"td"),x.hc(4,"div",108),x.hc(5,"ul",109),x.bd(6,be,2,0,"li",110),x.gc(),x.gc(),x.gc(),x.hc(7,"td"),x.dd(8),x.gc(),x.hc(9,"td"),x.dd(10),x.wc(11,"date"),x.gc(),x.gc()),2&e){const e=t.$implicit;x.Nb(2),x.ed(e.content),x.Nb(4),x.Dc("ngForOf",null==e.urls?x.Hc(7,pe):e.urls.data),x.Nb(2),x.ed(e.name),x.Nb(2),x.fd(" ",x.yc(11,4,e.timestamp,"dd/MM/yyyy h:mm a")," ")}}function _e(e,t){if(1&e){const e=x.ic();x.fc(0),x.bd(1,fe,1,0,"hr",10),x.hc(2,"div",2),x.hc(3,"div",118),x.hc(4,"div",129),x.hc(5,"table",130),x.hc(6,"thead"),x.hc(7,"th"),x.dd(8),x.wc(9,"translate"),x.gc(),x.hc(10,"th"),x.dd(11),x.wc(12,"translate"),x.gc(),x.hc(13,"th"),x.dd(14),x.wc(15,"translate"),x.gc(),x.hc(16,"th"),x.dd(17),x.wc(18,"translate"),x.gc(),x.gc(),x.hc(19,"tbody"),x.bd(20,me,12,8,"tr",94),x.gc(),x.gc(),x.gc(),x.hc(21,"div",131),x.hc(22,"div",132),x.hc(23,"pagination",133),x.rc("ngModelChange",function(t){return x.Uc(e),x.vc(2).pageIndex=t})("pageChanged",function(t){return x.Uc(e),x.vc(2).pageChanged(t)}),x.gc(),x.gc(),x.hc(24,"div",134),x.hc(25,"a",135),x.dd(26),x.wc(27,"translate"),x.wc(28,"translate"),x.wc(29,"translate"),x.wc(30,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.ec()}if(2&e){const e=x.vc(2);x.Nb(1),x.Dc("ngIf",!e.selectEmail.is_active),x.Nb(7),x.ed(x.xc(9,18,"Content")),x.Nb(3),x.ed(x.xc(12,20,"Attachment")),x.Nb(3),x.ed(x.xc(15,22,"Created by")),x.Nb(3),x.ed(x.xc(18,24,"CreatedDate")),x.Nb(3),x.Dc("ngForOf",e._children),x.Nb(3),x.Dc("boundaryLinks",!0)("totalItems",e.totalRow)("ngModel",e.pageIndex)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize),x.Nb(3),x.id("",x.xc(27,26,"Total of records"),": ",e.totalRow," - ",x.xc(28,28,"Page")," ",e.pageIndex," ",x.xc(29,30,"of")," ",e.totalPage," ",x.xc(30,32,"page"),"")}}const ve=function(e){return{"active show":e}};function Se(e,t){if(1&e){const e=x.ic();x.hc(0,"div",90),x.hc(1,"div",91),x.hc(2,"div",36),x.hc(3,"div",2),x.hc(4,"div",92),x.hc(5,"div",8),x.bd(6,ie,2,1,"ng-container",10),x.bd(7,ce,2,1,"ng-container",10),x.hc(8,"div",11),x.hc(9,"h6"),x.dd(10),x.hc(11,"small"),x.hc(12,"span",78),x.dd(13),x.wc(14,"date"),x.gc(),x.hc(15,"span",78),x.dd(16),x.wc(17,"date"),x.gc(),x.dd(18),x.wc(19,"date"),x.hc(20,"i",93),x.rc("click",function(){x.Uc(e);const t=x.vc();return t.updateType(t.selectEmail,1)}),x.gc(),x.gc(),x.gc(),x.hc(21,"p"),x.bd(22,ae,2,1,"span",94),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(23,"div",95),x.hc(24,"div",96),x.hc(25,"p",97),x.dd(26),x.gc(),x.hc(27,"i",98),x.rc("click",function(){x.Uc(e);const t=x.vc();return t.addFavourite(t.selectEmail)}),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(28,"div",53),x.cc(29,"p",99),x.cc(30,"hr"),x.bd(31,ne,15,7,"ng-container",10),x.hc(32,"div",100),x.hc(33,"ul",101),x.bd(34,le,5,3,"li",10),x.bd(35,re,5,3,"li",10),x.bd(36,oe,5,3,"li",10),x.bd(37,de,5,3,"li",10),x.gc(),x.gc(),x.bd(38,ue,16,6,"ng-container",10),x.bd(39,_e,31,34,"ng-container",10),x.gc(),x.gc(),x.gc()}if(2&e){const e=x.vc();x.Dc("ngClass",x.Ic(29,ve,!e.compose)),x.Nb(6),x.Dc("ngIf",null==(null==e.selectEmail?null:e.selectEmail.avatar)),x.Nb(1),x.Dc("ngIf",null!=(null==e.selectEmail?null:e.selectEmail.avatar)),x.Nb(3),x.fd(" ",null==e.selectEmail?null:e.selectEmail.title," "),x.Nb(3),x.fd("(",x.yc(14,20,null==e.selectEmail?null:e.selectEmail.timestamp,"dd/MM/yyyy"),")"),x.Nb(3),x.fd(" ",x.yc(17,23,null==e.selectEmail?null:e.selectEmail.timestamp,"h:mm"),""),x.Nb(2),x.fd(" ",x.yc(19,26,null==e.selectEmail?null:e.selectEmail.timestamp,"a")," "),x.Nb(2),x.Dc("ngClass",1==(null==e.selectEmail?null:e.selectEmail.type)?"icofont icofont-flag-alt-1 text-danger":"icofont icofont-flag-alt-1"),x.Nb(2),x.Dc("ngForOf",null==e.selectEmail?null:e.selectEmail.cc),x.Nb(4),x.ed(null==e.selectEmail?null:e.selectEmail.email),x.Nb(1),x.Tb("starred",e._flagFav),x.Nb(2),x.Dc("innerHTML",null==e.selectEmail?null:e.selectEmail.content,x.Vc),x.Nb(2),x.Dc("ngIf",null!=(null==e.selectEmail?null:e.selectEmail.urls)),x.Nb(3),x.Dc("ngIf",!e.selectEmail.is_active),x.Nb(1),x.Dc("ngIf",2!=(null==e.selectEmail?null:e.selectEmail.type)&&!e.selectEmail.is_active),x.Nb(1),x.Dc("ngIf",2!=(null==e.selectEmail?null:e.selectEmail.type)&&!e.selectEmail.is_active),x.Nb(1),x.Dc("ngIf",2==(null==e.selectEmail?null:e.selectEmail.type)),x.Nb(1),x.Dc("ngIf",e.flagReply),x.Nb(1),x.Dc("ngIf",e._children.length>0)}}let ye=(()=>{class e{constructor(e,t,i,c,a,s,n,l,r,o,d){this._authenService=e,this._dataService=t,this._route=i,this._notifyService=c,this._uploadService=a,this._excelService=s,this._numberFormat=n,this.modalService=l,this._utilyService=r,this.sanitizer=o,this._activatedRoute=d,this._id="",this.entity={},this.entitySub={},this.baseFolder=w.a.BASE_API,this._users=[],this.follow_users=[],this.related_users=[],this.ccList=[],this.flagShow=!1,this.filesToUpload=[],this.isSave=!1,this.getlist=[],this.getlistAll=[],this.flagReply=!1,this.pageIndex=1,this.pageSize=10,this.pageDisplay=10,this.totalRow=0,this._children=[],this.entitySubDID={},this.filesToUpload1=[],this.isSaveComment=!1,this._flagFav=!1,this._flagAllowCC=!1,this._detailId="",this.compose=!0,this.allEmails=v.a.Emails,this.selectedEmails=[],this.socket=y()(w.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this._activatedRoute.params.subscribe(e=>{this._id=e.id,this.loadUsersWithDept(this._id),this.loadData(),this.socket.on("refreshPage",e=>{""!=this._detailId&&this.loadSubData(this._detailId)})})}loadUsersWithDept(e){let t={};t.short_code=this.user.short_code,this._dataService.post("/cat-submission/getallUsersNP",t).subscribe(t=>{this._dataService.post("/tasks/detailCount",{id:e,userid:this.user.id}).subscribe(e=>{this.entity=e.data,this.related_users=null==e.data.related_users?[]:e.data.related_users.data;let i=[];for(let t of e.data.related_users.data)t.id!=this.user.id&&i.push({id:t.id,name:t.name});let c=null==e.data.follow_users?[]:JSON.parse(e.data.follow_users);for(let s of c)if(this.user.id!=s){let e=t.data.filter(e=>e.id==s)[0];i.push({id:s,name:e.name})}let a=[];for(let s of c){this.user.id==s&&(this._flagAllowCC=!0,this.compose=!1);let e=t.data.filter(e=>e.id==s)[0];a.push({id:s,name:e.name,avatar:e.avatar})}1==e.data.is_active&&(this.compose=!1),this.ccList=a,this._users=i,this.socket.emit("refresh",{})})})}loadDetailByDID(e){console.log(e,this.compose),this._dataService.post("/tasks/detailByDID",{did:e}).subscribe(e=>{if(console.log("Detail",e),this.compose=!0,this.entitySub=e.data,e.data.cc.length>0){let t=[];for(let i of e.data.cc)t.push(i.id);this.follow_users=t,this.flagShow=!0}else this.follow_users=[],this.flagShow=!1})}fileEvent(e,t){this.filesToUpload=e.target.files,this._files=t}submit(){this.entitySub.follow_users=this.flagShow?JSON.stringify(this.follow_users):null,this.isSave=!0,this.entitySub.id=this._id,this.entitySub.parent_id=null,this.entitySub.created_by=this.user.id,null!=this.entitySub.did?(this.isSave=!1,0==this.filesToUpload.length?this._dataService.post("/tasks/updateDetail",this.entitySub).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?D.a.MSG_UPDATENO_EN:D.a.MSG_UPDATENO,"en"==this.user.lang?D.a.error_title_en:D.a.error_title):(this.entitySub={},this.entitySub.title=null,this.entitySub.content=null,this.follow_users=[],this.entitySub.follow_users=null,this.flagShow=!1,this.loadData(),this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_UPDATE_EN:D.a.MSG_UPDATE,"OK"))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)}):this._processUploadDisagreeAfter(this.filesToUpload)):0==this.filesToUpload.length?this._dataService.post("/tasks/addDetail",this.entitySub).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?D.a.MSG_ADDNO_EN:D.a.MSG_ADDNO,"en"==this.user.lang?D.a.error_title_en:D.a.error_title):(this.entitySub={},this.entitySub.title=null,this.entitySub.content=null,this.follow_users=[],this.entitySub.follow_users=null,this.flagShow=!1,this.loadData(),this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_ADD_EN:D.a.MSG_ADD,"OK"))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)}):this._processUploadDisagreeAfter(this.filesToUpload)}_processUploadDisagreeAfter(e){let t={folder_name:"tasks"};t.id=this._id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+t.id+"/"+t.folder_name,e).subscribe(e=>{this.entitySub.urls={data:e.data},console.log(this.entitySub,e),null==this.entitySub.id?this._dataService.post("/tasks/addDetail",this.entitySub).subscribe(e=>{this.isSave=!1,"failed"!=e.result&&(this._files.value=[],this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_ADD_EN:D.a.MSG_ADD,"OK"),this.socket.emit("refresh",{}))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)}):this._dataService.post("/tasks/updateDetail",this.entitySub).subscribe(e=>{this.isSave=!1,"failed"!=e.result&&(this._files.value=[],this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_UPDATE_EN:D.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)})},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)})}closeTask(e){E.a.fire({title:"en"==this.user.lang?D.a.are_you_sure_complete_en:D.a.are_you_sure_complete,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?D.a.cancel_en:D.a.cancel,confirmButtonText:"en"==this.user.lang?D.a.confirmtext_en:D.a.confirmtext}).then(t=>{if(t.value){let t={};t.id=e.id,t.stat=!0,this._dataService.post("/tasks/closeTask",t).subscribe(e=>{"failed"!=e.result?(this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_UPDATE_EN:D.a.MSG_UPDATE,"OK"),this._route.navigate(["/tasks/requests"])):this._notifyService.showError("en"==this.user.lang?D.a.MSG_UPDATENO_EN:D.a.MSG_UPDATENO,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)},()=>{this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)})}})}loadData(){this._dataService.post("/tasks/getalltaskdetail",{userid:this.user.id,id:this._id}).subscribe(e=>{this.getlist=e.data.filter(e=>2!=e.type),this.getlistAll=e.data})}getUserEmail(e){let t=[];if("allmail"==e)return t=this.getlist,t;if("favourite"==e){let e=[];for(let t of this.getlistAll.filter(e=>null!=e.favorites&&2!=e.type))t.favorites.data.filter(e=>e.id==this.user.id&&e.stat).length>0&&e.push(t);return t=e,t}return"trash"===e?this.getlistAll.filter(e=>2==e.type):"pending"===e?this.getlistAll.filter(e=>(null==e.is_active||0==e.is_active)&&2!=e.type):"important"===e?this.getlistAll.filter(e=>1==e.type):[]}selectedUserEmail(e){this.selectEmail=e,this.flagReply=!1,null!=this.selectEmail&&(this._flagFav=null!=this.selectEmail.favorites&&this.selectEmail.favorites.data.filter(e=>e.id==this.user.id&&e.stat).length>0),this.compose=!1,this._detailId=e.did,this.loadSubData(e.did)}selectedmail(e,t){E.a.fire({title:"en"==this.user.lang?D.a.are_you_sure_complete_en:D.a.are_you_sure_complete,text:t.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?D.a.cancel_en:D.a.cancel,confirmButtonText:"en"==this.user.lang?D.a.confirmtext_en:D.a.confirmtext}).then(e=>{if(e.value){let e={};e.did=t.did,e.stat=!0,this._dataService.post("/tasks/updateStatus",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_UPDATE_EN:D.a.MSG_UPDATE,"OK"),this.selectEmail=e.data,this.loadUsersWithDept(this._id),this.loadData(),this.loadSubData(this._detailId)},()=>{this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)})}})}moveEmails(e){e&&this.selectedEmails.filter(t=>t.type=e)}addFavourite(e){console.log(e),this.updateFavorite(e.did,!this._flagFav)}_downloadFileResult(e){window.open(w.a.BASE_API+"/"+e,"blank")}loadSubData(e){this._dataService.post("/tasks/getalltaskdetailbydid",{did:e,page:this.pageIndex,limit:this.pageSize}).subscribe(e=>{this._children=e.data,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}pageChanged(e){this.pageIndex=e.page,this.loadSubData(this._detailId)}_createNew(){this.compose=!0,this.entitySub={},this.entitySub.did=null,this._children=[],this.follow_users=[],this.flagShow=!1}fileEvent1(e,t){this.filesToUpload1=e.target.files,this._files1=t}submitComment(e){this.isSaveComment=!0,this.entitySubDID.id=this._id,this.entitySubDID.parent_id=e.did,this.entitySubDID.created_by=this.user.id,this.entitySubDID.title="Re: "+e.title,0==this.filesToUpload1.length?this._dataService.post("/tasks/addDetail",this.entitySubDID).subscribe(e=>{this.isSaveComment=!1,this.flagReply=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?D.a.MSG_ADDNO_EN:D.a.MSG_ADDNO,"en"==this.user.lang?D.a.error_title_en:D.a.error_title):(this.entitySubDID={},this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_ADD_EN:D.a.MSG_ADD,"OK"))},()=>{this.isSaveComment=!1,this.flagReply=!1,this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)}):this._processUploadDisagreeAfter1(this.filesToUpload1,e.did)}_processUploadDisagreeAfter1(e,t){let i={folder_name:"tasks"};i.id=this._id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+i.id+"/"+i.folder_name,e).subscribe(e=>{this.entitySubDID.urls={data:e.data},this._dataService.post("/tasks/addDetail",this.entitySubDID).subscribe(e=>{this.isSaveComment=!1,this.flagReply=!1,"failed"!=e.result&&(this._files1.value=[],this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_ADD_EN:D.a.MSG_ADD,"OK"),this.loadSubData(t))},()=>{this.isSaveComment=!1,this.flagReply=!1,this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)})},()=>{this.isSaveComment=!1,this.flagReply=!1,this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)})}updateFavorite(e,t){let i={};i.did=e,i.stat=t,i.userid=this.user.id,this._dataService.post("/tasks/updateFavorite",i).subscribe(t=>{"failed"===t.result?this._notifyService.showError("en"==this.user.lang?D.a.MSG_UPDATENO_EN:D.a.MSG_UPDATENO,"en"==this.user.lang?D.a.error_title_en:D.a.error_title):(this.compose=!0,this._children=[],this.selectEmail=t.data,this.loadData(),this.loadSubData(e),this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_UPDATE_EN:D.a.MSG_UPDATE,"OK"))},()=>{this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)})}updateType(e,t){this.compose=!0,this._children=[];let i={};i.did=e.did,i.type=1==e.type?null:t,this._dataService.post("/tasks/updateTypes",i).subscribe(t=>{"failed"===t.result?this._notifyService.showError("en"==this.user.lang?D.a.MSG_UPDATENO_EN:D.a.MSG_UPDATENO,"en"==this.user.lang?D.a.error_title_en:D.a.error_title):(this.loadUsersWithDept(this._id),this.loadData(),this.loadSubData(e.did),this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_UPDATE_EN:D.a.MSG_UPDATE,"OK"))},()=>{this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)})}_editComposer(e){this.compose=!0,this.loadDetailByDID(e.did)}}return e.\u0275fac=function(t){return new(t||e)(x.bc(l.a),x.bc(n.a),x.bc(_.d),x.bc(k.a),x.bc(s.a),x.bc(a.a),x.bc(M.a),x.bc(R.s),x.bc(C.a),x.bc(I.b),x.bc(_.a))},e.\u0275cmp=x.Vb({type:e,selectors:[["app-task-detail"]],decls:137,vars:79,consts:[[1,"container-fluid"],[1,"email-wrap"],[1,"row"],[1,"col-xl-3","col-md-6"],[1,"email-left-aside"],[1,"card"],[1,"card-body"],[1,"email-app-sidebar"],[1,"media"],[1,"media-size-email"],[4,"ngIf"],[1,"media-body"],[1,"f-w-600"],[1,"customers","d-inline-block","avatar-group"],["class","d-inline-block",4,"ngFor","ngForOf"],["role","tablist",1,"nav","main-menu"],[1,"nav-item"],["routerLink","/tasks/requests","id","pills-darkhome-tab","data-toggle","pill","role","tab","aria-controls","pills-darkhome","aria-selected","true",1,"btn-primary","btn-block","btn-mail"],[1,"icofont","icofont-rounded-double-left","mr-2"],["href","javascript:;","class","btn-success btn-block btn-mail","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",3,"click",4,"ngIf"],["class","nav-item",3,"click",4,"ngIf"],[1,"nav-item",3,"click"],["href","javascript:void(0)","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",1,"show"],[1,"title"],[1,"icon-info-alt"],[1,"badge","pull-right","digits"],[3,"click"],["href","javascript:void(0)"],[1,"icon-star"],[1,"icon-folder"],[1,"icon-pencil-alt"],[3,"ngClass"],[3,"click",4,"ngIf"],[1,"email-right-aside"],[1,"card","email-body"],[1,"pr-0","b-r-light"],[1,"email-top"],[1,"col"],[1,"col","text-right"],[1,"inbox",2,"max-height","630px !important"],["href","javascript:void(0)",4,"ngFor","ngForOf"],[1,"col-xl-6","col-md-12"],[1,"card","email-body","radius-left"],[1,"pl-0"],[1,"tab-content"],["id","pills-darkhome","role","tabpanel","aria-labelledby","pills-darkhome-tab",1,"tab-pane","fade",3,"ngClass"],[1,"email-compose"],[1,"email-top","compose-border"],[1,"col-sm-8","xl-50"],[1,"mb-0"],[1,"col-sm-4","btn-middle","xl-50"],["type","button",1,"btn","btn-primary","btn-block","btn-mail","text-center","mb-0","mt-0",3,"click"],[1,"fa","fa-paper-plane","mr-2"],[1,"email-wrapper"],[1,"theme-form"],[1,"form-group"],["for","title"],[1,"text-danger"],["id","title","type","text","name","title","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","chk-hidden",1,"d-block"],["id","chk-hidden","name","chk-hidden","type","checkbox",1,"checkbox_animated",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"form-group","mb-0"],["id","content",1,"text-muted"],["name","content","id","content","skin","moono-lisa","language","en",3,"ngModel","ngModelChange"],["for","filesToUpload",1,"col-form-label","pt-0"],["id","filesToUpload","name","filesToUpload","multiple","","type","file","accept",".pdf,.doc,.docx,.png,.jpg,jpeg",1,"form-control",3,"change"],["filesToUpload",""],["class","tab-pane fade","id","pills-darkprofile","role","tabpanel","aria-labelledby","pills-darkprofile-tab",3,"ngClass",4,"ngIf"],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-60",3,"alt"],[1,"mr-3","rounded-circle","img-60",3,"src","alt"],[1,"d-inline-block"],[1,"img-40","rounded-circle",3,"src","alt","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"img-40","rounded-circle",3,"alt","ngbTooltip"],["href","javascript:;","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",1,"btn-success","btn-block","btn-mail",3,"click"],[1,"icon-share","mr-2"],[1,"icon-trash"],[1,"media-size-email",3,"click"],[1,"digits"],["src","../../../../assets/img/icon-yes.svg",4,"ngIf"],[3,"innerHtml","click"],[1,"mr-3","rounded-circle","img-50",3,"src","alt"],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-50",3,"alt"],["src","../../../../assets/img/icon-yes.svg"],["href","javascript:;",1,"text-danger",3,"click"],[1,"search-not-found","text-center"],[1,""],["src","../../../../assets/images/search-not-found.png","alt","",1,"second-search"],["for","follower"],["name","_usersCc","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange"],["id","pills-darkprofile","role","tabpanel","aria-labelledby","pills-darkprofile-tab",1,"tab-pane","fade",3,"ngClass"],[1,"email-content"],[1,"col-md-6","xl-100","col-sm-12"],[2,"cursor","pointer","font-size","16pt",3,"ngClass","click"],[4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-12"],[1,"float-right","d-flex"],[1,"user-emailid"],[1,"fa","fa-star-o","f-18","mt-1",2,"cursor","pointer",3,"click"],[3,"innerHTML"],[1,"action-wrapper"],[1,"actions"],["alt","image",1,"mr-3","rounded-circle","img-50",3,"src"],[1,"text-muted"],[1,"icofont","icofont-clip"],["href","javascript:void(0)",1,"text-muted","text-right","right-download"],[1,"fa","fa-long-arrow-down","mr-2"],[1,"clearfix"],[1,"attachment"],[1,"list-inline"],["class","list-inline-item",4,"ngFor","ngForOf"],[1,"list-inline-item"],["src","../../../../assets/files/ico_file.png",1,"img-fluid",2,"width","20px","height","25px","cursor","pointer",3,"click"],["href","javascript:void(0)",1,"text-muted",3,"click"],[1,"fa","fa-reply","mr-2"],[1,"fa","fa-save","mr-2","text-success"],[1,"fa","fa-trash","text-danger","mr-2"],[1,"fa","fa-recycle","mr-2"],[1,"col-md-12"],[1,"input-group"],["type","text","aria-label","Recipient's username","name","comment",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"input-group-append"],[1,"input-group-text","btn-file"],[1,"icofont","icofont-attachment"],["type","file","name","filesToUpload1","multiple","","type","file","accept",".pdf,.doc,.docx,.png,.jpg,jpeg",3,"change"],["filesToUpload1",""],[1,"input-group-text",3,"click"],["class","icofont icofont-save",4,"ngIf"],[1,"icofont","icofont-save"],[1,"table-responsive"],[1,"table","card-table","table-vcenter","text-nowrap"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"]],template:function(e,t){if(1&e){const e=x.ic();x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",5),x.hc(6,"div",6),x.hc(7,"div",7),x.hc(8,"div",8),x.hc(9,"div",9),x.bd(10,A,2,1,"ng-container",10),x.bd(11,G,2,2,"ng-container",10),x.gc(),x.hc(12,"div",11),x.hc(13,"h6",12),x.dd(14),x.gc(),x.hc(15,"p"),x.dd(16),x.gc(),x.gc(),x.gc(),x.hc(17,"div",8),x.hc(18,"div",11),x.hc(19,"p"),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"p"),x.dd(23),x.wc(24,"translate"),x.gc(),x.hc(25,"p"),x.dd(26),x.wc(27,"translate"),x.gc(),x.hc(28,"div",13),x.hc(29,"ul"),x.bd(30,$,3,2,"li",14),x.gc(),x.gc(),x.bd(31,q,7,4,"ng-container",10),x.gc(),x.gc(),x.hc(32,"ul",15),x.hc(33,"li",16),x.hc(34,"a",17),x.cc(35,"i",18),x.dd(36),x.wc(37,"translate"),x.gc(),x.bd(38,B,5,6,"a",19),x.gc(),x.hc(39,"li"),x.cc(40,"hr"),x.gc(),x.bd(41,H,6,3,"li",20),x.hc(42,"li",21),x.rc("click",function(){return t.getUserEmail(t.type="important")}),x.hc(43,"a",22),x.hc(44,"span",23),x.cc(45,"i",24),x.dd(46),x.wc(47,"translate"),x.gc(),x.hc(48,"span",25),x.dd(49),x.gc(),x.gc(),x.gc(),x.hc(50,"li",26),x.rc("click",function(){return t.getUserEmail(t.type="favourite")}),x.hc(51,"a",27),x.hc(52,"span",23),x.cc(53,"i",28),x.dd(54),x.wc(55,"translate"),x.gc(),x.hc(56,"span",25),x.dd(57),x.gc(),x.gc(),x.gc(),x.hc(58,"li",26),x.rc("click",function(){return t.getUserEmail(t.type="allmail")}),x.hc(59,"a",27),x.hc(60,"span",23),x.cc(61,"i",29),x.dd(62),x.wc(63,"translate"),x.gc(),x.hc(64,"span",25),x.dd(65),x.gc(),x.gc(),x.gc(),x.hc(66,"li",26),x.rc("click",function(){return t.getUserEmail(t.type="pending")}),x.hc(67,"a",27),x.hc(68,"span",23),x.cc(69,"i",30),x.dd(70),x.wc(71,"translate"),x.gc(),x.hc(72,"span",31),x.dd(73),x.gc(),x.gc(),x.gc(),x.bd(74,K,8,4,"li",32),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(75,"div",3),x.hc(76,"div",33),x.hc(77,"div",34),x.hc(78,"div",35),x.hc(79,"div",36),x.hc(80,"div",2),x.hc(81,"div",37),x.hc(82,"h5"),x.dd(83),x.wc(84,"translate"),x.wc(85,"titlecase"),x.gc(),x.gc(),x.cc(86,"div",38),x.gc(),x.gc(),x.hc(87,"div",39),x.bd(88,X,19,11,"a",40),x.wc(89,"slice"),x.bd(90,Z,7,3,"ng-container",10),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(91,"div",41),x.hc(92,"div",33),x.hc(93,"div",42),x.hc(94,"div",43),x.hc(95,"div",44),x.hc(96,"div",45),x.hc(97,"div",46),x.hc(98,"div",47),x.hc(99,"div",2),x.hc(100,"div",48),x.hc(101,"h4",49),x.dd(102),x.wc(103,"translate"),x.gc(),x.gc(),x.hc(104,"div",50),x.hc(105,"button",51),x.rc("click",function(){return t.isSave?null:t.submit()}),x.cc(106,"i",52),x.bd(107,Q,3,3,"ng-container",10),x.bd(108,ee,3,3,"ng-container",10),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(109,"div",53),x.hc(110,"form",54),x.hc(111,"div",55),x.hc(112,"label",56),x.dd(113),x.wc(114,"translate"),x.hc(115,"span",57),x.dd(116,"*"),x.gc(),x.gc(),x.hc(117,"input",58),x.rc("ngModelChange",function(e){return t.entitySub.title=e}),x.gc(),x.gc(),x.hc(118,"div",55),x.hc(119,"label",59),x.dd(120),x.wc(121,"translate"),x.wc(122,"translate"),x.gc(),x.hc(123,"input",60),x.rc("ngModelChange",function(e){return t.flagShow=e}),x.gc(),x.gc(),x.bd(124,te,7,15,"div",61),x.hc(125,"div",62),x.hc(126,"label",63),x.dd(127),x.wc(128,"translate"),x.gc(),x.hc(129,"ck-editor",64),x.rc("ngModelChange",function(e){return t.entitySub.content=e}),x.gc(),x.gc(),x.hc(130,"div",55),x.hc(131,"label",65),x.dd(132),x.wc(133,"translate"),x.gc(),x.hc(134,"input",66,67),x.rc("change",function(i){x.Uc(e);const c=x.Rc(135);return t.fileEvent(i,c)}),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(136,Se,40,31,"div",68),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}2&e&&(x.Nb(10),x.Dc("ngIf",null==t.user.avatar),x.Nb(1),x.Dc("ngIf",null!=t.user.avatar),x.Nb(3),x.ed(t.user.name),x.Nb(2),x.ed(t.user.email),x.Nb(4),x.gd("",x.xc(21,41,"Title"),": ",t.entity.title,""),x.Nb(3),x.gd("",x.xc(24,43,"Content"),": ",t.entity.description,""),x.Nb(3),x.fd("",x.xc(27,45,"Assigned to"),":"),x.Nb(4),x.Dc("ngForOf",t.related_users),x.Nb(1),x.Dc("ngIf",t.ccList.length>0),x.Nb(5),x.fd(" ",x.xc(37,47,"Return")," "),x.Nb(2),x.Dc("ngIf",0==t.entity.is_active),x.Nb(3),x.Dc("ngIf",!t._flagAllowCC&&1!=t.entity.is_active),x.Nb(5),x.fd(" ",x.xc(47,49,"Important"),""),x.Nb(3),x.fd("(",t.getUserEmail("important").length,")"),x.Nb(5),x.fd(" ",x.xc(55,51,"Favourite"),""),x.Nb(3),x.fd("(",t.getUserEmail("favourite").length,")"),x.Nb(5),x.fd(" ",x.xc(63,53,"All"),""),x.Nb(3),x.fd("(",t.getUserEmail("allmail").length,")"),x.Nb(5),x.fd(" ",x.xc(71,55,"Pending"),""),x.Nb(2),x.Dc("ngClass",0==t.getUserEmail("pending").length?"badge pull-right digits":"badge pull-right text-danger digits"),x.Nb(1),x.fd("(",t.getUserEmail("pending").length,")"),x.Nb(1),x.Dc("ngIf",!t._flagAllowCC),x.Nb(9),x.fd(" ",x.xc(84,57,t.type?x.xc(85,59,"allmail"==t.type?"All":t.type):"All")," "),x.Nb(5),x.Dc("ngForOf",x.zc(89,61,t.getUserEmail(t.type?t.type:"allmail"),0,7)),x.Nb(2),x.Dc("ngIf",!t.getUserEmail(t.type?t.type:"allmail").length),x.Nb(6),x.Dc("ngClass",x.Ic(77,ve,t.compose)),x.Nb(6),x.ed(x.xc(103,65,"New message")),x.Nb(5),x.Dc("ngIf",!t.isSave),x.Nb(1),x.Dc("ngIf",t.isSave),x.Nb(5),x.fd("",x.xc(114,67,"Title")," "),x.Nb(4),x.Dc("ngModel",t.entitySub.title),x.Nb(3),x.gd(" ",x.xc(121,69,"Shown")," / ",x.xc(122,71,"Hidden"),"?"),x.Nb(3),x.Dc("ngModel",t.flagShow),x.Nb(1),x.Dc("ngIf",t.flagShow),x.Nb(3),x.ed(x.xc(128,73,"Description")),x.Nb(2),x.Dc("ngModel",t.entitySub.content),x.Nb(3),x.ed(x.xc(133,75,"Attachment")),x.Nb(4),x.Dc("ngIf",null!=t.selectEmail))},directives:[c.q,c.p,_.g,c.o,m.z,m.o,m.p,m.c,m.w,m.n,m.q,m.b,U.a,R.N,O.a,g.a],pipes:[T.c,c.z,c.y,c.f],styles:[".btn-file[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;text-align:right;opacity:0;outline:none;background:#fff;cursor:pointer;display:block}"]}),e})();var we=i("wd/R");function De(e,t){1&e&&x.cc(0,"img",31)}function Ne(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",32),x.hc(3,"h3",33),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function Ee(e,t){if(1&e&&(x.fc(0),x.dd(1),x.wc(2,"date"),x.ec()),2&e){const e=x.vc().$implicit;x.Nb(1),x.ed(x.yc(2,1,e.valid_date,"dd/MM/yyyy HH:mm"))}}function xe(e,t){1&e&&(x.fc(0),x.dd(1),x.wc(2,"translate"),x.ec()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Indefinite")))}function ke(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",44),x.ec()),2&e){const e=x.vc().$implicit,t=x.vc(2);x.Nb(1),x.Ec("alt",e.name),x.Dc("src",t.baseFolder+"/"+e.avatar,x.Wc)("ngbTooltip",e.name)}}function Me(e,t){if(1&e&&(x.fc(0),x.cc(1,"img",45),x.ec()),2&e){const e=x.vc().$implicit;x.Nb(1),x.Ec("alt",e.name),x.Dc("ngbTooltip",e.name)}}function Re(e,t){if(1&e&&(x.hc(0,"li",43),x.bd(1,ke,2,3,"ng-container",28),x.bd(2,Me,2,2,"ng-container",28),x.gc()),2&e){const e=t.$implicit;x.Nb(1),x.Dc("ngIf",null!=e.avatar),x.Nb(1),x.Dc("ngIf",null==e.avatar)}}function Ce(e,t){1&e&&(x.hc(0,"span",46),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Opening")))}function Ie(e,t){1&e&&(x.hc(0,"span",47),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Completed")))}function Ue(e,t){1&e&&(x.hc(0,"span",48),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cancel")))}function Oe(e,t){1&e&&x.cc(0,"span")}function Te(e,t){if(1&e){const e=x.ic();x.hc(0,"button",52),x.rc("click",function(){x.Uc(e);const t=x.vc(2).$implicit;return x.vc().deleteItem(t)}),x.wc(1,"translate"),x.cc(2,"i",53),x.gc()}2&e&&x.Dc("ngbTooltip",x.xc(1,1,"Delete"))}function Ae(e,t){if(1&e){const e=x.ic();x.fc(0),x.hc(1,"button",49),x.rc("click",function(){x.Uc(e);const t=x.vc().$implicit,i=x.vc(),c=x.Rc(81);return i._openModal(c,t)}),x.wc(2,"translate"),x.cc(3,"i",50),x.gc(),x.bd(4,Te,3,3,"button",51),x.ec()}if(2&e){const e=x.vc().$implicit;x.Nb(1),x.Dc("ngbTooltip",x.xc(2,2,"Edit")),x.Nb(3),x.Dc("ngIf",0==e.is_active)}}function Ge(e,t){if(1&e){const e=x.ic();x.fc(0),x.hc(1,"tr"),x.hc(2,"td",27),x.dd(3),x.gc(),x.hc(4,"td",27),x.hc(5,"a",34),x.dd(6),x.gc(),x.gc(),x.hc(7,"td",27),x.bd(8,Ee,3,4,"ng-container",28),x.bd(9,xe,3,3,"ng-container",28),x.gc(),x.hc(10,"td",27),x.hc(11,"div",35),x.hc(12,"ul"),x.bd(13,Re,3,2,"li",36),x.gc(),x.gc(),x.gc(),x.hc(14,"td",37),x.rc("click",function(){x.Uc(e);const i=t.$implicit,c=x.vc();return 0==i.is_active?c._addReminder(i):null}),x.cc(15,"i",38),x.wc(16,"translate"),x.hc(17,"span",39),x.dd(18),x.gc(),x.gc(),x.hc(19,"td",27),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"td",27),x.bd(23,Ce,3,3,"span",40),x.bd(24,Ie,3,3,"span",41),x.bd(25,Ue,3,3,"span",42),x.gc(),x.hc(26,"td"),x.bd(27,Oe,1,0,"span",28),x.gc(),x.hc(28,"td",27),x.bd(29,Ae,5,4,"ng-container",28),x.gc(),x.gc(),x.ec()}if(2&e){const e=t.$implicit,i=t.index,c=x.vc();x.Nb(3),x.fd(" ",i+1," "),x.Nb(2),x.Fc("routerLink","/tasks/requests/detail/",e.id,""),x.Nb(1),x.ed(e.title),x.Nb(2),x.Dc("ngIf",null!=e.valid_date),x.Nb(1),x.Dc("ngIf",null==e.valid_date),x.Nb(4),x.Dc("ngForOf",e.related_users.data),x.Nb(2),x.Dc("ngbTooltip",x.xc(16,16,"Reminder")),x.Nb(3),x.ed(null==e.reminder?0:e.reminder),x.Nb(2),x.hd(" ",x.xc(21,18,"Viewed")," (",e.count_view,"/",e.total_users,") "),x.Nb(3),x.Dc("ngIf",0==e.is_active),x.Nb(1),x.Dc("ngIf",1==e.is_active),x.Nb(1),x.Dc("ngIf",2==e.is_active),x.Nb(2),x.Dc("ngIf",1==e.is_active),x.Nb(2),x.Dc("ngIf",e.created_by==c.user.id)}}function Pe(e,t){if(1&e){const e=x.ic();x.hc(0,"a",74),x.rc("click",function(){return x.Uc(e),x.vc(2).turnOnFlagCC()}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cc")))}function Fe(e,t){if(1&e){const e=x.ic();x.hc(0,"div",60),x.hc(1,"label",75),x.dd(2),x.wc(3,"translate"),x.gc(),x.hc(4,"ng-select",76),x.rc("ngModelChange",function(t){return x.Uc(e),x.vc(2).follow_users=t}),x.wc(5,"translate"),x.wc(6,"translate"),x.gc(),x.gc()}if(2&e){const e=x.vc(2);x.Nb(2),x.ed(x.xc(3,10,"Followers")),x.Nb(2),x.Dc("items",e._usersCc)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",e.follow_users)("placeholder",x.xc(5,12,"Please choose"))("notFoundText",x.xc(6,14,"Not found item"))("disabled",0!=e.entity.is_active)}}function $e(e,t){1&e&&(x.fc(0),x.hc(1,"a",77),x.cc(2,"img",78),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing")," "))}function je(e,t){if(1&e){const e=x.ic();x.hc(0,"button",80),x.rc("click",function(){return x.Uc(e),x.vc(3).saveChange()}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Save")," "))}function Le(e,t){if(1&e&&(x.fc(0),x.bd(1,je,3,3,"button",79),x.ec()),2&e){const e=x.vc(2);x.Nb(1),x.Dc("ngIf",!e.isSave)}}const ze=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm:ss",containerClass:"theme-dark-blue"}};function qe(e,t){if(1&e){const e=x.ic();x.hc(0,"div",54),x.hc(1,"h4",55),x.dd(2),x.wc(3,"translate"),x.gc(),x.hc(4,"button",56),x.rc("click",function(){return t.$implicit.dismiss("Cross click")}),x.hc(5,"span",57),x.dd(6,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(7,"div",58),x.hc(8,"div",59),x.hc(9,"div",60),x.hc(10,"label",61),x.dd(11),x.wc(12,"translate"),x.hc(13,"span",33),x.dd(14,"*"),x.gc(),x.gc(),x.hc(15,"input",62),x.rc("ngModelChange",function(t){return x.Uc(e),x.vc().entity.title=t}),x.gc(),x.gc(),x.hc(16,"div",60),x.hc(17,"label",63),x.dd(18),x.wc(19,"translate"),x.hc(20,"span",33),x.dd(21,"*"),x.gc(),x.gc(),x.hc(22,"textarea",64),x.rc("ngModelChange",function(t){return x.Uc(e),x.vc().entity.description=t}),x.gc(),x.gc(),x.hc(23,"div",60),x.hc(24,"label",65),x.dd(25),x.wc(26,"translate"),x.hc(27,"span",66),x.dd(28,"*"),x.gc(),x.bd(29,Pe,3,3,"a",67),x.gc(),x.hc(30,"ng-select",68),x.rc("ngModelChange",function(t){return x.Uc(e),x.vc().related_users=t})("change",function(){return x.Uc(e),x.vc().changeUserCC()}),x.wc(31,"translate"),x.wc(32,"translate"),x.gc(),x.gc(),x.bd(33,Fe,7,16,"div",69),x.hc(34,"div",60),x.hc(35,"label",70),x.dd(36),x.wc(37,"translate"),x.gc(),x.hc(38,"input",71),x.rc("ngModelChange",function(t){return x.Uc(e),x.vc().jdate=t})("bsValueChange",function(t){return x.Uc(e),x.vc().orgValueChange(t)}),x.wc(39,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(40,"div",72),x.hc(41,"button",73),x.rc("click",function(){return t.$implicit.dismiss("Cross click")}),x.dd(42),x.wc(43,"translate"),x.gc(),x.bd(44,$e,5,3,"ng-container",28),x.bd(45,Le,2,1,"ng-container",28),x.gc()}if(2&e){const e=x.vc();x.Nb(2),x.gd(" ",x.xc(3,28,"ADD"==e._flagModal?"Add new":"Update")," ",e._title," "),x.Nb(9),x.fd("",x.xc(12,30,"Title")," "),x.Nb(4),x.Dc("ngModel",e.entity.title)("disabled",0!=e.entity.is_active),x.Nb(3),x.fd("",x.xc(19,32,"Content")," "),x.Nb(4),x.Dc("ngModel",e.entity.description)("disabled",0!=e.entity.is_active),x.Nb(3),x.fd("",x.xc(26,34,"Assigned to")," "),x.Nb(4),x.Dc("ngIf",0==e.entity.is_active),x.Nb(1),x.Dc("items",e._users)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",e.related_users)("placeholder",x.xc(31,36,"Please choose"))("notFoundText",x.xc(32,38,"Not found item"))("disabled",0!=e.entity.is_active),x.Nb(3),x.Dc("ngIf",e.flagCc),x.Nb(3),x.ed(x.xc(37,40,"Valid date")),x.Nb(2),x.Dc("placeholder",x.xc(39,42,"Indefinite"))("ngModel",e.jdate)("bsConfig",x.Hc(46,ze))("disabled",0!=e.entity.is_active),x.Nb(4),x.fd(" ",x.xc(43,44,"Close")," "),x.Nb(2),x.Dc("ngIf",e.isSave),x.Nb(1),x.Dc("ngIf",0==e.entity.is_active)}}const Be=[{path:"",children:[{path:"requests",component:(()=>{class e{constructor(e,t,i,c,a,s,n,l,r,o){this._authenService=e,this._dataService=t,this._route=i,this._notifyService=c,this._uploadService=a,this._excelService=s,this._numberFormat=n,this.modalService=l,this._utilyService=r,this.sanitizer=o,this._keyword="",this.baseFolder=w.a.BASE_API,this._isLoading=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._requestslist=[],this._title="",this._flagModal="ADD",this.isSave=!1,this.entity={},this.related_users=[],this.follow_users=[],this._users=[],this._usersCc=[],this.jdate=null,this.flagCc=!1,this.socket=y()(w.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadUsersWithDept(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){this._isLoading=!0;let e={};e.page=this.pageIndex,e.limit=this.pageSize,e.filter=this._keyword,e.userid=this.user.id,this._dataService.post("/tasks/getall",e).subscribe(e=>{console.log("test",e);let t=[];for(let i of e.data){let e=i.related_users.data.filter(e=>e.is_view).length;i.count_view=e,i.total_users=i.related_users.data.length,t.push(i)}this._requestslist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages,this._isLoading=!1})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadUsersWithDept(){let e={};e.short_code=this.user.short_code,this._dataService.post("/cat-submission/getallUsersNP",e).subscribe(e=>{console.log(e),this._users=e.data;let t=[];if(null!=this.entity.follow_users){for(let e of this._users)null!=this.entity.follow_users&&0==JSON.parse(this.entity.follow_users).filter(t=>t==e.id).length&&t.push(e);this._usersCc=t}else this._usersCc=this._users})}changeUserCC(){if(console.log("Before",this.related_users,this.follow_users),0==this.related_users.length)this.entity.related_users=null;else{let e=[],t=[];for(let i of this.related_users){let c=this._users.filter(e=>e.id==i)[0];e.push({id:i,name:c.name,avatar:c.avatar,is_view:!1}),t.push(i)}this.entity.related_users={data:e},this.entity.joined_users=0==t.length?null:JSON.stringify(t)}let e=[];for(let t of this._users)0==this.related_users.filter(e=>e==t.id).length&&e.push(t);this._usersCc=e}turnOnFlagCC(){if(this.flagCc=!this.flagCc,this.flagCc){let e=[];for(let t of this._users)0==this.related_users.filter(e=>e==t.id).length&&e.push(t);this._usersCc=e}}_openModal(e,t){null==t?(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.title=null,this.entity.description=null,this.related_users=[],this.entity.related_users={data:[]},this.follow_users=[],this.jdate=null,this.entity.valid_date=null,this.entity.is_active=0,this.entity.created_by=this.user.id):(this._flagModal="UPDATE",this.loadDetailById(t.id)),this.modalService.open(e,{size:"md",centered:!0,backdrop:!1})}loadDetailById(e){this._dataService.post("/tasks/detail",{id:e}).subscribe(e=>{this.entity=e.data;let t=[];for(let i of e.data.related_users.data)t.push(i.id);if(this.related_users=t,null!=e.data.valid_date&&(this.jdate=new Date(e.data.valid_date),this.entity.valid_date=we(new Date(this.jdate)).format("DD/MM/YYYY HH:mm:ss")),null!=e.data.follow_users){this.flagCc=!0,this.follow_users=JSON.parse(e.data.follow_users);let t=[];for(let i of this._users)0==e.data.related_users.data.filter(e=>e.id==i.id).length&&t.push(i);this._usersCc=t}else this.flagCc=!1,this.follow_users=[]})}orgValueChange(e){null!=e&&"Invalid date"!=e?(this.jdate=e,this.entity.valid_date=we(this.jdate).format("YYYY-MM-DD HH:mm:ss")):(this.jdate=null,this.entity.valid_date=null)}saveChange(){this.entity.follow_users=0==this.follow_users.length?null:JSON.stringify(this.follow_users),this.isSave=!0,"ADD"==this._flagModal?this._dataService.post("/tasks/add",this.entity).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?D.a.MSG_ADDNO_EN:D.a.MSG_ADDNO,"en"==this.user.lang?D.a.error_title_en:D.a.error_title):(this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_ADD_EN:D.a.MSG_ADD,"OK"),this.modalService.dismissAll())},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)}):this._dataService.post("/tasks/update",this.entity).subscribe(e=>{this.isSave=!1,"failed"===e.result?this._notifyService.showError("en"==this.user.lang?D.a.MSG_UPDATENO_EN:D.a.MSG_UPDATENO,"en"==this.user.lang?D.a.error_title_en:D.a.error_title):(this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_UPDATE_EN:D.a.MSG_UPDATE,"OK"),this.modalService.dismissAll())},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)})}_addReminder(e){E.a.fire({title:"en"==this.user.lang?D.a.are_you_sure2send_en:D.a.are_you_sure2send,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?D.a.cancel_en:D.a.cancel,confirmButtonText:"en"==this.user.lang?D.a.confirmtext_en:D.a.confirmtext}).then(t=>{t.value&&this._dataService.post("/tasks/addReminder",{id:e.id}).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_UPDATE_EN:D.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})},()=>{this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)})})}deleteItem(e){E.a.fire({title:"en"==this.user.lang?D.a.are_you_sure_cancel_en:D.a.are_you_sure_cancel,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?D.a.cancel_en:D.a.cancel,confirmButtonText:"en"==this.user.lang?D.a.confirmtext_en:D.a.confirmtext}).then(t=>{t.value&&(e.is_active=2,this._dataService.post("/tasks/update",e).subscribe(e=>{this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?D.a.MSG_UPDATE_EN:D.a.MSG_UPDATE,"OK")},()=>{this._notifyService.showError("en"==this.user.lang?D.a.MSG_ERROR_EN:D.a.MSG_ERROR,"en"==this.user.lang?D.a.error_title_en:D.a.error_title)}))})}}return e.\u0275fac=function(t){return new(t||e)(x.bc(l.a),x.bc(n.a),x.bc(_.d),x.bc(k.a),x.bc(s.a),x.bc(a.a),x.bc(M.a),x.bc(R.s),x.bc(C.a),x.bc(I.b))},e.\u0275cmp=x.Vb({type:e,selectors:[["app-task-request"]],decls:82,vars:75,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-body"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate",2,"width","15px"],[1,"text-truncate"],[4,"ngIf"],[4,"ngFor","ngForOf"],["popupWorkModal",""],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","9",2,"text-align","center"],[1,"text-danger"],["href","javascript:;",1,"text-danger",3,"routerLink"],[1,"customers","d-inline-block","avatar-group"],["class","d-inline-block",4,"ngFor","ngForOf"],[1,"text-truncate",2,"cursor","pointer",3,"click"],[1,"fa","fa-bell-o",2,"font-size","14pt",3,"ngbTooltip"],[1,"badge-pill","badge-danger"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"d-inline-block"],[1,"img-40","rounded-circle",3,"src","alt","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"img-40","rounded-circle",3,"alt","ngbTooltip"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],["class","btn btn-sm btn-danger mr-sm-1",3,"ngbTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"ngbTooltip","click"],[1,"fa","fa-trash"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],[1,"col-md-12"],["for","title"],["type","text","name","title","id","title","autocomplete","off","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","description"],["id","description","rows","3","name","description","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","assignedto"],[1,"text-danger","mr-sm-2"],["href","javascript:;","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["name","_users","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","disabled","ngModelChange","change"],["class","col-md-12",4,"ngIf"],["for","validdate"],["type","text","name","jdate","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],["for","follower"],["name","_usersCc","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","disabled","ngModelChange"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){if(1&e){const e=x.ic();x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.hc(10,"button",8),x.rc("click",function(){x.Uc(e);const i=x.Rc(81);return t._openModal(i,null)}),x.dd(11),x.wc(12,"translate"),x.gc(),x.bd(13,De,1,0,"img",9),x.gc(),x.gc(),x.hc(14,"div",10),x.hc(15,"div",11),x.hc(16,"select",12),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(17,"option",13),x.dd(18,"#10"),x.gc(),x.hc(19,"option",14),x.dd(20,"#25"),x.gc(),x.hc(21,"option",15),x.dd(22,"#50"),x.gc(),x.hc(23,"option",16),x.dd(24,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(25,"div",17),x.hc(26,"div",18),x.hc(27,"div",19),x.hc(28,"div",20),x.hc(29,"pagination",21),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(30,"div",22),x.hc(31,"a",23),x.dd(32),x.wc(33,"translate"),x.wc(34,"translate"),x.wc(35,"translate"),x.wc(36,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(37,"div",24),x.hc(38,"table",25),x.hc(39,"thead"),x.hc(40,"th",26),x.dd(41,"#"),x.gc(),x.hc(42,"th",27),x.dd(43),x.wc(44,"translate"),x.gc(),x.hc(45,"th",27),x.dd(46),x.wc(47,"translate"),x.gc(),x.hc(48,"th",27),x.dd(49),x.wc(50,"translate"),x.gc(),x.hc(51,"th",27),x.dd(52),x.wc(53,"translate"),x.gc(),x.hc(54,"th",27),x.dd(55),x.wc(56,"translate"),x.gc(),x.hc(57,"th",27),x.dd(58),x.wc(59,"translate"),x.gc(),x.hc(60,"th",27),x.dd(61),x.wc(62,"translate"),x.gc(),x.hc(63,"th",27),x.dd(64),x.wc(65,"translate"),x.gc(),x.gc(),x.hc(66,"tbody"),x.bd(67,Ne,6,3,"ng-container",28),x.bd(68,Ge,30,20,"ng-container",29),x.gc(),x.gc(),x.gc(),x.hc(69,"div",18),x.hc(70,"div",19),x.hc(71,"div",20),x.hc(72,"pagination",21),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(73,"div",22),x.hc(74,"a",23),x.dd(75),x.wc(76,"translate"),x.wc(77,"translate"),x.wc(78,"translate"),x.wc(79,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(80,qe,46,47,"ng-template",null,30,x.cd)}2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,39,"Search"))("ngModel",t._keyword),x.Nb(3),x.fd(" ",x.xc(12,41,"Add new request")," "),x.Nb(2),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(33,43,"Total of records"),": ",t.totalRow," - ",x.xc(34,45,"Page")," ",t.pageIndex," ",x.xc(35,47,"of")," ",t.totalPage," ",x.xc(36,49,"page"),""),x.Nb(11),x.ed(x.xc(44,51,"Title")),x.Nb(3),x.fd(" ",x.xc(47,53,"Valid date")," "),x.Nb(3),x.fd(" ",x.xc(50,55,"Assigned to")," "),x.Nb(3),x.fd(" ",x.xc(53,57,"Reminder")," "),x.Nb(3),x.fd(" ",x.xc(56,59,"Joined")," "),x.Nb(3),x.ed(x.xc(59,61,"Status")),x.Nb(3),x.ed(x.xc(62,63,"Time")),x.Nb(3),x.ed(x.xc(65,65,"Actions")),x.Nb(3),x.Dc("ngIf",0==t._requestslist.length),x.Nb(1),x.Dc("ngForOf",t._requestslist),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(76,67,"Total of records"),": ",t.totalRow," - ",x.xc(77,69,"Page")," ",t.pageIndex," ",x.xc(78,71,"of")," ",t.totalPage," ",x.xc(79,73,"page"),""))},directives:[m.c,m.n,m.q,c.q,m.x,m.r,m.A,g.a,c.p,_.g,R.N,m.w,O.a,u.b,u.a],pipes:[T.c,c.f],styles:[""]}),e})(),data:{title:"Requests",breadcrumb:"Requests"}},{path:"requests/detail/:id",component:ye,data:{title:"Details",breadcrumb:"Details"}}]}];let He=(()=>{class e{}return e.\u0275mod=x.Zb({type:e}),e.\u0275inj=x.Yb({factory:function(t){return new(t||e)},imports:[[_.h.forChild(Be)],_.h]}),e})();var Ke=i("arFO"),Ve=i("tmjD"),Ye=i("Kdsb"),We=i("g9iH"),Je=i("UkRs"),Xe=i("VXpv"),Ze=i("IkSl");let Qe=(()=>{class e{}return e.\u0275mod=x.Zb({type:e}),e.\u0275inj=x.Yb({factory:function(t){return new(t||e)},providers:[l.a,n.a,s.a,a.a,T.d,M.a],imports:[[c.c,He,m.k,p.a,b.b,T.b,f.a,u.c.forRoot(),g.b.forRoot(),h.a.forRoot(),d.a.forRoot(),We.b,o.a,r.a,Ke.a,R.u,O.b,Ve.b.forRoot(),Ye.c,Je.c,U.b,Xe.b,Ze.b]]}),e})()}}]);