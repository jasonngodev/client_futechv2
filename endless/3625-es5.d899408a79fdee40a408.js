!function(){"use strict";function e(e,i){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e))||i&&e&&"number"==typeof e.length){n&&(e=n);var a=0,l=function(){};return{s:l,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(self.webpackChunkendless=self.webpackChunkendless||[]).push([[3625],{13625:function(t,n,l){l.r(n),l.d(n,{TasksModule:function(){return nt}});var r=l(38583),s=l(49690),o=l(90217),c=l(65925),u=l(15483),d=l(58920),g=l(75690),f=l(63301),p=l(70453),Z=l(72214),h=l(81946),_=l(10743),v=l(93184),m=l(72533),A=l(3679),x=l(39895),y=l(91647),T=l(49962),b=l.n(T),q=l(65206),S=l(29022),k=l(88259),w=l.n(k),E=l(37716),U=l(75208),M=l(59543),C=l(12664),N=l(32579),D=l(39075),J=l(41365),W=l(86640),O=l(29790);function R(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",69),E.BQk()),2&e){var i=E.oxw();E.xp6(1),E.s9C("alt",i.user.name)}}function I(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",70),E.BQk()),2&e){var i=E.oxw();E.xp6(1),E.s9C("alt",i.user.name),E.Q6J("src",i.baseFolder+"/"+i.user.avatar,E.LSH)}}function L(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",72),E.BQk()),2&e){var i=E.oxw().$implicit,n=E.oxw();E.xp6(1),E.s9C("alt",i.name),E.Q6J("src",n.baseFolder+"/"+i.avatar,E.LSH)("ngbTooltip",i.name)}}function Q(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",73),E.BQk()),2&e){var i=E.oxw().$implicit;E.xp6(1),E.s9C("alt",i.name),E.Q6J("ngbTooltip",i.name)}}function F(e,t){if(1&e&&(E.TgZ(0,"li",71),E.YNc(1,L,2,3,"ng-container",10),E.YNc(2,Q,2,2,"ng-container",10),E.qZA()),2&e){var i=t.$implicit;E.xp6(1),E.Q6J("ngIf",null!=i.avatar),E.xp6(1),E.Q6J("ngIf",null==i.avatar)}}function Y(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",72),E.BQk()),2&e){var i=E.oxw().$implicit,n=E.oxw(2);E.xp6(1),E.s9C("alt",i.name),E.Q6J("src",n.baseFolder+"/"+i.avatar,E.LSH)("ngbTooltip",i.name)}}function G(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",73),E.BQk()),2&e){var i=E.oxw().$implicit;E.xp6(1),E.s9C("alt",i.name),E.Q6J("ngbTooltip",i.name)}}function j(e,t){if(1&e&&(E.TgZ(0,"li",71),E.YNc(1,Y,2,3,"ng-container",10),E.YNc(2,G,2,2,"ng-container",10),E.qZA()),2&e){var i=t.$implicit;E.xp6(1),E.Q6J("ngIf",null!=i.avatar),E.xp6(1),E.Q6J("ngIf",null==i.avatar)}}function P(e,t){if(1&e&&(E.ynx(0),E.TgZ(1,"p"),E._uU(2),E.ALo(3,"translate"),E.qZA(),E.TgZ(4,"div",13),E.TgZ(5,"ul"),E.YNc(6,j,3,2,"li",14),E.qZA(),E.qZA(),E.BQk()),2&e){var i=E.oxw();E.xp6(2),E.hij("",E.lcZ(3,2,"Followers"),":"),E.xp6(4),E.Q6J("ngForOf",i.ccList)}}function H(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"a",74),E.NdJ("click",function(){E.CHM(i);var e=E.oxw();return e.closeTask(e.entity)}),E._UZ(1,"i",75),E._uU(2),E.ALo(3,"translate"),E.ALo(4,"translate"),E.qZA()}2&e&&(E.xp6(2),E.AsE(" ",E.lcZ(3,2,"Close")," ",E.lcZ(4,4,"Task")," "))}function B(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"li",21),E.NdJ("click",function(){return E.CHM(i),E.oxw()._createNew()}),E.TgZ(1,"a",22),E.TgZ(2,"span",23),E._UZ(3,"i",30),E._uU(4),E.ALo(5,"translate"),E.qZA(),E.qZA(),E.qZA()}2&e&&(E.xp6(4),E.hij(" ",E.lcZ(5,1,"Create new"),""))}function z(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"li",26),E.NdJ("click",function(){E.CHM(i);var e=E.oxw();return e.getUserEmail(e.type="trash")}),E.TgZ(1,"a",27),E.TgZ(2,"span",23),E._UZ(3,"i",76),E._uU(4),E.ALo(5,"translate"),E.qZA(),E.TgZ(6,"span",25),E._uU(7),E.qZA(),E.qZA(),E.qZA()}if(2&e){var n=E.oxw();E.xp6(4),E.hij(" ",E.lcZ(5,2,"Trash"),""),E.xp6(3),E.hij("(",n.getUserEmail("trash").length,")")}}function $(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",81),E.BQk()),2&e){var i=E.oxw().$implicit,n=E.oxw();E.xp6(1),E.s9C("alt",i.name),E.Q6J("src",n.baseFolder+"/"+i.avatar,E.LSH)}}function K(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",82),E.BQk()),2&e){var i=E.oxw().$implicit;E.xp6(1),E.s9C("alt",i.name)}}function V(e,t){1&e&&E._UZ(0,"img",83)}function X(e,t){if(1&e){var i=E.EpF();E.ynx(0),E._uU(1," | "),E.TgZ(2,"a",84),E.NdJ("click",function(){E.CHM(i);var e=E.oxw().$implicit;return E.oxw()._editComposer(e)}),E._uU(3),E.ALo(4,"translate"),E.qZA(),E.BQk()}2&e&&(E.xp6(3),E.Oqu(E.lcZ(4,1,"Edit")))}function ee(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"a",27),E.TgZ(1,"div",8),E.TgZ(2,"div",77),E.NdJ("click",function(){var e=E.CHM(i).$implicit;return E.oxw().selectedUserEmail(e)}),E.YNc(3,$,2,2,"ng-container",10),E.YNc(4,K,2,1,"ng-container",10),E.qZA(),E.TgZ(5,"div",31),E.TgZ(6,"h6"),E.TgZ(7,"span",26),E.NdJ("click",function(){var e=E.CHM(i).$implicit;return E.oxw().selectedUserEmail(e)}),E._uU(8),E.qZA(),E.TgZ(9,"small",26),E.NdJ("click",function(){var e=E.CHM(i).$implicit;return E.oxw().selectedUserEmail(e)}),E._uU(10,"("),E.TgZ(11,"span",78),E._uU(12),E.ALo(13,"date"),E.qZA(),E._uU(14,") "),E.YNc(15,V,1,0,"img",79),E.YNc(16,X,5,3,"ng-container",10),E.qZA(),E.qZA(),E.TgZ(17,"p"),E.TgZ(18,"span",80),E.NdJ("click",function(){var e=E.CHM(i).$implicit;return E.oxw().selectedUserEmail(e)}),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA()}if(2&e){var n=t.$implicit,a=E.oxw();E.xp6(3),E.Q6J("ngIf",null!=n.avatar),E.xp6(1),E.Q6J("ngIf",null==n.avatar),E.xp6(1),E.Q6J("ngClass",2==n.type?"media-body jignore":"media-body"),E.xp6(3),E.hij("",n.title," "),E.xp6(4),E.Oqu(E.xi3(13,8,n.timestamp,"dd/MM/yyyy HH:mm")),E.xp6(3),E.Q6J("ngIf",n.is_active),E.xp6(1),E.Q6J("ngIf",!n.is_active&&a.user.id==n.created_by),E.xp6(2),E.Q6J("innerHtml",n.content,E.oJD)}}function te(e,t){1&e&&(E.ynx(0),E.TgZ(1,"div",85),E.TgZ(2,"div",86),E._UZ(3,"img",87),E.TgZ(4,"p",49),E._uU(5),E.ALo(6,"translate"),E.qZA(),E.qZA(),E.qZA(),E.BQk()),2&e&&(E.xp6(5),E.Oqu(E.lcZ(6,1,"Not found items")))}function ie(e,t){1&e&&(E.ynx(0),E._uU(1),E.ALo(2,"translate"),E.BQk()),2&e&&(E.xp6(1),E.Oqu(E.lcZ(2,1,"Send")))}function ne(e,t){1&e&&(E.ynx(0),E._uU(1),E.ALo(2,"translate"),E.BQk()),2&e&&(E.xp6(1),E.Oqu(E.lcZ(2,1,"Loading")))}function ae(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"div",55),E.TgZ(1,"label",88),E._uU(2),E.ALo(3,"translate"),E.qZA(),E.TgZ(4,"ng-select",89),E.NdJ("ngModelChange",function(e){return E.CHM(i),E.oxw().follow_users=e}),E.ALo(5,"translate"),E.ALo(6,"translate"),E.qZA(),E.qZA()}if(2&e){var n=E.oxw();E.xp6(2),E.Oqu(E.lcZ(3,9,"Followers")),E.xp6(2),E.Q6J("items",n._users)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",n.follow_users)("placeholder",E.lcZ(5,11,"Please choose"))("notFoundText",E.lcZ(6,13,"Not found item"))}}function le(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",82),E.BQk()),2&e){var i=E.oxw(2);E.xp6(1),E.s9C("alt",null==i.selectEmail?null:i.selectEmail.name)}}function re(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",102),E.BQk()),2&e){var i=E.oxw(2);E.xp6(1),E.Q6J("src",i.baseFolder+"/"+(null==i.selectEmail?null:i.selectEmail.avatar),E.LSH)}}function se(e,t){if(1&e&&(E.TgZ(0,"span"),E._uU(1),E.qZA()),2&e){var i=t.$implicit;E.xp6(1),E.hij("",i.name,", ")}}function oe(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"li",111),E.TgZ(1,"img",112),E.NdJ("click",function(){var e=E.CHM(i).$implicit;return E.oxw(3)._downloadFileResult(e)}),E.qZA(),E.qZA()}}function ce(e,t){if(1&e&&(E.ynx(0),E.TgZ(1,"div",71),E.TgZ(2,"h6",103),E._UZ(3,"i",104),E._uU(4),E.ALo(5,"translate"),E.qZA(),E.TgZ(6,"a",105),E._UZ(7,"i",106),E._uU(8),E.ALo(9,"translate"),E.qZA(),E._UZ(10,"div",107),E.qZA(),E.TgZ(11,"div",108),E.TgZ(12,"ul",109),E.YNc(13,oe,2,0,"li",110),E.qZA(),E.qZA(),E._UZ(14,"hr"),E.BQk()),2&e){var i=E.oxw(2);E.xp6(4),E.hij(" ",E.lcZ(5,3,"Attachment")," "),E.xp6(4),E.Oqu(E.lcZ(9,5,"All")),E.xp6(5),E.Q6J("ngForOf",null==i.selectEmail?null:i.selectEmail.urls.data)}}function ue(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"li"),E.TgZ(1,"a",113),E.NdJ("click",function(){E.CHM(i);var e=E.oxw(2);return e.flagReply=!e.flagReply}),E._UZ(2,"i",114),E._uU(3),E.ALo(4,"translate"),E.qZA(),E.qZA()}2&e&&(E.xp6(3),E.Oqu(E.lcZ(4,1,"Reply")))}function de(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"li"),E.TgZ(1,"a",113),E.NdJ("click",function(){E.CHM(i);var e=E.oxw(2);return e.selectedmail(null,e.selectEmail)}),E._UZ(2,"i",115),E._uU(3),E.ALo(4,"translate"),E.qZA(),E.qZA()}2&e&&(E.xp6(3),E.Oqu(E.lcZ(4,1,"Complete")))}function ge(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"li"),E.TgZ(1,"a",113),E.NdJ("click",function(){E.CHM(i);var e=E.oxw(2);return e.updateType(e.selectEmail,2)}),E._UZ(2,"i",116),E._uU(3),E.ALo(4,"translate"),E.qZA(),E.qZA()}2&e&&(E.xp6(3),E.Oqu(E.lcZ(4,1,"Delete")))}function fe(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"li"),E.TgZ(1,"a",113),E.NdJ("click",function(){E.CHM(i);var e=E.oxw(2);return e.updateType(e.selectEmail,null)}),E._UZ(2,"i",117),E._uU(3),E.ALo(4,"translate"),E.qZA(),E.qZA()}2&e&&(E.xp6(3),E.Oqu(E.lcZ(4,1,"Recall")))}function pe(e,t){1&e&&E._UZ(0,"i",128)}function Ze(e,t){1&e&&(E.ynx(0),E._uU(1),E.ALo(2,"translate"),E.BQk()),2&e&&(E.xp6(1),E.Oqu(E.lcZ(2,1,"Processing")))}function he(e,t){if(1&e){var i=E.EpF();E.ynx(0),E._UZ(1,"hr"),E.TgZ(2,"div",2),E.TgZ(3,"div",118),E.TgZ(4,"div",55),E.TgZ(5,"div",119),E.TgZ(6,"input",120),E.NdJ("ngModelChange",function(e){return E.CHM(i),E.oxw(2).entitySubDID.content=e}),E.ALo(7,"translate"),E.qZA(),E.TgZ(8,"div",121),E.TgZ(9,"span",122),E._UZ(10,"i",123),E.TgZ(11,"input",124,125),E.NdJ("change",function(e){E.CHM(i);var t=E.MAs(12);return E.oxw(2).fileEvent1(e,t)}),E.qZA(),E.qZA(),E.TgZ(13,"span",126),E.NdJ("click",function(){E.CHM(i);var e=E.oxw(2);return e.isSaveComment?null:e.submitComment(e.selectEmail)}),E.YNc(14,pe,1,0,"i",127),E.YNc(15,Ze,3,3,"ng-container",10),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.BQk()}if(2&e){var n=E.oxw(2);E.xp6(6),E.s9C("placeholder",E.lcZ(7,4,"Comment")),E.Q6J("ngModel",n.entitySubDID.content),E.xp6(8),E.Q6J("ngIf",!n.isSaveComment),E.xp6(1),E.Q6J("ngIf",n.isSaveComment)}}function _e(e,t){1&e&&E._UZ(0,"hr")}function ve(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"li",111),E.TgZ(1,"img",112),E.NdJ("click",function(){var e=E.CHM(i).$implicit;return E.oxw(4)._downloadFileResult(e)}),E.qZA(),E.qZA()}}var me=function(){return[]};function Ae(e,t){if(1&e&&(E.TgZ(0,"tr"),E.TgZ(1,"td"),E._uU(2),E.qZA(),E.TgZ(3,"td"),E.TgZ(4,"div",108),E.TgZ(5,"ul",109),E.YNc(6,ve,2,0,"li",110),E.qZA(),E.qZA(),E.qZA(),E.TgZ(7,"td"),E._uU(8),E.qZA(),E.TgZ(9,"td"),E._uU(10),E.ALo(11,"date"),E.qZA(),E.qZA()),2&e){var i=t.$implicit;E.xp6(2),E.Oqu(i.content),E.xp6(4),E.Q6J("ngForOf",null==i.urls?E.DdM(7,me):i.urls.data),E.xp6(2),E.Oqu(i.name),E.xp6(2),E.hij(" ",E.xi3(11,4,i.timestamp,"dd/MM/yyyy h:mm a")," ")}}function xe(e,t){if(1&e){var i=E.EpF();E.ynx(0),E.YNc(1,_e,1,0,"hr",10),E.TgZ(2,"div",2),E.TgZ(3,"div",118),E.TgZ(4,"div",129),E.TgZ(5,"table",130),E.TgZ(6,"thead"),E.TgZ(7,"th"),E._uU(8),E.ALo(9,"translate"),E.qZA(),E.TgZ(10,"th"),E._uU(11),E.ALo(12,"translate"),E.qZA(),E.TgZ(13,"th"),E._uU(14),E.ALo(15,"translate"),E.qZA(),E.TgZ(16,"th"),E._uU(17),E.ALo(18,"translate"),E.qZA(),E.qZA(),E.TgZ(19,"tbody"),E.YNc(20,Ae,12,8,"tr",94),E.qZA(),E.qZA(),E.qZA(),E.TgZ(21,"div",131),E.TgZ(22,"div",132),E.TgZ(23,"pagination",133),E.NdJ("ngModelChange",function(e){return E.CHM(i),E.oxw(2).pageIndex=e})("pageChanged",function(e){return E.CHM(i),E.oxw(2).pageChanged(e)}),E.qZA(),E.qZA(),E.TgZ(24,"div",134),E.TgZ(25,"a",135),E._uU(26),E.ALo(27,"translate"),E.ALo(28,"translate"),E.ALo(29,"translate"),E.ALo(30,"translate"),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.BQk()}if(2&e){var n=E.oxw(2);E.xp6(1),E.Q6J("ngIf",!n.selectEmail.is_active),E.xp6(7),E.Oqu(E.lcZ(9,18,"Content")),E.xp6(3),E.Oqu(E.lcZ(12,20,"Attachment")),E.xp6(3),E.Oqu(E.lcZ(15,22,"Created by")),E.xp6(3),E.Oqu(E.lcZ(18,24,"CreatedDate")),E.xp6(3),E.Q6J("ngForOf",n._children),E.xp6(3),E.Q6J("boundaryLinks",!0)("totalItems",n.totalRow)("ngModel",n.pageIndex)("maxSize",n.pageDisplay)("itemsPerPage",n.pageSize),E.xp6(3),E.Q0o("",E.lcZ(27,26,"Total of records"),": ",n.totalRow," - ",E.lcZ(28,28,"Page")," ",n.pageIndex," ",E.lcZ(29,30,"of")," ",n.totalPage," ",E.lcZ(30,32,"page"),"")}}var ye=function(e){return{"active show":e}};function Te(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"div",90),E.TgZ(1,"div",91),E.TgZ(2,"div",36),E.TgZ(3,"div",2),E.TgZ(4,"div",92),E.TgZ(5,"div",8),E.YNc(6,le,2,1,"ng-container",10),E.YNc(7,re,2,1,"ng-container",10),E.TgZ(8,"div",11),E.TgZ(9,"h6"),E._uU(10),E.TgZ(11,"small"),E.TgZ(12,"span",78),E._uU(13),E.ALo(14,"date"),E.qZA(),E.TgZ(15,"span",78),E._uU(16),E.ALo(17,"date"),E.qZA(),E._uU(18),E.ALo(19,"date"),E.TgZ(20,"i",93),E.NdJ("click",function(){E.CHM(i);var e=E.oxw();return e.updateType(e.selectEmail,1)}),E.qZA(),E.qZA(),E.qZA(),E.TgZ(21,"p"),E.YNc(22,se,2,1,"span",94),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.TgZ(23,"div",95),E.TgZ(24,"div",96),E.TgZ(25,"p",97),E._uU(26),E.qZA(),E.TgZ(27,"i",98),E.NdJ("click",function(){E.CHM(i);var e=E.oxw();return e.addFavourite(e.selectEmail)}),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.TgZ(28,"div",53),E._UZ(29,"p",99),E._UZ(30,"hr"),E.YNc(31,ce,15,7,"ng-container",10),E.TgZ(32,"div",100),E.TgZ(33,"ul",101),E.YNc(34,ue,5,3,"li",10),E.YNc(35,de,5,3,"li",10),E.YNc(36,ge,5,3,"li",10),E.YNc(37,fe,5,3,"li",10),E.qZA(),E.qZA(),E.YNc(38,he,16,6,"ng-container",10),E.YNc(39,xe,31,34,"ng-container",10),E.qZA(),E.qZA(),E.qZA()}if(2&e){var n=E.oxw();E.Q6J("ngClass",E.VKq(29,ye,!n.compose)),E.xp6(6),E.Q6J("ngIf",null==(null==n.selectEmail?null:n.selectEmail.avatar)),E.xp6(1),E.Q6J("ngIf",null!=(null==n.selectEmail?null:n.selectEmail.avatar)),E.xp6(3),E.hij(" ",null==n.selectEmail?null:n.selectEmail.title," "),E.xp6(3),E.hij("(",E.xi3(14,20,null==n.selectEmail?null:n.selectEmail.timestamp,"dd/MM/yyyy"),")"),E.xp6(3),E.hij(" ",E.xi3(17,23,null==n.selectEmail?null:n.selectEmail.timestamp,"h:mm"),""),E.xp6(2),E.hij(" ",E.xi3(19,26,null==n.selectEmail?null:n.selectEmail.timestamp,"a")," "),E.xp6(2),E.Q6J("ngClass",1==(null==n.selectEmail?null:n.selectEmail.type)?"icofont icofont-flag-alt-1 text-danger":"icofont icofont-flag-alt-1"),E.xp6(2),E.Q6J("ngForOf",null==n.selectEmail?null:n.selectEmail.cc),E.xp6(4),E.Oqu(null==n.selectEmail?null:n.selectEmail.email),E.xp6(1),E.ekj("starred",n._flagFav),E.xp6(2),E.Q6J("innerHTML",null==n.selectEmail?null:n.selectEmail.content,E.oJD),E.xp6(2),E.Q6J("ngIf",null!=(null==n.selectEmail?null:n.selectEmail.urls)),E.xp6(3),E.Q6J("ngIf",!n.selectEmail.is_active),E.xp6(1),E.Q6J("ngIf",2!=(null==n.selectEmail?null:n.selectEmail.type)&&!n.selectEmail.is_active),E.xp6(1),E.Q6J("ngIf",2!=(null==n.selectEmail?null:n.selectEmail.type)&&!n.selectEmail.is_active),E.xp6(1),E.Q6J("ngIf",2==(null==n.selectEmail?null:n.selectEmail.type)),E.xp6(1),E.Q6J("ngIf",n.flagReply),E.xp6(1),E.Q6J("ngIf",n._children.length>0)}}var be,qe=((be=function(){function t(e,n,a,l,r,s,o,c,u,d,g){i(this,t),this._authenService=e,this._dataService=n,this._route=a,this._notifyService=l,this._uploadService=r,this._excelService=s,this._numberFormat=o,this.modalService=c,this._utilyService=u,this.sanitizer=d,this._activatedRoute=g,this._id="",this.entity={},this.entitySub={},this.baseFolder=q.h.BASE_API,this._users=[],this.follow_users=[],this.related_users=[],this.ccList=[],this.flagShow=!1,this.filesToUpload=[],this.isSave=!1,this.getlist=[],this.getlistAll=[],this.flagReply=!1,this.pageIndex=1,this.pageSize=10,this.pageDisplay=10,this.totalRow=0,this._children=[],this.entitySubDID={},this.filesToUpload1=[],this.isSaveComment=!1,this._flagFav=!1,this._flagAllowCC=!1,this._detailId="",this.compose=!0,this.allEmails=y.M.Emails,this.selectedEmails=[],this.socket=b()(q.h.BASE_API)}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this._activatedRoute.params.subscribe(function(t){e._id=t.id,e.loadUsersWithDept(e._id),e.loadData(),e.socket.on("refreshPage",function(t){""!=e._detailId&&e.loadSubData(e._detailId)})})}},{key:"loadUsersWithDept",value:function(t){var i=this,n={};n.short_code=this.user.short_code,this._dataService.post("/cat-submission/getallUsersNP",n).subscribe(function(n){i._dataService.post("/tasks/detailCount",{id:t,userid:i.user.id}).subscribe(function(t){i.entity=t.data,i.related_users=null==t.data.related_users?[]:t.data.related_users.data;var a,l=[],r=e(t.data.related_users.data);try{for(r.s();!(a=r.n()).done;){var s=a.value;s.id!=i.user.id&&l.push({id:s.id,name:s.name})}}catch(h){r.e(h)}finally{r.f()}var o,c=null==t.data.follow_users?[]:JSON.parse(t.data.follow_users),u=e(c);try{var d=function(){var e=o.value;if(i.user.id!=e){var t=n.data.filter(function(t){return t.id==e})[0];l.push({id:e,name:t.name})}};for(u.s();!(o=u.n()).done;)d()}catch(h){u.e(h)}finally{u.f()}var g,f=[],p=e(c);try{var Z=function(){var e=g.value;i.user.id==e&&(i._flagAllowCC=!0,i.compose=!1);var t=n.data.filter(function(t){return t.id==e})[0];f.push({id:e,name:t.name,avatar:t.avatar})};for(p.s();!(g=p.n()).done;)Z()}catch(h){p.e(h)}finally{p.f()}1==t.data.is_active&&(i.compose=!1),i.ccList=f,i._users=l,i.socket.emit("refresh",{})})})}},{key:"loadDetailByDID",value:function(t){var i=this;console.log(t,this.compose),this._dataService.post("/tasks/detailByDID",{did:t}).subscribe(function(t){if(console.log("Detail",t),i.compose=!0,i.entitySub=t.data,t.data.cc.length>0){var n,a=[],l=e(t.data.cc);try{for(l.s();!(n=l.n()).done;){var r=n.value;a.push(r.id)}}catch(s){l.e(s)}finally{l.f()}i.follow_users=a,i.flagShow=!0}else i.follow_users=[],i.flagShow=!1})}},{key:"fileEvent",value:function(e,t){this.filesToUpload=e.target.files,this._files=t}},{key:"submit",value:function(){var e=this;this.entitySub.follow_users=this.flagShow?JSON.stringify(this.follow_users):null,this.isSave=!0,this.entitySub.id=this._id,this.entitySub.parent_id=null,this.entitySub.created_by=this.user.id,null!=this.entitySub.did?(this.isSave=!1,0==this.filesToUpload.length?this._dataService.post("/tasks/updateDetail",this.entitySub).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?S.W.MSG_UPDATENO_EN:S.W.MSG_UPDATENO,"en"==e.user.lang?S.W.error_title_en:S.W.error_title):(e.entitySub={},e.entitySub.title=null,e.entitySub.content=null,e.follow_users=[],e.entitySub.follow_users=null,e.flagShow=!1,e.loadData(),e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"))},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==e.user.lang?S.W.error_title_en:S.W.error_title)}):this._processUploadDisagreeAfter(this.filesToUpload)):0==this.filesToUpload.length?this._dataService.post("/tasks/addDetail",this.entitySub).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?S.W.MSG_ADDNO_EN:S.W.MSG_ADDNO,"en"==e.user.lang?S.W.error_title_en:S.W.error_title):(e.entitySub={},e.entitySub.title=null,e.entitySub.content=null,e.follow_users=[],e.entitySub.follow_users=null,e.flagShow=!1,e.loadData(),e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?S.W.MSG_ADD_EN:S.W.MSG_ADD,"OK"))},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==e.user.lang?S.W.error_title_en:S.W.error_title)}):this._processUploadDisagreeAfter(this.filesToUpload)}},{key:"_processUploadDisagreeAfter",value:function(e){var t=this,i={folder_name:"tasks"};i.id=this._id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+i.id+"/"+i.folder_name,e).subscribe(function(e){t.entitySub.urls={data:e.data},console.log(t.entitySub,e),null==t.entitySub.id?t._dataService.post("/tasks/addDetail",t.entitySub).subscribe(function(e){t.isSave=!1,"failed"!=e.result&&(t._files.value=[],t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_ADD_EN:S.W.MSG_ADD,"OK"),t.socket.emit("refresh",{}))},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)}):t._dataService.post("/tasks/updateDetail",t.entitySub).subscribe(function(e){t.isSave=!1,"failed"!=e.result&&(t._files.value=[],t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"),t.socket.emit("refresh",{}))},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)})},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)})}},{key:"closeTask",value:function(e){var t=this;w().fire({title:"en"==this.user.lang?S.W.are_you_sure_complete_en:S.W.are_you_sure_complete,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?S.W.cancel_en:S.W.cancel,confirmButtonText:"en"==this.user.lang?S.W.confirmtext_en:S.W.confirmtext}).then(function(i){if(i.value){var n={};n.id=e.id,n.stat=!0,t._dataService.post("/tasks/closeTask",n).subscribe(function(e){"failed"!=e.result?(t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"),t._route.navigate(["/tasks/requests"])):t._notifyService.showError("en"==t.user.lang?S.W.MSG_UPDATENO_EN:S.W.MSG_UPDATENO,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)},function(){t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)})}})}},{key:"loadData",value:function(){var e=this;this._dataService.post("/tasks/getalltaskdetail",{userid:this.user.id,id:this._id}).subscribe(function(t){e.getlist=t.data.filter(function(e){return 2!=e.type}),e.getlistAll=t.data})}},{key:"getUserEmail",value:function(t){var i=this;if("allmail"==t)return this.getlist;if("favourite"==t){var n,a=[],l=e(this.getlistAll.filter(function(e){return null!=e.favorites&&2!=e.type}));try{for(l.s();!(n=l.n()).done;){var r=n.value;r.favorites.data.filter(function(e){return e.id==i.user.id&&e.stat}).length>0&&a.push(r)}}catch(s){l.e(s)}finally{l.f()}return a}return"trash"===t?this.getlistAll.filter(function(e){return 2==e.type}):"pending"===t?this.getlistAll.filter(function(e){return(null==e.is_active||0==e.is_active)&&2!=e.type}):"important"===t?this.getlistAll.filter(function(e){return 1==e.type}):[]}},{key:"selectedUserEmail",value:function(e){var t=this;this.selectEmail=e,this.flagReply=!1,null!=this.selectEmail&&(this._flagFav=null!=this.selectEmail.favorites&&this.selectEmail.favorites.data.filter(function(e){return e.id==t.user.id&&e.stat}).length>0),this.compose=!1,this._detailId=e.did,this.loadSubData(e.did)}},{key:"selectedmail",value:function(e,t){var i=this;w().fire({title:"en"==this.user.lang?S.W.are_you_sure_complete_en:S.W.are_you_sure_complete,text:t.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?S.W.cancel_en:S.W.cancel,confirmButtonText:"en"==this.user.lang?S.W.confirmtext_en:S.W.confirmtext}).then(function(e){if(e.value){var n={};n.did=t.did,n.stat=!0,i._dataService.post("/tasks/updateStatus",n).subscribe(function(e){i._notifyService.showSuccess("en"==i.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"),i.selectEmail=e.data,i.loadUsersWithDept(i._id),i.loadData(),i.loadSubData(i._detailId)},function(){i._notifyService.showError("en"==i.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==i.user.lang?S.W.error_title_en:S.W.error_title)})}})}},{key:"moveEmails",value:function(e){!e||this.selectedEmails.filter(function(t){return t.type=e})}},{key:"addFavourite",value:function(e){console.log(e),this.updateFavorite(e.did,!this._flagFav)}},{key:"_downloadFileResult",value:function(e){window.open(q.h.BASE_API+"/"+e,"blank")}},{key:"loadSubData",value:function(e){var t=this;this._dataService.post("/tasks/getalltaskdetailbydid",{did:e,page:this.pageIndex,limit:this.pageSize}).subscribe(function(e){t._children=e.data,t.totalRow=e.rowCount,t.totalPage=e.totalPages})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.loadSubData(this._detailId)}},{key:"_createNew",value:function(){this.compose=!0,this.entitySub={},this.entitySub.did=null,this._children=[],this.follow_users=[],this.flagShow=!1}},{key:"fileEvent1",value:function(e,t){this.filesToUpload1=e.target.files,this._files1=t}},{key:"submitComment",value:function(e){var t=this;this.isSaveComment=!0,this.entitySubDID.id=this._id,this.entitySubDID.parent_id=e.did,this.entitySubDID.created_by=this.user.id,this.entitySubDID.title="Re: "+e.title,0==this.filesToUpload1.length?this._dataService.post("/tasks/addDetail",this.entitySubDID).subscribe(function(e){t.isSaveComment=!1,t.flagReply=!1,"failed"===e.result?t._notifyService.showError("en"==t.user.lang?S.W.MSG_ADDNO_EN:S.W.MSG_ADDNO,"en"==t.user.lang?S.W.error_title_en:S.W.error_title):(t.entitySubDID={},t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_ADD_EN:S.W.MSG_ADD,"OK"))},function(){t.isSaveComment=!1,t.flagReply=!1,t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)}):this._processUploadDisagreeAfter1(this.filesToUpload1,e.did)}},{key:"_processUploadDisagreeAfter1",value:function(e,t){var i=this,n={folder_name:"tasks"};n.id=this._id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+n.id+"/"+n.folder_name,e).subscribe(function(e){i.entitySubDID.urls={data:e.data},i._dataService.post("/tasks/addDetail",i.entitySubDID).subscribe(function(e){i.isSaveComment=!1,i.flagReply=!1,"failed"!=e.result&&(i._files1.value=[],i._notifyService.showSuccess("en"==i.user.lang?S.W.MSG_ADD_EN:S.W.MSG_ADD,"OK"),i.loadSubData(t))},function(){i.isSaveComment=!1,i.flagReply=!1,i._notifyService.showError("en"==i.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==i.user.lang?S.W.error_title_en:S.W.error_title)})},function(){i.isSaveComment=!1,i.flagReply=!1,i._notifyService.showError("en"==i.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==i.user.lang?S.W.error_title_en:S.W.error_title)})}},{key:"updateFavorite",value:function(e,t){var i=this,n={};n.did=e,n.stat=t,n.userid=this.user.id,this._dataService.post("/tasks/updateFavorite",n).subscribe(function(t){"failed"===t.result?i._notifyService.showError("en"==i.user.lang?S.W.MSG_UPDATENO_EN:S.W.MSG_UPDATENO,"en"==i.user.lang?S.W.error_title_en:S.W.error_title):(i.compose=!0,i._children=[],i.selectEmail=t.data,i.loadData(),i.loadSubData(e),i._notifyService.showSuccess("en"==i.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"))},function(){i._notifyService.showError("en"==i.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==i.user.lang?S.W.error_title_en:S.W.error_title)})}},{key:"updateType",value:function(e,t){var i=this;this.compose=!0,this._children=[];var n={};n.did=e.did,n.type=1==e.type?null:t,this._dataService.post("/tasks/updateTypes",n).subscribe(function(t){"failed"===t.result?i._notifyService.showError("en"==i.user.lang?S.W.MSG_UPDATENO_EN:S.W.MSG_UPDATENO,"en"==i.user.lang?S.W.error_title_en:S.W.error_title):(i.loadUsersWithDept(i._id),i.loadData(),i.loadSubData(e.did),i._notifyService.showSuccess("en"==i.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"))},function(){i._notifyService.showError("en"==i.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==i.user.lang?S.W.error_title_en:S.W.error_title)})}},{key:"_editComposer",value:function(e){this.compose=!0,this.loadDetailByDID(e.did)}}]),t}()).\u0275fac=function(e){return new(e||be)(E.Y36(u.e),E.Y36(c.D),E.Y36(x.F0),E.Y36(U.c),E.Y36(o.C),E.Y36(s.x),E.Y36(M.p),E.Y36(C.FF),E.Y36(N.t),E.Y36(D.H7),E.Y36(x.gz))},be.\u0275cmp=E.Xpm({type:be,selectors:[["app-task-detail"]],decls:137,vars:79,consts:[[1,"container-fluid"],[1,"email-wrap"],[1,"row"],[1,"col-xl-3","col-md-6"],[1,"email-left-aside"],[1,"card"],[1,"card-body"],[1,"email-app-sidebar"],[1,"media"],[1,"media-size-email"],[4,"ngIf"],[1,"media-body"],[1,"f-w-600"],[1,"customers","d-inline-block","avatar-group"],["class","d-inline-block",4,"ngFor","ngForOf"],["role","tablist",1,"nav","main-menu"],[1,"nav-item"],["routerLink","/tasks/requests","id","pills-darkhome-tab","data-toggle","pill","role","tab","aria-controls","pills-darkhome","aria-selected","true",1,"btn-primary","btn-block","btn-mail"],[1,"icofont","icofont-rounded-double-left","mr-2"],["href","javascript:;","class","btn-success btn-block btn-mail","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",3,"click",4,"ngIf"],["class","nav-item",3,"click",4,"ngIf"],[1,"nav-item",3,"click"],["href","javascript:void(0)","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",1,"show"],[1,"title"],[1,"icon-info-alt"],[1,"badge","pull-right","digits"],[3,"click"],["href","javascript:void(0)"],[1,"icon-star"],[1,"icon-folder"],[1,"icon-pencil-alt"],[3,"ngClass"],[3,"click",4,"ngIf"],[1,"email-right-aside"],[1,"card","email-body"],[1,"pr-0","b-r-light"],[1,"email-top"],[1,"col"],[1,"col","text-right"],[1,"inbox",2,"max-height","630px !important"],["href","javascript:void(0)",4,"ngFor","ngForOf"],[1,"col-xl-6","col-md-12"],[1,"card","email-body","radius-left"],[1,"pl-0"],[1,"tab-content"],["id","pills-darkhome","role","tabpanel","aria-labelledby","pills-darkhome-tab",1,"tab-pane","fade",3,"ngClass"],[1,"email-compose"],[1,"email-top","compose-border"],[1,"col-sm-8","xl-50"],[1,"mb-0"],[1,"col-sm-4","btn-middle","xl-50"],["type","button",1,"btn","btn-primary","btn-block","btn-mail","text-center","mb-0","mt-0",3,"click"],[1,"fa","fa-paper-plane","mr-2"],[1,"email-wrapper"],[1,"theme-form"],[1,"form-group"],["for","title"],[1,"text-danger"],["id","title","type","text","name","title","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","chk-hidden",1,"d-block"],["id","chk-hidden","name","chk-hidden","type","checkbox",1,"checkbox_animated",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"form-group","mb-0"],["id","content",1,"text-muted"],["name","content","id","content","skin","moono-lisa","language","en",3,"ngModel","ngModelChange"],["for","filesToUpload",1,"col-form-label","pt-0"],["id","filesToUpload","name","filesToUpload","multiple","","type","file","accept",".pdf,.doc,.docx,.png,.jpg,jpeg",1,"form-control",3,"change"],["filesToUpload",""],["class","tab-pane fade","id","pills-darkprofile","role","tabpanel","aria-labelledby","pills-darkprofile-tab",3,"ngClass",4,"ngIf"],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-60",3,"alt"],[1,"mr-3","rounded-circle","img-60",3,"src","alt"],[1,"d-inline-block"],[1,"img-40","rounded-circle",3,"src","alt","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"img-40","rounded-circle",3,"alt","ngbTooltip"],["href","javascript:;","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",1,"btn-success","btn-block","btn-mail",3,"click"],[1,"icon-share","mr-2"],[1,"icon-trash"],[1,"media-size-email",3,"click"],[1,"digits"],["src","../../../../assets/img/icon-yes.svg",4,"ngIf"],[3,"innerHtml","click"],[1,"mr-3","rounded-circle","img-50",3,"src","alt"],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-50",3,"alt"],["src","../../../../assets/img/icon-yes.svg"],["href","javascript:;",1,"text-danger",3,"click"],[1,"search-not-found","text-center"],[1,""],["src","../../../../assets/images/search-not-found.png","alt","",1,"second-search"],["for","follower"],["name","_usersCc","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange"],["id","pills-darkprofile","role","tabpanel","aria-labelledby","pills-darkprofile-tab",1,"tab-pane","fade",3,"ngClass"],[1,"email-content"],[1,"col-md-6","xl-100","col-sm-12"],[2,"cursor","pointer","font-size","16pt",3,"ngClass","click"],[4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-12"],[1,"float-right","d-flex"],[1,"user-emailid"],[1,"fa","fa-star-o","f-18","mt-1",2,"cursor","pointer",3,"click"],[3,"innerHTML"],[1,"action-wrapper"],[1,"actions"],["alt","image",1,"mr-3","rounded-circle","img-50",3,"src"],[1,"text-muted"],[1,"icofont","icofont-clip"],["href","javascript:void(0)",1,"text-muted","text-right","right-download"],[1,"fa","fa-long-arrow-down","mr-2"],[1,"clearfix"],[1,"attachment"],[1,"list-inline"],["class","list-inline-item",4,"ngFor","ngForOf"],[1,"list-inline-item"],["src","../../../../assets/files/ico_file.png",1,"img-fluid",2,"width","20px","height","25px","cursor","pointer",3,"click"],["href","javascript:void(0)",1,"text-muted",3,"click"],[1,"fa","fa-reply","mr-2"],[1,"fa","fa-save","mr-2","text-success"],[1,"fa","fa-trash","text-danger","mr-2"],[1,"fa","fa-recycle","mr-2"],[1,"col-md-12"],[1,"input-group"],["type","text","aria-label","Recipient's username","name","comment",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"input-group-append"],[1,"input-group-text","btn-file"],[1,"icofont","icofont-attachment"],["type","file","name","filesToUpload1","multiple","","type","file","accept",".pdf,.doc,.docx,.png,.jpg,jpeg",3,"change"],["filesToUpload1",""],[1,"input-group-text",3,"click"],["class","icofont icofont-save",4,"ngIf"],[1,"icofont","icofont-save"],[1,"table-responsive"],[1,"table","card-table","table-vcenter","text-nowrap"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"]],template:function(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"div",0),E.TgZ(1,"div",1),E.TgZ(2,"div",2),E.TgZ(3,"div",3),E.TgZ(4,"div",4),E.TgZ(5,"div",5),E.TgZ(6,"div",6),E.TgZ(7,"div",7),E.TgZ(8,"div",8),E.TgZ(9,"div",9),E.YNc(10,R,2,1,"ng-container",10),E.YNc(11,I,2,2,"ng-container",10),E.qZA(),E.TgZ(12,"div",11),E.TgZ(13,"h6",12),E._uU(14),E.qZA(),E.TgZ(15,"p"),E._uU(16),E.qZA(),E.qZA(),E.qZA(),E.TgZ(17,"div",8),E.TgZ(18,"div",11),E.TgZ(19,"p"),E._uU(20),E.ALo(21,"translate"),E.qZA(),E.TgZ(22,"p"),E._uU(23),E.ALo(24,"translate"),E.qZA(),E.TgZ(25,"p"),E._uU(26),E.ALo(27,"translate"),E.qZA(),E.TgZ(28,"div",13),E.TgZ(29,"ul"),E.YNc(30,F,3,2,"li",14),E.qZA(),E.qZA(),E.YNc(31,P,7,4,"ng-container",10),E.qZA(),E.qZA(),E.TgZ(32,"ul",15),E.TgZ(33,"li",16),E.TgZ(34,"a",17),E._UZ(35,"i",18),E._uU(36),E.ALo(37,"translate"),E.qZA(),E.YNc(38,H,5,6,"a",19),E.qZA(),E.TgZ(39,"li"),E._UZ(40,"hr"),E.qZA(),E.YNc(41,B,6,3,"li",20),E.TgZ(42,"li",21),E.NdJ("click",function(){return t.getUserEmail(t.type="important")}),E.TgZ(43,"a",22),E.TgZ(44,"span",23),E._UZ(45,"i",24),E._uU(46),E.ALo(47,"translate"),E.qZA(),E.TgZ(48,"span",25),E._uU(49),E.qZA(),E.qZA(),E.qZA(),E.TgZ(50,"li",26),E.NdJ("click",function(){return t.getUserEmail(t.type="favourite")}),E.TgZ(51,"a",27),E.TgZ(52,"span",23),E._UZ(53,"i",28),E._uU(54),E.ALo(55,"translate"),E.qZA(),E.TgZ(56,"span",25),E._uU(57),E.qZA(),E.qZA(),E.qZA(),E.TgZ(58,"li",26),E.NdJ("click",function(){return t.getUserEmail(t.type="allmail")}),E.TgZ(59,"a",27),E.TgZ(60,"span",23),E._UZ(61,"i",29),E._uU(62),E.ALo(63,"translate"),E.qZA(),E.TgZ(64,"span",25),E._uU(65),E.qZA(),E.qZA(),E.qZA(),E.TgZ(66,"li",26),E.NdJ("click",function(){return t.getUserEmail(t.type="pending")}),E.TgZ(67,"a",27),E.TgZ(68,"span",23),E._UZ(69,"i",30),E._uU(70),E.ALo(71,"translate"),E.qZA(),E.TgZ(72,"span",31),E._uU(73),E.qZA(),E.qZA(),E.qZA(),E.YNc(74,z,8,4,"li",32),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.TgZ(75,"div",3),E.TgZ(76,"div",33),E.TgZ(77,"div",34),E.TgZ(78,"div",35),E.TgZ(79,"div",36),E.TgZ(80,"div",2),E.TgZ(81,"div",37),E.TgZ(82,"h5"),E._uU(83),E.ALo(84,"translate"),E.ALo(85,"titlecase"),E.qZA(),E.qZA(),E._UZ(86,"div",38),E.qZA(),E.qZA(),E.TgZ(87,"div",39),E.YNc(88,ee,19,11,"a",40),E.ALo(89,"slice"),E.YNc(90,te,7,3,"ng-container",10),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.TgZ(91,"div",41),E.TgZ(92,"div",33),E.TgZ(93,"div",42),E.TgZ(94,"div",43),E.TgZ(95,"div",44),E.TgZ(96,"div",45),E.TgZ(97,"div",46),E.TgZ(98,"div",47),E.TgZ(99,"div",2),E.TgZ(100,"div",48),E.TgZ(101,"h4",49),E._uU(102),E.ALo(103,"translate"),E.qZA(),E.qZA(),E.TgZ(104,"div",50),E.TgZ(105,"button",51),E.NdJ("click",function(){return t.isSave?null:t.submit()}),E._UZ(106,"i",52),E.YNc(107,ie,3,3,"ng-container",10),E.YNc(108,ne,3,3,"ng-container",10),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.TgZ(109,"div",53),E.TgZ(110,"form",54),E.TgZ(111,"div",55),E.TgZ(112,"label",56),E._uU(113),E.ALo(114,"translate"),E.TgZ(115,"span",57),E._uU(116,"*"),E.qZA(),E.qZA(),E.TgZ(117,"input",58),E.NdJ("ngModelChange",function(e){return t.entitySub.title=e}),E.qZA(),E.qZA(),E.TgZ(118,"div",55),E.TgZ(119,"label",59),E._uU(120),E.ALo(121,"translate"),E.ALo(122,"translate"),E.qZA(),E.TgZ(123,"input",60),E.NdJ("ngModelChange",function(e){return t.flagShow=e}),E.qZA(),E.qZA(),E.YNc(124,ae,7,15,"div",61),E.TgZ(125,"div",62),E.TgZ(126,"label",63),E._uU(127),E.ALo(128,"translate"),E.qZA(),E.TgZ(129,"ck-editor",64),E.NdJ("ngModelChange",function(e){return t.entitySub.content=e}),E.qZA(),E.qZA(),E.TgZ(130,"div",55),E.TgZ(131,"label",65),E._uU(132),E.ALo(133,"translate"),E.qZA(),E.TgZ(134,"input",66,67),E.NdJ("change",function(e){E.CHM(i);var n=E.MAs(135);return t.fileEvent(e,n)}),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.YNc(136,Te,40,31,"div",68),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA()}2&e&&(E.xp6(10),E.Q6J("ngIf",null==t.user.avatar),E.xp6(1),E.Q6J("ngIf",null!=t.user.avatar),E.xp6(3),E.Oqu(t.user.name),E.xp6(2),E.Oqu(t.user.email),E.xp6(4),E.AsE("",E.lcZ(21,41,"Title"),": ",t.entity.title,""),E.xp6(3),E.AsE("",E.lcZ(24,43,"Content"),": ",t.entity.description,""),E.xp6(3),E.hij("",E.lcZ(27,45,"Assigned to"),":"),E.xp6(4),E.Q6J("ngForOf",t.related_users),E.xp6(1),E.Q6J("ngIf",t.ccList.length>0),E.xp6(5),E.hij(" ",E.lcZ(37,47,"Return")," "),E.xp6(2),E.Q6J("ngIf",0==t.entity.is_active),E.xp6(3),E.Q6J("ngIf",!t._flagAllowCC&&1!=t.entity.is_active),E.xp6(5),E.hij(" ",E.lcZ(47,49,"Important"),""),E.xp6(3),E.hij("(",t.getUserEmail("important").length,")"),E.xp6(5),E.hij(" ",E.lcZ(55,51,"Favourite"),""),E.xp6(3),E.hij("(",t.getUserEmail("favourite").length,")"),E.xp6(5),E.hij(" ",E.lcZ(63,53,"All"),""),E.xp6(3),E.hij("(",t.getUserEmail("allmail").length,")"),E.xp6(5),E.hij(" ",E.lcZ(71,55,"Pending"),""),E.xp6(2),E.Q6J("ngClass",0==t.getUserEmail("pending").length?"badge pull-right digits":"badge pull-right text-danger digits"),E.xp6(1),E.hij("(",t.getUserEmail("pending").length,")"),E.xp6(1),E.Q6J("ngIf",!t._flagAllowCC),E.xp6(9),E.hij(" ",E.lcZ(84,57,t.type?E.lcZ(85,59,"allmail"==t.type?"All":t.type):"All")," "),E.xp6(5),E.Q6J("ngForOf",E.Dn7(89,61,t.getUserEmail(t.type?t.type:"allmail"),0,7)),E.xp6(2),E.Q6J("ngIf",!t.getUserEmail(t.type?t.type:"allmail").length),E.xp6(6),E.Q6J("ngClass",E.VKq(77,ye,t.compose)),E.xp6(6),E.Oqu(E.lcZ(103,65,"New message")),E.xp6(5),E.Q6J("ngIf",!t.isSave),E.xp6(1),E.Q6J("ngIf",t.isSave),E.xp6(5),E.hij("",E.lcZ(114,67,"Title")," "),E.xp6(4),E.Q6J("ngModel",t.entitySub.title),E.xp6(3),E.AsE(" ",E.lcZ(121,69,"Shown")," / ",E.lcZ(122,71,"Hidden"),"?"),E.xp6(3),E.Q6J("ngModel",t.flagShow),E.xp6(1),E.Q6J("ngIf",t.flagShow),E.xp6(3),E.Oqu(E.lcZ(128,73,"Description")),E.xp6(2),E.Q6J("ngModel",t.entitySub.content),E.xp6(3),E.Oqu(E.lcZ(133,75,"Attachment")),E.xp6(4),E.Q6J("ngIf",null!=t.selectEmail))},directives:[r.O5,r.sg,x.yS,r.mk,A._Y,A.JL,A.F,A.Fj,A.Q7,A.JJ,A.On,A.Wl,J.u,C._L,W.w9,Z.Qt],pipes:[O.X$,r.rS,r.OU,r.uU],styles:[".btn-file[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;text-align:right;opacity:0;outline:none;background:#fff;cursor:pointer;display:block}"]}),be),Se=l(16738),ke=l(21388);function we(e,t){1&e&&E._UZ(0,"img",31)}function Ee(e,t){1&e&&(E.ynx(0),E.TgZ(1,"tr"),E.TgZ(2,"td",32),E.TgZ(3,"h3",33),E._uU(4),E.ALo(5,"translate"),E.qZA(),E.qZA(),E.qZA(),E.BQk()),2&e&&(E.xp6(4),E.hij(" ",E.lcZ(5,1,"No records now!!!")," "))}function Ue(e,t){if(1&e&&(E.ynx(0),E._uU(1),E.ALo(2,"date"),E.BQk()),2&e){var i=E.oxw().$implicit;E.xp6(1),E.Oqu(E.xi3(2,1,i.valid_date,"dd/MM/yyyy HH:mm"))}}function Me(e,t){1&e&&(E.ynx(0),E._uU(1),E.ALo(2,"translate"),E.BQk()),2&e&&(E.xp6(1),E.Oqu(E.lcZ(2,1,"Indefinite")))}function Ce(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",44),E.BQk()),2&e){var i=E.oxw().$implicit,n=E.oxw(2);E.xp6(1),E.s9C("alt",i.name),E.Q6J("src",n.baseFolder+"/"+i.avatar,E.LSH)("ngbTooltip",i.name)}}function Ne(e,t){if(1&e&&(E.ynx(0),E._UZ(1,"img",45),E.BQk()),2&e){var i=E.oxw().$implicit;E.xp6(1),E.s9C("alt",i.name),E.Q6J("ngbTooltip",i.name)}}function De(e,t){if(1&e&&(E.TgZ(0,"li",43),E.YNc(1,Ce,2,3,"ng-container",28),E.YNc(2,Ne,2,2,"ng-container",28),E.qZA()),2&e){var i=t.$implicit;E.xp6(1),E.Q6J("ngIf",null!=i.avatar),E.xp6(1),E.Q6J("ngIf",null==i.avatar)}}function Je(e,t){1&e&&(E.TgZ(0,"span",46),E._uU(1),E.ALo(2,"translate"),E.qZA()),2&e&&(E.xp6(1),E.Oqu(E.lcZ(2,1,"Opening")))}function We(e,t){1&e&&(E.TgZ(0,"span",47),E._uU(1),E.ALo(2,"translate"),E.qZA()),2&e&&(E.xp6(1),E.Oqu(E.lcZ(2,1,"Completed")))}function Oe(e,t){1&e&&(E.TgZ(0,"span",48),E._uU(1),E.ALo(2,"translate"),E.qZA()),2&e&&(E.xp6(1),E.Oqu(E.lcZ(2,1,"Cancel")))}function Re(e,t){1&e&&E._UZ(0,"span")}function Ie(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"button",52),E.NdJ("click",function(){E.CHM(i);var e=E.oxw(2).$implicit;return E.oxw().deleteItem(e)}),E.ALo(1,"translate"),E._UZ(2,"i",53),E.qZA()}2&e&&E.Q6J("ngbTooltip",E.lcZ(1,1,"Delete"))}function Le(e,t){if(1&e){var i=E.EpF();E.ynx(0),E.TgZ(1,"button",49),E.NdJ("click",function(){E.CHM(i);var e=E.oxw().$implicit,t=E.oxw(),n=E.MAs(81);return t._openModal(n,e)}),E.ALo(2,"translate"),E._UZ(3,"i",50),E.qZA(),E.YNc(4,Ie,3,3,"button",51),E.BQk()}if(2&e){var n=E.oxw().$implicit;E.xp6(1),E.Q6J("ngbTooltip",E.lcZ(2,2,"Edit")),E.xp6(3),E.Q6J("ngIf",0==n.is_active)}}function Qe(e,t){if(1&e){var i=E.EpF();E.ynx(0),E.TgZ(1,"tr"),E.TgZ(2,"td",27),E._uU(3),E.qZA(),E.TgZ(4,"td",27),E.TgZ(5,"a",34),E._uU(6),E.qZA(),E.qZA(),E.TgZ(7,"td",27),E.YNc(8,Ue,3,4,"ng-container",28),E.YNc(9,Me,3,3,"ng-container",28),E.qZA(),E.TgZ(10,"td",27),E.TgZ(11,"div",35),E.TgZ(12,"ul"),E.YNc(13,De,3,2,"li",36),E.qZA(),E.qZA(),E.qZA(),E.TgZ(14,"td",37),E.NdJ("click",function(){var e=E.CHM(i).$implicit,t=E.oxw();return 0==e.is_active?t._addReminder(e):null}),E._UZ(15,"i",38),E.ALo(16,"translate"),E.TgZ(17,"span",39),E._uU(18),E.qZA(),E.qZA(),E.TgZ(19,"td",27),E._uU(20),E.ALo(21,"translate"),E.qZA(),E.TgZ(22,"td",27),E.YNc(23,Je,3,3,"span",40),E.YNc(24,We,3,3,"span",41),E.YNc(25,Oe,3,3,"span",42),E.qZA(),E.TgZ(26,"td"),E.YNc(27,Re,1,0,"span",28),E.qZA(),E.TgZ(28,"td",27),E.YNc(29,Le,5,4,"ng-container",28),E.qZA(),E.qZA(),E.BQk()}if(2&e){var n=t.$implicit,a=t.index,l=E.oxw();E.xp6(3),E.hij(" ",a+1," "),E.xp6(2),E.MGl("routerLink","/tasks/requests/detail/",n.id,""),E.xp6(1),E.Oqu(n.title),E.xp6(2),E.Q6J("ngIf",null!=n.valid_date),E.xp6(1),E.Q6J("ngIf",null==n.valid_date),E.xp6(4),E.Q6J("ngForOf",n.related_users.data),E.xp6(2),E.Q6J("ngbTooltip",E.lcZ(16,16,"Reminder")),E.xp6(3),E.Oqu(null==n.reminder?0:n.reminder),E.xp6(2),E.lnq(" ",E.lcZ(21,18,"Viewed")," (",n.count_view,"/",n.total_users,") "),E.xp6(3),E.Q6J("ngIf",0==n.is_active),E.xp6(1),E.Q6J("ngIf",1==n.is_active),E.xp6(1),E.Q6J("ngIf",2==n.is_active),E.xp6(2),E.Q6J("ngIf",1==n.is_active),E.xp6(2),E.Q6J("ngIf",n.created_by==l.user.id)}}function Fe(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"a",76),E.NdJ("click",function(){return E.CHM(i),E.oxw(2).turnOnFlagCC()}),E._uU(1),E.ALo(2,"translate"),E.qZA()}2&e&&(E.xp6(1),E.Oqu(E.lcZ(2,1,"Cc")))}function Ye(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"div",60),E.TgZ(1,"label",77),E._uU(2),E.ALo(3,"translate"),E.qZA(),E.TgZ(4,"ng-select",78),E.NdJ("ngModelChange",function(e){return E.CHM(i),E.oxw(2).follow_users=e}),E.ALo(5,"translate"),E.ALo(6,"translate"),E.qZA(),E.qZA()}if(2&e){var n=E.oxw(2);E.xp6(2),E.Oqu(E.lcZ(3,10,"Followers")),E.xp6(2),E.Q6J("items",n._usersCc)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",n.follow_users)("placeholder",E.lcZ(5,12,"Please choose"))("notFoundText",E.lcZ(6,14,"Not found item"))("disabled",0!=n.entity.is_active)}}function Ge(e,t){1&e&&(E.ynx(0),E.TgZ(1,"a",79),E._UZ(2,"img",80),E._uU(3),E.ALo(4,"translate"),E.qZA(),E.BQk()),2&e&&(E.xp6(3),E.hij(" ",E.lcZ(4,1,"Processing")," "))}function je(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"button",82),E.NdJ("click",function(){return E.CHM(i),E.oxw(3).saveChange()}),E._uU(1),E.ALo(2,"translate"),E.qZA()}2&e&&(E.xp6(1),E.hij(" ",E.lcZ(2,1,"Save")," "))}function Pe(e,t){if(1&e&&(E.ynx(0),E.YNc(1,je,3,3,"button",81),E.BQk()),2&e){var i=E.oxw(2);E.xp6(1),E.Q6J("ngIf",!i.isSave)}}var He=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm:ss",containerClass:"theme-dark-blue"}};function Be(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"div",54),E.TgZ(1,"h4",55),E._uU(2),E.ALo(3,"translate"),E.qZA(),E.TgZ(4,"button",56),E.NdJ("click",function(){return E.CHM(i).$implicit.dismiss("Cross click")}),E.TgZ(5,"span",57),E._uU(6,"\xd7"),E.qZA(),E.qZA(),E.qZA(),E.TgZ(7,"div",58),E.TgZ(8,"div",59),E.TgZ(9,"div",60),E.TgZ(10,"label",61),E._uU(11),E.ALo(12,"translate"),E.TgZ(13,"span",33),E._uU(14,"*"),E.qZA(),E.qZA(),E.TgZ(15,"input",62),E.NdJ("ngModelChange",function(e){return E.CHM(i),E.oxw().entity.title=e}),E.qZA(),E.qZA(),E.TgZ(16,"div",60),E.TgZ(17,"label",63),E._uU(18),E.ALo(19,"translate"),E.TgZ(20,"span",33),E._uU(21,"*"),E.qZA(),E.qZA(),E.TgZ(22,"textarea",64),E.NdJ("ngModelChange",function(e){return E.CHM(i),E.oxw().entity.description=e}),E.qZA(),E.qZA(),E.TgZ(23,"div",60),E.TgZ(24,"label",65),E._uU(25),E.ALo(26,"translate"),E.TgZ(27,"span",66),E._uU(28,"*"),E.qZA(),E.YNc(29,Fe,3,3,"a",67),E.qZA(),E.TgZ(30,"ng-select",68),E.NdJ("ngModelChange",function(e){return E.CHM(i),E.oxw().related_users=e})("change",function(){return E.CHM(i),E.oxw().changeUserCC()}),E.ALo(31,"translate"),E.ALo(32,"translate"),E.qZA(),E.qZA(),E.YNc(33,Ye,7,16,"div",69),E.TgZ(34,"div",60),E.TgZ(35,"label",70),E._uU(36),E.ALo(37,"translate"),E.qZA(),E.TgZ(38,"input",71),E.NdJ("ngModelChange",function(e){return E.CHM(i),E.oxw().jdate=e})("bsValueChange",function(e){return E.CHM(i),E.oxw().orgValueChange(e)}),E.ALo(39,"translate"),E.qZA(),E.qZA(),E.TgZ(40,"div",60),E.TgZ(41,"label",72),E._uU(42),E.ALo(43,"translate"),E.qZA(),E.TgZ(44,"nz-tree-select",73),E.NdJ("ngModelChange",function(e){return E.CHM(i),E.oxw()._parentIds=e}),E.ALo(45,"translate"),E.ALo(46,"translate"),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.TgZ(47,"div",74),E.TgZ(48,"button",75),E.NdJ("click",function(){return E.CHM(i).$implicit.dismiss("Cross click")}),E._uU(49),E.ALo(50,"translate"),E.qZA(),E.YNc(51,Ge,5,3,"ng-container",28),E.YNc(52,Pe,2,1,"ng-container",28),E.qZA()}if(2&e){var n=E.oxw();E.xp6(2),E.AsE(" ",E.lcZ(3,34,"ADD"==n._flagModal?"Add new":"Update")," ",n._title," "),E.xp6(9),E.hij("",E.lcZ(12,36,"Title")," "),E.xp6(4),E.Q6J("ngModel",n.entity.title)("disabled",0!=n.entity.is_active),E.xp6(3),E.hij("",E.lcZ(19,38,"Content")," "),E.xp6(4),E.Q6J("ngModel",n.entity.description)("disabled",0!=n.entity.is_active),E.xp6(3),E.hij("",E.lcZ(26,40,"Assigned to")," "),E.xp6(4),E.Q6J("ngIf",0==n.entity.is_active),E.xp6(1),E.Q6J("items",n._users)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",n.related_users)("placeholder",E.lcZ(31,42,"Please choose"))("notFoundText",E.lcZ(32,44,"Not found item"))("disabled",0!=n.entity.is_active),E.xp6(3),E.Q6J("ngIf",n.flagCc),E.xp6(3),E.Oqu(E.lcZ(37,46,"Valid date")),E.xp6(2),E.Q6J("placeholder",E.lcZ(39,48,"Indefinite"))("ngModel",n.jdate)("bsConfig",E.DdM(58,He))("disabled",0!=n.entity.is_active),E.xp6(4),E.Oqu(E.lcZ(43,50,"Related task")),E.xp6(2),E.s9C("nzPlaceHolder",E.lcZ(45,52,"Please choose")),E.s9C("nzNotFoundContent",E.lcZ(46,54,"Not found")),E.Q6J("ngModel",n._parentIds)("nzNodes",n._taskrelative)("disabled",0!=n.entity.is_active),E.xp6(5),E.hij(" ",E.lcZ(50,56,"Close")," "),E.xp6(2),E.Q6J("ngIf",n.isSave),E.xp6(1),E.Q6J("ngIf",0==n.entity.is_active)}}var ze=[{path:"",children:[{path:"requests",component:function(){var t=function(){function t(e,n,a,l,r,s,o,c,u,d){i(this,t),this._authenService=e,this._dataService=n,this._route=a,this._notifyService=l,this._uploadService=r,this._excelService=s,this._numberFormat=o,this.modalService=c,this._utilyService=u,this.sanitizer=d,this._keyword="",this.baseFolder=q.h.BASE_API,this._isLoading=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._requestslist=[],this._title="",this._flagModal="ADD",this.isSave=!1,this.entity={},this.related_users=[],this.follow_users=[],this._users=[],this._usersCc=[],this.jdate=null,this.flagCc=!1,this._taskrelative=[],this._parentIds=[],this.socket=b()(q.h.BASE_API)}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadUsersWithDept(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var t=this;this._isLoading=!0;var i={};i.page=this.pageIndex,i.limit=this.pageSize,i.filter=this._keyword,i.userid=this.user.id,this._dataService.post("/tasks/getall",i).subscribe(function(i){console.log("test",i);var n,a=[],l=e(i.data);try{for(l.s();!(n=l.n()).done;){var r=n.value,s=r.related_users.data.filter(function(e){return e.is_view}).length;r.count_view=s,r.total_users=r.related_users.data.length,a.push(r)}}catch(o){l.e(o)}finally{l.f()}t._requestslist=a,t.totalRow=i.rowCount,t.totalPage=i.totalPages,t._isLoading=!1})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadUsersWithDept",value:function(){var t=this,i={};i.short_code=this.user.short_code,this._dataService.post("/cat-submission/getallUsersNP",i).subscribe(function(i){console.log(i),t._users=i.data;var n=[];if(null!=t.entity.follow_users){var a,l=e(t._users);try{var r=function(){var e=a.value;null!=t.entity.follow_users&&0==JSON.parse(t.entity.follow_users).filter(function(t){return t==e.id}).length&&n.push(e)};for(l.s();!(a=l.n()).done;)r()}catch(s){l.e(s)}finally{l.f()}t._usersCc=n}else t._usersCc=t._users})}},{key:"changeUserCC",value:function(){var t=this;if(console.log("Before",this.related_users,this.follow_users),0==this.related_users.length)this.entity.related_users=null;else{var i,n=[],a=[],l=e(this.related_users);try{var r=function(){var e=i.value,l=t._users.filter(function(t){return t.id==e})[0];n.push({id:e,name:l.name,avatar:l.avatar,is_view:!1}),a.push(e)};for(l.s();!(i=l.n()).done;)r()}catch(d){l.e(d)}finally{l.f()}this.entity.related_users={data:n},this.entity.joined_users=0==a.length?null:JSON.stringify(a)}var s,o=[],c=e(this._users);try{var u=function(){var e=s.value;0==t.related_users.filter(function(t){return t==e.id}).length&&o.push(e)};for(c.s();!(s=c.n()).done;)u()}catch(d){c.e(d)}finally{c.f()}this._usersCc=o}},{key:"turnOnFlagCC",value:function(){var t=this;if(this.flagCc=!this.flagCc,this.flagCc){var i,n=[],a=e(this._users);try{var l=function(){var e=i.value;0==t.related_users.filter(function(t){return t==e.id}).length&&n.push(e)};for(a.s();!(i=a.n()).done;)l()}catch(r){a.e(r)}finally{a.f()}this._usersCc=n}}},{key:"_openModal",value:function(e,t){null==t?(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.title=null,this.entity.description=null,this.related_users=[],this.entity.related_users={data:[]},this.follow_users=[],this.jdate=null,this.entity.valid_date=null,this.entity.is_active=0,this.entity.created_by=this.user.id):(this._flagModal="UPDATE",this.loadDetailById(t.id)),this.modalService.open(e,{size:"md",centered:!0,backdrop:!1})}},{key:"loadDetailById",value:function(t){var i=this;this._dataService.post("/tasks/detail",{id:t}).subscribe(function(t){i.entity=t.data;var n,a=[],l=e(t.data.related_users.data);try{for(l.s();!(n=l.n()).done;){var r=n.value;a.push(r.id)}}catch(d){l.e(d)}finally{l.f()}if(i.related_users=a,null!=t.data.valid_date&&(i.jdate=new Date(t.data.valid_date),i.entity.valid_date=Se(new Date(i.jdate)).format("DD/MM/YYYY HH:mm:ss")),null!=t.data.follow_users){i.flagCc=!0,i.follow_users=JSON.parse(t.data.follow_users);var s,o=[],c=e(i._users);try{var u=function(){var e=s.value;0==t.data.related_users.data.filter(function(t){return t.id==e.id}).length&&o.push(e)};for(c.s();!(s=c.n()).done;)u()}catch(d){c.e(d)}finally{c.f()}i._usersCc=o}else i.flagCc=!1,i.follow_users=[]})}},{key:"orgValueChange",value:function(e){null!=e&&"Invalid date"!=e?(this.jdate=e,this.entity.valid_date=Se(this.jdate).format("YYYY-MM-DD HH:mm:ss")):(this.jdate=null,this.entity.valid_date=null)}},{key:"saveChange",value:function(){var e=this;this.entity.follow_users=0==this.follow_users.length?null:JSON.stringify(this.follow_users),this.isSave=!0,"ADD"==this._flagModal?this._dataService.post("/tasks/add",this.entity).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?S.W.MSG_ADDNO_EN:S.W.MSG_ADDNO,"en"==e.user.lang?S.W.error_title_en:S.W.error_title):(e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?S.W.MSG_ADD_EN:S.W.MSG_ADD,"OK"),e.modalService.dismissAll())},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==e.user.lang?S.W.error_title_en:S.W.error_title)}):this._dataService.post("/tasks/update",this.entity).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?S.W.MSG_UPDATENO_EN:S.W.MSG_UPDATENO,"en"==e.user.lang?S.W.error_title_en:S.W.error_title):(e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"),e.modalService.dismissAll())},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==e.user.lang?S.W.error_title_en:S.W.error_title)})}},{key:"_addReminder",value:function(e){var t=this;w().fire({title:"en"==this.user.lang?S.W.are_you_sure2send_en:S.W.are_you_sure2send,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?S.W.cancel_en:S.W.cancel,confirmButtonText:"en"==this.user.lang?S.W.confirmtext_en:S.W.confirmtext}).then(function(i){i.value&&t._dataService.post("/tasks/addReminder",{id:e.id}).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)})})}},{key:"deleteItem",value:function(e){var t=this;w().fire({title:"en"==this.user.lang?S.W.are_you_sure_cancel_en:S.W.are_you_sure_cancel,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?S.W.cancel_en:S.W.cancel,confirmButtonText:"en"==this.user.lang?S.W.confirmtext_en:S.W.confirmtext}).then(function(i){i.value&&(e.is_active=2,t._dataService.post("/tasks/update",e).subscribe(function(e){t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?S.W.MSG_UPDATE_EN:S.W.MSG_UPDATE,"OK")},function(){t._notifyService.showError("en"==t.user.lang?S.W.MSG_ERROR_EN:S.W.MSG_ERROR,"en"==t.user.lang?S.W.error_title_en:S.W.error_title)}))})}},{key:"loadTaskRelative",value:function(){var t=this,i={};i.userid=this.user.id,this._dataService.post("/tasks/getallrelative",i).subscribe(function(i){var n,a=[],l=e(i.data);try{for(l.s();!(n=l.n()).done;){var r=n.value;t.entity.id!=r.id&&a.push({key:r.id,title:r.title,parent_id:null,value:r.id})}}catch(o){l.e(o)}finally{l.f()}var s=t._utilyService.UnflattenFunc(a);t._taskrelative=s})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(E.Y36(u.e),E.Y36(c.D),E.Y36(x.F0),E.Y36(U.c),E.Y36(o.C),E.Y36(s.x),E.Y36(M.p),E.Y36(C.FF),E.Y36(N.t),E.Y36(D.H7))},t.\u0275cmp=E.Xpm({type:t,selectors:[["app-task-request"]],decls:82,vars:75,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-body"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate",2,"width","15px"],[1,"text-truncate"],[4,"ngIf"],[4,"ngFor","ngForOf"],["popupWorkModal",""],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","9",2,"text-align","center"],[1,"text-danger"],["href","javascript:;",1,"text-danger",3,"routerLink"],[1,"customers","d-inline-block","avatar-group"],["class","d-inline-block",4,"ngFor","ngForOf"],[1,"text-truncate",2,"cursor","pointer",3,"click"],[1,"fa","fa-bell-o",2,"font-size","14pt",3,"ngbTooltip"],[1,"badge-pill","badge-danger"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"d-inline-block"],[1,"img-40","rounded-circle",3,"src","alt","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"img-40","rounded-circle",3,"alt","ngbTooltip"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],["class","btn btn-sm btn-danger mr-sm-1",3,"ngbTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"ngbTooltip","click"],[1,"fa","fa-trash"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],[1,"col-md-12"],["for","title"],["type","text","name","title","id","title","autocomplete","off","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","description"],["id","description","rows","3","name","description","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","assignedto"],[1,"text-danger","mr-sm-2"],["href","javascript:;","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["name","_users","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","disabled","ngModelChange","change"],["class","col-md-12",4,"ngIf"],["for","validdate"],["type","text","name","jdate","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","taskrelative"],["name","taskrelative","nzShowSearch","","nzCheckable","",2,"width","100%",3,"ngModel","nzNodes","nzPlaceHolder","disabled","nzNotFoundContent","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],["for","follower"],["name","_usersCc","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","disabled","ngModelChange"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){if(1&e){var i=E.EpF();E.TgZ(0,"div",0),E.TgZ(1,"div",1),E.TgZ(2,"div",2),E.TgZ(3,"div",3),E.TgZ(4,"div",4),E.TgZ(5,"div",1),E.TgZ(6,"div",5),E.TgZ(7,"div",6),E.TgZ(8,"input",7),E.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),E.ALo(9,"translate"),E.qZA(),E.TgZ(10,"button",8),E.NdJ("click",function(){E.CHM(i);var e=E.MAs(81);return t._openModal(e,null)}),E._uU(11),E.ALo(12,"translate"),E.qZA(),E.YNc(13,we,1,0,"img",9),E.qZA(),E.qZA(),E.TgZ(14,"div",10),E.TgZ(15,"div",11),E.TgZ(16,"select",12),E.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),E.TgZ(17,"option",13),E._uU(18,"#10"),E.qZA(),E.TgZ(19,"option",14),E._uU(20,"#25"),E.qZA(),E.TgZ(21,"option",15),E._uU(22,"#50"),E.qZA(),E.TgZ(23,"option",16),E._uU(24,"#100"),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.TgZ(25,"div",17),E.TgZ(26,"div",18),E.TgZ(27,"div",19),E.TgZ(28,"div",20),E.TgZ(29,"pagination",21),E.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),E.qZA(),E.qZA(),E.TgZ(30,"div",22),E.TgZ(31,"a",23),E._uU(32),E.ALo(33,"translate"),E.ALo(34,"translate"),E.ALo(35,"translate"),E.ALo(36,"translate"),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.TgZ(37,"div",24),E.TgZ(38,"table",25),E.TgZ(39,"thead"),E.TgZ(40,"th",26),E._uU(41,"#"),E.qZA(),E.TgZ(42,"th",27),E._uU(43),E.ALo(44,"translate"),E.qZA(),E.TgZ(45,"th",27),E._uU(46),E.ALo(47,"translate"),E.qZA(),E.TgZ(48,"th",27),E._uU(49),E.ALo(50,"translate"),E.qZA(),E.TgZ(51,"th",27),E._uU(52),E.ALo(53,"translate"),E.qZA(),E.TgZ(54,"th",27),E._uU(55),E.ALo(56,"translate"),E.qZA(),E.TgZ(57,"th",27),E._uU(58),E.ALo(59,"translate"),E.qZA(),E.TgZ(60,"th",27),E._uU(61),E.ALo(62,"translate"),E.qZA(),E.TgZ(63,"th",27),E._uU(64),E.ALo(65,"translate"),E.qZA(),E.qZA(),E.TgZ(66,"tbody"),E.YNc(67,Ee,6,3,"ng-container",28),E.YNc(68,Qe,30,20,"ng-container",29),E.qZA(),E.qZA(),E.qZA(),E.TgZ(69,"div",18),E.TgZ(70,"div",19),E.TgZ(71,"div",20),E.TgZ(72,"pagination",21),E.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),E.qZA(),E.qZA(),E.TgZ(73,"div",22),E.TgZ(74,"a",23),E._uU(75),E.ALo(76,"translate"),E.ALo(77,"translate"),E.ALo(78,"translate"),E.ALo(79,"translate"),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.YNc(80,Be,53,59,"ng-template",null,30,E.W1O)}2&e&&(E.xp6(8),E.Q6J("placeholder",E.lcZ(9,39,"Search"))("ngModel",t._keyword),E.xp6(3),E.hij(" ",E.lcZ(12,41,"Add new request")," "),E.xp6(2),E.Q6J("ngIf",t._isLoading),E.xp6(3),E.Q6J("ngModel",t.pageSize),E.xp6(13),E.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),E.xp6(3),E.Q0o("",E.lcZ(33,43,"Total of records"),": ",t.totalRow," - ",E.lcZ(34,45,"Page")," ",t.pageIndex," ",E.lcZ(35,47,"of")," ",t.totalPage," ",E.lcZ(36,49,"page"),""),E.xp6(11),E.Oqu(E.lcZ(44,51,"Title")),E.xp6(3),E.hij(" ",E.lcZ(47,53,"Valid date")," "),E.xp6(3),E.hij(" ",E.lcZ(50,55,"Assigned to")," "),E.xp6(3),E.hij(" ",E.lcZ(53,57,"Reminder")," "),E.xp6(3),E.hij(" ",E.lcZ(56,59,"Joined")," "),E.xp6(3),E.Oqu(E.lcZ(59,61,"Status")),E.xp6(3),E.Oqu(E.lcZ(62,63,"Time")),E.xp6(3),E.Oqu(E.lcZ(65,65,"Actions")),E.xp6(3),E.Q6J("ngIf",0==t._requestslist.length),E.xp6(1),E.Q6J("ngForOf",t._requestslist),E.xp6(4),E.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),E.xp6(3),E.Q0o("",E.lcZ(76,67,"Total of records"),": ",t.totalRow," - ",E.lcZ(77,69,"Page")," ",t.pageIndex," ",E.lcZ(78,71,"of")," ",t.totalPage," ",E.lcZ(79,73,"page"),""))},directives:[A.Fj,A.JJ,A.On,r.O5,A.EJ,A.YN,A.Kr,Z.Qt,r.sg,x.yS,C._L,A.Q7,W.w9,h.Y5,h.Np,ke.zr],pipes:[O.X$,r.uU],styles:[""]}),t}(),data:{title:"Requests",breadcrumb:"Requests"}},{path:"requests/detail/:id",component:qe,data:{title:"Details",breadcrumb:"Details"}}]}],$e=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=E.oAB({type:e}),e.\u0275inj=E.cJS({imports:[[x.Bz.forChild(ze)],x.Bz]}),e}(),Ke=l(25689),Ve=l(72808),Xe=l(36845),et=l(16417),tt=l(45593),it=l(3621),nt=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=E.oAB({type:e}),e.\u0275inj=E.cJS({providers:[u.e,c.D,o.C,s.x,O.sK,M.p],imports:[[r.ez,$e,A.u5,m.JX,v.m9,O.aw,_.mr,h.kn.forRoot(),Z.u3.forRoot(),p.f.forRoot(),f.zk.forRoot(),et.xc,g.P4,d.F5,Ke.kW,C.IJ,W.A0,Ve.yI.forRoot(),Xe.Xd,tt.s8,J.d,ke.cq,it.xC]]}),e}()},59543:function(e,t,n){n.d(t,{p:function(){return s}});var l,r=n(37716),s=((l=function(){function e(){i(this,e)}return a(e,[{key:"transform",value:function(e){return this.localeString(e)}},{key:"missingOneDecimalCheck",value:function(e){var t=(e+="").split(",")[1];return!(!t||1!==t.length)}},{key:"missingAllDecimalsCheck",value:function(e){return!(e+="").split(",")[1]}},{key:"missingOneDecimalCheck1",value:function(e){var t=(e+="").split(".")[1];return!(!t||1!==t.length)}},{key:"missingAllDecimalsCheck1",value:function(e){return!(e+="").split(".")[1]}},{key:"localeString",value:function(e){if(""===e)return"";var t,i,n,a,l;for(i=(t=(e+="").split(","))[0],n=t.length>1?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(i);)i=i.replace(a,"$1,$2");if(-1!==i.indexOf("."))l=i.slice(i.lastIndexOf(".")).replace(/\,/g,""),t=i.split(".")[0]+l;else{if(t=i+n,this.missingOneDecimalCheck(t))return t+"0";if(this.missingAllDecimalsCheck(t))return t+""}return t}},{key:"localeStringEn",value:function(e){if(""===e)return"";var t,i,n,a,l;for(i=(t=(e+="").split(","))[0],n=t.length>1?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(i);)i=i.replace(a,"$1,$2");if(-1!==i.indexOf("."))l=i.slice(i.lastIndexOf(".")).replace(/\,/g,""),t=i.split(".")[0]+l;else{if(t=i+n,this.missingOneDecimalCheck(t))return t+"0";if(this.missingAllDecimalsCheck(t))return t+".00"}return t}}]),e}()).\u0275fac=function(e){return new(e||l)},l.\u0275pipe=r.Yjl({name:"numberFormat",type:l,pure:!0}),l)}}])}();