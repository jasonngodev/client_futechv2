!function(){"use strict";function e(e,n){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw r}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(self.webpackChunkendless=self.webpackChunkendless||[]).push([[4096],{4096:function(t,a,o){o.r(a),o.d(a,{RequestModule:function(){return fo}});var r=o(38583),l=o(3679),s=o(39895),c=o(64762),d=o(16738),u=o(49962),g=o.n(u),p=o(65206),_=o(40496),h=o.n(_),m=o(33098),f=o(88259),Z=o.n(f),v=o(29022),x=o(37716),y=o(15483),b=o(65925),A=o(75208),T=o(90217),q=o(49690),M=o(12664),S=o(81946),C=o(72214),w=o(86640),k=o(29790),L=["fileUpload"];function U(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",46),x.NdJ("click",function(){x.CHM(n);var e=x.oxw();return e._exportAll(e._getlist)}),x._UZ(1,"i",47),x._uU(2),x.ALo(3,"translate"),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,1,"Export")," "))}function N(e,t){1&e&&x._UZ(0,"img",48)}function D(e,t){1&e&&(x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",49),x.TgZ(3,"h3",50),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.qZA(),x.BQk()),2&e&&(x.xp6(4),x.hij(" ",x.lcZ(5,1,"No records now!!!")," "))}function I(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",65),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(2).$implicit,t=x.oxw(2),a=x.MAs(108);return t._switchLanguage(a,3,e)}),x._uU(1),x.ALo(2,"translate"),x.qZA()}2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Report standard compared")))}function Y(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",65),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(2).$implicit,t=x.oxw(2),a=x.MAs(108);return t._switchLanguage(a,4,e)}),x._uU(1),x.ALo(2,"translate"),x.qZA()}2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Report standard attached")))}function J(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",61),x.TgZ(1,"button",62),x._UZ(2,"i",63),x.qZA(),x.TgZ(3,"div",64),x.TgZ(4,"a",65),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit,t=x.oxw(2),a=x.MAs(108);return t._switchLanguage(a,0,e)}),x._uU(5),x.ALo(6,"translate"),x.qZA(),x.TgZ(7,"a",65),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit,t=x.oxw(2),a=x.MAs(108);return t._switchLanguage(a,1,e)}),x._uU(8),x.ALo(9,"translate"),x.qZA(),x.YNc(10,I,3,3,"a",66),x.YNc(11,Y,3,3,"a",66),x.qZA(),x.qZA()}if(2&e){var a=x.oxw().$implicit;x.xp6(5),x.Oqu(x.lcZ(6,4,"All")),x.xp6(3),x.Oqu(x.lcZ(9,6,"Report standard")),x.xp6(2),x.Q6J("ngIf",a.flag_compare),x.xp6(1),x.Q6J("ngIf",null!=a.url_img)}}function O(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",68),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(2).$implicit,t=x.oxw(2),a=x.MAs(112);return t._editInformation(a,e)}),x._UZ(1,"i",69),x.qZA()}}function Q(e,t){if(1&e&&(x.ynx(0),x.YNc(1,O,2,0,"a",67),x.BQk()),2&e){var n=x.oxw(3);x.xp6(1),x.Q6J("ngIf",n._authenService.hasPermission("REQ-REPORT","update"))}}function P(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",70),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit,t=x.oxw(2),a=x.MAs(114);return t._authenService.hasPermission("REQ-REPORT","update")?t._popupRepareResults(a,e):null}),x._uU(1),x.qZA()}if(2&e){var a=x.oxw().$implicit;x.xp6(1),x.Oqu(a.report_inner_code)}}function E(e,t){if(1&e&&(x.TgZ(0,"span"),x._uU(1),x.qZA()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.Oqu(n.report_inner_code)}}function R(e,t){1&e&&(x.TgZ(0,"span",71),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Draft")," "))}function F(e,t){1&e&&(x.TgZ(0,"span",72),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Official")," "))}function H(e,t){1&e&&(x.TgZ(0,"span",73),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Evicted")," "))}function W(e,t){1&e&&(x.TgZ(0,"span",74),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Printed")," "))}function j(e,t){1&e&&(x.TgZ(0,"span",75),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Cancel")," "))}function G(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"th",52),x._uU(2),x.qZA(),x.TgZ(3,"td"),x.YNc(4,J,12,8,"div",53),x.YNc(5,Q,2,1,"ng-container",40),x.qZA(),x.TgZ(6,"td"),x.YNc(7,P,2,1,"a",54),x.YNc(8,E,2,1,"span",40),x.qZA(),x.TgZ(9,"td"),x._uU(10),x.qZA(),x.TgZ(11,"td"),x._uU(12),x.qZA(),x.TgZ(13,"td"),x._uU(14),x.ALo(15,"date"),x.qZA(),x.TgZ(16,"td"),x._uU(17),x.ALo(18,"date"),x.qZA(),x.TgZ(19,"td"),x._uU(20),x.qZA(),x.TgZ(21,"td"),x._uU(22),x.qZA(),x.TgZ(23,"td",55),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw(2),a=x.MAs(110);return 2!=e.is_active&&t._authenService.hasPermission("REQ-REPORT","update")?3==e.is_active?t._switchEviction(e):t._popupStates(a,e):null}),x.YNc(24,R,3,3,"span",56),x.YNc(25,F,3,3,"span",57),x.YNc(26,H,3,3,"span",58),x.YNc(27,W,3,3,"span",59),x.YNc(28,j,3,3,"span",60),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(2),x.hij(" ",i+1+o.pageSize*(o.pageIndex-1)," "),x.xp6(2),x.Q6J("ngIf",o._authenService.hasPermission("REQ-REPORT","print")),x.xp6(1),x.Q6J("ngIf",0==a.is_active||1==a.is_active),x.xp6(2),x.Q6J("ngIf",0==a.is_active),x.xp6(1),x.Q6J("ngIf",0!=a.is_active),x.xp6(2),x.hij(" ",a.request_no," "),x.xp6(2),x.hij(" ",a.sample_name," "),x.xp6(2),x.Oqu(x.xi3(15,16,a.received_date,"dd/MM/yyyy HH:mm")),x.xp6(3),x.Oqu(x.xi3(18,19,a.returned_date,"dd/MM/yyyy HH:mm")),x.xp6(3),x.Oqu(a.company_sender_l),x.xp6(2),x.Oqu(a.sender_name),x.xp6(2),x.Q6J("ngIf",0==a.is_active),x.xp6(1),x.Q6J("ngIf",1==a.is_active),x.xp6(1),x.Q6J("ngIf",2==a.is_active),x.xp6(1),x.Q6J("ngIf",3==a.is_active),x.xp6(1),x.Q6J("ngIf",4==a.is_active)}}function B(e,t){if(1&e&&(x.ynx(0),x.YNc(1,G,29,22,"tr",51),x.BQk()),2&e){var n=x.oxw();x.xp6(1),x.Q6J("ngForOf",n._getlist)}}function z(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",76),x.TgZ(1,"div",77),x.TgZ(2,"h4",78),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"button",79),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(6,"span",80),x._uU(7,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",81),x.TgZ(9,"div",82),x.TgZ(10,"div",83),x.TgZ(11,"div",84),x.TgZ(12,"button",85),x.NdJ("click",function(){return x.CHM(n),x.oxw()._print("vn")}),x._uU(13),x.ALo(14,"translate"),x.qZA(),x.TgZ(15,"button",86),x.NdJ("click",function(){return x.CHM(n),x.oxw()._print("en")}),x._uU(16),x.ALo(17,"translate"),x.qZA(),x.TgZ(18,"button",87),x.NdJ("click",function(){return x.CHM(n),x.oxw()._print("0")}),x._uU(19),x.ALo(20,"translate"),x.ALo(21,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}2&e&&(x.xp6(3),x.hij(" ",x.lcZ(4,5,"Language")," "),x.xp6(10),x.hij(" ",x.lcZ(14,7,"Vietnamese")," "),x.xp6(3),x.hij(" ",x.lcZ(17,9,"English")," "),x.xp6(3),x.AsE(" ",x.lcZ(20,11,"Vietnamese"),"/",x.lcZ(21,13,"English")," "))}function V(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",76),x.TgZ(1,"div",77),x.TgZ(2,"h4",78),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"button",79),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(6,"span",80),x._uU(7,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",81),x.TgZ(9,"div",82),x.TgZ(10,"div",83),x.TgZ(11,"div",84),x.TgZ(12,"select",88),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().changeState=e})("change",function(){return x.CHM(n),x.oxw()._updateState()}),x.TgZ(13,"option",89),x._uU(14),x.ALo(15,"translate"),x.qZA(),x.TgZ(16,"option",89),x._uU(17),x.ALo(18,"translate"),x.qZA(),x.TgZ(19,"option",89),x._uU(20),x.ALo(21,"translate"),x.qZA(),x.TgZ(22,"option",89),x._uU(23),x.ALo(24,"translate"),x.qZA(),x.TgZ(25,"option",89),x._uU(26),x.ALo(27,"translate"),x.qZA(),x.TgZ(28,"option",89),x._uU(29),x.ALo(30,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(3),x.AsE(" ",x.lcZ(4,15,"Status")," - ",a._titleLanguage," "),x.xp6(9),x.Q6J("ngModel",a.changeState),x.xp6(1),x.Q6J("value",null),x.xp6(1),x.Oqu(x.lcZ(15,17,"Please choose")),x.xp6(2),x.Q6J("value",0),x.xp6(1),x.Oqu(x.lcZ(18,19,"Draft")),x.xp6(2),x.Q6J("value",1),x.xp6(1),x.Oqu(x.lcZ(21,21,"Official")),x.xp6(2),x.Q6J("value",2),x.xp6(1),x.Oqu(x.lcZ(24,23,"Evicted")),x.xp6(2),x.Q6J("value",3),x.xp6(1),x.Oqu(x.lcZ(27,25,"Printed")),x.xp6(2),x.Q6J("value",4),x.xp6(1),x.Oqu(x.lcZ(30,27,"Cancel"))}}function $(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"button",113),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return x.oxw(2)._chooseTab(e,e.order_no)}),x._uU(2),x.ALo(3,"translate"),x.qZA(),x.BQk()}if(2&e){var a=t.$implicit,i=x.oxw(2);x.xp6(1),x.Q6J("ngClass",a.order_no==i._currentTabActivated?"btn btn-sm btn-primary":"btn btn-sm btn-secondary"),x.xp6(1),x.AsE(" ",x.lcZ(3,3,"Sample")," ",a.order_no," ")}}var K=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function X(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",76),x.TgZ(1,"div",77),x.TgZ(2,"h4",78),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"button",79),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(6,"span",80),x._uU(7,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",81),x.TgZ(9,"div",82),x.TgZ(10,"div",83),x.TgZ(11,"div",90),x.TgZ(12,"label",91),x._uU(13),x.ALo(14,"translate"),x.TgZ(15,"span",50),x._uU(16,"(*)"),x.qZA(),x.qZA(),x.TgZ(17,"ng-select",92),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.customer_id=e}),x.ALo(18,"translate"),x.ALo(19,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(20,"div",93),x.TgZ(21,"div",90),x.TgZ(22,"label",94),x._uU(23),x.ALo(24,"translate"),x.TgZ(25,"span",50),x._uU(26,"(*)"),x.qZA(),x.qZA(),x.TgZ(27,"input",95),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw()._fdatea=e})("bsValueChange",function(e){return x.CHM(n),x.oxw().orgValueChange1a(e)}),x.ALo(28,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(29,"div",93),x.TgZ(30,"div",90),x.TgZ(31,"label",96),x._uU(32),x.ALo(33,"translate"),x.TgZ(34,"span",50),x._uU(35,"(*)"),x.qZA(),x.qZA(),x.TgZ(36,"input",97),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw()._tdatea=e})("bsValueChange",function(e){return x.CHM(n),x.oxw().orgValueChange2a(e)}),x.ALo(37,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(38,"div",93),x.TgZ(39,"div",90),x.TgZ(40,"label",98),x._uU(41),x.ALo(42,"translate"),x.qZA(),x.TgZ(43,"div",29),x.TgZ(44,"input",99),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.valid_number=e})("change",function(){return x.CHM(n),x.oxw()._calculateDays()}),x.ALo(45,"translate"),x.qZA(),x.TgZ(46,"button",100),x.NdJ("click",function(){return x.CHM(n),x.oxw().saveChangeRequest()}),x._UZ(47,"i",101),x._uU(48),x.ALo(49,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(50,"div",83),x._UZ(51,"hr"),x.TgZ(52,"div",102),x.TgZ(53,"div",103),x.YNc(54,$,4,5,"ng-container",51),x.qZA(),x.qZA(),x._UZ(55,"hr"),x.qZA(),x.TgZ(56,"div",83),x.TgZ(57,"label",104),x._uU(58),x.ALo(59,"translate"),x.qZA(),x.qZA(),x.TgZ(60,"div",105),x.TgZ(61,"div",90),x.TgZ(62,"label",106),x.TgZ(63,"strong"),x._uU(64),x.ALo(65,"translate"),x.qZA(),x.qZA(),x.TgZ(66,"input",107),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.sample_name=e}),x.ALo(67,"translate"),x.qZA(),x.TgZ(68,"input",107),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.sample_name_e=e}),x.ALo(69,"translate"),x.ALo(70,"translate"),x.qZA(),x.TgZ(71,"input",108),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.sample_id=e}),x.qZA(),x.qZA(),x.qZA(),x.TgZ(72,"div",105),x.TgZ(73,"div",90),x.TgZ(74,"label",106),x.TgZ(75,"strong"),x._uU(76),x.ALo(77,"translate"),x.qZA(),x.qZA(),x.TgZ(78,"input",107),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.weight=e}),x.ALo(79,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(80,"div",105),x.TgZ(81,"div",90),x.TgZ(82,"label",106),x.TgZ(83,"strong"),x._uU(84),x.ALo(85,"translate"),x.ALo(86,"translate"),x.qZA(),x.qZA(),x.TgZ(87,"textarea",109),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.description=e}),x.ALo(88,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(89,"div",105),x.TgZ(90,"div",90),x.TgZ(91,"label",106),x.TgZ(92,"strong"),x._uU(93),x.ALo(94,"translate"),x.ALo(95,"translate"),x.ALo(96,"translate"),x.qZA(),x.qZA(),x.TgZ(97,"textarea",109),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.description_e=e}),x.ALo(98,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(99,"div",105),x.TgZ(100,"div",90),x.TgZ(101,"label",106),x.TgZ(102,"strong"),x._uU(103),x.ALo(104,"translate"),x.qZA(),x.qZA(),x.TgZ(105,"textarea",109),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.note=e}),x.ALo(106,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(107,"div",110),x.TgZ(108,"button",111),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x._UZ(109,"i",112),x._uU(110),x.ALo(111,"translate"),x.qZA(),x.TgZ(112,"button",100),x.NdJ("click",function(){return x.CHM(n),x.oxw().saveChangeSample()}),x._UZ(113,"i",101),x._uU(114),x.ALo(115,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(3),x.AsE(" ",x.lcZ(4,69,"Request code")," - ",a._titleLanguage," "),x.xp6(10),x.hij("",x.lcZ(14,71,"Company")," "),x.xp6(4),x.Q6J("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.entity.customer_id)("placeholder",x.lcZ(18,73,"Please choose"))("notFoundText",x.lcZ(19,75,"Not found item")),x.xp6(6),x.hij("",x.lcZ(24,77,"Received date")," "),x.xp6(4),x.Q6J("placeholder",x.lcZ(28,79,"Received date"))("ngModel",a._fdatea)("bsConfig",x.DdM(127,K)),x.xp6(5),x.hij("",x.lcZ(33,81,"Returned date")," "),x.xp6(4),x.Q6J("placeholder",x.lcZ(37,83,"Returned date"))("ngModel",a._tdatea)("bsConfig",x.DdM(128,K)),x.xp6(5),x.Oqu(x.lcZ(42,85,"Valid date")),x.xp6(3),x.Q6J("type","number")("placeholder",x.lcZ(45,87,"Valid date"))("ngModel",a.entity.valid_number)("min",0),x.xp6(4),x.hij(" ",x.lcZ(49,89,"Save")," "),x.xp6(6),x.Q6J("ngForOf",a.entity._samples),x.xp6(4),x.AsE("",x.lcZ(59,91,"Inner code"),": ",a.entity0.inner_code,""),x.xp6(4),x.MGl("for","sn",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(65,93,"Sample name")),x.xp6(2),x.MGl("id","sn",a._currentTabActivated,""),x.MGl("name","sample_name",a._currentTabActivated,""),x.Q6J("placeholder",x.lcZ(67,95,"Sample")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_name),x.xp6(2),x.MGl("id","sne",a._currentTabActivated,""),x.MGl("name","sample_namee",a._currentTabActivated,""),x.Q6J("placeholder",x.lcZ(69,97,"Sample")+"-"+x.lcZ(70,99,"English")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_name_e),x.xp6(3),x.MGl("id","id",a._currentTabActivated,""),x.MGl("name","id",a._currentTabActivated,""),x.Q6J("ngModel",a.entity0.sample_id),x.xp6(3),x.MGl("for","weight",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(77,101,"Weight")),x.xp6(2),x.MGl("id","weight",a._currentTabActivated,""),x.MGl("name","weight",a._currentTabActivated,""),x.Q6J("placeholder",x.lcZ(79,103,"Weight")+" "+a._currentTabActivated)("ngModel",a.entity0.weight),x.xp6(4),x.MGl("for","description",a._currentTabActivated,""),x.xp6(2),x.AsE("",x.lcZ(85,105,"Description")," (",x.lcZ(86,107,"State of sample"),")"),x.xp6(3),x.MGl("id","description",a._currentTabActivated,""),x.MGl("name","description",a._currentTabActivated,""),x.Q6J("placeholder",x.lcZ(88,109,"Description")+" "+a._currentTabActivated)("ngModel",a.entity0.description),x.xp6(4),x.MGl("for","descriptione",a._currentTabActivated,""),x.xp6(2),x.lnq("",x.lcZ(94,111,"Description")," (",x.lcZ(95,113,"State of sample"),") - ",x.lcZ(96,115,"English"),""),x.xp6(4),x.MGl("id","descriptione",a._currentTabActivated,""),x.MGl("name","descriptione",a._currentTabActivated,""),x.Q6J("placeholder",x.lcZ(98,117,"Description")+" "+a._currentTabActivated)("ngModel",a.entity0.description_e),x.xp6(4),x.MGl("for","note",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(104,119,"Note")),x.xp6(2),x.MGl("id","note",a._currentTabActivated,""),x.MGl("name","note",a._currentTabActivated,""),x.Q6J("placeholder",x.lcZ(106,121,"Note")+" "+a._currentTabActivated)("ngModel",a.entity0.note),x.xp6(5),x.hij(" ",x.lcZ(111,123,"Close")," "),x.xp6(4),x.hij(" ",x.lcZ(115,125,"Save")," ")}}function ee(e,t){1&e&&x._UZ(0,"img",48)}function te(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"a",70),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit,t=x.oxw(2),a=x.MAs(116);return t.popupComment(a,e)}),x._uU(2),x.qZA(),x.BQk()}if(2&e){var a=x.oxw().$implicit;x.xp6(2),x.Oqu(a.inner_code)}}function ne(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.Oqu(n.inner_code)}}function ae(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"td",118),x._uU(2),x.qZA(),x.TgZ(3,"td",118),x.YNc(4,te,3,1,"ng-container",40),x.YNc(5,ne,2,1,"ng-container",40),x.qZA(),x.TgZ(6,"td",118),x._uU(7),x.qZA(),x.TgZ(8,"td",39),x._uU(9),x.qZA(),x.TgZ(10,"td"),x.TgZ(11,"input",119),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.lod=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._reupdateInformation(e._getlist2side)}),x.qZA(),x.qZA(),x.TgZ(12,"td",118),x.TgZ(13,"input",119),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.loq=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._reupdateInformation(e._getlist2side)}),x.qZA(),x.qZA(),x.TgZ(14,"td",118),x.TgZ(15,"input",120),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.result_record=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._reupdateInformation(e._getlist2side)}),x.ALo(16,"translate"),x.qZA(),x.TgZ(17,"input",120),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.result_record_e=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._reupdateInformation(e._getlist2side)}),x.ALo(18,"translate"),x.qZA(),x.qZA(),x.TgZ(19,"td",118),x.TgZ(20,"input",119),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.mark=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._reupdateInformation(e._getlist2side)}),x.qZA(),x.qZA(),x.TgZ(21,"td",121),x.TgZ(22,"input",122),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.allow_lod=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._reupdateInformation(e._getlist2side)}),x.qZA(),x.qZA(),x.TgZ(23,"td",118),x.TgZ(24,"input",119),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.compare_note=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._reupdateInformation(e._getlist2side)}),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(2),x.Oqu(i+1),x.xp6(2),x.Q6J("ngIf",o._authenService.hasPermission("REQ-REPORT","update")),x.xp6(1),x.Q6J("ngIf",!o._authenService.hasPermission("REQ-REPORT","update")),x.xp6(2),x.Oqu(a.code),x.xp6(2),x.hij(" ","en"==o.user.lang?a.specification_name_e:a.specification_name_l," "),x.xp6(2),x.MGl("name","lod",i+1,""),x.Q6J("ngModel",a.lod),x.xp6(2),x.MGl("name","loq",i+1,""),x.Q6J("ngModel",a.loq),x.xp6(2),x.MGl("name","result_record",i+1,""),x.Q6J("ngModel",a.result_record)("placeholder",x.lcZ(16,21,"Vietnamese")),x.xp6(2),x.MGl("name","result_record_e",i+1,""),x.Q6J("ngModel",a.result_record_e)("placeholder",x.lcZ(18,23,"English")),x.xp6(3),x.MGl("name","mark",i+1,""),x.Q6J("ngModel",a.mark),x.xp6(2),x.MGl("name","allow_lod",i+1,""),x.Q6J("ngModel",a.allow_lod),x.xp6(2),x.MGl("name","compare_note",i+1,""),x.Q6J("ngModel",a.compare_note)}}function ie(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",76),x.TgZ(1,"div",81),x.TgZ(2,"div",82),x.TgZ(3,"div",83),x.TgZ(4,"label",114),x._uU(5),x.ALo(6,"translate"),x.YNc(7,ee,1,0,"img",19),x.qZA(),x.TgZ(8,"input",115),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw()._keywordAdditional=e})("change",function(){return x.CHM(n),x.oxw().loadLabResultList()})("keyup.enter",function(){return x.CHM(n),x.oxw().loadLabResultList()}),x.qZA(),x.qZA(),x.TgZ(9,"div",83),x.TgZ(10,"div",116),x.TgZ(11,"table",117),x.TgZ(12,"thead"),x.TgZ(13,"th",118),x._uU(14,"#"),x.qZA(),x.TgZ(15,"th",118),x._uU(16),x.ALo(17,"translate"),x.qZA(),x.TgZ(18,"th",118),x._uU(19),x.ALo(20,"translate"),x.qZA(),x.TgZ(21,"th",118),x._uU(22),x.ALo(23,"translate"),x.qZA(),x.TgZ(24,"th"),x._uU(25),x.ALo(26,"translate"),x.qZA(),x.TgZ(27,"th",118),x._uU(28),x.ALo(29,"translate"),x.qZA(),x.TgZ(30,"th",118),x._uU(31),x.ALo(32,"translate"),x.qZA(),x.TgZ(33,"th",118),x._uU(34),x.ALo(35,"translate"),x.qZA(),x.TgZ(36,"th",118),x._uU(37),x.ALo(38,"translate"),x.qZA(),x.TgZ(39,"th",118),x._uU(40),x.ALo(41,"translate"),x.qZA(),x.qZA(),x.TgZ(42,"tbody"),x.YNc(43,ae,25,25,"tr",51),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(5),x.hij("",x.lcZ(6,13,"Search")," "),x.xp6(2),x.Q6J("ngIf",a._isLoadingResult),x.xp6(1),x.Q6J("ngModel",a._keywordAdditional),x.xp6(8),x.Oqu(x.lcZ(17,15,"Inner code")),x.xp6(3),x.Oqu(x.lcZ(20,17,"Code")),x.xp6(3),x.hij(" ",x.lcZ(23,19,"Internal testing")," "),x.xp6(3),x.Oqu(x.lcZ(26,21,"LOD")),x.xp6(3),x.Oqu(x.lcZ(29,23,"LOQ")),x.xp6(3),x.Oqu(x.lcZ(32,25,"Results")),x.xp6(3),x.Oqu(x.lcZ(35,27,"Mark")),x.xp6(3),x.Oqu(x.lcZ(38,29,"Tick LOD?")),x.xp6(3),x.Oqu(x.lcZ(41,31,"Compare")),x.xp6(3),x.Q6J("ngForOf",a._getlist2side)}}function oe(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",137),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(2);return e.removeAttachment(e.entityComment)}),x._UZ(1,"i",138),x.qZA()}}function re(e,t){1&e&&(x.ynx(0),x.TgZ(1,"a",139),x._UZ(2,"img",140),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.BQk()),2&e&&(x.xp6(3),x.hij(" ",x.lcZ(4,1,"Processing"),""))}function le(e,t){1&e&&(x.TgZ(0,"button",141),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Save & close")," "))}function se(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",123,124),x.NdJ("ngSubmit",function(){x.CHM(n);var e=x.oxw();return e.saveChangeComment(e.entityComment,0)}),x.TgZ(2,"div",77),x.TgZ(3,"h4",78),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.TgZ(6,"button",79),x.NdJ("click",function(){return x.CHM(n).$implicit.dismiss("Cross click")}),x.TgZ(7,"span",80),x._uU(8,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(9,"div",81),x.TgZ(10,"div",82),x.TgZ(11,"div",83),x.TgZ(12,"div",90),x.TgZ(13,"label",125),x._uU(14),x.ALo(15,"translate"),x.qZA(),x.TgZ(16,"textarea",126),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entityComment.take_note=e}),x.qZA(),x.qZA(),x.qZA(),x.TgZ(17,"div",83),x.TgZ(18,"div",90),x.TgZ(19,"label",127),x._uU(20),x.ALo(21,"translate"),x.qZA(),x.TgZ(22,"input",128,129),x.NdJ("change",function(e){return x.CHM(n),x.oxw().fileEvent(e)}),x.qZA(),x.TgZ(24,"input",130),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entityComment.url_img=e}),x.qZA(),x._UZ(25,"br"),x.TgZ(26,"small",131),x.TgZ(27,"a",132),x.NdJ("click",function(){x.CHM(n);var e=x.oxw();return e._downloadFileResult(e.entityComment)}),x._uU(28),x.qZA(),x.YNc(29,oe,2,0,"a",133),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(30,"div",134),x.TgZ(31,"button",135),x.NdJ("click",function(){return x.CHM(n).$implicit.dismiss("Cross click")}),x._uU(32),x.ALo(33,"translate"),x.qZA(),x.YNc(34,re,5,3,"ng-container",40),x.YNc(35,le,3,3,"button",136),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(4),x.AsE(" ",x.lcZ(5,11,"Note")," - ",a.entityComment.inner_code," "),x.xp6(10),x.hij("",x.lcZ(15,13,"Content")," "),x.xp6(2),x.Q6J("ngModel",a.entityComment.take_note),x.xp6(4),x.Oqu(x.lcZ(21,15,"Attachment")),x.xp6(4),x.Q6J("ngModel",a.entityComment.url_img),x.xp6(4),x.Oqu(a._path),x.xp6(1),x.Q6J("ngIf",null!=a.entityComment.url_img),x.xp6(3),x.hij(" ",x.lcZ(33,17,"Close")," "),x.xp6(2),x.Q6J("ngIf",a.isSave),x.xp6(1),x.Q6J("ngIf",!a.isSave)}}var ce=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};h().vfs=m.I.vfs;var de,ue=((de=function(){function t(e,a,i,o,r,l,s){n(this,t),this._authenService=e,this._dataService=a,this._route=i,this._notifyService=o,this._uploadService=r,this._excelService=l,this.modalService=s,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._getlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this._status="",this._titleLanguage="",this._detail={},this._logoPath=p.h.BASE_API+"/",this._logoIsoPath=p.h.BASE_API+"/",this._signatureCTOPath=p.h.BASE_API+"/",this._signatureCEOPath=p.h.BASE_API+"/",this.changeState=null,this._printAll=[],this._langMain=1,this.entity={},this.entity0={},this.requestId="",this._customers=[],this._dt1a="",this._dt2a="",this._fdatea=new Date,this._tdatea=new Date,this._currentTabActivated=1,this._keywordAdditional="",this._getlist2side=[],this._isLoadingResult=!1,this._requestIdTemp="",this.entityComment={},this._path="",this._id="",(!1===e.checkAccess("REQ-REPORT")||!1===e.hasPermission("REQ-REPORT","read"))&&this._route.navigate(["/error/404"]),this.socket=g()(p.h.BASE_API)}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadImgs(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var e=this,t={};t.filter=this._keyword,t.domain=this.user.short_code,t.start_date=this._dt1,t.end_date=this._dt2,t.flag_status=this._status,t.page=this.pageIndex,t.limit=this.pageSize,this._dataService.post("/labresult/getlistbypaging",t).subscribe(function(t){e._getlist=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages,e._resolveDuplicateCode()})}},{key:"_resolveDuplicateCode",value:function(){this._dataService.post("/error/duplicateReportCode",{}).subscribe(function(e){})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"orgValueChange1",value:function(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_switchLanguage",value:function(e,t,n){this.loadAllReportByRequestId(n.request_id),this._titleLanguage=n.report_code,this._chooseOne=t,this._detail=n,this.modalService.open(e,{size:"md",centered:!0})}},{key:"loadAllReportByRequestId",value:function(e){var t=this,n={};n.request_id=e,console.log(n),this._dataService.post("/labresult/getlistbyrequestId",n).subscribe(function(e){t._printAll=e.data})}},{key:"_print",value:function(t){return(0,c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,i,o,r,l,s,c,u,g,_,m,f,Z,v,x,y,b,A,T,q,M,S,C,w,k,L,U,N,D,I,Y,J,O,Q,P,E,R,F,H,W,j,G,B,z,V,$,K,X,ee,te,ne,ae,ie,oe,re,le,se,ce,de,ue,ge,pe,_e,he,me,fe,Ze,ve,xe,ye,be,Ae,Te,qe,Me,Se,Ce,we,ke,Le,Ue,Ne,De,Ie,Ye,Je,Oe,Qe,Pe,Ee,Re,Fe,He,We,je,Ge,Be,ze,Ve,$e,Ke,Xe,et,tt,nt,at,it,ot,rt,lt,st,ct,dt,ut,gt,pt,_t,ht,mt,ft,Zt,vt,xt,yt,bt,At,Tt,qt,Mt,St,Ct,wt,kt,Lt,Ut,Nt,Dt,It,Yt,Jt,Ot,Qt,Pt,Et,Rt,Ft,Ht,Wt,jt,Gt,Bt,zt,Vt=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this._langMain=t,a=[],0==this._chooseOne){n.next=100;break}if(null!=this._detail.old_report_detail&&(i="(* K\u1ebft qu\u1ea3 n\xe0y thay th\u1ebf cho k\u1ebft qu\u1ea3  "+this._detail.old_report_detail.report_code+", xu\u1ea5t ng\xe0y  "+d(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; b\u1ea3n k\u1ebft qu\u1ea3 c\u0169 s\u1ebd b\u1ecb h\u1ee7y)",o="(* This report cancels and replaces the previous one numbered "+this._detail.old_report_detail.report_code+", date "+d(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; which must be destroyed)",r="vn"==t?i:o,"0"==t&&(r=i+"\n"+o),a.push({text:r,alignment:"right",italics:!0,fontSize:10})),a.push({text:"\n"}),l="en"==t?null==this._detail.company_sender_e?this._detail.company_sender_l.toUpperCase():this._detail.company_sender_e.toUpperCase():this._detail.company_sender_l.toUpperCase(),(null!=this._detail.company_receiver_l||null!=this._detail.company_receiver_e)&&(l="en"==t||"0"==t?null==this._detail.company_receiver_e?this._detail.company_receiver_l.toUpperCase():this._detail.company_receiver_e.toUpperCase():this._detail.company_receiver_l.toUpperCase()),"0"==t&&(l="en"==t,this._detail.company_sender_l.toUpperCase(),null==this._detail.company_sender_e||this._detail.company_sender_e.toUpperCase(),(null!=this._detail.company_receiver_l||null!=this._detail.company_receiver_e)&&(l=this._detail.company_receiver_l.toUpperCase()+"\n"+(null==this._detail.company_receiver_e?"":this._detail.company_receiver_e.toUpperCase()))),this._detail.address_receiver_l=null==this._detail.address_receiver_l?this._detail.address_l:this._detail.address_receiver_l,s="en"==t?null==this._detail.address_receiver_e?this._detail.address_receiver_l:this._detail.address_receiver_e:this._detail.address_receiver_l,"0"==t&&(s=this._detail.address_receiver_l+"\n"+(null==this._detail.address_receiver_e?"":this._detail.address_receiver_e)),c="en"==t?"Sample described as":"T\xean m\u1eabu","0"==t&&(c="T\xean m\u1eabu/ Sample described as"),u="en"==t?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng","0"==t&&(u="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference"),g=this._detail.employee_code+this._detail.request_no.substr(2,this._detail.request_no.length),null==this._detail.employee_code&&(g=this._detail.request_no.substr(2,this._detail.request_no.length)),_="en"==t?"Sample code":"M\xe3 s\u1ed1 m\u1eabu","0"==t&&(_="M\xe3 s\u1ed1 m\u1eabu/ Sample code"),m="en"==t?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu","0"==t&&(m="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning"),f="en"==t?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu","0"==t&&(f="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date"),Z="en"==t?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m","0"==t&&(Z="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time"),v="en"==t?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng","0"==t&&(v="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date"),x=d(new Date(this._detail.returned_date)).subtract(7,"hours").format("DD/MM/YYYY"),a.push({alignment:"justify",columns:[[{text:[{text:l,bold:!0,fontSize:12},"\n\n",{text:s},"\n\n\n"],style:"body_top"}],{width:150,qr:this._detail.report_code+","+this._detail.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),y="en"==t?null==this._detail.sample_name_e?"":this._detail.sample_name_e:this._detail.sample_name,"0"==t&&(y=this._detail.sample_name+(null==this._detail.sample_name_e?"":"/ "+this._detail.sample_name_e)),b="en"==t?null==this._detail.description_e?"":this._detail.description_e:null==this._detail.description?"":this._detail.description,"0"==t&&(b=(null==this._detail.description?"":this._detail.description)+(null==this._detail.description_e?"":"/ "+this._detail.description_e)),a.push({table:{widths:[150,5,"*"],body:[[{text:c,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:y,bold:!0,fontSize:11}],[{text:u,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:g,bold:!0,style:"body_footer"}],[{text:_,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:this._detail.report_inner_code,bold:!0,style:"body_footer"}],[{text:m,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:b,style:"body_footer"}],[{text:f,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:d(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:Z,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:d(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+x,style:"body_footer"}],[{text:v,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:x,style:"body_footer"}]]},layout:{defaultBorder:!1}}),a.push({text:"\n"}),A=!1,1==this._chooseOne&&(T=[],q=1,this._detail.order_details.length>0)){M=e(this._detail.order_details);try{for(M.s();!(S=M.n()).done;){C=S.value,w="b709ca6e-2823-11eb-9a33-acde48001122"==C.department_id,k="",L=null==C.standards?[]:JSON.parse(C.standards),U=e(L.filter(function(e){return null!=e}));try{for(U.s();!(N=U.n()).done;)null==(D=N.value).id?null!=D&&(k+="("+D+")"):k+="("+D.id+")"}catch($t){U.e($t)}finally{U.f()}I="vn"==t?C.para_name_l:C.para_name_e,"0"==t&&(I=C.para_name_l+"/ "+C.para_name_e),Y=C.unit,J=C.method,O=C.result_record.includes("<sup>")?C.result_record.substr(0,C.result_record.indexOf("<")):C.result_record,Q=C.result_record.substr(C.result_record.indexOf("<sup>")+5,C.result_record.indexOf("</sup>")).replace("</sup>",""),P="",null!=C.result_record_e&&(P=C.result_record_e.includes("<sup>")?C.result_record_e.substr(0,C.result_record_e.indexOf("<")):C.result_record_e),E="vn"==t||""==P?O:P,"0"==t&&(E=O+(""==P?"":"/ "+P)),T.push({STT:q,Para:{columns:[{text:I,fontSize:10,italics:w,width:"auto",bold:!0},{text:k,fontSize:8,italics:w,bold:!0}],columnGap:3},Unit:Y,Method:J,Results:[{columns:[{text:E,width:"auto",fontSize:10,bold:!0},{text:Q,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:C.allow_lod?"(LOD="+C.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),q+=1,C.allow_lod&&(A=!0)}}catch($t){M.e($t)}finally{M.f()}a.push(this.tablePrintQuotation5(T,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if(3==this._chooseOne){T=[],q=1,R=e(this._detail.order_details);try{for(R.s();!(F=R.n()).done;){H=F.value,W="b709ca6e-2823-11eb-9a33-acde48001122"==H.department_id,j="",G=null==H.standards?[]:JSON.parse(H.standards),B=e(G.filter(function(e){return null!=e}));try{for(B.s();!(z=B.n()).done;)null==(V=z.value).id?null!=V&&(j+="("+V+")"):j+="("+V.id+")"}catch($t){B.e($t)}finally{B.f()}$="vn"==t?H.para_name_l:H.para_name_e,"0"==t&&($=H.para_name_l+"/ "+H.para_name_e),K=H.unit,X=H.method,ee=H.result_record.includes("<sup>")?H.result_record.substr(0,H.result_record.indexOf("<")):H.result_record,te=H.result_record.substr(H.result_record.indexOf("<sup>")+5,H.result_record.indexOf("</sup>")).replace("</sup>",""),ne="",null!=H.result_record_e&&(ne=H.result_record_e.includes("<sup>")?H.result_record_e.substr(0,H.result_record_e.indexOf("<")):H.result_record_e),ae="vn"==t||""==ne?ee:ne,"0"==t&&(ae=ee+(""==ne?"":"/ "+ne)),T.push({STT:q,Para:{columns:[{text:$,fontSize:10,italics:W,width:"auto",bold:!0},{text:j,fontSize:8,italics:W,bold:!0}],columnGap:3},Unit:K,Method:X,Results:[{columns:[{text:ae,width:"auto",fontSize:10,bold:!0},{text:te,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:H.allow_lod?"(LOD="+H.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:H.compare_note}),q+=1,H.allow_lod&&(A=!0)}}catch($t){R.e($t)}finally{R.f()}a.push(this.tablePrintQuotation(T,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}if(4==this._chooseOne)if(this._detail.flag_compare){T=[],q=1,ie=e(this._detail.order_details);try{for(ie.s();!(oe=ie.n()).done;){re=oe.value,le="b709ca6e-2823-11eb-9a33-acde48001122"==re.department_id,se="",ce=null==re.standards?[]:JSON.parse(re.standards),de=e(ce.filter(function(e){return null!=e}));try{for(de.s();!(ue=de.n()).done;)null==(ge=ue.value).id?null!=ge&&(se+="("+ge+")"):se+="("+ge.id+")"}catch($t){de.e($t)}finally{de.f()}pe="vn"==t?re.para_name_l:re.para_name_e,"0"==t&&(pe=re.para_name_l+"/ "+re.para_name_e),_e=re.unit,he=re.method,me=re.result_record.includes("<sup>")?re.result_record.substr(0,re.result_record.indexOf("<")):re.result_record,fe=re.result_record.substr(re.result_record.indexOf("<sup>")+5,re.result_record.indexOf("</sup>")).replace("</sup>",""),Ze="",null!=re.result_record_e&&(Ze=re.result_record_e.includes("<sup>")?re.result_record_e.substr(0,re.result_record_e.indexOf("<")):re.result_record_e),ve="vn"==t||""==Ze?me:Ze,"0"==t&&(ve=me+(""==Ze?"":"/ "+Ze)),T.push({STT:q,Para:{columns:[{text:pe,fontSize:10,italics:le,width:"auto",bold:!0},{text:se,fontSize:8,italics:le,bold:!0}],columnGap:3},Unit:_e,Method:he,Results:[{columns:[{text:ve,width:"auto",fontSize:10,bold:!0},{text:fe,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:re.allow_lod?"(LOD="+re.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:re.compare_note}),q+=1,re.allow_lod&&(A=!0)}}catch($t){ie.e($t)}finally{ie.f()}a.push(this.tablePrintQuotation(T,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}else if(T=[],q=1,this._detail.order_details.length>0){xe=e(this._detail.order_details);try{for(xe.s();!(ye=xe.n()).done;){be=ye.value,Ae="b709ca6e-2823-11eb-9a33-acde48001122"==be.department_id,Te="",qe=null==be.standards?[]:JSON.parse(be.standards),Me=e(qe.filter(function(e){return null!=e}));try{for(Me.s();!(Se=Me.n()).done;)null==(Ce=Se.value).id?null!=Ce&&(Te+="("+Ce+")"):Te+="("+Ce.id+")"}catch($t){Me.e($t)}finally{Me.f()}we="vn"==t?be.para_name_l:be.para_name_e,"0"==t&&(we=be.para_name_l+"/ "+be.para_name_e),ke=be.unit,Le=be.method,Ue=be.result_record.includes("<sup>")?be.result_record.substr(0,be.result_record.indexOf("<")):be.result_record,Ne=be.result_record.substr(be.result_record.indexOf("<sup>")+5,be.result_record.indexOf("</sup>")).replace("</sup>",""),De="",null!=be.result_record_e&&(De=be.result_record_e.includes("<sup>")?be.result_record_e.substr(0,be.result_record_e.indexOf("<")):be.result_record_e),Ie="vn"==t||""==De?Ue:De,"0"==t&&(Ie=Ue+(""==De?"":"/ "+De)),T.push({STT:q,Para:{columns:[{text:we,fontSize:10,italics:Ae,width:"auto",bold:!0},{text:Te,fontSize:8,italics:Ae,bold:!0}],columnGap:3},Unit:ke,Method:Le,Results:[{columns:[{text:Ie,width:"auto",fontSize:10,bold:!0},{text:Ne,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:be.allow_lod?"(LOD="+be.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),q+=1,be.allow_lod&&(A=!0)}}catch($t){xe.e($t)}finally{xe.f()}a.push(this.tablePrintQuotation5(T,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if((null!=this._detail.take_note||A)&&(Je="vn"==t?"Ghi ch\xfa: ":"Note: ","0"==t&&(Je="Ghi ch\xfa/ Note: "),Oe="vn"==t?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection","0"==t&&(Oe="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),(Ye=[]).push({LOD:Je+(null==this._detail.take_note?"":this._detail.take_note)+(A?Oe:"")}),a.push(this.tablePrintQuotation5A(Ye,["LOD"],["*"]))),a.push({text:"\n"}),Qe="vn"==t?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR","0"==t&&(Qe="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR"),Pe="vn"==t?"GI\xc1M \u0110\u1ed0C":"DIRECTOR","0"==t&&(Pe="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==this._detail.is_active&&(a.push({columns:[{width:50,text:""},{width:180,text:Qe,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:Pe,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"})),null==this._signatureCTOPath||null==this._signatureCEOPath||0==this._detail.is_active){n.next=77;break}return n.t0=a,n.t1={width:50,text:""},n.next=59,this._convertBase64ImageFromURL(this._signatureCTOPath);case 59:return n.t2=n.sent,n.t3=!0,n.t4=[190,190],n.t5={width:180,image:n.t2,alignment:"center",fontSize:10,bold:n.t3,fit:n.t4},n.t6={width:"*",text:""},n.next=66,this._convertBase64ImageFromURL(this._signatureCEOPath);case 66:n.t7=n.sent,n.t8=!0,n.t9=[190,190],n.t10={width:180,image:n.t7,alignment:"center",fontSize:10,bold:n.t8,fit:n.t9},n.t11={width:50,text:""},n.t12=[n.t1,n.t5,n.t6,n.t10,n.t11],n.t13={columns:n.t12},n.t0.push.call(n.t0,n.t13),a.push({text:"\n"}),n.next=78;break;case 77:a.push({columns:[{width:50,text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]});case 78:if(0==this._detail.is_active&&a.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"}),Ee="vn"==t?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note","0"==t&&(Ee="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note"),Re="vn"==t?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.","0"==t&&(Re="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample."),Fe="vn"==t?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.","0"==t&&(Fe="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request."),He="",this._detail.standard_list.length>0){We=e(this._detail.standard_list);try{for(We.s();!(je=We.n()).done;)Ge=je.value,Be="vn"==t?Ge.description_l:Ge.description_e,"0"==t&&(Be=Ge.description_l+"/ "+Ge.description_e),He+="("+Ge.id+") "+Be+"\n"}catch($t){We.e($t)}finally{We.f()}}if(a.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:Ee,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:Re+"\n"+Fe+"\n"},{text:He,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null==this._detail.url_img||4!=this._chooseOne){n.next=98;break}return ze="en"==t?"Sample photo":"H\xecnh m\u1eabu","0"==t&&(ze="H\xecnh m\u1eabu/ Sample photo"),a.push({text:"",pageBreak:"after"}),a.push({text:ze+"\n",alignment:"center"}),Ve=p.h.BASE_API+"/"+this._detail.url_img,n.t14=a,n.next=95,this._convertBase64ImageFromURL(Ve);case 95:n.t15=n.sent,n.t16={image:n.t15,alignment:"center",width:430},n.t14.push.call(n.t14,n.t16);case 98:n.next=208;break;case 100:$e=0,Ke=0,Xe=e(this._printAll),n.prev=102,Xe.s();case 104:if((et=Xe.n()).done){n.next=200;break}if(tt=et.value,Ke+=1,null!=tt.old_report_detail&&(nt="(This report cancels and replaces the previous one numbered "+tt.old_report_detail.report_code+" date "+d(new Date(tt.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)",at="(This report cancels and replaces the previous one numbered "+tt.old_report_detail.report_code+" date "+d(new Date(tt.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)",a.push({text:"vn"==t?nt:at,alignment:"right",italics:!0,fontSize:10})),it=("vn"==t?"M\xe3 k\u1ebft qu\u1ea3: ":"Report code: ")+tt.report_code,"0"==t&&(it="M\xe3 k\u1ebft qu\u1ea3/Report code: "+tt.report_code),ot=("vn"==t?"Trang: ":"Page: ")+Ke.toString()+"/"+this._printAll.length.toString(),"0"==t&&(ot="Trang/Page: "+Ke.toString()+this._printAll.length.toString()),rt="en"==t?null==tt.company_sender_e?tt.company_sender_l.toUpperCase():tt.company_sender_e.toUpperCase():tt.company_sender_l.toUpperCase(),(null!=tt.company_receiver_l||null!=tt.company_receiver_e)&&(rt="en"==t||"0"==t?null==tt.company_receiver_e?tt.company_receiver_l.toUpperCase():tt.company_receiver_e.toUpperCase():tt.company_receiver_l.toUpperCase()),tt.address_receiver_l=null==tt.address_receiver_l?tt.address_l:tt.address_receiver_l,lt="en"==t?null==tt.address_receiver_e?tt.address_receiver_l:tt.address_receiver_e:tt.address_receiver_l,"0"==t&&(rt=tt.company_sender_l.toUpperCase()+"\n"+(null==tt.company_sender_e?"":tt.company_sender_e.toUpperCase()),(null!=tt.company_receiver_l||null!=tt.company_receiver_e)&&(rt=tt.company_receiver_l.toUpperCase()+"\n"+(null==tt.company_receiver_e?"":tt.company_receiver_e.toUpperCase())),lt=tt.address_receiver_l+"\n"+(null==tt.address_receiver_e?"":tt.address_receiver_e)),st="en"==t?"Sample described as":"T\xean m\u1eabu","0"==t&&(st="T\xean m\u1eabu/ Sample described as"),ct="en"==t?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng","0"==t&&(ct="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference"),dt=tt.employee_code+tt.request_no.substr(2,tt.request_no.length),null==tt.employee_code&&(dt=tt.request_no.substr(2,tt.request_no.length)),ut="en"==t?"Sample code":"M\xe3 s\u1ed1 m\u1eabu","0"==t&&(ut="M\xe3 s\u1ed1 m\u1eabu/ Sample code"),gt="en"==t?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu","0"==t&&(gt="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning"),pt="en"==t?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu","0"==t&&(pt="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date"),_t="en"==t?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m","0"==t&&(_t="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time"),ht="en"==t?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng","0"==t&&(ht="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date"),mt=1==tt.is_active?d(new Date(tt.timestamp)).subtract(7,"hours").format("DD/MM/YYYY"):d(new Date(tt.returned_date)).subtract(7,"hours").format("DD/MM/YYYY"),a.push({alignment:"right",columns:[{text:[{text:it+"-"+ot},"\n\n"],alignment:"right",bold:!0}]}),a.push({alignment:"justify",columns:[[{text:[{text:rt,bold:!0,fontSize:12},"\n\n",{text:lt},"\n\n\n"],style:"body_top"}],{width:150,qr:tt.report_code+","+tt.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),a.push({table:{widths:[150,5,"*"],body:[[{text:st,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:tt.sample_name,bold:!0,fontSize:11}],[{text:ct,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:dt,bold:!0,style:"body_footer"}],[{text:ut,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:tt.report_inner_code,bold:!0,style:"body_footer"}],[{text:gt,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:null==tt.description?"":tt.description,style:"body_footer"}],[{text:pt,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:d(new Date(tt.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:_t,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:d(new Date(tt.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+mt,style:"body_footer"}],[{text:ht,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:mt,style:"body_footer"}]]},layout:{defaultBorder:!1}}),a.push({text:"\n"}),ft=!1,T=[],q=1,tt.order_details.length>0){Zt=e(tt.order_details);try{for(Zt.s();!(vt=Zt.n()).done;){xt=vt.value,yt="b709ca6e-2823-11eb-9a33-acde48001122"==xt.department_id,bt="",At=null==xt.standards?[]:JSON.parse(xt.standards),Tt=e(At.filter(function(e){return null!=e}));try{for(Tt.s();!(qt=Tt.n()).done;)null==(Mt=qt.value).id?null!=Mt&&(bt+="("+Mt+")"):bt+="("+Mt.id+")"}catch($t){Tt.e($t)}finally{Tt.f()}St="vn"==t?xt.para_name_l:xt.para_name_e,"0"==t&&(St=xt.para_name_l+"/ "+xt.para_name_e),Ct=xt.unit,wt=xt.method,kt=xt.result_record.includes("<sup>")?xt.result_record.substr(0,xt.result_record.indexOf("<")):xt.result_record,Lt=xt.result_record.substr(xt.result_record.indexOf("<sup>")+5,xt.result_record.indexOf("</sup>")).replace("</sup>",""),Ut="",null!=xt.result_record_e&&(Ut=xt.result_record_e.includes("<sup>")?xt.result_record_e.substr(0,xt.result_record_e.indexOf("<")):xt.result_record_e),Nt="vn"==t||""==Ut?kt:Ut,"0"==t&&(Nt=kt+(""==Ut?"":"/ "+Ut)),T.push({STT:q,Para:{columns:[{text:St,fontSize:10,italics:yt,width:"auto",bold:!0},{text:bt,fontSize:8,italics:yt,bold:!0}],columnGap:3,bold:!0},Unit:Ct,Method:wt,Results:[{columns:[{text:Nt,width:"auto",fontSize:10,bold:!0},{text:Lt,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:xt.allow_lod?"(LOD="+xt.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),q+=1,xt.allow_lod&&(ft=!0)}}catch($t){Zt.e($t)}finally{Zt.f()}a.push(this.tablePrintQuotation5(T,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if((null!=tt.take_note||ft)&&(It="vn"==t?"Ghi ch\xfa: ":"Note: ","0"==t&&(It="Ghi ch\xfa/ Note: "),Yt="vn"==t?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection","0"==t&&(Yt="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),(Dt=[]).push({LOD:It+(null==tt.take_note?"":tt.take_note)+(ft?Yt:"")}),a.push(this.tablePrintQuotation5A(Dt,["LOD"],["*"]))),a.push({text:"\n"}),Jt="vn"==t?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR","0"==t&&(Jt="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR"),Ot="vn"==t?"GI\xc1M \u0110\u1ed0C":"DIRECTOR","0"==t&&(Ot="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==tt.is_active&&(a.push({columns:[{width:50,text:""},{width:180,text:Jt,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:Ot,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"})),null==this._signatureCTOPath||null==this._signatureCEOPath||0==tt.is_active){n.next=177;break}return n.t17=a,n.t18={width:50,text:""},n.next=159,this._convertBase64ImageFromURL(this._signatureCTOPath);case 159:return n.t19=n.sent,n.t20=!0,n.t21=[190,190],n.t22={width:180,image:n.t19,alignment:"center",fontSize:10,bold:n.t20,fit:n.t21},n.t23={width:"*",text:""},n.next=166,this._convertBase64ImageFromURL(this._signatureCEOPath);case 166:n.t24=n.sent,n.t25=!0,n.t26=[190,190],n.t27={width:180,image:n.t24,alignment:"center",fontSize:10,bold:n.t25,fit:n.t26},n.t28={width:50,text:""},n.t29=[n.t18,n.t22,n.t23,n.t27,n.t28],n.t30={columns:n.t29},n.t17.push.call(n.t17,n.t30),a.push({text:"\n"}),n.next=178;break;case 177:a.push({columns:[{width:50,text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]});case 178:if(0==tt.is_active&&a.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"}),Qt="vn"==t?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note","0"==t&&(Qt="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note"),Pt="vn"==t?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.","0"==t&&(Pt="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample."),Et="vn"==t?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.","0"==t&&(Et="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request."),Rt="",tt.standard_list.length>0){Ft=e(tt.standard_list);try{for(Ft.s();!(Ht=Ft.n()).done;)Wt=Ht.value,jt="vn"==t?Wt.description_l:Wt.description_e,"0"==t&&(jt=Wt.description_l+"/ "+Wt.description_e),Rt+="("+Wt.id+") "+jt+"\n"}catch($t){Ft.e($t)}finally{Ft.f()}}if(a.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:Qt,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:Pt+"\n"+Et+"\n"},{text:Rt,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null==tt.url_img||2!=tt.is_active){n.next=197;break}return a.push({text:"",pageBreak:"after"}),Gt=p.h.BASE_API+"/"+tt.url_img,n.t31=a,n.next=194,this._convertBase64ImageFromURL(Gt);case 194:n.t32=n.sent,n.t33={image:n.t32,alignment:"center"},n.t31.push.call(n.t31,n.t33);case 197:($e+=1)<this._printAll.length&&a.push({text:"",pageBreak:"after"});case 198:n.next=104;break;case 200:n.next=205;break;case 202:n.prev=202,n.t34=n.catch(102),Xe.e(n.t34);case 205:return n.prev=205,Xe.f(),n.finish(205);case 208:return n.t35="vn"==t?0==this._chooseOne?[25,100,25,70]:[25,120,25,70]:0==this._chooseOne?[25,100,25,90]:[25,140,25,90],n.t36={fontSize:12,columnGap:20},n.t37=[a],n.t38=function(e,n){return{table:{widths:[5,"*","*","*"],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:("en"==t||"0"==t?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG")+"\n"+("en"==t||"0"==t?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam"),alignment:"left",style:"body_footer"},{height:150,text:"en"==t||"0"==t?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",alignment:"left",style:"body_footer"},{height:150,text:"en"==t||"0"==t?"Document number : EPR-QP-0023/F02\nVersion : 01\nEffective day : 03/09/2020":"M\xe3 t\xe0i li\u1ec7u : EPR-QP-0023/F02\nL\u1ea7n ban h\xe0nh : 01\nNg\xe0y ban h\xe0nh : 03/09/2020",alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},n.t39=function(e,n,a){var i="vn"==t?"K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M":"ANALYTICAL REPORT";"0"==t&&(i="K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M\nANALYTICAL REPORT");var o="vn"==t?"M\xe3 k\u1ebft qu\u1ea3: ":"Report code: ";"0"==t&&(o="M\xe3 k\u1ebft qu\u1ea3/Report code: ");var r="vn"==t?"Trang ":"Page: ";return"0"==t&&(r="Trang/Page "),0!=Vt._chooseOne?{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:167,height:70,alignment:"right",image:"myIso"}],[{colSpan:2,text:i,alignment:"center",fontSize:16,bold:!0}],[{colSpan:2,width:"*",text:[{text:o+Vt._detail.report_code+"-"+r+e.toString()+"/"+n},{text:"__",color:"#ffffff"}],alignment:"right",bold:!0}]]},layout:{defaultBorder:!1}}:{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:167,height:70,alignment:"right",image:"myIso"}],[{colSpan:2,text:i,alignment:"center",fontSize:16,bold:!0}]]},layout:{defaultBorder:!1}}},n.t40={header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},n.next=216,this._convertBase64ImageFromURL(this._logoPath);case 216:return n.t41=n.sent,n.next=219,this._convertBase64ImageFromURL(this._logoIsoPath);case 219:n.t42=n.sent,n.t43={myLogo:n.t41,myIso:n.t42},Bt={pageSize:"A4",pageMargins:n.t35,defaultStyle:n.t36,content:n.t37,footer:n.t38,header:n.t39,styles:n.t40,images:n.t43},zt=(zt="'print-'"+this._detail.report_code+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),h().createPdf(Bt).download(zt),h().createPdf(Bt).open();case 224:case"end":return n.stop()}},n,this,[[102,202,205,208]])}))}},{key:"_exportAll",value:function(t){var n,a=[],i=1,o=e(t);try{for(o.s();!(n=o.n()).done;){var r=n.value,l="";4==r.is_active&&(l="en"==this.user.lang?v.W.cancel_en:v.W.cancel),3==r.is_active&&(l="en"==this.user.lang?v.W.printed_en:v.W.printed),2==r.is_active&&(l="en"==this.user.lang?v.W.evicted_en:v.W.evicted),1==r.is_active&&(l="en"==this.user.lang?v.W.official_en:v.W.official),0==r.is_active&&(l="en"==this.user.lang?v.W.draft_en:v.W.draft);var s=new Date(r.received_date).getTime()+864e5*r.tat;a.push({"No.":i,"Report code":r.report_inner_code,"Request No":r.request_no,"Sample name":r.sample_name,"Received Date":d(new Date(r.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),"Returned Date":d(new Date(s)).subtract(7,"hours").format("DD/MM/YYYY"),Company:r.company_sender_l,Contact:null==r.sender_name?"":r.sender_name,State:l}),i+=1}}catch(c){o.e(c)}finally{o.f()}this._excelService.exportAsExcelFile(a,"ResultReport-"+d(new Date).subtract(7,"hours").format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_EXPORT_EN+" "+t.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+t.length+" "+v.W.record,"OK")}},{key:"tablePrintQuotation",value:function(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation(e,t)}}}},{key:"buildTableBodyPrintQuotation",value:function(e,t){var n=[],a=[],i="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(i="STT\nNO.");var o="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(o="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");var r="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(r="\u0110\u01a0N V\u1eca\nUNIT");var l="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(l="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");var s="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";0==this._langMain&&(s="K\u1ebeT QU\u1ea2\nRESULTS");var c="en"==this._langMain.toString()?"COMPARE / GUIDELINES":"SO S\xc1NH";return 0==this._langMain&&(c="SO S\xc1NH\nCOMPARE / GUIDELINES"),a.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:s,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:c,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(a),e.forEach(function(e){var a=[],i=1;t.forEach(function(t){a.push(2==i||5==i?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==i?"left":"center",fontSize:10}),i+=1}),n.push(a)}),n}},{key:"tablePrintQuotation5",value:function(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation5(e,t)}}}},{key:"buildTableBodyPrintQuotation5",value:function(e,t){var n=[],a=[],i="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(i="STT\nNO.");var o="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(o="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");var r="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(r="\u0110\u01a0N V\u1eca\nUNIT");var l="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(l="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");var s="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";return 0==this._langMain&&(s="K\u1ebeT QU\u1ea2\nRESULTS"),this._langMain.toString(),this._langMain,a.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:s,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(a),e.forEach(function(e){var a=[],i=1;t.forEach(function(t){a.push(2==i||5==i?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==i?"left":"center",fontSize:10}),i+=1}),n.push(a)}),n}},{key:"tablePrintQuotation5A",value:function(e,t,n){return{table:{widths:n,body:this.buildTableBodyPrintQuotation5A(e,t)}}}},{key:"buildTableBodyPrintQuotation5A",value:function(e,t){var n=[];return e.forEach(function(e){var a=[];t.forEach(function(t){a.push({text:{text:e[t]},alignment:"left",fontSize:10,italics:!0})}),n.push(a)}),n}},{key:"_convertBase64ImageFromURL",value:function(e){return new Promise(function(t,n){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=function(e){n(e)},a.src=e})}},{key:"loadImgs",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",t).subscribe(function(t){return(0,c.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._logoPath+=t.data.filter(function(e){return"logo-stp"==e.file_name_e})[0].path_file,this._logoIsoPath+=t.data.filter(function(e){return"logo-iso"==e.file_name_e})[0].path_file,this._signatureCTOPath+=t.data.filter(function(e){return"signature-cto"==e.file_name_e})[0].path_file,this._signatureCEOPath+=t.data.filter(function(e){return"signature-ceo"==e.file_name_e})[0].path_file;case 1:case"end":return e.stop()}},e,this)}))})}},{key:"_popupStates",value:function(e,t){this._titleLanguage=t.report_code,this.changeState=t.is_active,this._detail=t,this.modalService.open(e,{size:"sm",centered:!0})}},{key:"_updateState",value:function(){var e=this,t={};if(t.report_id=this._detail.report_id,t.is_active=this.changeState,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,2==this.changeState||4==this.changeState){var n=this._titleLanguage.substr(this._titleLanguage.lastIndexOf("-RV")+3,this._titleLanguage.length);if(parseInt(n)+1>9&&2==this.changeState)return void this._notifyService.showError("en"==this.user.lang?v.W.MSG_EXPORTNO_EN:v.W.MSG_EXPORT_NO,"en"==this.user.lang?v.W.error_title_en:v.W.error_title);if(this._detail.flag_warning_eviction)return this._notifyService.showError("en"==this.user.lang?v.W.error_eviction_msg_en:v.W.error_eviction_msg,"en"==this.user.lang?v.W.error_title_en:v.W.error_title),void this.modalService.dismissAll();Z().fire({title:"en"==this.user.lang?v.W.are_u_sure_evic_en:v.W.are_u_sure_evic,text:this._detail.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(n){n.value?e._dataService.post("/labresult/updateState",t).subscribe(function(t){e._notifyService.showSuccess("en"==e.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),e.socket.emit("refresh",{}),e._updateStateOfSample(e._detail,t.flag),e.modalService.dismissAll()}):e.modalService.dismissAll()})}else this._dataService.post("/labresult/updateState",t).subscribe(function(t){e._notifyService.showSuccess("en"==e.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),e.socket.emit("refresh",{}),e.modalService.dismissAll()})}},{key:"_switchEviction",value:function(e){var t=this;console.log(e),Z().fire({title:"en"==this.user.lang?v.W.are_u_sure_evic_en:v.W.are_u_sure_evic,text:e.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(n){if(n.value){var a={};a.report_id=e.report_id,a.is_active=2,a.userid=t.user.id,a.ipaddress=t.user.ipaddress,a.short_code=t.user.short_code,t._dataService.post("/labresult/updateState",a).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),t.socket.emit("refresh",{}),t._updateStateOfSample(e,n.flag),t.modalService.dismissAll()})}else t.modalService.dismissAll()})}},{key:"_updateStateOfSample",value:function(e,t){var n={};n.getlist=e.order_details,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,n.status=3,this._dataService.post("/labresult/updateStateOfSample",n).subscribe(function(e){console.log(e)})}},{key:"_editInformation",value:function(e,t){console.log(t),this._currentTabActivated=1,this._titleLanguage=t.request_no,this.requestId=t.request_id,this.loadRequestDetail(t.request_id),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"loadRequestDetail",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/request/detailA",a).subscribe(function(t){console.log("Again J",t.data),n.entity=t.data,n._fdatea=new Date(t.data.received_date),n._tdatea=new Date(t.data.returned_date),n._dt1a=d(n._fdatea).format("YYYY-MM-DD HH:mm"),n._dt2a=d(n._tdatea).format("YYYY-MM-DD HH:mm");var a,i=[],o=1,r=e(t.data.orders_list.filter(function(e){return null!=e.inner_code}));try{for(r.s();!(a=r.n()).done;){var l=a.value;i.push({sample_id:l.sample_id,sample_name:l.sample_name,sample_code:l.sample_code,inner_code:l.inner_code,description:l.description,note:l.note,weight:l.weight,is_active:l.is_active,userid:l.userid,total_sub:l.total_sub,order_no:o}),o+=1}}catch(s){r.e(s)}finally{r.f()}console.log(i),n.entity._samples=i,n.entity0=i.filter(function(e){return e.order_no==n._currentTabActivated})[0],n.loadCustomers()})}},{key:"loadCustomers",value:function(){var t=this,n={};n.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",n).subscribe(function(n){var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({name:r.code_link,code:r.id})}}catch(l){o.e(l)}finally{o.f()}t._customers=i})}},{key:"orgValueChange1a",value:function(e){null!=e&&"Invalid date"!=e?(this._fdatea=e,this._tdatea=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1a=d(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=d(this._tdatea).format("YYYY-MM-DD HH:mm")):(this._fdatea=null,this._dt1a=null)}},{key:"orgValueChange2a",value:function(e){null!=e&&"Invalid date"!=e?(this._tdatea=e,this._dt1a=d(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=d(this._tdatea).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdatea-this._fdatea)/864e5)):(this._tdatea=null,this._dt2a=null)}},{key:"_calculateDays",value:function(){null!=this._fdatea&&(this._tdatea=new Date(this._fdatea.getTime()+864e5*this.entity.valid_number))}},{key:"_chooseTab",value:function(e,t){this.entity0=e,this._currentTabActivated=t}},{key:"saveChangeRequest",value:function(){var e=this;if(null==this._dt1a||null==this._dt2a||this._fdatea>this._tdatea)this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title);else{var t={};t.id=this.entity.id,t.customer_id=this.entity.customer_id,t.received_date=this._dt1a,t.returned_date=this._dt2a,t.valid_number=this.entity.valid_number,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/labresult/updateRequestInfo",t).subscribe(function(t){console.log("Request",t),"ok"==t.result?(e._notifyService.showSuccess("en"==e.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),e.socket.emit("refresh",{})):e._notifyService.showWarning("en"==e.user.lang?v.W.MSG_UPDATENO_EN:v.W.MSG_UPDATENO,"en"==e.user.lang?v.W.error_title_en:v.W.error_title)},function(){e._notifyService.showError("en"==e.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==e.user.lang?v.W.error_title_en:v.W.error_title)})}}},{key:"saveChangeSample",value:function(){var e=this,t={};t.sample_id=this.entity0.sample_id,t.sample_name=this.entity0.sample_name,t.sample_name_e=this.entity0.sample_name_e,t.weight=this.entity0.weight,t.description=this.entity0.description,t.description_e=this.entity0.description_e,t.note=this.entity0.note,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,""!=this.entity0.sample_name&&null!=this.entity0.sample_name?this._dataService.post("/labresult/updateSampleInfo",t).subscribe(function(t){"ok"==t.result?(e._notifyService.showSuccess("en"==e.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),e.socket.emit("refresh",{})):e._notifyService.showWarning("en"==e.user.lang?v.W.MSG_UPDATENO_EN:v.W.MSG_UPDATENO,"en"==e.user.lang?v.W.error_title_en:v.W.error_title)},function(){e._notifyService.showError("en"==e.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==e.user.lang?v.W.error_title_en:v.W.error_title)}):this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)}},{key:"_popupRepareResults",value:function(e,t){this._requestIdTemp=t.request_id,this.loadLabResultList(t.request_id),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"loadLabResultList",value:function(t){var n=this;this._isLoadingResult=!0,this._dataService.post("/lab/getlistresultlabsbyid2side",{request_id:t,filter:this._keywordAdditional}).subscribe(function(t){var a,i=[],o=e(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({code:r.code,code_father:r.code_father,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,mark:r.mark,request_no:r.request_no,result_record:r.result_record,result_record_e:r.result_record_e,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,parameter_id:r.parameter_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,status:r.status,note:r.note,export_result:null==r.export_result?1:r.export_result,allow_lod:null!=r.allow_lod&&r.allow_lod,compare_note:r.compare_note})}}catch(l){o.e(l)}finally{o.f()}n._getlist2side=i,n._isLoadingResult=!1})}},{key:"_reupdateInformation",value:function(e){this._dataService.post("/lab/reupdateInformation2Sides",{getlist:e}).subscribe(function(e){})}},{key:"popupComment",value:function(e,t){this.loadDetailSample(t.sample_id),this.modalService.open(e,{size:"md",centered:!0})}},{key:"saveChangeComment",value:function(e,t){var n=this,a={};a.sample_id=this.entityComment.sample_id,a.take_note=this.entityComment.take_note,a.url_img=e,a.flag=t,this._dataService.post("/request/updateComment",a).subscribe(function(e){n._notifyService.showSuccess("en"==n.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),n.socket.emit("refresh",{}),n.fileUpload=null,n.entityComment.url_img=null,n.loadDetailSample(n.entityComment.sample_id)})}},{key:"loadDetailSample",value:function(e){var t=this,n={};n.sample_id=e,this._dataService.post("/request/detailSampleOrder",n).subscribe(function(e){t.entityComment=e.data,t.entityComment.url_img=e.data.url_img,t._path=null==e.data.url_img?null:e.data.url_img.substr(e.data.url_img.lastIndexOf("/")+1,e.data.url_img.length)})}},{key:"fileEvent",value:function(e){var t=e.target.files[0];if(void 0===t||void 0===t.name)this.fileUpload=null,this.entityComment.url_img=null,this._notifyService.showError("en"==this.user.lang?v.W.recheck_file_en:v.W.recheck_file,"en"==this.user.lang?v.W.error_title_en:v.W.error_title);else{this.fileUpload=t.name;var n=this.fileUpload.split(".").pop();"jpg"===n||"jpeg"===n||"png"===n?(this.entityComment.url_img=t.name,this._processUpload(e.target)):(this._notifyService.showError("en"==this.user.lang?v.W.format_incorrect_en:v.W.format_incorrect,"en"==this.user.lang?v.W.error_title_en:v.W.error_title),this.fileUpload=null,this.entityComment.url_img=null)}}},{key:"_processUpload",value:function(e){var t=this;if(null==e)this._notifyService.showError("en"==this.user.lang?v.W.recheck_file_en:v.W.recheck_file,"en"==this.user.lang?v.W.error_title_en:v.W.error_title);else{var n={folder_name:"lab_attachment"};n.id=this.entityComment.sample_id,this._uploadService.uploadFile("/services/uploads/"+n.id+"/"+n.folder_name,e.files).subscribe(function(e){t.saveChangeComment(e.data,1)})}}},{key:"removeAttachment",value:function(e){var t=this,n={};n.url=e.url_img,this._dataService.post("/services/deletefile1",n).subscribe(function(n){var a={};a.sample_id=e.sample_id,a.take_note=e.take_note,a.url_img=null,t._dataService.post("/request/updateComment",a).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),t._path="",t.loadDetailSample(e.sample_id)})})}},{key:"_downloadFileResult",value:function(e){window.open(p.h.BASE_API+"/"+e.url_img,"blank")}},{key:"closeModal",value:function(){this.modalService.dismissAll()}}]),t}()).\u0275fac=function(e){return new(e||de)(x.Y36(y.e),x.Y36(b.D),x.Y36(s.F0),x.Y36(A.c),x.Y36(T.C),x.Y36(q.x),x.Y36(M.FF))},de.\u0275cmp=x.Xpm({type:de,selectors:[["app-lab-results"]],viewQuery:function(e,t){var n;1&e&&(x.Gf(L,5),x.Gf(L,5)),2&e&&(x.iGM(n=x.CRH())&&(t.fileUpload=n.first),x.iGM(n=x.CRH())&&(t.fileUpload1=n.first))},decls:117,vars:104,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["type","button","routerLink","/request/lab-report",1,"btn","btn-sm","btn-primary","mr-sm-2"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"row",2,"overflow-x","scroll"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","90px"],["scope","col"],[4,"ngIf"],["contentLanguage",""],["contentStatus",""],["contentRequest",""],["contentAdditionalInfo",""],["contentCommentUpload",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","10",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["ngbDropdown","","class","btn-group mr-sm-1","role","group",4,"ngIf"],["href","javascript:;",3,"click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-default",4,"ngIf"],["ngbDropdown","","role","group",1,"btn-group","mr-sm-1"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["href","javascript:;",1,"dropdown-item",3,"click"],["class","dropdown-item","href","javascript:;",3,"click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-warning",3,"click"],[1,"icofont","icofont-pencil-alt-5"],["href","javascript:;",3,"click"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-danger"],[1,"badge","badge-success"],[1,"badge","badge-default"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-danger","mr-sm-2",3,"click"],["name","changestate",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value"],[1,"form-group"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],[1,"col-md-4"],["for","received_date"],["type","text","bsDatepicker","","name","_fdatea","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdatea","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",1,"form-control","mr-sm-2",3,"type","placeholder","ngModel","min","ngModelChange","change"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],[1,"flex-wrap"],[1,"btn-group","flex-wrap"],[1,"jbold"],[1,"col-md-6"],[3,"for"],["type","text",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],[1,"col-md-12","text-right"],[1,"btn","btn-sm","btn-light","mr-sm-2",3,"click"],[1,"fa","fa-times-circle-o"],["type","button",3,"ngClass","click"],["for","search_id",1,"mr-sm-2"],["type","text","name","search_id","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","change","keyup.enter"],[1,"tableFixHead"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate"],["type","text",1,"form-control",2,"width","100px",3,"name","ngModel","ngModelChange","change"],["type","text",1,"form-control",2,"width","100px",3,"name","ngModel","placeholder","ngModelChange","change"],[1,"text-truncate","text-center"],["type","checkbox",1,"form-control",2,"width","25px",3,"name","ngModel","ngModelChange","change"],[1,"form","theme-form",3,"ngSubmit"],["form1","ngForm"],["for","comment"],["rows","2","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["for","img",1,"mr-sm-2"],["name","fileUpload","type","file",3,"change"],["fileUpload",""],["type","hidden","name","fileUpload",3,"ngModel","ngModelChange"],[1,"mute"],["href","javascript:;",1,"mr-sm-2",3,"click"],["href","javascript:;","class","text-danger",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit","class","btn btn-primary mr-sm-1",4,"ngIf"],["href","javascript:;",1,"text-danger",3,"click"],[1,"fa","fa-trash"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary","mr-sm-1"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"div",1),x.TgZ(6,"div",5),x.TgZ(7,"div",6),x.TgZ(8,"input",7),x.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.ALo(9,"translate"),x.qZA(),x.TgZ(10,"input",8),x.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.qZA(),x.TgZ(11,"input",9),x.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.qZA(),x.TgZ(12,"select",10),x.NdJ("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.TgZ(13,"option",11),x._uU(14),x.ALo(15,"translate"),x.qZA(),x.TgZ(16,"option",12),x._uU(17),x.ALo(18,"translate"),x.qZA(),x.TgZ(19,"option",13),x._uU(20),x.ALo(21,"translate"),x.qZA(),x.TgZ(22,"option",14),x._uU(23),x.ALo(24,"translate"),x.qZA(),x.TgZ(25,"option",15),x._uU(26),x.ALo(27,"translate"),x.qZA(),x.TgZ(28,"option",16),x._uU(29),x.ALo(30,"translate"),x.qZA(),x.qZA(),x.YNc(31,U,4,3,"button",17),x.TgZ(32,"button",18),x._uU(33),x.ALo(34,"translate"),x.qZA(),x.YNc(35,N,1,0,"img",19),x.qZA(),x.qZA(),x.TgZ(36,"div",20),x.TgZ(37,"div",21),x.TgZ(38,"select",22),x.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.TgZ(39,"option",23),x._uU(40,"#10"),x.qZA(),x.TgZ(41,"option",24),x._uU(42,"#25"),x.qZA(),x.TgZ(43,"option",25),x._uU(44,"#50"),x.qZA(),x.TgZ(45,"option",26),x._uU(46,"#100"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(47,"div",27),x.TgZ(48,"div",28),x.TgZ(49,"div",29),x.TgZ(50,"div",30),x.TgZ(51,"pagination",31),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(52,"div",32),x.TgZ(53,"a",33),x._uU(54),x.ALo(55,"translate"),x.ALo(56,"translate"),x.ALo(57,"translate"),x.ALo(58,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(59,"div",28),x.TgZ(60,"div",34),x.TgZ(61,"table",35),x.TgZ(62,"thead",36),x.TgZ(63,"tr"),x.TgZ(64,"th",37),x._uU(65,"#"),x.qZA(),x.TgZ(66,"th",38),x._uU(67),x.ALo(68,"translate"),x.qZA(),x.TgZ(69,"th",39),x._uU(70),x.ALo(71,"translate"),x.qZA(),x.TgZ(72,"th",39),x._uU(73),x.ALo(74,"translate"),x.qZA(),x.TgZ(75,"th",39),x._uU(76),x.ALo(77,"translate"),x.qZA(),x.TgZ(78,"th",39),x._uU(79),x.ALo(80,"translate"),x.qZA(),x.TgZ(81,"th",39),x._uU(82),x.ALo(83,"translate"),x.qZA(),x.TgZ(84,"th",39),x._uU(85),x.ALo(86,"translate"),x.qZA(),x.TgZ(87,"th",39),x._uU(88),x.ALo(89,"translate"),x.qZA(),x.TgZ(90,"th",39),x._uU(91),x.ALo(92,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(93,"tbody"),x.YNc(94,D,6,3,"ng-container",40),x.YNc(95,B,2,1,"ng-container",40),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(96,"div",28),x.TgZ(97,"div",29),x.TgZ(98,"div",30),x.TgZ(99,"pagination",31),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(100,"div",32),x.TgZ(101,"a",33),x._uU(102),x.ALo(103,"translate"),x.ALo(104,"translate"),x.ALo(105,"translate"),x.ALo(106,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(107,z,22,15,"ng-template",null,41,x.W1O),x.YNc(109,V,31,29,"ng-template",null,42,x.W1O),x.YNc(111,X,116,129,"ng-template",null,43,x.W1O),x.YNc(113,ie,44,33,"ng-template",null,44,x.W1O),x.YNc(115,se,36,19,"ng-template",null,45,x.W1O)),2&e&&(x.xp6(8),x.Q6J("placeholder",x.lcZ(9,52,"Search"))("ngModel",t._keyword),x.xp6(2),x.Q6J("ngModel",t._fDate)("bsConfig",x.DdM(102,ce)),x.xp6(1),x.Q6J("ngModel",t._tDate)("bsConfig",x.DdM(103,ce)),x.xp6(1),x.Q6J("ngModel",t._status),x.xp6(2),x.hij(" ",x.lcZ(15,54,"All")," "),x.xp6(3),x.hij(" ",x.lcZ(18,56,"Draft")," "),x.xp6(3),x.hij(" ",x.lcZ(21,58,"Official")," "),x.xp6(3),x.hij(" ",x.lcZ(24,60,"Evicted")," "),x.xp6(3),x.hij(" ",x.lcZ(27,62,"Printed")," "),x.xp6(3),x.hij(" ",x.lcZ(30,64,"Cancel")," "),x.xp6(2),x.Q6J("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),x.xp6(2),x.hij(" ",x.lcZ(34,66,"Go back")," "),x.xp6(2),x.Q6J("ngIf",t._isLoading),x.xp6(3),x.Q6J("ngModel",t.pageSize),x.xp6(13),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(55,68,"Total of records"),": ",t.totalRow," - ",x.lcZ(56,70,"Page")," ",t.pageIndex," ",x.lcZ(57,72,"of")," ",t.totalPage," ",x.lcZ(58,74,"page"),""),x.xp6(13),x.hij(" ",x.lcZ(68,76,"Actions")," "),x.xp6(3),x.hij(" ",x.lcZ(71,78,"Report code")," "),x.xp6(3),x.hij(" ",x.lcZ(74,80,"Request code")," "),x.xp6(3),x.hij(" ",x.lcZ(77,82,"Sample name")," "),x.xp6(3),x.hij(" ",x.lcZ(80,84,"Received date")," "),x.xp6(3),x.Oqu(x.lcZ(83,86,"Returned date")),x.xp6(3),x.hij(" ",x.lcZ(86,88,"Company")," "),x.xp6(3),x.Oqu(x.lcZ(89,90,"Contact")),x.xp6(3),x.Oqu(x.lcZ(92,92,"Status")),x.xp6(3),x.Q6J("ngIf",0==t._getlist.length),x.xp6(1),x.Q6J("ngIf",t._getlist.length>0),x.xp6(4),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(103,94,"Total of records"),": ",t.totalRow," - ",x.lcZ(104,96,"Page")," ",t.pageIndex," ",x.lcZ(105,98,"of")," ",t.totalPage," ",x.lcZ(106,100,"page"),""))},directives:[l.Fj,l.JJ,l.On,S.Y5,S.Np,l.EJ,l.YN,l.Kr,r.O5,s.rH,C.Qt,r.sg,M.jt,M.iD,M.Vi,l._Y,l.JL,l.F,w.w9,l.Q7,l.c5,r.mk,l.Wl],pipes:[k.X$,r.uU],styles:[""]}),de),ge=["fileUpload"];function pe(e,t){if(1&e&&(x.TgZ(0,"option",37),x._uU(1),x.qZA()),2&e){var n=t.$implicit,a=x.oxw();x.Q6J("value",n.id),x.xp6(1),x.hij(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function _e(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",38),x.NdJ("click",function(){x.CHM(n);var e=x.oxw();return null==e._id||""==e._id?e._exportAll(e._preparationlist):e._exportAllLab()}),x._UZ(1,"i",39),x._uU(2),x.ALo(3,"translate"),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,1,"Export")," "))}function he(e,t){1&e&&x._UZ(0,"img",40)}function me(e,t){1&e&&(x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",41),x.TgZ(3,"h3",42),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.qZA(),x.BQk()),2&e&&(x.xp6(4),x.hij(" ",x.lcZ(5,1,"No records now!!!")," "))}function fe(e,t){1&e&&x._UZ(0,"i",53)}function Ze(e,t){1&e&&x._UZ(0,"i",54)}function ve(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",55),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(3);return e._updateValidationv2(e._preparationlist)}),x.ALo(1,"translate"),x._UZ(2,"i",56),x.qZA()}2&e&&x.Q6J("title",x.lcZ(1,1,"Save"))}function xe(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"a",57),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit,t=x.oxw(2),a=x.MAs(120);return t.popupComment(a,e)}),x._uU(2),x.qZA(),x.BQk()}if(2&e){var a=x.oxw().$implicit;x.xp6(2),x.Oqu(a.inner_code)}}function ye(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.Oqu(n.inner_code)}}function be(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"a",57),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit;return x.oxw(2)._updateStatusSample(e)}),x._uU(2),x.ALo(3,"translate"),x.qZA(),x.BQk()}2&e&&(x.xp6(2),x.Oqu(x.lcZ(3,1,"Return lab")))}function Ae(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.hij(" ",n.mark," ")}}function Te(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",58),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.mark=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","mark",i+1,""),x.Q6J("ngModel",o.mark)}}function qe(e,t){1&e&&x._UZ(0,"i",59)}function Me(e,t){1&e&&x._UZ(0,"i",60)}function Se(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.hij(" ",n.compare_note," ")}}function Ce(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",58),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.compare_note=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","comparenote",i+1,""),x.Q6J("ngModel",o.compare_note)}}function we(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"th",34),x._uU(2),x.qZA(),x.TgZ(3,"td",44),x.TgZ(4,"button",45),x.NdJ("click",function(){return x.CHM(n),x.oxw(2)._switchFlagEdit()}),x.ALo(5,"translate"),x.YNc(6,fe,1,0,"i",46),x.YNc(7,Ze,1,0,"i",47),x.qZA(),x.YNc(8,ve,3,3,"button",48),x.qZA(),x.TgZ(9,"td"),x.YNc(10,xe,3,1,"ng-container",35),x.YNc(11,ye,2,1,"ng-container",35),x.qZA(),x.TgZ(12,"td"),x._uU(13),x.qZA(),x.TgZ(14,"td"),x._uU(15),x.qZA(),x.TgZ(16,"td"),x._uU(17),x.qZA(),x.TgZ(18,"td"),x._uU(19),x.qZA(),x.TgZ(20,"td"),x._uU(21),x.qZA(),x.TgZ(22,"td"),x._uU(23),x.qZA(),x.TgZ(24,"td"),x._uU(25),x.qZA(),x.TgZ(26,"td"),x._uU(27),x.qZA(),x.TgZ(28,"td"),x._uU(29),x.qZA(),x.TgZ(30,"td"),x._uU(31),x.qZA(),x.TgZ(32,"td"),x._UZ(33,"span",49),x.qZA(),x.TgZ(34,"td"),x.YNc(35,be,4,3,"ng-container",35),x.qZA(),x.TgZ(36,"td"),x.YNc(37,Ae,2,1,"ng-container",35),x.YNc(38,Te,2,2,"ng-container",35),x.qZA(),x.TgZ(39,"td",50),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return e.allow_lod=!e.allow_lod}),x.YNc(40,qe,1,0,"i",51),x.YNc(41,Me,1,0,"i",52),x.qZA(),x.TgZ(42,"td"),x.YNc(43,Se,2,1,"ng-container",35),x.YNc(44,Ce,2,2,"ng-container",35),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(2),x.hij(" ",i+1+o.pageSize*(o.pageIndex-1)," "),x.xp6(2),x.Q6J("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!o._authenService.hasPermission("REQ-REPORT","update"))("title",x.lcZ(5,27,a.flag?"Cancel":"_Edit")),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",o._authenService.hasPermission("REQ-REPORT","update")),x.xp6(1),x.Q6J("ngIf",!o._authenService.hasPermission("REQ-REPORT","update")),x.xp6(2),x.Oqu(a.code),x.xp6(2),x.hij(" ","en"==o.user.lang?a.specification_name_e:a.specification_name_l," "),x.xp6(2),x.hij(" ","en"==o.user.lang?a.para_name_e:a.para_name_l," "),x.xp6(2),x.Oqu(a.tat),x.xp6(2),x.Oqu(a.note),x.xp6(2),x.Oqu(a.note_lab),x.xp6(2),x.hij(" ",a.note_asm," "),x.xp6(2),x.Oqu(a.unit),x.xp6(2),x.hij(" ",a.lod," "),x.xp6(2),x.hij(" ",a.loq," "),x.xp6(2),x.Q6J("innerHTML",a.result_record,x.oJD),x.xp6(2),x.Q6J("ngIf",o._authenService.hasPermission("REQ-REPORT","update")&&o._authenService.hasPermission("REQ-REPORT","delete")),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",a.allow_lod),x.xp6(1),x.Q6J("ngIf",!a.allow_lod),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag)}}function ke(e,t){if(1&e&&(x.ynx(0),x.YNc(1,we,45,29,"tr",43),x.BQk()),2&e){var n=x.oxw();x.xp6(1),x.Q6J("ngForOf",n._preparationlist)}}function Le(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",83),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(2);return e.removeAttachment(e.entityComment)}),x._UZ(1,"i",84),x.qZA()}}function Ue(e,t){1&e&&(x.ynx(0),x.TgZ(1,"a",85),x._UZ(2,"img",86),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.BQk()),2&e&&(x.xp6(3),x.hij(" ",x.lcZ(4,1,"Processing"),""))}function Ne(e,t){1&e&&(x.TgZ(0,"button",87),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Save & close")," "))}function De(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",61,62),x.NdJ("ngSubmit",function(){x.CHM(n);var e=x.oxw();return e.saveChangeComment(e.entityComment,0)}),x.TgZ(2,"div",63),x.TgZ(3,"h4",64),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.TgZ(6,"button",65),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(7,"span",66),x._uU(8,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(9,"div",67),x.TgZ(10,"div",68),x.TgZ(11,"div",69),x.TgZ(12,"div",70),x.TgZ(13,"label",71),x._uU(14),x.ALo(15,"translate"),x.qZA(),x.TgZ(16,"textarea",72),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entityComment.take_note=e}),x.qZA(),x.qZA(),x.qZA(),x.TgZ(17,"div",69),x.TgZ(18,"div",70),x.TgZ(19,"label",73),x._uU(20),x.ALo(21,"translate"),x.qZA(),x.TgZ(22,"input",74,75),x.NdJ("change",function(e){return x.CHM(n),x.oxw().fileEvent(e)}),x.qZA(),x.TgZ(24,"input",76),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entityComment.url_img=e}),x.qZA(),x._UZ(25,"br"),x.TgZ(26,"small",77),x.TgZ(27,"a",78),x.NdJ("click",function(){x.CHM(n);var e=x.oxw();return e._downloadFileResult(e.entityComment)}),x._uU(28),x.qZA(),x.YNc(29,Le,2,0,"a",79),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(30,"div",80),x.TgZ(31,"button",81),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x._uU(32),x.ALo(33,"translate"),x.qZA(),x.YNc(34,Ue,5,3,"ng-container",35),x.YNc(35,Ne,3,3,"button",82),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(4),x.AsE(" ",x.lcZ(5,11,"Note")," - ",a.entityComment.inner_code," "),x.xp6(10),x.hij("",x.lcZ(15,13,"Content")," "),x.xp6(2),x.Q6J("ngModel",a.entityComment.take_note),x.xp6(4),x.Oqu(x.lcZ(21,15,"Attachment")),x.xp6(4),x.Q6J("ngModel",a.entityComment.url_img),x.xp6(4),x.Oqu(a._path),x.xp6(1),x.Q6J("ngIf",null!=a.entityComment.url_img),x.xp6(3),x.hij(" ",x.lcZ(33,17,"Close")," "),x.xp6(2),x.Q6J("ngIf",a.isSave),x.xp6(1),x.Q6J("ngIf",!a.isSave)}}var Ie=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};h().vfs=m.I.vfs;var Ye=function(){var t=function(){function t(e,a,i,o,r,l,s,c){var d=this;n(this,t),this._authenService=e,this._dataService=a,this._route=i,this._notifyService=o,this._uploadService=r,this._excelService=l,this.modalService=s,this._activatedRoute=c,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=3,this.entity={},this.entityComment={},this._path="",this._id="",this._flagEdit=!1,this.socket=g()(p.h.BASE_API),this.user=this._authenService.getLoggedInUser(),this._activatedRoute.params.subscribe(function(t){d._id=t.id,null==d._id?(!1===e.checkAccess("RES-VALID")||!1===e.hasPermission("RES-VALID","read"))&&d._route.navigate(["/404"]):(!1===e.checkAccess("REQ-REPORT")||!1===e.hasPermission("REQ-REPORT","read"))&&d._route.navigate(["/404"]),d.loadData(d._id),d.socket.on("refreshPage",function(e){console.log(d._id),d.loadData(d._id)})})}return i(t,[{key:"ngOnInit",value:function(){this.loadDepartment(),this.loadTestFamilyPL()}},{key:"loadData",value:function(t){var n=this;if(null==t){var a={};a.filter=this._keyword,a.domain=this.user.short_code,a.start_date=this._dt1,a.end_date=this._dt2,a.department_id=this.department_id,a.family_id=this.testcsp_id,a.flag_status=this._status,a.page=this.pageIndex,a.limit=this.pageSize,this._dataService.post("/lab/getlistresultlabs",a).subscribe(function(t){var a,i=[],o=e(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({code:r.code,code_father:r.code_father,company_code:r.company_code,company_name_e:r.company_name_e,company_name_l:r.company_name_l,contact_name:r.contact_name,customer_id:r.customer_id,email:r.email,employee_nr:r.employee_nr,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,tat:r.tat,mark:r.mark,note_asm:r.note_asm,para_name_e:r.para_name_e,para_name_l:r.para_name_l,parameter_id:r.parameter_id,phone:r.phone,received_date:r.received_date,request_no:r.request_no,result_record:r.result_record,returned_date:r.returned_date,sale_man:r.sale_man,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,flag:!1,note_lab:r.note_lab,status:r.status,note:r.note,category_name_e:r.category_name_e,category_name_l:r.category_name_l,export_result:null==r.export_result?1:r.export_result,allow_lod:null!=r.allow_lod&&r.allow_lod,compare_note:r.compare_note,dept_name_e:r.dept_name_e,dept_name_l:r.dept_name_l})}}catch(l){o.e(l)}finally{o.f()}n._preparationlist=i,n.totalRow=t.rowCount,n.totalPage=t.totalPages})}else{var i={};i.filter=this._keyword,i.page=this.pageIndex,i.limit=this.pageSize,i.request_id=this._id,this._dataService.post("/lab/getlistresultlabsbyid",i).subscribe(function(t){var a,i=[],o=e(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({code:r.code,code_father:r.code_father,company_code:r.company_code,company_name_e:r.company_name_e,company_name_l:r.company_name_l,contact_name:r.contact_name,customer_id:r.customer_id,email:r.email,employee_nr:r.employee_nr,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,tat:r.tat,mark:r.mark,note_asm:r.note_asm,para_name_e:r.para_name_e,para_name_l:r.para_name_l,parameter_id:r.parameter_id,phone:r.phone,received_date:r.received_date,request_no:r.request_no,result_record:r.result_record,returned_date:r.returned_date,sale_man:r.sale_man,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,flag:!1,note_lab:r.note_lab,status:r.status,note:r.note,category_name_e:r.category_name_e,category_name_l:r.category_name_l,export_result:null==r.export_result?1:r.export_result,allow_lod:null!=r.allow_lod&&r.allow_lod,compare_note:r.compare_note,dept_name_e:r.dept_name_e,dept_name_l:r.dept_name_l})}}catch(l){o.e(l)}finally{o.f()}n._preparationlist=i,n.totalRow=t.rowCount,n.totalPage=t.totalPages})}}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyPL",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",t).subscribe(function(t){e._pllist=t.data})}},{key:"_exportAll",value:function(t){var n,a=[],i=e(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,r="";4==o.status&&(r="en"==this.user.lang?v.W.s_done_en:v.W.s_done),3==o.status&&(r="en"==this.user.lang?v.W.s_validate_en:v.W.s_validate),2==o.status&&(r="en"==this.user.lang?v.W.s_techvalidate_en:v.W.s_techvalidate),1==o.status&&(r="en"==this.user.lang?v.W.s_prepare_en:v.W.s_prepare),0==o.status&&(r="en"==this.user.lang?v.W.s_none_en:v.W.s_none);var l=new Date(o.received_date).getTime()+864e5*o.tat;a.push({"Inner code":o.inner_code,Code:o.code,"Internal test":o.specification_name_l,Parameter:o.para_name_l,"Sample matrix":o.category_name_l,"Priority TAT":o.tat,Note:null==o.note?"":o.note,"Note Lab":null==o.note_lab?"":o.note_lab,"Note ASM":null==o.note_asm?"":o.note_asm,Unit:null==o.unit?"":o.unit,LOD:null==o.lod?"":o.lod,LOQ:null==o.loq?"":o.loq,Result:null==o.result_record?"":o.result_record,Status:r,"Received Date":d(new Date(o.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(l)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?o.dept_name_e:o.dept_name_l})}}catch(s){i.e(s)}finally{i.f()}this._excelService.exportAsExcelFile(a,"LabValidation-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_EXPORT_EN+" "+t.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+t.length+" "+v.W.record,"OK")}},{key:"_exportAllLab",value:function(){var t=this;this._dataService.post("/lab/exportresultlabbyid",{request_id:this._id,short_code:this.user.short_code}).subscribe(function(n){var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({"Ng\xe0y nh\u1eadn m\u1eabu":d(new Date(r.returned_date)).format("DD/MM/YYYY"),"M\xe3 kh\xe1ch h\xe0ng":r.employee_nr+r.request_no.substr(2,r.request_no.length),"M\xe3 s\u1ed1 m\u1eabu":r.inner_code,"T\xean m\u1eabu/n\u1ec1n m\u1eabu":null==r.sample_name_e?r.sample_name:r.sample_name_e,"Kh\u1ed1i l\u01b0\u1ee3ng/th\u1ec3 t\xedch":"",VS:"","H\xf3a":"","T\xecnh tr\u1ea1ng m\u1eabu":null==r.description_e?null==r.description?"":r.description:r.descripton_e,"Ng\xe0y/ ng\u01b0\u1eddi l\u01b0u m\u1eabu":"","Khu v\u1ef1c/ v\u1ecb tr\xed l\u01b0u":"","Ng\xe0y thanh l\xfd":"","Ng\u01b0\u1eddi thanh l\xfd":"","Tr\u01b0\u1edfng ph\xf2ng x\xe1c nh\u1eadn":"","Ghi ch\xfa":""})}}catch(l){o.e(l)}finally{o.f()}t._excelService.exportAsExcelFile(i,"LabValidation-"+d(new Date).format("YYYY-MM-DD")),t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_EXPORT_EN+" "+i.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+i.length+" "+v.W.record,"OK")})}},{key:"orgValueChange1",value:function(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e,t){var n=this;3==t||4==t?(e.status=t,Z().fire({title:"en"==this.user.lang?v.W.are_u_sure_switch_en:v.W.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData(n._id)}):n.loadData(n._id)})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData(n._id)}))}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==e.user.lang?v.W.error_title_en:v.W.error_title)})}},{key:"_switchFlagEdit",value:function(){var t,n=e(this._preparationlist);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.flag=!a.flag}}catch(i){n.e(i)}finally{n.f()}}},{key:"_updateValidationv2",value:function(e){var t=this;console.log(e),Z().fire({title:"en"==this.user.lang?v.W.are_u_sure0_en:v.W.are_u_sure0,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(n){n.value&&t._dataService.post("/lab/updateValidationv2",{getlist:e,user_id:t.user.id,ipaddress:t.user.ipaddress,short_code:t.user.short_code}).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),t.socket.emit("refresh",{})})})}},{key:"_updateValidation",value:function(e,t){var n=this;1==t&&(e.allow_lod=!e.allow_lod),Z().fire({title:"en"==this.user.lang?v.W.are_u_sure0_en:v.W.are_u_sure0,text:e.code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(t){t.value&&n._dataService.post("/lab/updateValidation",e).subscribe(function(e){n._notifyService.showSuccess("en"==n.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),n.socket.emit("refresh",{})})})}},{key:"_updateValidationLOD",value:function(e,t){var n=this;1==t&&(e.allow_lod=!e.allow_lod),this._dataService.post("/lab/updateValidationLOD",e).subscribe(function(e){n._notifyService.showSuccess("en"==n.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),n.socket.emit("refresh",{})})}},{key:"popupComment",value:function(e,t){this.loadDetailSample(t.sample_id),this.modalService.open(e,{size:"md",centered:!0})}},{key:"saveChangeComment",value:function(e,t){var n=this,a={};a.sample_id=this.entityComment.sample_id,a.take_note=this.entityComment.take_note,a.url_img=e,a.flag=t,this._dataService.post("/request/updateComment",a).subscribe(function(e){n._notifyService.showSuccess("en"==n.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),n.socket.emit("refresh",{}),n.fileUpload=null,n.entityComment.url_img=null,n.modalService.dismissAll()})}},{key:"loadDetailSample",value:function(e){var t=this,n={};n.sample_id=e,this._dataService.post("/request/detailSampleOrder",n).subscribe(function(e){console.log(e),t.entityComment=e.data,t.entityComment.url_img=e.data.url_img,t._path=null==e.data.url_img?null:e.data.url_img.substr(e.data.url_img.lastIndexOf("/")+1,e.data.url_img.length)})}},{key:"fileEvent",value:function(e){var t=e.target.files[0];if(void 0===t||void 0===t.name)this.fileUpload=null,this.entityComment.url_img=null,this._notifyService.showError("en"==this.user.lang?v.W.recheck_file_en:v.W.recheck_file,"en"==this.user.lang?v.W.error_title_en:v.W.error_title);else{this.fileUpload=t.name;var n=this.fileUpload.split(".").pop();"jpg"===n||"jpeg"===n||"png"===n?(console.log("ok"),this.entityComment.url_img=t.name,this._processUpload(e.target)):(this._notifyService.showError("en"==this.user.lang?v.W.format_incorrect_en:v.W.format_incorrect,"en"==this.user.lang?v.W.error_title_en:v.W.error_title),this.fileUpload=null,this.entityComment.url_img=null)}}},{key:"_processUpload",value:function(e){var t=this;if(null==e)this._notifyService.showError("en"==this.user.lang?v.W.recheck_file_en:v.W.recheck_file,"en"==this.user.lang?v.W.error_title_en:v.W.error_title);else{var n={folder_name:"lab_attachment"};n.id=this.entityComment.sample_id,this._uploadService.uploadFile("/services/uploads/"+n.id+"/"+n.folder_name,e.files).subscribe(function(e){console.log(e),t.saveChangeComment(e.data,1)})}}},{key:"removeAttachment",value:function(e){var t=this,n={};n.url=e.url_img,console.log(n),this._dataService.post("/services/deletefile1",n).subscribe(function(n){var a={};a.sample_id=e.sample_id,a.take_note=e.take_note,a.url_img=null,t._dataService.post("/request/updateComment",a).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),t.socket.emit("refresh",{}),t._path="",t.loadDetailSample(e.sample_id)})})}},{key:"_updateStatusSample",value:function(e){var t=this;console.log(e),Z().fire({title:"en"==this.user.lang?v.W.are_u_sure_switch_en:v.W.are_u_sure_switch,text:e.inner_code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(n){if(n.value){var a={};a.sample_id=e.sample_id,a.parameter_id=e.parameter_id,a.category_id=e.category_id,a.userid=t.user.id,a.ipaddress=t.user.ipaddress,a.short_code=t.user.short_code,t._dataService.post("/labresult/updateReturnSample",a).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),t.socket.emit("refresh",{})})}})}},{key:"_downloadFileResult",value:function(e){window.open(p.h.BASE_API+"/"+e.url_img,"blank")}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(x.Y36(y.e),x.Y36(b.D),x.Y36(s.F0),x.Y36(A.c),x.Y36(T.C),x.Y36(q.x),x.Y36(M.FF),x.Y36(s.gz))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-labrep-detaillist"]],viewQuery:function(e,t){var n;(1&e&&(x.Gf(ge,5),x.Gf(ge,5)),2&e)&&(x.iGM(n=x.CRH())&&(t.fileUpload=n.first),x.iGM(n=x.CRH())&&(t.fileUpload1=n.first))},decls:121,vars:123,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","disabled","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["routerLink","/request/lab-report",1,"btn","btn-sm","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[1,"text-truncate"],[4,"ngIf"],["contentCommentUpload",""],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","18",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],[2,"text-align","center"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[3,"innerHTML"],[2,"cursor","pointer",3,"click"],["class","fa fa-check-circle text-success",4,"ngIf"],["class","fa fa-times-circle text-danger",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["href","javascript:;",3,"click"],["type","text","autoSizeInput","",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"fa","fa-check-circle","text-success"],[1,"fa","fa-times-circle","text-danger"],[1,"form","theme-form",3,"ngSubmit"],["form1","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group"],["for","comment"],["rows","2","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["for","img",1,"mr-sm-2"],["name","fileUpload","type","file",3,"change"],["fileUpload",""],["type","hidden","name","fileUpload",3,"ngModel","ngModelChange"],[1,"mute"],["href","javascript:;",1,"mr-sm-2",3,"click"],["href","javascript:;","class","text-danger",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit","class","btn btn-primary mr-sm-1",4,"ngIf"],["href","javascript:;",1,"text-danger",3,"click"],[1,"fa","fa-trash"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary","mr-sm-1"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"div",1),x.TgZ(6,"div",5),x.TgZ(7,"div",6),x.TgZ(8,"input",7),x.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData(t._id)})("keyup.enter",function(){return t.loadData(t._id)}),x.ALo(9,"translate"),x.qZA(),x.TgZ(10,"input",8),x.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.qZA(),x.TgZ(11,"input",9),x.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.qZA(),x.TgZ(12,"select",10),x.NdJ("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData(t._id)}),x.TgZ(13,"option",11),x._uU(14),x.ALo(15,"translate"),x.ALo(16,"translate"),x.qZA(),x.YNc(17,pe,2,2,"option",12),x.qZA(),x.YNc(18,_e,4,3,"button",13),x.TgZ(19,"a",14),x._uU(20),x.ALo(21,"translate"),x.ALo(22,"translate"),x.qZA(),x.YNc(23,he,1,0,"img",15),x.qZA(),x.qZA(),x.TgZ(24,"div",16),x.TgZ(25,"div",17),x.TgZ(26,"select",18),x.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.TgZ(27,"option",19),x._uU(28,"#10"),x.qZA(),x.TgZ(29,"option",20),x._uU(30,"#25"),x.qZA(),x.TgZ(31,"option",21),x._uU(32,"#50"),x.qZA(),x.TgZ(33,"option",22),x._uU(34,"#100"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(35,"div",23),x.TgZ(36,"div",24),x.TgZ(37,"div",25),x.TgZ(38,"div",26),x.TgZ(39,"pagination",27),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(40,"div",28),x.TgZ(41,"a",29),x._uU(42),x.ALo(43,"translate"),x.ALo(44,"translate"),x.ALo(45,"translate"),x.ALo(46,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(47,"div",24),x.TgZ(48,"div",30),x.TgZ(49,"table",31),x.TgZ(50,"thead",32),x.TgZ(51,"tr"),x.TgZ(52,"th",33),x._uU(53,"#"),x.qZA(),x.TgZ(54,"th",34),x._uU(55),x.ALo(56,"translate"),x.qZA(),x.TgZ(57,"th",34),x._uU(58),x.ALo(59,"translate"),x.qZA(),x.TgZ(60,"th",34),x._uU(61),x.ALo(62,"translate"),x.qZA(),x.TgZ(63,"th",34),x._uU(64),x.ALo(65,"translate"),x.qZA(),x.TgZ(66,"th",34),x._uU(67),x.ALo(68,"translate"),x.qZA(),x.TgZ(69,"th",34),x._uU(70),x.ALo(71,"translate"),x.qZA(),x.TgZ(72,"th",34),x._uU(73),x.ALo(74,"translate"),x.qZA(),x.TgZ(75,"th",34),x._uU(76),x.ALo(77,"translate"),x.qZA(),x.TgZ(78,"th",34),x._uU(79),x.ALo(80,"translate"),x.qZA(),x.TgZ(81,"th",34),x._uU(82),x.ALo(83,"translate"),x.qZA(),x.TgZ(84,"th",34),x._uU(85),x.ALo(86,"translate"),x.qZA(),x.TgZ(87,"th",34),x._uU(88),x.ALo(89,"translate"),x.qZA(),x.TgZ(90,"th",34),x._uU(91),x.ALo(92,"translate"),x.qZA(),x.TgZ(93,"th",34),x._uU(94),x.ALo(95,"translate"),x.qZA(),x.TgZ(96,"th",34),x._uU(97),x.ALo(98,"translate"),x.qZA(),x.TgZ(99,"th",34),x._uU(100),x.ALo(101,"translate"),x.qZA(),x.TgZ(102,"th",34),x._uU(103),x.ALo(104,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(105,"tbody"),x.YNc(106,me,6,3,"ng-container",35),x.YNc(107,ke,2,1,"ng-container",35),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(108,"div",24),x.TgZ(109,"div",25),x.TgZ(110,"div",26),x.TgZ(111,"pagination",27),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(112,"div",28),x.TgZ(113,"a",29),x._uU(114),x.ALo(115,"translate"),x.ALo(116,"translate"),x.ALo(117,"translate"),x.ALo(118,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(119,De,36,19,"ng-template",null,36,x.W1O)),2&e&&(x.xp6(8),x.Q6J("placeholder",x.lcZ(9,61,"Search"))("ngModel",t._keyword),x.xp6(2),x.Q6J("ngModel",t._fDate)("bsConfig",x.DdM(121,Ie))("disabled",null!=t._id),x.xp6(1),x.Q6J("ngModel",t._tDate)("bsConfig",x.DdM(122,Ie))("disabled",null!=t._id),x.xp6(1),x.Q6J("ngModel",t.department_id)("disabled",null!=t._id),x.xp6(2),x.AsE(" ",x.lcZ(15,63,"All")," ",x.lcZ(16,65,"Department")," "),x.xp6(3),x.Q6J("ngForOf",t._deptlist),x.xp6(1),x.Q6J("ngIf",t._authenService.hasPermission("RES-VALID","report")||t._authenService.hasPermission("REQ-REPORT","report")),x.xp6(2),x.AsE(" ",x.lcZ(21,67,"Return")," ",x.lcZ(22,69,"Report")," "),x.xp6(3),x.Q6J("ngIf",t._isLoading),x.xp6(3),x.Q6J("ngModel",t.pageSize),x.xp6(13),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(43,71,"Total of records"),": ",t.totalRow," - ",x.lcZ(44,73,"Page")," ",t.pageIndex," ",x.lcZ(45,75,"of")," ",t.totalPage," ",x.lcZ(46,77,"page"),""),x.xp6(13),x.Oqu(x.lcZ(56,79,"Actions")),x.xp6(3),x.hij(" ",x.lcZ(59,81,"Inner code")," "),x.xp6(3),x.hij(" ",x.lcZ(62,83,"Code")," "),x.xp6(3),x.Oqu(x.lcZ(65,85,"Internal testing")),x.xp6(3),x.Oqu(x.lcZ(68,87,"Parameter name")),x.xp6(3),x.Oqu(x.lcZ(71,89,"Priority")),x.xp6(3),x.Oqu(x.lcZ(74,91,"Note")),x.xp6(3),x.Oqu(x.lcZ(77,93,"Note lab")),x.xp6(3),x.Oqu(x.lcZ(80,95,"Note asm")),x.xp6(3),x.Oqu(x.lcZ(83,97,"Unit")),x.xp6(3),x.Oqu(x.lcZ(86,99,"LOD")),x.xp6(3),x.Oqu(x.lcZ(89,101,"LOQ")),x.xp6(3),x.Oqu(x.lcZ(92,103,"Results")),x.xp6(3),x.Oqu(x.lcZ(95,105,"Status")),x.xp6(3),x.Oqu(x.lcZ(98,107,"Mark")),x.xp6(3),x.Oqu(x.lcZ(101,109,"Tick LOD?")),x.xp6(3),x.Oqu(x.lcZ(104,111,"Compare")),x.xp6(3),x.Q6J("ngIf",0==t._preparationlist.length),x.xp6(1),x.Q6J("ngIf",t._preparationlist.length>0),x.xp6(4),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(115,113,"Total of records"),": ",t.totalRow," - ",x.lcZ(116,115,"Page")," ",t.pageIndex," ",x.lcZ(117,117,"of")," ",t.totalPage," ",x.lcZ(118,119,"page"),""))},directives:[l.Fj,l.JJ,l.On,S.Y5,S.Np,l.EJ,l.YN,l.Kr,r.sg,r.O5,s.yS,C.Qt,r.mk,l._Y,l.JL,l.F],pipes:[k.X$],styles:[""]}),t}();function Je(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",34),x.NdJ("click",function(){x.CHM(n);var e=x.oxw();return e._exportAll(e.exportList)}),x._UZ(1,"i",35),x._uU(2),x.ALo(3,"translate"),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,1,"Export")," "))}function Oe(e,t){1&e&&x._UZ(0,"img",36)}function Qe(e,t){1&e&&(x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",37),x.TgZ(3,"h3",38),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.qZA(),x.BQk()),2&e&&(x.xp6(4),x.hij(" ",x.lcZ(5,1,"No records now!!!")," "))}function Pe(e,t){if(1&e&&(x.TgZ(0,"a",46),x.TgZ(1,"strong",38),x._uU(2),x.qZA(),x.qZA()),2&e){var n=x.oxw().$implicit;x.MGl("routerLink","/request/lab-report-validation/",n.id,""),x.xp6(2),x.Oqu(n.total_validation)}}function Ee(e,t){1&e&&(x.ynx(0),x.TgZ(1,"strong"),x._uU(2,"0"),x.qZA(),x.BQk())}function Re(e,t){1&e&&(x.TgZ(0,"span",47),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Printed")))}function Fe(e,t){1&e&&(x.TgZ(0,"span",48),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Pending")))}function He(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"th",40),x._uU(2),x.qZA(),x.TgZ(3,"td"),x._uU(4),x.qZA(),x.TgZ(5,"td"),x._uU(6),x.ALo(7,"date"),x.qZA(),x.TgZ(8,"td"),x._uU(9),x.ALo(10,"date"),x.qZA(),x.TgZ(11,"td"),x._uU(12),x.qZA(),x.TgZ(13,"td"),x.TgZ(14,"strong"),x._uU(15),x.qZA(),x.qZA(),x.TgZ(16,"td"),x.TgZ(17,"a",41),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw(2),a=x.MAs(87);return e.total_results>0?t._openResults(a,e):null}),x.TgZ(18,"strong",42),x._uU(19),x.qZA(),x.qZA(),x.qZA(),x.TgZ(20,"td"),x.YNc(21,Pe,3,2,"a",43),x.YNc(22,Ee,3,0,"ng-container",32),x.qZA(),x.TgZ(23,"td"),x.YNc(24,Re,3,3,"span",44),x.YNc(25,Fe,3,3,"span",45),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(2),x.hij(" ",i+1+o.pageSize*(o.pageIndex-1)," "),x.xp6(2),x.hij(" ",a.order_code," "),x.xp6(2),x.Oqu(x.xi3(7,12,a.received_date,"dd/MM/yyyy HH:mm")),x.xp6(3),x.Oqu(x.xi3(10,15,a.returned_date,"dd/MM/yyyy HH:mm")),x.xp6(3),x.Oqu(a.total_sample),x.xp6(3),x.Oqu(a.total_tests),x.xp6(3),x.Q6J("ngClass",a.total_results<a.total_tests?"text-danger":""),x.xp6(1),x.Oqu(a.total_results),x.xp6(2),x.Q6J("ngIf",a.total_validation>0),x.xp6(1),x.Q6J("ngIf",0==a.total_validation),x.xp6(2),x.Q6J("ngIf",a.flag),x.xp6(1),x.Q6J("ngIf",!a.flag)}}function We(e,t){if(1&e&&(x.ynx(0),x.YNc(1,He,26,18,"tr",39),x.BQk()),2&e){var n=x.oxw();x.xp6(1),x.Q6J("ngForOf",n._preparationlist)}}function je(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"td"),x.TgZ(2,"input",61),x.NdJ("change",function(e){var t=x.CHM(n).$implicit;return x.oxw(2).selectItem(e,t.sample_id+","+t.parameter_id+","+t.category_id)}),x.qZA(),x.qZA(),x.TgZ(3,"td"),x.TgZ(4,"span",42),x._uU(5),x.qZA(),x.qZA(),x.TgZ(6,"td"),x._uU(7),x.qZA(),x.TgZ(8,"td"),x._uU(9),x.qZA(),x.TgZ(10,"td"),x._uU(11),x.qZA(),x.TgZ(12,"td"),x._UZ(13,"span",62),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(2),x.MGl("name","ckU",i+1,""),x.Q6J("checked",o.exportList.includes(a.sample_id+","+a.parameter_id+","+a.category_id)),x.xp6(2),x.Q6J("ngClass",a.flagEvicted?"text-danger":""),x.xp6(1),x.Oqu(a.inner_code),x.xp6(2),x.Oqu(a.code),x.xp6(2),x.hij(" ","en"==o.user.lang?a.specification_name_e:a.specification_name_l," "),x.xp6(2),x.hij(" ","en"==o.user.lang?a.para_name_e:a.para_name_l," "),x.xp6(2),x.Q6J("innerHTML",a.result_record,x.oJD)}}function Ge(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",49),x.TgZ(1,"div",50),x.TgZ(2,"h4",51),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"button",52),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(6,"span",53),x._uU(7,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",54),x.TgZ(9,"div",55),x.TgZ(10,"div",56),x.TgZ(11,"div",27),x.TgZ(12,"button",57),x.NdJ("click",function(){x.CHM(n);var e=x.oxw();return e._switch(1,e.exportList)}),x._uU(13),x.ALo(14,"translate"),x.qZA(),x.TgZ(15,"button",58),x.NdJ("click",function(){x.CHM(n);var e=x.oxw();return e._switch(2,e.exportList)}),x._uU(16),x.ALo(17,"translate"),x.qZA(),x._UZ(18,"hr"),x.TgZ(19,"table",28),x.TgZ(20,"thead",29),x.TgZ(21,"tr"),x.TgZ(22,"th",59),x.TgZ(23,"input",60),x.NdJ("change",function(e){return x.CHM(n),x.oxw().selectAll(e)}),x.qZA(),x.qZA(),x.TgZ(24,"th",31),x._uU(25),x.ALo(26,"translate"),x.qZA(),x.TgZ(27,"th",31),x._uU(28),x.ALo(29,"translate"),x.qZA(),x.TgZ(30,"th",31),x._uU(31),x.ALo(32,"translate"),x.qZA(),x.TgZ(33,"th",31),x._uU(34),x.ALo(35,"translate"),x.qZA(),x.TgZ(36,"th",31),x._uU(37),x.ALo(38,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(39,"tbody"),x.YNc(40,je,14,8,"tr",39),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(3),x.AsE(" ",x.lcZ(4,14,"Report")," - ",a._titleRequest," "),x.xp6(9),x.Q6J("disabled",0==a.resultlist.length),x.xp6(1),x.hij(" ",x.lcZ(14,16,"Action draft")," "),x.xp6(2),x.Q6J("disabled",0==a.resultlist.length),x.xp6(1),x.hij(" ",x.lcZ(17,18,"Action direct")," "),x.xp6(7),x.Q6J("disabled",0==a.resultlist.length)("checked",a.exportList.length==a.resultlist.length),x.xp6(2),x.hij(" ",x.lcZ(26,20,"Sample code")," "),x.xp6(3),x.hij(" ",x.lcZ(29,22,"Code")," "),x.xp6(3),x.hij(" ",x.lcZ(32,24,"Internal testing")," "),x.xp6(3),x.hij(" ",x.lcZ(35,26,"Parameter name")," "),x.xp6(3),x.hij(" ",x.lcZ(38,28,"Results")," "),x.xp6(3),x.Q6J("ngForOf",a.resultlist)}}var Be=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},ze=function(){var t=function(){function t(e,a,i,o,r,l,s){n(this,t),this._authenService=e,this._dataService=a,this._route=i,this._notifyService=o,this._uploadService=r,this._excelService=l,this.modalService=s,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=0,this.entity={},this.resultlist=[],this._orderdetails=[],this._titleRequest="",this.exportList=[],this._idRequest="",(!1===e.checkAccess("REQ-REPORT")||!1===e.hasPermission("REQ-REPORT","read"))&&this._route.navigate(["/error/404"]),this.socket=g()(p.h.BASE_API)}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var e=this,t={};t.filter=this._keyword,t.domain=this.user.short_code,t.start_date=this._dt1,t.end_date=this._dt2,t.page=this.pageIndex,t.limit=this.pageSize,this._dataService.post("/lab/getlistreportlabs",t).subscribe(function(t){console.log("Load data",t),e._preparationlist=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyCSP",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",t).subscribe(function(t){e._csplist=t.data})}},{key:"_exportAll",value:function(){var t=this,n={filter:""};n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.page=1,n.limit=99999,this._dataService.post("/lab/getlistreportlabs",n).subscribe(function(n){var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({Ma_Yeu_Cau:r.request_no,Ngay_Nhan:d(r.received_date).format("DD/MM/YYYY HH:mm"),Ngay_Tra:d(r.returned_date).format("DD/MM/YYYY HH:mm"),Tong_Mau:parseInt(r.total_sample),Tong_Test:r.total_tests,Tong_Ket_Qua:r.total_results,Tong_Lab_Validation:r.total_validation,Moi_Lien_He:"",Doanh_Thu:""})}}catch(l){o.e(l)}finally{o.f()}t._excelService.exportAsExcelFile(i,"LabReport-"+d(new Date).format("YYYY-MM-DD"))})}},{key:"orgValueChange1",value:function(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e){this.entity=e}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,Z().fire({title:"en"==this.user.lang?v.W.are_u_sure_complete_en:v.W.are_u_sure_complete,text:this.entity.request_no,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(n){n.value?e._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==e.user.lang?v.W.error_title_en:v.W.error_title)}):(e.isSave=!1,e.socket.emit("refresh",{}))})}},{key:"_openResults",value:function(e,t){console.log(t),this._titleRequest=t.request_no,this._idRequest=t.id,this.loadOrderDetailDoneById(t.id),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"loadOrderDetailDoneById",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/labresult/getlist-result-byrequestId",a).subscribe(function(a){console.log("ABC",a);var i={};i.id=t,n._dataService.post("/lab/labcompleted",i).subscribe(function(t){console.log("KQ0",t);var i,o=[],r=e(t.data);try{var l=function(){var e=i.value,t=a.data.filter(function(t){return t.sample_id==e.sample_id&&t.parameter_id==e.parameter_id&&t.category_id==e.category_id});0==t.length?(e.flagEvicted=!1,o.push(e)):2==t[0].is_active&&0==t.filter(function(e){return 2!=e.is_active&&4!=e.is_active}).length&&(e.flagEvicted=!0,o.push(e))};for(r.s();!(i=r.n()).done;)l()}catch(s){r.e(s)}finally{r.f()}console.log("KQ",o),n.resultlist=o})})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this.resultlist.forEach(function(e){return t.exportList.push(e.sample_id+","+e.parameter_id+","+e.category_id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!=t})}},{key:"_switch",value:function(t,n){if(1==t)if(0==n.length){var a,i=[],o=e(this.resultlist);try{for(o.s();!(a=o.n()).done;){var r=a.value,l="";l+=r.sample_id+","+r.parameter_id+","+r.category_id,i.push(l)}}catch(p){o.e(p)}finally{o.f()}console.log("Run many"),this._processByIds(i,"draft")}else console.log("Run one"),this._processByIds(n,"draft");if(2==t)if(0==n.length){var s,c=[],d=e(this.resultlist);try{for(d.s();!(s=d.n()).done;){var u=s.value,g="";g+=u.sample_id+","+u.parameter_id+","+u.category_id,c.push(g)}}catch(p){d.e(p)}finally{d.f()}this._processByIds(c,"official")}else this._processByIds(n,"official")}},{key:"_processByRequestId",value:function(e,t){var n=this,a={};a.id=e,a.state=t,a.userId=this.user.id,console.log(a),this._dataService.post("/labresult/processAll",a).subscribe(function(e){console.log(e),"ok"==e.result&&n._notifyService.showSuccess("en"==n.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK")})}},{key:"_processByIds",value:function(t,n){var a=this,i={};i.state=n,i.userId=this.user.id;var o,r=[],l=e(t);try{for(l.s();!(o=l.n()).done;){var s=o.value,c={},d=s.split(",");c.sample_id=d[0],c.parameter_id=d[1],c.category_id=d[2],r.push(c)}}catch(u){l.e(u)}finally{l.f()}i.getlist=r,this._dataService.post("/labresult/processByIds",i).subscribe(function(e){"ok"==e.result&&a._notifyService.showSuccess("en"==a.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),a.exportList=[],a.loadOrderDetailDoneById(a._idRequest)})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(x.Y36(y.e),x.Y36(b.D),x.Y36(s.F0),x.Y36(A.c),x.Y36(T.C),x.Y36(q.x),x.Y36(M.FF))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-req-report"]],decls:88,vars:85,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["routerLink","/request/lab-results/list",1,"btn","btn-sm","btn-warning"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],["content",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","9",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",3,"click"],[3,"ngClass"],[3,"routerLink",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],[3,"routerLink"],[1,"badge","badge-success"],[1,"badge","badge-warning"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"disabled","click"],[1,"btn","btn-sm","btn-success","mr-sm-2",3,"disabled","click"],[2,"text-align","center","width","40px"],["type","checkbox","name","checkAll",1,"form-control",3,"disabled","checked","change"],["type","checkbox",1,"form-control",3,"name","checked","change"],[3,"innerHTML"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"div",1),x.TgZ(6,"div",5),x.TgZ(7,"div",6),x.TgZ(8,"input",7),x.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.ALo(9,"translate"),x.qZA(),x.TgZ(10,"input",8),x.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.qZA(),x.TgZ(11,"input",9),x.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.qZA(),x.YNc(12,Je,4,3,"button",10),x.TgZ(13,"button",11),x._uU(14),x.ALo(15,"translate"),x.ALo(16,"translate"),x.qZA(),x.YNc(17,Oe,1,0,"img",12),x.qZA(),x.qZA(),x.TgZ(18,"div",13),x.TgZ(19,"div",14),x.TgZ(20,"select",15),x.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.TgZ(21,"option",16),x._uU(22,"#10"),x.qZA(),x.TgZ(23,"option",17),x._uU(24,"#25"),x.qZA(),x.TgZ(25,"option",18),x._uU(26,"#50"),x.qZA(),x.TgZ(27,"option",19),x._uU(28,"#100"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(29,"div",20),x.TgZ(30,"div",21),x.TgZ(31,"div",22),x.TgZ(32,"div",23),x.TgZ(33,"pagination",24),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(34,"div",25),x.TgZ(35,"a",26),x._uU(36),x.ALo(37,"translate"),x.ALo(38,"translate"),x.ALo(39,"translate"),x.ALo(40,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(41,"div",21),x.TgZ(42,"div",27),x.TgZ(43,"table",28),x.TgZ(44,"thead",29),x.TgZ(45,"tr"),x.TgZ(46,"th",30),x._uU(47,"#"),x.qZA(),x.TgZ(48,"th",31),x._uU(49),x.ALo(50,"translate"),x.qZA(),x.TgZ(51,"th",31),x._uU(52),x.ALo(53,"translate"),x.qZA(),x.TgZ(54,"th",31),x._uU(55),x.ALo(56,"translate"),x.qZA(),x.TgZ(57,"th",31),x._uU(58),x.ALo(59,"translate"),x.qZA(),x.TgZ(60,"th",31),x._uU(61),x.ALo(62,"translate"),x.qZA(),x.TgZ(63,"th",31),x._uU(64),x.ALo(65,"translate"),x.qZA(),x.TgZ(66,"th",31),x._uU(67),x.ALo(68,"translate"),x.qZA(),x.TgZ(69,"th",31),x._uU(70),x.ALo(71,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(72,"tbody"),x.YNc(73,Qe,6,3,"ng-container",32),x.YNc(74,We,2,1,"ng-container",32),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(75,"div",21),x.TgZ(76,"div",22),x.TgZ(77,"div",23),x.TgZ(78,"pagination",24),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(79,"div",25),x.TgZ(80,"a",26),x._uU(81),x.ALo(82,"translate"),x.ALo(83,"translate"),x.ALo(84,"translate"),x.ALo(85,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(86,Ge,41,30,"ng-template",null,33,x.W1O)),2&e&&(x.xp6(8),x.Q6J("placeholder",x.lcZ(9,45,"Search"))("ngModel",t._keyword),x.xp6(2),x.Q6J("ngModel",t._fDate)("bsConfig",x.DdM(83,Be)),x.xp6(1),x.Q6J("ngModel",t._tDate)("bsConfig",x.DdM(84,Be)),x.xp6(1),x.Q6J("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),x.xp6(2),x.AsE(" ",x.lcZ(15,47,"Print")," ",x.lcZ(16,49,"Report")," "),x.xp6(3),x.Q6J("ngIf",t._isLoading),x.xp6(3),x.Q6J("ngModel",t.pageSize),x.xp6(13),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(37,51,"Total of records"),": ",t.totalRow," - ",x.lcZ(38,53,"Page")," ",t.pageIndex," ",x.lcZ(39,55,"of")," ",t.totalPage," ",x.lcZ(40,57,"page"),""),x.xp6(13),x.hij(" ",x.lcZ(50,59,"Order code")," "),x.xp6(3),x.hij(" ",x.lcZ(53,61,"Received date")," "),x.xp6(3),x.Oqu(x.lcZ(56,63,"Returned date")),x.xp6(3),x.hij(" ",x.lcZ(59,65,"Total of samples")," "),x.xp6(3),x.Oqu(x.lcZ(62,67,"Total of tests")),x.xp6(3),x.Oqu(x.lcZ(65,69,"Total of results")),x.xp6(3),x.hij(" ",x.lcZ(68,71,"Total of validation labs")," "),x.xp6(3),x.hij(" ",x.lcZ(71,73,"Status")," "),x.xp6(3),x.Q6J("ngIf",0==t._preparationlist.length),x.xp6(1),x.Q6J("ngIf",t._preparationlist.length>0),x.xp6(4),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(82,75,"Total of records"),": ",t.totalRow," - ",x.lcZ(83,77,"Page")," ",t.pageIndex," ",x.lcZ(84,79,"of")," ",t.totalPage," ",x.lcZ(85,81,"page"),""))},directives:[l.Fj,l.JJ,l.On,S.Y5,S.Np,r.O5,s.rH,l.EJ,l.YN,l.Kr,C.Qt,r.sg,r.mk,s.yS,l._Y,l.JL,l.F],pipes:[k.X$,r.uU],styles:[""]}),t}(),Ve=o(84487),$e=o(59543);function Ke(e,t){if(1&e&&(x.TgZ(0,"option",47),x._uU(1),x.qZA()),2&e){var n=t.$implicit,a=x.oxw();x.Q6J("value",n.id),x.xp6(1),x.hij(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function Xe(e,t){if(1&e&&(x.TgZ(0,"option",47),x._uU(1),x.qZA()),2&e){var n=t.$implicit,a=x.oxw();x.Q6J("value",n.id),x.xp6(1),x.hij(" ","en"==a.user.lang?n.pl_name_e:n.pl_name_l," ")}}function et(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",48),x.NdJ("click",function(){x.CHM(n);var e=x.oxw();return e._exportAll(e._preparationlist)}),x._UZ(1,"i",49),x._uU(2),x.ALo(3,"translate"),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,1,"Export")," "))}function tt(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",50),x.NdJ("click",function(){return x.CHM(n),x.oxw()._exportAllForImport()}),x._UZ(1,"i",49),x._uU(2),x.ALo(3,"translate"),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,1,"Download file")," "))}function nt(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",51),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(),t=x.MAs(142);return e._importFile(t)}),x._UZ(1,"i",52),x._uU(2),x.ALo(3,"translate"),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,1,"Import")," "))}function at(e,t){1&e&&x._UZ(0,"img",53)}function it(e,t){1&e&&(x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",54),x.TgZ(3,"h3",55),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.qZA(),x.BQk()),2&e&&(x.xp6(4),x.hij(" ",x.lcZ(5,1,"No records now!!!")," "))}function ot(e,t){1&e&&x._UZ(0,"i",72)}function rt(e,t){1&e&&x._UZ(0,"i",73)}function lt(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"button",69),x.NdJ("click",function(){return x.CHM(n),x.oxw(3)._switchFlagEdit()}),x.ALo(2,"translate"),x.YNc(3,ot,1,0,"i",70),x.YNc(4,rt,1,0,"i",71),x.qZA(),x.BQk()}if(2&e){var a=x.oxw().$implicit,i=x.oxw(2);x.xp6(1),x.Q6J("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!i._authenService.hasPermission("REQ-RES","update"))("title",x.lcZ(2,5,a.flag?"Cancel":"Edit")),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag)}}function st(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",74),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(3);return e._updateStatusv2(e._preparationlist)}),x.ALo(1,"translate"),x._UZ(2,"i",75),x.qZA()}2&e&&x.Q6J("title",x.lcZ(1,1,"Save"))}function ct(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.hij(" ",n.note_asm,"")}}function dt(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",76),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.note_asm=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","noteasm",i+1,""),x.Q6J("ngModel",o.note_asm)}}function ut(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.hij(" ",n.unit,"")}}function gt(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",76),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.unit=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","unit",i+1,""),x.Q6J("ngModel",o.unit)}}function pt(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.hij(" ",n.lod,"")}}function _t(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",76),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.lod=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","lod",i+1,""),x.Q6J("ngModel",o.lod)}}function ht(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.hij(" ",n.loq,"")}}function mt(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",76),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.loq=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","loq",i+1,""),x.Q6J("ngModel",o.loq)}}function ft(e,t){if(1&e&&(x.ynx(0),x._UZ(1,"span",77),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.Q6J("innerHTML",n.result_record,x.oJD)}}function Zt(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",78),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.result_record=e}),x.ALo(2,"translate"),x.qZA(),x.TgZ(3,"input",78),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.result_record_e=e}),x.ALo(4,"translate"),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","result_record",i+1,""),x.Q6J("ngModel",o.result_record)("placeholder",x.lcZ(2,6,"Vietnamese")),x.xp6(2),x.MGl("name","result_recorde",i+1,""),x.Q6J("ngModel",o.result_record_e)("placeholder",x.lcZ(4,8,"English"))}}function vt(e,t){1&e&&(x.TgZ(0,"span",79),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"None")))}function xt(e,t){1&e&&(x.TgZ(0,"span",80),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Preparation")))}function yt(e,t){1&e&&(x.TgZ(0,"span",81),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Technical validation")))}function bt(e,t){1&e&&(x.TgZ(0,"span",82),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Validation")))}function At(e,t){1&e&&(x.TgZ(0,"span",83),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Done")))}function Tt(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"th",57),x._uU(3),x.qZA(),x.TgZ(4,"td",58),x.YNc(5,lt,5,7,"ng-container",45),x.YNc(6,st,3,3,"button",59),x.qZA(),x.TgZ(7,"td"),x._uU(8),x.qZA(),x.TgZ(9,"td"),x._uU(10),x.qZA(),x.TgZ(11,"td"),x._uU(12),x.qZA(),x.TgZ(13,"td"),x._uU(14),x.qZA(),x.TgZ(15,"td"),x._uU(16),x.qZA(),x.TgZ(17,"td"),x._uU(18),x.qZA(),x.TgZ(19,"td"),x._uU(20),x.qZA(),x.TgZ(21,"td"),x.YNc(22,ct,2,1,"ng-container",45),x.YNc(23,dt,2,2,"ng-container",45),x.qZA(),x.TgZ(24,"td"),x.YNc(25,ut,2,1,"ng-container",45),x.YNc(26,gt,2,2,"ng-container",45),x.qZA(),x.TgZ(27,"td"),x.YNc(28,pt,2,1,"ng-container",45),x.YNc(29,_t,2,2,"ng-container",45),x.qZA(),x.TgZ(30,"td"),x.YNc(31,ht,2,1,"ng-container",45),x.YNc(32,mt,2,2,"ng-container",45),x.qZA(),x.TgZ(33,"td"),x.YNc(34,ft,2,1,"ng-container",45),x.YNc(35,Zt,5,10,"ng-container",45),x.qZA(),x.TgZ(36,"td",60),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw(2);return e.flag?t._updateStatusOnly(e,e.status):null}),x.YNc(37,vt,3,3,"span",61),x.YNc(38,xt,3,3,"span",62),x.YNc(39,yt,3,3,"span",63),x.YNc(40,bt,3,3,"span",64),x.YNc(41,At,3,3,"span",65),x.qZA(),x.TgZ(42,"td",66),x.TgZ(43,"input",67),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.hide=e}),x.qZA(),x.qZA(),x.TgZ(44,"td"),x._uU(45),x.ALo(46,"date"),x.qZA(),x.TgZ(47,"td",68),x._uU(48),x.ALo(49,"date"),x.qZA(),x.qZA(),x.BQk()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(2),x.Q6J("ngClass",4==a.status?"":a.remaining_days<=1?"jbadge-danger text-white":a.remaining_days>1&&a.remaining_days<=3?"jbadge-warning text-white":""),x.xp6(1),x.hij(" ",i+1+o.pageSize*(o.pageIndex-1)," "),x.xp6(2),x.Q6J("ngIf",1==a.status),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Oqu(a.inner_code),x.xp6(2),x.Oqu(a.code),x.xp6(2),x.hij(" ","en"==o.user.lang?a.specification_name_e:a.specification_name_l," "),x.xp6(2),x.hij(" ","en"==o.user.lang?a.para_name_e:a.para_name_l," "),x.xp6(2),x.hij(" ","en"==o.user.lang?a.nature_name_e:a.nature_name_l," "),x.xp6(2),x.Oqu(a.tat),x.xp6(2),x.Oqu(a.note_lab),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",0==a.status),x.xp6(1),x.Q6J("ngIf",1==a.status),x.xp6(1),x.Q6J("ngIf",2==a.status),x.xp6(1),x.Q6J("ngIf",3==a.status),x.xp6(1),x.Q6J("ngIf",4==a.status),x.xp6(2),x.MGl("name","hid",i+1,""),x.Q6J("ngModel",a.hide)("disabled",!a.flag),x.xp6(2),x.hij(" ",x.xi3(46,32,a.received_date,"dd/MM/yyyy HH:mm")," "),x.xp6(2),x.Q6J("ngClass",4==a.status?"":a.remaining_days<=1?"jbadge-danger text-white":a.remaining_days>1&&a.remaining_days<=3?"jbadge-warning text-white":""),x.xp6(1),x.hij(" ",x.xi3(49,35,a.returned_date,"dd/MM/yyyy HH:mm")," ")}}function qt(e,t){if(1&e&&(x.ynx(0),x.YNc(1,Tt,50,38,"ng-container",56),x.BQk()),2&e){var n=x.oxw();x.xp6(1),x.Q6J("ngForOf",n._preparationlist)}}function Mt(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"input",94,95),x.NdJ("change",function(e){return x.CHM(n),x.oxw(2).onFileChange(e)}),x.qZA()}}function St(e,t){1&e&&(x.TgZ(0,"h4",55),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.hij("",x.lcZ(2,1,"Processing"),"..."))}function Ct(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",84),x.TgZ(1,"div",85),x.TgZ(2,"h4",86),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"button",87),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(6,"span",88),x._uU(7,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",89),x.TgZ(9,"div",90),x.TgZ(10,"div",91),x.TgZ(11,"div",58),x.YNc(12,Mt,2,0,"input",92),x.YNc(13,St,3,3,"h4",93),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(3),x.hij(" ",x.lcZ(4,3,"Import")," "),x.xp6(9),x.Q6J("ngIf",!a._isLoadingImport),x.xp6(1),x.Q6J("ngIf",a._isLoadingImport)}}var wt=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},kt=function(){var t=function(){function t(e,a,i,o,r,l,s,c){n(this,t),this._authenService=e,this._dataService=a,this._route=i,this._notifyService=o,this._uploadService=r,this._excelService=l,this._numberFormat=s,this.modalService=c,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=1,this.entity={},this._depts="",this._isLoadingImport=!1,(!1===e.checkAccess("REQ-RES")||!1===e.hasPermission("REQ-RES","read"))&&this._route.navigate(["/error/404"]),this.socket=g()(p.h.BASE_API)}return i(t,[{key:"ngOnInit",value:function(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL()}},{key:"loadData",value:function(){var t=this,n={};n.filter=this._keyword,n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.department_id=this.department_id,n.family_id=this.testcsp_id,n.flag_status=this._status,n.page=this.pageIndex,n.limit=this.pageSize,n.dept_ids=this.user.department,this._dataService.post("/lab/getlistresultlabsbydepts",n).subscribe(function(n){console.log("Origin",n);var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({code:r.code,code_father:r.code_father,company_code:r.company_code,company_name_e:r.company_name_e,company_name_l:r.company_name_l,contact_name:r.contact_name,customer_id:r.customer_id,email:r.email,employee_nr:r.employee_nr,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,mark:r.mark,note_asm:r.note_asm,para_name_e:r.para_name_e,para_name_l:r.para_name_l,nature_name_e:r.nature_name_e,nature_name_l:r.nature_name_l,parameter_id:r.parameter_id,phone:r.phone,received_date:r.received_date,request_no:r.request_no,result_record:r.result_record,returned_date:r.returned_date,sale_man:r.sale_man,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,flag:!1,note_lab:r.note_lab,status:r.status,note:r.note,category_name_e:r.category_name_e,category_name_l:r.category_name_l,tat:r.tat,dept_name_e:r.dept_name_e,dept_name_l:r.dept_name_l,pl_name_e:r.pl_name_e,pl_name_l:r.pl_name_l,hide:r.hide,remaining_days:r.remaining_days,result_record_e:r.result_record_e})}}catch(l){o.e(l)}finally{o.f()}t._preparationlist=i,t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"_exportAllForImport",value:function(){var t=this,n={};n.domain=this.user.short_code,n.flag_status=this._status,n.dept_ids=this.user.department,this._dataService.post("/lab/exportresultlabsbydepts",n).subscribe(function(n){console.log("Origin",n);var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({inner_code:r.inner_code,code:r.code,note_asm:null==r.note_asm?"":r.note_asm,unit:null==r.unit?"":r.unit,lod:null==r.lod?"":r.lod,loq:null==r.loq?"":r.loq,result_record:null==r.result_record?"":r.result_record,result_record_e:null==r.result_record_e?"":r.result_record_e,status:r.status,hide:null!=r.hide&&r.hide,sample_id:r.sample_id,parameter_id:r.parameter_id,category_id:r.category_id})}}catch(l){o.e(l)}finally{o.f()}t._excelService.exportAsExcelFile(i,"Result-"+d(new Date).format("YYYY-MM-DD")),t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_EXPORT_EN+" "+i.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+i.length+" "+v.W.record,"OK")})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.loadData()}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.loadData()}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyPL",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",t).subscribe(function(t){e._pllist=t.data})}},{key:"_exportAll",value:function(t){var n,a=[],i=e(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,r="";4==o.status&&(r="en"==this.user.lang?v.W.s_done_en:v.W.s_done),3==o.status&&(r="en"==this.user.lang?v.W.s_validate_en:v.W.s_validate),2==o.status&&(r="en"==this.user.lang?v.W.s_techvalidate_en:v.W.s_techvalidate),1==o.status&&(r="en"==this.user.lang?v.W.s_prepare_en:v.W.s_prepare),0==o.status&&(r="en"==this.user.lang?v.W.s_none_en:v.W.s_none);var l=new Date(o.received_date).getTime()+864e5*o.tat,s="en"==this.user.lang?o.pl_name_e:o.pl_name_l;a.push({"Inner code":o.inner_code,Code:o.code,"Internal test":o.specification_name_l,Parameter:o.para_name_l,"Sample matrix":o.category_name_l,"Priority TAT":o.tat,"Note Lab":null==o.note_lab?"":o.note_lab,"Note ASM":null==o.note_asm?"":o.note_asm,Unit:null==o.unit?"":o.unit,LOD:null==o.lod?"":o.lod,LOQ:null==o.loq?"":o.loq,Result:null==o.result_record?"":o.result_record,Status:r,"Received Date":d(new Date(o.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(l)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?o.dept_name_e:o.dept_name_l,PL:null==s?"":s,"Sample name":o.sample_name})}}catch(c){i.e(c)}finally{i.f()}this._excelService.exportAsExcelFile(a,"Result-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_EXPORT_EN+" "+t.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+t.length+" "+v.W.record,"OK")}},{key:"orgValueChange1",value:function(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_switchFlagEdit",value:function(){var t,n=e(this._preparationlist);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.flag=!a.flag,a.flag||(a.status=1)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_updateStatusv2",value:function(e){var t=this;this._dataService.post("/lab/updateResultv2",{getlist:e,ipaddress:this.user.ipaddress,user_id:this.user.id,short_code:this.user.short_code}).subscribe(function(e){t.loadData()})}},{key:"_updateStatusOnly",value:function(e,t){t=1==t?2:1,console.log(t),this._preparationlist.filter(function(t){return t.sample_id==e.sample_id&&t.parameter_id==e.parameter_id&&t.category_id==e.category_id})[0].status=t}},{key:"_updateStatus",value:function(e,t){var n=this;2==t?(e.status=t,Z().fire({title:"en"==this.user.lang?v.W.are_u_sure_switch_en:v.W.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData()}):n.loadData()})):(console.log("Update",e),this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData()}))}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.loadData(),e._notifyService.showSuccess("en"==e.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==e.user.lang?v.W.error_title_en:v.W.error_title)})}},{key:"_importFile",value:function(e){this.modalService.open(e,{size:"md",centered:!0})}},{key:"onFileChange",value:function(e){var t=this,n=null,a=null,i=new FileReader,o=e.target.files[0];if(void 0===o||void 0===o.name)e.target.value=null,this._notifyService.showError("en"==this.user.lang?v.W.recheck_file_en:v.W.recheck_file,"en"==this.user.lang?v.W.error_title_en:v.W.error_title);else{var r=o.name.split(".").pop();"xls"===r||"xlsx"===r?(i.onload=function(o){n=Ve.read(i.result,{type:"binary"}),a=n.SheetNames.reduce(function(e,t){return e[t]=Ve.utils.sheet_to_json(n.Sheets[t]),e},{}),e.target.value=null,t.setUpload(a.data)},i.readAsBinaryString(o)):(this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title),e.target.value=null)}}},{key:"setUpload",value:function(e){var t=this,n={};n.getlist=e,n.short_code=this.user.short_code,n.ipaddress=this.user.ipaddress,n.userid=this.user.id,this._isLoadingImport=!0,this._dataService.post("/lab/updateResultForImportv2",n).subscribe(function(e){console.log(e),"ok"==e.result&&(e.data_error.length>0&&t._excelService.exportAsExcelFile(e.data_error,"ErrorTestFamilyPL-"+d(new Date).format("YYYY-MM-DD")),e.count>0&&t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK")),t._isLoadingImport=!1,t.loadData(),t.modalService.dismissAll()},function(){return t._isLoadingImport=!1})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(x.Y36(y.e),x.Y36(b.D),x.Y36(s.F0),x.Y36(A.c),x.Y36(T.C),x.Y36(q.x),x.Y36($e.p),x.Y36(M.FF))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-req-result"]],decls:143,vars:140,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],["contentImport",""],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-cloud-upload"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","18",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row",3,"ngClass"],[2,"text-align","center"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"text-truncate"],["type","checkbox",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],[3,"ngClass"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],["type","text",1,"form-control",2,"width","250px",3,"name","ngModel","placeholder","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],["name","fileUpload","type","file","id","upload","class","form-control",3,"change",4,"ngIf"],["class","text-danger",4,"ngIf"],["name","fileUpload","type","file","id","upload",1,"form-control",3,"change"],["fileUpload",""]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"div",1),x.TgZ(6,"div",5),x.TgZ(7,"div",6),x.TgZ(8,"input",7),x.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.ALo(9,"translate"),x.qZA(),x.TgZ(10,"input",8),x.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.qZA(),x.TgZ(11,"input",9),x.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.qZA(),x.TgZ(12,"select",10),x.NdJ("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),x.TgZ(13,"option",11),x._uU(14),x.ALo(15,"translate"),x.ALo(16,"translate"),x.qZA(),x.YNc(17,Ke,2,2,"option",12),x.qZA(),x.TgZ(18,"select",13),x.NdJ("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),x.TgZ(19,"option",11),x._uU(20),x.ALo(21,"translate"),x.qZA(),x.YNc(22,Xe,2,2,"option",12),x.qZA(),x.TgZ(23,"select",14),x.NdJ("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.TgZ(24,"option",15),x._uU(25),x.ALo(26,"translate"),x.qZA(),x.TgZ(27,"option",16),x._uU(28),x.ALo(29,"translate"),x.qZA(),x.TgZ(30,"option",17),x._uU(31),x.ALo(32,"translate"),x.qZA(),x.TgZ(33,"option",18),x._uU(34),x.ALo(35,"translate"),x.qZA(),x.TgZ(36,"option",19),x._uU(37),x.ALo(38,"translate"),x.qZA(),x.TgZ(39,"option",20),x._uU(40),x.ALo(41,"translate"),x.qZA(),x.qZA(),x.YNc(42,et,4,3,"button",21),x.YNc(43,tt,4,3,"button",22),x.YNc(44,nt,4,3,"button",23),x.YNc(45,at,1,0,"img",24),x.qZA(),x.qZA(),x.TgZ(46,"div",25),x.TgZ(47,"div",26),x.TgZ(48,"select",27),x.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.TgZ(49,"option",28),x._uU(50,"#10"),x.qZA(),x.TgZ(51,"option",29),x._uU(52,"#25"),x.qZA(),x.TgZ(53,"option",30),x._uU(54,"#50"),x.qZA(),x.TgZ(55,"option",31),x._uU(56,"#100"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(57,"div",32),x.TgZ(58,"div",33),x.TgZ(59,"div",34),x.TgZ(60,"div",35),x.TgZ(61,"pagination",36),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(62,"div",37),x.TgZ(63,"a",38),x._uU(64),x.ALo(65,"translate"),x.ALo(66,"translate"),x.ALo(67,"translate"),x.ALo(68,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(69,"div",33),x.TgZ(70,"div",39),x.TgZ(71,"table",40),x.TgZ(72,"thead",41),x.TgZ(73,"tr"),x.TgZ(74,"th",42),x._uU(75,"#"),x.qZA(),x.TgZ(76,"th",43),x._uU(77),x.ALo(78,"translate"),x.qZA(),x.TgZ(79,"th",44),x._uU(80),x.ALo(81,"translate"),x.qZA(),x.TgZ(82,"th",44),x._uU(83),x.ALo(84,"translate"),x.qZA(),x.TgZ(85,"th",44),x._uU(86),x.ALo(87,"translate"),x.qZA(),x.TgZ(88,"th",44),x._uU(89),x.ALo(90,"translate"),x.qZA(),x.TgZ(91,"th",44),x._uU(92),x.ALo(93,"translate"),x.qZA(),x.TgZ(94,"th",44),x._uU(95),x.ALo(96,"translate"),x.qZA(),x.TgZ(97,"th",44),x._uU(98),x.ALo(99,"translate"),x.qZA(),x.TgZ(100,"th",44),x._uU(101),x.ALo(102,"translate"),x.qZA(),x.TgZ(103,"th",44),x._uU(104),x.ALo(105,"translate"),x.qZA(),x.TgZ(106,"th",44),x._uU(107),x.ALo(108,"translate"),x.qZA(),x.TgZ(109,"th",44),x._uU(110),x.ALo(111,"translate"),x.qZA(),x.TgZ(112,"th",44),x._uU(113),x.ALo(114,"translate"),x.qZA(),x.TgZ(115,"th",44),x._uU(116),x.ALo(117,"translate"),x.qZA(),x.TgZ(118,"th",44),x._uU(119),x.ALo(120,"translate"),x.qZA(),x.TgZ(121,"th",44),x._uU(122),x.ALo(123,"translate"),x.qZA(),x.TgZ(124,"th",44),x._uU(125),x.ALo(126,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(127,"tbody"),x.YNc(128,it,6,3,"ng-container",45),x.YNc(129,qt,2,1,"ng-container",45),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(130,"div",33),x.TgZ(131,"div",34),x.TgZ(132,"div",35),x.TgZ(133,"pagination",36),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(134,"div",37),x.TgZ(135,"a",38),x._uU(136),x.ALo(137,"translate"),x.ALo(138,"translate"),x.ALo(139,"translate"),x.ALo(140,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(141,Ct,14,5,"ng-template",null,46,x.W1O)),2&e&&(x.xp6(8),x.Q6J("placeholder",x.lcZ(9,68,"Search"))("ngModel",t._keyword),x.xp6(2),x.Q6J("ngModel",t._fDate)("bsConfig",x.DdM(138,wt)),x.xp6(1),x.Q6J("ngModel",t._tDate)("bsConfig",x.DdM(139,wt)),x.xp6(1),x.Q6J("ngModel",t.department_id),x.xp6(2),x.AsE(" ",x.lcZ(15,70,"All")," ",x.lcZ(16,72,"Department")," "),x.xp6(3),x.Q6J("ngForOf",t._deptlist),x.xp6(1),x.Q6J("ngModel",t.testcsp_id),x.xp6(2),x.hij("",x.lcZ(21,74,"All")," PL"),x.xp6(2),x.Q6J("ngForOf",t._pllist),x.xp6(1),x.Q6J("ngModel",t._status),x.xp6(2),x.hij(" ",x.lcZ(26,76,"All")," "),x.xp6(3),x.hij(" ",x.lcZ(29,78,"None")," "),x.xp6(3),x.hij(" ",x.lcZ(32,80,"Preparation")," "),x.xp6(3),x.hij(" ",x.lcZ(35,82,"Technical validation")," "),x.xp6(3),x.hij(" ",x.lcZ(38,84,"Validation")," "),x.xp6(3),x.hij(" ",x.lcZ(41,86,"Done")," "),x.xp6(2),x.Q6J("ngIf",t._authenService.hasPermission("REQ-RES","report")),x.xp6(1),x.Q6J("ngIf",t._authenService.hasPermission("REQ-RES","update")),x.xp6(1),x.Q6J("ngIf",t._authenService.hasPermission("REQ-RES","update")),x.xp6(1),x.Q6J("ngIf",t._isLoading),x.xp6(3),x.Q6J("ngModel",t.pageSize),x.xp6(13),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(65,88,"Total of records"),": ",t.totalRow," - ",x.lcZ(66,90,"Page")," ",t.pageIndex," ",x.lcZ(67,92,"of")," ",t.totalPage," ",x.lcZ(68,94,"page"),""),x.xp6(13),x.Oqu(x.lcZ(78,96,"Actions")),x.xp6(3),x.hij(" ",x.lcZ(81,98,"Inner code")," "),x.xp6(3),x.hij(" ",x.lcZ(84,100,"Code")," "),x.xp6(3),x.Oqu(x.lcZ(87,102,"Internal testing")),x.xp6(3),x.Oqu(x.lcZ(90,104,"Parameter name")),x.xp6(3),x.Oqu(x.lcZ(93,106,"Sample nature")),x.xp6(3),x.Oqu(x.lcZ(96,108,"Priority")),x.xp6(3),x.Oqu(x.lcZ(99,110,"Note lab")),x.xp6(3),x.Oqu(x.lcZ(102,112,"Note asm")),x.xp6(3),x.Oqu(x.lcZ(105,114,"Unit")),x.xp6(3),x.Oqu(x.lcZ(108,116,"LOD")),x.xp6(3),x.Oqu(x.lcZ(111,118,"LOQ")),x.xp6(3),x.Oqu(x.lcZ(114,120,"Results")),x.xp6(3),x.Oqu(x.lcZ(117,122,"Status")),x.xp6(3),x.Oqu(x.lcZ(120,124,"Hidden")),x.xp6(3),x.Oqu(x.lcZ(123,126,"Received date")),x.xp6(3),x.Oqu(x.lcZ(126,128,"Returned date")),x.xp6(3),x.Q6J("ngIf",0==t._preparationlist.length),x.xp6(1),x.Q6J("ngIf",t._preparationlist.length>0),x.xp6(4),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(137,130,"Total of records"),": ",t.totalRow," - ",x.lcZ(138,132,"Page")," ",t.pageIndex," ",x.lcZ(139,134,"of")," ",t.totalPage," ",x.lcZ(140,136,"page"),""))},directives:[l.Fj,l.JJ,l.On,S.Y5,S.Np,l.EJ,l.YN,l.Kr,r.sg,r.O5,C.Qt,r.mk,l.Wl,l._Y,l.JL,l.F],pipes:[k.X$,r.uU],styles:[""]}),t}();function Lt(e,t){if(1&e&&(x.TgZ(0,"option",42),x._uU(1),x.qZA()),2&e){var n=t.$implicit,a=x.oxw();x.Q6J("value",n.id),x.xp6(1),x.hij(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function Ut(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",43),x.NdJ("click",function(){x.CHM(n);var e=x.oxw();return e._exportAll(e._preparationlist)}),x._UZ(1,"i",44),x._uU(2),x.ALo(3,"translate"),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,1,"Export")," "))}function Nt(e,t){1&e&&x._UZ(0,"img",45)}function Dt(e,t){1&e&&(x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",46),x.TgZ(3,"h3",47),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.qZA(),x.BQk()),2&e&&(x.xp6(4),x.hij(" ",x.lcZ(5,1,"No records now!!!")," "))}function It(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.hij(" ",n.note_asm,"")}}function Yt(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",61),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.note_asm=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","note_asm",i+1,""),x.Q6J("ngModel",o.note_asm)}}function Jt(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.hij(" ",n.lod,"")}}function Ot(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",61),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.lod=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","lod",i+1,""),x.Q6J("ngModel",o.lod)}}function Qt(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.hij(" ",n.loq,"")}}function Pt(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",61),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.loq=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","loq",i+1,""),x.Q6J("ngModel",o.loq)}}function Et(e,t){if(1&e&&(x.ynx(0),x._UZ(1,"span",62),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.Q6J("innerHTML",n.result_record,x.oJD)}}function Rt(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",61),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.result_record=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","result_record",i+1,""),x.Q6J("ngModel",o.result_record)}}function Ft(e,t){1&e&&(x.TgZ(0,"span",63),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"None")))}function Ht(e,t){1&e&&(x.TgZ(0,"span",64),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Preparation")))}function Wt(e,t){1&e&&(x.TgZ(0,"span",65),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Technical validation")))}function jt(e,t){1&e&&(x.TgZ(0,"span",66),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Validation")))}function Gt(e,t){1&e&&(x.TgZ(0,"span",67),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Done")))}function Bt(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",68),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit;return x.oxw(2)._updateStatus(e,1)}),x._UZ(1,"i",69),x.qZA()}}function zt(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",70),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit;return x.oxw(2)._updateStatus(e,4)}),x._UZ(1,"i",71),x.qZA()}}function Vt(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",72),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit;return x.oxw(2)._updateStatus(e,2)}),x._UZ(1,"i",73),x.qZA()}}function $t(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"th",49),x._uU(2),x.qZA(),x.TgZ(3,"td"),x.TgZ(4,"a",50),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return x.oxw(2)._updateStatusAll(e,3==e.status?4:3)}),x._uU(5),x.qZA(),x.qZA(),x.TgZ(6,"td"),x._uU(7),x.qZA(),x.TgZ(8,"td"),x._uU(9),x.qZA(),x.TgZ(10,"td"),x._uU(11),x.qZA(),x.TgZ(12,"td"),x._uU(13),x.qZA(),x.TgZ(14,"td"),x._uU(15),x.qZA(),x.TgZ(16,"td"),x._uU(17),x.qZA(),x.TgZ(18,"td"),x.YNc(19,It,2,1,"ng-container",41),x.YNc(20,Yt,2,2,"ng-container",41),x.qZA(),x.TgZ(21,"td"),x._uU(22),x.qZA(),x.TgZ(23,"td"),x.YNc(24,Jt,2,1,"ng-container",41),x.YNc(25,Ot,2,2,"ng-container",41),x.qZA(),x.TgZ(26,"td"),x.YNc(27,Qt,2,1,"ng-container",41),x.YNc(28,Pt,2,2,"ng-container",41),x.qZA(),x.TgZ(29,"td"),x.YNc(30,Et,2,1,"ng-container",41),x.YNc(31,Rt,2,2,"ng-container",41),x.qZA(),x.TgZ(32,"td"),x.TgZ(33,"a",51),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw(2);return 2==e.status?t._updateStatus(e,3):null}),x.YNc(34,Ft,3,3,"span",52),x.YNc(35,Ht,3,3,"span",53),x.YNc(36,Wt,3,3,"span",54),x.YNc(37,jt,3,3,"span",55),x.YNc(38,Gt,3,3,"span",56),x.qZA(),x.YNc(39,Bt,2,0,"a",57),x.qZA(),x.TgZ(40,"td",58),x.YNc(41,zt,2,0,"a",59),x.YNc(42,Vt,2,0,"a",60),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(2),x.hij(" ",i+1+o.pageSize*(o.pageIndex-1)," "),x.xp6(3),x.Oqu(a.inner_code),x.xp6(2),x.Oqu(a.code),x.xp6(2),x.hij(" ","en"==o.user.lang?a.specification_name_e:a.specification_name_l," "),x.xp6(2),x.hij(" ","en"==o.user.lang?a.para_name_e:a.para_name_l," "),x.xp6(2),x.Oqu(a.tat),x.xp6(2),x.Oqu(a.note),x.xp6(2),x.Oqu(a.note_lab),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Oqu(a.unit),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(3),x.Q6J("ngIf",0==a.status),x.xp6(1),x.Q6J("ngIf",1==a.status),x.xp6(1),x.Q6J("ngIf",2==a.status),x.xp6(1),x.Q6J("ngIf",3==a.status),x.xp6(1),x.Q6J("ngIf",4==a.status),x.xp6(1),x.Q6J("ngIf",2==a.status),x.xp6(2),x.Q6J("ngIf",3==a.status),x.xp6(1),x.Q6J("ngIf",3==a.status)}}function Kt(e,t){if(1&e&&(x.ynx(0),x.YNc(1,$t,43,25,"tr",48),x.BQk()),2&e){var n=x.oxw();x.xp6(1),x.Q6J("ngForOf",n._preparationlist)}}var Xt=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},en=function(){var t=function(){function t(e,a,i,o,r,l,s){n(this,t),this._authenService=e,this._dataService=a,this._route=i,this._notifyService=o,this._uploadService=r,this._excelService=l,this.modalService=s,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=2,this.entity={},(!1===e.checkAccess("RES-VALID")||!1===e.hasPermission("RES-VALID","read"))&&this._route.navigate(["/error/404"]),this.socket=g()(p.h.BASE_API)}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),console.log("Permit",this._authenService.hasPermission("RES-VALID","create"),this.user.permissions),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var t=this,n={};n.filter=this._keyword,n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.department_id=this.department_id,n.family_id=this.testcsp_id,n.flag_status=this._status,n.page=this.pageIndex,n.limit=this.pageSize,n.dept_ids=this.user.department,this._dataService.post("/lab/getlistresultlabs",n).subscribe(function(n){console.log(n);var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({code:r.code,code_father:r.code_father,company_code:r.company_code,company_name_e:r.company_name_e,company_name_l:r.company_name_l,contact_name:r.contact_name,customer_id:r.customer_id,email:r.email,employee_nr:r.employee_nr,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,tat:r.tat,mark:r.mark,note_asm:r.note_asm,para_name_e:r.para_name_e,para_name_l:r.para_name_l,parameter_id:r.parameter_id,phone:r.phone,received_date:r.received_date,request_no:r.request_no,result_record:r.result_record,returned_date:r.returned_date,sale_man:r.sale_man,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,flag:!1,note_lab:r.note_lab,status:r.status,note:r.note,category_name_e:r.category_name_e,category_name_l:r.category_name_l,dept_name_e:r.dept_name_e,dept_name_l:r.dept_name_l})}}catch(l){o.e(l)}finally{o.f()}t._preparationlist=i,t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyPL",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",t).subscribe(function(t){e._pllist=t.data})}},{key:"_exportAll",value:function(t){var n,a=[],i=e(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,r="";4==o.status&&(r="en"==this.user.lang?v.W.s_done_en:v.W.s_done),3==o.status&&(r="en"==this.user.lang?v.W.s_validate_en:v.W.s_validate),2==o.status&&(r="en"==this.user.lang?v.W.s_techvalidate_en:v.W.s_techvalidate),1==o.status&&(r="en"==this.user.lang?v.W.s_prepare_en:v.W.s_prepare),0==o.status&&(r="en"==this.user.lang?v.W.s_none_en:v.W.s_none);var l=new Date(o.received_date).getTime()+864e5*o.tat;a.push({"Inner code":o.inner_code,Code:o.code,"Internal test":o.specification_name_l,Parameter:o.para_name_l,"Sample matrix":o.category_name_l,"Priority TAT":o.tat,Note:null==o.note?"":o.note,"Note Lab":null==o.note_lab?"":o.note_lab,"Note ASM":null==o.note_asm?"":o.note_asm,Unit:null==o.unit?"":o.unit,LOD:null==o.lod?"":o.lod,LOQ:null==o.loq?"":o.loq,Result:null==o.result_record?"":o.result_record,Status:r,"Received Date":d(new Date(o.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(l)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?o.dept_name_e:o.dept_name_l})}}catch(s){i.e(s)}finally{i.f()}this._excelService.exportAsExcelFile(a,"LabValidation-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_EXPORT_EN+" "+t.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+t.length+" "+v.W.record,"OK")}},{key:"orgValueChange1",value:function(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e,t){var n=this;3==t||4==t?(e.status=t,Z().fire({title:"en"==this.user.lang?v.W.are_u_sure_switch_en:v.W.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.socket.emit("refresh",{})}):n.socket.emit("refresh",{})})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.socket.emit("refresh",{})}))}},{key:"_updateStatusAll",value:function(t,n){var a,i=this,o=this._preparationlist.filter(function(e){return e.sample_id==t.sample_id}),r=e(o);try{for(r.s();!(a=r.n()).done;){a.value.status=n}}catch(l){r.e(l)}finally{r.f()}Z().fire({title:"en"==this.user.lang?v.W.are_u_sure_switch_en:v.W.are_u_sure_switch,text:"en"==this.user.lang?"Total: "+o.length:"T\u1ed5ng s\u1ed1: "+o.length,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(e){e.value?i._dataService.post("/lab/updateValidationv2BySampleId",{getlist:o,user_id:i.user.id,ipaddress:i.user.ipaddress,short_code:i.user.short_code}).subscribe(function(e){i.socket.emit("refresh",{})}):i.socket.emit("refresh",{})})}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==e.user.lang?v.W.error_title_en:v.W.error_title)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(x.Y36(y.e),x.Y36(b.D),x.Y36(s.F0),x.Y36(A.c),x.Y36(T.C),x.Y36(q.x),x.Y36(M.FF))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-req-validation"]],decls:125,vars:124,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","15",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",3,"click"],["href","javascript:;",2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["href","javascript:;","style","cursor: pointer; color: red",3,"click",4,"ngIf"],[2,"text-align","center"],["href","javascript:;","style","cursor: pointer; color: blue; font-size: 18px;",3,"click",4,"ngIf"],["href","javascript:;","style","cursor: pointer; color: tomato; font-size: 18px;",3,"click",4,"ngIf"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],["href","javascript:;",2,"cursor","pointer","color","red",3,"click"],[1,"fa","fa-close"],["href","javascript:;",2,"cursor","pointer","color","blue","font-size","18px",3,"click"],[1,"fa","fa-check-square-o","mr-ms-2"],["href","javascript:;",2,"cursor","pointer","color","tomato","font-size","18px",3,"click"],[1,"fa","fa-times-circle-o"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"div",1),x.TgZ(6,"div",5),x.TgZ(7,"div",6),x.TgZ(8,"input",7),x.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.ALo(9,"translate"),x.qZA(),x.TgZ(10,"input",8),x.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.qZA(),x.TgZ(11,"input",9),x.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.qZA(),x.TgZ(12,"select",10),x.NdJ("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),x.TgZ(13,"option",11),x._uU(14),x.ALo(15,"translate"),x.ALo(16,"translate"),x.qZA(),x.YNc(17,Lt,2,2,"option",12),x.qZA(),x.TgZ(18,"select",13),x.NdJ("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.TgZ(19,"option",14),x._uU(20),x.ALo(21,"translate"),x.qZA(),x.TgZ(22,"option",15),x._uU(23),x.ALo(24,"translate"),x.qZA(),x.TgZ(25,"option",16),x._uU(26),x.ALo(27,"translate"),x.qZA(),x.TgZ(28,"option",17),x._uU(29),x.ALo(30,"translate"),x.qZA(),x.TgZ(31,"option",18),x._uU(32),x.ALo(33,"translate"),x.qZA(),x.TgZ(34,"option",19),x._uU(35),x.ALo(36,"translate"),x.qZA(),x.qZA(),x.YNc(37,Ut,4,3,"button",20),x.YNc(38,Nt,1,0,"img",21),x.qZA(),x.qZA(),x.TgZ(39,"div",22),x.TgZ(40,"div",23),x.TgZ(41,"select",24),x.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.TgZ(42,"option",25),x._uU(43,"#10"),x.qZA(),x.TgZ(44,"option",26),x._uU(45,"#25"),x.qZA(),x.TgZ(46,"option",27),x._uU(47,"#50"),x.qZA(),x.TgZ(48,"option",28),x._uU(49,"#100"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(50,"div",29),x.TgZ(51,"div",30),x.TgZ(52,"div",31),x.TgZ(53,"div",32),x.TgZ(54,"pagination",33),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(55,"div",34),x.TgZ(56,"a",35),x._uU(57),x.ALo(58,"translate"),x.ALo(59,"translate"),x.ALo(60,"translate"),x.ALo(61,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(62,"div",30),x.TgZ(63,"div",36),x.TgZ(64,"table",37),x.TgZ(65,"thead",38),x.TgZ(66,"tr"),x.TgZ(67,"th",39),x._uU(68,"#"),x.qZA(),x.TgZ(69,"th",40),x._uU(70),x.ALo(71,"translate"),x.qZA(),x.TgZ(72,"th",40),x._uU(73),x.ALo(74,"translate"),x.qZA(),x.TgZ(75,"th",40),x._uU(76),x.ALo(77,"translate"),x.qZA(),x.TgZ(78,"th",40),x._uU(79),x.ALo(80,"translate"),x.qZA(),x.TgZ(81,"th",40),x._uU(82),x.ALo(83,"translate"),x.qZA(),x.TgZ(84,"th",40),x._uU(85),x.ALo(86,"translate"),x.qZA(),x.TgZ(87,"th",40),x._uU(88),x.ALo(89,"translate"),x.qZA(),x.TgZ(90,"th",40),x._uU(91),x.ALo(92,"translate"),x.qZA(),x.TgZ(93,"th",40),x._uU(94),x.ALo(95,"translate"),x.qZA(),x.TgZ(96,"th",40),x._uU(97),x.ALo(98,"translate"),x.qZA(),x.TgZ(99,"th",40),x._uU(100),x.ALo(101,"translate"),x.qZA(),x.TgZ(102,"th",40),x._uU(103),x.ALo(104,"translate"),x.qZA(),x.TgZ(105,"th",40),x._uU(106),x.ALo(107,"translate"),x.qZA(),x.TgZ(108,"th",40),x._uU(109),x.ALo(110,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(111,"tbody"),x.YNc(112,Dt,6,3,"ng-container",41),x.YNc(113,Kt,2,1,"ng-container",41),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(114,"div",30),x.TgZ(115,"div",31),x.TgZ(116,"div",32),x.TgZ(117,"pagination",33),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(118,"div",34),x.TgZ(119,"a",35),x._uU(120),x.ALo(121,"translate"),x.ALo(122,"translate"),x.ALo(123,"translate"),x.ALo(124,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()),2&e&&(x.xp6(8),x.Q6J("placeholder",x.lcZ(9,60,"Search"))("ngModel",t._keyword),x.xp6(2),x.Q6J("ngModel",t._fDate)("bsConfig",x.DdM(122,Xt)),x.xp6(1),x.Q6J("ngModel",t._tDate)("bsConfig",x.DdM(123,Xt)),x.xp6(1),x.Q6J("ngModel",t.department_id),x.xp6(2),x.AsE(" ",x.lcZ(15,62,"All")," ",x.lcZ(16,64,"Department")," "),x.xp6(3),x.Q6J("ngForOf",t._deptlist),x.xp6(1),x.Q6J("ngModel",t._status),x.xp6(2),x.hij(" ",x.lcZ(21,66,"All")," "),x.xp6(3),x.hij(" ",x.lcZ(24,68,"None")," "),x.xp6(3),x.hij(" ",x.lcZ(27,70,"Preparation")," "),x.xp6(3),x.hij(" ",x.lcZ(30,72,"Technical validation")," "),x.xp6(3),x.hij(" ",x.lcZ(33,74,"Validation")," "),x.xp6(3),x.hij(" ",x.lcZ(36,76,"Done")," "),x.xp6(2),x.Q6J("ngIf",t._authenService.hasPermission("RES-VALID","report")),x.xp6(1),x.Q6J("ngIf",t._isLoading),x.xp6(3),x.Q6J("ngModel",t.pageSize),x.xp6(13),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(58,78,"Total of records"),": ",t.totalRow," - ",x.lcZ(59,80,"Page")," ",t.pageIndex," ",x.lcZ(60,82,"of")," ",t.totalPage," ",x.lcZ(61,84,"page"),""),x.xp6(13),x.hij(" ",x.lcZ(71,86,"Inner code")," "),x.xp6(3),x.hij(" ",x.lcZ(74,88,"Code")," "),x.xp6(3),x.Oqu(x.lcZ(77,90,"Internal testing")),x.xp6(3),x.Oqu(x.lcZ(80,92,"Parameter name")),x.xp6(3),x.Oqu(x.lcZ(83,94,"Priority")),x.xp6(3),x.Oqu(x.lcZ(86,96,"Note")),x.xp6(3),x.Oqu(x.lcZ(89,98,"Note lab")),x.xp6(3),x.Oqu(x.lcZ(92,100,"Note asm")),x.xp6(3),x.Oqu(x.lcZ(95,102,"Unit")),x.xp6(3),x.Oqu(x.lcZ(98,104,"LOD")),x.xp6(3),x.Oqu(x.lcZ(101,106,"LOQ")),x.xp6(3),x.Oqu(x.lcZ(104,108,"Results")),x.xp6(3),x.Oqu(x.lcZ(107,110,"Status")),x.xp6(3),x.Oqu(x.lcZ(110,112,"Actions")),x.xp6(3),x.Q6J("ngIf",0==t._preparationlist.length),x.xp6(1),x.Q6J("ngIf",t._preparationlist.length>0),x.xp6(4),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(121,114,"Total of records"),": ",t.totalRow," - ",x.lcZ(122,116,"Page")," ",t.pageIndex," ",x.lcZ(123,118,"of")," ",t.totalPage," ",x.lcZ(124,120,"page"),""))},directives:[l.Fj,l.JJ,l.On,S.Y5,S.Np,l.EJ,l.YN,l.Kr,r.sg,r.O5,C.Qt],pipes:[k.X$],styles:[""]}),t}(),tn=o(32579),nn=o(72808);function an(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",21),x.TgZ(1,"button",22),x._uU(2),x.ALo(3,"translate"),x.qZA(),x.TgZ(4,"div",23),x.TgZ(5,"button",24),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(),t=x.MAs(78);return e.popUpLanguage(t,1)}),x._uU(6),x.ALo(7,"translate"),x.qZA(),x.TgZ(8,"button",24),x.NdJ("click",function(){return x.CHM(n),x.oxw().exportQuotationExcel()}),x._uU(9),x.ALo(10,"translate"),x.qZA(),x.TgZ(11,"button",24),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(),t=x.MAs(78);return e.popUpLanguage(t,2)}),x._uU(12),x.ALo(13,"translate"),x.qZA(),x.TgZ(14,"button",24),x.NdJ("click",function(){return x.CHM(n),x.oxw().exportBOExcel()}),x._uU(15),x.ALo(16,"translate"),x.qZA(),x.qZA(),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,5,"Print")," "),x.xp6(4),x.hij(" ",x.lcZ(7,7,"Quotation")," "),x.xp6(3),x.hij(" ",x.lcZ(10,9,"Quotation")," - Excel "),x.xp6(3),x.hij(" ",x.lcZ(13,11,"Receipt")," "),x.xp6(3),x.hij(" ",x.lcZ(16,13,"Receipt")," - Excel "))}function on(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"button",25),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return x.oxw()._chooseTab(e,e.order_no)}),x._uU(2),x.ALo(3,"translate"),x.qZA(),x.BQk()}if(2&e){var a=t.$implicit,i=x.oxw();x.xp6(1),x.Q6J("ngClass",i._currentTabActivated==a.order_no?"btn btn-sm btn-warning":"btn btn-sm btn-secondary"),x.xp6(1),x.AsE(" ",x.lcZ(3,3,"Sample")," ",a.order_no," ")}}function rn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",27),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(2);return null==e.entity0.inner_code?e._removeTab(e.entity0.sample_id):null}),x._uU(1,"X"),x.qZA()}}function ln(e,t){if(1&e&&(x.ynx(0),x.YNc(1,rn,2,0,"a",26),x.BQk()),2&e){var n=x.oxw();x.xp6(1),x.Q6J("ngIf",0!=n._currentTabActivated&&null==n.entity0.inner_code)}}function sn(e,t){if(1&e&&(x.TgZ(0,"div",60),x._uU(1),x.ALo(2,"slice"),x.qZA()),2&e){var n=t.item;x.Q6J("ngbTooltip",n.name.length>25?n.name:""),x.xp6(1),x.hij(" ",n.name.length>25?x.Dn7(2,2,n.name,0,20)+"..":n.name," ")}}function cn(e,t){if(1&e&&(x.TgZ(0,"div",60),x._uU(1),x.ALo(2,"slice"),x.qZA()),2&e){var n=t.item;x.Q6J("ngbTooltip",n.name.length>25?n.name:""),x.xp6(1),x.hij(" ",n.name.length>25?x.Dn7(2,2,n.name,0,20)+"..":n.name," ")}}function dn(e,t){if(1&e&&(x.TgZ(0,"div",60),x._uU(1),x.ALo(2,"slice"),x.qZA()),2&e){var n=t.item;x.Q6J("ngbTooltip",n.name.length>25?n.name:""),x.xp6(1),x.hij(" ",n.name.length>25?x.Dn7(2,2,n.name,0,20)+"..":n.name," ")}}function un(e,t){if(1&e&&(x.TgZ(0,"div",60),x._uU(1),x.ALo(2,"slice"),x.qZA()),2&e){var n=t.item;x.Q6J("ngbTooltip",n.name.length>25?n.name:""),x.xp6(1),x.hij(" ",n.name.length>25?x.Dn7(2,2,n.name,0,20)+"..":n.name," ")}}function gn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",61),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(2);return e._saveTemplate(e.entity0)}),x._uU(1),x.ALo(2,"translate"),x.qZA()}2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Save")))}function pn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",69),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit;return x.oxw(2)._removeItem(e)}),x._UZ(1,"i",58),x.qZA()}}function _n(e,t){1&e&&x._UZ(0,"i",73)}function hn(e,t){1&e&&x._UZ(0,"i",74)}function mn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",70),x.NdJ("click",function(){return x.CHM(n),x.oxw(3)._switchFlagEdit()}),x.ALo(1,"translate"),x.YNc(2,_n,1,0,"i",71),x.YNc(3,hn,1,0,"i",72),x.qZA()}if(2&e){var a=x.oxw().$implicit;x.Q6J("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("ngbTooltip",x.lcZ(1,4,a.flag?"Cancel":"Edit")),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag)}}function fn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",75),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(3);return e._updatePricev2(e._orderdetailists)}),x._UZ(1,"i",76),x.qZA()}}function Zn(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw(2).$implicit;x.xp6(1),x.hij(" ",null==n.quantity||""==n.quantity?1:n.quantity,"")}}function vn(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw(2).$implicit;x.xp6(1),x.Oqu(n.quantity)}}function xn(e,t){if(1&e&&(x.ynx(0),x.YNc(1,Zn,2,1,"ng-container",17),x.YNc(2,vn,2,1,"ng-container",17),x.BQk()),2&e){var n=x.oxw(3);x.xp6(1),x.Q6J("ngIf",0==n.entity0.is_active),x.xp6(1),x.Q6J("ngIf",0!=n.entity0.is_active)}}function yn(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",77),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.quantity=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit,r=x.oxw(2);x.xp6(1),x.MGl("name","qty",i+1,""),x.Q6J("ngModel",o.quantity)("ngClass",null!=o.code_father?"form-control jdisabled":"form-control")("disabled",0!=r.entity0.is_active||null!=o.code_father)}}function bn(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.ALo(2,"number"),x.BQk()),2&e){var n=x.oxw(2).$implicit;x.xp6(1),x.hij(" ",x.lcZ(2,1,n.price),"")}}function An(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.ALo(2,"number"),x.BQk()),2&e){var n=x.oxw(2).$implicit;x.xp6(1),x.Oqu(x.lcZ(2,1,n.price))}}function Tn(e,t){if(1&e&&(x.ynx(0),x.YNc(1,bn,3,3,"ng-container",17),x.YNc(2,An,3,3,"ng-container",17),x.BQk()),2&e){var n=x.oxw(3);x.xp6(1),x.Q6J("ngIf",0==n.entity0.is_active),x.xp6(1),x.Q6J("ngIf",0!=n.entity0.is_active)}}function qn(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",78),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.price=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit,r=x.oxw(2);x.xp6(1),x.MGl("name","p",i+1,""),x.Q6J("ngModel",o.price)("ngClass",null!=o.code_father?"form-control jdisabled":"form-control")("disabled",0!=r.entity0.is_active||null!=o.code_father)}}function Mn(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.ALo(2,"number"),x.BQk()),2&e){var n=x.oxw(2).$implicit;x.xp6(1),x.hij(" ",x.xi3(2,1,n.discount,"1.1"),"")}}function Sn(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.ALo(2,"number"),x.BQk()),2&e){var n=x.oxw(2).$implicit;x.xp6(1),x.Oqu(x.xi3(2,1,n.discount,"1.1"))}}function Cn(e,t){if(1&e&&(x.ynx(0),x.YNc(1,Mn,3,4,"ng-container",17),x.YNc(2,Sn,3,4,"ng-container",17),x.BQk()),2&e){var n=x.oxw(3);x.xp6(1),x.Q6J("ngIf",0==n.entity0.is_active),x.xp6(1),x.Q6J("ngIf",0!=n.entity0.is_active)}}function wn(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",78),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.discount=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit,r=x.oxw(2);x.xp6(1),x.MGl("name","gg",i+1,""),x.Q6J("ngModel",o.discount)("ngClass",null!=o.code_father?"form-control jdisabled":"form-control")("disabled",0!=r.entity0.is_active||null!=o.code_father)}}function kn(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw(2).$implicit;x.xp6(1),x.hij(" ",null==n.priority||""==n.priority?0:n.priority,"")}}function Ln(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw(2).$implicit;x.xp6(1),x.Oqu(n.priority)}}function Un(e,t){if(1&e&&(x.ynx(0),x.YNc(1,kn,2,1,"ng-container",17),x.YNc(2,Ln,2,1,"ng-container",17),x.BQk()),2&e){var n=x.oxw(3);x.xp6(1),x.Q6J("ngIf",0==n.entity0.is_active),x.xp6(1),x.Q6J("ngIf",0!=n.entity0.is_active)}}function Nn(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",79),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.priority=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit,r=x.oxw(2);x.xp6(1),x.MGl("name","pri",i+1,""),x.Q6J("ngModel",o.priority)("ngClass",null!=o.code_father?"form-control jdisabled":"form-control")("disabled",0!=r.entity0.is_active||null!=o.code_father)}}function Dn(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw(2).$implicit;x.xp6(1),x.hij(" ",n.tat," ")}}function In(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw(2).$implicit;x.xp6(1),x.hij(" ",n.tat," ")}}function Yn(e,t){if(1&e&&(x.ynx(0),x.YNc(1,Dn,2,1,"ng-container",17),x.YNc(2,In,2,1,"ng-container",17),x.BQk()),2&e){var n=x.oxw(3);x.xp6(1),x.Q6J("ngIf",0==n.entity0.is_active),x.xp6(1),x.Q6J("ngIf",0!=n.entity0.is_active)}}function Jn(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",79),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.tat=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit,r=x.oxw(2);x.xp6(1),x.MGl("name","ta",i+1,""),x.Q6J("ngModel",o.tat)("ngClass",null!=o.code_father?"form-control jdisabled":"form-control")("disabled",0!=r.entity0.is_active||null!=o.code_father)}}function On(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"td"),x._uU(2),x.qZA(),x.TgZ(3,"td"),x.YNc(4,pn,2,0,"a",62),x.YNc(5,mn,4,6,"button",63),x.YNc(6,fn,2,0,"a",64),x.qZA(),x.TgZ(7,"td"),x.TgZ(8,"span",65),x._uU(9),x.qZA(),x.qZA(),x.TgZ(10,"td"),x._uU(11),x.qZA(),x.TgZ(12,"td",66),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw(2),a=x.MAs(80);return t._addComment(a,e)}),x._uU(13),x.qZA(),x.TgZ(14,"td"),x._uU(15),x.qZA(),x.TgZ(16,"td"),x._uU(17),x.qZA(),x.TgZ(18,"td"),x._uU(19),x.qZA(),x.TgZ(20,"td"),x.YNc(21,xn,3,2,"ng-container",17),x.YNc(22,yn,2,4,"ng-container",17),x.qZA(),x.TgZ(23,"td"),x.YNc(24,Tn,3,2,"ng-container",17),x.YNc(25,qn,2,4,"ng-container",17),x.qZA(),x.TgZ(26,"td"),x.YNc(27,Cn,3,2,"ng-container",17),x.YNc(28,wn,2,4,"ng-container",17),x.qZA(),x.TgZ(29,"td"),x._uU(30),x.ALo(31,"number"),x.qZA(),x.TgZ(32,"td"),x.YNc(33,Un,3,2,"ng-container",17),x.YNc(34,Nn,2,4,"ng-container",17),x.qZA(),x.TgZ(35,"td"),x.YNc(36,Yn,3,2,"ng-container",17),x.YNc(37,Jn,2,4,"ng-container",17),x.qZA(),x.TgZ(38,"td"),x.TgZ(39,"input",67),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.order_no=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._assignOrderDetail(e._orderdetailists)}),x.qZA(),x.qZA(),x.TgZ(40,"td"),x.TgZ(41,"input",68),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.hide=e}),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(2),x.Oqu(i+1),x.xp6(2),x.Q6J("ngIf",0==o.entity0.is_active&&!a.flag&&o._authenService.hasPermission("REQ-LIST","delete")),x.xp6(1),x.Q6J("ngIf",0==o.entity0.is_active&&o._authenService.hasPermission("REQ-LIST","update")),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngClass",null==a.code_father?"text-bold jtext-default":"text-warning"),x.xp6(1),x.Oqu(a.code),x.xp6(2),x.hij(" ","en"==o.user.lang?a.specification_name_e:a.specification_name_l," "),x.xp6(2),x.hij(" ",a.comment_ext," "),x.xp6(2),x.Oqu(a.method),x.xp6(2),x.Oqu(a.lod),x.xp6(2),x.hij(" ",a.unit," "),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.hij(" ",x.lcZ(31,29,a.amount)," "),x.xp6(3),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.MGl("name","odd",i+1,""),x.Q6J("ngModel",a.order_no)("ngClass",null!=a.code_father?"form-control jdisabled":"form-control")("disabled",0!=o.entity0.is_active||null!=a.code_father),x.xp6(2),x.MGl("name","ckb",i+1,""),x.Q6J("ngModel",a.hide)("disabled",!a.flag)}}function Qn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",28),x.TgZ(1,"div",9),x.TgZ(2,"div",1),x.TgZ(3,"div",29),x.TgZ(4,"div",30),x.TgZ(5,"label",31),x.TgZ(6,"strong"),x._uU(7),x.ALo(8,"translate"),x.qZA(),x.qZA(),x.TgZ(9,"div",32),x.TgZ(10,"input",33),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.sample_name=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)}),x.ALo(11,"translate"),x.qZA(),x.TgZ(12,"input",33),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.sample_name_e=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)}),x.ALo(13,"translate"),x.ALo(14,"translate"),x.qZA(),x.TgZ(15,"input",34),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.sample_id=e}),x.qZA(),x.qZA(),x.TgZ(16,"label",31),x.TgZ(17,"strong"),x._uU(18),x.ALo(19,"translate"),x.qZA(),x.qZA(),x.TgZ(20,"div",32),x.TgZ(21,"input",35),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.sample_code=e}),x.ALo(22,"translate"),x.qZA(),x.qZA(),x.TgZ(23,"label",31),x.TgZ(24,"strong"),x._uU(25),x.ALo(26,"translate"),x.ALo(27,"translate"),x.qZA(),x.qZA(),x.TgZ(28,"div",32),x.TgZ(29,"input",33),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.description=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)}),x.ALo(30,"translate"),x.qZA(),x.TgZ(31,"input",33),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.description_e=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)}),x.ALo(32,"translate"),x.ALo(33,"translate"),x.qZA(),x.qZA(),x.TgZ(34,"label",31),x.TgZ(35,"strong"),x._uU(36),x.ALo(37,"translate"),x.qZA(),x.qZA(),x.TgZ(38,"div",32),x.TgZ(39,"input",35),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.inner_code=e}),x.ALo(40,"translate"),x.qZA(),x.qZA(),x.TgZ(41,"label",31),x.TgZ(42,"strong"),x._uU(43),x.ALo(44,"translate"),x.qZA(),x.qZA(),x.TgZ(45,"div",32),x.TgZ(46,"textarea",36),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.note=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)}),x.ALo(47,"translate"),x.qZA(),x.qZA(),x.TgZ(48,"label",31),x.TgZ(49,"strong"),x._uU(50),x.ALo(51,"translate"),x.qZA(),x.qZA(),x.TgZ(52,"div",32),x.TgZ(53,"input",33),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.weight=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)}),x.ALo(54,"translate"),x.qZA(),x.qZA(),x.TgZ(55,"label",31),x.TgZ(56,"strong"),x._uU(57),x.ALo(58,"translate"),x.qZA(),x.qZA(),x.TgZ(59,"div",32),x.TgZ(60,"select",37),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.is_active=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)}),x.TgZ(61,"option",38),x._uU(62),x.ALo(63,"translate"),x.qZA(),x.TgZ(64,"option",39),x._uU(65),x.ALo(66,"translate"),x.qZA(),x.TgZ(67,"option",40),x._uU(68),x.ALo(69,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(70,"label",41),x.TgZ(71,"strong"),x._uU(72),x.ALo(73,"translate"),x.qZA(),x.qZA(),x.TgZ(74,"div",32),x.TgZ(75,"ng-select",42),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity0.sample_nature_id=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSampleOrder(e.entity0)}),x.ALo(76,"translate"),x.ALo(77,"translate"),x.YNc(78,sn,3,6,"ng-template",43),x.qZA(),x.qZA(),x.TgZ(79,"label",31),x.TgZ(80,"strong"),x._uU(81),x.ALo(82,"translate"),x.qZA(),x.qZA(),x.TgZ(83,"div",32),x.TgZ(84,"ng-select",44),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().selectedCategory0=e})("change",function(){return x.CHM(n),x.oxw().changeCategoryMatrix()}),x.ALo(85,"translate"),x.ALo(86,"translate"),x.YNc(87,cn,3,6,"ng-template",43),x.qZA(),x.qZA(),x.TgZ(88,"label",31),x.TgZ(89,"strong"),x._uU(90),x.ALo(91,"translate"),x.qZA(),x.qZA(),x.TgZ(92,"div",32),x.TgZ(93,"ng-select",45),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().selectedSpecification0=e})("change",function(){x.CHM(n);var e=x.oxw();return e.changeSpecification(e.entity0,e.selectedCategory0)}),x.YNc(94,dn,3,6,"ng-template",43),x.qZA(),x.qZA(),x.TgZ(95,"label",31),x.TgZ(96,"strong"),x._uU(97),x.ALo(98,"translate"),x.qZA(),x.qZA(),x.TgZ(99,"div",32),x.TgZ(100,"input",46),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw()._tat=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateTAT(e.entity0,e._tat)}),x.ALo(101,"translate"),x.qZA(),x.qZA(),x.TgZ(102,"label",47),x.TgZ(103,"strong"),x._uU(104),x.ALo(105,"translate"),x.qZA(),x.qZA(),x.TgZ(106,"div",32),x.TgZ(107,"ng-select",48),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().selectedTemplate0=e})("change",function(){x.CHM(n);var e=x.oxw();return e.changeTemplate(e.entity0)}),x.YNc(108,un,3,6,"ng-template",43),x.qZA(),x._uU(109," \xa0"),x.YNc(110,gn,3,3,"a",49),x.qZA(),x.TgZ(111,"div",50),x.TgZ(112,"div",51),x.TgZ(113,"table",52),x.TgZ(114,"thead",53),x.TgZ(115,"tr"),x.TgZ(116,"th",54),x._uU(117),x.ALo(118,"translate"),x.ALo(119,"number"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(120,"thead",55),x.TgZ(121,"tr"),x.TgZ(122,"th",56),x._uU(123,"#"),x.qZA(),x.TgZ(124,"th",57),x._UZ(125,"i",58),x.qZA(),x.TgZ(126,"th",59),x._uU(127),x.ALo(128,"translate"),x.qZA(),x.TgZ(129,"th",59),x._uU(130),x.ALo(131,"translate"),x.qZA(),x.TgZ(132,"th",59),x._uU(133),x.ALo(134,"translate"),x.qZA(),x.TgZ(135,"th",59),x._uU(136),x.ALo(137,"translate"),x.qZA(),x.TgZ(138,"th",59),x._uU(139,"LOD"),x.qZA(),x.TgZ(140,"th",59),x._uU(141),x.ALo(142,"translate"),x.qZA(),x.TgZ(143,"th",59),x._uU(144),x.ALo(145,"translate"),x.qZA(),x.TgZ(146,"th",59),x._uU(147),x.ALo(148,"translate"),x.qZA(),x.TgZ(149,"th",59),x._uU(150),x.ALo(151,"translate"),x.qZA(),x.TgZ(152,"th",59),x._uU(153),x.ALo(154,"translate"),x.qZA(),x.TgZ(155,"th",59),x._uU(156),x.ALo(157,"translate"),x.qZA(),x.TgZ(158,"th",59),x._uU(159),x.ALo(160,"translate"),x.qZA(),x.TgZ(161,"th",59),x._uU(162),x.ALo(163,"translate"),x.qZA(),x.TgZ(164,"th",59),x._uU(165),x.ALo(166,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(167,"tbody"),x.YNc(168,On,42,31,"tr",15),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(5),x.MGl("for","sn",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(8,130,"Sample name")),x.xp6(3),x.MGl("id","sn",a._currentTabActivated,""),x.MGl("name","sample_name",a._currentTabActivated,""),x.Q6J("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.lcZ(11,132,"Sample")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_name)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.xp6(2),x.MGl("id","sne",a._currentTabActivated,""),x.MGl("name","sample_namee",a._currentTabActivated,""),x.Q6J("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.lcZ(13,134,"Sample")+" "+x.lcZ(14,136,"English")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_name_e)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.xp6(3),x.MGl("id","id",a._currentTabActivated,""),x.MGl("name","id",a._currentTabActivated,""),x.Q6J("ngModel",a.entity0.sample_id),x.xp6(1),x.MGl("for","sample_code",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(19,138,"Sample code")),x.xp6(3),x.MGl("id","sample_code",a._currentTabActivated,""),x.MGl("name","sample_code",a._currentTabActivated,""),x.Q6J("placeholder",x.lcZ(22,140,"Sample code")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_code),x.xp6(2),x.MGl("for","description",a._currentTabActivated,""),x.xp6(2),x.AsE("",x.lcZ(26,142,"Description")," (",x.lcZ(27,144,"State of sample"),")"),x.xp6(4),x.MGl("id","description",a._currentTabActivated,""),x.MGl("name","description",a._currentTabActivated,""),x.Q6J("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.lcZ(30,146,"Description")+" "+a._currentTabActivated)("ngModel",a.entity0.description)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.xp6(2),x.MGl("id","descriptione",a._currentTabActivated,""),x.MGl("name","descriptione",a._currentTabActivated,""),x.Q6J("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.lcZ(32,148,"Description")+" "+x.lcZ(33,150,"English")+" "+a._currentTabActivated)("ngModel",a.entity0.description_e)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.xp6(3),x.MGl("for","inner_code",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(37,152,"Inner code")),x.xp6(3),x.MGl("id","inner_code",a._currentTabActivated,""),x.MGl("name","inner_code",a._currentTabActivated,""),x.Q6J("placeholder",x.lcZ(40,154,"Inner code")+" "+a._currentTabActivated)("ngModel",a.entity0.inner_code),x.xp6(2),x.MGl("for","note",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(44,156,"Note")),x.xp6(3),x.MGl("id","note",a._currentTabActivated,""),x.MGl("name","note",a._currentTabActivated,""),x.Q6J("placeholder",x.lcZ(47,158,"Note")+" "+a._currentTabActivated)("ngModel",a.entity0.note)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.xp6(2),x.MGl("for","weight",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(51,160,"Weight")),x.xp6(3),x.MGl("id","weight",a._currentTabActivated,""),x.MGl("name","weight",a._currentTabActivated,""),x.Q6J("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.lcZ(54,162,"Weight")+" "+a._currentTabActivated)("ngModel",a.entity0.weight)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.xp6(2),x.MGl("for","state",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(58,164,"State")),x.xp6(3),x.Q6J("ngModel",a.entity0.is_active)("disabled",0!=a.entity.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.xp6(2),x.hij(" ",x.lcZ(63,166,"Pending")," "),x.xp6(3),x.hij(" ",x.lcZ(66,168,"Confirmed")," "),x.xp6(3),x.hij(" ",x.lcZ(69,170,"Cancel")," "),x.xp6(2),x.MGl("for","_samplenatures",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(73,172,"Sample nature")),x.xp6(3),x.Tol("ajustar"),x.MGl("name","_samplenatures",a._currentTabActivated,""),x.Q6J("items",a._samplenatures)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.entity0.sample_nature_id)("placeholder",x.lcZ(76,174,"Please choose"))("notFoundText",x.lcZ(77,176,"Not found item")),x.xp6(4),x.MGl("for","matrix_category",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(82,178,"Matrix category")),x.xp6(3),x.Tol("ajustar"),x.Q6J("items",a._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCategory0)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create"))("placeholder",x.lcZ(85,180,"Please choose"))("notFoundText",x.lcZ(86,182,"Not found item")),x.xp6(4),x.MGl("for","para_assignment",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(91,184,"Parameter assignment")),x.xp6(3),x.Q6J("items",a._specifications)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSpecification0)("disabled",0!=a.entity0.is_active||null==a.selectedCategory0||!a._authenService.hasPermission("REQ-LIST","create")),x.xp6(2),x.MGl("for","tatc",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(98,186,"TAT")),x.xp6(3),x.MGl("id","tatc",a._currentTabActivated,""),x.MGl("name","tatc",a._currentTabActivated,""),x.Q6J("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.lcZ(101,188,"TAT")+" "+a._currentTabActivated)("ngModel",a._tat)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.xp6(4),x.Oqu(x.lcZ(105,190,"Copy sample")),x.xp6(3),x.Q6J("items",a._templates)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedTemplate0)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.xp6(3),x.Q6J("ngIf",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","update")),x.xp6(7),x.AsE(" ",x.lcZ(118,192,"Subtotal"),": ",x.lcZ(119,194,a._totalSub)," (VND) "),x.xp6(10),x.hij(" ",x.lcZ(128,196,"Code")," "),x.xp6(3),x.hij(" ",x.lcZ(131,198,"Specification")," "),x.xp6(3),x.hij(" ",x.lcZ(134,200,"Note")," "),x.xp6(3),x.hij(" ",x.lcZ(137,202,"Method")," "),x.xp6(5),x.hij(" ",x.lcZ(142,204,"Unit")," "),x.xp6(3),x.hij(" ",x.lcZ(145,206,"Quantity")," "),x.xp6(3),x.hij(" ",x.lcZ(148,208,"Unit price")," "),x.xp6(3),x.hij("",x.lcZ(151,210,"Discount")," %"),x.xp6(3),x.hij(" ",x.lcZ(154,212,"Amount")," "),x.xp6(3),x.hij(" ",x.lcZ(157,214,"Priority")," "),x.xp6(3),x.hij(" ",x.lcZ(160,216,"TAT")," "),x.xp6(3),x.hij(" ",x.lcZ(163,218,"Order")," "),x.xp6(3),x.hij(" ",x.lcZ(166,220,"Hidden")," "),x.xp6(3),x.Q6J("ngForOf",a._orderdetailists)}}function Pn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",28),x.TgZ(1,"div",80),x.TgZ(2,"h4",81),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"button",82),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(6,"span",83),x._uU(7,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",84),x.TgZ(9,"div",30),x.TgZ(10,"div",50),x.TgZ(11,"div",85),x.TgZ(12,"button",86),x.NdJ("click",function(){return x.CHM(n),x.oxw()._print("vn")}),x._uU(13),x.ALo(14,"translate"),x.qZA(),x.TgZ(15,"button",87),x.NdJ("click",function(){return x.CHM(n),x.oxw()._print("en")}),x._uU(16),x.ALo(17,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}2&e&&(x.xp6(3),x.hij(" ",x.lcZ(4,3,"Language")," "),x.xp6(10),x.hij(" ",x.lcZ(14,5,"Vietnamese")," "),x.xp6(3),x.hij(" ",x.lcZ(17,7,"English")," "))}function En(e,t){1&e&&(x.ynx(0),x.TgZ(1,"a",94),x._UZ(2,"img",95),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.BQk()),2&e&&(x.xp6(3),x.hij(" ",x.lcZ(4,1,"Processing")," "))}function Rn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",96),x.NdJ("click",function(){return x.CHM(n),x.oxw(2).saveComment()}),x._uU(1),x.ALo(2,"translate"),x.qZA()}2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Save & close")," "))}function Fn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",28),x.TgZ(1,"div",80),x.TgZ(2,"h4",81),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"button",82),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(6,"span",83),x._uU(7,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",84),x.TgZ(9,"div",30),x.TgZ(10,"div",50),x.TgZ(11,"div",88),x.TgZ(12,"label",89),x._uU(13),x.ALo(14,"translate"),x.qZA(),x.TgZ(15,"textarea",90),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entityComment.comment_ext=e}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(16,"div",91),x.TgZ(17,"a",92),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x._uU(18),x.ALo(19,"translate"),x.qZA(),x.YNc(20,En,5,3,"ng-container",17),x.YNc(21,Rn,3,3,"a",93),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(3),x.AsE(" ",x.lcZ(4,7,"Note")," - ",a.entityComment.code," "),x.xp6(10),x.Oqu(x.lcZ(14,9,"Note")),x.xp6(2),x.Q6J("ngModel",a.entityComment.comment_ext),x.xp6(3),x.hij(" ",x.lcZ(19,11,"Close")," "),x.xp6(2),x.Q6J("ngIf",a.isSaveNote),x.xp6(1),x.Q6J("ngIf",!a.isSaveNote)}}h().vfs=m.I.vfs;var Hn=function(){var t=function(){function t(e,a,i,o,r,l,s,c,d,u){n(this,t),this._authenService=e,this._dataService=a,this._route=i,this._notifyService=o,this._uploadService=r,this._excelService=l,this._activatedRoute=s,this._utilityService=c,this.formatPipe=d,this.modalService=u,this.isSave=!1,this._flagModal="",this._flagPrintPreview=!1,this.entity={},this.baseFolder=p.h.BASE_API+"/",this._id="",this.entityDetail={},this._xList=[],this._tabOrder=9,this._categories=[],this._specifications=[],this._templates=[],this._orderdetailists=[],this._totalSub=0,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._flagEdit=!1,this.isLoadingEmail=!1,this._currentTab=0,this.isLoadingEmail1=!1,this.isLoadingEmail2=!0,this.config={displayKey:"name",search:!0,limitTo:5},this.selectedSpecification0=null,this.selectedCategory0=null,this.selectedTemplate0=null,this._currentTabActivated=0,this._currentTabSampleId="",this._logoPath=p.h.BASE_API+"/",this._logoIsoPath=p.h.BASE_API+"/",this.entity0={},this.entityComment={},this.isSaveNote=!1,this._samplenatures=[],(!1===e.checkAccess("REQ-LIST")||!1===e.hasPermission("REQ-LIST","read"))&&this._route.navigate(["/error/404"]),this.user=this._authenService.getLoggedInUser(),this.socket=g()(p.h.BASE_API)}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.loadImgs(),this._activatedRoute.params.subscribe(function(t){e._id=t.id,e.loadDetail(e._id),e.loadSampleNature(),e.loadCategories(),e.loadSpecs(null),e.socket.on("refreshPage",function(t){e.loadCategories()})})}},{key:"ngAfterViewInit",value:function(){}},{key:"counter",value:function(e,t){return console.log(e,t),new Array(e-t)}},{key:"loadDetail",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/request/detailA",a).subscribe(function(t){n.entity=t.data;var a,i=[],o=e(t.data.orders_list);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({sample_id:r.sample_id,sample_name:r.sample_name,sample_name_e:r.sample_name_e,sample_code:r.sample_code,inner_code:r.inner_code,description:r.description,description_e:r.description_e,note:r.note,weight:r.weight,is_active:r.is_active,userid:r.userid,total_sub:r.total_sub,order_no:r.order_no,flag_close:!1,sample_nature_id:r.sample_nature_id})}}catch(s){o.e(s)}finally{o.f()}n._xList=i,n.entity0=i.filter(function(e){return e.order_no==n._currentTabActivated})[0];var l={};l.id=n.entity.userid,l.short_code=n.user.short_code,n.updateEmployeeCode(l)})}},{key:"removeOrderWithNull",value:function(e){var t={};t.sample_id=e,this._dataService.post("/request/removeOrderWithNull",t).subscribe(function(e){})}},{key:"loadDetailWithNoloadOrderSampleTabs",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/request/detailA",n).subscribe(function(e){t.entity.total=e.data.total})}},{key:"updateEmployeeCode",value:function(e){this._dataService.post("/user/updateCodeEmployee",e).subscribe(function(e){})}},{key:"loadDetail1",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/request/detailA",a).subscribe(function(t){n.entity=t.data;var a=[];if(0==t.data.orders_list.length){var i,o=0,r=e(n.counter(t.data.number_sample,0));try{for(r.s();!(i=r.n()).done;){i.value;a.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:o}),o+=1}}catch(g){r.e(g)}finally{r.f()}}else{o=0;var l,s=e(t.data.orders_list);try{for(s.s();!(l=s.n()).done;){var c=l.value;a.push({sample_id:c.sample_id,sample_name:c.sample_name,sample_code:c.sample_code,inner_code:c.inner_code,description:c.description,note:c.note,weight:c.weight,is_active:c.is_active,userid:c.userid,order_no:o}),o+=1}}catch(g){s.e(g)}finally{s.f()}var d,u=e(n.counter(t.data.number_sample,t.data.orders_list.length));try{for(u.s();!(d=u.n()).done;){d.value;a.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:o}),o+=1}}catch(g){u.e(g)}finally{u.f()}}n._xList=a,n.entity0=a.filter(function(e){return e.order_no==n._currentTabActivated})[0],n.loadTemplates(n.entity.customer_id)})}},{key:"loadDetailByTab",value:function(t,n){var a=this;this._currentTab=n;var i={};i.id=t,this._dataService.post("/request/detailA",i).subscribe(function(t){a.entity=t.data;var n=[];if(0==t.data.orders_list.length){var i,o=0,r=e(a.counter(t.data.number_sample,0));try{for(r.s();!(i=r.n()).done;){i.value;n.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:o}),o+=1}}catch(g){r.e(g)}finally{r.f()}}else{o=0;var l,s=e(t.data.orders_list);try{for(s.s();!(l=s.n()).done;){var c=l.value;n.push({sample_id:c.sample_id,sample_name:c.sample_name,sample_code:c.sample_code,inner_code:c.inner_code,description:c.description,note:c.note,weight:c.weight,is_active:c.is_active,userid:c.userid,order_no:o}),o+=1}}catch(g){s.e(g)}finally{s.f()}var d,u=e(a.counter(t.data.number_sample,t.data.orders_list.length));try{for(u.s();!(d=u.n()).done;){d.value;n.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:o}),o+=1}}catch(g){u.e(g)}finally{u.f()}}a._xList=n,a.entity0=n.filter(function(e){return e.order_no==a._currentTabActivated})[0],a.loadTemplates(a.entity.customer_id)})}},{key:"loadTemplates",value:function(t){var n=this,a={};a.customer_id=t,this._dataService.post("/sample_matrix/getallsampletemplates",a).subscribe(function(t){var a,i=[],o=e(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({name:r.sample_name,code:r.id})}}catch(l){o.e(l)}finally{o.f()}n._templates=i})}},{key:"loadCategories",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",n).subscribe(function(n){var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({name:"en"==t.user.lang?r.category_name_e:r.category_name_l,code:r.id})}}catch(l){o.e(l)}finally{o.f()}t._categories=i})}},{key:"loadSpecs",value:function(t){var n=this;if(null!=t){var a={};a.domain=this.user.short_code,a.id=t,this._dataService.post("/sample_matrix/getallparametersnopagingbycat",a).subscribe(function(t){var a,i=[],o=e(t.data.filter(function(e){return e.is_active}));try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({name:r.specification_name_l,code:r.parameter_id})}}catch(l){o.e(l)}finally{o.f()}n._specifications=i})}else{var i={};i.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparametersnopaging",i).subscribe(function(t){var a,i=[],o=e(t.data.filter(function(e){return e.is_active}));try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({name:r.specification_name_l,code:r.id})}}catch(l){o.e(l)}finally{o.f()}n._specifications=i})}}},{key:"_updateRequest",value:function(){var e=this;console.log(this.entity),this._dataService.post("/request/update",this.entity).subscribe(function(t){console.log(t.data),"failed"==t.result?e._notifyService.showError("en"==e.user.lang?v.W.MSG_UPDATENO_EN:v.W.MSG_UPDATENO,"en"==e.user.lang?v.W.error_title_en:v.W.error_title):(e.loadDetail(t.data[0]._id),e._notifyService.showSuccess("en"==e.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"))})}},{key:"_updateSampleOrder",value:function(e){var t=this;e.request_id=this._id,e.userid=this.user.id,this._tabOrder=e.order_no,null!=e.sample_name&&""!=e.sample_name&&(console.log("Params",e),this._dataService.post("/request/updateSampleOrder",e).subscribe(function(n){1==e.is_active&&null==e.sample_code&&t._updateCodeInSampleOrder(e),t._updateSubTotal(e.sample_id),t._currentTabSampleId=e.sample_id,t._currentTabActivated=n.data.order_no,t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK")}))}},{key:"_updateCodeInSampleOrder",value:function(e){var t=this,n={};n.sample_id=e.sample_id,n.sample_code=e.sample_code,n.inner_code=e.inner_code,n.is_active=e.is_active,n.userid=this.user.id,console.log("Code",n),this._dataService.post("/request/addCodesInSampleOrder",n).subscribe(function(n){t.loadDetail(t._id),t._updateSubTotal(e.sample_id)})}},{key:"loadDetailSampleOrder",value:function(e){var t=this,n={};n.sample_id=e,this._dataService.post("/request/detailSampleOrder",n).subscribe(function(e){null!=e.data&&(t._totalSub=e.data.total_sub)})}},{key:"_removeTab",value:function(e){var t=this;console.log("Call here",e),this._currentTabActivated=0,this._dataService.post("/request/removeOrder",{id:e,request_id:this._id,number_sample:this.entity.number_sample}).subscribe(function(e){console.log("Call KQ",e),t.entity0={},t.loadDetail(t._id)})}},{key:"_updateSampleNo",value:function(){var e=this;if(0==this.entity.number_sample)return this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_SAMPLE_ZERO_EN:v.W.MSG_ERROR_SAMPLE_ZERO,"en"==this.user.lang?v.W.error_title_en:v.W.error_title),void(this.entity.number_sample=1);this._dataService.post("/request/update2",{request_id:this._id,number_sample:this.entity.number_sample,short_code:this.user.short_code,ipaddress:this.user.ipaddress}).subscribe(function(t){console.log("Run here",t),e.loadDetail(e._id)})}},{key:"_chooseTab",value:function(t,n){var a,i=e(this._xList);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.flag_close=o.order_no==n&&!o.flag_close}}catch(r){i.e(r)}finally{i.f()}this.entity0=t,this._orderdetailists=[],this.selectedCategory=null,this.selectedSpecification=null,this.selectedTemplate=null,this._tat=null,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this.totalPage=0,this._updateSubTotalWithNoloadOrderSampleTabs(t.sample_id),this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id),this._currentTabActivated=n}},{key:"changeCategoryMatrix",value:function(){this.loadSpecs(this.selectedCategory0)}},{key:"changeTemplate",value:function(e){this._getTemplate(this.selectedTemplate0,e)}},{key:"changeSpecification",value:function(e,t){console.log(this.selectedSpecification0,t),null!=this.selectedSpecification0&&null!=t&&this._addItems(this.selectedSpecification0,e,t)}},{key:"_addItems",value:function(e,t,n){var a=this;if(console.log(e,t),null!=t.sample_id)if(null!=e){var i={};i.sample_id=t.sample_id,i.parameter_id=e,i.category_id=n,i.priority=0,i.short_code=this.user.short_code,this._dataService.post("/request/addItemOrderv2",i).subscribe(function(e){a._notifyService.showSuccess("en"==a.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),a.selectedSpecification0=null,a.loadDetailSampleOrder(t.sample_id),a.loadOrderDetailList(t.sample_id),a._updateSubTotal(t.sample_id),a.loadDetail(a._id)},function(){a.selectedSpecification0=null,a._notifyService.showError("en"==a.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==a.user.lang?v.W.error_title_en:v.W.error_title)})}else this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id);else this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)}},{key:"loadOrderDetailList",value:function(t){var n=this;if(null!=t){var a={page:1,limit:9999};a.sample_id=t,this._dataService.post("/request/getlistorderdetail",a).subscribe(function(t){var a=[];n._totalSub=0;var i,o=e(t.data);try{var r=function(){var e=i.value;0==a.filter(function(t){return t.code==e.code&&t.category_id==e.category_id}).length&&(a.push({code:e.code,code_father:0==t.data.filter(function(t){return t.code==e.code_father}).length||e.code==e.code_father?null:e.code_father,lod:e.lod,mark:e.mark,method:e.method,parameter_id:e.parameter_id,category_id:e.category_id,price:null==e.price?0:e.price,priority:e.priority,sample_id:e.sample_id,specification_name_e:e.specification_name_e,specification_name_l:e.specification_name_l,tat:e.tat,unit:e.unit,quantity:e.quantity,flag:!1,comment_ext:e.comment_ext,discount:null==e.discount?0:parseFloat(e.discount),amount:(1-parseFloat(null==e.discount?0:e.discount)/100)*parseInt(e.quantity)*parseFloat(null==e.price?0:e.price),order_no:null==e.order_no?9:e.order_no,hide:null!=e.hide&&null!=e.hide&&e.hide}),n._totalSub+=parseInt(null==e.price?0:e.price)*e.quantity)};for(o.s();!(i=o.n()).done;)r()}catch(l){o.e(l)}finally{o.f()}n._orderdetailists=a,n.totalRow=t.rowCount,n.totalPage=t.totalPages,n.selectedSpecification=null})}}},{key:"_assignOrderDetail",value:function(t){var n,a=this,i=[],o=e(t);try{for(o.s();!(n=o.n()).done;){var r=n.value;i.push({sample_id:r.sample_id,parameter_id:r.parameter_id,category_id:r.category_id,order_no:r.order_no,code:r.code,code_father:r.code_father})}}catch(l){o.e(l)}finally{o.f()}this._dataService.post("/request/re-assignOrders",{getlist:i}).subscribe(function(e){a._updateSubTotal(t[0].sample_id),a.loadOrderDetailList(t[0].sample_id),a.loadDetail(a._id)})}},{key:"_switchFlagEdit",value:function(){var t,n=e(this._orderdetailists);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.flag=!a.flag}}catch(i){n.e(i)}finally{n.f()}}},{key:"pageChanged",value:function(e,t){this.pageIndex=e.page,this.loadOrderDetailList(t)}},{key:"_removeItem",value:function(e){var t=this,n={};n.sample_id=e.sample_id,n.parameter_id=e.parameter_id,n.category_id=e.category_id,n.code=e.code,n.code_father=e.code_father,this._dataService.post("/request/removeItemOrderv2",n).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_DELETE_EN:v.W.MSG_DELETE,"OK"),t._updateSubTotal(e.sample_id),t.loadDetailSampleOrder(e.sample_id),t.loadOrderDetailList(e.sample_id)})}},{key:"_updateTAT",value:function(e,t){var n=this;this._tat=null;var a={};a.sample_id=e.sample_id,a.tat=t,this._dataService.post("/request/updateTAT",a).subscribe(function(t){n._notifyService.showSuccess("en"==n.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),n._updateSubTotal(e.sample_id),n.loadOrderDetailList(e.sample_id)})}},{key:"_updatePrice",value:function(e){var t=this,n={};n.sample_id=e.sample_id,n.parameter_id=e.parameter_id,n.category_id=e.category_id,n.price=e.price,n.mark=e.mark,n.priority=e.priority,n.tat=e.tat,n.quantity=e.quantity,n.discount=e.discount,this._dataService.post("/request/updatePriceOrder",n).subscribe(function(n){console.log("KQ",n),t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),t._updateSubTotal(e.sample_id),t.loadOrderDetailList(e.sample_id),t.loadDetail(t._id)})}},{key:"_updatePricev2",value:function(e){var t=this;console.log("List",e),this._dataService.post("/request/updatePriceOrderv2",{getlist:e}).subscribe(function(n){console.log("KQ",n),t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),t._updateSubTotal(e[0].sample_id),t.loadOrderDetailList(e[0].sample_id),t.loadDetail(t._id)})}},{key:"_updateSubTotal",value:function(e){var t=this,n={};n.sample_id=e,this._dataService.post("/request/updateSubTotal",n).subscribe(function(n){t._updateTotal(t._id),t.loadDetailSampleOrder(e)})}},{key:"_updateSubTotalWithNoloadOrderSampleTabs",value:function(e){var t=this;this.selectedCategory0=null;var n={};n.sample_id=e,this._dataService.post("/request/updateSubTotal",n).subscribe(function(n){t._updateTotalWithNoloadOrderSampleTabs(t._id),t.loadDetailSampleOrder(e)})}},{key:"_updateTotalWithNoloadOrderSampleTabs",value:function(e){var t=this,n={};n.request_id=e,this._dataService.post("/request/updateTotal",n).subscribe(function(e){t.loadDetailWithNoloadOrderSampleTabs(t._id)})}},{key:"_updateTotal",value:function(e){var t=this,n={};n.request_id=e,this._dataService.post("/request/updateTotal",n).subscribe(function(e){t.loadDetail(t._id)})}},{key:"_addComment",value:function(e,t){this.entityComment=t,this.modalService.open(e,{size:"md",centered:!0})}},{key:"saveComment",value:function(){var e=this;this.isSaveNote=!0,this._dataService.post("/request/addCommentParameter",{sample_id:this.entityComment.sample_id,parameter_id:this.entityComment.parameter_id,category_id:this.entityComment.category_id,comment_ext:this.entityComment.comment_ext}).subscribe(function(t){e.isSaveNote=!1,e.loadOrderDetailList(e.entityComment.sample_id),e.modalService.dismissAll()})}},{key:"_saveTemplate",value:function(t){var n=this;if(null!=t.sample_name&&""!=t.sample_name){var a={};a.sample_name=t.sample_name,a.weight=t.weight,a.customer_id=this.entity.customer_id;var i,o=[],r=e(this._orderdetailists);try{for(r.s();!(i=r.n()).done;){var l=i.value;o.push({code:l.code,flag:l.flag,lod:l.lod,mark:l.mark,method:l.method,loq:l.loq,parameter_id:l.parameter_id,category_id:l.category_id,price:l.price,priority:l.priority,sample_id:null,specification_name_e:l.specification_name_e,specification_name_l:l.specification_name_l,tat:l.tat,unit:l.unit,quantity:l.quantity})}}catch(s){r.e(s)}finally{r.f()}a.json=JSON.stringify(o),this._dataService.post("/request/addSampleTemplate",a).subscribe(function(e){"ok"==e.result?(n._notifyService.showSuccess("en"==n.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),n.loadTemplates(n.entity.customer_id)):n._notifyService.showError("en"==n.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==n.user.lang?v.W.error_title_en:v.W.error_title)})}else this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)}},{key:"_getTemplate",value:function(e,t){var n=this;if(console.log(e,t),null!=t.sample_name&&null!=e)Z().fire({title:"en"==this.user.lang?v.W.are_u_sure_replace_en:v.W.are_u_sure_replace,text:t.sample_name,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(a){if(a.value){var i={};i.id=e,i.sample_id=t.sample_id,i.userid=n.user.id,console.log(i),n._dataService.post("/request/replaceOrderDetailBySampleId",i).subscribe(function(e){n.selectedTemplate=null,"ok"==e.result?(n._notifyService.showSuccess("en"==n.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),n.selectedTemplate0=[],n._updateSubTotal(t.sample_id),n.loadDetailSampleOrder(t.sample_id),n.loadOrderDetailList(t.sample_id)):n._notifyService.showError("en"==n.user.lang?v.W.MSG_ADDNO_EN:v.W.MSG_ADDNO,"en"==n.user.lang?v.W.error_title_en:v.W.error_title)})}else n.selectedTemplate=null});else if(null!=e){var a={};a.id=e,a.sample_id=t.sample_id,a.request_id=this._id;var i=new Date;a.timestamp=new Date(d(i.setHours(i.getHours()+7)).format("YYYY-MM-DD HH:mm:ss")),a.is_active=0,a.userid=this.user.id,this._dataService.post("/request/replaceOrderDetailBySampleId",a).subscribe(function(e){n.selectedTemplate=null,"ok"==e.result?(n._notifyService.showSuccess("en"==n.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),n.selectedTemplate0=null,n._updateSubTotal(e.data.sample_id),n.socket.emit("refresh",{}),n.loadDetailSampleOrder(e.data.sample_id),n.loadOrderDetailList(e.data.sample_id)):(n.selectedTemplate0=null,n._notifyService.showError("en"==n.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==n.user.lang?v.W.error_title_en:v.W.error_title))})}}},{key:"_currentTabClicked",value:function(e){console.log(e)}},{key:"popUpLanguage",value:function(e,t){this.choosePrintType=t,this.modalService.open(e,{size:"md",centered:!0})}},{key:"_print",value:function(e){1==this.choosePrintType&&this.printQuotationAsPDF(e),2==this.choosePrintType&&this.printBOAsPDF(e)}},{key:"printQuotationAsPDF",value:function(t){return(0,c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,i=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(a={}).id=this._id,this._dataService.post("/request/detailIn",a).subscribe(function(n){return(0,c.__awaiter)(i,void 0,void 0,regeneratorRuntime.mark(function a(){var i,o,r,l,s,c,u,g,p,_,m,f,Z,v,x,y,b,A,T,q,M,S,C,w,k,L,U,N,D,I,Y,J,O,Q,P,E,R,F,H,W,j,G,B,z,V,$,K,X,ee,te,ne,ae,ie,oe,re,le,se,ce,de,ue,ge,pe;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:console.log("KQ In",n),this.entity=n.data,i=n.data,o=new Date(i.received_date),r=new Date(o.getTime()+24*i.valid_number*60*60*1e3),d(r).format("DD/MM/YYYY"),l=d(o).format("DD/MM/YYYY"),(s=[]).push({text:"\n"}),c="en"==t?this.entity.company_name_e:this.entity.company_name_l,u="en"==t?this.entity.address_e:this.entity.address_l,g="en"==t?"Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 b\xe1o gi\xe1: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length),"0"==t&&(g="M\xe3 s\u1ed1 b\xe1o gi\xe1/ Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)),s.push({alignment:"justify",columns:[{text:[{text:c,bold:!0},"\n",{text:u},"\n",{text:this.entity.contact_name_sender,bold:!0},"\n",{text:null==this.entity.sender_phone?"":this.entity.sender_phone},"\n",{text:null==this.entity.email?"":this.entity.email}],style:"body_top"},{qr:g,foreground:"#20a8d8",fit:65,alignment:"right"}]}),p="en"==t?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,","0"==t&&(p="K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng/ Dear customers,"),_="en"==t?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.",0==t&&(_="Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry."),m="en"==t?"Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any).":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3).",0==t&&(m="Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3)/ Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any)."),f="en"==t?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",Z="en"==t?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",v="en"==t?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",x="en"==t?"QUOTATION":"B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M","0"==t&&(x="B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M\nQUOTATION"),s.push({text:"\n"}),s.push({table:{widths:["*"],body:[[{text:p,alignment:"left",style:"body_footer"}],[{text:_,alignment:"left",style:"body_footer"}],[{text:m,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),s.push({text:"\n"}),y=this.formatPipe.localeString(i.total),b="0.00",A=i.total*i.promo_perorder/100,T=this.formatPipe.localeString((i.total-A)*i.tax_vat/100),q=this.formatPipe.localeString(parseFloat(i.total)-A+(i.total-A)*i.tax_vat/100),null!=i.promo_special&&""!=i.promo_special&&(b=this.formatPipe.localeString(i.promo_special),T=this.formatPipe.localeString((i.total-i.promo_special-(A=(i.total-i.promo_special)*i.promo_perorder/100))*i.tax_vat/100),q=this.formatPipe.localeString(parseFloat(i.total)-parseFloat(i.promo_special)-A+(i.total-i.promo_special-A)*i.tax_vat/100)),M=this.formatPipe.localeString(A),S=1,!1,C="en"==t?"No.":"STT","0"==t&&(C="STT\nNo."),w="en"==t?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m","0"==t&&(w="Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m\nParameters"),k="en"==t?"Method":"Ph\u01b0\u01a1ng ph\xe1p","0"==t&&(k="Ph\u01b0\u01a1ng ph\xe1p\nMethod"),L="en"==t?"Note":"Ghi ch\xfa","0"==t&&(L="Ghi ch\xfa\nNote"),U="en"==t?"Unit price":"\u0110\u01a1n gi\xe1","0"==t&&(U="\u0110\u01a1n gi\xe1\nUnit price"),N="en"==t?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng","0"==t&&(N="S\u1ed1 l\u01b0\u1ee3ng\nQuantity"),"en"==t?"Discount":"Gi\u1ea3m gi\xe1","0"==t&&"Gi\u1ea3m gi\xe1Discount",D="en"==t?"Amount":"Th\xe0nh ti\u1ec1n","0"==t&&(D="Th\xe0nh ti\u1ec1n\nAmount"),I=e(i.orders_list.filter(function(e){return 2!=e.is_active}));try{for(I.s();!(Y=I.n()).done;)if((J=Y.value).orderdetail_list.length>0){s.push({table:{widths:[20,"*",120,100,50,50,60],body:[[{border:[!0,!0,!0,!0],text:{text:C,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:w,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:k,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:L,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:U,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:N,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:D,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}}),O=null==J.weight?"":J.weight,Q="en"==t?"Sample volume: "+O:"L\u01b0\u1ee3ng m\u1eabu: "+O,"0"==t&&(Q="L\u01b0\u1ee3ng m\u1eabu/ Sample volume: "+O),s.push({table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:S+". "+("0"==t?J.sample_name+"/ "+J.sample_name_e:"en"==t?J.sample_name_e:J.sample_name),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:{text:this.formatPipe.localeString(J.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:6,text:{text:Q,italics:!0,bold:!1},border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}}),P=[],E=1,R=[],F="en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",H="en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",W="en"==t?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)","0"==t&&(F="T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)/ Total (not incluled VAT)",H="T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)/ Total (incluled VAT)",W="Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)/ Discount on total orders (%)"),j=e(J.orderdetail_list);try{for(j.s();!(G=j.n()).done;){B=G.value,z=!1,"b709ca6e-2823-11eb-9a33-acde48001122"==B.department_id?(R.push(!0),z=!0):(R.push(!1),z=!1),V="",$=null==B.standards?[]:JSON.parse(B.standards),K=e($.filter(function(e){return null!=e}));try{for(K.s();!(X=K.n()).done;)null==(ee=X.value).id?null!=ee&&(V+="("+ee+")"):V+="("+ee.id+")"}catch(_e){K.e(_e)}finally{K.f()}te="en"==t?B.specification_ex_name_e:B.specification_ex_name_l,"0"==t&&(te=B.specification_ex_name_l+"/ "+B.specification_ex_name_e),P.push({STT:E,Para:[{text:te+" ",italics:z},{text:V,fontSize:8,italics:z}],Method:B.method,Note:B.comment_ext,Price:this.formatPipe.localeString(B.price*(1-(null==B.discount?0:B.discount)/100)),Qty:B.quantity,Amount:this.formatPipe.localeString(B.price*B.quantity*(1-(null==B.discount?0:B.discount)/100))}),E+=1}}catch(_e){j.e(_e)}finally{j.f()}s.push(this.tablePrintQuotation(P,["STT","Para","Method","Note","Price","Qty","Amount"],[20,"*",120,100,50,50,60],R)),ne=""!=i.title_promo_spec&&null!=i.title_promo_spec?i.title_promo_spec:"en"==t?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m","0"==t&&(ne=""!=i.title_promo_spec&&null!=i.title_promo_spec?i.title_promo_spec:"Gi\u1ea3m gi\xe1 cho nh\xf3m/ Discount on group"),S==i.orders_list.filter(function(e){return 2!=e.is_active}).length&&(!0,s.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:F,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:T,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:H,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:F,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:W,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:T,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:H,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:F,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:b,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:T,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:H,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:F,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:b,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:W,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:T,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:H,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}})),S+=1}}catch(_e){I.e(_e)}finally{I.f()}if(s.push({text:"\n"}),this.entity.standard_list.length>0){ae="",ie=e(this.entity.standard_list);try{for(ie.s();!(oe=ie.n()).done;)re=oe.value,le="("+re.id+") "+("en"==t?re.description_e:re.description_l),ae.includes(le)||(ae+=le+"\n")}catch(_e){ie.e(_e)}finally{ie.f()}s.push({text:ae,fontSize:8,italics:!0})}if(s.push({text:"\n"}),se="en"==t?"These prices are valid for one month if the quotation is accepted within one month.\nPayment period: on order.\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + Account number (VND): 15000168\n       + Bank name: Asia Commercial Bank\n       +Bank branch: Dong Sai Gon":"Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\n       + S\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",ce="en"==t?"Estimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.":"Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng",de="en"==t?"For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form":"N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.",0==t&&(se="Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1./ These prices are valid for one month if the quotation is accepted within one month.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng./ Payment period: on order.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + S\u1ed1 t\xe0i kho\u1ea3n/ Account number (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u/ Bank name: Asia Commercial Bank\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n/ Bank branch: Dong Sai Gon",ce="Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nEstimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.",de="N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.\n For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form."),s.push({text:se,fontSize:10}),s.push({text:"\n"}),s.push({text:ce,fontSize:8,italics:!0}),s.push({text:"\n"}),s.push({columns:[{width:"*",text:de,fontSize:10},{width:"*",qr:"http://phieuyeucauthunghiemtv.com",foreground:"#20a8d8",fit:45,alignment:"center"}]}),s.push({text:"\n"}),s.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:l+"\n"+("en"==t?"Valid by":"Ng\u01b0\u1eddi l\u1eadp b\xe1o gi\xe1"),alignment:"center",fontSize:10}]}),s.push({text:"\n"}),null==this.entity.signature_user){a.next=50;break}return ue=this.baseFolder+this.entity.signature_user,a.t0=s,a.t1={width:"*",text:"",fontSize:10},a.next=45,this._convertBase64ImageFromURL(ue);case 45:a.t2=a.sent,a.t3={width:"150",image:a.t2,alignment:"center"},a.t4=[a.t1,a.t3],a.t5={columns:a.t4},a.t0.push.call(a.t0,a.t5);case 50:return a.t6=[25,80,25,70],a.t7={fontSize:12,columnGap:20},a.t8=[{text:x,style:"title_top"},{text:"\n"},{text:g,alignment:"right",fontSize:13,bold:!0},s],a.t9=function(e,t){return d(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:Z+"\n"+f,alignment:"left",style:"body_footer"},{height:150,text:v,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},a.t10=function(e,t,n){return{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}},a.t11={header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},a.next=58,this._convertBase64ImageFromURL(this._logoPath);case 58:return a.t12=a.sent,a.next=61,this._convertBase64ImageFromURL(this._logoIsoPath);case 61:a.t13=a.sent,a.t14={myLogo:a.t12,myIso:a.t13},ge={pageSize:"A4",pageMargins:a.t6,defaultStyle:a.t7,content:a.t8,footer:a.t9,header:a.t10,styles:a.t11,images:a.t14},pe=(pe="'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),h().createPdf(ge).download(pe),h().createPdf(ge).open();case 66:case"end":return a.stop()}},a,this)}))});case 2:case"end":return n.stop()}},n,this)}))}},{key:"printBOAsPDF",value:function(t){return(0,c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,i=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(a={}).id=this._id,this._dataService.post("/request/detailIn",a).subscribe(function(n){return(0,c.__awaiter)(i,void 0,void 0,regeneratorRuntime.mark(function a(){var i,o,r,l,s,c,u,g,p,_,m,f,Z,v,x,y,b,A,T,q,M,S,C,w,k,L,U,N,D,I,Y,J,O,Q,P,E,R,F,H,W,j,G,B,z,V,$,K,X,ee,te,ne,ae,ie,oe,re,le,se,ce,de,ue,ge,pe,_e,he,me,fe,Ze,ve,xe,ye,be,Ae;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.entity=n.data,i=n.data,o=new Date(i.received_date),r=new Date(o.getTime()+24*i.valid_number*60*60*1e3),d(r).format("DD/MM/YYYY"),l=d(o).format("DD/MM/YYYY"),(s=[]).push({text:"\n"}),c=null==this.entity.company_receiver?this.entity.company_name_l:"en"==t?null==this.entity.company_receiver.company_name_e?this.entity.company_receiver.company_name_l:this.entity.company_receiver.company_name_e:this.entity.company_receiver.company_name_l,u=null==this.entity.company_receiver?null==this.entity.address_l?"":this.entity.address_l:"en"==t?null==this.entity.company_receiver.address_e?this.entity.company_receiver.address_l:this.entity.company_receiver.address_e:this.entity.company_receiver.address_l,g="en"==t?"Order code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 \u0111\u01a1n h\xe0ng: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length),s.push({alignment:"justify",columns:[{text:[{text:c,bold:!0},"\n",{text:u},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.contact_name?"":this.entity.contact_receiver.contact_name,bold:!0},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.phone||"-"==this.entity.contact_receiver.phone?"":this.entity.contact_receiver.phone},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.email?"":this.entity.contact_receiver.email}],style:"body_top"},{qr:g,foreground:"#20a8d8",fit:65,alignment:"right"}]}),p="en"==t?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,",_="en"==t?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.",m="en"==t?"Sac Ky Tien Phong Science & Technology JSC would like to confirm we received the sample provided by customers (please see attachment).":"C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong xin x\xe1c nh\u1eadn \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c m\u1eabu do qu\xfd kh\xe1ch h\xe0ng cung c\u1ea5p (vui l\xf2ng xem danh s\xe1ch \u0111\xednh k\xe8m).",f="en"==t?"Please check and confirm the information: sample name, sample description, parameters, etc\u2026 and notify us immediately in case corrections are needed. The information in this receipt will be used for outputting the testing report.":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra v\xe0 x\xe1c nh\u1eadn l\u1ea1i c\xe1c th\xf4ng tin: t\xean m\u1eabu, m\xf4 t\u1ea3 m\u1eabu, ch\u1ec9 ti\xeau ph\xe2n t\xedch, \u2026 v\xe0 th\xf4ng b\xe1o ngay cho ch\xfang t\xf4i trong tr\u01b0\u1eddng h\u1ee3p c\u1ea7n ch\u1ec9nh s\u1eeda. Nh\u1eefng th\xf4ng tin trong bi\xean nh\u1eadn n\xe0y s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho vi\u1ec7c xu\u1ea5t k\u1ebft qu\u1ea3.",Z="en"==t?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",v="en"==t?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",x="en"==t?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",y="en"==t?"RECEIPT":"BI\xcaN NH\u1eacN",s.push({text:"\n"}),s.push({table:{widths:["*"],body:[[{text:p,alignment:"left",style:"body_footer"}],[{text:_,alignment:"left",style:"body_footer"}],[{text:m,alignment:"left",style:"body_footer"}],[{text:f,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),s.push({text:"\n"}),b=this.formatPipe.localeString(i.total),A="0.00",T=i.total*i.promo_perorder/100,q=this.formatPipe.localeString((i.total-T)*i.tax_vat/100),M=this.formatPipe.localeString(parseFloat(i.total)-T+(i.total-T)*i.tax_vat/100),null!=i.promo_special&&""!=i.promo_special&&(A=this.formatPipe.localeString(i.promo_special),q=this.formatPipe.localeString((i.total-i.promo_special-(T=(i.total-i.promo_special)*i.promo_perorder/100))*i.tax_vat/100),M=this.formatPipe.localeString(parseFloat(i.total)-parseFloat(i.promo_special)-T+(i.total-i.promo_special-T)*i.tax_vat/100)),S=this.formatPipe.localeString(T),C=1,w="en"==t?"No.":"STT",k="en"==t?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m",L="en"==t?"Method":"Ph\u01b0\u01a1ng ph\xe1p ",U="en"==t?"Unit price":"\u0110\u01a1n gi\xe1",N="en"==t?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng",D="en"==t?"Amount":"Th\xe0nh ti\u1ec1n",I="en"==t?"Sample code: ":"M\xe3 m\u1eabu: ",Y="en"==t?"Sample description: ":"T\xecnh tr\u1ea1ng m\u1eabu: ",J="en"==t?"Amount of samples: ":"Kh\u1ed1i l\u01b0\u1ee3ng m\u1eabu: ",O="en"==t?"Date of receiving samples: "+d(new Date(i.received_date)).format("DD/MM/YYYY"):"Ng\xe0y nh\u1eadn m\u1eabu: "+d(new Date(i.received_date)).format("DD/MM/YYYY"),Q=e(i.orders_list.filter(function(e){return 2!=e.is_active}));try{for(Q.s();!(P=Q.n()).done;){E=P.value,R="en"==t?"Client estimated due date: "+d(new Date(E.estimated_date)).format("DD/MM/YYYY"):"Ng\xe0y d\u1ef1 ki\u1ebfn tr\u1ea3 k\u1ebft qu\u1ea3: "+d(new Date(E.estimated_date)).format("DD/MM/YYYY"),s.push({table:{headerRows:1,widths:[30,"*","*",50,50,110],body:[[{border:[!0,!0,!0,!0],text:{text:w,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:k,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:L,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:U,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:N,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:D,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}}),F=null==E.weight?"":E.weight,s.push({table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:C+". "+E.sample_name,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{text:{text:this.formatPipe.localeString(E.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:5,text:I+(null==E.inner_code?"":E.inner_code),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:Y+(null==E.description?"":E.description),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:J+": "+F,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:O,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:R,border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}}),H=[],W=1,j=[],G=e(E.orderdetail_list);try{for(G.s();!(B=G.n()).done;){z=B.value,V=!1,"b709ca6e-2823-11eb-9a33-acde48001122"==z.department_id?(j.push(!0),V=!0):(j.push(!1),V=!1),$="",K=null==z.standards?[]:JSON.parse(z.standards),X=e(K.filter(function(e){return null!=e}));try{for(X.s();!(ee=X.n()).done;)null==(te=ee.value).id?null!=te&&($+="("+te+")"):$+="("+te.id+")"}catch(Te){X.e(Te)}finally{X.f()}H.push({STT:W,Para:[{text:("en"==t?z.specification_ex_name_e:z.specification_ex_name_l)+" ",italics:V},{text:$,fontSize:8,italics:V}],Method:z.method,Price:this.formatPipe.localeString(z.price*(1-(null==z.discount?0:z.discount)/100)),Qty:z.quantity,Amount:this.formatPipe.localeString(z.price*z.quantity*(1-(null==z.discount?0:z.discount)/100))}),W+=1}}catch(Te){G.e(Te)}finally{G.f()}s.push(this.tablePrintQuotationa(H,["STT","Para","Method","Price","Qty","Amount"],[30,"*","*",50,50,110],j)),ne=""!=i.title_promo_spec&&null!=i.title_promo_spec?i.title_promo_spec:"en"==t?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m",C==i.orders_list.filter(function(e){return 2!=e.is_active}).length&&s.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:b,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:b,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:b,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:A,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:b,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:A,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:q,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}),C+=1}}catch(Te){Q.e(Te)}finally{Q.f()}if(this.entity.standard_list.length>0){ae="",ie=e(this.entity.standard_list);try{for(ie.s();!(oe=ie.n()).done;)re=oe.value,le="("+re.id+") "+("en"==t?re.description_e:re.description_l),ae.includes(le)||(ae+=le+"\n")}catch(Te){ie.e(Te)}finally{ie.f()}s.push({text:ae,fontSize:8,italics:!0})}s.push({text:"\n"}),se="en"==t?"BILLING INFORMATION :":"Th\xf4ng tin xu\u1ea5t ho\xe1 \u0111\u01a1n :",ce="en"==t?"Bank transfer information :":"Th\xf4ng tin chuy\u1ec3n kho\u1ea3n :",de="en"==t?"Account name: CONG TY CP KHCN SAC KY TIEN PHONG\nAccount number (VND): 15000168\nBank name: Asia Commercial Bank Bank branch: Dong Sai Gon":"T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\nS\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\nNg\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\nChi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",ue="en"==t?"Company\u2019s name: ":"T\xean c\xf4ng ty: ",ge="en"==t?"Address: ":"\u0110\u1ecba ch\u1ec9: ",pe="en"==t?"Tax number: ":"M\xe3 s\u1ed1 thu\u1ebf: ",_e=null==this.entity.company_bill?c:this.entity.company_bill.company_name_l,he=null==this.entity.company_bill?Z:null==this.entity.company_bill.address_l?"":this.entity.company_bill.address_l,me=null==this.entity.company_bill?this.entity.tax_code:null==this.entity.company_bill.tax_code?"":this.entity.company_bill.tax_code,fe=i.orders_list.filter(function(e){return null!=e.note&&""!=e.note}),Ze=0,"",ve=e(fe);try{for(ve.s();!(xe=ve.n()).done;)ye=xe.value,Ze<=ye.note.length&&(ye.note,Ze=ye.note.length)}catch(Te){ve.e(Te)}finally{ve.f()}if(s.push({table:{widths:["*","*"],body:[[{border:[!0,!0,!0,!1],text:{text:se,bold:!0},style:"body_footer",alignment:"left"},{border:[!0,!0,!0,!1],text:{text:ce,bold:!0},style:"body_footer",alignment:"left"}],[{border:[!0,!1,!0,!0],text:{text:ue+_e+"\n"+ge+he+"\n"+pe+me,bold:!1},style:"body_footer",alignment:"left"},{border:[!0,!1,!0,!0],text:{text:de,bold:!1},style:"body_footer",alignment:"left"}]]},layout:{defaultBorder:!1}}),s.push({text:"\n"}),s.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:l+"\n"+("en"==t?"Valid by":"Ng\u01b0\u1eddi l\u1eadp bi\xean nh\u1eadn"),alignment:"center",fontSize:10}]}),s.push({text:"\n"}),null==this.entity.signature_user){a.next=31;break}return be=this.baseFolder+this.entity.signature_user,a.t0=s,a.t1={width:"*",text:"",fontSize:10},a.next=26,this._convertBase64ImageFromURL(be);case 26:a.t2=a.sent,a.t3={width:"150",image:a.t2,alignment:"center"},a.t4=[a.t1,a.t3],a.t5={columns:a.t4},a.t0.push.call(a.t0,a.t5);case 31:return a.t6=[25,80,25,70],a.t7={fontSize:12,columnGap:20},a.t8=[{text:y,style:"title_top"},{text:"\n"},{text:g,alignment:"right",fontSize:13,bold:!0},s],a.t9=function(e,t){return d(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:v+"\n"+Z,alignment:"left",style:"body_footer"},{height:150,text:x,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},a.t10=function(e,t,n){return{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}},a.t11={header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},a.next=39,this._convertBase64ImageFromURL(this._logoPath);case 39:return a.t12=a.sent,a.next=42,this._convertBase64ImageFromURL(this._logoIsoPath);case 42:a.t13=a.sent,a.t14={myLogo:a.t12,myIso:a.t13},Ae={pageSize:"A4",pageMargins:a.t6,defaultStyle:a.t7,content:a.t8,footer:a.t9,header:a.t10,styles:a.t11,images:a.t14},("'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),h().createPdf(Ae).open();case 47:case"end":return a.stop()}},a,this)}))});case 2:case"end":return n.stop()}},n,this)}))}},{key:"tablePrintQuotation",value:function(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,a)}}}},{key:"buildTableBodyPrintQuotation",value:function(e,t,n){var a=[],i=0;return e.forEach(function(e){var o=[],r=1;t.forEach(function(t){o.push({text:{text:e[t]},alignment:2==r||3==r||4==r?"left":5==r||7==r?"right":"center",fontSize:10,italics:2==r&&n[i]}),r+=1,i+=1}),a.push(o)}),a}},{key:"tablePrintQuotationa",value:function(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotationa(e,t,a)}}}},{key:"buildTableBodyPrintQuotationa",value:function(e,t,n){var a=[],i=0;return e.forEach(function(e){var o=[],r=1;t.forEach(function(t){o.push({text:{text:e[t]},alignment:2==r||3==r?"left":4==r||6==r?"right":"center",fontSize:10,italics:2==r&&n[i]}),r+=1,i+=1}),a.push(o)}),a}},{key:"_convertBase64ImageFromURL",value:function(e){return new Promise(function(t,n){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=function(e){n(e)},a.src=e})}},{key:"loadImgs",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",t).subscribe(function(t){return(0,c.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._logoPath+=t.data.filter(function(e){return"logo-stp"==e.file_name_e})[0].path_file,this._logoIsoPath+=t.data.filter(function(e){return"logo-iso"==e.file_name_e})[0].path_file;case 1:case"end":return e.stop()}},e,this)}))})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}},{key:"createImageFromBlob",value:function(e){var t=this,n=new FileReader;n.addEventListener("load",function(){t.imageToShow=n.result},!1),e&&n.readAsDataURL(e)}},{key:"loadSampleNature",value:function(){var t=this;this._dataService.post("/sample_matrix/getallsamplenaturenopaging",{short_code:this.user.short_code}).subscribe(function(n){console.log(n);var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({id:r.id,name:"en"==t.user.lang?r.name_e:r.name_l})}}catch(l){o.e(l)}finally{o.f()}t._samplenatures=i})}},{key:"exportQuotationExcel",value:function(){var t=this;this._dataService.post("/request/detailIn",{id:this._id}).subscribe(function(n){return(0,c.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var a,i,o,r,l,s,c,u,g,p,_,h,m,f,Z,x,y,b,A,T,q;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[],i=1,o=e(n.data.orders_list.filter(function(e){return 2!=e.is_active}));try{for(o.s();!(r=o.n()).done;){l=r.value,a.push({"No.":i+". "+(null==l.sample_name_e?l.sample_name:l.sample_name_e),Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(parseFloat(l.total_sub))}),a.push({"No.":"Sample volume: "+(null==l.weight?"":l.weight),Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),s=1,c=e(l.orderdetail_list);try{for(c.s();!(u=c.n()).done;)g=u.value,a.push({"No.":s,Parameters:g.specification_ex_name_l,Method:g.method,Note:g.comment_ext,"Unit Price":this.formatPipe.localeString(parseFloat(g.price)),Quantity:g.quantity,Discount:g.discount+"%",Amount:this.formatPipe.localeString(parseFloat(g.price)*parseInt(g.quantity)*(1-parseFloat(null==g.discount?0:g.discount)/100))}),s+=1}catch(M){c.e(M)}finally{c.f()}i+=1}}catch(M){o.e(M)}finally{o.f()}a.push({"No.":"Total (before tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(n.data.total)}),null==n.data.promo_special?null==n.data.promo_perorder?(p=parseFloat(n.data.total)*parseFloat(n.data.tax_vat)/100,_=Math.round(parseFloat(n.data.total)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeStringEn(p)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(_)})):(h=parseFloat(n.data.total)*parseFloat(n.data.promo_perorder)/100,m=(parseFloat(n.data.total)-h)*parseFloat(n.data.tax_vat)/100,f=Math.round((parseFloat(n.data.total)-h)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on parameters",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.promo_perorder+"%",Amount:this.formatPipe.localeString(h)}),a.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(m)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(f)})):null==n.promo_perorder?(Z=parseFloat(n.data.promo_special),x=(parseFloat(n.data.total)-Z)*parseFloat(n.data.tax_vat)/100,y=Math.round((parseFloat(n.data.total)-Z)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on group",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(Z),Amount:this.formatPipe.localeString(Z)}),a.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(x)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(y)})):(b=parseFloat(n.data.promo_special),A=parseFloat(n.data.total)*parseFloat(n.data.promo_perorder)/100,T=(parseFloat(n.data.total)-b-A)*parseFloat(n.data.tax_vat)/100,q=Math.round((parseFloat(n.data.total)-b-A)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on group",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(b),Amount:this.formatPipe.localeString(b)}),a.push({"No.":"Discount on parameters",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.promo_perorder+"%",Amount:this.formatPipe.localeString(A)}),a.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(T)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(q)})),this._excelService.exportAsExcelFile(a,"Requests-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_EXPORT_EN+" "+a.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+a.length+" "+v.W.record,"OK");case 5:case"end":return t.stop()}},t,this)}))})}},{key:"exportBOExcel",value:function(){var t=this;this._dataService.post("/request/detailIn",{id:this._id}).subscribe(function(n){return(0,c.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var a,i,o,r,l,s,c,u,g,p,_,h,m,f,Z,x,y,b,A,T,q;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[],i=1,o=e(n.data.orders_list.filter(function(e){return 2!=e.is_active}));try{for(o.s();!(r=o.n()).done;){l=r.value,a.push({"No.":i+". "+(null==l.sample_name_e?l.sample_name:l.sample_name_e),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(parseFloat(l.total_sub))}),a.push({"No.":"Sample code: "+(null==l.sample_code?"":l.sample_code),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),a.push({"No.":"Sample description: "+(null==l.description_e&&null==l.description?"":l.description),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),a.push({"No.":"Sample volume: "+(null==l.weight?"":l.weight),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),a.push({"No.":"Received date: "+d(new Date(n.data.received_date)).format("DD/MM/YYYY"),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),a.push({"No.":"Returned date: "+d(new Date(n.data.returned_date)).format("DD/MM/YYYY"),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),s=1,c=e(l.orderdetail_list);try{for(c.s();!(u=c.n()).done;)g=u.value,a.push({"No.":s,Parameters:g.specification_ex_name_l,Method:g.method,"Unit Price":this.formatPipe.localeString(parseFloat(g.price)),Quantity:g.quantity,Discount:g.discount+"%",Amount:this.formatPipe.localeString(parseFloat(g.price)*parseInt(g.quantity)*(1-parseFloat(null==g.discount?0:g.discount)/100))}),s+=1}catch(M){c.e(M)}finally{c.f()}i+=1}}catch(M){o.e(M)}finally{o.f()}a.push({"No.":"Total (before tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(n.data.total)}),null==n.data.promo_special?null==n.data.promo_perorder?(p=parseFloat(n.data.total)*parseFloat(n.data.tax_vat)/100,_=Math.round(parseFloat(n.data.total)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeStringEn(p)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(_)})):(h=parseFloat(n.data.total)*parseFloat(n.data.promo_perorder)/100,m=(parseFloat(n.data.total)-h)*parseFloat(n.data.tax_vat)/100,f=Math.round((parseFloat(n.data.total)-h)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on parameters",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.promo_perorder+"%",Amount:this.formatPipe.localeString(h)}),a.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(m)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(f)})):null==n.promo_perorder?(Z=parseFloat(n.data.promo_special),x=(parseFloat(n.data.total)-Z)*parseFloat(n.data.tax_vat)/100,y=Math.round((parseFloat(n.data.total)-Z)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on group",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(Z),Amount:this.formatPipe.localeString(Z)}),a.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(x)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(y)})):(b=parseFloat(n.data.promo_special),A=parseFloat(n.data.total)*parseFloat(n.data.promo_perorder)/100,T=(parseFloat(n.data.total)-b-A)*parseFloat(n.data.tax_vat)/100,q=Math.round((parseFloat(n.data.total)-b-A)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on group",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(b),Amount:this.formatPipe.localeString(b)}),a.push({"No.":"Discount on parameters",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.promo_perorder+"%",Amount:this.formatPipe.localeString(A)}),a.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(T)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(q)})),this._excelService.exportAsExcelFile(a,"BO-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_EXPORT_EN+" "+a.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+a.length+" "+v.W.record,"OK");case 5:case"end":return t.stop()}},t,this)}))})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(x.Y36(y.e),x.Y36(b.D),x.Y36(s.F0),x.Y36(A.c),x.Y36(T.C),x.Y36(q.x),x.Y36(s.gz),x.Y36(tn.t),x.Y36($e.p),x.Y36(M.FF))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-req-detail"]],decls:81,vars:48,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","button","routerLink","/request/list",1,"btn","btn-sm","btn-primary","mr-sm-2"],["ngbDropdown","","class","btn-group","role","group",4,"ngIf"],[1,"card-body"],[1,"col-xl-3","xl-100"],["type","number","min","0","name","number_sample",1,"form-control","form-control-sm",3,"ngModel","disabled","ngModelChange","change"],[1,"text-danger"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"btn-group","flex-wrap"],[4,"ngFor","ngForOf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[4,"ngIf"],["class","form theme-form",4,"ngIf"],["contentLanguage",""],["contentComment",""],["ngbDropdown","","role","group",1,"btn-group"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[1,"dropdown-item",3,"click"],["type","button",3,"ngClass","click"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],[1,"form","theme-form"],[1,"col"],[1,"form-group","row"],[1,"col-md-3","col-form-label",3,"for"],[1,"col-md-3"],["type","text",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change","keypress.enter"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["type","text","disabled","",1,"form-control","jdisabled",3,"id","placeholder","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","disabled","ngModelChange","change"],["name","_status",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["value","0"],["value","1"],["value","2"],[1,"col-md-3",3,"for"],["bindValue","id","bindLabel","name",3,"items","name","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["ng-option-tmp",""],["name","selectedCategory0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","placeholder","notFoundText","ngModelChange","change"],["name","selectedSpecification0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["type","number",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change"],[1,"col-md-3","col-form-label"],["name","selectedTemplate0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["href","javascript:;",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-secondary"],["colspan","16",1,"text-right"],[1,"table-primary"],[2,"width","50px"],[2,"width","100px"],[1,"fa","fa-trash"],["scope","col"],["container","body",3,"ngbTooltip"],["href","javascript:;",3,"click"],["href","javascript:;","class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],[3,"ngClass","ngbTooltip","click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[3,"ngClass"],[2,"cursor","pointer",3,"click"],["type","number","min","0",2,"width","65px",3,"name","ngModel","ngClass","disabled","ngModelChange","change"],["type","checkbox",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],["href","javascript:;",1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[3,"ngClass","ngbTooltip","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],["type","text",3,"name","ngModel","ngClass","disabled","ngModelChange"],["type","text","min","0","mask","separator.2","thousandSeparator",",",3,"name","ngModel","ngClass","disabled","ngModelChange"],["type","number","min","0",3,"name","ngModel","ngClass","disabled","ngModelChange"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"form-group"],["for","takenote"],["id","takenote","rows","3","name","takenote",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["href","javascript:;",1,"btn","btn-light",3,"click"],["href","javascript:;","class","btn btn-primary",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["href","javascript:;",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"div",1),x.TgZ(6,"div",5),x.TgZ(7,"div",6),x.TgZ(8,"button",7),x._uU(9),x.ALo(10,"translate"),x.qZA(),x.YNc(11,an,17,15,"div",8),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(12,"div",9),x.TgZ(13,"div",1),x.TgZ(14,"div",10),x.TgZ(15,"strong"),x._uU(16),x.ALo(17,"translate"),x.qZA(),x.qZA(),x.TgZ(18,"div",10),x._uU(19),x.qZA(),x.TgZ(20,"div",10),x.TgZ(21,"strong"),x._uU(22),x.ALo(23,"translate"),x.qZA(),x.qZA(),x.TgZ(24,"div",10),x._uU(25),x.qZA(),x.TgZ(26,"div",10),x.TgZ(27,"strong"),x._uU(28),x.ALo(29,"translate"),x.qZA(),x.qZA(),x.TgZ(30,"div",10),x._uU(31),x.ALo(32,"date"),x.qZA(),x.TgZ(33,"div",10),x.TgZ(34,"strong"),x._uU(35),x.ALo(36,"translate"),x.qZA(),x.qZA(),x.TgZ(37,"div",10),x._uU(38),x.ALo(39,"date"),x.qZA(),x.TgZ(40,"div",10),x.TgZ(41,"strong"),x._uU(42),x.ALo(43,"translate"),x.qZA(),x.qZA(),x.TgZ(44,"div",10),x.TgZ(45,"input",11),x.NdJ("ngModelChange",function(e){return t.entity.number_sample=e})("change",function(){return t._updateSampleNo()}),x.qZA(),x.qZA(),x.TgZ(46,"div",10),x.TgZ(47,"strong"),x._uU(48),x.ALo(49,"translate"),x.qZA(),x.qZA(),x.TgZ(50,"div",10),x._uU(51),x.qZA(),x.TgZ(52,"div",10),x.TgZ(53,"strong"),x._uU(54),x.ALo(55,"translate"),x.qZA(),x.qZA(),x.TgZ(56,"div",10),x.TgZ(57,"strong"),x._uU(58),x.qZA(),x.qZA(),x.TgZ(59,"div",10),x.TgZ(60,"strong"),x._uU(61),x.ALo(62,"translate"),x.qZA(),x.qZA(),x.TgZ(63,"div",10),x.TgZ(64,"strong",12),x._uU(65),x.ALo(66,"number"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(67,"div",2),x.TgZ(68,"div",3),x.TgZ(69,"div",4),x.TgZ(70,"div",1),x.TgZ(71,"div",13),x.TgZ(72,"div",14),x.YNc(73,on,4,5,"ng-container",15),x.qZA(),x.qZA(),x.TgZ(74,"div",16),x.YNc(75,ln,2,1,"ng-container",17),x.qZA(),x.qZA(),x.qZA(),x.YNc(76,Qn,169,222,"form",18),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(77,Pn,18,9,"ng-template",null,19,x.W1O),x.YNc(79,Fn,22,13,"ng-template",null,20,x.W1O)),2&e&&(x.xp6(9),x.hij(" ",x.lcZ(10,22,"Go back")," "),x.xp6(2),x.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","print")),x.xp6(5),x.Oqu(x.lcZ(17,24,"Company")),x.xp6(3),x.hij(" ","en"==t.user.lang?t.entity.company_name_e:t.entity.company_name_l," "),x.xp6(3),x.Oqu(x.lcZ(23,26,"Contact")),x.xp6(3),x.hij(" ",t.entity.contact_name," "),x.xp6(3),x.Oqu(x.lcZ(29,28,"Received date")),x.xp6(3),x.hij(" ",x.xi3(32,30,t.entity.received_date,"dd/MM/yyyy HH:mm")," "),x.xp6(4),x.Oqu(x.lcZ(36,33,"Returned date")),x.xp6(3),x.hij(" ",x.xi3(39,35,t.entity.returned_date,"dd/MM/yyyy HH:mm")," "),x.xp6(4),x.Oqu(x.lcZ(43,38,"Number of sample")),x.xp6(3),x.Q6J("ngModel",t.entity.number_sample)("disabled",0!=t.entity.is_active||!t._authenService.hasPermission("REQ-LIST","create")),x.xp6(3),x.Oqu(x.lcZ(49,40,"Created by")),x.xp6(3),x.hij(" ",t.entity.created_by," "),x.xp6(3),x.Oqu(x.lcZ(55,42,"Request code")),x.xp6(4),x.Oqu(t.entity.request_no),x.xp6(3),x.Oqu(x.lcZ(62,44,"Total")),x.xp6(4),x.hij("",null==t.entity.total||"NaN"==t.entity.total?0:x.lcZ(66,46,t.entity.total)," (VND)"),x.xp6(8),x.Q6J("ngForOf",t._xList),x.xp6(2),x.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","create")),x.xp6(1),x.Q6J("ngIf",0!=t._currentTabActivated))},directives:[s.rH,r.O5,l.qQ,l.wV,l.Fj,l.JJ,l.On,r.sg,M.jt,M.iD,M.Vi,r.mk,l._Y,l.JL,l.F,l.EJ,l.YN,l.Kr,w.w9,w.Z2,M._L,l.Wl,nn.hx],pipes:[k.X$,r.uU,r.JJ,r.OU],styles:[""]}),t}();function Wn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",46),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(),t=x.MAs(108);return e._openModal(t,null)}),x._uU(1),x.ALo(2,"translate"),x.qZA()}2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Add new request")," "))}function jn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",47),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(),t=x.MAs(114);return e._exportAllRangeWithStatus(t)}),x._UZ(1,"i",48),x._uU(2),x.ALo(3,"translate"),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,1,"Export")," "))}function Gn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",49),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(),t=x.MAs(112);return e.openCopyModal(t,e.exportList,1)}),x._UZ(1,"i",50),x._uU(2),x.ALo(3,"translate"),x.ALo(4,"translate"),x.qZA()}2&e&&(x.xp6(2),x.AsE(" ",x.lcZ(3,2,"Copy")," ",x.lcZ(4,4,"All")," "))}function Bn(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",51),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(),t=x.MAs(116);return e.openTemplateModal(t)}),x._UZ(1,"i",52),x._uU(2),x.ALo(3,"translate"),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,1,"Request template")," "))}function zn(e,t){1&e&&x._UZ(0,"img",53)}function Vn(e,t){1&e&&(x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",54),x.TgZ(3,"h3",55),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.qZA(),x.BQk()),2&e&&(x.xp6(4),x.hij(" ",x.lcZ(5,1,"No records now!!!")," "))}function $n(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",68),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit,t=x.oxw(2),a=x.MAs(108);return t._openModal(a,e)}),x.ALo(1,"translate"),x._UZ(2,"i",69),x.qZA()}if(2&e){var a=x.oxw(3);x.MGl("ngbTooltip","\n                          ",x.lcZ(1,2,"Edit"),"\n                          "),x.Q6J("disabled",!a._authenService.hasPermission("REQ-LIST","update"))}}function Kn(e,t){if(1&e&&(x.TgZ(0,"strong"),x._uU(1),x.ALo(2,"number"),x.qZA()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.Oqu(x.lcZ(2,1,n.total))}}function Xn(e,t){if(1&e&&(x.TgZ(0,"i"),x._uU(1),x.ALo(2,"number"),x.qZA()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.Oqu(x.lcZ(2,1,n.total_estimated))}}function ea(e,t){1&e&&(x.TgZ(0,"span",70),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Pending")))}function ta(e,t){1&e&&(x.TgZ(0,"span",71),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Confirmed")))}function na(e,t){1&e&&(x.TgZ(0,"span",72),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Cancel")))}function aa(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"th",57),x._uU(2),x.qZA(),x.TgZ(3,"th",57),x.TgZ(4,"input",58),x.NdJ("change",function(e){var t=x.CHM(n).$implicit;return x.oxw(2).selectItem(e,t.id)}),x.qZA(),x.qZA(),x.TgZ(5,"td"),x.TgZ(6,"button",59),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return x.oxw(2)._routeDetail(e)}),x.ALo(7,"translate"),x._UZ(8,"i",60),x.qZA(),x.YNc(9,$n,3,4,"button",61),x.TgZ(10,"button",62),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw(2),a=x.MAs(112);return t.openCopyModal(a,e,0)}),x.ALo(11,"translate"),x._UZ(12,"i",50),x.qZA(),x.qZA(),x.TgZ(13,"td"),x._uU(14),x.qZA(),x.TgZ(15,"td"),x._uU(16),x.qZA(),x.TgZ(17,"td"),x._uU(18),x.ALo(19,"date"),x.qZA(),x.TgZ(20,"td"),x.TgZ(21,"span",63),x._uU(22),x.qZA(),x.qZA(),x.TgZ(23,"td"),x._uU(24),x.qZA(),x.TgZ(25,"td",64),x.YNc(26,Kn,3,3,"strong",39),x.YNc(27,Xn,3,3,"i",39),x.qZA(),x.TgZ(28,"td"),x._uU(29),x.qZA(),x.TgZ(30,"td"),x._uU(31),x.ALo(32,"date"),x.qZA(),x.TgZ(33,"td"),x.YNc(34,ea,3,3,"span",65),x.YNc(35,ta,3,3,"span",66),x.YNc(36,na,3,3,"span",67),x.qZA(),x.TgZ(37,"td"),x._uU(38),x.ALo(39,"date"),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(2),x.hij(" ",i+1+o.pageSize*(o.pageIndex-1)," "),x.xp6(2),x.MGl("name","ckU",i+1,""),x.Q6J("checked",o.exportList.includes(a.id)),x.xp6(2),x.MGl("ngbTooltip","\n                          ",x.lcZ(7,22,"View detail"),"\n                          "),x.Q6J("disabled",!o._authenService.hasPermission("REQ-LIST","read")),x.xp6(3),x.Q6J("ngIf",a.is_active<=2),x.xp6(1),x.MGl("ngbTooltip","\n                          ",x.lcZ(11,24,"Copy"),"\n                          "),x.Q6J("disabled",!o._authenService.hasPermission("REQ-LIST","update")),x.xp6(4),x.hij(" ",a.request_no," "),x.xp6(2),x.Oqu(a.order_no),x.xp6(2),x.Oqu(x.xi3(19,26,a.received_date,"dd/MM/yyyy HH:mm")),x.xp6(3),x.Q6J("ngbTooltip",a.note),x.xp6(1),x.Oqu("en"==o.user.lang?a.company_name_e:a.company_name_l),x.xp6(2),x.hij(" ","en"==o.user.lang?a.receive_company_e:a.receive_company_l," "),x.xp6(2),x.Q6J("ngIf",1==a.is_active),x.xp6(1),x.Q6J("ngIf",1!=a.is_active),x.xp6(2),x.Oqu(a.contact_name),x.xp6(2),x.Oqu(x.xi3(32,29,a.returned_date,"dd/MM/yyyy HH:mm")),x.xp6(3),x.Q6J("ngIf",0==a.is_active),x.xp6(1),x.Q6J("ngIf",0!=a.is_active&&2!=a.is_active),x.xp6(1),x.Q6J("ngIf",2==a.is_active),x.xp6(2),x.Oqu(x.xi3(39,32,a.timestamp,"dd/MM/yyyy HH:mm"))}}function ia(e,t){if(1&e&&(x.ynx(0),x.YNc(1,aa,40,35,"tr",56),x.BQk()),2&e){var n=x.oxw();x.xp6(1),x.Q6J("ngForOf",n._requestslist)}}function oa(e,t){if(1&e&&(x.TgZ(0,"small",115),x._uU(1),x.qZA()),2&e){var n=x.oxw(2);x.xp6(1),x.Oqu(n.selectedCustomerLabel)}}function ra(e,t){1&e&&(x.ynx(0),x.TgZ(1,"a",116),x._UZ(2,"img",117),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.BQk()),2&e&&(x.xp6(3),x.hij(" ",x.lcZ(4,1,"Processing")," "))}function la(e,t){1&e&&(x.TgZ(0,"button",118),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Save & close")," "))}var sa=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function ca(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",73,74),x.NdJ("ngSubmit",function(){x.CHM(n);var e=x.oxw();return e.saveChange(e.selectedCustomer)}),x.TgZ(2,"div",75),x.TgZ(3,"h4",76),x._uU(4),x.ALo(5,"translate"),x.ALo(6,"translate"),x.qZA(),x.TgZ(7,"button",77),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(8,"span",78),x._uU(9,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(10,"div",79),x.TgZ(11,"div",80),x.TgZ(12,"div",81),x.TgZ(13,"div",82),x.TgZ(14,"label",83),x._uU(15),x.ALo(16,"translate"),x.TgZ(17,"span",55),x._uU(18,"(*)"),x.qZA(),x.qZA(),x.TgZ(19,"input",84),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.number_sample=e}),x.ALo(20,"translate"),x.qZA(),x.TgZ(21,"input",85),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.id=e}),x.qZA(),x.qZA(),x.qZA(),x.TgZ(22,"div",86),x.TgZ(23,"div",82),x.TgZ(24,"label",87),x._uU(25,"VAT (%) "),x.TgZ(26,"span",55),x._uU(27,"(*)"),x.qZA(),x.qZA(),x.TgZ(28,"input",88),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.tax_vat=e}),x.qZA(),x.qZA(),x.qZA(),x.TgZ(29,"div",86),x.TgZ(30,"div",82),x.TgZ(31,"label",89),x._uU(32),x.ALo(33,"translate"),x.qZA(),x.TgZ(34,"div",90),x.TgZ(35,"input",91),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.is_issue_bill=e}),x.qZA(),x._UZ(36,"label",89),x.qZA(),x.qZA(),x.qZA(),x.TgZ(37,"div",92),x.TgZ(38,"div",82),x.TgZ(39,"label",93),x._uU(40),x.ALo(41,"translate"),x.qZA(),x.TgZ(42,"input",94),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.title_promo_spec=e}),x.ALo(43,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(44,"div",81),x.TgZ(45,"div",82),x.TgZ(46,"label",95),x._uU(47),x.ALo(48,"translate"),x.qZA(),x.TgZ(49,"input",96),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.promo_special=e}),x.ALo(50,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(51,"div",81),x.TgZ(52,"div",82),x.TgZ(53,"label",97),x._uU(54),x.ALo(55,"translate"),x.qZA(),x.TgZ(56,"input",98),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.promo_perorder=e})("change",function(){x.CHM(n);var e=x.oxw();return e._switchPercent(e.entity.promo_perorder)}),x.ALo(57,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(58,"div",92),x.TgZ(59,"div",82),x.TgZ(60,"label",99),x._uU(61),x.ALo(62,"translate"),x.TgZ(63,"span",55),x._uU(64,"(*)"),x.qZA(),x.qZA(),x.TgZ(65,"ng-select",100),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().selectedCustomer=e})("change",function(){return x.CHM(n),x.oxw()._getInfoLabelCustomer()}),x.ALo(66,"translate"),x.ALo(67,"translate"),x.qZA(),x.YNc(68,oa,2,1,"small",101),x.qZA(),x.qZA(),x.TgZ(69,"div",81),x.TgZ(70,"div",82),x.TgZ(71,"label",102),x._uU(72),x.ALo(73,"translate"),x.TgZ(74,"span",55),x._uU(75,"(*)"),x.qZA(),x.qZA(),x.TgZ(76,"input",103),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw()._fdate=e})("bsValueChange",function(e){return x.CHM(n),x.oxw().orgValueChange1(e)}),x.ALo(77,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(78,"div",81),x.TgZ(79,"div",82),x.TgZ(80,"label",104),x._uU(81),x.ALo(82,"translate"),x.TgZ(83,"span",55),x._uU(84,"(*)"),x.qZA(),x.qZA(),x.TgZ(85,"input",105),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw()._tdate=e})("bsValueChange",function(e){return x.CHM(n),x.oxw().orgValueChange2(e)}),x.ALo(86,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(87,"div",81),x.TgZ(88,"div",82),x.TgZ(89,"label",106),x._uU(90),x.ALo(91,"translate"),x.qZA(),x.TgZ(92,"input",107),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.valid_number=e})("change",function(){return x.CHM(n),x.oxw()._calculateDays()}),x.ALo(93,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(94,"div",81),x.TgZ(95,"div",82),x.TgZ(96,"label",108),x._uU(97),x.ALo(98,"translate"),x.qZA(),x.TgZ(99,"select",109),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.is_active=e}),x.TgZ(100,"option",22),x._uU(101),x.ALo(102,"translate"),x.qZA(),x.TgZ(103,"option",23),x._uU(104),x.ALo(105,"translate"),x.qZA(),x.TgZ(106,"option",24),x._uU(107),x.ALo(108,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(109,"div",92),x.TgZ(110,"div",82),x.TgZ(111,"label",110),x._uU(112),x.ALo(113,"translate"),x.qZA(),x.TgZ(114,"textarea",111),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.note=e}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(115,"div",112),x.TgZ(116,"button",113),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x._uU(117),x.ALo(118,"translate"),x.qZA(),x.YNc(119,ra,5,3,"ng-container",39),x.YNc(120,la,3,3,"button",114),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(4),x.hij(" ","ADD"==a._flagModal?x.lcZ(5,68,"Add new"):x.lcZ(6,70,"Update")," "),x.xp6(11),x.hij("",x.lcZ(16,72,"Number of sample")," "),x.xp6(4),x.Q6J("ngClass","ADD"==a._flagModal?"form-control":"form-control jdisabled")("placeholder",x.lcZ(20,74,"Number of sample"))("ngModel",a.entity.number_sample)("disabled","ADD"!=a._flagModal),x.xp6(2),x.Q6J("ngModel",a.entity.id),x.xp6(7),x.Q6J("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("placeholder","VAT")("ngModel",a.entity.tax_vat)("disabled",0!=a.entity.is_active),x.xp6(4),x.Oqu(x.lcZ(33,76,"Issue bill")),x.xp6(3),x.Q6J("ngModel",a.entity.is_issue_bill),x.xp6(5),x.Oqu(x.lcZ(41,78,"Promotion title")),x.xp6(2),x.Q6J("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("placeholder",x.lcZ(43,80,"Promotion title"))("ngModel",a.entity.title_promo_spec)("disabled",0!=a.entity.is_active),x.xp6(5),x.hij("",x.lcZ(48,82,"Promotion per order")," (VND)"),x.xp6(2),x.Q6J("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("placeholder",x.lcZ(50,84,"Promotion per order"))("ngModel",a.entity.promo_special)("disabled",0!=a.entity.is_active),x.xp6(5),x.hij("",x.lcZ(55,86,"Total promotion")," (%)"),x.xp6(2),x.Q6J("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("placeholder",x.lcZ(57,88,"Total promotion"))("ngModel",a.entity.promo_perorder)("min",0)("max",100)("disabled",0!=a.entity.is_active),x.xp6(5),x.hij("",x.lcZ(62,90,"Company")," "),x.xp6(4),x.Q6J("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCustomer)("placeholder",x.lcZ(66,92,"Please choose"))("notFoundText",x.lcZ(67,94,"Not found item")),x.xp6(3),x.Q6J("ngIf",null!=a.selectedCustomer),x.xp6(4),x.hij("",x.lcZ(73,96,"Received date")," "),x.xp6(4),x.Q6J("placeholder",x.lcZ(77,98,"Received date"))("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("ngModel",a._fdate)("bsConfig",x.DdM(120,sa))("disabled",0!=a.entity.is_active),x.xp6(5),x.hij("",x.lcZ(82,100,"Returned date")," "),x.xp6(4),x.Q6J("placeholder",x.lcZ(86,102,"Returned date"))("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("ngModel",a._tdate)("bsConfig",x.DdM(121,sa))("disabled",0!=a.entity.is_active),x.xp6(5),x.Oqu(x.lcZ(91,104,"Valid date")),x.xp6(2),x.Q6J("type","number")("placeholder",x.lcZ(93,106,"Valid date"))("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("ngModel",a.entity.valid_number)("disabled",0!=a.entity.is_active)("min",0),x.xp6(5),x.Oqu(x.lcZ(98,108,"Status")),x.xp6(2),x.Q6J("ngModel",a.entity.is_active),x.xp6(2),x.hij(" ",x.lcZ(102,110,"Pending")," "),x.xp6(3),x.hij(" ",x.lcZ(105,112,"Confirmed")," "),x.xp6(3),x.hij(" ",x.lcZ(108,114,"Cancel")," "),x.xp6(5),x.Oqu(x.lcZ(113,116,"Note")),x.xp6(2),x.Q6J("ngModel",a.entity.note),x.xp6(3),x.hij(" ",x.lcZ(118,118,"Close")," "),x.xp6(2),x.Q6J("ngIf",a.isSave),x.xp6(1),x.Q6J("ngIf",!a.isSave)}}function da(e,t){1&e&&(x.TgZ(0,"h4",76),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Relationship")," "))}function ua(e,t){if(1&e&&(x.TgZ(0,"h4",76),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e){var n=x.oxw(2);x.xp6(1),x.AsE(" ",x.lcZ(2,2,"Contact")," - ",n._diaName," ")}}function ga(e,t){if(1&e&&(x.TgZ(0,"h4",76),x._uU(1),x.ALo(2,"translate"),x.ALo(3,"translate"),x.qZA()),2&e){var n=x.oxw(2);x.xp6(1),x.AsE(" ",x.lcZ(2,2,"Relationship")," - ",x.lcZ(3,4,"ADDREL"==n._flagModal1?"Add new":"Update")," ")}}function pa(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",127),x.TgZ(1,"pagination",128),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(3).pageIndexRel=e})("pageChanged",function(e){return x.CHM(n),x.oxw(3).pageChangedRel(e)}),x.qZA(),x.TgZ(2,"a",31),x._uU(3),x.ALo(4,"translate"),x.ALo(5,"translate"),x.ALo(6,"translate"),x.ALo(7,"translate"),x.qZA(),x.qZA()}if(2&e){var a=x.oxw(3);x.xp6(1),x.Q6J("boundaryLinks",!0)("totalItems",a.totalRowRel)("ngModel",a.pageIndexRel)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSizeRel),x.xp6(2),x.Q0o("",x.lcZ(4,12,"Total of records"),": ",a.totalRowRel," - ",x.lcZ(5,14,"Page")," ",a.pageIndexRel," ",x.lcZ(6,16,"of")," ",a.totalPageRel," ",x.lcZ(7,18,"page"),"")}}function _a(e,t){1&e&&(x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",129),x.TgZ(3,"h3",55),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.qZA(),x.BQk()),2&e&&(x.xp6(4),x.hij(" ",x.lcZ(5,1,"No records now!!!")," "))}function ha(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"td",130),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return x.oxw(4).editLinkPopUp(e)}),x._uU(2),x.qZA(),x.TgZ(3,"td"),x._uU(4),x.qZA(),x.TgZ(5,"td"),x._uU(6),x.qZA(),x.TgZ(7,"td"),x._uU(8),x.qZA(),x.TgZ(9,"td"),x._uU(10),x.qZA(),x.TgZ(11,"td"),x._uU(12),x.qZA(),x.TgZ(13,"td"),x._uU(14),x.qZA(),x.TgZ(15,"td"),x.TgZ(16,"button",131),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return x.oxw(4).deleteItemLinkContact(e)}),x.ALo(17,"translate"),x._UZ(18,"i",132),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=x.oxw(4);x.xp6(2),x.hij(" ",a.code_link," "),x.xp6(2),x.Oqu(a.company_name_l),x.xp6(2),x.Oqu(a.sender_name),x.xp6(2),x.hij(" ",a.receive_company_l," "),x.xp6(2),x.hij(" ",a.receive_name," "),x.xp6(2),x.hij(" ",a.bill_company_l," "),x.xp6(2),x.hij(" ",a.bill_name," "),x.xp6(2),x.s9C("ngbTooltip",x.lcZ(17,9,"Delete")),x.Q6J("disabled",!i._authenService.hasPermission("CUSTOMER","delete"))}}function ma(e,t){if(1&e&&(x.ynx(0),x.YNc(1,ha,19,11,"tr",56),x.BQk()),2&e){var n=x.oxw(3);x.xp6(1),x.Q6J("ngForOf",n._relationslist)}}function fa(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",127),x.TgZ(1,"pagination",128),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(3).pageIndexRel=e})("pageChanged",function(e){return x.CHM(n),x.oxw(3).pageChangedRel(e)}),x.qZA(),x.TgZ(2,"a",31),x._uU(3),x.ALo(4,"translate"),x.ALo(5,"translate"),x.ALo(6,"translate"),x.ALo(7,"translate"),x.qZA(),x.qZA()}if(2&e){var a=x.oxw(3);x.xp6(1),x.Q6J("boundaryLinks",!0)("totalItems",a.totalRowRel)("ngModel",a.pageIndexRel)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSizeRel),x.xp6(2),x.Q0o("",x.lcZ(4,12,"Total of records"),": ",a.totalRowRel," - ",x.lcZ(5,14,"Page")," ",a.pageIndexRel," ",x.lcZ(6,16,"of")," ",a.totalPageRel," ",x.lcZ(7,18,"page"),"")}}function Za(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",80),x.TgZ(1,"div",122),x.TgZ(2,"input",123),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2)._keywordRel=e})("change",function(){return x.CHM(n),x.oxw(2).loadRelationship()})("keyup.enter",function(){return x.CHM(n),x.oxw(2).loadRelationship()}),x.ALo(3,"translate"),x.qZA(),x.qZA(),x.TgZ(4,"div",124),x.TgZ(5,"button",125),x.NdJ("click",function(){return x.CHM(n),x.oxw(2).linkContactPopUp1()}),x._uU(6),x.ALo(7,"translate"),x.qZA(),x.qZA(),x.TgZ(8,"div",92),x._UZ(9,"br"),x.YNc(10,pa,8,20,"div",126),x.TgZ(11,"div",32),x.TgZ(12,"table",33),x.TgZ(13,"thead",34),x.TgZ(14,"tr"),x.TgZ(15,"th",36),x._uU(16),x.ALo(17,"translate"),x.qZA(),x.TgZ(18,"th",36),x._uU(19),x.ALo(20,"translate"),x.qZA(),x.TgZ(21,"th",36),x._uU(22),x.ALo(23,"translate"),x.qZA(),x.TgZ(24,"th",36),x._uU(25),x.ALo(26,"translate"),x.qZA(),x.TgZ(27,"th",36),x._uU(28),x.ALo(29,"translate"),x.qZA(),x.TgZ(30,"th",36),x._uU(31),x.ALo(32,"translate"),x.qZA(),x.TgZ(33,"th",36),x._uU(34),x.ALo(35,"translate"),x.qZA(),x.TgZ(36,"th",36),x._uU(37),x.ALo(38,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(39,"tbody"),x.YNc(40,_a,6,3,"ng-container",39),x.YNc(41,ma,2,1,"ng-container",39),x.qZA(),x.qZA(),x.qZA(),x.YNc(42,fa,8,20,"div",126),x.qZA(),x.qZA()}if(2&e){var a=x.oxw(2);x.xp6(2),x.Q6J("placeholder",x.lcZ(3,15,"Search"))("ngModel",a._keywordRel),x.xp6(4),x.hij(" ",x.lcZ(7,17,"Add new")," "),x.xp6(4),x.Q6J("ngIf",a._relationslist.length>0),x.xp6(6),x.hij(" ",x.lcZ(17,19,"Relevant code")," "),x.xp6(3),x.hij(" ",x.lcZ(20,21,"Company")," "),x.xp6(3),x.hij(" ",x.lcZ(23,23,"Sender")," "),x.xp6(3),x.hij(" ",x.lcZ(26,25,"Received company")," "),x.xp6(3),x.hij(" ",x.lcZ(29,27,"Receiver")," "),x.xp6(3),x.hij(" ",x.lcZ(32,29,"Bill company")," "),x.xp6(3),x.hij(" ",x.lcZ(35,31,"Bill receiver")," "),x.xp6(3),x.Oqu(x.lcZ(38,33,"Actions")),x.xp6(3),x.Q6J("ngIf",0==a._relationslist.length),x.xp6(1),x.Q6J("ngIf",a._relationslist.length>0),x.xp6(1),x.Q6J("ngIf",a._relationslist.length>0)}}function va(e,t){1&e&&(x.ynx(0),x.TgZ(1,"a",116),x._UZ(2,"img",117),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.BQk()),2&e&&(x.xp6(3),x.hij(" ",x.lcZ(4,1,"Processing"),""))}function xa(e,t){if(1&e&&(x.TgZ(0,"button",152),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e){x.oxw();var n=x.MAs(2);x.Q6J("disabled",!n.valid),x.xp6(1),x.hij(" ",x.lcZ(2,2,"Save")," ")}}function ya(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",153),x.NdJ("click",function(){return x.CHM(n),x.oxw(3)._clearContact()}),x._uU(1),x.ALo(2,"translate"),x.qZA()}2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Add new")," "))}function ba(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"td"),x._uU(2),x.qZA(),x.TgZ(3,"td"),x._uU(4),x.qZA(),x.TgZ(5,"td"),x._uU(6),x.qZA(),x.TgZ(7,"td"),x._uU(8),x.qZA(),x.TgZ(9,"td"),x._uU(10),x.qZA(),x.TgZ(11,"td"),x.TgZ(12,"button",154),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw(3);return t.loadDetail1(e.id,t.entityContact.company_id)}),x._UZ(13,"i",69),x.qZA(),x.TgZ(14,"button",155),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return x.oxw(3).deleteItem0(e)}),x._UZ(15,"i",132),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=x.oxw(3);x.xp6(2),x.hij(" ",a.contact_code," "),x.xp6(2),x.hij(" ",a.contact_name," "),x.xp6(2),x.hij(" ",a.phone," "),x.xp6(2),x.Oqu(a.email),x.xp6(2),x.Oqu(a.note_l),x.xp6(2),x.Q6J("disabled",!i._authenService.hasPermission("CUSTOMER","update")),x.xp6(2),x.Q6J("disabled",!i._authenService.hasPermission("CUSTOMER","delete"))}}function Aa(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"form",73,133),x.NdJ("ngSubmit",function(){return x.CHM(n),x.oxw(2).saveChange0()}),x.TgZ(3,"div",80),x.TgZ(4,"div",81),x.TgZ(5,"div",82),x.TgZ(6,"label",134),x._uU(7),x.ALo(8,"translate"),x.TgZ(9,"span",55),x._uU(10,"(*)"),x.qZA(),x.qZA(),x.TgZ(11,"input",135),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).entityContact.contact_name=e}),x.ALo(12,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(13,"div",81),x.TgZ(14,"div",82),x.TgZ(15,"label",136),x._uU(16),x.ALo(17,"translate"),x.qZA(),x.TgZ(18,"input",137),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).entityContact.contact_code=e}),x.ALo(19,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(20,"div",81),x.TgZ(21,"div",82),x.TgZ(22,"label",138),x._uU(23),x.ALo(24,"translate"),x.TgZ(25,"span",55),x._uU(26,"(*)"),x.qZA(),x.qZA(),x.TgZ(27,"input",139),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).entityContact.phone=e}),x.ALo(28,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(29,"div",81),x.TgZ(30,"div",82),x.TgZ(31,"label",140),x._uU(32,"Email"),x.qZA(),x.TgZ(33,"input",141),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).entityContact.email=e}),x.qZA(),x.qZA(),x.qZA(),x.TgZ(34,"div",81),x.TgZ(35,"div",82),x.TgZ(36,"label",142),x._uU(37),x.ALo(38,"translate"),x.ALo(39,"translate"),x.qZA(),x.TgZ(40,"textarea",143),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).entityContact.note_l=e}),x.ALo(41,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(42,"div",81),x.TgZ(43,"div",82),x.TgZ(44,"label",144),x._uU(45),x.ALo(46,"translate"),x.ALo(47,"translate"),x.qZA(),x.TgZ(48,"textarea",145),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).entityContact.note_e=e}),x.ALo(49,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(50,"div",81),x.TgZ(51,"div",82),x.TgZ(52,"label",108),x._uU(53),x.ALo(54,"translate"),x.qZA(),x.TgZ(55,"div",90),x.TgZ(56,"input",146),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2)._status=e}),x.qZA(),x._UZ(57,"label",108),x.qZA(),x.qZA(),x.qZA(),x.TgZ(58,"div",81),x.TgZ(59,"div",82),x.YNc(60,va,5,3,"ng-container",39),x.YNc(61,xa,3,4,"button",147),x.YNc(62,ya,3,3,"button",148),x.qZA(),x.qZA(),x.TgZ(63,"div",92),x.TgZ(64,"div",82),x.TgZ(65,"input",149),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2)._keyword1=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e.loadDataContact(e.entityContact.company_id)})("keyup.enter",function(){x.CHM(n);var e=x.oxw(2);return e.loadDataContact(e.entityContact.company_id)}),x.ALo(66,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(67,"div",92),x.TgZ(68,"div",127),x.TgZ(69,"pagination",150),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).pageIndex1=e})("pageChanged",function(e){return x.CHM(n),x.oxw(2).pageChanged1(e)}),x.qZA(),x.TgZ(70,"a",31),x._uU(71),x.ALo(72,"translate"),x.ALo(73,"translate"),x.ALo(74,"translate"),x.ALo(75,"translate"),x.qZA(),x.qZA(),x.TgZ(76,"div",151),x.TgZ(77,"table",33),x.TgZ(78,"thead",34),x.TgZ(79,"tr"),x.TgZ(80,"th",36),x._uU(81),x.ALo(82,"translate"),x.qZA(),x.TgZ(83,"th",36),x._uU(84),x.ALo(85,"translate"),x.qZA(),x.TgZ(86,"th",36),x._uU(87),x.ALo(88,"translate"),x.qZA(),x.TgZ(89,"th",36),x._uU(90,"Email"),x.qZA(),x.TgZ(91,"th",36),x._uU(92),x.ALo(93,"translate"),x.qZA(),x.TgZ(94,"th",36),x._uU(95),x.ALo(96,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(97,"tbody"),x.YNc(98,ba,16,7,"tr",56),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(2);x.xp6(7),x.hij("",x.lcZ(8,45,"Customer name")," "),x.xp6(4),x.Q6J("placeholder",x.lcZ(12,47,"Customer name"))("ngModel",a.entityContact.contact_name),x.xp6(5),x.Oqu(x.lcZ(17,49,"Customer code")),x.xp6(2),x.Q6J("placeholder",x.lcZ(19,51,"Customer code"))("ngModel",a.entityContact.contact_code)("disabled",!0),x.xp6(5),x.hij("",x.lcZ(24,53,"Phone")," "),x.xp6(4),x.Q6J("placeholder",x.lcZ(28,55,"Phone"))("ngModel",a.entityContact.phone),x.xp6(6),x.Q6J("placeholder","abc@company.com")("ngModel",a.entityContact.email),x.xp6(4),x.AsE("",x.lcZ(38,57,"Note")," (",x.lcZ(39,59,"Vietnamese"),")"),x.xp6(3),x.s9C("placeholder",x.lcZ(41,61,"Note")),x.Q6J("ngModel",a.entityContact.note_l),x.xp6(5),x.AsE("",x.lcZ(46,63,"Note")," (",x.lcZ(47,65,"English"),")"),x.xp6(3),x.s9C("placeholder",x.lcZ(49,67,"Note")),x.Q6J("ngModel",a.entityContact.note_e),x.xp6(5),x.Oqu(x.lcZ(54,69,"Status")),x.xp6(3),x.Q6J("ngModel",a._status),x.xp6(4),x.Q6J("ngIf",a.isSave1),x.xp6(1),x.Q6J("ngIf",!a.isSave1),x.xp6(1),x.Q6J("ngIf","UPDATE"==a._flagModal1),x.xp6(3),x.s9C("placeholder",x.lcZ(66,71,"Search")),x.Q6J("ngModel",a._keyword1),x.xp6(4),x.Q6J("boundaryLinks",!0)("totalItems",a.totalRow1)("ngModel",a.pageIndex1)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSize1),x.xp6(2),x.Q0o("",x.lcZ(72,73,"Total of records"),": ",a.totalRow1," - ",x.lcZ(73,75,"Page")," ",a.pageIndex1," ",x.lcZ(74,77,"of")," ",a.totalPage1," ",x.lcZ(75,79,"page"),""),x.xp6(10),x.hij(" ",x.lcZ(82,81,"Customer code")," "),x.xp6(3),x.hij(" ",x.lcZ(85,83,"Customer name")," "),x.xp6(3),x.hij(" ",x.lcZ(88,85,"Phone")," "),x.xp6(5),x.hij(" ",x.lcZ(93,87,"Note")," "),x.xp6(3),x.hij(" ",x.lcZ(96,89,"Actions")," "),x.xp6(3),x.Q6J("ngForOf",a._contacts)}}function Ta(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"form",null,156),x.TgZ(3,"div",80),x.TgZ(4,"div",92),x.TgZ(5,"div",82),x.TgZ(6,"label",157),x._uU(7),x.ALo(8,"translate"),x.TgZ(9,"span",55),x._uU(10,"(*)"),x.qZA(),x.qZA(),x.TgZ(11,"textarea",158),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).entityLinkC.code_link=e}),x.ALo(12,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(13,"div",81),x.TgZ(14,"div",82),x.TgZ(15,"label",159),x._uU(16),x.ALo(17,"translate"),x.TgZ(18,"span",55),x._uU(19,"(*)"),x.qZA(),x._uU(20),x.ALo(21,"translate"),x.qZA(),x.TgZ(22,"ng-select",160),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).selectedCompany=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._changeCompanyInfo("cty",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.ALo(23,"translate"),x.ALo(24,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(25,"div",81),x.TgZ(26,"div",82),x.TgZ(27,"label",159),x._uU(28),x.ALo(29,"translate"),x.TgZ(30,"span",55),x._uU(31,"(*)"),x.qZA(),x._uU(32),x.ALo(33,"translate"),x.qZA(),x.TgZ(34,"ng-select",161),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).selectedSender=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._changeCompanyInfo("lh",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.ALo(35,"translate"),x.ALo(36,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(37,"div",81),x.TgZ(38,"div",82),x.TgZ(39,"label"),x._uU(40),x.ALo(41,"translate"),x.TgZ(42,"span",55),x._uU(43,"(*)"),x.qZA(),x._uU(44),x.ALo(45,"translate"),x.qZA(),x.TgZ(46,"ng-select",162),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).selectedCompanyKQ=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._changeCompanyInfo("kq",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.ALo(47,"translate"),x.ALo(48,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(49,"div",81),x.TgZ(50,"div",82),x.TgZ(51,"label"),x._uU(52),x.ALo(53,"translate"),x.TgZ(54,"span",55),x._uU(55,"(*)"),x.qZA(),x._uU(56),x.ALo(57,"translate"),x.qZA(),x.TgZ(58,"ng-select",163),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).selectedSenderKQ=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._changeCompanyInfo("lhkq",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.ALo(59,"translate"),x.ALo(60,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(61,"div",81),x.TgZ(62,"div",82),x.TgZ(63,"label"),x._uU(64),x.ALo(65,"translate"),x.TgZ(66,"span",55),x._uU(67,"(*)"),x.qZA(),x._uU(68),x.ALo(69,"translate"),x.qZA(),x.TgZ(70,"ng-select",164),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).selectedCompanyBill=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._changeCompanyInfo("bill",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.ALo(71,"translate"),x.ALo(72,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(73,"div",81),x.TgZ(74,"div",82),x.TgZ(75,"label"),x._uU(76),x.ALo(77,"translate"),x.TgZ(78,"span",55),x._uU(79,"(*)"),x.qZA(),x._uU(80),x.ALo(81,"translate"),x.qZA(),x.TgZ(82,"ng-select",165),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).selectedSenderBill=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._changeCompanyInfo("lhbill",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.ALo(83,"translate"),x.ALo(84,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(2);x.xp6(7),x.hij("",x.lcZ(8,58,"Code")," "),x.xp6(4),x.Q6J("placeholder",x.lcZ(12,60,"Code"))("ngModel",a.entityLinkC.code_link)("disabled",!0),x.xp6(5),x.hij("",x.lcZ(17,62,"Customer")," "),x.xp6(4),x.hij(" - ",x.lcZ(21,64,"Information"),""),x.xp6(2),x.Q6J("items",a._getlistcompany)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCompany)("placeholder",x.lcZ(23,66,"Please choose"))("notFoundText",x.lcZ(24,68,"Not found item")),x.xp6(6),x.hij("",x.lcZ(29,70,"Contact")," "),x.xp6(4),x.hij(" - ",x.lcZ(33,72,"Sender"),""),x.xp6(2),x.Q6J("items",a._getlistsender)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSender)("placeholder",x.lcZ(35,74,"Please choose"))("notFoundText",x.lcZ(36,76,"Not found item")),x.xp6(6),x.hij("",x.lcZ(41,78,"Customer")," "),x.xp6(4),x.hij(" - ",x.lcZ(45,80,"Received company"),""),x.xp6(2),x.Q6J("items",a._getlistcompanyKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCompanyKQ)("placeholder",x.lcZ(47,82,"Please choose"))("notFoundText",x.lcZ(48,84,"Not found item")),x.xp6(6),x.hij("",x.lcZ(53,86,"Contact")," "),x.xp6(4),x.hij(" - ",x.lcZ(57,88,"Received company"),""),x.xp6(2),x.Q6J("items",a._getlistsenderKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSenderKQ)("placeholder",x.lcZ(59,90,"Please choose"))("notFoundText",x.lcZ(60,92,"Not found item")),x.xp6(6),x.hij("",x.lcZ(65,94,"Customer")," "),x.xp6(4),x.hij(" - ",x.lcZ(69,96,"Bill company"),""),x.xp6(2),x.Q6J("items",a._getlistcompanyBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCompanyBill)("placeholder",x.lcZ(71,98,"Please choose"))("notFoundText",x.lcZ(72,100,"Not found item")),x.xp6(6),x.hij("",x.lcZ(77,102,"Contact")," "),x.xp6(4),x.hij(" - ",x.lcZ(81,104,"Bill company"),""),x.xp6(2),x.Q6J("items",a._getlistsenderBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSenderBill)("placeholder",x.lcZ(83,106,"Please choose"))("notFoundText",x.lcZ(84,108,"Not found item"))}}function qa(e,t){1&e&&(x.ynx(0),x.TgZ(1,"a",116),x._UZ(2,"img",117),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.BQk()),2&e&&(x.xp6(3),x.hij(" ",x.lcZ(4,1,"Processing"),""))}function Ma(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",168),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(3);return e.saveChangeLink(e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x._uU(1),x.ALo(2,"translate"),x.qZA()}2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Save & close")," "))}function Sa(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",112),x.TgZ(1,"button",166),x.NdJ("click",function(){return x.CHM(n),x.oxw(2).closeModal()}),x._uU(2),x.ALo(3,"translate"),x.qZA(),x.TgZ(4,"button",153),x.NdJ("click",function(){return x.CHM(n),x.oxw(2)._switchLinkList()}),x._uU(5),x.ALo(6,"translate"),x.qZA(),x.YNc(7,qa,5,3,"ng-container",39),x.YNc(8,Ma,3,3,"button",167),x.qZA()}if(2&e){var a=x.oxw(2);x.xp6(2),x.hij(" ",x.lcZ(3,4,"Close")," "),x.xp6(3),x.hij(" ",x.lcZ(6,6,"Relationship")," "),x.xp6(2),x.Q6J("ngIf",a.isSave),x.xp6(1),x.Q6J("ngIf",!a.isSave)}}function Ca(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",75),x.YNc(1,da,3,3,"h4",119),x.YNc(2,ua,3,4,"h4",119),x.YNc(3,ga,4,6,"h4",119),x.TgZ(4,"button",77),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(5,"span",78),x._uU(6,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(7,"div",79),x.YNc(8,Za,43,35,"div",120),x.YNc(9,Aa,99,91,"ng-container",39),x.YNc(10,Ta,85,110,"ng-container",39),x.qZA(),x.YNc(11,Sa,9,8,"div",121)}if(2&e){var a=x.oxw();x.xp6(1),x.Q6J("ngIf","LIST"==a._flagModal1),x.xp6(1),x.Q6J("ngIf","ADD"==a._flagModal1||"UPDATE"==a._flagModal1),x.xp6(1),x.Q6J("ngIf","ADDREL"==a._flagModal1||"UPDATEREL"==a._flagModal1),x.xp6(5),x.Q6J("ngIf","LIST"==a._flagModal1),x.xp6(1),x.Q6J("ngIf","ADD"==a._flagModal1||"UPDATE"==a._flagModal1),x.xp6(1),x.Q6J("ngIf","ADDREL"==a._flagModal1||"UPDATEREL"==a._flagModal1),x.xp6(1),x.Q6J("ngIf","ADDREL"==a._flagModal1||"UPDATEREL"==a._flagModal1)}}function wa(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"ng-select",171),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).selectedCustomer1=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e.exportList.length>0?e._copyAll(e.exportList,e.selectedCustomer1):e._copyRequest(e.selectedCustomer1)}),x.ALo(2,"translate"),x.ALo(3,"translate"),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(2);x.xp6(1),x.Q6J("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCustomer1)("placeholder",x.lcZ(2,7,"Please choose"))("notFoundText",x.lcZ(3,9,"Not found item"))}}function ka(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"ng-select",171),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).selectedCustomer1=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._copyTemplate(e._idTemplate,e.selectedCustomer1)}),x.ALo(2,"translate"),x.ALo(3,"translate"),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(2);x.xp6(1),x.Q6J("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCustomer1)("placeholder",x.lcZ(2,7,"Please choose"))("notFoundText",x.lcZ(3,9,"Not found item"))}}function La(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",169),x.TgZ(1,"div",75),x.TgZ(2,"h4",76),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"button",77),x.NdJ("click",function(){return x.CHM(n).$implicit.dismiss("Cross click")}),x.TgZ(6,"span",78),x._uU(7,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",79),x.TgZ(9,"div",80),x.TgZ(10,"div",92),x.TgZ(11,"div",82),x.TgZ(12,"label",170),x._uU(13),x.ALo(14,"translate"),x.qZA(),x.YNc(15,wa,4,11,"ng-container",39),x.YNc(16,ka,4,11,"ng-container",39),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(3),x.AsE("",x.lcZ(4,5,"Copy")," - ",a._titleCopy,""),x.xp6(10),x.Oqu(x.lcZ(14,7,"Company")),x.xp6(2),x.Q6J("ngIf",!a._flagChooseTemplate),x.xp6(1),x.Q6J("ngIf",a._flagChooseTemplate)}}function Ua(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",179),x.NdJ("click",function(){return x.CHM(n),x.oxw(2)._exportAllRangeWithStatusA()}),x._uU(1),x.ALo(2,"translate"),x.qZA()}2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Submit")))}function Na(e,t){1&e&&(x.TgZ(0,"a",180),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.hij("",x.lcZ(2,1,"Loading"),"..."))}var Da=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};function Ia(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",169),x.TgZ(1,"div",75),x.TgZ(2,"h4",76),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"button",77),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(6,"span",78),x._uU(7,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",79),x.TgZ(9,"div",80),x.TgZ(10,"div",81),x.TgZ(11,"label",172),x._uU(12),x.ALo(13,"translate"),x.qZA(),x.TgZ(14,"input",173),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw()._fDate=e})("bsValueChange",function(e){return x.CHM(n),x.oxw().changeFromDate(e)})("keypress",function(e){return x.CHM(n),x.oxw().changeFromDate(e)}),x.qZA(),x.qZA(),x.TgZ(15,"div",81),x.TgZ(16,"label",174),x._uU(17),x.ALo(18,"translate"),x.qZA(),x.TgZ(19,"input",175),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw()._tDate=e})("bsValueChange",function(e){return x.CHM(n),x.oxw().changeToDate(e)})("keypress",function(e){return x.CHM(n),x.oxw().changeToDate(e)}),x.qZA(),x.qZA(),x.TgZ(20,"div",176),x.TgZ(21,"div",82),x._UZ(22,"br"),x.YNc(23,Ua,3,3,"a",177),x.YNc(24,Na,3,3,"a",178),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(3),x.Oqu(x.lcZ(4,9,"Export")),x.xp6(9),x.Oqu(x.lcZ(13,11,"From date")),x.xp6(2),x.Q6J("ngModel",a._fDate)("bsConfig",x.DdM(15,Da)),x.xp6(3),x.Oqu(x.lcZ(18,13,"To date")),x.xp6(2),x.Q6J("ngModel",a._tDate)("bsConfig",x.DdM(16,Da)),x.xp6(4),x.Q6J("ngIf",!a.isExportLoading),x.xp6(1),x.Q6J("ngIf",a.isExportLoading)}}function Ya(e,t){1&e&&x._UZ(0,"img",189)}function Ja(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",26),x.TgZ(1,"div",27),x.TgZ(2,"div",28),x.TgZ(3,"pagination",29),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).pageIndex1=e})("pageChanged",function(e){return x.CHM(n),x.oxw(2).pageChangedTemplate(e)}),x.qZA(),x.qZA(),x.TgZ(4,"div",30),x.TgZ(5,"a",31),x._uU(6),x.ALo(7,"translate"),x.ALo(8,"translate"),x.ALo(9,"translate"),x.ALo(10,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw(2);x.xp6(3),x.Q6J("boundaryLinks",!0)("totalItems",a.totalRow1)("ngModel",a.pageIndex1)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSize1),x.xp6(3),x.Q0o("",x.lcZ(7,12,"Total of records"),": ",a.totalRow1," - ",x.lcZ(8,14,"Page")," ",a.pageIndex1," ",x.lcZ(9,16,"of")," ",a.totalPage1," ",x.lcZ(10,18,"page"),"")}}function Oa(e,t){1&e&&(x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",190),x.TgZ(3,"h4",55),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.qZA(),x.BQk()),2&e&&(x.xp6(4),x.hij(" ",x.lcZ(5,1,"No records now!!!")," "))}function Qa(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"td"),x._uU(2),x.qZA(),x.TgZ(3,"td"),x._uU(4),x.qZA(),x.TgZ(5,"td"),x._uU(6),x.qZA(),x.TgZ(7,"td"),x._uU(8),x.qZA(),x.TgZ(9,"td"),x._uU(10),x.ALo(11,"number"),x.qZA(),x.TgZ(12,"td"),x._uU(13),x.ALo(14,"date"),x.qZA(),x.TgZ(15,"td"),x.TgZ(16,"button",191),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw(3),a=x.MAs(118);return t.popupTemplateModal(a,e)}),x.ALo(17,"translate"),x._UZ(18,"i",192),x.qZA(),x.TgZ(19,"button",193),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw(3),a=x.MAs(112);return t._popupCopyTemplate(a,e)}),x.ALo(20,"translate"),x._UZ(21,"i",50),x.qZA(),x.TgZ(22,"button",194),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return x.oxw(3).deleteItemTemplate(e)}),x.ALo(23,"translate"),x._UZ(24,"i",132),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(3);x.xp6(2),x.Oqu(i+1+o.pageSize1*(o.pageIndex1-1)),x.xp6(2),x.Oqu(a.name),x.xp6(2),x.Oqu(a.number_sample),x.xp6(2),x.Oqu(a.total_parameters),x.xp6(2),x.Oqu(x.lcZ(11,9,a.total)),x.xp6(3),x.Oqu(x.xi3(14,11,a.timestamp,"dd/MM/YYYY HH:mm:ss a")),x.xp6(3),x.Q6J("ngbTooltip",x.lcZ(17,14,"Edit")),x.xp6(3),x.Q6J("ngbTooltip",x.lcZ(20,16,"Copy")),x.xp6(3),x.Q6J("ngbTooltip",x.lcZ(23,18,"Delete"))}}function Pa(e,t){if(1&e&&(x.ynx(0),x.YNc(1,Qa,25,20,"tr",56),x.BQk()),2&e){var n=x.oxw(2);x.xp6(1),x.Q6J("ngForOf",n._templatelist)}}function Ea(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",169),x.TgZ(1,"div",75),x.TgZ(2,"h4",76),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"button",77),x.NdJ("click",function(){return x.CHM(n),x.oxw().closeModal()}),x.TgZ(6,"span",78),x._uU(7,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",79),x.TgZ(9,"div",80),x.TgZ(10,"div",181),x.TgZ(11,"div",182),x.TgZ(12,"input",183),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw()._keyword1=e})("keyup.enter",function(){return x.CHM(n),x.oxw().loadTemplateList()})("change",function(){return x.CHM(n),x.oxw().loadTemplateList()}),x.ALo(13,"translate"),x.qZA(),x.TgZ(14,"button",184),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(),t=x.MAs(118);return e.popupTemplateModal(t,null)}),x._uU(15),x.ALo(16,"translate"),x.qZA(),x.YNc(17,Ya,1,0,"img",185),x.qZA(),x.qZA(),x.TgZ(18,"div",86),x.TgZ(19,"div",82),x.TgZ(20,"div",14),x.TgZ(21,"select",186),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().pageSize1=e})("change",function(e){return x.CHM(n),x.oxw()._pageSizeChangeTemplate(e)}),x.TgZ(22,"option",16),x._uU(23,"#10"),x.qZA(),x.TgZ(24,"option",17),x._uU(25,"#25"),x.qZA(),x.TgZ(26,"option",18),x._uU(27,"#50"),x.qZA(),x.TgZ(28,"option",19),x._uU(29,"#100"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(30,"div",92),x.TgZ(31,"div",32),x.YNc(32,Ja,11,20,"div",187),x.TgZ(33,"table",33),x.TgZ(34,"thead",34),x.TgZ(35,"tr"),x.TgZ(36,"th",188),x._uU(37,"#"),x.qZA(),x.TgZ(38,"th",36),x._uU(39),x.ALo(40,"translate"),x.qZA(),x.TgZ(41,"th",36),x._uU(42),x.ALo(43,"translate"),x.qZA(),x.TgZ(44,"th",36),x._uU(45),x.ALo(46,"translate"),x.qZA(),x.TgZ(47,"th",36),x._uU(48),x.ALo(49,"translate"),x.qZA(),x.TgZ(50,"th",36),x._uU(51),x.ALo(52,"translate"),x.qZA(),x.TgZ(53,"th",36),x._uU(54),x.ALo(55,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(56,"tbody"),x.YNc(57,Oa,6,3,"ng-container",39),x.YNc(58,Pa,2,1,"ng-container",39),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(3),x.Oqu(x.lcZ(4,15,"Request template")),x.xp6(9),x.MGl("placeholder","",x.lcZ(13,17,"Search"),"..."),x.Q6J("ngModel",a._keyword1),x.xp6(3),x.hij(" ",x.lcZ(16,19,"Add new")," "),x.xp6(2),x.Q6J("ngIf",a.isLoadingTemplate),x.xp6(4),x.Q6J("ngModel",a.pageSize1),x.xp6(11),x.Q6J("ngIf",a._templatelist.length>0),x.xp6(7),x.hij(" ",x.lcZ(40,21,"Name")," "),x.xp6(3),x.hij(" ",x.lcZ(43,23,"Total of sample")," "),x.xp6(3),x.hij(" ",x.lcZ(46,25,"Total of parameter")," "),x.xp6(3),x.hij(" ",x.lcZ(49,27,"Total")," "),x.xp6(3),x.hij(" ",x.lcZ(52,29,"Timestamp")," "),x.xp6(3),x.Oqu(x.lcZ(55,31,"Actions")),x.xp6(3),x.Q6J("ngIf",0==a._templatelist.length),x.xp6(1),x.Q6J("ngIf",a._templatelist.length>0)}}function Ra(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"button",218),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return x.oxw(2)._chooseTab(e)}),x._uU(2),x.ALo(3,"translate"),x.qZA(),x.BQk()}if(2&e){var a=t.$implicit,i=x.oxw(2);x.xp6(1),x.Q6J("ngClass",i._currentTabActivated==a.id?"btn btn-sm btn-warning":"btn btn-sm btn-secondary"),x.xp6(1),x.AsE(" ",x.lcZ(3,3,"Sample")," ",a.id," ")}}function Fa(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"a",219),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(2);return e._removeTab(e._currentTabActivated)}),x._uU(1,"X"),x.qZA()}}function Ha(e,t){if(1&e&&(x.TgZ(0,"div",220),x._uU(1),x.ALo(2,"slice"),x.qZA()),2&e){var n=t.item;x.Q6J("ngbTooltip",n.name.length>25?n.name:""),x.xp6(1),x.hij(" ",n.name.length>25?x.Dn7(2,2,n.name,0,20)+"..":n.name," ")}}function Wa(e,t){if(1&e&&(x.TgZ(0,"div",220),x._uU(1),x.ALo(2,"slice"),x.qZA()),2&e){var n=t.item;x.Q6J("ngbTooltip",n.name.length>25?n.name:""),x.xp6(1),x.hij(" ",n.name.length>25?x.Dn7(2,2,n.name,0,20)+"..":n.name," ")}}function ja(e,t){if(1&e&&(x.TgZ(0,"div",220),x._uU(1),x.ALo(2,"slice"),x.qZA()),2&e){var n=t.item;x.Q6J("ngbTooltip",n.name.length>25?n.name:""),x.xp6(1),x.hij(" ",n.name.length>25?x.Dn7(2,2,n.name,0,20)+"..":n.name," ")}}function Ga(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"td",216),x._uU(2),x.qZA(),x.TgZ(3,"td",216),x.TgZ(4,"a",221),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return x.oxw(2)._removeItemTemplate(e)}),x._UZ(5,"i",132),x.qZA(),x.qZA(),x.TgZ(6,"td",217),x.TgZ(7,"span",222),x._uU(8),x.qZA(),x.qZA(),x.TgZ(9,"td",217),x._uU(10),x.qZA(),x.TgZ(11,"td",217),x._uU(12),x.qZA(),x.TgZ(13,"td",217),x._uU(14),x.qZA(),x.TgZ(15,"td",216),x.TgZ(16,"input",223),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.quantity=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)}),x.qZA(),x.qZA(),x.TgZ(17,"td",217),x._uU(18),x.qZA(),x.TgZ(19,"td",216),x.TgZ(20,"input",224),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.price=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)}),x.qZA(),x.qZA(),x.TgZ(21,"td",216),x.TgZ(22,"input",225),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.discount=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)}),x.qZA(),x.qZA(),x.TgZ(23,"td",216),x._uU(24),x.ALo(25,"number"),x.qZA(),x.TgZ(26,"td",216),x.TgZ(27,"input",226),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.priority=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)}),x.qZA(),x.qZA(),x.TgZ(28,"td",216),x.TgZ(29,"input",226),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.tat=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)}),x.qZA(),x.qZA(),x.TgZ(30,"td",216),x.TgZ(31,"input",226),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.order_no=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)}),x.qZA(),x.qZA(),x.TgZ(32,"td",216),x.TgZ(33,"input",227),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.hide=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e._updateItemTemplate(e._orderdetailists)}),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(2),x.Oqu(i+1),x.xp6(5),x.Q6J("ngClass",null==a.code_father?"text-bold text-default":"text-warning"),x.xp6(1),x.Oqu(a.code),x.xp6(2),x.hij(" ","en"==o.user.lang?a.specification_name_e:a.specification_name_l," "),x.xp6(2),x.Oqu(a.method),x.xp6(2),x.Oqu(a.lod),x.xp6(2),x.MGl("name","qty",i+1,""),x.Q6J("ngModel",a.quantity),x.xp6(2),x.hij(" ",a.unit," "),x.xp6(2),x.MGl("name","p",i+1,""),x.Q6J("ngModel",a.price),x.xp6(2),x.MGl("name","gg",i+1,""),x.Q6J("ngModel",a.discount),x.xp6(2),x.hij(" ",x.lcZ(25,22,a.amount)," "),x.xp6(3),x.MGl("name","pri",i+1,""),x.Q6J("ngModel",a.priority),x.xp6(2),x.MGl("name","ta",i+1,""),x.Q6J("ngModel",a.tat),x.xp6(2),x.MGl("name","odd",i+1,""),x.Q6J("ngModel",a.order_no),x.xp6(2),x.MGl("name","hid",i+1,""),x.Q6J("ngModel",a.hide)}}function Ba(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",169),x.TgZ(1,"div",75),x.TgZ(2,"h4",76),x._uU(3),x.ALo(4,"translate"),x.ALo(5,"translate"),x.qZA(),x.TgZ(6,"button",77),x.NdJ("click",function(){return x.CHM(n).$implicit.dismiss("Cross click")}),x.TgZ(7,"span",78),x._uU(8,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(9,"div",79),x.TgZ(10,"div",80),x.TgZ(11,"div",195),x.TgZ(12,"label",196),x._uU(13),x.ALo(14,"translate"),x.qZA(),x.TgZ(15,"input",197),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entityTemplate.name=e})("change",function(){return x.CHM(n),x.oxw().saveChangeSample()}),x.qZA(),x.qZA(),x.TgZ(16,"div",86),x.TgZ(17,"label",198),x._uU(18),x.ALo(19,"translate"),x.qZA(),x.TgZ(20,"input",199),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entityTemplate.number_sample=e})("keyup.enter",function(){x.CHM(n);var e=x.oxw();return e._changeSample(e.entityTemplate.number_sample)})("change",function(){x.CHM(n);var e=x.oxw();return e._changeSample(e.entityTemplate.number_sample)}),x.qZA(),x.qZA(),x.TgZ(21,"div",124),x.TgZ(22,"label"),x._uU(23),x.ALo(24,"translate"),x.qZA(),x.TgZ(25,"input",200),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entityTemplate.total=e}),x.qZA(),x.qZA(),x.TgZ(26,"div",92),x._UZ(27,"hr"),x.TgZ(28,"div",1),x.TgZ(29,"div",201),x.TgZ(30,"div",202),x.YNc(31,Ra,4,5,"ng-container",56),x.qZA(),x.qZA(),x.TgZ(32,"div",203),x.YNc(33,Fa,2,0,"a",204),x.qZA(),x.qZA(),x.qZA(),x.TgZ(34,"div",81),x.TgZ(35,"label",205),x.TgZ(36,"strong"),x._uU(37),x.ALo(38,"translate"),x.qZA(),x.qZA(),x.TgZ(39,"input",206),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entitySample.sample_name=e})("keyup.enter",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)}),x.ALo(40,"translate"),x.ALo(41,"translate"),x.qZA(),x.TgZ(42,"input",206),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entitySample.sample_name_e=e})("keyup.enter",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)}),x.ALo(43,"translate"),x.ALo(44,"translate"),x.qZA(),x.qZA(),x.TgZ(45,"div",81),x.TgZ(46,"label",205),x.TgZ(47,"strong"),x._uU(48),x.ALo(49,"translate"),x.ALo(50,"translate"),x.qZA(),x.qZA(),x.TgZ(51,"input",206),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entitySample.description=e})("keyup.enter",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)}),x.ALo(52,"translate"),x.ALo(53,"translate"),x.qZA(),x.TgZ(54,"input",206),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entitySample.description_e=e})("keyup.enter",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)}),x.ALo(55,"translate"),x.ALo(56,"translate"),x.qZA(),x.qZA(),x.TgZ(57,"div",81),x.TgZ(58,"label",205),x.TgZ(59,"strong"),x._uU(60),x.ALo(61,"translate"),x.qZA(),x.qZA(),x.TgZ(62,"textarea",207),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entitySample.note=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)}),x.ALo(63,"translate"),x.qZA(),x.qZA(),x.TgZ(64,"div",86),x.TgZ(65,"label",205),x.TgZ(66,"strong"),x._uU(67),x.ALo(68,"translate"),x.qZA(),x.qZA(),x.TgZ(69,"input",208),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entitySample.weight=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)})("keypress.enter",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)}),x.ALo(70,"translate"),x.qZA(),x.qZA(),x.TgZ(71,"div",86),x.TgZ(72,"label",205),x.TgZ(73,"strong"),x._uU(74),x.ALo(75,"translate"),x.qZA(),x.qZA(),x.TgZ(76,"ng-select",209),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entitySample.sample_nature_id=e})("change",function(){x.CHM(n);var e=x.oxw();return e._updateSample(e.entitySample)}),x.ALo(77,"translate"),x.ALo(78,"translate"),x.YNc(79,Ha,3,6,"ng-template",210),x.qZA(),x.qZA(),x.TgZ(80,"div",81),x.TgZ(81,"label",205),x.TgZ(82,"strong"),x._uU(83),x.ALo(84,"translate"),x.qZA(),x.qZA(),x.TgZ(85,"ng-select",211),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().selectedCategory0=e})("change",function(){return x.CHM(n),x.oxw().changeCategoryMatrix()}),x.ALo(86,"translate"),x.ALo(87,"translate"),x.YNc(88,Wa,3,6,"ng-template",210),x.qZA(),x.qZA(),x.TgZ(89,"div",81),x.TgZ(90,"label",205),x.TgZ(91,"strong"),x._uU(92),x.ALo(93,"translate"),x.qZA(),x.qZA(),x.TgZ(94,"ng-select",212),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().selectedSpecification0=e})("change",function(){x.CHM(n);var e=x.oxw();return e.changeSpecification(e.entitySample,e.selectedCategory0)}),x.YNc(95,ja,3,6,"ng-template",210),x.qZA(),x.qZA(),x.TgZ(96,"div",92),x._UZ(97,"br"),x.TgZ(98,"div",213),x.TgZ(99,"table",214),x.TgZ(100,"thead"),x.TgZ(101,"tr"),x.TgZ(102,"th",215),x._uU(103),x.ALo(104,"translate"),x.ALo(105,"number"),x.qZA(),x.qZA(),x.TgZ(106,"tr"),x.TgZ(107,"th",216),x._uU(108,"#"),x.qZA(),x.TgZ(109,"th",216),x._UZ(110,"i",132),x.qZA(),x.TgZ(111,"th",216),x._uU(112),x.ALo(113,"translate"),x.qZA(),x.TgZ(114,"th",216),x._uU(115),x.ALo(116,"translate"),x.qZA(),x.TgZ(117,"th",216),x._uU(118),x.ALo(119,"translate"),x.qZA(),x.TgZ(120,"th",216),x._uU(121,"LOD"),x.qZA(),x.TgZ(122,"th",217),x._uU(123),x.ALo(124,"translate"),x.qZA(),x.TgZ(125,"th",217),x._uU(126),x.ALo(127,"translate"),x.qZA(),x.TgZ(128,"th",216),x._uU(129),x.ALo(130,"translate"),x.qZA(),x.TgZ(131,"th",217),x._uU(132),x.ALo(133,"translate"),x.qZA(),x.TgZ(134,"th",216),x._uU(135),x.ALo(136,"translate"),x.qZA(),x.TgZ(137,"th",217),x._uU(138),x.ALo(139,"translate"),x.qZA(),x.TgZ(140,"th",217),x._uU(141),x.ALo(142,"translate"),x.qZA(),x.TgZ(143,"th",217),x._uU(144),x.ALo(145,"translate"),x.qZA(),x.TgZ(146,"th",217),x._uU(147),x.ALo(148,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(149,"tbody"),x.YNc(150,Ga,34,24,"tr",56),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(3),x.AsE(" ",x.lcZ(4,89,"Add new"),"/ ",x.lcZ(5,91,"Update")," "),x.xp6(10),x.Oqu(x.lcZ(14,93,"Name")),x.xp6(2),x.Q6J("ngModel",a.entityTemplate.name),x.xp6(3),x.Oqu(x.lcZ(19,95,"Number of sample")),x.xp6(2),x.Q6J("ngModel",a.entityTemplate.number_sample),x.xp6(3),x.Oqu(x.lcZ(24,97,"Total")),x.xp6(2),x.Q6J("ngModel",a.entityTemplate.total),x.xp6(6),x.Q6J("ngForOf",a._samples),x.xp6(2),x.Q6J("ngIf",a._samples.length>1),x.xp6(2),x.MGl("for","sample_name",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(38,99,"Sample name")),x.xp6(2),x.MGl("id","sample_name",a._currentTabActivated,""),x.MGl("name","sample_name",a._currentTabActivated,""),x.Q6J("ngModel",a.entitySample.sample_name)("placeholder",x.lcZ(40,101,"Sample name")+" "+a._currentTabActivated+" ("+x.lcZ(41,103,"Vietnamese")+")"),x.xp6(3),x.MGl("id","sample_namee",a._currentTabActivated,""),x.MGl("name","sample_namee",a._currentTabActivated,""),x.Q6J("ngModel",a.entitySample.sample_name_e)("placeholder",x.lcZ(43,105,"Sample name")+" "+a._currentTabActivated+" ("+x.lcZ(44,107,"English")+")"),x.xp6(4),x.MGl("for","description",a._currentTabActivated,""),x.xp6(2),x.AsE("",x.lcZ(49,109,"Description")," (",x.lcZ(50,111,"State of sample"),")"),x.xp6(3),x.MGl("id","description",a._currentTabActivated,""),x.MGl("name","description",a._currentTabActivated,""),x.Q6J("ngModel",a.entitySample.description)("placeholder",x.lcZ(52,113,"Description")+" "+a._currentTabActivated+" ("+x.lcZ(53,115,"Vietnamese")+")"),x.xp6(3),x.MGl("id","descriptione",a._currentTabActivated,""),x.MGl("name","descriptione",a._currentTabActivated,""),x.Q6J("ngModel",a.entitySample.description_e)("placeholder",x.lcZ(55,117,"Description")+" "+a._currentTabActivated+" ("+x.lcZ(56,119,"English")+")"),x.xp6(4),x.MGl("for","note",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(61,121,"Note")),x.xp6(2),x.MGl("id","note",a._currentTabActivated,""),x.MGl("name","note",a._currentTabActivated,""),x.Q6J("placeholder",x.lcZ(63,123,"Note")+" "+a._currentTabActivated)("ngModel",a.entitySample.note),x.xp6(3),x.MGl("for","weight",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(68,125,"Weight")),x.xp6(2),x.MGl("id","weight",a._currentTabActivated,""),x.MGl("name","weight",a._currentTabActivated,""),x.Q6J("placeholder",x.lcZ(70,127,"Weight")+" "+a._currentTabActivated)("ngModel",a.entitySample.weight),x.xp6(3),x.MGl("for","_samplenatures",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(75,129,"Sample nature")),x.xp6(2),x.Tol("ajustar"),x.MGl("name","_samplenatures",a._currentTabActivated,""),x.Q6J("items",a._samplenatures)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.entitySample.sample_nature_id)("placeholder",x.lcZ(77,131,"Please choose"))("notFoundText",x.lcZ(78,133,"Not found item")),x.xp6(5),x.MGl("for","matrix_category",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(84,135,"Matrix category")),x.xp6(2),x.Tol("ajustar"),x.Q6J("items",a._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCategory0)("placeholder",x.lcZ(86,137,"Please choose"))("notFoundText",x.lcZ(87,139,"Not found item")),x.xp6(5),x.MGl("for","para_assignment",a._currentTabActivated,""),x.xp6(2),x.Oqu(x.lcZ(93,141,"Parameter assignment")),x.xp6(2),x.Q6J("items",a._specifications)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSpecification0)("disabled",null==a.selectedCategory0),x.xp6(9),x.AsE(" ",x.lcZ(104,143,"Subtotal"),": ",x.lcZ(105,145,a.entitySample.total_sub)," (VND) "),x.xp6(9),x.Oqu(x.lcZ(113,147,"Code")),x.xp6(3),x.hij(" ",x.lcZ(116,149,"Specification")," "),x.xp6(3),x.Oqu(x.lcZ(119,151,"Method")),x.xp6(5),x.Oqu(x.lcZ(124,153,"Quantity")),x.xp6(3),x.Oqu(x.lcZ(127,155,"Unit")),x.xp6(3),x.Oqu(x.lcZ(130,157,"Unit price")),x.xp6(3),x.Oqu(x.lcZ(133,159,"Discount")),x.xp6(3),x.Oqu(x.lcZ(136,161,"Amount")),x.xp6(3),x.Oqu(x.lcZ(139,163,"Priority")),x.xp6(3),x.Oqu(x.lcZ(142,165,"TAT")),x.xp6(3),x.Oqu(x.lcZ(145,167,"Order")),x.xp6(3),x.Oqu(x.lcZ(148,169,"Hidden")),x.xp6(3),x.Q6J("ngForOf",a._orderdetailists)}}var za=function(){var t=function(){function t(e,a,i,o,r,l,s,c){n(this,t),this._authenService=e,this._dataService=a,this._route=i,this._notifyService=o,this._uploadService=r,this._excelService=l,this._numberFormat=s,this.modalService=c,this.isSave=!1,this._flagModal="",this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this.filter_status="",this._requestslist=[],this.entity={},this.baseFolder=p.h.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this._reqlist=[],this._checkAll=!1,this._dt1="",this._dt2="",this._fdate=new Date,this._tdate=new Date,this.selectedCustomer=null,this.selectedCustomerLabel=null,this.selectedCustomer1=null,this._customers=[],this._contacts=[],this._today=new Date,this.singleSelect=[],this._titleCopy="",this._idCopy="",this.exportList=[],this.isExportLoading=!1,this._fromdateStr="",this._todateStr="",this._fromdate=new Date,this._todate=new Date,this.pageIndex1=1,this.pageSize1=10,this.totalRow1=0,this.pageIndex2=1,this.pageSize2=10,this.totalRow2=0,this.isLoadingTemplate=!1,this._templatelist=[],this._keyword1="",this.entityTemplate={},this._currentTabActivated=1,this._samples=[],this.entitySample={},this._categories=[],this.selectedCategory0=null,this._specifications=[],this.selectedSpecification0=null,this._orderdetailists=[],this._idTemplate="",this._flagChooseTemplate=!1,this._samplenatures=[],this.sample_nature_id=null,(!1===e.checkAccess("REQ-LIST")||!1===e.hasPermission("REQ-LIST","read"))&&this._route.navigate(["/error/404"]),this.socket=g()(p.h.BASE_API)}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadCompanyLinks(),this.socket.on("refreshPage",function(t){e.loadData(),e.loadCompanyLinks()})}},{key:"loadData",value:function(){var t=this;this._isLoading=!0;var n={};n.page=this.pageIndex,n.limit=this.pageSize,n.filter=this._keyword,n.status=this.filter_status,n.domain=this.user.short_code,n.user_id=this.user.id,this._dataService.post("/request/getall",n).subscribe(function(n){var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({id:r.id,request_no:r.request_no,received_date:r.received_date,returned_date:r.returned_date,company_name_l:r.company_name_l,company_name_e:r.company_name_e,receive_company_e:r.receive_company_e,receive_company_l:r.receive_company_l,contact_name:r.contact_name,short_code:r.short_code,flag:!1,number_sample:r.number_sample,is_active:r.is_active,timestamp:r.timestamp,tax_vat:r.tax_vat,total:(parseFloat("NaN"==r.total?0:r.total)-parseInt(null==r.promo_special?0:r.promo_special))*(1-parseFloat(null==r.promo_perorder?0:r.promo_perorder)/100)*(1+parseFloat(null==r.tax_vat?0:r.tax_vat)/100),total_estimated:(parseFloat("NaN"==r.total_estimated?0:r.total_estimated)-parseInt(null==r.promo_special?0:r.promo_special))*(1-parseFloat(null==r.promo_perorder?0:r.promo_perorder)/100)*(1+parseFloat(null==r.tax_vat?0:r.tax_vat)/100),created_by:r.created_by,ordered_samples:r.ordered_samples,note:r.note,order_no:(null==r.employee_nr?"":r.employee_nr)+r.request_no.substr(2,r.request_no.length)})}}catch(l){o.e(l)}finally{o.f()}t._requestslist=i,t.totalRow=n.rowCount,t.totalPage=n.totalPages,t._isLoading=!1})}},{key:"loadCustomers",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/customer/getallcustomersnopaging",n).subscribe(function(n){var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({name:r.name_l,code:r.id})}}catch(l){o.e(l)}finally{o.f()}t._customers=i})}},{key:"loadCompanyLinks",value:function(){var t=this,n={};n.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",n).subscribe(function(n){var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({name:r.code_link,code:r.id})}}catch(l){o.e(l)}finally{o.f()}t._customers=i})}},{key:"_getInfoLabelCustomer",value:function(){var e=this;this.selectedCustomerLabel=null!=this.selectedCustomer?this._customers.filter(function(t){return t.code==e.selectedCustomer})[0].name:null}},{key:"_switchPercent",value:function(e){e>100&&(this.entity.promo_perorder=100)}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._requestslist.forEach(function(e){return t.exportList.push(e.id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!==t})}},{key:"loadContacts",value:function(t){var n=this;if(null==t)this.selectedContact=null;else{var a={};a.customer_id=t,this._dataService.post("/customer/getallcontactsnopaging",a).subscribe(function(t){console.log("Contact",t);var a,i=[],o=e(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({name:r.name_l,code:r.id})}}catch(l){o.e(l)}finally{o.f()}n._contacts=i})}}},{key:"changeCheckAll",value:function(t){var n=[];if(this._checkAll){var a,i=e(t);try{for(i.s();!(a=i.n()).done;){var o=a.value;n.push({id:o.id,request_no:o.request_no,received_date:o.received_date,returned_date:o.returned_date,cus_name_l:o.cus_name_l,cus_name_e:o.cus_name_e,contact_name_l:o.contact_name_l,contact_name_e:o.contact_name_e,short_code:o.short_code,flag:!0,number_sample:o.number_sample,is_active:o.is_active,timestamp:o.timestamp,tax_vat:o.tax_vat,total:o.total,created_by:o.created_by,ordered_samples:o.ordered_samples})}}catch(c){i.e(c)}finally{i.f()}}else{var r,l=e(t);try{for(l.s();!(r=l.n()).done;){var s=r.value;n.push({id:s.id,request_no:s.request_no,received_date:s.received_date,returned_date:s.returned_date,cus_name_l:s.cus_name_l,cus_name_e:s.cus_name_e,contact_name_l:s.contact_name_l,contact_name_e:s.contact_name_e,short_code:s.short_code,flag:!1,number_sample:s.number_sample,is_active:s.is_active,timestamp:s.timestamp,tax_vat:s.tax_vat,total:s.total,created_by:s.created_by,ordered_samples:s.ordered_samples})}}catch(c){l.e(c)}finally{l.f()}}this._requestslist=n}},{key:"_changeCheckOne",value:function(t){this._checkAll=!0;var n,a=[],i=e(this._requestslist);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(o.id==t.id?{id:o.id,request_no:o.request_no,received_date:o.received_date,returned_date:o.returned_date,cus_name_l:o.cus_name_l,cus_name_e:o.cus_name_e,contact_name_l:o.contact_name_l,contact_name_e:o.contact_name_e,short_code:o.short_code,flag:t.flag,number_sample:o.number_sample,is_active:o.is_active,timestamp:o.timestamp,tax_vat:o.tax_vat}:{id:o.id,request_no:o.request_no,received_date:o.received_date,returned_date:o.returned_date,cus_name_l:o.cus_name_l,cus_name_e:o.cus_name_e,contact_name_l:o.contact_name_l,contact_name_e:o.contact_name_e,short_code:o.short_code,flag:o.flag,number_sample:o.number_sample,is_active:o.is_active,timestamp:o.timestamp,tax_vat:o.tax_vat})}}catch(r){i.e(r)}finally{i.f()}this._requestslist=a}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this._checkAll||this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this._checkAll||this.socket.emit("refresh",{})}},{key:"loadDetail",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/request/detail",n).subscribe(function(e){t.entity=e.data,null!=e.data.customer_id?(t.selectedCustomer=e.data.customer_id,t.selectedCustomerLabel=t._customers.filter(function(e){return e.code==t.selectedCustomer})[0].name):(t.selectedCustomer=null,t.selectedCustomerLabel=null),null!=e.data.received_date&&(t._dt1=d(new Date(e.data.received_date)).format("YYYY-MM-DD HH:mm"),t._fdate=new Date(e.data.received_date)),null!=e.data.returned_date&&(t._dt2=d(new Date(e.data.returned_date)).format("YYYY-MM-DD HH:mm"),t._tdate=new Date(e.data.returned_date))})}},{key:"deleteItem",value:function(e){var t=this;Z().fire({title:"en"==this.user.lang?v.W.are_you_sure_en:v.W.are_you_sure,text:"en"==this.user.lang?e.category_name_e:e.category_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(n){if(n.value){var a={};a.id=e.id,t._dataService.post("/sample_matrix/deleteCat",a).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_DELETE_EN:v.W.MSG_DELETE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==t.user.lang?v.W.error_title_en:v.W.error_title)})}})}},{key:"saveChange",value:function(e){var t=this;if(this._fdate>this._tdate||null==e||0==this.entity.number_sample||null==this._fdate||null==this._tdate)this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_DATE_EN:v.W.MSG_ERROR_DATE,"en"==this.user.lang?v.W.error_title_en:v.W.error_title);else if(this.isSave=!0,this.entity.customer_id=e,this.entity.received_date=this._dt1,this.entity.returned_date=this._dt2,this.entity.userid=this.user.id,this.entity.ipaddress=this.user.ipaddress,"ADD"==this._flagModal){this.entity.short_code=this.user.short_code;var n=new Date;this.entity.timestamp=d(n).format("YYYY-MM-DD HH:mm:ss"),console.log(this.entity),this._dataService.post("/request/add",this.entity).subscribe(function(e){t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),t.entity={},t.entity.tax_vat=10,t.entity.number_sample=1,t.entity.is_active=0,t.entity.valid_number=5,t.selectedContact=null,t.selectedCustomer=null,t._fdate=null,t._tdate=null,t._dt1="",t._dt2="",t.isSave=!1,t.modalService.dismissAll()},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==t.user.lang?v.W.error_title_en:v.W.error_title)})}else console.log("Update",this.entity),this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/request/update",this.entity).subscribe(function(e){t.isSave=!1,t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),t.modalService.dismissAll()},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==t.user.lang?v.W.error_title_en:v.W.error_title)})}},{key:"orgValueChange1",value:function(e){null!=e&&"Invalid date"!=e?(this._fdate=e,this._tdate=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1=d(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=d(this._tdate).format("YYYY-MM-DD HH:mm")):(this._dt1="",this._fdate=null)}},{key:"orgValueChange2",value:function(e){null!=e&&"Invalid date"!=e?(this._tdate=e,this._dt1=d(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=d(this._tdate).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdate-this._fdate)/864e5)):(this._dt2="",this._tdate=null)}},{key:"_calculateDays",value:function(){null!=this._fdate&&(this._tdate=new Date(this._fdate.getTime()+864e5*this.entity.valid_number))}},{key:"_openModal",value:function(e,t){null==t?(this._flagModal="ADD",this.entity={},this.entity.tax_vat=10,this.entity.number_sample=1,this.entity.is_active=0,this.entity.valid_number=7,this.entity.is_issue_bill=!0,this.selectedContact=null,this.selectedCustomer=null,this._fdate=null,this._tdate=null,this._dt1="",this._dt2=""):(this._flagModal="UPDATE",this.loadDetail(t.id)),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"_routeDetail",value:function(e){this._route.navigate(["/request/detail/"+e.id])}},{key:"_exportAll",value:function(t){var n=this;console.log(t),this.isExportLoading=!0,this._dataService.post("/request/exportRequest",t).subscribe(function(t){if(t.data.length>0){var a,i=[],o=e(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({"Request No":r.request_no,"Customer Name":r.company_name_l,Contact:r.contact_name,"Received Date":d(new Date(r.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(r.returned_date)).format("DD/MM/YYYY"),"Samples Ordered":r.ordered_samples+"/"+(null==r.number_sample?"0":r.number_sample),"VAT (%)":null==r.tax_vat?"":r.tax_vat,Total:0==r.ordered_samples?"0":n._numberFormat.localeString(parseFloat(r.total)),Status:r.is_active?"Confirmed":"Cancelled","Created By":r.created_by,"Promotion Per Group":n._numberFormat.localeString(parseFloat(r.promotion_per_group)),"Promotion Per Order":n._numberFormat.localeString(parseFloat(r.promotion_per_order)),"Total before tax":n._numberFormat.localeString(parseFloat(r.before_tax)),"Total after tax":n._numberFormat.localeString(parseFloat(r.after_tax)).substr(0,n._numberFormat.localeString(parseFloat(r.after_tax)).lastIndexOf("."))})}}catch(l){o.e(l)}finally{o.f()}n._excelService.exportAsExcelFile(i,"Requests-"+d(new Date).format("YYYY-MM-DD")),n.isExportLoading=!1,n._notifyService.showSuccess("en"==n.user.lang?v.W.MSG_EXPORT_EN+" "+t.data.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+t.data.length+" "+v.W.record,"OK")}else n.isExportLoading=!1,n._notifyService.showWarning("en"==n.user.lang?v.W.MSG_EXPORT_EN+" 0 "+v.W.record_en:v.W.MSG_EXPORT+" 0 "+v.W.record,"en"==n.user.lang?v.W.error_title_en:v.W.error_title)},function(){n.isExportLoading=!1,n._notifyService.showError("en"==n.user.lang?v.W.MSG_EXPORTNO_EN:v.W.MSG_EXPORT_NO,"en"==n.user.lang?v.W.error_title_en:v.W.error_title)})}},{key:"_exportAllRangeWithStatus",value:function(e){this.modalService.open(e,{size:"md",centered:!0})}},{key:"openCopyModal",value:function(e,t,n){0==n?(this._titleCopy=t.request_no,this._idCopy=t.id):(this._titleCopy="en"==this.user.lang?"total of requests: ":"t\u1ed5ng s\u1ed1 y\xeau c\u1ea7u: "+t.length,this._idCopy=t),this.modalService.open(e,{size:"md",centered:!0})}},{key:"_copyRequest",value:function(e){var t=this,n={};n.id=this._idCopy,n.customer_id=e,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,this._dataService.post("/request/copy",n).subscribe(function(e){t._idCopy="",t._titleCopy="",t.selectedCustomer1=null,t.modalService.dismissAll(),t._notifyService.showSuccess("en"==t.user.lang?v.W.copy_msgok_en:v.W.copy_msgok,"OK"),t.socket.emit("refresh",{})})}},{key:"_copyAll",value:function(e,t){var n=this;console.log(e,t);var a={};a.ids=e,a.customer_id=t,a.userid=this.user.id,a.ipaddress=this.user.ipaddress,a.short_code=this.user.short_code,this._dataService.post("/request/copyAll",a).subscribe(function(e){n._idCopy="",n._titleCopy="",n.selectedCustomer1=null,n.modalService.dismissAll(),n._notifyService.showSuccess("en"==n.user.lang?v.W.copy_msgok_en:v.W.copy_msgok,"OK"),n.exportList=[],n.socket.emit("refresh",{})})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}},{key:"changeFromDate",value:function(e){null==e?(this._fromdateStr="",this._fromdate=null):(this._fromdateStr=d(e).format("YYYY-MM-DD"),this._fromdate=e)}},{key:"changeToDate",value:function(e){null==e?(this._todateStr="",this._todate=null):(this._todateStr=d(e).format("YYYY-MM-DD"),this._todate=e)}},{key:"_exportAllRangeWithStatusA",value:function(){var t=this;console.log(this._fromdate,this._todate),this._fromdate>this._todate||null==this._fromdate||null==this._todate?this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_DATE_EN:v.W.MSG_ERROR_DATE,"en"==this.user.lang?v.W.error_title_en:v.W.error_title):this._dataService.post("/request/exportRange",{from_date:this._fromdateStr,to_date:this._todateStr,short_code:this.user.short_code}).subscribe(function(n){if(n.data.length>0){var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({"Request No":r.request_no,"Customer Name":r.company_name_l,Contact:r.contact_name,"Received Date":d(new Date(r.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(r.returned_date)).format("DD/MM/YYYY"),"Samples Ordered":r.ordered_samples+"/"+(null==r.number_sample?"0":r.number_sample),"VAT (%)":null==r.tax_vat?"":r.tax_vat,Total:0==r.ordered_samples?"0":t._numberFormat.localeString(parseFloat(r.total)),Status:r.is_active?"Confirmed":"Cancelled","Created By":r.created_by,"Promotion Per Group":t._numberFormat.localeString(parseFloat(r.promotion_per_group)),"Promotion Per Order":t._numberFormat.localeString(parseFloat(r.promotion_per_order)),"Total Before Tax":t._numberFormat.localeString(parseFloat(r.before_tax)),"Total After Tax":t._numberFormat.localeString(parseFloat(r.after_tax)).substr(0,t._numberFormat.localeString(parseFloat(r.after_tax)).lastIndexOf(".")),"Issue Bill VAT":null!=r.is_issue_bill&&r.is_issue_bill?"Yes":"No",Note:r.note})}}catch(l){o.e(l)}finally{o.f()}t._excelService.exportAsExcelFile(i,"Requests-"+d(new Date).format("YYYY-MM-DD")),t.isExportLoading=!1,t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_EXPORT_EN+" "+n.data.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+n.data.length+" "+v.W.record,"OK"),t.modalService.dismissAll()}else t.isExportLoading=!1,t._notifyService.showWarning("en"==t.user.lang?v.W.MSG_EXPORT_EN+" 0 "+v.W.record_en:v.W.MSG_EXPORT+" 0 "+v.W.record,"en"==t.user.lang?v.W.error_title_en:v.W.error_title)},function(){t.isExportLoading=!1,t._notifyService.showError("en"==t.user.lang?v.W.MSG_EXPORTNO_EN:v.W.MSG_EXPORT_NO,"en"==t.user.lang?v.W.error_title_en:v.W.error_title)})}},{key:"loadTemplateList",value:function(){var t=this;this.isLoadingTemplate=!0;var n={};n.page=this.pageIndex1,n.limit=this.pageSize1,n.filter=this._keyword1,n.domain=this.user.short_code,this._dataService.post("/request/getalltemplates",n).subscribe(function(n){console.log(n);var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r,l=a.value,s=0,c=e(l.json.data);try{for(c.s();!(r=c.n()).done;){s+=r.value.order_details.length}}catch(d){c.e(d)}finally{c.f()}i.push({id:l.id,name:l.name,number_sample:l.number_sample,json:l.json,short_code:l.short_code,timestamp:l.timestamp,total:l.total,total_parameters:s})}}catch(d){o.e(d)}finally{o.f()}t._templatelist=i,t.totalRow1=n.rowCount,t.totalPage1=n.totalPages,t.isLoadingTemplate=!1})}},{key:"_pageSizeChangeTemplate",value:function(e){this.pageSize1=e.target.value,this.loadTemplateList()}},{key:"pageChangedTemplate",value:function(e){this.pageIndex1=e.page,this.loadTemplateList()}},{key:"openTemplateModal",value:function(e){this.loadTemplateList(),this.modalService.open(e,{size:"xl",centered:!0,backdrop:!1})}},{key:"popupTemplateModal",value:function(e,t){this.loadSampleNature(),this.loadCategories(),null==t?(this._currentTabActivated=1,this.entitySample={},this.entityTemplate={},this.entityTemplate.id=null,this.entityTemplate.name=null,this.entityTemplate.number_sample=1,this.entityTemplate.short_code=this.user.short_code,this.entityTemplate.total=0,this._orderdetailists=[],this._samples=[{id:1,sample_name:null,sample_name_e:null,description:null,description_e:null,note:null,weight:null,order_details:this._orderdetailists,total_sub:0,sample_nature_id:null}],this.entityTemplate.json={data:this._samples}):this.loadDetailRequestTemplate(t.id),this.modalService.open(e,{size:"xl",centered:!0})}},{key:"_changeSample",value:function(e){if(e>this._samples.length){for(var t=0;t<e-this._samples.length;t++)this._samples.push({id:this._samples.length+t+1,sample_name:null,sample_name_e:null,description:null,description_e:null,note:null,weight:null,order_details:[],total_sub:0});this.entityTemplate.json={data:this._samples},this.saveChangeSample()}else null!=this.entityTemplate.id&&this.loadDetailRequestTemplate(this.entityTemplate.id)}},{key:"_chooseTab",value:function(e){this.selectedSpecification0=null,this.selectedCategory0=null,this.sample_nature_id=null,this._currentTabActivated=e.id,this.entitySample=this._samples.filter(function(t){return t.id==e.id})[0],this._orderdetailists=this._samples.filter(function(t){return t.id==e.id})[0].order_details}},{key:"_updateSample",value:function(t){var n,a=e(this._samples);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.id==this._currentTabActivated&&(i.sample_name=null==t.sample_name?null:t.sample_name,i.sample_name_e=null==t.sample_name_e?null:t.sample_name_e,i.description=null==t.description?null:t.description,i.description_e=null==t.description_e?null:t.description_e,i.note=null==t.note?null:t.note,i.weight=null==t.weight?null:t.weight,i.total_sub=t.total_sub)}}catch(o){a.e(o)}finally{a.f()}this.entityTemplate.json={data:this._samples},this.saveChangeSample()}},{key:"_removeTab",value:function(t){var n,a=[],i=1,o=e(this._samples.filter(function(e){return e.id!=t}));try{for(o.s();!(n=o.n()).done;){var r=n.value;a.push({id:i,sample_name:r.sample_name,sample_name_e:r.sample_name_e,description:r.description,description_e:r.description_e,note:r.note,weight:r.weight,order_details:r.order_details}),i+=1}}catch(l){o.e(l)}finally{o.f()}this.entityTemplate.number_sample=a.length,this.entityTemplate.json={data:a},this.saveChangeSample()}},{key:"saveChangeSample",value:function(){var e=this;null==this.entityTemplate.id?this._dataService.post("/request/addRequestTemplate",this.entityTemplate).subscribe(function(t){e.loadDetailRequestTemplate(t.data.id),e.loadTemplateList()}):this._dataService.post("/request/updateRequestTemplate",this.entityTemplate).subscribe(function(t){e.loadDetailRequestTemplate(t.data.id)})}},{key:"loadDetailRequestTemplate",value:function(e){var t=this;this._dataService.post("/request/detailRequestTemplate",{id:e}).subscribe(function(e){t.entityTemplate=e.data,t._samples=e.data.json.data,t.entitySample=t._samples.filter(function(e){return e.id==t._currentTabActivated})[0],t._orderdetailists=t._samples.filter(function(e){return e.id==t._currentTabActivated})[0].order_details})}},{key:"loadCategories",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",n).subscribe(function(n){var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({name:"en"==t.user.lang?r.category_name_e:r.category_name_l,code:r.id})}}catch(l){o.e(l)}finally{o.f()}t._categories=i})}},{key:"changeCategoryMatrix",value:function(){this.loadSpecs(this.selectedCategory0)}},{key:"loadSpecs",value:function(t){var n=this;if(null!=t){var a={};a.domain=this.user.short_code,a.id=t,this._dataService.post("/sample_matrix/getallparametersnopagingbycat",a).subscribe(function(t){var a,i=[],o=e(t.data.filter(function(e){return e.is_active}));try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({name:r.specification_name_l,code:r.parameter_id})}}catch(l){o.e(l)}finally{o.f()}n._specifications=i})}else{var i={};i.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparametersnopaging",i).subscribe(function(t){var a,i=[],o=e(t.data.filter(function(e){return e.is_active}));try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({name:r.specification_name_l,code:r.id})}}catch(l){o.e(l)}finally{o.f()}n._specifications=i})}}},{key:"changeSpecification",value:function(e,t){console.log(this.selectedSpecification0,t),null!=this.selectedSpecification0&&null!=t&&this._addItemsTemplate(this.selectedSpecification0,e,t)}},{key:"_removeItemTemplate",value:function(e){var t=this;this._dataService.post("/request/removeItemOrderTemplate",{sample_id:e.sample_id,parameter_id:e.parameter_id,category_id:e.category_id,id:this.entityTemplate.id}).subscribe(function(e){t.loadDetailRequestTemplate(t.entityTemplate.id),t.loadTemplateList()})}},{key:"_addItemsTemplate",value:function(e,t,n){var a=this;console.log(e,t),this._dataService.post("/request/addItemOrderTemplate",{sample_id:this._currentTabActivated,parameter_id:e,category_id:n,priority:0,id:this.entityTemplate.id}).subscribe(function(e){console.log(e),a.selectedSpecification0=null,a.loadDetailRequestTemplate(a.entityTemplate.id),a.loadTemplateList()})}},{key:"_updateItemTemplate",value:function(e){var t=this;this._dataService.post("/request/updateItemTemplate",{id:this.entityTemplate.id,getlist:e}).subscribe(function(e){t.loadDetailRequestTemplate(t.entityTemplate.id)})}},{key:"_popupCopyTemplate",value:function(e,t){this.selectedCustomer1=null,this._idTemplate=t.id,this._flagChooseTemplate=!0,this._titleCopy="en"==this.user.lang?"From Template: "+t.name:"T\u1eeb nguy\xean m\u1eabu: "+t.name,this.modalService.open(e,{size:"md",centered:!0,backdrop:!1})}},{key:"deleteItemTemplate",value:function(e){var t=this;this._dataService.post("/request/deleteItemTemplate",{id:e.id}).subscribe(function(e){t.loadTemplateList(),t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_DELETE_EN:v.W.MSG_DELETE,"OK")})}},{key:"_copyTemplate",value:function(e,t){var n=this;this._dataService.post("/request/convertTemplate2Request",{id:e,customer_id:t,userid:this.user.id,ipaddress:this.user.ipaddress,short_code:this.user.short_code}).subscribe(function(e){console.log(e),n._notifyService.showSuccess("en"==n.user.lang?v.W.copy_msgok_en:v.W.copy_msgok,"OK"),n.selectedCustomer1=null,n.modalService.dismissAll(),n.socket.emit("refresh",{})})}},{key:"loadSampleNature",value:function(){var t=this;this._dataService.post("/sample_matrix/getallsamplenaturenopaging",{short_code:this.user.short_code}).subscribe(function(n){console.log(n);var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({id:r.id,name:"en"==t.user.lang?r.name_e:r.name_l})}}catch(l){o.e(l)}finally{o.f()}t._samplenatures=i})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(x.Y36(y.e),x.Y36(b.D),x.Y36(s.F0),x.Y36(A.c),x.Y36(T.C),x.Y36(q.x),x.Y36($e.p),x.Y36(M.FF))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-req-management"]],decls:119,vars:100,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[2,"width","130px"],[4,"ngIf"],["content",""],["contentRelationship",""],["contentCopy",""],["contentRangeDate",""],["contentTemplate",""],["contentAddTemplateModal",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-copy"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-bookmark-o"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","13",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-eye"],["class","btn btn-sm btn-primary mr-sm-1",3,"disabled","ngbTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"disabled","ngbTooltip","click"],[3,"ngbTooltip"],[1,"text-right"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-pencil"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"form","theme-form",3,"ngSubmit"],["f0","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","number_sample"],["type","number","id","number_sample","name","number_sample","required","","autocomplete","off","min","0",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["type","hidden","name","ID",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-3"],["for","tax_vat"],["type","number","id","tax_vat","name","tax_vat","required","","autocomplete","off","min","0",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","isOnOff"],[1,"checkbox","checkbox-primary"],["id","isOnOff","type","checkbox","name","isOnOff",3,"ngModel","ngModelChange"],[1,"col-md-12"],["for","title_promo_spec"],["type","text","id","title_promo_spec","name","title_promo_spec","autocomplete","off",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","promo_special_en"],["type","text","id","promo_special_en","name","promo_special_en","autocomplete","off","mask","separator.2","thousandSeparator",",",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","promo_perorder"],["type","number","id","promo_perorder","name","promo_perorder","autocomplete","off",3,"ngClass","placeholder","ngModel","min","max","disabled","ngModelChange","change"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["class","mute",4,"ngIf"],["for","received_date"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",3,"placeholder","ngClass","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdate","bsDatepicker","","autocomplete","off","required","",3,"placeholder","ngClass","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",3,"type","placeholder","ngClass","ngModel","disabled","min","ngModelChange","change"],["for","permission_write"],["id","permission_write","name","permission_write",1,"form-control",3,"ngModel","ngModelChange"],["for","comment"],["rows","2","id","comment","name","comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",4,"ngIf"],[1,"mute"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary"],["class","modal-title",4,"ngIf"],["class","form-group row",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"col-md-10"],["type","search","aria-label","Search","name","_keywordRel","autocomplete","off",1,"form-control","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"col-md-2"],["type","button",1,"btn","btn-primary","bt-sm",3,"click"],["class","form-inline my-2 my-lg-0",4,"ngIf"],[1,"form-inline","my-2","my-lg-0"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],["colspan","8",2,"text-align","center"],[2,"cursor","pointer",3,"click"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-trash"],["form1","ngForm"],["for","contact_name"],["type","text","id","contact_name","name","contact_name","required","","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","ngModelChange"],["for","contact_code"],["type","text","id","contact_code","name","contact_code","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","phone"],["type","text","id","phone","name","phone","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","email"],["type","text","id","email","name","email","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Descriptiona"],["rows","2","id","Descriptiona","name","Descriptiona",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Description1a"],["rows","2","id","Description1a","name","Description1a",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["id","permission_write","type","checkbox","name","permission_write",3,"ngModel","ngModelChange"],["type","submit","class","btn btn-primary mr-sm-1",3,"disabled",4,"ngIf"],["type","button","class","btn btn-warning mr-sm-1",3,"click",4,"ngIf"],["type","text","autocomplete","off","name","_keyword1",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["name","mypage","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[2,"overflow-x","auto"],["type","submit",1,"btn","btn-primary","mr-sm-1",3,"disabled"],["type","button",1,"btn","btn-warning","mr-sm-1",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","click"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],["form2","ngForm"],["for","link_code"],["id","link_code","name","link_code","rows","2",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","info_company_id"],["name","selectedCompany","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSender","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","button",1,"btn","btn-secondary","mr-sm-1",3,"click"],["type","button","class","btn btn-primary mr-sm-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","mr-sm-1",3,"click"],[1,"form","theme-form"],["for","company_en"],["name","selectedCustomer1","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["for","fromdate"],["id","fromdate","type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","fromdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["for","todate"],["id","todate","type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","todate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],[1,"col-md-12","text-center"],["href","javascript:;","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-warning",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-warning",3,"click"],["href","javascript:;",1,"btn","btn-sm","btn-warning"],[1,"col-md-9"],[1,"form-group","form-inline"],["type","text","name","_keyword",1,"form-control","mr-sm-1",3,"placeholder","ngModel","ngModelChange","keyup.enter","change"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"click"],["src","../../../../assets/img/circles.svg","width","17px","class","mr-sm-1",4,"ngIf"],["id","select151","name","select151",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["class","col-sm-12 col-lg-12 col-xl-12",4,"ngIf"],[2,"width","2px","text-align","center"],["src","../../../../assets/img/circles.svg","width","17px",1,"mr-sm-1"],["colspan","7",1,"text-center"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],[1,"btn","btn-sm","btn-secondary","mr-sm-1",3,"ngbTooltip","click"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"ngbTooltip","click"],[1,"col-md-7"],["for","temp_name"],["type","text","id","temp_name","name","temp_name","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","change"],["for","tmep_num_sample"],["type","number","id","tmep_num_sample","name","tmep_num_sample","autocomplete","off","min","1",1,"form-control",3,"ngModel","ngModelChange","keyup.enter","change"],["type","text","name","temp_total","autocomplete","off","mask","separator.2","thousandSeparator",",","disabled","",1,"form-control","jdisabled",3,"ngModel","ngModelChange"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"btn-group","flex-wrap"],[1,"col-sm-12","col-lg-12","col-xl-1","text-right"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[3,"for"],["type","text","autocomplete","off",1,"form-control",3,"id","name","ngModel","placeholder","ngModelChange","keyup.enter","change"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange","change"],["type","text",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange","change","keypress.enter"],["bindValue","id","bindLabel","name",3,"items","name","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["ng-option-tmp",""],["name","matrix_category","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSpecification0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],[1,"table-responsive",2,"max-height","200px"],["id","hor-minimalist-line-border"],["colspan","15",1,"text-right",2,"background-color","rgb(201, 201, 201)","color","black"],[1,"text-truncate"],[1,"scope"],["type","button",3,"ngClass","click"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],["container","body",3,"ngbTooltip"],["href","javascript:;",1,"text-danger",3,"click"],[3,"ngClass"],["type","text",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","text","min","0","mask","separator.2","thousandSeparator",",",1,"form-control",2,"width","100px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","text","min","0","mask","separator.2","thousandSeparator",",",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","number","min","0",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","checkbox",1,"form-control",3,"name","ngModel","ngModelChange","change"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"div",1),x.TgZ(6,"div",5),x.TgZ(7,"div",6),x.TgZ(8,"input",7),x.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.ALo(9,"translate"),x.qZA(),x.YNc(10,Wn,3,3,"button",8),x.YNc(11,jn,4,3,"button",9),x.YNc(12,Gn,5,6,"button",10),x.YNc(13,Bn,4,3,"button",11),x.YNc(14,zn,1,0,"img",12),x.qZA(),x.qZA(),x.TgZ(15,"div",13),x.TgZ(16,"div",14),x.TgZ(17,"select",15),x.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.TgZ(18,"option",16),x._uU(19,"#10"),x.qZA(),x.TgZ(20,"option",17),x._uU(21,"#25"),x.qZA(),x.TgZ(22,"option",18),x._uU(23,"#50"),x.qZA(),x.TgZ(24,"option",19),x._uU(25,"#100"),x.qZA(),x.qZA(),x.TgZ(26,"select",20),x.NdJ("ngModelChange",function(e){return t.filter_status=e})("change",function(){return t.loadData()}),x.TgZ(27,"option",21),x._uU(28),x.ALo(29,"translate"),x.qZA(),x.TgZ(30,"option",22),x._uU(31),x.ALo(32,"translate"),x.qZA(),x.TgZ(33,"option",23),x._uU(34),x.ALo(35,"translate"),x.qZA(),x.TgZ(36,"option",24),x._uU(37),x.ALo(38,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(39,"div",25),x.TgZ(40,"div",26),x.TgZ(41,"div",27),x.TgZ(42,"div",28),x.TgZ(43,"pagination",29),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(44,"div",30),x.TgZ(45,"a",31),x._uU(46),x.ALo(47,"translate"),x.ALo(48,"translate"),x.ALo(49,"translate"),x.ALo(50,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(51,"div",26),x.TgZ(52,"div",32),x.TgZ(53,"table",33),x.TgZ(54,"thead",34),x.TgZ(55,"tr"),x.TgZ(56,"th",35),x._uU(57,"#"),x.qZA(),x.TgZ(58,"th",36),x.TgZ(59,"input",37),x.NdJ("change",function(e){return t.selectAll(e)}),x.qZA(),x.qZA(),x.TgZ(60,"th",38),x._uU(61),x.ALo(62,"translate"),x.qZA(),x.TgZ(63,"th",36),x._uU(64),x.ALo(65,"translate"),x.qZA(),x.TgZ(66,"th",36),x._uU(67),x.ALo(68,"translate"),x.qZA(),x.TgZ(69,"th",36),x._uU(70),x.ALo(71,"translate"),x.qZA(),x.TgZ(72,"th",36),x._uU(73),x.ALo(74,"translate"),x.qZA(),x.TgZ(75,"th",36),x._uU(76),x.ALo(77,"translate"),x.qZA(),x.TgZ(78,"th",36),x._uU(79),x.ALo(80,"translate"),x.qZA(),x.TgZ(81,"th",36),x._uU(82),x.ALo(83,"translate"),x.qZA(),x.TgZ(84,"th",36),x._uU(85),x.ALo(86,"translate"),x.qZA(),x.TgZ(87,"th",36),x._uU(88),x.ALo(89,"translate"),x.qZA(),x.TgZ(90,"th",36),x._uU(91),x.ALo(92,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(93,"tbody"),x.YNc(94,Vn,6,3,"ng-container",39),x.YNc(95,ia,2,1,"ng-container",39),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(96,"div",26),x.TgZ(97,"div",27),x.TgZ(98,"div",28),x.TgZ(99,"pagination",29),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(100,"div",30),x.TgZ(101,"a",31),x._uU(102),x.ALo(103,"translate"),x.ALo(104,"translate"),x.ALo(105,"translate"),x.ALo(106,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(107,ca,121,122,"ng-template",null,40,x.W1O),x.YNc(109,Ca,12,7,"ng-template",null,41,x.W1O),x.YNc(111,La,17,9,"ng-template",null,42,x.W1O),x.YNc(113,Ia,25,17,"ng-template",null,43,x.W1O),x.YNc(115,Ea,59,33,"ng-template",null,44,x.W1O),x.YNc(117,Ba,151,171,"ng-template",null,45,x.W1O)),2&e&&(x.xp6(8),x.Q6J("placeholder",x.lcZ(9,52,"Search"))("ngModel",t._keyword),x.xp6(2),x.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","create")),x.xp6(1),x.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","report")),x.xp6(1),x.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","create")&&t.exportList.length>0),x.xp6(1),x.Q6J("ngIf",t._authenService.hasPermission("REQ-LIST","create")),x.xp6(1),x.Q6J("ngIf",t._isLoading),x.xp6(3),x.Q6J("ngModel",t.pageSize),x.xp6(9),x.Q6J("ngModel",t.filter_status),x.xp6(2),x.hij(" ",x.lcZ(29,54,"All")," "),x.xp6(3),x.hij(" ",x.lcZ(32,56,"Pending")," "),x.xp6(3),x.hij(" ",x.lcZ(35,58,"Confirmed")," "),x.xp6(3),x.hij(" ",x.lcZ(38,60,"Cancel")," "),x.xp6(6),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(47,62,"Total of records"),": ",t.totalRow," - ",x.lcZ(48,64,"Page")," ",t.pageIndex," ",x.lcZ(49,66,"of")," ",t.totalPage," ",x.lcZ(50,68,"page"),""),x.xp6(13),x.Q6J("disabled",0==t._requestslist.length)("checked",t.exportList.length==t._requestslist.length),x.xp6(2),x.Oqu(x.lcZ(62,70,"Actions")),x.xp6(3),x.hij(" ",x.lcZ(65,72,"Request code")," "),x.xp6(3),x.hij(" ",x.lcZ(68,74,"Order code")," "),x.xp6(3),x.hij(" ",x.lcZ(71,76,"Received date")," "),x.xp6(3),x.hij(" ",x.lcZ(74,78,"Customer")," "),x.xp6(3),x.hij(" ",x.lcZ(77,80,"Report company")," "),x.xp6(3),x.hij(" ",x.lcZ(80,82,"Total")," "),x.xp6(3),x.Oqu(x.lcZ(83,84,"Contact")),x.xp6(3),x.Oqu(x.lcZ(86,86,"Returned date")),x.xp6(3),x.Oqu(x.lcZ(89,88,"Status")),x.xp6(3),x.Oqu(x.lcZ(92,90,"Timestamp")),x.xp6(3),x.Q6J("ngIf",0==t._requestslist.length),x.xp6(1),x.Q6J("ngIf",t._requestslist.length>0),x.xp6(4),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(103,92,"Total of records"),": ",t.totalRow," - ",x.lcZ(104,94,"Page")," ",t.pageIndex," ",x.lcZ(105,96,"of")," ",t.totalPage," ",x.lcZ(106,98,"page"),""))},directives:[l.Fj,l.JJ,l.On,r.O5,l.EJ,l.YN,l.Kr,C.Qt,r.sg,M._L,l._Y,l.JL,l.F,l.qQ,l.wV,l.Q7,r.mk,l.Wl,nn.hx,l.Fd,w.w9,S.Y5,S.Np,l.c5,w.Z2],pipes:[k.X$,r.uU,r.JJ,r.OU],styles:[""]}),t}();function Va(e,t){if(1&e&&(x.TgZ(0,"option",45),x._uU(1),x.qZA()),2&e){var n=t.$implicit,a=x.oxw();x.Q6J("value",n.id),x.xp6(1),x.hij(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function $a(e,t){if(1&e&&(x.TgZ(0,"option",45),x._uU(1),x.qZA()),2&e){var n=t.$implicit,a=x.oxw();x.Q6J("value",n.id),x.xp6(1),x.hij(" ","en"==a.user.lang?n.csp_name_e:n.csp_name_l," ")}}function Ka(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",46),x.NdJ("click",function(){x.CHM(n);var e=x.oxw();return e._exportAll(e._preparationlist)}),x._UZ(1,"i",47),x._uU(2),x.ALo(3,"translate"),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,1,"Export")," "))}function Xa(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",48),x.NdJ("click",function(){return x.CHM(n),x.oxw()._exportAll1()}),x._UZ(1,"i",47),x._uU(2),x.ALo(3,"translate"),x.ALo(4,"translate"),x.qZA()}2&e&&(x.xp6(2),x.AsE(" ",x.lcZ(3,2,"Export")," ",x.lcZ(4,4,"All")," "))}function ei(e,t){1&e&&x._UZ(0,"img",49)}function ti(e,t){1&e&&(x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",50),x.TgZ(3,"h3",51),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.qZA(),x.BQk()),2&e&&(x.xp6(4),x.hij(" ",x.lcZ(5,1,"No records now!!!")," "))}function ni(e,t){1&e&&x._UZ(0,"i",65)}function ai(e,t){1&e&&x._UZ(0,"i",66)}function ii(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",62),x.NdJ("click",function(){return x.CHM(n),x.oxw(3)._switchFlagEdit()}),x.ALo(1,"translate"),x.YNc(2,ni,1,0,"i",63),x.YNc(3,ai,1,0,"i",64),x.qZA()}if(2&e){var a=x.oxw().$implicit,i=x.oxw(2);x.Q6J("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!i._authenService.hasPermission("REQ-PRE","update"))("title",x.lcZ(1,5,a.flag?"Edit":"Cancel")),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag)}}function oi(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",67),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(3);return e._updateStatusv2(e._preparationlist)}),x.ALo(1,"translate"),x._UZ(2,"i",68),x.qZA()}2&e&&x.Q6J("title",x.lcZ(1,1,"Save"))}function ri(e,t){if(1&e&&(x.ynx(0),x._uU(1),x.BQk()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.hij(" ",n.note_lab,"")}}function li(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"input",69),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.note_lab=e}),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.xp6(1),x.MGl("name","note_lab",i+1,""),x.Q6J("ngModel",o.note_lab)}}function si(e,t){1&e&&(x.TgZ(0,"span",70),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"None")))}function ci(e,t){1&e&&(x.TgZ(0,"span",71),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Preparation")))}function di(e,t){1&e&&(x.TgZ(0,"span",72),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Technical validation")))}function ui(e,t){1&e&&(x.TgZ(0,"span",73),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Validation")))}function gi(e,t){1&e&&(x.TgZ(0,"span",74),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Done")))}function pi(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"th",53),x._uU(2),x.qZA(),x.TgZ(3,"td"),x.YNc(4,ii,4,7,"button",54),x.YNc(5,oi,3,3,"button",55),x.qZA(),x.TgZ(6,"td"),x._uU(7),x.qZA(),x.TgZ(8,"td"),x._uU(9),x.qZA(),x.TgZ(10,"td"),x._uU(11),x.qZA(),x.TgZ(12,"td"),x._uU(13),x.qZA(),x.TgZ(14,"td"),x._uU(15),x.qZA(),x.TgZ(16,"td"),x._uU(17),x.qZA(),x.TgZ(18,"td"),x._uU(19),x.qZA(),x.TgZ(20,"td"),x._uU(21),x.qZA(),x.TgZ(22,"td"),x._uU(23),x.qZA(),x.TgZ(24,"td"),x.YNc(25,ri,2,1,"ng-container",44),x.YNc(26,li,2,2,"ng-container",44),x.qZA(),x.TgZ(27,"td",56),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw(2);return(1==e.status||0==e.status)&&e.flag&&t._authenService.hasPermission("REQ-PRE","update")?t._updateStatusItem(e):null}),x.YNc(28,si,3,3,"span",57),x.YNc(29,ci,3,3,"span",58),x.YNc(30,di,3,3,"span",59),x.YNc(31,ui,3,3,"span",60),x.YNc(32,gi,3,3,"span",61),x.qZA(),x.qZA()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(2),x.hij(" ",i+1+o.pageSize*(o.pageIndex-1)," "),x.xp6(2),x.Q6J("ngIf",0==a.status||1==a.status),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.hij(" ",a.order_code," "),x.xp6(2),x.Oqu(a.inner_code),x.xp6(2),x.hij(" ",a.code," "),x.xp6(2),x.hij(" ","en"==o.user.lang?a.specification_name_e:a.specification_name_l," "),x.xp6(2),x.hij(" ","en"==o.user.lang?a.para_name_e:a.para_name_l," "),x.xp6(2),x.hij(" ","en"==o.user.lang?a.category_name_e:a.category_name_l," "),x.xp6(2),x.Oqu("en"==o.user.lang?a.nature_name_e:a.nature_name_l),x.xp6(2),x.Oqu(a.tat),x.xp6(2),x.Oqu(a.note),x.xp6(2),x.Q6J("ngIf",!a.flag),x.xp6(1),x.Q6J("ngIf",a.flag),x.xp6(2),x.Q6J("ngIf",0==a.status),x.xp6(1),x.Q6J("ngIf",1==a.status),x.xp6(1),x.Q6J("ngIf",2==a.status),x.xp6(1),x.Q6J("ngIf",3==a.status),x.xp6(1),x.Q6J("ngIf",4==a.status)}}function _i(e,t){if(1&e&&(x.ynx(0),x.YNc(1,pi,33,19,"tr",52),x.BQk()),2&e){var n=x.oxw();x.xp6(1),x.Q6J("ngForOf",n._preparationlist)}}var hi=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},mi=function(){var t=function(){function t(e,a,i,o,r,l,s,c){n(this,t),this._authenService=e,this._dataService=a,this._route=i,this._notifyService=o,this._uploadService=r,this._excelService=l,this.formatPipe=s,this.modalService=c,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=9,this.entity={},(!1===e.checkAccess("REQ-PRE")||!1===e.hasPermission("REQ-PRE","read"))&&this._route.navigate(["/error/404"]),this.socket=g()(p.h.BASE_API)}return i(t,[{key:"ngOnInit",value:function(){this.user=this._authenService.getLoggedInUser(),console.log(this._authenService.hasPermission("REQ-PRE","update")),this.loadData(),this.loadDepartment(),this.loadTestFamilyCSP()}},{key:"loadData",value:function(){var t=this,n={};n.filter=this._keyword,n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.department_id=this.department_id,n.family_id=this.testcsp_id,n.flag_status=this._status,n.page=this.pageIndex,n.limit=this.pageSize,this._dataService.post("/lab/getlistlabspre",n).subscribe(function(n){var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push({order_code:r.employee_nr+r.request_no.substr(2,r.request_no.length),code:r.code,code_father:r.code_father,company_code:r.company_code,company_name_e:r.company_name_e,company_name_l:r.company_name_l,contact_name:r.contact_name,customer_id:r.customer_id,email:r.email,employee_nr:r.employee_nr,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,mark:r.mark,note_asm:r.note_asm,para_name_e:r.para_name_e,para_name_l:r.para_name_l,nature_name_e:r.nature_name_e,nature_name_l:r.nature_name_l,parameter_id:r.parameter_id,phone:r.phone,received_date:r.received_date,request_no:r.request_no,result_record:r.result_record,returned_date:r.returned_date,sale_man:r.sale_man,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,flag:!1,note_lab:r.note_lab,status:r.status,note:r.note,category_name_e:r.category_name_e,category_name_l:r.category_name_l,tat:r.tat,dept_name_e:r.dept_name_e,dept_name_l:r.dept_name_l,csp_name_e:r.csp_name_e,csp_name_l:r.csp_name_l,receiver_company:r.receiver_company,receiver_contact:r.receiver_contact,biller_company:r.biller_company,biller_contact:r.biller_contact,price:r.price,quantity:r.quantity,state_of_report:r.state_of_report})}}catch(l){o.e(l)}finally{o.f()}t._preparationlist=i,t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.loadData()}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.loadData()}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyCSP",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",t).subscribe(function(t){e._csplist=t.data})}},{key:"_exportAll",value:function(t){console.log("Origin",t);var n,a=[],i=e(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,r="";4==o.status&&(r="en"==this.user.lang?v.W.s_done_en:v.W.s_done),3==o.status&&(r="en"==this.user.lang?v.W.s_validate_en:v.W.s_validate),2==o.status&&(r="en"==this.user.lang?v.W.s_techvalidate_en:v.W.s_techvalidate),1==o.status&&(r="en"==this.user.lang?v.W.s_prepare_en:v.W.s_prepare),0==o.status&&(r="en"==this.user.lang?v.W.s_none_en:v.W.s_none);var l=new Date(o.received_date).getTime()+864e5*o.tat,s="en"==this.user.lang?o.csp_name_e:o.csp_name_l,c=o.company_name_l+(null==o.phone?"":"/Phone: "+o.phone),u="";null!=o.receiver_company&&(u=o.receiver_company.company_name_l+(null==o.receiver_company.address_l?"":"/Address: "+o.receiver_company.address_l));var g="";null!=o.biller_company&&(g=o.biller_company.company_name_l+(null==o.biller_company.tax_code?"":"/Tax code: "+o.biller_company.tax_code)+(null==o.biller_company.address_l?"":"/Address: "+o.biller_company.address_l),null!=o.biller_contact&&(g+=(null==o.biller_contact.email?"":"/Email: "+o.biller_contact.email)+(null==o.biller_contact.phone?"":"/Phone: "+o.biller_contact.phone)));var p="Unknown";0==o.state_of_report&&(p="Draft"),1==o.state_of_report&&(p="Official"),2==o.state_of_report&&(p="Evicted"),3==o.state_of_report&&(p="Printed"),4==o.state_of_report&&(p="Cancel"),a.push({"Request No":o.request_no,"Inner code":o.inner_code,Code:o.code,"Internal test":o.specification_name_l,Parameter:o.para_name_l,"Sample matrix":o.category_name_l,"Priority TAT":o.tat,Note:null==o.note?"":o.note,"Note to Lab":null==o.note_lab?"":o.note_lab,Status:r,"Received Date":d(new Date(o.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(l)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?o.dept_name_e:o.dept_name_l,CSP:null==s?"":s,"Sample name":o.sample_name,Sender:c,Receiver:u,Biller:g,"Customer code":o.company_code,BD:o.employee_nr,Amount:this.formatPipe.localeString(o.price*o.quantity),"State of report":p})}}catch(_){i.e(_)}finally{i.f()}this._excelService.exportAsExcelFile(a,"Preparation-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_EXPORT_EN+" "+t.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+t.length+" "+v.W.record,"OK")}},{key:"_exportAll1",value:function(){var t=this,n={};n.filter=this._keyword,n.domain=this.user.short_code,this._dataService.post("/lab/exportgetlistlabspre",n).subscribe(function(n){var a,i=[],o=e(n.data);try{for(o.s();!(a=o.n()).done;){var r=a.value,l="";4==r.status&&(l="en"==t.user.lang?v.W.s_done_en:v.W.s_done),3==r.status&&(l="en"==t.user.lang?v.W.s_validate_en:v.W.s_validate),2==r.status&&(l="en"==t.user.lang?v.W.s_techvalidate_en:v.W.s_techvalidate),1==r.status&&(l="en"==t.user.lang?v.W.s_prepare_en:v.W.s_prepare),0==r.status&&(l="en"==t.user.lang?v.W.s_none_en:v.W.s_none);var s=new Date(r.received_date).getTime()+864e5*r.tat,c="en"==t.user.lang?r.csp_name_e:r.csp_name_l,u=r.company_name_l+(null==r.phone?"":"/Phone: "+r.phone),g="";null!=r.receiver_company&&(g=r.receiver_company.company_name_l+(null==r.receiver_company.address_l?"":"/Address: "+r.receiver_company.address_l));var p="";null!=r.biller_company&&(p=r.biller_company.company_name_l+(null==r.biller_company.tax_code?"":"/Tax code: "+r.biller_company.tax_code)+(null==r.biller_company.address_l?"":"/Address: "+r.biller_company.address_l),null!=r.biller_contact&&(p+=(null==r.biller_contact.email?"":"/Email: "+r.biller_contact.email)+(null==r.biller_contact.phone?"":"/Phone: "+r.biller_contact.phone)));var _="Unknown";0==r.state_of_report&&(_="Draft"),1==r.state_of_report&&(_="Official"),2==r.state_of_report&&(_="Evicted"),3==r.state_of_report&&(_="Printed"),4==r.state_of_report&&(_="Cancel"),i.push({"Request No":r.request_no,"Inner code":r.inner_code,Code:r.code,"Internal test":r.specification_name_l,Parameter:r.para_name_l,"Sample matrix":r.category_name_l,"Priority TAT":r.tat,Note:null==r.note?"":r.note,"Note to Lab":null==r.note_lab?"":r.note_lab,Status:l,"Received Date":d(new Date(r.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(s)).format("DD/MM/YYYY"),Department:"en"==t.user.lang?r.dept_name_e:r.dept_name_l,CSP:null==c?"":c,"Sample name":r.sample_name,Sender:u,Receiver:g,Biller:p,"Customer code":r.company_code,BD:r.employee_nr,Amount:t.formatPipe.localeString(r.price*r.quantity),"State of report":_})}}catch(h){o.e(h)}finally{o.f()}t._excelService.exportAsExcelFile(i,"Preparation-"+d(new Date).format("YYYY-MM-DD")),t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_EXPORT_EN+" "+i.length+" "+v.W.record_en:v.W.MSG_EXPORT+" "+i.length+" "+v.W.record,"OK")})}},{key:"orgValueChange1",value:function(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e,t){var n=this;console.log(e),1==t?(e.status=t,Z().fire({title:"en"==this.user.lang?v.W.are_u_sure_switch_en:v.W.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData()}):n.loadData()})):(console.log(e),this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData()}))}},{key:"_switchFlagEdit",value:function(){var t,n=e(this._preparationlist);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.flag=!a.flag}}catch(i){n.e(i)}finally{n.f()}}},{key:"_updateStatusItem",value:function(e,t){e.status=0==e.status?1:0,this._preparationlist.filter(function(t){return t.sample_id==e.sample_id&&t.parameter_id==e.parameter_id&&t.category_id==e.category_id})[0].status=e.status}},{key:"_updateStatusv2",value:function(e){var t=this;Z().fire({title:"en"==this.user.lang?v.W.are_u_sure_switch_en:v.W.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(n){n.value&&t._dataService.post("/lab/updateResultPreparationv2",{getlist:e,ipaddress:t.user.ipaddress,user_id:t.user.id,short_code:t.user.short_code}).subscribe(function(e){t.loadData()})})}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.loadData(),e._notifyService.showSuccess("en"==e.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==e.user.lang?v.W.error_title_en:v.W.error_title)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(x.Y36(y.e),x.Y36(b.D),x.Y36(s.F0),x.Y36(A.c),x.Y36(T.C),x.Y36(q.x),x.Y36($e.p),x.Y36(M.FF))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-req-preparelab"]],hostBindings:function(e,t){1&e&&x.NdJ("click",function(e){return t.ngOnInit(e)},!1,x.evT)},decls:125,vars:124,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","13",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],[3,"ngClass","disabled","title","click",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"div",1),x.TgZ(6,"div",5),x.TgZ(7,"div",6),x.TgZ(8,"input",7),x.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.ALo(9,"translate"),x.qZA(),x.TgZ(10,"input",8),x.NdJ("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.qZA(),x.TgZ(11,"input",9),x.NdJ("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.qZA(),x.TgZ(12,"select",10),x.NdJ("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),x.TgZ(13,"option",11),x._uU(14),x.ALo(15,"translate"),x.ALo(16,"translate"),x.qZA(),x.YNc(17,Va,2,2,"option",12),x.qZA(),x.TgZ(18,"select",13),x.NdJ("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),x.TgZ(19,"option",11),x._uU(20),x.ALo(21,"translate"),x.qZA(),x.YNc(22,$a,2,2,"option",12),x.qZA(),x.TgZ(23,"select",14),x.NdJ("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.TgZ(24,"option",15),x._uU(25),x.ALo(26,"translate"),x.qZA(),x.TgZ(27,"option",16),x._uU(28),x.ALo(29,"translate"),x.qZA(),x.TgZ(30,"option",17),x._uU(31),x.ALo(32,"translate"),x.qZA(),x.TgZ(33,"option",18),x._uU(34),x.ALo(35,"translate"),x.qZA(),x.TgZ(36,"option",19),x._uU(37),x.ALo(38,"translate"),x.qZA(),x.TgZ(39,"option",20),x._uU(40),x.ALo(41,"translate"),x.qZA(),x.qZA(),x.YNc(42,Ka,4,3,"button",21),x.YNc(43,Xa,5,6,"button",22),x.YNc(44,ei,1,0,"img",23),x.qZA(),x.qZA(),x.TgZ(45,"div",24),x.TgZ(46,"div",25),x.TgZ(47,"select",26),x.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.TgZ(48,"option",27),x._uU(49,"#10"),x.qZA(),x.TgZ(50,"option",28),x._uU(51,"#25"),x.qZA(),x.TgZ(52,"option",29),x._uU(53,"#50"),x.qZA(),x.TgZ(54,"option",30),x._uU(55,"#100"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(56,"div",31),x.TgZ(57,"div",32),x.TgZ(58,"div",33),x.TgZ(59,"div",34),x.TgZ(60,"pagination",35),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(61,"div",36),x.TgZ(62,"a",37),x._uU(63),x.ALo(64,"translate"),x.ALo(65,"translate"),x.ALo(66,"translate"),x.ALo(67,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(68,"div",32),x.TgZ(69,"div",38),x.TgZ(70,"table",39),x.TgZ(71,"thead",40),x.TgZ(72,"tr"),x.TgZ(73,"th",41),x._uU(74,"#"),x.qZA(),x.TgZ(75,"th",42),x._uU(76),x.ALo(77,"translate"),x.qZA(),x.TgZ(78,"th",43),x._uU(79),x.ALo(80,"translate"),x.qZA(),x.TgZ(81,"th",43),x._uU(82),x.ALo(83,"translate"),x.qZA(),x.TgZ(84,"th",43),x._uU(85),x.ALo(86,"translate"),x.qZA(),x.TgZ(87,"th",43),x._uU(88),x.ALo(89,"translate"),x.qZA(),x.TgZ(90,"th",43),x._uU(91),x.ALo(92,"translate"),x.qZA(),x.TgZ(93,"th",43),x._uU(94),x.ALo(95,"translate"),x.qZA(),x.TgZ(96,"th",43),x._uU(97),x.ALo(98,"translate"),x.qZA(),x.TgZ(99,"th",43),x._uU(100),x.ALo(101,"translate"),x.qZA(),x.TgZ(102,"th",43),x._uU(103),x.ALo(104,"translate"),x.qZA(),x.TgZ(105,"th",43),x._uU(106),x.ALo(107,"translate"),x.qZA(),x.TgZ(108,"th",43),x._uU(109),x.ALo(110,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(111,"tbody"),x.YNc(112,ti,6,3,"ng-container",44),x.YNc(113,_i,2,1,"ng-container",44),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(114,"div",32),x.TgZ(115,"div",33),x.TgZ(116,"div",34),x.TgZ(117,"pagination",35),x.NdJ("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(118,"div",36),x.TgZ(119,"a",37),x._uU(120),x.ALo(121,"translate"),x.ALo(122,"translate"),x.ALo(123,"translate"),x.ALo(124,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()),2&e&&(x.xp6(8),x.Q6J("placeholder",x.lcZ(9,62,"Search"))("ngModel",t._keyword),x.xp6(2),x.Q6J("ngModel",t._fDate)("bsConfig",x.DdM(122,hi)),x.xp6(1),x.Q6J("ngModel",t._tDate)("bsConfig",x.DdM(123,hi)),x.xp6(1),x.Q6J("ngModel",t.department_id),x.xp6(2),x.AsE(" ",x.lcZ(15,64,"All")," ",x.lcZ(16,66,"Department")," "),x.xp6(3),x.Q6J("ngForOf",t._deptlist),x.xp6(1),x.Q6J("ngModel",t.testcsp_id),x.xp6(2),x.hij("",x.lcZ(21,68,"All")," CSP"),x.xp6(2),x.Q6J("ngForOf",t._csplist),x.xp6(1),x.Q6J("ngModel",t._status),x.xp6(2),x.hij(" ",x.lcZ(26,70,"All")," "),x.xp6(3),x.hij(" ",x.lcZ(29,72,"None")," "),x.xp6(3),x.hij(" ",x.lcZ(32,74,"Preparation")," "),x.xp6(3),x.hij(" ",x.lcZ(35,76,"Technical validation")," "),x.xp6(3),x.hij(" ",x.lcZ(38,78,"Validation")," "),x.xp6(3),x.hij(" ",x.lcZ(41,80,"Done")," "),x.xp6(2),x.Q6J("ngIf",t._authenService.hasPermission("REQ-PRE","report")),x.xp6(1),x.Q6J("ngIf",t._authenService.hasPermission("REQ-PRE","report")),x.xp6(1),x.Q6J("ngIf",t._isLoading),x.xp6(3),x.Q6J("ngModel",t.pageSize),x.xp6(13),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(64,82,"Total of records"),": ",t.totalRow," - ",x.lcZ(65,84,"Page")," ",t.pageIndex," ",x.lcZ(66,86,"of")," ",t.totalPage," ",x.lcZ(67,88,"page"),""),x.xp6(13),x.Oqu(x.lcZ(77,90,"Actions")),x.xp6(3),x.hij(" ",x.lcZ(80,92,"Order code")," "),x.xp6(3),x.hij(" ",x.lcZ(83,94,"Inner code")," "),x.xp6(3),x.hij(" ",x.lcZ(86,96,"Code")," "),x.xp6(3),x.Oqu(x.lcZ(89,98,"Internal testing")),x.xp6(3),x.Oqu(x.lcZ(92,100,"Parameter name")),x.xp6(3),x.Oqu(x.lcZ(95,102,"Sample matrix")),x.xp6(3),x.Oqu(x.lcZ(98,104,"Sample nature")),x.xp6(3),x.Oqu(x.lcZ(101,106,"Priority")),x.xp6(3),x.Oqu(x.lcZ(104,108,"Note")),x.xp6(3),x.Oqu(x.lcZ(107,110,"Note lab")),x.xp6(3),x.Oqu(x.lcZ(110,112,"Status")),x.xp6(3),x.Q6J("ngIf",0==t._preparationlist.length),x.xp6(1),x.Q6J("ngIf",t._preparationlist.length>0),x.xp6(4),x.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.xp6(3),x.Q0o("",x.lcZ(121,114,"Total of records"),": ",t.totalRow," - ",x.lcZ(122,116,"Page")," ",t.pageIndex," ",x.lcZ(123,118,"of")," ",t.totalPage," ",x.lcZ(124,120,"page"),""))},directives:[l.Fj,l.JJ,l.On,S.Y5,S.Np,l.EJ,l.YN,l.Kr,r.sg,r.O5,C.Qt,r.mk],pipes:[k.X$],styles:[""]}),t}(),fi=["tagInput"];function Zi(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",37),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(),t=x.MAs(88);return e._openModal(t,null)}),x._uU(1),x.ALo(2,"translate"),x.qZA()}2&e&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"Add new request")," "))}function vi(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",38),x.NdJ("click",function(){x.CHM(n);var e=x.oxw();return e._exportAll(e.exportList)}),x._UZ(1,"i",39),x._uU(2),x.ALo(3,"translate"),x.qZA()}2&e&&(x.xp6(2),x.hij(" ",x.lcZ(3,1,"Export")," "))}function xi(e,t){1&e&&x._UZ(0,"img",40)}function yi(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",41),x.TgZ(1,"div",42),x.TgZ(2,"pagination",43),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().pageIndex=e})("pageChanged",function(e){return x.CHM(n),x.oxw().pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(3,"div",44),x.TgZ(4,"a",45),x._uU(5),x.ALo(6,"translate"),x.ALo(7,"translate"),x.ALo(8,"translate"),x.ALo(9,"translate"),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(2),x.Q6J("boundaryLinks",!0)("totalItems",a.totalRow)("ngModel",a.pageIndex)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSize),x.xp6(3),x.Q0o("",x.lcZ(6,12,"Total of records"),": ",a.totalRow," - ",x.lcZ(7,14,"Page")," ",a.pageIndex," ",x.lcZ(8,16,"of")," ",a.totalPage," ",x.lcZ(9,18,"page"),"")}}function bi(e,t){1&e&&(x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",46),x.TgZ(3,"h4"),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.qZA(),x.BQk()),2&e&&(x.xp6(4),x.Oqu(x.lcZ(5,1,"No records now!!!")))}function Ai(e,t){1&e&&(x.TgZ(0,"span"),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Cash")))}function Ti(e,t){1&e&&(x.TgZ(0,"span"),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Transfer bank")))}function qi(e,t){1&e&&(x.TgZ(0,"span"),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Visa/Master")))}function Mi(e,t){1&e&&(x.TgZ(0,"span"),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Cheque")))}function Si(e,t){1&e&&(x.TgZ(0,"span",59),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Unpaid")))}function Ci(e,t){1&e&&(x.TgZ(0,"span",60),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Delivery-Unpaid")))}function wi(e,t){1&e&&(x.TgZ(0,"span",61),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Delivery-Paid")))}function ki(e,t){1&e&&(x.TgZ(0,"span",62),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Cancel-Unpaid")))}function Li(e,t){1&e&&(x.TgZ(0,"span",63),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e&&(x.xp6(1),x.Oqu(x.lcZ(2,1,"Cancel-Refund")))}function Ui(e,t){if(1&e&&(x.TgZ(0,"span",69),x._uU(1),x.qZA()),2&e){var n=t.$implicit;x.xp6(1),x.Oqu(n)}}function Ni(e,t){if(1&e&&(x.TgZ(0,"tr"),x.TgZ(1,"td",66),x._uU(2),x.qZA(),x.TgZ(3,"td",66),x._uU(4),x.qZA(),x.TgZ(5,"td",66),x._uU(6),x.qZA(),x.TgZ(7,"td",66),x._uU(8),x.qZA(),x.TgZ(9,"td",66),x._uU(10),x.qZA(),x.TgZ(11,"td",66),x.YNc(12,Ui,2,1,"span",67),x.qZA(),x.TgZ(13,"td",66),x._uU(14),x.qZA(),x.TgZ(15,"td",68),x._uU(16),x.ALo(17,"number"),x.qZA(),x.TgZ(18,"td",68),x._uU(19),x.ALo(20,"number"),x.qZA(),x.qZA()),2&e){var n=t.$implicit,a=t.index,i=x.oxw(4);x.xp6(2),x.Oqu(a+1),x.xp6(2),x.hij(" ","en"==i.user.lang?n.name_e:n.name_l," "),x.xp6(2),x.hij(" ",n.color_name_l," "),x.xp6(2),x.Oqu(n.code),x.xp6(2),x.hij(" ",n.quantity_info," "),x.xp6(2),x.Q6J("ngForOf",n.tags),x.xp6(2),x.hij(" ",n.total," "),x.xp6(2),x.hij(" ",x.lcZ(17,9,n.price)," "),x.xp6(3),x.hij(" ",x.lcZ(20,11,n.amount)," ")}}function Di(e,t){if(1&e&&(x.TgZ(0,"tr"),x.TgZ(1,"td",64),x.TgZ(2,"strong"),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"div",28),x.TgZ(6,"table",65),x.TgZ(7,"thead"),x.TgZ(8,"th",66),x._uU(9,"#"),x.qZA(),x.TgZ(10,"th",66),x._uU(11),x.ALo(12,"translate"),x.qZA(),x.TgZ(13,"th",66),x._uU(14),x.ALo(15,"translate"),x.qZA(),x.TgZ(16,"th",66),x._uU(17),x.ALo(18,"translate"),x.qZA(),x.TgZ(19,"th",66),x._uU(20),x.ALo(21,"translate"),x.qZA(),x.TgZ(22,"th",66),x._uU(23),x.ALo(24,"translate"),x.qZA(),x.TgZ(25,"th",66),x._uU(26),x.ALo(27,"translate"),x.qZA(),x.TgZ(28,"th",66),x._uU(29),x.ALo(30,"translate"),x.qZA(),x.TgZ(31,"th",66),x._uU(32),x.ALo(33,"translate"),x.qZA(),x.qZA(),x.TgZ(34,"tbody"),x.YNc(35,Ni,21,13,"tr",47),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()),2&e){var n=x.oxw().$implicit;x.xp6(3),x.Oqu(x.lcZ(4,10,"Items Information")),x.xp6(8),x.hij(" ",x.lcZ(12,12,"Type of fabric")," "),x.xp6(3),x.hij(" ",x.lcZ(15,14,"Color name")," "),x.xp6(3),x.hij(" ",x.lcZ(18,16,"Mix-Fabric code")," "),x.xp6(3),x.hij(" ",x.lcZ(21,18,"Quantity")," "),x.xp6(3),x.hij(" ",x.lcZ(24,20,"Description")," "),x.xp6(3),x.hij(" ",x.lcZ(27,22,"Total")," (kg) "),x.xp6(3),x.hij(" ",x.lcZ(30,24,"Price")," "),x.xp6(3),x.hij(" ",x.lcZ(33,26,"Amount")," "),x.xp6(3),x.Q6J("ngForOf",n.orders)}}function Ii(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td"),x._uU(3),x.qZA(),x.TgZ(4,"td"),x.TgZ(5,"input",48),x.NdJ("change",function(e){var t=x.CHM(n).$implicit;return x.oxw(2).selectItem(e,t.id)}),x.qZA(),x.qZA(),x.TgZ(6,"td"),x._uU(7),x.ALo(8,"date"),x.qZA(),x.TgZ(9,"td",49),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return e.expanded=!e.expanded}),x._uU(10),x.qZA(),x.TgZ(11,"td"),x._uU(12),x.qZA(),x.TgZ(13,"td"),x._uU(14),x.qZA(),x.TgZ(15,"td"),x._uU(16),x.ALo(17,"number"),x.qZA(),x.TgZ(18,"td"),x.YNc(19,Ai,3,3,"span",35),x.YNc(20,Ti,3,3,"span",35),x.YNc(21,qi,3,3,"span",35),x.YNc(22,Mi,3,3,"span",35),x.qZA(),x.TgZ(23,"td"),x.YNc(24,Si,3,3,"span",50),x.YNc(25,Ci,3,3,"span",51),x.YNc(26,wi,3,3,"span",52),x.YNc(27,ki,3,3,"span",53),x.YNc(28,Li,3,3,"span",54),x.qZA(),x.TgZ(29,"td"),x._uU(30),x.qZA(),x.TgZ(31,"td"),x.TgZ(32,"button",55),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw(2),a=x.MAs(88);return t._openModal(a,e)}),x.ALo(33,"translate"),x._UZ(34,"i",56),x.qZA(),x.TgZ(35,"button",57),x.NdJ("click",function(){var e=x.CHM(n).$implicit;return x.oxw(2).printQuotationAsPDF(e)}),x.ALo(36,"translate"),x._UZ(37,"i",58),x.qZA(),x.qZA(),x.qZA(),x.YNc(38,Di,36,28,"tr",35),x.BQk()}if(2&e){var a=t.$implicit,i=t.index,o=x.oxw(2);x.xp6(3),x.Oqu(i+1+o.pageSize*(o.pageIndex-1)),x.xp6(2),x.MGl("name","ckU1",i+1,""),x.Q6J("checked",o.exportList.includes(a.id)),x.xp6(2),x.Oqu(x.xi3(8,21,a.issue_date,"dd/MM/yyyy HH:mm")),x.xp6(3),x.hij(" ",a.code," "),x.xp6(2),x.hij(" ","en"==o.user.lang?a.company_name_e:a.company_name_l," "),x.xp6(2),x.Oqu(a.phone),x.xp6(2),x.Oqu(x.lcZ(17,24,a.total)),x.xp6(3),x.Q6J("ngIf",0==a.payment),x.xp6(1),x.Q6J("ngIf",1==a.payment),x.xp6(1),x.Q6J("ngIf",2==a.payment),x.xp6(1),x.Q6J("ngIf",3==a.payment),x.xp6(2),x.Q6J("ngIf",0==a.is_active),x.xp6(1),x.Q6J("ngIf",1==a.is_active),x.xp6(1),x.Q6J("ngIf",2==a.is_active),x.xp6(1),x.Q6J("ngIf",3==a.is_active),x.xp6(1),x.Q6J("ngIf",4==a.is_active),x.xp6(2),x.Oqu(a.username),x.xp6(2),x.Q6J("ngbTooltip",x.lcZ(33,26,"Edit")),x.xp6(3),x.Q6J("ngbTooltip",x.lcZ(36,28,"Print")),x.xp6(3),x.Q6J("ngIf",a.expanded)}}function Yi(e,t){if(1&e&&(x.ynx(0),x.YNc(1,Ii,39,30,"ng-container",47),x.BQk()),2&e){var n=x.oxw();x.xp6(1),x.Q6J("ngForOf",n._categories)}}function Ji(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",41),x.TgZ(1,"div",42),x.TgZ(2,"pagination",43),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().pageIndex=e})("pageChanged",function(e){return x.CHM(n),x.oxw().pageChanged(e)}),x.qZA(),x.qZA(),x.TgZ(3,"div",44),x.TgZ(4,"a",45),x._uU(5),x.ALo(6,"translate"),x.ALo(7,"translate"),x.ALo(8,"translate"),x.ALo(9,"translate"),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(2),x.Q6J("boundaryLinks",!0)("totalItems",a.totalRow)("ngModel",a.pageIndex)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSize),x.xp6(3),x.Q0o("",x.lcZ(6,12,"Total of records"),": ",a.totalRow," - ",x.lcZ(7,14,"Page")," ",a.pageIndex," ",x.lcZ(8,16,"of")," ",a.totalPage," ",x.lcZ(9,18,"page"),"")}}function Oi(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"ng-select",100),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).entity.customer_id=e})("change",function(){x.CHM(n);var e=x.oxw(2);return e.loadLabel(e.entity.customer_id)}),x.ALo(1,"translate"),x.ALo(2,"translate"),x.qZA()}if(2&e){var a=x.oxw(2);x.Q6J("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("bindLabel","en"==a.user.lang?"company_name_e":"company_name_l")("ngModel",a.entity.customer_id)("placeholder",x.lcZ(1,8,"Please choose"))("notFoundText",x.lcZ(2,10,"Not found item"))}}var Qi=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function Pi(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"input",101),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2)._fdate=e})("bsValueChange",function(e){return x.CHM(n),x.oxw(2).orgValueChange(e)}),x.ALo(1,"translate"),x.qZA()}if(2&e){var a=x.oxw(2);x.Q6J("placeholder",x.lcZ(1,3,"Issue of date"))("ngModel",a._fdate)("bsConfig",x.DdM(5,Qi))}}function Ei(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"input",102),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2)._dt1=e}),x.qZA()}if(2&e){var a=x.oxw(2);x.Q6J("ngModel",a._dt1)}}function Ri(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",77),x.TgZ(1,"div",84),x.TgZ(2,"label",103),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.TgZ(5,"select",104),x.NdJ("change",function(){x.CHM(n);var e=x.oxw(2);return 2!=e.entity.is_active?null:e._confirmFinalOrder()})("ngModelChange",function(e){return x.CHM(n),x.oxw(2).entity.is_active=e}),x.TgZ(6,"option",20),x._uU(7),x.ALo(8,"translate"),x.qZA(),x.TgZ(9,"option",21),x._uU(10),x.ALo(11,"translate"),x.qZA(),x.TgZ(12,"option",22),x._uU(13),x.ALo(14,"translate"),x.qZA(),x.TgZ(15,"option",23),x._uU(16),x.ALo(17,"translate"),x.qZA(),x.TgZ(18,"option",24),x._uU(19),x.ALo(20,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){var a=x.oxw(2);x.xp6(3),x.Oqu(x.lcZ(4,8,"Status")),x.xp6(2),x.Q6J("disabled",2==a.entity.is_active)("ngModel",a.entity.is_active),x.xp6(2),x.Oqu(x.lcZ(8,10,"Unpaid")),x.xp6(3),x.Oqu(x.lcZ(11,12,"Delivery-Unpaid")),x.xp6(3),x.Oqu(x.lcZ(14,14,"Delivery-Paid")),x.xp6(3),x.Oqu(x.lcZ(17,16,"Cancel-Unpaid")),x.xp6(3),x.Oqu(x.lcZ(20,18,"Cancel-Refund"))}}function Fi(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"ng-select",107),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(3).selectId=e})("change",function(){x.CHM(n);var e=x.oxw(3);return e.addItem(e.selectId)}),x.ALo(2,"translate"),x.ALo(3,"translate"),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(3);x.xp6(1),x.Q6J("items",a._fabrics)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectId)("placeholder",x.lcZ(2,7,"Please choose"))("notFoundText",x.lcZ(3,9,"Not found item"))}}function Hi(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"ng-select",107),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(3).selectId=e})("change",function(){x.CHM(n);var e=x.oxw(3);return e.addItem(e.selectId)}),x.ALo(2,"translate"),x.ALo(3,"translate"),x.qZA(),x.BQk()}if(2&e){var a=x.oxw(3);x.xp6(1),x.Q6J("items",a._fabrics)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectId)("placeholder",x.lcZ(2,7,"Please choose"))("notFoundText",x.lcZ(3,9,"Not found item"))}}function Wi(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",79),x.TgZ(1,"label",105),x.TgZ(2,"a",106),x.NdJ("click",function(){return x.CHM(n),x.oxw(2).loadProducts(!0)}),x._uU(3),x.ALo(4,"translate"),x.ALo(5,"translate"),x.qZA(),x._uU(6," | "),x.TgZ(7,"a",106),x.NdJ("click",function(){return x.CHM(n),x.oxw(2).loadProducts(!1)}),x._uU(8),x.ALo(9,"translate"),x.ALo(10,"translate"),x.qZA(),x.qZA(),x.YNc(11,Fi,4,11,"ng-container",35),x.YNc(12,Hi,4,11,"ng-container",35),x.qZA()}if(2&e){var a=x.oxw(2);x.xp6(2),x.Q6J("ngClass",a.flagIsType?"text-danger":"text-secondary"),x.xp6(1),x.AsE("",x.lcZ(4,8,"Items")," ",x.lcZ(5,10,"Mixed fabrics"),""),x.xp6(4),x.Q6J("ngClass",a.flagIsType?"text-secondary":"text-danger"),x.xp6(1),x.AsE("",x.lcZ(9,12,"Items")," ",x.lcZ(10,14,"Fabrics"),""),x.xp6(3),x.Q6J("ngIf",a.flagIsType),x.xp6(1),x.Q6J("ngIf",!a.flagIsType)}}function ji(e,t){1&e&&(x.TgZ(0,"th",66),x._UZ(1,"i",108),x.qZA())}function Gi(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"td",66),x.TgZ(1,"a",115),x.NdJ("click",function(){x.CHM(n);var e=x.oxw().$implicit;return x.oxw(2).removeItem(e.mixfabric_id)}),x._UZ(2,"i",108),x.qZA(),x.qZA()}}function Bi(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"input",116),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.quantity_info=e})("change",function(){x.CHM(n);var e=x.oxw().$implicit;return x.oxw(2).updateItem(e)}),x.qZA()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.MGl("id","ck",i+1,""),x.MGl("name","ck",i+1,""),x.Q6J("ngModel",o.quantity_info)}}function zi(e,t){if(1&e&&(x.TgZ(0,"span"),x._uU(1),x.qZA()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.Oqu(n.quantity_info)}}function Vi(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"input",117),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.tag=e})("keyup.enter",function(){x.CHM(n);var e=x.oxw().$implicit;return x.oxw(2)._addTag(e)})("change",function(){x.CHM(n);var e=x.oxw().$implicit;return x.oxw(2)._addTag(e)}),x.qZA()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.MGl("id","tag",i+1,""),x.MGl("name","tag",i+1,""),x.Q6J("ngModel",o.tag)}}function $i(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"span",118),x.NdJ("click",function(){var e=x.CHM(n).$implicit,t=x.oxw().$implicit,a=x.oxw(2);return 0==a.entity.is_active?a._removeTag(t,e):null}),x._uU(1),x.qZA()}if(2&e){var a=t.$implicit;x.xp6(1),x.Oqu(a)}}function Ki(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"input",119),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.price=e})("change",function(){x.CHM(n);var e=x.oxw().$implicit;return x.oxw(2).updateItem(e)}),x.qZA()}if(2&e){var a=x.oxw(),i=a.index,o=a.$implicit;x.MGl("id","p",i+1,""),x.MGl("name","p",i+1,""),x.Q6J("ngModel",o.price)}}function Xi(e,t){if(1&e&&(x.TgZ(0,"span"),x._uU(1),x.ALo(2,"number"),x.qZA()),2&e){var n=x.oxw().$implicit;x.xp6(1),x.Oqu(x.lcZ(2,1,n.price))}}function eo(e,t){if(1&e&&(x.TgZ(0,"tr"),x.YNc(1,Gi,3,0,"td",96),x.TgZ(2,"td",66),x._uU(3),x.qZA(),x.TgZ(4,"td",66),x._uU(5),x.qZA(),x.TgZ(6,"td",66),x._uU(7),x.qZA(),x.TgZ(8,"td",66),x._uU(9),x.qZA(),x.TgZ(10,"td",66),x.YNc(11,Bi,1,3,"input",109),x.YNc(12,zi,2,1,"span",35),x.qZA(),x.TgZ(13,"td"),x.YNc(14,Vi,1,3,"input",110),x._uU(15," ("),x.TgZ(16,"span",82),x._uU(17),x.qZA(),x._uU(18,") "),x.TgZ(19,"small",111),x.YNc(20,$i,2,1,"span",112),x.qZA(),x.qZA(),x.TgZ(21,"td",113),x._uU(22),x.ALo(23,"number"),x.qZA(),x.TgZ(24,"td",68),x.YNc(25,Ki,1,3,"input",114),x.YNc(26,Xi,3,3,"span",35),x.qZA(),x.TgZ(27,"td",68),x._uU(28),x.ALo(29,"number"),x.qZA(),x.qZA()),2&e){var n=t.$implicit,a=t.index,i=x.oxw(2);x.xp6(1),x.Q6J("ngIf",0==i.entity.is_active),x.xp6(2),x.Oqu(a+1),x.xp6(2),x.hij(" ",n.fabric_name," "),x.xp6(2),x.Oqu(n.color_name_l),x.xp6(2),x.Oqu(n.code),x.xp6(2),x.Q6J("ngIf",0==i.entity.is_active),x.xp6(1),x.Q6J("ngIf",0!=i.entity.is_active),x.xp6(2),x.Q6J("ngIf",0==i.entity.is_active),x.xp6(3),x.Oqu(n.count),x.xp6(3),x.Q6J("ngForOf",n.tags),x.xp6(2),x.hij(" ",x.lcZ(23,14,n.total)," "),x.xp6(3),x.Q6J("ngIf",0==i.entity.is_active),x.xp6(1),x.Q6J("ngIf",0!=i.entity.is_active),x.xp6(2),x.hij(" ",x.lcZ(29,16,n.amount)," ")}}function to(e,t){1&e&&(x.ynx(0),x.TgZ(1,"a",120),x._UZ(2,"img",121),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.BQk()),2&e&&(x.xp6(3),x.hij(" ",x.lcZ(4,1,"Processing")," "))}function no(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"button",122),x.NdJ("click",function(){x.CHM(n);var e=x.oxw(2);return e.printQuotationAsPDF(e.entity)}),x.ALo(1,"translate"),x._UZ(2,"i",58),x._uU(3),x.ALo(4,"translate"),x.qZA()}2&e&&(x.Q6J("ngbTooltip",x.lcZ(1,2,"Print")),x.xp6(3),x.hij(" ",x.lcZ(4,4,"Print")," "))}function ao(e,t){if(1&e&&(x.TgZ(0,"button",123),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&e){x.oxw();var n=x.MAs(1);x.Q6J("disabled",!n.valid),x.xp6(1),x.hij(" ",x.lcZ(2,2,"Save")," ")}}function io(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"form",70,71),x.NdJ("ngSubmit",function(){return x.CHM(n),x.oxw().saveChange()}),x.TgZ(2,"div",72),x.TgZ(3,"h4",73),x._uU(4),x.ALo(5,"translate"),x.ALo(6,"translate"),x.ALo(7,"translate"),x.qZA(),x.TgZ(8,"button",74),x.NdJ("click",function(){return x.CHM(n).$implicit.dismiss("Cross click")}),x.TgZ(9,"span",75),x._uU(10,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(11,"div",76),x.TgZ(12,"div",1),x.TgZ(13,"div",77),x.TgZ(14,"div",78),x.TgZ(15,"div",79),x.TgZ(16,"label",80),x.TgZ(17,"strong"),x._uU(18),x.ALo(19,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(20,"div",79),x.TgZ(21,"label",81),x._uU(22),x.ALo(23,"translate"),x.TgZ(24,"span",82),x._uU(25,"(*)"),x.qZA(),x.qZA(),x.YNc(26,Oi,3,12,"ng-select",83),x.qZA(),x.TgZ(27,"div",77),x.TgZ(28,"div",84),x.TgZ(29,"label",85),x._uU(30),x.ALo(31,"translate"),x.TgZ(32,"span",82),x._uU(33,"(*)"),x.qZA(),x.qZA(),x.YNc(34,Pi,2,6,"input",86),x.YNc(35,Ei,1,1,"input",87),x.qZA(),x.qZA(),x.TgZ(36,"div",77),x.TgZ(37,"div",84),x.TgZ(38,"label",88),x._uU(39),x.ALo(40,"translate"),x.qZA(),x.TgZ(41,"select",89),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().entity.payment=e}),x.TgZ(42,"option",90),x._uU(43),x.ALo(44,"translate"),x.qZA(),x.TgZ(45,"option",20),x._uU(46),x.ALo(47,"translate"),x.qZA(),x.TgZ(48,"option",21),x._uU(49),x.ALo(50,"translate"),x.qZA(),x.TgZ(51,"option",22),x._uU(52),x.ALo(53,"translate"),x.qZA(),x.TgZ(54,"option",23),x._uU(55),x.ALo(56,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(57,Ri,21,20,"div",91),x.TgZ(58,"div",79),x.TgZ(59,"div",84),x.TgZ(60,"label",92),x._uU(61),x.ALo(62,"translate"),x.qZA(),x._uU(63,"\xa0 "),x.TgZ(64,"span",93),x.TgZ(65,"strong"),x._uU(66),x.ALo(67,"number"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(68,"div",77),x.TgZ(69,"div",78),x.TgZ(70,"div",79),x.TgZ(71,"label",80),x.TgZ(72,"strong"),x._uU(73),x.ALo(74,"translate"),x.qZA(),x.qZA(),x.qZA(),x.YNc(75,Wi,13,16,"div",94),x.TgZ(76,"div",95),x.TgZ(77,"div",28),x.TgZ(78,"table",65),x.TgZ(79,"thead"),x.YNc(80,ji,2,0,"th",96),x.TgZ(81,"th",66),x._uU(82,"#"),x.qZA(),x.TgZ(83,"th",66),x._uU(84),x.ALo(85,"translate"),x.qZA(),x.TgZ(86,"th",66),x._uU(87),x.ALo(88,"translate"),x.qZA(),x.TgZ(89,"th",66),x._uU(90),x.ALo(91,"translate"),x.qZA(),x.TgZ(92,"th",66),x._uU(93),x.ALo(94,"translate"),x.qZA(),x.TgZ(95,"th",66),x._uU(96),x.ALo(97,"translate"),x._UZ(98,"br"),x._uU(99,"VD: 10.5-12.4-11-12.5 "),x.qZA(),x.TgZ(100,"th",66),x._uU(101),x.ALo(102,"translate"),x.qZA(),x.TgZ(103,"th",66),x._uU(104),x.ALo(105,"translate"),x.qZA(),x.TgZ(106,"th",66),x._uU(107),x.ALo(108,"translate"),x.qZA(),x.qZA(),x.TgZ(109,"tbody"),x.YNc(110,eo,30,18,"tr",47),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(111,"div",97),x.YNc(112,to,5,3,"ng-container",35),x.YNc(113,no,5,6,"button",98),x.YNc(114,ao,3,4,"button",99),x.qZA(),x.qZA()}if(2&e){var a=x.oxw();x.xp6(4),x.AsE(" ","ADD"==a._flagModal?x.lcZ(5,34,"Add new"):x.lcZ(6,36,"Update")," #",x.lcZ(7,38,a.entity.code)," "),x.xp6(14),x.Oqu(x.lcZ(19,40,"General Information")),x.xp6(4),x.hij("",x.lcZ(23,42,"Customer")," "),x.xp6(4),x.Q6J("ngIf",0==a.entity.is_active),x.xp6(4),x.hij("",x.lcZ(31,44,"Issue of date")," "),x.xp6(4),x.Q6J("ngIf",0==a.entity.is_active),x.xp6(1),x.Q6J("ngIf",0!=a.entity.is_active),x.xp6(4),x.Oqu(x.lcZ(40,46,"Payment method")),x.xp6(2),x.Q6J("ngModel",a.entity.payment)("disabled",0!=a.entity.is_active),x.xp6(2),x.hij(" ",x.lcZ(44,48,"Please choose")," "),x.xp6(3),x.Oqu(x.lcZ(47,50,"Cash")),x.xp6(3),x.Oqu(x.lcZ(50,52,"Transfer bank")),x.xp6(3),x.Oqu(x.lcZ(53,54,"Visa/Mater")),x.xp6(3),x.Oqu(x.lcZ(56,56,"Cheque")),x.xp6(2),x.Q6J("ngIf","ADD"!=a._flagModal),x.xp6(4),x.Oqu(x.lcZ(62,58,"Total")),x.xp6(5),x.hij("",x.lcZ(67,60,a.entity.total)," VND"),x.xp6(7),x.Oqu(x.lcZ(74,62,"Items Information")),x.xp6(2),x.Q6J("ngIf",0==a.entity.is_active),x.xp6(5),x.Q6J("ngIf",0==a.entity.is_active),x.xp6(4),x.hij(" ",x.lcZ(85,64,"Type of fabric")," "),x.xp6(3),x.hij(" ",x.lcZ(88,66,"Color name")," "),x.xp6(3),x.hij(" ",x.lcZ(91,68,"Mix-Fabric code")," "),x.xp6(3),x.Oqu(x.lcZ(94,70,"Quantity")),x.xp6(3),x.hij(" ",x.lcZ(97,72,"Description")," "),x.xp6(5),x.hij(" ",x.lcZ(102,74,"Total")," (kg) "),x.xp6(3),x.Oqu(x.lcZ(105,76,"Price")),x.xp6(3),x.Oqu(x.lcZ(108,78,"Amount")),x.xp6(3),x.Q6J("ngForOf",a._orders),x.xp6(2),x.Q6J("ngIf",a.isSave),x.xp6(1),x.Q6J("ngIf",null!=a.entity.id),x.xp6(1),x.Q6J("ngIf",!a.isSave&&2!=a.entity.is_active)}}h().vfs=m.I.vfs;var oo=[{path:"",children:[{path:"list",component:za,data:{title:"Request Management",breadcrumb:"Request Management"}},{path:"detail/:id",component:Hn,data:{title:"Request detail",breadcrumb:"Request detail"}},{path:"lab-preparation",component:mi,data:{title:"Lab preparation",breadcrumb:"Lab preparation"}},{path:"lab-result",component:kt,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"lab-validation",component:en,data:{title:"Lab validation",breadcrumb:"Lab validation"}},{path:"lab-report-validation",component:Ye,data:{title:"Lab Report Validation",breadcrumb:"Lab Report Validation"}},{path:"lab-report-validation/:id",component:Ye,data:{title:"Validation"}},{path:"lab-report",component:ze,data:{title:"Lab report",breadcrumb:"Lab report"}},{path:"lab-results/:id",component:ue,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"orders-fabric",component:function(){var t=function(){function t(e,a,i,o,r,l,s,c,d){n(this,t),this._authService=e,this.modalService=a,this._dataService=i,this._route=o,this._notifyService=r,this._uploadService=l,this._excelService=s,this.formatPipe=c,this._utilityServce=d,this.isSave=!1,this.isSaveSub=!1,this.isImport=!1,this._flagModal="ADD",this._flagSubModal="",this._title="",this._subTitle="",this.baseFolder=p.h.BASE_API+"/",this._categories=[],this.exportList=[],this.entity={},this.entitySub={},this.formData=new FormData,this.pageIndex=1,this.pageSize=10,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._payment="",this._customers=[],this._fdate=null,this._dt1=null,this._fabrics=[],this._fabricsCompare=[],this._fabricsCompare1=[],this._orders=[],this.selectId=null,this.tags=["html","Angular"],this._numTags=0,this.flagIsType=!0,(!1===e.checkAccess("FAB-ORDER")||!1===e.hasPermission("FAB-ORDER","read"))&&this._route.navigate(["/error/404"]),this.socket=g()(p.h.BASE_API)}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",function(t){e.loadData(),e.loadCompany(),e.loadProducts(e.flagIsType)})}},{key:"loadData",value:function(){var t=this,n={};n.page=this.pageIndex,n.limit=this.pageSize,n.filter=this._keyword,n.payment=this._payment,console.log(n),this._dataService.post("/order/getall",n).subscribe(function(n){console.log("Test",n),t._categories=n.data;var a,i=e(t._categories);try{for(i.s();!(a=i.n()).done;){var o,r=a.value,l=[],s=e(r.orders);try{for(s.s();!(o=s.n()).done;){var c=o.value;l.push({amount:c.amount,code:c.code,color_id:c.color_id,color_name_e:c.color_name_e,color_name_l:c.color_name_l,description:c.description,is_active:c.is_active,mixfabric_id:c.mixfabric_id,name_e:c.name_e,name_l:c.name_l,order_id:c.order_id,price:c.price,provider_name_e:c.provider_name_e,provider_name_l:c.provider_name_l,quantity_info:c.quantity_info,total:c.total,type_id:c.type_id,tags:JSON.parse(c.description)})}}catch(d){s.e(d)}finally{s.f()}r.orders=l}}catch(d){i.e(d)}finally{i.f()}t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"loadProducts",value:function(t){var n=this;this.flagIsType=t,t?this._dataService.post("/mix-fabric/getallnp",null).subscribe(function(t){console.log("Check warehouse",t);var a,i=[],o=e(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value,l="en"==n.user.lang?"-Quantity (segment/kg):":"-S\u1ed1 l\u01b0\u1ee3ng (c\xe2y/kg):",s="Lo\u1ea1i: "+r.name_l+"- M\xe0u: "+r.color_name_l;r.total_segment_re>0&&i.push({id:r.id,name:r.code+"-"+s+l+r.total_segment_re+"/"+r.total_kg_re})}}catch(c){o.e(c)}finally{o.f()}n._fabrics=i,n._fabricsCompare=t.data}):(this._fabrics=[],this._dataService.post("/mix-fabric/getalloriginfabricsnp",null).subscribe(function(t){console.log("Check warehouse IN",t);var a,i=[],o=e(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value,l="en"==n.user.lang?"-Quantity (segment/kg):":"-S\u1ed1 l\u01b0\u1ee3ng (c\xe2y/kg):",s="Lo\u1ea1i: "+r.name_l;r.remaining_segment>0&&i.push({id:r.id,name:s+l+r.remaining_segment+"/"+r.remaining_kg})}}catch(c){o.e(c)}finally{o.f()}n._fabrics=i,n._fabricsCompare1=t.data}))}},{key:"loadProductNull",value:function(){var e=this;this._dataService.post("/mix-fabric/getalloriginfabricsnp",null).subscribe(function(t){e._fabricsCompare1=t.data})}},{key:"loadCompany",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",t).subscribe(function(t){e._customers=t.data})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._categories.forEach(function(e){return t.exportList.push(e.id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!==t})}},{key:"loadLabel",value:function(e){var t=this._customers.filter(function(t){return t.id==e});this._flagSubModal=null==e?"":t[0].code_link}},{key:"_openModal",value:function(e,t){this.loadCompany(),this.loadProducts(this.flagIsType),null==t?(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.code=null,this.entity.payment=null,this.entity.total=0,this._orders=[],this._fdate=null,this._dt1=null,this.entity.is_active=0,this._flagSubModal=""):(this.loadProductNull(),this._flagModal="UPDATE",this._flagSubModal="en"==this.user.lang?t.company_name_e:t.company_name_l,this.loadDetail(t.id)),this.modalService.open(e,{size:"xl",centered:!0})}},{key:"loadDetail",value:function(t){var n=this;this._dataService.post("/order/detail",{id:t}).subscribe(function(t){console.log("Testing detail",t),n.entity=t.data,n._fdate=new Date(t.data.issue_date),n._dt1=d(new Date(t.data.issue_date)).format("YYYY-MM-DD HH:mm"),n._orders=t.data.orders;var a,i=e(n._orders);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.fabric_name="en"==n.user.lang?o.name_e:o.name_l,o.tag=null,o.tags=null==o.description?[]:JSON.parse(o.description),o.total_count=Math.ceil(o.quantity_info);var r,l=0,s=e(o.tags);try{for(s.s();!(r=s.n()).done;){l+=r.value.split("-").length}}catch(c){s.e(c)}finally{s.f()}o.count=l}}catch(c){i.e(c)}finally{i.f()}})}},{key:"saveChange",value:function(){var t=this,n={};(n=this.entity).orders=this._orders,n.issue_date=this._dt1,n.created_by=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,console.log("Ktra type",n);var a,i=!1,o=!1,r=e(this._orders.filter(function(e){return 2==e.type_id}));try{for(r.s();!(a=r.n()).done;){var l=a.value;if(console.log("QT",l.total_count),l.total_count>l.count&&(i=!0),null!=l.description&&""!=l.description){var s=JSON.parse(l.description),c=0;console.log("Test",s);var d,u=e(s);try{for(u.s();!(d=u.n()).done;){var g=d.value.split("-");console.log("Test1",g);var p,_=e(g);try{for(_.s();!(p=_.n()).done;){var h=p.value;if(h>37){c+=1,console.log("Found",h);break}}}catch(m){_.e(m)}finally{_.f()}if(c>0){o=!0;break}}}catch(m){u.e(m)}finally{u.f()}}}}catch(m){r.e(m)}finally{r.f()}console.log("Ktra type",i,o),i?this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_ORDER_EN:v.W.MSG_ERROR_ORDER,"en"==this.user.lang?v.W.error_title_en:v.W.error_title):o?this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_ORDER_QTY_EN:v.W.MSG_ERROR_ORDER_QTY,"en"==this.user.lang?v.W.error_title_en:v.W.error_title):(console.log("save",n),"ADD"==this._flagModal?this._dataService.post("/order/add",n).subscribe(function(e){t.socket.emit("refresh",{}),"failed"!=e.result?(t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),t.modalService.dismissAll()):t._notifyService.showError("en"==t.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==t.user.lang?v.W.error_title_en:v.W.error_title)}):this._dataService.post("/order/update",n).subscribe(function(e){console.log(e),t.socket.emit("refresh",{}),"failed"!=e.result?(t._notifyService.showSuccess("en"==t.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),t.modalService.dismissAll()):t._notifyService.showError("en"==t.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==t.user.lang?v.W.error_title_en:v.W.error_title)}))}},{key:"orgValueChange",value:function(e){null!=e&&"Invalid date"!=e?(this._fdate=e,this._dt1=d(this._fdate).format("YYYY-MM-DD HH:mm")):(this._fdate=null,this._dt1=null)}},{key:"addItem",value:function(t){var n=this;if(null!=t){var a={};if(a.id=t,this.flagIsType)this._dataService.post("/mix-fabric/detail",a).subscribe(function(t){var a;a={mixfabric_id:t.data.id,color_name_l:t.data.color_name_l,color_name_e:t.data.color_name_e,code:t.data.code,fabric_name:"en"==n.user.lang?t.data.cat_name_e:t.data.cat_name_l,price:0,quantity_info:1,amount:0,is_active:!0,tag:null,tags:null==t.data.description||null==t.data.description?[]:JSON.parse(t.data.description),total:0,type_id:t.data.type_id,count:0,total_count:Math.ceil(1),is_type:n.flagIsType},n._orders.length>0&&n._orders.filter(function(e){return e.mixfabric_id==t.data.id}).length>0||n._orders.push(a),console.log("Order",n._orders),n.selectId=null;var i,o=0,r=e(n._orders);try{for(r.s();!(i=r.n()).done;){var l=i.value;o+=parseInt(l.amount)}}catch(u){r.e(u)}finally{r.f()}n.entity.total=Math.round(o);var s,c=e(n._orders);try{for(c.s();!(s=c.n()).done;){var d=s.value;d.total_count=Math.ceil(d.quantity_info)}}catch(u){c.e(u)}finally{c.f()}});else{var i,o=this._fabrics.filter(function(e){return e.id==t});console.log("testing",o);var r=this._fabricsCompare1.filter(function(e){return e.id==t});console.log("testing",r[0]);var l=o[0].name.substr(6,o[0].name.length);l=l.substr(0,l.indexOf("-")),i={mixfabric_id:t,color_name_l:null,color_name_e:null,code:null,fabric_name:l,price:0,quantity_info:1,amount:0,is_active:!0,tag:null,tags:[],total:0,type_id:r[0].type_id,count:0,total_count:Math.ceil(1),is_type:this.flagIsType},this._orders.length>0&&this._orders.filter(function(e){return e.mixfabric_id==t}).length>0?(this._orders.filter(function(e){return e.mixfabric_id==t})[0].quantity_info+=1,0==o[0].type_id||1==o[0].type_id?this._orders.filter(function(e){return e.mixfabric_id==t})[0].quantity_info>o[0].qty_kg_after&&(this._orders.filter(function(e){return e.mixfabric_id==t})[0].quantity_info=o[0].qty_kg_after):this._orders.filter(function(e){return e.mixfabric_id==t})[0].quantity_info>o[0].quantity_tree&&(this._orders.filter(function(e){return e.mixfabric_id==t})[0].quantity_info=o[0].quantity_tree),this._orders.filter(function(e){return e.mixfabric_id==t})[0].amount=Math.round(this._orders.filter(function(e){return e.mixfabric_id==t})[0].total*this._orders.filter(function(e){return e.mixfabric_id==t})[0].price)):this._orders.push(i),console.log("Order",this._orders),this.selectId=null;var s,c=0,d=e(this._orders);try{for(d.s();!(s=d.n()).done;){var u=s.value;c+=parseInt(u.amount)}}catch(h){d.e(h)}finally{d.f()}this.entity.total=Math.round(c);var g,p=e(this._orders);try{for(p.s();!(g=p.n()).done;){var _=g.value;_.total_count=Math.ceil(_.quantity_info)}}catch(h){p.e(h)}finally{p.f()}}}}},{key:"removeItem",value:function(t){var n=this._orders.findIndex(function(e){return e.mixfabric_id==t});n>-1&&this._orders.splice(n,1);var a,i=0,o=e(this._orders);try{for(o.s();!(a=o.n()).done;){var r=a.value;i+=parseInt(r.amount),r.total_count=Math.ceil(r.quantity_info)}}catch(l){o.e(l)}finally{o.f()}this.entity.total=i,this.socket.emit("refresh",{})}},{key:"updateItem",value:function(t){var n=this._fabricsCompare.filter(function(e){return e.id==t.mixfabric_id});if(0==t.is_type&&(n=this._fabricsCompare1.filter(function(e){return e.id==t.mixfabric_id})),(null==n[0]||t.is_type)&&(n=this._fabricsCompare.filter(function(e){return e.id==t.mixfabric_id})),0==n[0].type_id||1==n[0].type_id){console.log("chon Moc",n[0]);var a=parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info),i=t.is_type?n[0].total_kg_re:n[0].remaining_kg;console.log("SS",a,i),a>i?(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info=i,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].total=i):this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].total=a;var o=""==t.description||null==t.description||0==JSON.parse(t.description).length?0:JSON.parse(t.description)[0];this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].amount=Math.round(parseFloat(o)*parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].price))}else parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info)>parseFloat(n[0].quantity_tree)&&(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info=parseFloat(n[0].quantity_tree)),this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].amount=Math.round(parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].total)*parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].price));var r,l=0,s=e(this._orders);try{for(s.s();!(r=s.n()).done;){var c=r.value;l+=parseFloat(c.amount),c.total_count=Math.ceil(c.quantity_info)}}catch(d){s.e(d)}finally{s.f()}this.entity.total=Math.round(l),this.socket.emit("refresh",{}),console.log("Here",this._orders)}},{key:"_confirmFinalOrder",value:function(){var e=this;Z().fire({title:"en"==this.user.lang?v.W.are_you_sure_en:v.W.are_you_sure,text:"en"==this.user.lang?v.W.MSG_CONFIRM_ORDER_EN:v.W.MSG_CONFIRM_ORDER,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(function(t){t.value?e.saveChange():e.loadDetail(e.entity.id)})}},{key:"_addTag",value:function(t){var n=this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0];if(console.log("Add tag",n),0==n.type_id||1==n.type_id){var a=this._fabricsCompare.filter(function(e){return e.id==t.mixfabric_id});n.is_type||(a=this._fabricsCompare1.filter(function(e){return e.id==t.mixfabric_id})),console.log("Kiem tra",a[0]);var i=n.is_type?a[0].total_segment_re:a[0].remaining_segment,o=""==t.tag||null==t.tag?0:parseInt(t.tag);if(console.log("Kiem tra",i,o),o>i)return void this._notifyService.showError("S\u1ed1 l\u01b0\u1ee3ng Bo c\u1ed5/tay v\u01b0\u1ee3t qu\xe1 trong kho","B\xe1o l\u1ed7i");if(0==n.tags.length){var r,l="",s=e(t.tag.split("-"));try{for(s.s();!(r=s.n()).done;){var c=r.value;this._utilityServce.isNumber(c)&&(l+=c+"-")}}catch(J){s.e(J)}finally{s.f()}n.tags.push(l.substr(0,l.length-1)),n.amount=o*parseFloat(n.price)}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tag=null,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tags=n.tags;var d,u=0,g=e(n.tags);try{for(g.s();!(d=g.n()).done;){u+=d.value.split("-").length}}catch(J){g.e(J)}finally{g.f()}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].count=u;var p,_=0,h=e(this._orders);try{for(h.s();!(p=h.n()).done;){var m=p.value;_+=parseFloat(m.amount)}}catch(J){h.e(J)}finally{h.f()}this.entity.total=_,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].description=JSON.stringify(n.tags)}else{if(n.total_count<n.count+t.tag.split("-").length)return void console.log("Overload");if(0==n.tags.length){var f,Z="",v=0,x=e(t.tag.split("-"));try{for(x.s();!(f=x.n()).done;){var y=f.value;this._utilityServce.isNumber(y)&&(Z+=y+"-",v+=parseFloat(y))}}catch(J){x.e(J)}finally{x.f()}n.tags.push(Z.substr(0,Z.length-1)),n.total=v,n.amount=v*parseFloat(n.price)}else{n.tags.push(t.tag);var b,A=0,T=e(n.tags);try{for(T.s();!(b=T.n()).done;){var q,M=b.value,S="",C=e(M.split("-"));try{for(C.s();!(q=C.n()).done;){var w=q.value;this._utilityServce.isNumber(w)&&(S+=w+"-",A+=parseFloat(w))}}catch(J){C.e(J)}finally{C.f()}M=S.substr(0,S.length-1)}}catch(J){T.e(J)}finally{T.f()}n.total=A,n.amount=A*parseFloat(n.price)}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tag=null,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tags=n.tags;var k,L=0,U=e(n.tags);try{for(U.s();!(k=U.n()).done;){L+=k.value.split("-").length}}catch(J){U.e(J)}finally{U.f()}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].count=L;var N,D=0,I=e(this._orders);try{for(I.s();!(N=I.n()).done;){var Y=N.value;D+=parseFloat(Y.amount)}}catch(J){I.e(J)}finally{I.f()}this.entity.total=D,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].description=JSON.stringify(n.tags)}console.log("Added tag result",this._orders)}},{key:"_removeTag",value:function(t,n){var a=this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0];if(0==a.type_id||1==a.type_id){a.tags.findIndex(function(e){return e==n})>-1&&a.tags.splice(a.tags.findIndex(function(e){return e==n}),1),this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tag=null,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tags=a.tags;var i,o=e(a.tags);try{for(o.s();!(i=o.n()).done;){var r,l=i.value,s="",c=e(l.split("-"));try{for(c.s();!(r=c.n()).done;){var d=r.value;this._utilityServce.isNumber(d)&&(s+=d+"-")}}catch(N){c.e(N)}finally{c.f()}l=s.substr(0,s.length-1)}}catch(N){o.e(N)}finally{o.f()}a.amount=0;var u,g=0,p=e(this._orders);try{for(p.s();!(u=p.n()).done;){var _=u.value;g+=parseFloat(_.amount)}}catch(N){p.e(N)}finally{p.f()}this.entity.total=g;var h,m=0,f=e(a.tags);try{for(f.s();!(h=f.n()).done;){m+=h.value.split("-").length}}catch(N){f.e(N)}finally{f.f()}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].count=m,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].description=JSON.stringify(a.tags)}else{a.tags.findIndex(function(e){return e==n})>-1&&a.tags.splice(a.tags.findIndex(function(e){return e==n}),1),this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tag=null,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tags=a.tags;var Z,v=0,x=e(a.tags);try{for(x.s();!(Z=x.n()).done;){var y,b=Z.value,A="",T=e(b.split("-"));try{for(T.s();!(y=T.n()).done;){var q=y.value;this._utilityServce.isNumber(q)&&(A+=q+"-",v+=parseFloat(q))}}catch(N){T.e(N)}finally{T.f()}b=A.substr(0,A.length-1)}}catch(N){x.e(N)}finally{x.f()}a.total=v,a.amount=v*parseFloat(a.price);var M,S=0,C=e(this._orders);try{for(C.s();!(M=C.n()).done;){var w=M.value;S+=parseFloat(w.amount)}}catch(N){C.e(N)}finally{C.f()}this.entity.total=S;var k,L=0,U=e(a.tags);try{for(U.s();!(k=U.n()).done;){L+=k.value.split("-").length}}catch(N){U.e(N)}finally{U.f()}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].count=L,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].description=JSON.stringify(a.tags)}console.log("Removed tag",this._orders)}},{key:"printQuotationAsPDF",value:function(t){return(0,c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,i,o,r,l,s,c,u,g,p,_,m,f,Z,v,x;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=d(new Date).format("YYYYMMDD"),console.log("KQ In",t),(i=[]).push({text:"\n"}),i.push({alignment:"justify",columns:[{text:["T\xean kh\xe1ch h\xe0ng: ",{text:t.company_name_l,bold:!0},"\n","\u0110\u1ecba ch\u1ec9: ",{text:null==t.address_l?"":t.address_l,bold:!0},"\n","Ng\u01b0\u1eddi li\xean h\u1ec7: ",{text:null==t.contact_name?"":t.contact_name,bold:!0},"\n","\u0110i\u1ec7n tho\u1ea1i: ",{text:null==t.phone?"":t.phone,bold:!0},"\n","Email: ",{text:null==t.email?"":t.email,bold:!0}],style:"body_top"},{qr:t.code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),i.push({text:"\n"}),i.push({text:"\n"}),i.push({table:{headerRows:1,widths:[25,"*",90,90,40,180,55,50,70],body:[[{border:[!0,!0,!0,!0],text:{text:"STT",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Lo\u1ea1i v\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe0u",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe3 m\u1ec5",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"S\u1ed1 c\xe2y",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Di\u1ec5n gi\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"T\u1ed5ng (kg)",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"\u0110\u01a1n gi\xe1",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Th\xe0nh ti\u1ec1n",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}}),o=1,r=[],l=e(t.orders);try{for(l.s();!(s=l.n()).done;){c=s.value,u="",g=null==c.description?[]:JSON.parse(c.description),p=e(g);try{for(p.s();!(_=p.n()).done;){m=_.value,f=e(m.split("-"));try{for(f.s();!(Z=f.n()).done;)v=Z.value,u+=v+" - "}catch(y){f.e(y)}finally{f.f()}}}catch(y){p.e(y)}finally{p.f()}r.push({STT:o,LoaiVai:c.name_l,Mau:null==c.color_name_l?"":c.color_name_l,Code:null==c.code?"":c.code.toUpperCase().toUpperCase(),SoCay:c.quantity_info,DienGiai:""==u?"":u.substr(0,u.length-3),Tong:c.total,Price:this.formatPipe.localeString(c.price),Amount:this.formatPipe.localeString(c.amount)}),o+=1}}catch(y){l.e(y)}finally{l.f()}i.push(this.tablePrintQuotation(r,["STT","LoaiVai","Mau","Code","SoCay","DienGiai","Tong","Price","Amount"],[25,"*",90,90,40,180,55,50,70],!0)),i.push({text:"\n"}),i.push({columns:[{width:"*",text:"Ch\u1eef k\xfd kh\xe1ch h\xe0ng",fontSize:10},{width:"200",text:"Ng\xe0y l\u1eadp "+d(new Date(t.issue_date)).format("DD/MM/YYYY HH:mm a"),alignment:"center",fontSize:10}]}),x={pageSize:"A4",pageMargins:[25,30,25,70],defaultStyle:{fontSize:12,columnGap:20},pageOrientation:"landscape",content:[{text:"TH\xd4NG TIN \u0110\u01a0N H\xc0NG",style:"title_top"},{text:"\n"},i],footer:function(e,t,n){return{table:{widths:[160,"*"],body:[[{border:[!1,!0,!1,!1],text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],text:"",alignment:"right",style:"body_footer"}],[{width:160,text:"",alignment:"left"},{width:150,alignment:"right",text:"Trang "+e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}},header:function(e,t,n){return{table:{widths:[160,"*"],body:[[{width:160,height:30,text:"C\u1eeda h\xe0ng v\u1ea3i VA",alignment:"left"},{width:150,height:30,alignment:"right",text:""}],[{width:160,border:[!1,!0,!1,!1],text:"",alignment:"left"},{width:150,border:[!1,!0,!1,!1],alignment:"right",text:""}]]},layout:{defaultBorder:!1}}},styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}}},("'print-'"+a+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),h().createPdf(x).open();case 11:case"end":return n.stop()}},n,this)}))}},{key:"tablePrintQuotation",value:function(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,a)}}}},{key:"buildTableBodyPrintQuotation",value:function(e,t,n){var a=[],i=0;return e.forEach(function(e){var o=[],r=1;t.forEach(function(t){o.push({text:{text:e[t],noWrap:!1},alignment:2==r||3==r?"left":8==r||9==r?"right":"center",fontSize:10,italics:2==r&&n[i]}),r+=1,i+=1}),a.push(o)}),a}},{key:"_convertBase64ImageFromURL",value:function(e){return new Promise(function(t,n){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=function(e){n(e)},a.src=e})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(x.Y36(y.e),x.Y36(M.FF),x.Y36(b.D),x.Y36(s.F0),x.Y36(A.c),x.Y36(T.C),x.Y36(q.x),x.Y36($e.p),x.Y36(tn.t))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-fab-orders"]],viewQuery:function(e,t){var n;(1&e&&x.Gf(fi,5),2&e)&&(x.iGM(n=x.CRH())&&(t.tagInputRef=n.first))},decls:89,vars:60,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],["class","form-inline",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"table-primary"],[2,"width","2px","text-align","center"],[2,"width","10px","text-align","center"],["type","checkbox","name","checkAll",3,"disabled","checked","change"],["scope","col"],[4,"ngIf"],["orderModal",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],["colspan","11",1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["type","checkbox",3,"name","checked","change"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-light",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],[1,"btn","btn-sm","btn-info","mr-sm-1",3,"ngbTooltip","click"],[1,"fa","fa-print"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"badge","badge-light"],["colspan","11",1,"text-truncate"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate"],["class","badge badge-primary","style","cursor: pointer",4,"ngFor","ngForOf"],[1,"text-truncate","text-right"],[1,"badge","badge-primary",2,"cursor","pointer"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-6"],[1,"form-group","row"],[1,"col-12"],[1,"text-primary"],["for","Company"],[1,"text-danger"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change",4,"ngIf"],[1,"form-group"],["for","issue_date"],["type","text","class","form-control","bsDatepicker","","name","_fdate","autocomplete","off","required","",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange",4,"ngIf"],["type","text","class","form-control","style","background-color: rgb(235, 235, 235)","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],["for","payment"],["name","payment",1,"form-control",3,"ngModel","disabled","ngModelChange"],["value","null"],["class","col-6",4,"ngIf"],["for","total"],[1,"title","text-danger"],["class","col-12",4,"ngIf"],[1,"col-md-12"],["class","text-truncate",4,"ngIf"],[1,"modal-footer"],["class","btn btn-info mr-sm-1",3,"ngbTooltip","click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["type","text","disabled","",1,"form-control",2,"background-color","rgb(235, 235, 235)",3,"ngModel","ngModelChange"],["for","status"],["id","status","name","status",1,"form-control",3,"disabled","ngModel","change","ngModelChange"],["for","Items"],["href","javascript:;",3,"ngClass","click"],["name","Items","bindValue","id","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],[1,"fa","fa-trash"],["type","text","min","1","class","form-control form-control-sm","style","width: 80px","autocomplete","off","mask","separator.2","thousandSeparator",",",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["type","text","class","form-control form-control-sm","style","width: 100%","autocomplete","off",3,"id","name","ngModel","ngModelChange","keyup.enter","change",4,"ngIf"],[1,"mute"],["class","badge badge-primary","style","cursor: pointer",3,"click",4,"ngFor","ngForOf"],[1,"text-truncate","text-center"],["type","text","mask","separator.2","thousandSeparator",",","class","form-control form-control-sm","style","width: 100px",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["href","javascript:;",1,"text-primary",3,"click"],["type","text","min","1","autocomplete","off","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","80px",3,"id","name","ngModel","ngModelChange","change"],["type","text","autocomplete","off",1,"form-control","form-control-sm",2,"width","100%",3,"id","name","ngModel","ngModelChange","keyup.enter","change"],[1,"badge","badge-primary",2,"cursor","pointer",3,"click"],["type","text","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","100px",3,"id","name","ngModel","ngModelChange","change"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],[1,"btn","btn-info","mr-sm-1",3,"ngbTooltip","click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"div",1),x.TgZ(6,"div",5),x.TgZ(7,"div",6),x.TgZ(8,"input",7),x.NdJ("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.ALo(9,"translate"),x.qZA(),x.YNc(10,Zi,3,3,"button",8),x.YNc(11,vi,4,3,"button",9),x.YNc(12,xi,1,0,"img",10),x.qZA(),x.qZA(),x.TgZ(13,"div",11),x.TgZ(14,"div",12),x.TgZ(15,"select",13),x.NdJ("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.TgZ(16,"option",14),x._uU(17,"#10"),x.qZA(),x.TgZ(18,"option",15),x._uU(19,"#25"),x.qZA(),x.TgZ(20,"option",16),x._uU(21,"#50"),x.qZA(),x.TgZ(22,"option",17),x._uU(23,"#100"),x.qZA(),x.qZA(),x.TgZ(24,"select",18),x.NdJ("ngModelChange",function(e){return t._payment=e})("change",function(){return t.loadData()}),x.TgZ(25,"option",19),x._uU(26),x.ALo(27,"translate"),x.qZA(),x.TgZ(28,"option",20),x._uU(29),x.ALo(30,"translate"),x.qZA(),x.TgZ(31,"option",21),x._uU(32),x.ALo(33,"translate"),x.qZA(),x.TgZ(34,"option",22),x._uU(35),x.ALo(36,"translate"),x.qZA(),x.TgZ(37,"option",23),x._uU(38),x.ALo(39,"translate"),x.qZA(),x.TgZ(40,"option",24),x._uU(41),x.ALo(42,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(43,"div",25),x.TgZ(44,"div",26),x.YNc(45,yi,10,20,"div",27),x.qZA(),x.TgZ(46,"div",26),x.TgZ(47,"div",28),x.TgZ(48,"table",29),x.TgZ(49,"thead",30),x.TgZ(50,"tr"),x.TgZ(51,"th",31),x._uU(52,"#"),x.qZA(),x.TgZ(53,"th",32),x.TgZ(54,"input",33),x.NdJ("change",function(e){return t.selectAll(e)}),x.qZA(),x.qZA(),x.TgZ(55,"th",34),x._uU(56),x.ALo(57,"translate"),x.qZA(),x.TgZ(58,"th",34),x._uU(59),x.ALo(60,"translate"),x.qZA(),x.TgZ(61,"th",34),x._uU(62),x.ALo(63,"translate"),x.qZA(),x.TgZ(64,"th",34),x._uU(65),x.ALo(66,"translate"),x.qZA(),x.TgZ(67,"th",34),x._uU(68),x.ALo(69,"translate"),x.qZA(),x.TgZ(70,"th",34),x._uU(71),x.ALo(72,"translate"),x.qZA(),x.TgZ(73,"th",34),x._uU(74),x.ALo(75,"translate"),x.qZA(),x.TgZ(76,"th",34),x._uU(77),x.ALo(78,"translate"),x.qZA(),x.TgZ(79,"th",34),x._uU(80),x.ALo(81,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(82,"tbody"),x.YNc(83,bi,6,3,"ng-container",35),x.YNc(84,Yi,2,1,"ng-container",35),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(85,"div",26),x.YNc(86,Ji,10,20,"div",27),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(87,io,115,80,"ng-template",null,36,x.W1O)),2&e&&(x.xp6(8),x.Q6J("placeholder",x.lcZ(9,28,"Search"))("ngModel",t._keyword),x.xp6(2),x.Q6J("ngIf",t._authService.hasPermission("FAB-ORDER","create")),x.xp6(1),x.Q6J("ngIf",t._authService.hasPermission("FAB-ORDER","report")),x.xp6(1),x.Q6J("ngIf",t._isLoading),x.xp6(3),x.Q6J("ngModel",t.pageSize),x.xp6(9),x.Q6J("ngModel",t._payment),x.xp6(2),x.hij(" ",x.lcZ(27,30,"All")," "),x.xp6(3),x.hij(" ",x.lcZ(30,32,"Unpaid")," "),x.xp6(3),x.hij(" ",x.lcZ(33,34,"Delivery-Unpaid")," "),x.xp6(3),x.hij(" ",x.lcZ(36,36,"Delivery-Paid")," "),x.xp6(3),x.hij(" ",x.lcZ(39,38,"Cancel-Unpaid")," "),x.xp6(3),x.hij(" ",x.lcZ(42,40,"Cancel-Refund")," "),x.xp6(4),x.Q6J("ngIf",t._categories.length>0),x.xp6(9),x.Q6J("disabled",0==t._categories.length)("checked",t.exportList.length==t._categories.length),x.xp6(2),x.hij(" ",x.lcZ(57,42,"Issue of date")," "),x.xp6(3),x.hij(" ",x.lcZ(60,44,"Order code")," "),x.xp6(3),x.hij(" ",x.lcZ(63,46,"Customers")," "),x.xp6(3),x.hij(" ",x.lcZ(66,48,"Phone")," "),x.xp6(3),x.hij(" ",x.lcZ(69,50,"Total")," "),x.xp6(3),x.hij(" ",x.lcZ(72,52,"Payment method")," "),x.xp6(3),x.Oqu(x.lcZ(75,54,"Status")),x.xp6(3),x.Oqu(x.lcZ(78,56,"Created by")),x.xp6(3),x.Oqu(x.lcZ(81,58,"Actions")),x.xp6(3),x.Q6J("ngIf",0==t._categories.length),x.xp6(1),x.Q6J("ngIf",t._categories.length>0),x.xp6(2),x.Q6J("ngIf",t._categories.length>0))},directives:[l.Fj,l.JJ,l.On,r.O5,l.EJ,l.YN,l.Kr,C.Qt,r.sg,M._L,l._Y,l.JL,l.F,w.w9,l.Q7,S.Y5,S.Np,r.mk,nn.hx],pipes:[k.X$,r.uU,r.JJ],styles:[""]}),t}(),data:{title:"Orders",breadcrumb:"Orders"}}]}],ro=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.oAB({type:e}),e.\u0275inj=x.cJS({imports:[[s.Bz.forChild(oo)],s.Bz]}),e}(),lo=o(72533),so=o(93184),co=o(10743),uo=o(70453),go=o(63301),po=o(75690),_o=o(16417),ho=o(25689),mo=o(26853),fo=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.oAB({type:e}),e.\u0275inj=x.cJS({providers:[y.e,b.D,k.sK,T.C,tn.t,$e.p,mo.A],imports:[[r.ez,l.u5,ro,lo.JX,so.m9,co.mr,S.kn.forRoot(),C.u3.forRoot(),uo.f.forRoot(),go.zk.forRoot(),k.aw,po.P4.forRoot(),M.IJ,_o.xc,ho.kW,w.A0,nn.yI.forRoot()]]}),e}()}}])}();