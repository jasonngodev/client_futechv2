!function(){"use strict";(self.webpackChunkendless=self.webpackChunkendless||[]).push([[5602],{85602:function(e,t,o){o.d(t,{P4:function(){return g},Ye:function(){return m}});var r,i,n=o(37716),a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e,t){return function(o,r){t(o,r,e)}},l=function(){function e(e,t,o){this.googleChartsVersion=t,this.mapsApiKey=o,this.googleScriptLoadingNotifier=new n.vpe,this.googleScriptIsLoading=!1,this.localeId=e,null===this.googleChartsVersion&&(this.googleChartsVersion="46")}return e.prototype.load=function(e){var t=this;return new Promise(function(o,r){void 0===o&&(o=Function.prototype),void 0===r&&(r=Function.prototype),t.loadGoogleChartsScript().then(function(){var r={language:t.localeId,callback:o,packages:e};t.mapsApiKey&&(r.mapsApiKey=t.mapsApiKey),google.charts.load(t.googleChartsVersion,r)}).catch(function(e){return r()})})},e.prototype.loadGoogleChartsScript=function(){var e=this;return new Promise(function(t,o){if(void 0===t&&(t=Function.prototype),void 0===o&&(o=Function.prototype),"undefined"!=typeof google&&google.charts)t();else if(e.googleScriptIsLoading)e.googleScriptLoadingNotifier.subscribe(function(e){e?t():o()});else{e.googleScriptIsLoading=!0;var r=document.createElement("script");r.type="text/javascript",r.src="https://www.gstatic.com/charts/loader.js",r.async=!0,r.defer=!0,r.onload=function(){e.googleScriptIsLoading=!1,e.googleScriptLoadingNotifier.emit(!0),t()},r.onerror=function(){e.googleScriptIsLoading=!1,e.googleScriptLoadingNotifier.emit(!1),o()},document.getElementsByTagName("head")[0].appendChild(r)}})},(e=function(e,t,o,r){var i,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(n<3?i(a):n>3?i(t,o,a):i(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a}([s(0,(0,n.tBr)(n.soG)),s(1,(0,n.tBr)("googleChartsVersion")),s(1,(0,n.FiY)()),s(2,(0,n.tBr)("mapsApiKey")),s(2,(0,n.FiY)()),a("design:paramtypes",[String,String,String])],e)).\u0275fac=function(t){return new(t||e)(n.LFG(n.soG),n.LFG("googleChartsVersion",8),n.LFG("mapsApiKey",8))},e.\u0275prov=n.Yz7({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),p=function(){function e(e){this.tooltipDOMElement=e}return e.prototype.setPosition=function(t,o){this.tooltipDOMElement.nativeElement.style.left=t+e.PIXELS,this.tooltipDOMElement.nativeElement.style.top=o+e.PIXELS},e.prototype.getDOMElement=function(){return this.tooltipDOMElement},e.PIXELS="px",e}(),u=function(e,t,o,r){var i,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(n<3?i(a):n>3?i(t,o,a):i(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t){var o=this;this.mouseOverListener=function(e){var t=o.parseMouseEvent(e);return t.tooltip=o.getHTMLTooltip(),t},this.mouseOutListener=function(e){return o.parseMouseEvent(e)},this.selectListener=function(){var e={message:"select",row:null,column:null,selectedRowValues:[],selectedRowFormattedValues:[],columnLabel:""},t=o.wrapper.visualization.getSelection(),r=t[t.length-1];if(!r)return e.message="deselect",e;var i=r;if(null!=r.row){e.row=i.row;for(var n=[],a=[],s=o.wrapper.getDataTable(),l=s.getNumberOfColumns(),p=0;p<l;p++)n.push(s.getValue(i.row,p)),a.push(s.getFormattedValue(i.row,p));e.selectedRowValues=n,e.selectedRowFormattedValues=a}return null!=i.column&&(e.column=i.column,e.columnLabel=o.getColumnLabelAtPosition(i)),r.name&&(e.columnLabel=r.name),e},this.el=e,this.loaderService=t,this.chartSelect=new n.vpe,this.chartSelectOneTime=new n.vpe,this.chartReady=new n.vpe,this.chartReadyOneTime=new n.vpe,this.chartError=new n.vpe,this.chartErrorOneTime=new n.vpe,this.mouseOver=new n.vpe,this.mouseOverOneTime=new n.vpe,this.mouseOut=new n.vpe,this.mouseOutOneTime=new n.vpe,this.regionClick=new n.vpe,this.regionClickOneTime=new n.vpe}return e.prototype.ngOnChanges=function(e){var t=this;if(e.data){if(!this.data)return;this.options=this.data.options,this.options||(this.options={}),this.data.component=this,this.loaderService.load().then(function(){(void 0===t.wrapper||t.wrapper.getChartType()!==t.data.chartType)&&(t.convertOptions(),t.data.firstRowIsData&&Array.isArray(t.data.dataTable)&&(t.data.dataTable=google.visualization.arrayToDataTable(t.data.dataTable,!0)),t.wrapper=new google.visualization.ChartWrapper(t.data),t.registerChartWrapperEvents()),t.draw()})}},e.prototype.draw=function(){var e=this;if(this.data.dataTable)this.wrapper.setDataTable(this.data.dataTable),this._draw();else if(this.data.dataSourceUrl){var t=new google.visualization.Query(this.data.dataSourceUrl);this.data.refreshInterval&&t.setRefreshInterval(this.data.refreshInterval),this.data.query&&t.setQuery(this.data.query),t.send(function(t){if(!t.isError()){var o=t.getDataTable();e.wrapper.setDataTable(o),e.data.dataTable=o,e._draw()}})}},e.prototype._draw=function(){this.convertOptions(),this.wrapper.setOptions(this.options),this.reformat(),this.wrapper.draw(this.el.nativeElement.querySelector("div"))},e.prototype.reformat=function(){if(this.data&&void 0!==this.data.formatters)for(var e=this.wrapper.getDataTable(),t=0,o=this.data.formatters;t<o.length;t++){var r=o[t],i=void 0;if("PatternFormat"!==r.type){var n=google.visualization[r.type],a=r.options;if(i=new n(a),"ColorFormat"===r.type&&a)for(var s=0,l=(g=a).ranges;s<l.length;s++){var p=l[s];void 0!==p.fromBgColor&&void 0!==p.toBgColor?i.addGradientRange(p.from,p.to,p.color,p.fromBgColor,p.toBgColor):i.addRange(p.from,p.to,p.color,p.bgcolor)}for(var u=0,c=r.columns;u<c.length;u++)i.format(e,c[u])}else{var g=r.options;(i=new google.visualization.PatternFormat(g.pattern)).format(e,r.columns,g.dstColumnIndex)}}},e.prototype.getSelectorBySeriesType=function(e){return{bars:"bar#%s#%r",haxis:"hAxis#0#label",line:"point#%s#%r",legend:"legendentry#%s",area:"point#%s#%r"}[e]},e.prototype.getSeriesByColumn=function(e){for(var t=0,o=this.wrapper.getDataTable(),r=e-1;r>=0;r--){var i=o.getColumnRole(r),n=o.getColumnType(r);("data"===i||"number"===n)&&t++}return t},e.prototype.getBoundingBoxForItem=function(e){var t={top:0,left:0,width:0,height:0};if(this.cli){var o=e.column,r=this.getSeriesByColumn(o),i=e.row,n=this.options.seriesType;if(this.options.series&&this.options.series[r]&&this.options.series[r].type&&(n=this.options.series[r].type),n){var a=this.getSelectorBySeriesType(n);if(a){a=a.replace("%s",r+"").replace("%c",o+"").replace("%r",i+"");var s=this.cli.getBoundingBox(a);s&&(t=s)}}}return t},e.prototype.getValueAtPosition=function(e){return null==e.row?null:this.wrapper.getDataTable().getValue(e.row,e.column)},e.prototype.getColumnTypeAtPosition=function(e){return this.wrapper.getDataTable().getColumnType(e.column)||""},e.prototype.getColumnLabelAtPosition=function(e){return this.wrapper.getDataTable().getColumnLabel(e.column)||""},e.prototype.getHTMLTooltip=function(){var e=new n.SBq(this.el.nativeElement.querySelector(".google-visualization-tooltip"));return new p(e)},e.prototype.parseMouseEvent=function(e){var t=this.wrapper.getChartType(),o=e.column;if(null==o)switch(t){case"Timeline":o=3===this.wrapper.getDataTable().getNumberOfColumns()?0:1;break;default:o=0}var r={row:e.row,column:o};return{position:e,boundingBox:this.getBoundingBoxForItem(r),value:this.getValueAtPosition(r),columnType:this.getColumnTypeAtPosition(r),columnLabel:this.getColumnLabelAtPosition(r)}},e.prototype.unregisterEvents=function(){google.visualization.events.removeAllListeners(this.wrapper.getChart()),google.visualization.events.removeAllListeners(this.wrapper)},e.prototype.registerChartEvents=function(){var e=this,t=this.wrapper.getChart();this.cli=t.getChartLayoutInterface?t.getChartLayoutInterface():null,this.mouseOver.observers.length>0&&google.visualization.events.addListener(t,"onmouseover",function(t){var o=e.parseMouseEvent(t);o.tooltip=e.getHTMLTooltip(),e.mouseOver.emit(o)}),this.mouseOverOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(t,"onmouseover",function(t){var o=e.parseMouseEvent(t);o.tooltip=e.getHTMLTooltip(),e.mouseOverOneTime.emit(o)}),this.mouseOut.observers.length>0&&google.visualization.events.addListener(t,"onmouseout",function(t){var o=e.parseMouseEvent(t);e.mouseOut.emit(o)}),this.mouseOutOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(t,"onmouseout",function(t){var o=e.parseMouseEvent(t);e.mouseOutOneTime.emit(o)}),"GeoChart"===this.data.chartType&&(this.regionClick.observers.length>0&&google.visualization.events.addListener(t,"regionClick",function(t){e.regionClick.emit(t)}),this.regionClickOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(t,"regionClick",function(t){e.regionClick.emit(t)}))},e.prototype.registerChartWrapperEvents=function(){var e=this;google.visualization.events.addListener(this.wrapper,"ready",function(){e.chartReady.emit({message:"Chart ready"})}),google.visualization.events.addOneTimeListener(this.wrapper,"ready",function(){e.chartReadyOneTime.emit({message:"Chart ready (one time)"}),e.registerChartEvents()}),google.visualization.events.addListener(this.wrapper,"error",function(t){e.chartError.emit(t)}),google.visualization.events.addOneTimeListener(this.wrapper,"error",function(t){e.chartErrorOneTime.emit(t)}),this.addListener(this.wrapper,"select",this.selectListener,this.chartSelect),this.addOneTimeListener(this.wrapper,"select",this.selectListener,this.chartSelectOneTime)},e.prototype.addListener=function(e,t,o,r){google.visualization.events.addListener(e,t,function(){r.emit(o())})},e.prototype.addOneTimeListener=function(e,t,o,r){google.visualization.events.addOneTimeListener(e,t,function(){r.emit(o())})},e.prototype.convertOptions=function(){try{this.options=google.charts[this.data.chartType].convertOptions(this.options)}catch(e){return}},u([(0,n.IIB)(),c("design:type",Object)],e.prototype,"data",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"chartReady",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"chartReadyOneTime",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"chartError",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"chartErrorOneTime",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"chartSelect",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"chartSelectOneTime",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"mouseOver",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"mouseOverOneTime",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"mouseOut",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"mouseOutOneTime",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"regionClick",void 0),u([(0,n.r_U)(),c("design:type",n.vpe)],e.prototype,"regionClickOneTime",void 0),(e=u([c("design:paramtypes",[n.SBq,l])],e)).\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(l))},e.\u0275cmp=n.Xpm({type:e,selectors:[["google-chart"]],inputs:{data:"data"},outputs:{chartSelect:"chartSelect",chartSelectOneTime:"chartSelectOneTime",chartReady:"chartReady",chartReadyOneTime:"chartReadyOneTime",chartError:"chartError",chartErrorOneTime:"chartErrorOneTime",mouseOver:"mouseOver",mouseOverOneTime:"mouseOverOneTime",mouseOut:"mouseOut",mouseOutOneTime:"mouseOutOneTime",regionClick:"regionClick",regionClickOneTime:"regionClickOneTime"},features:[n.TTD],decls:1,vars:0,template:function(e,t){1&e&&n._UZ(0,"div")},encapsulation:2,changeDetection:0}),e}(),h=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),d=function(){},m=(h(function(){return null!==i&&i.apply(this,arguments)||this},i=d),function(e){h(function(){return null!==e&&e.apply(this,arguments)||this},e)}(d),function(e){h(function(){return null!==e&&e.apply(this,arguments)||this},e)}(d),function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({providers:[l]}),e}())}}])}();