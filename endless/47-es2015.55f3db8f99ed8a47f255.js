(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{d8eE:function(e,t,n){"use strict";n.r(t),n.d(t,"RequestModule",function(){return hi});var a=n("ofXK"),c=n("3Pt+"),i=n("tyNb"),o=n("mrSG"),r=n("wd/R"),l=n("gFX4"),s=n.n(l),d=n("CMKA"),h=n("5JmO"),g=n.n(h),u=n("TruH"),m=n.n(u),_=n("PSD3"),p=n.n(_),f=n("piOG"),b=n("fXoL"),v=n("7dP1"),y=n("cplz"),x=n("3t6R"),S=n("25+x"),N=n("VToC"),w=n("1kSV"),D=n("hzby"),M=n("Lm2G"),C=n("ZOsW"),T=n("sYmb");const I=["fileUpload"];function k(e,t){if(1&e){const e=b.ic();b.hc(0,"button",46),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t._getlist)}),b.cc(1,"i",47),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function P(e,t){1&e&&b.cc(0,"img",48)}function R(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",49),b.hc(3,"h3",50),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function E(e,t){if(1&e){const e=b.ic();b.hc(0,"a",65),b.rc("click",function(){b.Uc(e);const t=b.vc(2).$implicit,n=b.vc(2),a=b.Rc(108);return n._switchLanguage(a,3,t)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Report standard compared")))}function A(e,t){if(1&e){const e=b.ic();b.hc(0,"a",65),b.rc("click",function(){b.Uc(e);const t=b.vc(2).$implicit,n=b.vc(2),a=b.Rc(108);return n._switchLanguage(a,4,t)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Report standard attached")))}function U(e,t){if(1&e){const e=b.ic();b.hc(0,"div",61),b.hc(1,"button",62),b.cc(2,"i",63),b.gc(),b.hc(3,"div",64),b.hc(4,"a",65),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit,n=b.vc(2),a=b.Rc(108);return n._switchLanguage(a,0,t)}),b.dd(5),b.wc(6,"translate"),b.gc(),b.hc(7,"a",65),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit,n=b.vc(2),a=b.Rc(108);return n._switchLanguage(a,1,t)}),b.dd(8),b.wc(9,"translate"),b.gc(),b.bd(10,E,3,3,"a",66),b.bd(11,A,3,3,"a",66),b.gc(),b.gc()}if(2&e){const e=b.vc().$implicit;b.Nb(5),b.ed(b.xc(6,4,"All")),b.Nb(3),b.ed(b.xc(9,6,"Report standard")),b.Nb(2),b.Dc("ngIf",e.flag_compare),b.Nb(1),b.Dc("ngIf",null!=e.url_img)}}function F(e,t){if(1&e){const e=b.ic();b.hc(0,"a",68),b.rc("click",function(){b.Uc(e);const t=b.vc(2).$implicit,n=b.vc(2),a=b.Rc(112);return n._editInformation(a,t)}),b.cc(1,"i",69),b.gc()}}function O(e,t){if(1&e&&(b.fc(0),b.bd(1,F,2,0,"a",67),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngIf",e._authenService.hasPermission("REQ-REPORT","update"))}}function Y(e,t){if(1&e){const e=b.ic();b.hc(0,"a",70),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit,n=b.vc(2),a=b.Rc(114);return n._popupRepareResults(a,t)}),b.dd(1),b.gc()}if(2&e){const e=b.vc().$implicit;b.Nb(1),b.ed(e.report_inner_code)}}function L(e,t){if(1&e&&(b.hc(0,"span"),b.dd(1),b.gc()),2&e){const e=b.vc().$implicit;b.Nb(1),b.ed(e.report_inner_code)}}function q(e,t){1&e&&(b.hc(0,"span",71),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Draft")," "))}function z(e,t){1&e&&(b.hc(0,"span",72),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Official")," "))}function G(e,t){1&e&&(b.hc(0,"span",73),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Evicted")," "))}function V(e,t){1&e&&(b.hc(0,"span",74),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Printed")," "))}function B(e,t){1&e&&(b.hc(0,"span",75),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Cancel")," "))}function H(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",52),b.dd(2),b.gc(),b.hc(3,"td"),b.bd(4,U,12,8,"div",53),b.bd(5,O,2,1,"ng-container",40),b.gc(),b.hc(6,"td"),b.bd(7,Y,2,1,"a",54),b.bd(8,L,2,1,"span",40),b.gc(),b.hc(9,"td"),b.dd(10),b.gc(),b.hc(11,"td"),b.dd(12),b.gc(),b.hc(13,"td"),b.dd(14),b.wc(15,"date"),b.gc(),b.hc(16,"td"),b.dd(17),b.wc(18,"date"),b.gc(),b.hc(19,"td"),b.dd(20),b.gc(),b.hc(21,"td"),b.dd(22),b.gc(),b.hc(23,"td",55),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc(2),c=b.Rc(110);return 2!=n.is_active&&a._authenService.hasPermission("REQ-REPORT","update")?3==n.is_active?a._switchEviction(n):a._popupStates(c,n):null}),b.bd(24,q,3,3,"span",56),b.bd(25,z,3,3,"span",57),b.bd(26,G,3,3,"span",58),b.bd(27,V,3,3,"span",59),b.bd(28,B,3,3,"span",60),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(2),b.fd(" ",n+1+a.pageSize*(a.pageIndex-1)," "),b.Nb(2),b.Dc("ngIf",a._authenService.hasPermission("REQ-REPORT","print")),b.Nb(1),b.Dc("ngIf",0==e.is_active||1==e.is_active),b.Nb(2),b.Dc("ngIf",0==e.is_active),b.Nb(1),b.Dc("ngIf",0!=e.is_active),b.Nb(2),b.fd(" ",e.request_no," "),b.Nb(2),b.fd(" ",e.sample_name," "),b.Nb(2),b.ed(b.yc(15,16,e.received_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.ed(b.yc(18,19,e.returned_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.ed(e.company_sender_l),b.Nb(2),b.ed(e.sender_name),b.Nb(2),b.Dc("ngIf",0==e.is_active),b.Nb(1),b.Dc("ngIf",1==e.is_active),b.Nb(1),b.Dc("ngIf",2==e.is_active),b.Nb(1),b.Dc("ngIf",3==e.is_active),b.Nb(1),b.Dc("ngIf",4==e.is_active)}}function Q(e,t){if(1&e&&(b.fc(0),b.bd(1,H,29,22,"tr",51),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._getlist)}}function $(e,t){if(1&e){const e=b.ic();b.hc(0,"form",76),b.hc(1,"div",77),b.hc(2,"h4",78),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",79),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",80),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",81),b.hc(9,"div",82),b.hc(10,"div",83),b.hc(11,"div",84),b.hc(12,"button",85),b.rc("click",function(){return b.Uc(e),b.vc()._print("vn")}),b.dd(13),b.wc(14,"translate"),b.gc(),b.hc(15,"button",86),b.rc("click",function(){return b.Uc(e),b.vc()._print("en")}),b.dd(16),b.wc(17,"translate"),b.gc(),b.hc(18,"button",87),b.rc("click",function(){return b.Uc(e),b.vc()._print("0")}),b.dd(19),b.wc(20,"translate"),b.wc(21,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}2&e&&(b.Nb(3),b.fd(" ",b.xc(4,5,"Language")," "),b.Nb(10),b.fd(" ",b.xc(14,7,"Vietnamese")," "),b.Nb(3),b.fd(" ",b.xc(17,9,"English")," "),b.Nb(3),b.gd(" ",b.xc(20,11,"Vietnamese"),"/",b.xc(21,13,"English")," "))}function K(e,t){if(1&e){const e=b.ic();b.hc(0,"form",76),b.hc(1,"div",77),b.hc(2,"h4",78),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",79),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",80),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",81),b.hc(9,"div",82),b.hc(10,"div",83),b.hc(11,"div",84),b.hc(12,"select",88),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().changeState=t})("change",function(){return b.Uc(e),b.vc()._updateState()}),b.hc(13,"option",89),b.dd(14),b.wc(15,"translate"),b.gc(),b.hc(16,"option",89),b.dd(17),b.wc(18,"translate"),b.gc(),b.hc(19,"option",89),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"option",89),b.dd(23),b.wc(24,"translate"),b.gc(),b.hc(25,"option",89),b.dd(26),b.wc(27,"translate"),b.gc(),b.hc(28,"option",89),b.dd(29),b.wc(30,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.gd(" ",b.xc(4,15,"Status")," - ",e._titleLanguage," "),b.Nb(9),b.Dc("ngModel",e.changeState),b.Nb(1),b.Dc("value",null),b.Nb(1),b.ed(b.xc(15,17,"Please choose")),b.Nb(2),b.Dc("value",0),b.Nb(1),b.ed(b.xc(18,19,"Draft")),b.Nb(2),b.Dc("value",1),b.Nb(1),b.ed(b.xc(21,21,"Official")),b.Nb(2),b.Dc("value",2),b.Nb(1),b.ed(b.xc(24,23,"Evicted")),b.Nb(2),b.Dc("value",3),b.Nb(1),b.ed(b.xc(27,25,"Printed")),b.Nb(2),b.Dc("value",4),b.Nb(1),b.ed(b.xc(30,27,"Cancel"))}}function j(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"button",112),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(2)._chooseTab(n,n.order_no)}),b.dd(2),b.wc(3,"translate"),b.gc(),b.ec()}if(2&e){const e=t.$implicit,n=b.vc(2);b.Nb(1),b.Dc("ngClass",e.order_no==n._currentTabActivated?"btn btn-sm btn-primary":"btn btn-sm btn-secondary"),b.Nb(1),b.gd(" ",b.xc(3,3,"Sample")," ",e.order_no," ")}}const X=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function W(e,t){if(1&e){const e=b.ic();b.hc(0,"form",76),b.hc(1,"div",77),b.hc(2,"h4",78),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",79),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",80),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",81),b.hc(9,"div",82),b.hc(10,"div",83),b.hc(11,"div",90),b.hc(12,"label",91),b.dd(13),b.wc(14,"translate"),b.hc(15,"span",50),b.dd(16,"(*)"),b.gc(),b.gc(),b.hc(17,"ng-select",92),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.customer_id=t}),b.wc(18,"translate"),b.wc(19,"translate"),b.gc(),b.gc(),b.gc(),b.hc(20,"div",93),b.hc(21,"div",90),b.hc(22,"label",94),b.dd(23),b.wc(24,"translate"),b.hc(25,"span",50),b.dd(26,"(*)"),b.gc(),b.gc(),b.hc(27,"input",95),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._fdatea=t})("bsValueChange",function(t){return b.Uc(e),b.vc().orgValueChange1a(t)}),b.wc(28,"translate"),b.gc(),b.gc(),b.gc(),b.hc(29,"div",93),b.hc(30,"div",90),b.hc(31,"label",96),b.dd(32),b.wc(33,"translate"),b.hc(34,"span",50),b.dd(35,"(*)"),b.gc(),b.gc(),b.hc(36,"input",97),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._tdatea=t})("bsValueChange",function(t){return b.Uc(e),b.vc().orgValueChange2a(t)}),b.wc(37,"translate"),b.gc(),b.gc(),b.gc(),b.hc(38,"div",93),b.hc(39,"div",90),b.hc(40,"label",98),b.dd(41),b.wc(42,"translate"),b.gc(),b.hc(43,"div",29),b.hc(44,"input",99),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.valid_number=t})("change",function(){return b.Uc(e),b.vc()._calculateDays()}),b.wc(45,"translate"),b.gc(),b.hc(46,"button",100),b.rc("click",function(){return b.Uc(e),b.vc().saveChangeRequest()}),b.cc(47,"i",101),b.dd(48),b.wc(49,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(50,"div",83),b.cc(51,"hr"),b.hc(52,"div",102),b.hc(53,"div",103),b.bd(54,j,4,5,"ng-container",51),b.gc(),b.gc(),b.cc(55,"hr"),b.gc(),b.hc(56,"div",104),b.hc(57,"div",90),b.hc(58,"label",105),b.hc(59,"strong"),b.dd(60),b.wc(61,"translate"),b.gc(),b.gc(),b.hc(62,"input",106),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_name=t}),b.wc(63,"translate"),b.gc(),b.hc(64,"input",107),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_id=t}),b.gc(),b.gc(),b.gc(),b.hc(65,"div",104),b.hc(66,"div",90),b.hc(67,"label",105),b.hc(68,"strong"),b.dd(69),b.wc(70,"translate"),b.gc(),b.gc(),b.hc(71,"input",106),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.weight=t}),b.wc(72,"translate"),b.gc(),b.gc(),b.gc(),b.hc(73,"div",104),b.hc(74,"div",90),b.hc(75,"label",105),b.hc(76,"strong"),b.dd(77),b.wc(78,"translate"),b.wc(79,"translate"),b.gc(),b.gc(),b.hc(80,"textarea",108),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.description=t}),b.wc(81,"translate"),b.gc(),b.gc(),b.gc(),b.hc(82,"div",104),b.hc(83,"div",90),b.hc(84,"label",105),b.hc(85,"strong"),b.dd(86),b.wc(87,"translate"),b.gc(),b.gc(),b.hc(88,"textarea",108),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.note=t}),b.wc(89,"translate"),b.gc(),b.gc(),b.gc(),b.hc(90,"div",109),b.hc(91,"button",110),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.cc(92,"i",111),b.dd(93),b.wc(94,"translate"),b.gc(),b.hc(95,"button",100),b.rc("click",function(){return b.Uc(e),b.vc().saveChangeSample()}),b.cc(96,"i",101),b.dd(97),b.wc(98,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.gd(" ",b.xc(4,55,"Request code")," - ",e._titleLanguage," "),b.Nb(10),b.fd("",b.xc(14,57,"Company")," "),b.Nb(4),b.Dc("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.entity.customer_id)("placeholder",b.xc(18,59,"Please choose"))("notFoundText",b.xc(19,61,"Not found item")),b.Nb(6),b.fd("",b.xc(24,63,"Received date")," "),b.Nb(4),b.Dc("placeholder",b.xc(28,65,"Received date"))("ngModel",e._fdatea)("bsConfig",b.Hc(99,X)),b.Nb(5),b.fd("",b.xc(33,67,"Returned date")," "),b.Nb(4),b.Dc("placeholder",b.xc(37,69,"Returned date"))("ngModel",e._tdatea)("bsConfig",b.Hc(100,X)),b.Nb(5),b.ed(b.xc(42,71,"Valid date")),b.Nb(3),b.Dc("type","number")("placeholder",b.xc(45,73,"Valid date"))("ngModel",e.entity.valid_number)("min",0),b.Nb(4),b.fd(" ",b.xc(49,75,"Save")," "),b.Nb(6),b.Dc("ngForOf",e.entity._samples),b.Nb(4),b.Fc("for","sn",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(61,77,"Sample name")),b.Nb(2),b.Fc("id","sn",e._currentTabActivated,""),b.Fc("name","sample_name",e._currentTabActivated,""),b.Dc("placeholder",b.xc(63,79,"Sample")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_name),b.Nb(2),b.Fc("id","id",e._currentTabActivated,""),b.Fc("name","id",e._currentTabActivated,""),b.Dc("ngModel",e.entity0.sample_id),b.Nb(3),b.Fc("for","weight",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(70,81,"Weight")),b.Nb(2),b.Fc("id","weight",e._currentTabActivated,""),b.Fc("name","weight",e._currentTabActivated,""),b.Dc("placeholder",b.xc(72,83,"Weight")+" "+e._currentTabActivated)("ngModel",e.entity0.weight),b.Nb(4),b.Fc("for","description",e._currentTabActivated,""),b.Nb(2),b.gd("",b.xc(78,85,"Description")," (",b.xc(79,87,"State of sample"),")"),b.Nb(3),b.Fc("id","description",e._currentTabActivated,""),b.Fc("name","description",e._currentTabActivated,""),b.Dc("placeholder",b.xc(81,89,"Description")+" "+e._currentTabActivated)("ngModel",e.entity0.description),b.Nb(4),b.Fc("for","note",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(87,91,"Note")),b.Nb(2),b.Fc("id","note",e._currentTabActivated,""),b.Fc("name","note",e._currentTabActivated,""),b.Dc("placeholder",b.xc(89,93,"Note")+" "+e._currentTabActivated)("ngModel",e.entity0.note),b.Nb(5),b.fd(" ",b.xc(94,95,"Close")," "),b.Nb(4),b.fd(" ",b.xc(98,97,"Save")," ")}}function J(e,t){1&e&&b.cc(0,"img",48)}function Z(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"a",70),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit,n=b.vc(2),a=b.Rc(116);return n.popupComment(a,t)}),b.dd(2),b.gc(),b.ec()}if(2&e){const e=b.vc().$implicit;b.Nb(2),b.ed(e.inner_code)}}function ee(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.ed(e.inner_code)}}function te(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"td",117),b.dd(2),b.gc(),b.hc(3,"td",117),b.bd(4,Z,3,1,"ng-container",40),b.bd(5,ee,2,1,"ng-container",40),b.gc(),b.hc(6,"td",117),b.dd(7),b.gc(),b.hc(8,"td",39),b.dd(9),b.gc(),b.hc(10,"td"),b.hc(11,"input",118),b.rc("ngModelChange",function(e){return t.$implicit.lod=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._reupdateInformation(t._getlist2side)}),b.gc(),b.gc(),b.hc(12,"td",117),b.hc(13,"input",118),b.rc("ngModelChange",function(e){return t.$implicit.loq=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._reupdateInformation(t._getlist2side)}),b.gc(),b.gc(),b.hc(14,"td",117),b.hc(15,"input",119),b.rc("ngModelChange",function(e){return t.$implicit.result_record=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._reupdateInformation(t._getlist2side)}),b.wc(16,"translate"),b.gc(),b.hc(17,"input",119),b.rc("ngModelChange",function(e){return t.$implicit.result_record_e=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._reupdateInformation(t._getlist2side)}),b.wc(18,"translate"),b.gc(),b.gc(),b.hc(19,"td",117),b.hc(20,"input",118),b.rc("ngModelChange",function(e){return t.$implicit.mark=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._reupdateInformation(t._getlist2side)}),b.gc(),b.gc(),b.hc(21,"td",120),b.hc(22,"input",121),b.rc("ngModelChange",function(e){return t.$implicit.allow_lod=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._reupdateInformation(t._getlist2side)}),b.gc(),b.gc(),b.hc(23,"td",117),b.hc(24,"input",118),b.rc("ngModelChange",function(e){return t.$implicit.compare_note=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._reupdateInformation(t._getlist2side)}),b.gc(),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(2),b.ed(n+1),b.Nb(2),b.Dc("ngIf",a._authenService.hasPermission("REQ-REPORT","update")),b.Nb(1),b.Dc("ngIf",!a._authenService.hasPermission("REQ-REPORT","update")),b.Nb(2),b.ed(e.code),b.Nb(2),b.fd(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.Fc("name","lod",n+1,""),b.Dc("ngModel",e.lod),b.Nb(2),b.Fc("name","loq",n+1,""),b.Dc("ngModel",e.loq),b.Nb(2),b.Fc("name","result_record",n+1,""),b.Dc("ngModel",e.result_record)("placeholder",b.xc(16,21,"Vietnamese")),b.Nb(2),b.Fc("name","result_record_e",n+1,""),b.Dc("ngModel",e.result_record_e)("placeholder",b.xc(18,23,"English")),b.Nb(3),b.Fc("name","mark",n+1,""),b.Dc("ngModel",e.mark),b.Nb(2),b.Fc("name","allow_lod",n+1,""),b.Dc("ngModel",e.allow_lod),b.Nb(2),b.Fc("name","compare_note",n+1,""),b.Dc("ngModel",e.compare_note)}}function ne(e,t){if(1&e){const e=b.ic();b.hc(0,"form",76),b.hc(1,"div",81),b.hc(2,"div",82),b.hc(3,"div",83),b.hc(4,"label",113),b.dd(5),b.wc(6,"translate"),b.bd(7,J,1,0,"img",19),b.gc(),b.hc(8,"input",114),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._keywordAdditional=t})("change",function(){return b.Uc(e),b.vc().loadLabResultList()})("keyup.enter",function(){return b.Uc(e),b.vc().loadLabResultList()}),b.gc(),b.gc(),b.hc(9,"div",83),b.hc(10,"div",115),b.hc(11,"table",116),b.hc(12,"thead"),b.hc(13,"th",117),b.dd(14,"#"),b.gc(),b.hc(15,"th",117),b.dd(16),b.wc(17,"translate"),b.gc(),b.hc(18,"th",117),b.dd(19),b.wc(20,"translate"),b.gc(),b.hc(21,"th",117),b.dd(22),b.wc(23,"translate"),b.gc(),b.hc(24,"th"),b.dd(25),b.wc(26,"translate"),b.gc(),b.hc(27,"th",117),b.dd(28),b.wc(29,"translate"),b.gc(),b.hc(30,"th",117),b.dd(31),b.wc(32,"translate"),b.gc(),b.hc(33,"th",117),b.dd(34),b.wc(35,"translate"),b.gc(),b.hc(36,"th",117),b.dd(37),b.wc(38,"translate"),b.gc(),b.hc(39,"th",117),b.dd(40),b.wc(41,"translate"),b.gc(),b.gc(),b.hc(42,"tbody"),b.bd(43,te,25,25,"tr",51),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(5),b.fd("",b.xc(6,13,"Search")," "),b.Nb(2),b.Dc("ngIf",e._isLoadingResult),b.Nb(1),b.Dc("ngModel",e._keywordAdditional),b.Nb(8),b.ed(b.xc(17,15,"Inner code")),b.Nb(3),b.ed(b.xc(20,17,"Code")),b.Nb(3),b.fd(" ",b.xc(23,19,"Internal testing")," "),b.Nb(3),b.ed(b.xc(26,21,"LOD")),b.Nb(3),b.ed(b.xc(29,23,"LOQ")),b.Nb(3),b.ed(b.xc(32,25,"Results")),b.Nb(3),b.ed(b.xc(35,27,"Mark")),b.Nb(3),b.ed(b.xc(38,29,"Tick LOD?")),b.Nb(3),b.ed(b.xc(41,31,"Compare")),b.Nb(3),b.Dc("ngForOf",e._getlist2side)}}function ae(e,t){if(1&e){const e=b.ic();b.hc(0,"a",136),b.rc("click",function(){b.Uc(e);const t=b.vc(2);return t.removeAttachment(t.entityComment)}),b.cc(1,"i",137),b.gc()}}function ce(e,t){1&e&&(b.fc(0),b.hc(1,"a",138),b.cc(2,"img",139),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing"),""))}function ie(e,t){1&e&&(b.hc(0,"button",140),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Save & close")," "))}function oe(e,t){if(1&e){const e=b.ic();b.hc(0,"form",122,123),b.rc("ngSubmit",function(){b.Uc(e);const t=b.vc();return t.saveChangeComment(t.entityComment,0)}),b.hc(2,"div",77),b.hc(3,"h4",78),b.dd(4),b.wc(5,"translate"),b.gc(),b.hc(6,"button",79),b.rc("click",function(){return t.$implicit.dismiss("Cross click")}),b.hc(7,"span",80),b.dd(8,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(9,"div",81),b.hc(10,"div",82),b.hc(11,"div",83),b.hc(12,"div",90),b.hc(13,"label",124),b.dd(14),b.wc(15,"translate"),b.gc(),b.hc(16,"textarea",125),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entityComment.take_note=t}),b.gc(),b.gc(),b.gc(),b.hc(17,"div",83),b.hc(18,"div",90),b.hc(19,"label",126),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"input",127,128),b.rc("change",function(t){return b.Uc(e),b.vc().fileEvent(t)}),b.gc(),b.hc(24,"input",129),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entityComment.url_img=t}),b.gc(),b.cc(25,"br"),b.hc(26,"small",130),b.hc(27,"a",131),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._downloadFileResult(t.entityComment)}),b.dd(28),b.gc(),b.bd(29,ae,2,0,"a",132),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(30,"div",133),b.hc(31,"button",134),b.rc("click",function(){return t.$implicit.dismiss("Cross click")}),b.dd(32),b.wc(33,"translate"),b.gc(),b.bd(34,ce,5,3,"ng-container",40),b.bd(35,ie,3,3,"button",135),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(4),b.gd(" ",b.xc(5,11,"Note")," - ",e.entityComment.inner_code," "),b.Nb(10),b.fd("",b.xc(15,13,"Content")," "),b.Nb(2),b.Dc("ngModel",e.entityComment.take_note),b.Nb(4),b.ed(b.xc(21,15,"Attachment")),b.Nb(4),b.Dc("ngModel",e.entityComment.url_img),b.Nb(4),b.ed(e._path),b.Nb(1),b.Dc("ngIf",null!=e.entityComment.url_img),b.Nb(3),b.fd(" ",b.xc(33,17,"Close")," "),b.Nb(2),b.Dc("ngIf",e.isSave),b.Nb(1),b.Dc("ngIf",!e.isSave)}}const re=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};g.a.vfs=m.a.pdfMake.vfs;let le=(()=>{class e{constructor(e,t,n,a,c,i,o){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=c,this._excelService=i,this.modalService=o,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._getlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this._status="",this._titleLanguage="",this._detail={},this._logoPath=d.a.BASE_API+"/",this._logoIsoPath=d.a.BASE_API+"/",this._signatureCTOPath=d.a.BASE_API+"/",this._signatureCEOPath=d.a.BASE_API+"/",this.changeState=null,this._printAll=[],this._langMain=1,this.entity={},this.entity0={},this.requestId="",this._customers=[],this._dt1a="",this._dt2a="",this._fdatea=new Date,this._tdatea=new Date,this._currentTabActivated=1,this._keywordAdditional="",this._getlist2side=[],this._isLoadingResult=!1,this._requestIdTemp="",this.entityComment={},this._path="",this._id="",!1!==e.checkAccess("REQ-REPORT")&&!1!==e.hasPermission("REQ-REPORT","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadImgs(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,this._dataService.post("/labresult/getlistbypaging",e).subscribe(e=>{this._getlist=e.data,this.totalRow=e.rowCount,this.totalPage=e.totalPages,this._resolveDuplicateCode()})}_resolveDuplicateCode(){this._dataService.post("/error/duplicateReportCode",{}).subscribe(e=>{})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}orgValueChange1(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=r(e).format("YYYY-MM-DD")}_switchLanguage(e,t,n){this.loadAllReportByRequestId(n.request_id),this._titleLanguage=n.report_code,this._chooseOne=t,this._detail=n,this.modalService.open(e,{size:"md",centered:!0})}loadAllReportByRequestId(e){let t={};t.request_id=e,console.log(t),this._dataService.post("/labresult/getlistbyrequestId",t).subscribe(e=>{console.log("All",e),this._printAll=e.data})}_print(e){return Object(o.__awaiter)(this,void 0,void 0,function*(){this._langMain=e;var t=[];if(0!=this._chooseOne){if(null!=this._detail.old_report_detail){let n="(* K\u1ebft qu\u1ea3 n\xe0y thay th\u1ebf cho k\u1ebft qu\u1ea3  "+this._detail.old_report_detail.report_code+", xu\u1ea5t ng\xe0y  "+r(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; b\u1ea3n k\u1ebft qu\u1ea3 c\u0169 s\u1ebd b\u1ecb h\u1ee7y)",a="(* This report cancels and replaces the previous one numbered "+this._detail.old_report_detail.report_code+", date "+r(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; which must be destroyed)",c="vn"==e?n:a;"0"==e&&(c=n+"\n"+a),t.push({text:c,alignment:"right",italics:!0,fontSize:10})}t.push({text:"\n"});let c="en"==e?null==this._detail.company_sender_e?this._detail.company_sender_l.toUpperCase():this._detail.company_sender_e.toUpperCase():this._detail.company_sender_l.toUpperCase();null==this._detail.company_receiver_l&&null==this._detail.company_receiver_e||(c="en"==e||"0"==e?null==this._detail.company_receiver_e?this._detail.company_receiver_l.toUpperCase():this._detail.company_receiver_e.toUpperCase():this._detail.company_receiver_l.toUpperCase()),"0"==e&&(c="en"==e,this._detail.company_sender_l.toUpperCase(),null==this._detail.company_sender_e||this._detail.company_sender_e.toUpperCase(),null==this._detail.company_receiver_l&&null==this._detail.company_receiver_e||(c=this._detail.company_receiver_l.toUpperCase()+"\n"+(null==this._detail.company_receiver_e?"":this._detail.company_receiver_e.toUpperCase()))),this._detail.address_receiver_l=null==this._detail.address_receiver_l?this._detail.address_l:this._detail.address_receiver_l;let i="en"==e?null==this._detail.address_receiver_e?this._detail.address_receiver_l:this._detail.address_receiver_e:this._detail.address_receiver_l;"0"==e&&(i=this._detail.address_receiver_l+"\n"+(null==this._detail.address_receiver_e?"":this._detail.address_receiver_e));let o="en"==e?"Sample described as":"T\xean m\u1eabu";"0"==e&&(o="T\xean m\u1eabu/ Sample described as");let l="en"==e?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng";"0"==e&&(l="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference");let s=this._detail.employee_code+this._detail.request_no.substr(2,this._detail.request_no.length);null==this._detail.employee_code&&(s=this._detail.request_no.substr(2,this._detail.request_no.length));let h="en"==e?"Sample code":"M\xe3 s\u1ed1 m\u1eabu";"0"==e&&(h="M\xe3 s\u1ed1 m\u1eabu/ Sample code");let g="en"==e?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu";"0"==e&&(g="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning");let u="en"==e?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu";"0"==e&&(u="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date");let m="en"==e?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m";"0"==e&&(m="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time");let _="en"==e?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng";"0"==e&&(_="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date");let p=r(new Date(this._detail.returned_date)).subtract(7,"hours").format("DD/MM/YYYY");t.push({alignment:"justify",columns:[[{text:[{text:c,bold:!0,fontSize:12},"\n\n",{text:i},"\n\n\n"],style:"body_top"}],{width:150,qr:this._detail.report_code+","+this._detail.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]});let f="en"==e?null==this._detail.sample_name_e?"":this._detail.sample_name_e:this._detail.sample_name;"0"==e&&(f=this._detail.sample_name+(null==this._detail.sample_name_e?"":"/ "+this._detail.sample_name_e));let b="en"==e?null==this._detail.description_e?"":this._detail.description_e:null==this._detail.description?"":this._detail.description;"0"==e&&(b=(null==this._detail.description?"":this._detail.description)+(null==this._detail.description_e?"":"/ "+this._detail.description_e)),t.push({table:{widths:[150,5,"*"],body:[[{text:o,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:f,bold:!0,fontSize:11}],[{text:l,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:s,bold:!0,style:"body_footer"}],[{text:h,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:this._detail.report_inner_code,bold:!0,style:"body_footer"}],[{text:g,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:b,style:"body_footer"}],[{text:u,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:m,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+p,style:"body_footer"}],[{text:_,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:p,style:"body_footer"}]]},layout:{defaultBorder:!1}}),t.push({text:"\n"});let v="en"==e?"NO.":"STT";"0"==e&&(v="STT\nNO.");let y="en"==e?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";"0"==e&&(y="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let x="en"==e?"UNIT":"\u0110\u01a0N V\u1eca";"0"==e&&(x="\u0110\u01a0N V\u1eca\nUNIT");let S="en"==e?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";"0"==e&&(S="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let N="en"==e?"RESULTS":"K\u1ebeT QU\u1ea2";"0"==e&&(N="K\u1ebeT QU\u1ea2\nRESULTS");let w="en"==e?"COMPARE / GUIDELINES":"SO S\xc1NH";"0"==e&&(w="SO S\xc1NH\nCOMPARE / GUIDELINES");let D=!1;if(1==this._chooseOne){var n=[],a=1;if(this._detail.order_details.length>0){for(let t of this._detail.order_details){let c=!1;c="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let i="",o=null==t.standards?[]:JSON.parse(t.standards);for(let e of o.filter(e=>null!=e))null==e.id?null!=e&&(i+="("+e+")"):i+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let l=t.unit,s=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,h=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>",""),g="";null!=t.result_record_e&&(g=t.result_record_e.includes("<sup>")?t.result_record_e.substr(0,t.result_record_e.indexOf("<")):t.result_record_e),n.push({STT:a,Para:{columns:[{text:r,fontSize:10,italics:c,width:"auto",bold:!0},{text:i,fontSize:8,italics:c,bold:!0}],columnGap:3},Unit:l,Method:s,Results:[{columns:[{text:"vn"==e||""==g?d:g,width:"auto",fontSize:10,bold:!0},{text:h,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),a+=1,t.allow_lod&&(D=!0)}t.push(this.tablePrintQuotation5(n,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}}if(3==this._chooseOne){n=[],a=1;for(let t of this._detail.order_details){let c=!1;c="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let i="",o=null==t.standards?[]:JSON.parse(t.standards);for(let e of o.filter(e=>null!=e))null==e.id?null!=e&&(i+="("+e+")"):i+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let l=t.unit,s=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,h=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>",""),g="";null!=t.result_record_e&&(g=t.result_record_e.includes("<sup>")?t.result_record_e.substr(0,t.result_record_e.indexOf("<")):t.result_record_e),n.push({STT:a,Para:{columns:[{text:r,fontSize:10,italics:c,width:"auto",bold:!0},{text:i,fontSize:8,italics:c,bold:!0}],columnGap:3},Unit:l,Method:s,Results:[{columns:[{text:"vn"==e||""==g?d:g,width:"auto",fontSize:10,bold:!0},{text:h,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:t.compare_note}),a+=1,t.allow_lod&&(D=!0)}t.push(this.tablePrintQuotation(n,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}if(4==this._chooseOne)if(this._detail.flag_compare){n=[],a=1;for(let t of this._detail.order_details){let c=!1;c="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let i="",o=null==t.standards?[]:JSON.parse(t.standards);for(let e of o.filter(e=>null!=e))null==e.id?null!=e&&(i+="("+e+")"):i+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let l=t.unit,s=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,h=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>",""),g="";null!=t.result_record_e&&(g=t.result_record_e.includes("<sup>")?t.result_record_e.substr(0,t.result_record_e.indexOf("<")):t.result_record_e),n.push({STT:a,Para:{columns:[{text:r,fontSize:10,italics:c,width:"auto",bold:!0},{text:i,fontSize:8,italics:c,bold:!0}],columnGap:3},Unit:l,Method:s,Results:[{columns:[{text:"vn"==e||""==g?d:g,width:"auto",fontSize:10,bold:!0},{text:h,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:t.compare_note}),a+=1,t.allow_lod&&(D=!0)}t.push(this.tablePrintQuotation(n,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}else if(n=[],a=1,this._detail.order_details.length>0){for(let t of this._detail.order_details){let c=!1;c="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let i="",o=null==t.standards?[]:JSON.parse(t.standards);for(let e of o.filter(e=>null!=e))null==e.id?null!=e&&(i+="("+e+")"):i+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let l=t.unit,s=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,h=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>",""),g="";null!=t.result_record_e&&(g=t.result_record_e.includes("<sup>")?t.result_record_e.substr(0,t.result_record_e.indexOf("<")):t.result_record_e),n.push({STT:a,Para:{columns:[{text:r,fontSize:10,italics:c,width:"auto",bold:!0},{text:i,fontSize:8,italics:c,bold:!0}],columnGap:3},Unit:l,Method:s,Results:[{columns:[{text:"vn"==e||""==g?d:g,width:"auto",fontSize:10,bold:!0},{text:h,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),a+=1,t.allow_lod&&(D=!0)}t.push(this.tablePrintQuotation5(n,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if(null!=this._detail.take_note||D){let n=[],a="vn"==e?"Ghi ch\xfa: ":"Note: ";"0"==e&&(a="Ghi ch\xfa/ Note: ");let c="vn"==e?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection";"0"==e&&(c="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),n.push({LOD:a+(null==this._detail.take_note?"":this._detail.take_note)+(D?c:"")}),t.push(this.tablePrintQuotation5A(n,["LOD"],["*"]))}t.push({text:"\n"});let M="vn"==e?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR";"0"==e&&(M="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR");let C="vn"==e?"GI\xc1M \u0110\u1ed0C":"DIRECTOR";"0"==e&&(C="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==this._detail.is_active&&(t.push({columns:[{width:50,text:""},{width:180,text:M,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:C,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"})),null!=this._signatureCTOPath&&null!=this._signatureCEOPath&&0!=this._detail.is_active?(t.push({columns:[{width:50,text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCTOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:"*",text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCEOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:50,text:""}]}),t.push({text:"\n"})):t.push({columns:[{width:50,text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]}),0==this._detail.is_active&&t.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"});let T="vn"==e?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note";"0"==e&&(T="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note");let I="vn"==e?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.";"0"==e&&(I="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample.");let k="vn"==e?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.";"0"==e&&(k="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request.");let P="";if(this._detail.standard_list.length>0)for(let t of this._detail.standard_list){let n="vn"==e?t.description_l:t.description_e;"0"==e&&(n=t.description_l+"/ "+t.description_e),P+="("+t.id+") "+n+"\n"}if(t.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:T,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:I+"\n"+k+"\n"},{text:P,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null!=this._detail.url_img&&4==this._chooseOne){let n="en"==e?"Sample photo":"H\xecnh m\u1eabu";"0"==e&&(n="H\xecnh m\u1eabu/ Sample photo"),t.push({text:"",pageBreak:"after"}),t.push({text:n+"\n",alignment:"center"});let a=d.a.BASE_API+"/"+this._detail.url_img;t.push({image:yield this._convertBase64ImageFromURL(a),alignment:"center",width:430})}}else{let c=0,i=0;for(let o of this._printAll){if(i+=1,null!=o.old_report_detail){let n="(This report cancels and replaces the previous one numbered "+o.old_report_detail.report_code+" date "+r(new Date(o.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)",a="(This report cancels and replaces the previous one numbered "+o.old_report_detail.report_code+" date "+r(new Date(o.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)";t.push({text:"vn"==e?n:a,alignment:"right",italics:!0,fontSize:10})}let l=("vn"==e?"M\xe3 k\u1ebft qu\u1ea3: ":"Report code: ")+o.report_code;"0"==e&&(l="M\xe3 k\u1ebft qu\u1ea3/Report code: "+o.report_code);let s=("vn"==e?"Trang: ":"Page: ")+i.toString()+"/"+this._printAll.length.toString();"0"==e&&(s="Trang/Page: "+i.toString()+this._printAll.length.toString());let h="en"==e?null==o.company_sender_e?o.company_sender_l.toUpperCase():o.company_sender_e.toUpperCase():o.company_sender_l.toUpperCase();null==o.company_receiver_l&&null==o.company_receiver_e||(h="en"==e||"0"==e?null==o.company_receiver_e?o.company_receiver_l.toUpperCase():o.company_receiver_e.toUpperCase():o.company_receiver_l.toUpperCase()),o.address_receiver_l=null==o.address_receiver_l?o.address_l:o.address_receiver_l;let g="en"==e?null==o.address_receiver_e?o.address_receiver_l:o.address_receiver_e:o.address_receiver_l;"0"==e&&(h=o.company_sender_l.toUpperCase()+"\n"+(null==o.company_sender_e?"":o.company_sender_e.toUpperCase()),null==o.company_receiver_l&&null==o.company_receiver_e||(h=o.company_receiver_l.toUpperCase()+"\n"+(null==o.company_receiver_e?"":o.company_receiver_e.toUpperCase())),g=o.address_receiver_l+"\n"+(null==o.address_receiver_e?"":o.address_receiver_e));let u="en"==e?"Sample described as":"T\xean m\u1eabu";"0"==e&&(u="T\xean m\u1eabu/ Sample described as");let m="en"==e?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng";"0"==e&&(m="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference");let _=o.employee_code+o.request_no.substr(2,o.request_no.length);null==o.employee_code&&(_=o.request_no.substr(2,o.request_no.length));let p="en"==e?"Sample code":"M\xe3 s\u1ed1 m\u1eabu";"0"==e&&(p="M\xe3 s\u1ed1 m\u1eabu/ Sample code");let f="en"==e?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu";"0"==e&&(f="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning");let b="en"==e?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu";"0"==e&&(b="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date");let v="en"==e?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m";"0"==e&&(v="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time");let y="en"==e?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng";"0"==e&&(y="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date");let x=1==o.is_active?r(new Date(o.timestamp)).subtract(7,"hours").format("DD/MM/YYYY"):r(new Date(o.returned_date)).subtract(7,"hours").format("DD/MM/YYYY");t.push({alignment:"right",columns:[{text:[{text:l+"-"+s},"\n\n"],alignment:"right",bold:!0}]}),t.push({alignment:"justify",columns:[[{text:[{text:h,bold:!0,fontSize:12},"\n\n",{text:g},"\n\n\n"],style:"body_top"}],{width:150,qr:o.report_code+","+o.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),t.push({table:{widths:[150,5,"*"],body:[[{text:u,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:o.sample_name,bold:!0,fontSize:11}],[{text:m,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:_,bold:!0,style:"body_footer"}],[{text:p,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:o.report_inner_code,bold:!0,style:"body_footer"}],[{text:f,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:null==o.description?"":o.description,style:"body_footer"}],[{text:b,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(o.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:v,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:r(new Date(o.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+x,style:"body_footer"}],[{text:y,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:x,style:"body_footer"}]]},layout:{defaultBorder:!1}}),t.push({text:"\n"});let S="en"==e?"NO.":"STT";"0"==e&&(S="STT\nNO.");let N="en"==e?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";"0"==e&&(N="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let w="en"==e?"UNIT":"\u0110\u01a0N V\u1eca";"0"==e&&(w="\u0110\u01a0N V\u1eca\nUNIT");let D="en"==e?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";"0"==e&&(D="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let M="en"==e?"RESULTS":"K\u1ebeT QU\u1ea2";"0"==e&&(M="K\u1ebeT QU\u1ea2\nRESULTS");let C="en"==e?"COMPARE / GUIDELINES":"SO S\xc1NH";"0"==e&&(C="SO S\xc1NH\nCOMPARE / GUIDELINES");let T=!1;if(n=[],a=1,o.order_details.length>0){for(let t of o.order_details){let c=!1;c="b709ca6e-2823-11eb-9a33-acde48001122"==t.department_id;let i="",o=null==t.standards?[]:JSON.parse(t.standards);for(let e of o.filter(e=>null!=e))null==e.id?null!=e&&(i+="("+e+")"):i+="("+e.id+")";let r="vn"==e?t.para_name_l:t.para_name_e;"0"==e&&(r=t.para_name_l+"/ "+t.para_name_e);let l=t.unit,s=t.method,d=t.result_record.includes("<sup>")?t.result_record.substr(0,t.result_record.indexOf("<")):t.result_record,h=t.result_record.substr(t.result_record.indexOf("<sup>")+5,t.result_record.indexOf("</sup>")).replace("</sup>","");console.log(h),n.push({STT:a,Para:{columns:[{text:r,fontSize:10,italics:c,width:"auto",bold:!0},{text:i,fontSize:8,italics:c,bold:!0}],columnGap:3,bold:!0},Unit:l,Method:s,Results:[{columns:[{text:d,width:"auto",fontSize:10,bold:!0},{text:h,fontSize:6,bold:!0}],columnGap:0,alignment:"center"},{columns:[{text:t.allow_lod?"(LOD="+t.lod+")":"",width:"auto",fontSize:10,bold:!0,alignment:"center"}],columnGap:0}]}),a+=1,t.allow_lod&&(T=!0)}t.push(this.tablePrintQuotation5(n,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if(null!=o.take_note||T){let n=[],a="vn"==e?"Ghi ch\xfa: ":"Note: ";"0"==e&&(a="Ghi ch\xfa/ Note: ");let c="vn"==e?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection";"0"==e&&(c="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),n.push({LOD:a+(null==o.take_note?"":o.take_note)+(T?c:"")}),t.push(this.tablePrintQuotation5A(n,["LOD"],["*"]))}t.push({text:"\n"});let I="vn"==e?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR";"0"==e&&(I="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR");let k="vn"==e?"GI\xc1M \u0110\u1ed0C":"DIRECTOR";"0"==e&&(k="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==o.is_active&&(t.push({columns:[{width:50,text:""},{width:180,text:I,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:k,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"})),null!=this._signatureCTOPath&&null!=this._signatureCEOPath&&0!=o.is_active?(t.push({columns:[{width:50,text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCTOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:"*",text:""},{width:180,image:yield this._convertBase64ImageFromURL(this._signatureCEOPath),alignment:"center",fontSize:10,bold:!0,fit:[190,190]},{width:50,text:""}]}),t.push({text:"\n"})):t.push({columns:[{width:50,text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==e?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]}),0==o.is_active&&t.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),t.push({text:"\n"});let P="vn"==e?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note";"0"==e&&(P="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note");let R="vn"==e?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.";"0"==e&&(R="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample.");let E="vn"==e?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.";"0"==e&&(E="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request.");let A="";if(o.standard_list.length>0)for(let t of o.standard_list){let n="vn"==e?t.description_l:t.description_e;"0"==e&&(n=t.description_l+"/ "+t.description_e),A+="("+t.id+") "+n+"\n"}if(t.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:P,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:R+"\n"+E+"\n"},{text:A,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null!=o.url_img&&2==o.is_active){t.push({text:"",pageBreak:"after"});let e=d.a.BASE_API+"/"+o.url_img;t.push({image:yield this._convertBase64ImageFromURL(e),alignment:"center"})}c+=1,c<this._printAll.length&&t.push({text:"",pageBreak:"after"})}}const c={pageSize:"A4",pageMargins:"vn"==e?0==this._chooseOne?[25,100,25,70]:[25,120,25,70]:0==this._chooseOne?[25,100,25,90]:[25,140,25,90],defaultStyle:{fontSize:12,columnGap:20},content:[t],footer:function(t,n){return{table:{widths:[5,"*","*","*"],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:("en"==e||"0"==e?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG")+"\n"+("en"==e||"0"==e?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam"),alignment:"left",style:"body_footer"},{height:150,text:"en"==e||"0"==e?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",alignment:"left",style:"body_footer"},{height:150,text:"en"==e||"0"==e?"Document number : EPR-QP-0023/F02\nVersion : 01\nEffective day : 03/09/2020":"M\xe3 t\xe0i li\u1ec7u : EPR-QP-0023/F02\nL\u1ea7n ban h\xe0nh : 01\nNg\xe0y ban h\xe0nh : 03/09/2020",alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},header:(t,n,a)=>{let c="vn"==e?"K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M":"ANALYTICAL REPORT";"0"==e&&(c="K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M\nANALYTICAL REPORT");let i="vn"==e?"M\xe3 k\u1ebft qu\u1ea3: ":"Report code: ";"0"==e&&(i="M\xe3 k\u1ebft qu\u1ea3/Report code: ");let o="vn"==e?"Trang ":"Page: ";return"0"==e&&(o="Trang/Page "),0!=this._chooseOne?{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:167,height:70,alignment:"right",image:"myIso"}],[{colSpan:2,text:c,alignment:"center",fontSize:16,bold:!0}],[{colSpan:2,width:"*",text:[{text:i+this._detail.report_code+"-"+o+t.toString()+"/"+n},{text:"__",color:"#ffffff"}],alignment:"right",bold:!0}]]},layout:{defaultBorder:!1}}:{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:167,height:70,alignment:"right",image:"myIso"}],[{colSpan:2,text:c,alignment:"center",fontSize:16,bold:!0}]]},layout:{defaultBorder:!1}}},styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},images:{myLogo:yield this._convertBase64ImageFromURL(this._logoPath),myIso:yield this._convertBase64ImageFromURL(this._logoIsoPath)}};var i="'print-'"+this._detail.report_code+".pdf";i=i.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g.a.createPdf(c).download(i),g.a.createPdf(c).open()})}_exportAll(e){let t=[],n=1;for(let a of e){let e="";4==a.is_active&&(e="en"==this.user.lang?f.a.cancel_en:f.a.cancel),3==a.is_active&&(e="en"==this.user.lang?f.a.printed_en:f.a.printed),2==a.is_active&&(e="en"==this.user.lang?f.a.evicted_en:f.a.evicted),1==a.is_active&&(e="en"==this.user.lang?f.a.official_en:f.a.official),0==a.is_active&&(e="en"==this.user.lang?f.a.draft_en:f.a.draft);let c=new Date(a.received_date).getTime()+864e5*a.tat;t.push({"No.":n,"Report code":a.report_inner_code,"Request No":a.request_no,"Sample name":a.sample_name,"Received Date":r(new Date(a.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),"Returned Date":r(new Date(c)).subtract(7,"hours").format("DD/MM/YYYY"),Company:a.company_sender_l,Contact:null==a.sender_name?"":a.sender_name,State:e}),n+=1}this._excelService.exportAsExcelFile(t,"ResultReport-"+r(new Date).subtract(7,"hours").format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.length+" "+f.a.record,"OK")}tablePrintQuotation(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation(e,t)}}}buildTableBodyPrintQuotation(e,t){var n=[];let a=[],c="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(c="STT\nNO.");let i="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(i="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let o="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(o="\u0110\u01a0N V\u1eca\nUNIT");let r="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(r="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let l="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";0==this._langMain&&(l="K\u1ebeT QU\u1ea2\nRESULTS");let s="en"==this._langMain.toString()?"COMPARE / GUIDELINES":"SO S\xc1NH";0==this._langMain&&(s="SO S\xc1NH\nCOMPARE / GUIDELINES"),a.push({text:c,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:s,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(a);let d=0;return e.forEach(function(e){var a=[],c=1;t.forEach(function(t){a.push(2==c||5==c?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==c?"left":"center",fontSize:10}),c+=1,d+=1}),n.push(a)}),n}tablePrintQuotation5(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation5(e,t)}}}buildTableBodyPrintQuotation5(e,t){var n=[];let a=[],c="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(c="STT\nNO.");let i="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(i="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");let o="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(o="\u0110\u01a0N V\u1eca\nUNIT");let r="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(r="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");let l="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";0==this._langMain&&(l="K\u1ebeT QU\u1ea2\nRESULTS");let s="en"==this._langMain.toString()?"COMPARE / GUIDELINES":"SO S\xc1NH";0==this._langMain&&(s="SO S\xc1NH\nCOMPARE / GUIDELINES"),a.push({text:c,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(a);let d=0;return e.forEach(function(e){var a=[],c=1;t.forEach(function(t){a.push(2==c||5==c?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==c?"left":"center",fontSize:10}),c+=1,d+=1}),n.push(a)}),n}tablePrintQuotation5A(e,t,n){return{table:{widths:n,body:this.buildTableBodyPrintQuotation5A(e,t)}}}buildTableBodyPrintQuotation5A(e,t){var n=[];let a=0;return e.forEach(function(e){var c=[];t.forEach(function(t){c.push({text:{text:e[t]},alignment:"left",fontSize:10,italics:!0}),a+=1}),n.push(c)}),n}_convertBase64ImageFromURL(e){return new Promise((t,n)=>{var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=e=>{n(e)},a.src=e})}loadImgs(){let e={};e.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",e).subscribe(e=>Object(o.__awaiter)(this,void 0,void 0,function*(){this._logoPath+=e.data.filter(e=>"logo-stp"==e.file_name_e)[0].path_file,this._logoIsoPath+=e.data.filter(e=>"logo-iso"==e.file_name_e)[0].path_file,this._signatureCTOPath+=e.data.filter(e=>"signature-cto"==e.file_name_e)[0].path_file,this._signatureCEOPath+=e.data.filter(e=>"signature-ceo"==e.file_name_e)[0].path_file}))}_popupStates(e,t){this._titleLanguage=t.report_code,this.changeState=t.is_active,this._detail=t,this.modalService.open(e,{size:"sm",centered:!0})}_updateState(){let e={};if(e.report_id=this._detail.report_id,e.is_active=this.changeState,e.userid=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code,2==this.changeState||4==this.changeState){let t=this._titleLanguage.substr(this._titleLanguage.lastIndexOf("-RV")+3,this._titleLanguage.length);if(parseInt(t)+1>9&&2==this.changeState)return void this._notifyService.showError("en"==this.user.lang?f.a.MSG_EXPORTNO_EN:f.a.MSG_EXPORT_NO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);if(this._detail.flag_warning_eviction)return this._notifyService.showError("en"==this.user.lang?f.a.error_eviction_msg_en:f.a.error_eviction_msg,"en"==this.user.lang?f.a.error_title_en:f.a.error_title),void this.modalService.dismissAll();p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_evic_en:f.a.are_u_sure_evic,text:this._detail.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/labresult/updateState",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this._updateStateOfSample(this._detail,e.flag),this.modalService.dismissAll()}):this.modalService.dismissAll()})}else this._dataService.post("/labresult/updateState",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this.modalService.dismissAll()})}_switchEviction(e){console.log(e),p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_evic_en:f.a.are_u_sure_evic,text:e.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{if(t.value){let t={};t.report_id=e.report_id,t.is_active=2,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/labresult/updateState",t).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this._updateStateOfSample(e,t.flag),this.modalService.dismissAll()})}else this.modalService.dismissAll()})}_updateStateOfSample(e,t){let n={};n.getlist=e.order_details,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,n.status=3,this._dataService.post("/labresult/updateStateOfSample",n).subscribe(e=>{console.log(e)})}_editInformation(e,t){console.log(t),this._currentTabActivated=1,this._titleLanguage=t.request_no,this.requestId=t.request_id,this.loadRequestDetail(t.request_id),this.modalService.open(e,{size:"lg",centered:!0})}loadRequestDetail(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{this.entity=e.data,this._fdatea=new Date(e.data.received_date),this._tdatea=new Date(e.data.returned_date),this._dt1a=r(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=r(this._tdatea).format("YYYY-MM-DD HH:mm");let t=[],n=1;for(let a of e.data.orders_list.filter(e=>null!=e.inner_code))t.push({sample_id:a.sample_id,sample_name:a.sample_name,sample_code:a.sample_code,inner_code:a.inner_code,description:a.description,note:a.note,weight:a.weight,is_active:a.is_active,userid:a.userid,total_sub:a.total_sub,order_no:n}),n+=1;console.log(t),this.entity._samples=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0],this.loadCustomers()})}loadCustomers(){let e={};e.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.code_link,code:n.id});this._customers=t})}orgValueChange1a(e){null!=e&&"Invalid date"!=e?(this._fdatea=e,this._tdatea=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1a=r(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=r(this._tdatea).format("YYYY-MM-DD HH:mm")):(this._fdatea=null,this._dt1a=null)}orgValueChange2a(e){null!=e&&"Invalid date"!=e?(this._tdatea=e,this._dt1a=r(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=r(this._tdatea).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdatea-this._fdatea)/864e5)):(this._tdatea=null,this._dt2a=null)}_calculateDays(){null!=this._fdatea&&(this._tdatea=new Date(this._fdatea.getTime()+864e5*this.entity.valid_number))}_chooseTab(e,t){this.entity0=e,this._currentTabActivated=t}saveChangeRequest(){if(null==this._dt1a||null==this._dt2a||this._fdatea>this._tdatea)return void this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);let e={};e.id=this.entity.id,e.customer_id=this.entity.customer_id,e.received_date=this._dt1a,e.returned_date=this._dt2a,e.valid_number=this.entity.valid_number,e.userid=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code,this._dataService.post("/labresult/updateRequestInfo",e).subscribe(e=>{console.log("Request",e),"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})):this._notifyService.showWarning("en"==this.user.lang?f.a.MSG_UPDATENO_EN:f.a.MSG_UPDATENO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)},()=>{this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}saveChangeSample(){let e={};e.sample_id=this.entity0.sample_id,e.sample_name=this.entity0.sample_name,e.weight=this.entity0.weight,e.description=this.entity0.description,e.note=this.entity0.note,e.userid=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code,""!=this.entity0.sample_name&&null!=this.entity0.sample_name?this._dataService.post("/labresult/updateSampleInfo",e).subscribe(e=>{"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})):this._notifyService.showWarning("en"==this.user.lang?f.a.MSG_UPDATENO_EN:f.a.MSG_UPDATENO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)},()=>{this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}):this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}_popupRepareResults(e,t){this._requestIdTemp=t.request_id,this.loadLabResultList(t.request_id),this.modalService.open(e,{size:"lg",centered:!0})}loadLabResultList(e){this._isLoadingResult=!0,this._dataService.post("/lab/getlistresultlabsbyid2side",{request_id:e,filter:this._keywordAdditional}).subscribe(e=>{let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,mark:n.mark,request_no:n.request_no,result_record:n.result_record,result_record_e:n.result_record_e,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,parameter_id:n.parameter_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,status:n.status,note:n.note,export_result:null==n.export_result?1:n.export_result,allow_lod:null!=n.allow_lod&&n.allow_lod,compare_note:n.compare_note});this._getlist2side=t,this._isLoadingResult=!1})}_reupdateInformation(e){this._dataService.post("/lab/reupdateInformation2Sides",{getlist:e}).subscribe(e=>{})}popupComment(e,t){this.loadDetailSample(t.sample_id),this.modalService.open(e,{size:"md",centered:!0})}saveChangeComment(e,t){let n={};n.sample_id=this.entityComment.sample_id,n.take_note=this.entityComment.take_note,n.url_img=e,n.flag=t,this._dataService.post("/request/updateComment",n).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.fileUpload=null,this.entityComment.url_img=null,this.loadDetailSample(this.entityComment.sample_id)})}loadDetailSample(e){let t={};t.sample_id=e,this._dataService.post("/request/detailSampleOrder",t).subscribe(e=>{this.entityComment=e.data,this.entityComment.url_img=e.data.url_img,this._path=null==e.data.url_img?null:e.data.url_img.substr(e.data.url_img.lastIndexOf("/")+1,e.data.url_img.length)})}fileEvent(e){var t=e.target.files[0];if(void 0===t||void 0===t.name)this.fileUpload=null,this.entityComment.url_img=null,this._notifyService.showError("en"==this.user.lang?f.a.recheck_file_en:f.a.recheck_file,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);else{this.fileUpload=t.name;let n=this.fileUpload.split(".").pop();"jpg"===n||"jpeg"===n||"png"===n?(this.entityComment.url_img=t.name,this._processUpload(e.target)):(this._notifyService.showError("en"==this.user.lang?f.a.format_incorrect_en:f.a.format_incorrect,"en"==this.user.lang?f.a.error_title_en:f.a.error_title),this.fileUpload=null,this.entityComment.url_img=null)}}_processUpload(e){if(null==e)this._notifyService.showError("en"==this.user.lang?f.a.recheck_file_en:f.a.recheck_file,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);else{let t={folder_name:"lab_attachment"};t.id=this.entityComment.sample_id,this._uploadService.uploadFile("/services/uploads/"+t.id+"/"+t.folder_name,e.files).subscribe(e=>{this.saveChangeComment(e.data,1)})}}removeAttachment(e){let t={};t.url=e.url_img,this._dataService.post("/services/deletefile1",t).subscribe(t=>{let n={};n.sample_id=e.sample_id,n.take_note=e.take_note,n.url_img=null,this._dataService.post("/request/updateComment",n).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this._path="",this.loadDetailSample(e.sample_id)})})}_downloadFileResult(e){window.open(d.a.BASE_API+"/"+e.url_img,"blank")}closeModal(){this.modalService.dismissAll()}}return e.\u0275fac=function(t){return new(t||e)(b.bc(v.a),b.bc(y.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-lab-results"]],viewQuery:function(e,t){if(1&e&&(b.jd(I,1),b.jd(I,1)),2&e){let e;b.Qc(e=b.sc())&&(t.fileUpload=e.first),b.Qc(e=b.sc())&&(t.fileUpload1=e.first)}},decls:117,vars:104,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["type","button","routerLink","/request/lab-report",1,"btn","btn-sm","btn-primary","mr-sm-2"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"row",2,"overflow-x","scroll"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","90px"],["scope","col"],[4,"ngIf"],["contentLanguage",""],["contentStatus",""],["contentRequest",""],["contentAdditionalInfo",""],["contentCommentUpload",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","10",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["ngbDropdown","","class","btn-group mr-sm-1","role","group",4,"ngIf"],["href","javascript:;",3,"click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-default",4,"ngIf"],["ngbDropdown","","role","group",1,"btn-group","mr-sm-1"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["href","javascript:;",1,"dropdown-item",3,"click"],["class","dropdown-item","href","javascript:;",3,"click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-warning",3,"click"],[1,"icofont","icofont-pencil-alt-5"],["href","javascript:;",3,"click"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-danger"],[1,"badge","badge-success"],[1,"badge","badge-default"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-danger","mr-sm-2",3,"click"],["name","changestate",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value"],[1,"form-group"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],[1,"col-md-4"],["for","received_date"],["type","text","bsDatepicker","","name","_fdatea","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdatea","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",1,"form-control","mr-sm-2",3,"type","placeholder","ngModel","min","ngModelChange","change"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],[1,"flex-wrap"],[1,"btn-group","flex-wrap"],[1,"col-md-6"],[3,"for"],["type","text",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],[1,"col-md-12","text-right"],[1,"btn","btn-sm","btn-light","mr-sm-2",3,"click"],[1,"fa","fa-times-circle-o"],["type","button",3,"ngClass","click"],["for","search_id",1,"mr-sm-2"],["type","text","name","search_id","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","change","keyup.enter"],[1,"tableFixHead"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate"],["type","text",1,"form-control",2,"width","100px",3,"name","ngModel","ngModelChange","change"],["type","text",1,"form-control",2,"width","100px",3,"name","ngModel","placeholder","ngModelChange","change"],[1,"text-truncate","text-center"],["type","checkbox",1,"form-control",2,"width","25px",3,"name","ngModel","ngModelChange","change"],[1,"form","theme-form",3,"ngSubmit"],["form1","ngForm"],["for","comment"],["rows","2","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["for","img",1,"mr-sm-2"],["name","fileUpload","type","file",3,"change"],["fileUpload",""],["type","hidden","name","fileUpload",3,"ngModel","ngModelChange"],[1,"mute"],["href","javascript:;",1,"mr-sm-2",3,"click"],["href","javascript:;","class","text-danger",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit","class","btn btn-primary mr-sm-1",4,"ngIf"],["href","javascript:;",1,"text-danger",3,"click"],[1,"fa","fa-trash"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary","mr-sm-1"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.hc(12,"select",10),b.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),b.hc(13,"option",11),b.dd(14),b.wc(15,"translate"),b.gc(),b.hc(16,"option",12),b.dd(17),b.wc(18,"translate"),b.gc(),b.hc(19,"option",13),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"option",14),b.dd(23),b.wc(24,"translate"),b.gc(),b.hc(25,"option",15),b.dd(26),b.wc(27,"translate"),b.gc(),b.hc(28,"option",16),b.dd(29),b.wc(30,"translate"),b.gc(),b.gc(),b.bd(31,k,4,3,"button",17),b.hc(32,"button",18),b.dd(33),b.wc(34,"translate"),b.gc(),b.bd(35,P,1,0,"img",19),b.gc(),b.gc(),b.hc(36,"div",20),b.hc(37,"div",21),b.hc(38,"select",22),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(39,"option",23),b.dd(40,"#10"),b.gc(),b.hc(41,"option",24),b.dd(42,"#25"),b.gc(),b.hc(43,"option",25),b.dd(44,"#50"),b.gc(),b.hc(45,"option",26),b.dd(46,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(47,"div",27),b.hc(48,"div",28),b.hc(49,"div",29),b.hc(50,"div",30),b.hc(51,"pagination",31),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(52,"div",32),b.hc(53,"a",33),b.dd(54),b.wc(55,"translate"),b.wc(56,"translate"),b.wc(57,"translate"),b.wc(58,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(59,"div",28),b.hc(60,"div",34),b.hc(61,"table",35),b.hc(62,"thead",36),b.hc(63,"tr"),b.hc(64,"th",37),b.dd(65,"#"),b.gc(),b.hc(66,"th",38),b.dd(67),b.wc(68,"translate"),b.gc(),b.hc(69,"th",39),b.dd(70),b.wc(71,"translate"),b.gc(),b.hc(72,"th",39),b.dd(73),b.wc(74,"translate"),b.gc(),b.hc(75,"th",39),b.dd(76),b.wc(77,"translate"),b.gc(),b.hc(78,"th",39),b.dd(79),b.wc(80,"translate"),b.gc(),b.hc(81,"th",39),b.dd(82),b.wc(83,"translate"),b.gc(),b.hc(84,"th",39),b.dd(85),b.wc(86,"translate"),b.gc(),b.hc(87,"th",39),b.dd(88),b.wc(89,"translate"),b.gc(),b.hc(90,"th",39),b.dd(91),b.wc(92,"translate"),b.gc(),b.gc(),b.gc(),b.hc(93,"tbody"),b.bd(94,R,6,3,"ng-container",40),b.bd(95,Q,2,1,"ng-container",40),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(96,"div",28),b.hc(97,"div",29),b.hc(98,"div",30),b.hc(99,"pagination",31),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(100,"div",32),b.hc(101,"a",33),b.dd(102),b.wc(103,"translate"),b.wc(104,"translate"),b.wc(105,"translate"),b.wc(106,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(107,$,22,15,"ng-template",null,41,b.cd),b.bd(109,K,31,29,"ng-template",null,42,b.cd),b.bd(111,W,99,101,"ng-template",null,43,b.cd),b.bd(113,ne,44,33,"ng-template",null,44,b.cd),b.bd(115,oe,36,19,"ng-template",null,45,b.cd)),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,52,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(102,re)),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(103,re)),b.Nb(1),b.Dc("ngModel",t._status),b.Nb(2),b.fd(" ",b.xc(15,54,"All")," "),b.Nb(3),b.fd(" ",b.xc(18,56,"Draft")," "),b.Nb(3),b.fd(" ",b.xc(21,58,"Official")," "),b.Nb(3),b.fd(" ",b.xc(24,60,"Evicted")," "),b.Nb(3),b.fd(" ",b.xc(27,62,"Printed")," "),b.Nb(3),b.fd(" ",b.xc(30,64,"Cancel")," "),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),b.Nb(2),b.fd(" ",b.xc(34,66,"Go back")," "),b.Nb(2),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(55,68,"Total of records"),": ",t.totalRow," - ",b.xc(56,70,"Page")," ",t.pageIndex," ",b.xc(57,72,"of")," ",t.totalPage," ",b.xc(58,74,"page"),""),b.Nb(13),b.fd(" ",b.xc(68,76,"Actions")," "),b.Nb(3),b.fd(" ",b.xc(71,78,"Report code")," "),b.Nb(3),b.fd(" ",b.xc(74,80,"Request code")," "),b.Nb(3),b.fd(" ",b.xc(77,82,"Sample name")," "),b.Nb(3),b.fd(" ",b.xc(80,84,"Received date")," "),b.Nb(3),b.ed(b.xc(83,86,"Returned date")),b.Nb(3),b.fd(" ",b.xc(86,88,"Company")," "),b.Nb(3),b.ed(b.xc(89,90,"Contact")),b.Nb(3),b.ed(b.xc(92,92,"Status")),b.Nb(3),b.Dc("ngIf",0==t._getlist.length),b.Nb(1),b.Dc("ngIf",t._getlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(103,94,"Total of records"),": ",t.totalRow," - ",b.xc(104,96,"Page")," ",t.pageIndex," ",b.xc(105,98,"of")," ",t.totalPage," ",b.xc(106,100,"page"),""))},directives:[c.c,c.n,c.q,D.b,D.a,c.x,c.r,c.A,a.q,i.e,M.a,a.p,w.l,w.p,w.o,c.z,c.o,c.p,C.a,c.w,c.t,a.o,c.b],pipes:[T.c,a.f],styles:[""]}),e})();const se=["fileUpload"];function de(e,t){if(1&e&&(b.hc(0,"option",37),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function he(e,t){if(1&e){const e=b.ic();b.hc(0,"button",38),b.rc("click",function(){b.Uc(e);const t=b.vc();return null==t._id||""==t._id?t._exportAll(t._preparationlist):t._exportAllLab()}),b.cc(1,"i",39),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function ge(e,t){1&e&&b.cc(0,"img",40)}function ue(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",41),b.hc(3,"h3",42),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function me(e,t){1&e&&b.cc(0,"i",53)}function _e(e,t){1&e&&b.cc(0,"i",54)}function pe(e,t){if(1&e){const e=b.ic();b.hc(0,"button",55),b.rc("click",function(){b.Uc(e);const t=b.vc(3);return t._updateValidationv2(t._preparationlist)}),b.wc(1,"translate"),b.cc(2,"i",56),b.gc()}2&e&&b.Dc("title",b.xc(1,1,"Save"))}function fe(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"a",57),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit,n=b.vc(2),a=b.Rc(120);return n.popupComment(a,t)}),b.dd(2),b.gc(),b.ec()}if(2&e){const e=b.vc().$implicit;b.Nb(2),b.ed(e.inner_code)}}function be(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.ed(e.inner_code)}}function ve(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"a",57),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._updateStatusSample(t)}),b.dd(2),b.wc(3,"translate"),b.gc(),b.ec()}2&e&&(b.Nb(2),b.ed(b.xc(3,1,"Return lab")))}function ye(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.mark," ")}}function xe(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",58),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.mark=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","mark",t+1,""),b.Dc("ngModel",n.mark)}}function Se(e,t){1&e&&b.cc(0,"i",59)}function Ne(e,t){1&e&&b.cc(0,"i",60)}function we(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.compare_note," ")}}function De(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",58),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.compare_note=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","comparenote",t+1,""),b.Dc("ngModel",n.compare_note)}}function Me(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",34),b.dd(2),b.gc(),b.hc(3,"td",44),b.hc(4,"button",45),b.rc("click",function(){return b.Uc(e),b.vc(2)._switchFlagEdit()}),b.wc(5,"translate"),b.bd(6,me,1,0,"i",46),b.bd(7,_e,1,0,"i",47),b.gc(),b.bd(8,pe,3,3,"button",48),b.gc(),b.hc(9,"td"),b.bd(10,fe,3,1,"ng-container",35),b.bd(11,be,2,1,"ng-container",35),b.gc(),b.hc(12,"td"),b.dd(13),b.gc(),b.hc(14,"td"),b.dd(15),b.gc(),b.hc(16,"td"),b.dd(17),b.gc(),b.hc(18,"td"),b.dd(19),b.gc(),b.hc(20,"td"),b.dd(21),b.gc(),b.hc(22,"td"),b.dd(23),b.gc(),b.hc(24,"td"),b.dd(25),b.gc(),b.hc(26,"td"),b.dd(27),b.gc(),b.hc(28,"td"),b.dd(29),b.gc(),b.hc(30,"td"),b.dd(31),b.gc(),b.hc(32,"td"),b.cc(33,"span",49),b.gc(),b.hc(34,"td"),b.bd(35,ve,4,3,"ng-container",35),b.gc(),b.hc(36,"td"),b.bd(37,ye,2,1,"ng-container",35),b.bd(38,xe,2,2,"ng-container",35),b.gc(),b.hc(39,"td",50),b.rc("click",function(){const e=t.$implicit;return e.allow_lod=!e.allow_lod}),b.bd(40,Se,1,0,"i",51),b.bd(41,Ne,1,0,"i",52),b.gc(),b.hc(42,"td"),b.bd(43,we,2,1,"ng-container",35),b.bd(44,De,2,2,"ng-container",35),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(2),b.fd(" ",n+1+a.pageSize*(a.pageIndex-1)," "),b.Nb(2),b.Dc("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!a._authenService.hasPermission("REQ-REPORT","update"))("title",b.xc(5,27,e.flag?"Cancel":"_Edit")),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",a._authenService.hasPermission("REQ-REPORT","update")),b.Nb(1),b.Dc("ngIf",!a._authenService.hasPermission("REQ-REPORT","update")),b.Nb(2),b.ed(e.code),b.Nb(2),b.fd(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ","en"==a.user.lang?e.para_name_e:e.para_name_l," "),b.Nb(2),b.ed(e.tat),b.Nb(2),b.ed(e.note),b.Nb(2),b.ed(e.note_lab),b.Nb(2),b.fd(" ",e.note_asm," "),b.Nb(2),b.ed(e.unit),b.Nb(2),b.fd(" ",e.lod," "),b.Nb(2),b.fd(" ",e.loq," "),b.Nb(2),b.Dc("innerHTML",e.result_record,b.Vc),b.Nb(2),b.Dc("ngIf",a._authenService.hasPermission("REQ-REPORT","update")&&a._authenService.hasPermission("REQ-REPORT","delete")),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",e.allow_lod),b.Nb(1),b.Dc("ngIf",!e.allow_lod),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag)}}function Ce(e,t){if(1&e&&(b.fc(0),b.bd(1,Me,45,29,"tr",43),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._preparationlist)}}function Te(e,t){if(1&e){const e=b.ic();b.hc(0,"a",83),b.rc("click",function(){b.Uc(e);const t=b.vc(2);return t.removeAttachment(t.entityComment)}),b.cc(1,"i",84),b.gc()}}function Ie(e,t){1&e&&(b.fc(0),b.hc(1,"a",85),b.cc(2,"img",86),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing"),""))}function ke(e,t){1&e&&(b.hc(0,"button",87),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Save & close")," "))}function Pe(e,t){if(1&e){const e=b.ic();b.hc(0,"form",61,62),b.rc("ngSubmit",function(){b.Uc(e);const t=b.vc();return t.saveChangeComment(t.entityComment,0)}),b.hc(2,"div",63),b.hc(3,"h4",64),b.dd(4),b.wc(5,"translate"),b.gc(),b.hc(6,"button",65),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(7,"span",66),b.dd(8,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(9,"div",67),b.hc(10,"div",68),b.hc(11,"div",69),b.hc(12,"div",70),b.hc(13,"label",71),b.dd(14),b.wc(15,"translate"),b.gc(),b.hc(16,"textarea",72),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entityComment.take_note=t}),b.gc(),b.gc(),b.gc(),b.hc(17,"div",69),b.hc(18,"div",70),b.hc(19,"label",73),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"input",74,75),b.rc("change",function(t){return b.Uc(e),b.vc().fileEvent(t)}),b.gc(),b.hc(24,"input",76),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entityComment.url_img=t}),b.gc(),b.cc(25,"br"),b.hc(26,"small",77),b.hc(27,"a",78),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._downloadFileResult(t.entityComment)}),b.dd(28),b.gc(),b.bd(29,Te,2,0,"a",79),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(30,"div",80),b.hc(31,"button",81),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.dd(32),b.wc(33,"translate"),b.gc(),b.bd(34,Ie,5,3,"ng-container",35),b.bd(35,ke,3,3,"button",82),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(4),b.gd(" ",b.xc(5,11,"Note")," - ",e.entityComment.inner_code," "),b.Nb(10),b.fd("",b.xc(15,13,"Content")," "),b.Nb(2),b.Dc("ngModel",e.entityComment.take_note),b.Nb(4),b.ed(b.xc(21,15,"Attachment")),b.Nb(4),b.Dc("ngModel",e.entityComment.url_img),b.Nb(4),b.ed(e._path),b.Nb(1),b.Dc("ngIf",null!=e.entityComment.url_img),b.Nb(3),b.fd(" ",b.xc(33,17,"Close")," "),b.Nb(2),b.Dc("ngIf",e.isSave),b.Nb(1),b.Dc("ngIf",!e.isSave)}}const Re=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};g.a.vfs=m.a.pdfMake.vfs;let Ee=(()=>{class e{constructor(e,t,n,a,c,i,o,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=c,this._excelService=i,this.modalService=o,this._activatedRoute=r,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=3,this.entity={},this.entityComment={},this._path="",this._id="",this._flagEdit=!1,!1!==e.checkAccess("RES-VALID")&&!1!==e.hasPermission("RES-VALID","read")||this._route.navigate(["/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this._activatedRoute.params.subscribe(e=>{this._id=e.id,this.loadData(this._id),this.socket.on("refreshPage",e=>{console.log(this._id),this.loadData(this._id)})}),this.loadDepartment(),this.loadTestFamilyPL()}loadData(e){if(null==e){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,this._dataService.post("/lab/getlistresultlabs",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,tat:n.tat,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,export_result:null==n.export_result?1:n.export_result,allow_lod:null!=n.allow_lod&&n.allow_lod,compare_note:n.compare_note,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}else{let e={};e.filter=this._keyword,e.page=this.pageIndex,e.limit=this.pageSize,e.request_id=this._id,this._dataService.post("/lab/getlistresultlabsbyid",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,tat:n.tat,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,export_result:null==n.export_result?1:n.export_result,allow_lod:null!=n.allow_lod&&n.allow_lod,compare_note:n.compare_note,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyPL(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",e).subscribe(e=>{this._pllist=e.data})}_exportAll(e){let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?f.a.s_done_en:f.a.s_done),3==n.status&&(e="en"==this.user.lang?f.a.s_validate_en:f.a.s_validate),2==n.status&&(e="en"==this.user.lang?f.a.s_techvalidate_en:f.a.s_techvalidate),1==n.status&&(e="en"==this.user.lang?f.a.s_prepare_en:f.a.s_prepare),0==n.status&&(e="en"==this.user.lang?f.a.s_none_en:f.a.s_none);let a=new Date(n.received_date).getTime()+864e5*n.tat;t.push({"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,Note:null==n.note?"":n.note,"Note Lab":null==n.note_lab?"":n.note_lab,"Note ASM":null==n.note_asm?"":n.note_asm,Unit:null==n.unit?"":n.unit,LOD:null==n.lod?"":n.lod,LOQ:null==n.loq?"":n.loq,Result:null==n.result_record?"":n.result_record,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(a)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l})}this._excelService.exportAsExcelFile(t,"LabValidation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.length+" "+f.a.record,"OK")}_exportAllLab(){this._dataService.post("/lab/exportresultlabbyid",{request_id:this._id,short_code:this.user.short_code}).subscribe(e=>{let t=[];for(let n of e.data)t.push({"Ng\xe0y nh\u1eadn m\u1eabu":r(new Date(n.returned_date)).format("DD/MM/YYYY"),"M\xe3 kh\xe1ch h\xe0ng":n.employee_nr+n.request_no.substr(2,n.request_no.length),"M\xe3 s\u1ed1 m\u1eabu":n.inner_code,"T\xean m\u1eabu/n\u1ec1n m\u1eabu":null==n.sample_name_e?n.sample_name:n.sample_name_e,"Kh\u1ed1i l\u01b0\u1ee3ng/th\u1ec3 t\xedch":"",VS:"",H\u00f3a:"","T\xecnh tr\u1ea1ng m\u1eabu":null==n.description_e?null==n.description?"":n.description:n.descripton_e,"Ng\xe0y/ ng\u01b0\u1eddi l\u01b0u m\u1eabu":"","Khu v\u1ef1c/ v\u1ecb tr\xed l\u01b0u":"","Ng\xe0y thanh l\xfd":"","Ng\u01b0\u1eddi thanh l\xfd":"","Tr\u01b0\u1edfng ph\xf2ng x\xe1c nh\u1eadn":"","Ghi ch\xfa":""});this._excelService.exportAsExcelFile(t,"LabValidation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+t.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+t.length+" "+f.a.record,"OK")})}orgValueChange1(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e,t){3==t||4==t?(e.status=t,p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_switch_en:f.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData(this._id)}):this.loadData(this._id)})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData(this._id)}))}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}_switchFlagEdit(){for(let e of this._preparationlist)e.flag=!e.flag}_updateValidationv2(e){console.log(e),p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure0_en:f.a.are_u_sure0,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value&&this._dataService.post("/lab/updateValidationv2",{getlist:e,user_id:this.user.id,ipaddress:this.user.ipaddress,short_code:this.user.short_code}).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})})})}_updateValidation(e,t){1==t&&(e.allow_lod=!e.allow_lod),p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure0_en:f.a.are_u_sure0,text:e.code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value&&this._dataService.post("/lab/updateValidation",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})})})}_updateValidationLOD(e,t){1==t&&(e.allow_lod=!e.allow_lod),this._dataService.post("/lab/updateValidationLOD",e).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})})}popupComment(e,t){this.loadDetailSample(t.sample_id),this.modalService.open(e,{size:"md",centered:!0})}saveChangeComment(e,t){let n={};n.sample_id=this.entityComment.sample_id,n.take_note=this.entityComment.take_note,n.url_img=e,n.flag=t,this._dataService.post("/request/updateComment",n).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this.fileUpload=null,this.entityComment.url_img=null,this.modalService.dismissAll()})}loadDetailSample(e){let t={};t.sample_id=e,this._dataService.post("/request/detailSampleOrder",t).subscribe(e=>{console.log(e),this.entityComment=e.data,this.entityComment.url_img=e.data.url_img,this._path=null==e.data.url_img?null:e.data.url_img.substr(e.data.url_img.lastIndexOf("/")+1,e.data.url_img.length)})}fileEvent(e){var t=e.target.files[0];if(void 0===t||void 0===t.name)this.fileUpload=null,this.entityComment.url_img=null,this._notifyService.showError("en"==this.user.lang?f.a.recheck_file_en:f.a.recheck_file,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);else{this.fileUpload=t.name;let n=this.fileUpload.split(".").pop();"jpg"===n||"jpeg"===n||"png"===n?(console.log("ok"),this.entityComment.url_img=t.name,this._processUpload(e.target)):(this._notifyService.showError("en"==this.user.lang?f.a.format_incorrect_en:f.a.format_incorrect,"en"==this.user.lang?f.a.error_title_en:f.a.error_title),this.fileUpload=null,this.entityComment.url_img=null)}}_processUpload(e){if(null==e)this._notifyService.showError("en"==this.user.lang?f.a.recheck_file_en:f.a.recheck_file,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);else{let t={folder_name:"lab_attachment"};t.id=this.entityComment.sample_id,this._uploadService.uploadFile("/services/uploads/"+t.id+"/"+t.folder_name,e.files).subscribe(e=>{console.log(e),this.saveChangeComment(e.data,1)})}}removeAttachment(e){let t={};t.url=e.url_img,console.log(t),this._dataService.post("/services/deletefile1",t).subscribe(t=>{let n={};n.sample_id=e.sample_id,n.take_note=e.take_note,n.url_img=null,this._dataService.post("/request/updateComment",n).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}),this._path="",this.loadDetailSample(e.sample_id)})})}_updateStatusSample(e){console.log(e),p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_switch_en:f.a.are_u_sure_switch,text:e.inner_code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{if(t.value){let t={};t.sample_id=e.sample_id,t.parameter_id=e.parameter_id,t.category_id=e.category_id,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/labresult/updateReturnSample",t).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})})}})}_downloadFileResult(e){window.open(d.a.BASE_API+"/"+e.url_img,"blank")}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(v.a),b.bc(y.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(w.s),b.bc(i.a))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-labrep-detaillist"]],viewQuery:function(e,t){if(1&e&&(b.jd(se,1),b.jd(se,1)),2&e){let e;b.Qc(e=b.sc())&&(t.fileUpload=e.first),b.Qc(e=b.sc())&&(t.fileUpload1=e.first)}},decls:121,vars:123,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","disabled","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["routerLink","/request/lab-report",1,"btn","btn-sm","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[1,"text-truncate"],[4,"ngIf"],["contentCommentUpload",""],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","18",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],[2,"text-align","center"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[3,"innerHTML"],[2,"cursor","pointer",3,"click"],["class","fa fa-check-circle text-success",4,"ngIf"],["class","fa fa-times-circle text-danger",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["href","javascript:;",3,"click"],["type","text","autoSizeInput","",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"fa","fa-check-circle","text-success"],[1,"fa","fa-times-circle","text-danger"],[1,"form","theme-form",3,"ngSubmit"],["form1","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group"],["for","comment"],["rows","2","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["for","img",1,"mr-sm-2"],["name","fileUpload","type","file",3,"change"],["fileUpload",""],["type","hidden","name","fileUpload",3,"ngModel","ngModelChange"],[1,"mute"],["href","javascript:;",1,"mr-sm-2",3,"click"],["href","javascript:;","class","text-danger",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit","class","btn btn-primary mr-sm-1",4,"ngIf"],["href","javascript:;",1,"text-danger",3,"click"],[1,"fa","fa-trash"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary","mr-sm-1"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData(t._id)})("keyup.enter",function(){return t.loadData(t._id)}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.hc(12,"select",10),b.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData(t._id)}),b.hc(13,"option",11),b.dd(14),b.wc(15,"translate"),b.wc(16,"translate"),b.gc(),b.bd(17,de,2,2,"option",12),b.gc(),b.bd(18,he,4,3,"button",13),b.hc(19,"a",14),b.dd(20),b.wc(21,"translate"),b.wc(22,"translate"),b.gc(),b.bd(23,ge,1,0,"img",15),b.gc(),b.gc(),b.hc(24,"div",16),b.hc(25,"div",17),b.hc(26,"select",18),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(27,"option",19),b.dd(28,"#10"),b.gc(),b.hc(29,"option",20),b.dd(30,"#25"),b.gc(),b.hc(31,"option",21),b.dd(32,"#50"),b.gc(),b.hc(33,"option",22),b.dd(34,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(35,"div",23),b.hc(36,"div",24),b.hc(37,"div",25),b.hc(38,"div",26),b.hc(39,"pagination",27),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(40,"div",28),b.hc(41,"a",29),b.dd(42),b.wc(43,"translate"),b.wc(44,"translate"),b.wc(45,"translate"),b.wc(46,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(47,"div",24),b.hc(48,"div",30),b.hc(49,"table",31),b.hc(50,"thead",32),b.hc(51,"tr"),b.hc(52,"th",33),b.dd(53,"#"),b.gc(),b.hc(54,"th",34),b.dd(55),b.wc(56,"translate"),b.gc(),b.hc(57,"th",34),b.dd(58),b.wc(59,"translate"),b.gc(),b.hc(60,"th",34),b.dd(61),b.wc(62,"translate"),b.gc(),b.hc(63,"th",34),b.dd(64),b.wc(65,"translate"),b.gc(),b.hc(66,"th",34),b.dd(67),b.wc(68,"translate"),b.gc(),b.hc(69,"th",34),b.dd(70),b.wc(71,"translate"),b.gc(),b.hc(72,"th",34),b.dd(73),b.wc(74,"translate"),b.gc(),b.hc(75,"th",34),b.dd(76),b.wc(77,"translate"),b.gc(),b.hc(78,"th",34),b.dd(79),b.wc(80,"translate"),b.gc(),b.hc(81,"th",34),b.dd(82),b.wc(83,"translate"),b.gc(),b.hc(84,"th",34),b.dd(85),b.wc(86,"translate"),b.gc(),b.hc(87,"th",34),b.dd(88),b.wc(89,"translate"),b.gc(),b.hc(90,"th",34),b.dd(91),b.wc(92,"translate"),b.gc(),b.hc(93,"th",34),b.dd(94),b.wc(95,"translate"),b.gc(),b.hc(96,"th",34),b.dd(97),b.wc(98,"translate"),b.gc(),b.hc(99,"th",34),b.dd(100),b.wc(101,"translate"),b.gc(),b.hc(102,"th",34),b.dd(103),b.wc(104,"translate"),b.gc(),b.gc(),b.gc(),b.hc(105,"tbody"),b.bd(106,ue,6,3,"ng-container",35),b.bd(107,Ce,2,1,"ng-container",35),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(108,"div",24),b.hc(109,"div",25),b.hc(110,"div",26),b.hc(111,"pagination",27),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(112,"div",28),b.hc(113,"a",29),b.dd(114),b.wc(115,"translate"),b.wc(116,"translate"),b.wc(117,"translate"),b.wc(118,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(119,Pe,36,19,"ng-template",null,36,b.cd)),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,61,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(121,Re))("disabled",null!=t._id),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(122,Re))("disabled",null!=t._id),b.Nb(1),b.Dc("ngModel",t.department_id)("disabled",null!=t._id),b.Nb(2),b.gd(" ",b.xc(15,63,"All")," ",b.xc(16,65,"Department")," "),b.Nb(3),b.Dc("ngForOf",t._deptlist),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-VALID","report")),b.Nb(2),b.gd(" ",b.xc(21,67,"Return")," ",b.xc(22,69,"Report")," "),b.Nb(3),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(43,71,"Total of records"),": ",t.totalRow," - ",b.xc(44,73,"Page")," ",t.pageIndex," ",b.xc(45,75,"of")," ",t.totalPage," ",b.xc(46,77,"page"),""),b.Nb(13),b.ed(b.xc(56,79,"Actions")),b.Nb(3),b.fd(" ",b.xc(59,81,"Inner code")," "),b.Nb(3),b.fd(" ",b.xc(62,83,"Code")," "),b.Nb(3),b.ed(b.xc(65,85,"Internal testing")),b.Nb(3),b.ed(b.xc(68,87,"Parameter name")),b.Nb(3),b.ed(b.xc(71,89,"Priority")),b.Nb(3),b.ed(b.xc(74,91,"Note")),b.Nb(3),b.ed(b.xc(77,93,"Note lab")),b.Nb(3),b.ed(b.xc(80,95,"Note asm")),b.Nb(3),b.ed(b.xc(83,97,"Unit")),b.Nb(3),b.ed(b.xc(86,99,"LOD")),b.Nb(3),b.ed(b.xc(89,101,"LOQ")),b.Nb(3),b.ed(b.xc(92,103,"Results")),b.Nb(3),b.ed(b.xc(95,105,"Status")),b.Nb(3),b.ed(b.xc(98,107,"Mark")),b.Nb(3),b.ed(b.xc(101,109,"Tick LOD?")),b.Nb(3),b.ed(b.xc(104,111,"Compare")),b.Nb(3),b.Dc("ngIf",0==t._preparationlist.length),b.Nb(1),b.Dc("ngIf",t._preparationlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(115,113,"Total of records"),": ",t.totalRow," - ",b.xc(116,115,"Page")," ",t.pageIndex," ",b.xc(117,117,"of")," ",t.totalPage," ",b.xc(118,119,"page"),""))},directives:[c.c,c.n,c.q,D.b,D.a,c.x,c.r,c.A,a.p,a.q,i.g,M.a,a.o,c.z,c.o,c.p],pipes:[T.c],styles:[""]}),e})();function Ae(e,t){if(1&e){const e=b.ic();b.hc(0,"button",34),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t.exportList)}),b.cc(1,"i",35),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function Ue(e,t){1&e&&b.cc(0,"img",36)}function Fe(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",37),b.hc(3,"h3",38),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function Oe(e,t){if(1&e&&(b.hc(0,"a",46),b.hc(1,"strong",38),b.dd(2),b.gc(),b.gc()),2&e){const e=b.vc().$implicit;b.Fc("routerLink","/request/lab-report-validation/",e.id,""),b.Nb(2),b.ed(e.total_validation)}}function Ye(e,t){1&e&&(b.fc(0),b.hc(1,"strong"),b.dd(2,"0"),b.gc(),b.ec())}function Le(e,t){1&e&&(b.hc(0,"span",47),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Printed")))}function qe(e,t){1&e&&(b.hc(0,"span",48),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Pending")))}function ze(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",40),b.dd(2),b.gc(),b.hc(3,"td"),b.dd(4),b.gc(),b.hc(5,"td"),b.dd(6),b.wc(7,"date"),b.gc(),b.hc(8,"td"),b.dd(9),b.wc(10,"date"),b.gc(),b.hc(11,"td"),b.dd(12),b.gc(),b.hc(13,"td"),b.hc(14,"strong"),b.dd(15),b.gc(),b.gc(),b.hc(16,"td"),b.hc(17,"a",41),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc(2),c=b.Rc(87);return n.total_results>0?a._openResults(c,n):null}),b.hc(18,"strong",42),b.dd(19),b.gc(),b.gc(),b.gc(),b.hc(20,"td"),b.bd(21,Oe,3,2,"a",43),b.bd(22,Ye,3,0,"ng-container",32),b.gc(),b.hc(23,"td"),b.bd(24,Le,3,3,"span",44),b.bd(25,qe,3,3,"span",45),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(2),b.fd(" ",n+1+a.pageSize*(a.pageIndex-1)," "),b.Nb(2),b.fd(" ",e.order_code," "),b.Nb(2),b.ed(b.yc(7,12,e.received_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.ed(b.yc(10,15,e.returned_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.ed(e.total_sample),b.Nb(3),b.ed(e.total_tests),b.Nb(3),b.Dc("ngClass",e.total_results<e.total_tests?"text-danger":""),b.Nb(1),b.ed(e.total_results),b.Nb(2),b.Dc("ngIf",e.total_validation>0),b.Nb(1),b.Dc("ngIf",0==e.total_validation),b.Nb(2),b.Dc("ngIf",e.flag),b.Nb(1),b.Dc("ngIf",!e.flag)}}function Ge(e,t){if(1&e&&(b.fc(0),b.bd(1,ze,26,18,"tr",39),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._preparationlist)}}function Ve(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"td"),b.hc(2,"input",61),b.rc("change",function(n){b.Uc(e);const a=t.$implicit;return b.vc(2).selectItem(n,a.sample_id+","+a.parameter_id+","+a.category_id)}),b.gc(),b.gc(),b.hc(3,"td"),b.hc(4,"span",42),b.dd(5),b.gc(),b.gc(),b.hc(6,"td"),b.dd(7),b.gc(),b.hc(8,"td"),b.dd(9),b.gc(),b.hc(10,"td"),b.dd(11),b.gc(),b.hc(12,"td"),b.cc(13,"span",62),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(2),b.Fc("name","ckU",n+1,""),b.Dc("checked",a.exportList.includes(e.sample_id+","+e.parameter_id+","+e.category_id)),b.Nb(2),b.Dc("ngClass",e.flagEvicted?"text-danger":""),b.Nb(1),b.ed(e.inner_code),b.Nb(2),b.ed(e.code),b.Nb(2),b.fd(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ","en"==a.user.lang?e.para_name_e:e.para_name_l," "),b.Nb(2),b.Dc("innerHTML",e.result_record,b.Vc)}}function Be(e,t){if(1&e){const e=b.ic();b.hc(0,"form",49),b.hc(1,"div",50),b.hc(2,"h4",51),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",52),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",53),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",54),b.hc(9,"div",55),b.hc(10,"div",56),b.hc(11,"div",27),b.hc(12,"button",57),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._switch(1,t.exportList)}),b.dd(13),b.wc(14,"translate"),b.gc(),b.hc(15,"button",58),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._switch(2,t.exportList)}),b.dd(16),b.wc(17,"translate"),b.gc(),b.cc(18,"hr"),b.hc(19,"table",28),b.hc(20,"thead",29),b.hc(21,"tr"),b.hc(22,"th",59),b.hc(23,"input",60),b.rc("change",function(t){return b.Uc(e),b.vc().selectAll(t)}),b.gc(),b.gc(),b.hc(24,"th",31),b.dd(25),b.wc(26,"translate"),b.gc(),b.hc(27,"th",31),b.dd(28),b.wc(29,"translate"),b.gc(),b.hc(30,"th",31),b.dd(31),b.wc(32,"translate"),b.gc(),b.hc(33,"th",31),b.dd(34),b.wc(35,"translate"),b.gc(),b.hc(36,"th",31),b.dd(37),b.wc(38,"translate"),b.gc(),b.gc(),b.gc(),b.hc(39,"tbody"),b.bd(40,Ve,14,8,"tr",39),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.gd(" ",b.xc(4,14,"Report")," - ",e._titleRequest," "),b.Nb(9),b.Dc("disabled",0==e.resultlist.length),b.Nb(1),b.fd(" ",b.xc(14,16,"Action draft")," "),b.Nb(2),b.Dc("disabled",0==e.resultlist.length),b.Nb(1),b.fd(" ",b.xc(17,18,"Action direct")," "),b.Nb(7),b.Dc("disabled",0==e.resultlist.length)("checked",e.exportList.length==e.resultlist.length),b.Nb(2),b.fd(" ",b.xc(26,20,"Sample code")," "),b.Nb(3),b.fd(" ",b.xc(29,22,"Code")," "),b.Nb(3),b.fd(" ",b.xc(32,24,"Internal testing")," "),b.Nb(3),b.fd(" ",b.xc(35,26,"Parameter name")," "),b.Nb(3),b.fd(" ",b.xc(38,28,"Results")," "),b.Nb(3),b.Dc("ngForOf",e.resultlist)}}const He=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let Qe=(()=>{class e{constructor(e,t,n,a,c,i,o){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=c,this._excelService=i,this.modalService=o,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=0,this.entity={},this.resultlist=[],this._orderdetails=[],this._titleRequest="",this.exportList=[],this._idRequest="",!1!==e.checkAccess("REQ-REPORT")&&!1!==e.hasPermission("REQ-REPORT","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.page=this.pageIndex,e.limit=this.pageSize,this._dataService.post("/lab/getlistreportlabs",e).subscribe(e=>{console.log("Load data",e),this._preparationlist=e.data,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyCSP(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",e).subscribe(e=>{this._csplist=e.data})}_exportAll(){let e={filter:""};e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.page=1,e.limit=99999,this._dataService.post("/lab/getlistreportlabs",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({Ma_Yeu_Cau:n.request_no,Ngay_Nhan:r(n.received_date).format("DD/MM/YYYY HH:mm"),Ngay_Tra:r(n.returned_date).format("DD/MM/YYYY HH:mm"),Tong_Mau:parseInt(n.total_sample),Tong_Test:n.total_tests,Tong_Ket_Qua:n.total_results,Tong_Lab_Validation:n.total_validation,Moi_Lien_He:"",Doanh_Thu:""});this._excelService.exportAsExcelFile(t,"LabReport-"+r(new Date).format("YYYY-MM-DD"))})}orgValueChange1(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e){this.entity=e}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_complete_en:f.a.are_u_sure_complete,text:this.entity.request_no,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}):(this.isSave=!1,this.socket.emit("refresh",{}))})}_openResults(e,t){console.log(t),this._titleRequest=t.request_no,this._idRequest=t.id,this.loadOrderDetailDoneById(t.id),this.modalService.open(e,{size:"lg",centered:!0})}loadOrderDetailDoneById(e){let t={};t.id=e,this._dataService.post("/labresult/getlist-result-byrequestId",t).subscribe(t=>{console.log("ABC",t);let n={};n.id=e,this._dataService.post("/lab/labcompleted",n).subscribe(e=>{console.log("KQ0",e);let n=[];for(let a of e.data){let e=t.data.filter(e=>e.sample_id==a.sample_id&&e.parameter_id==a.parameter_id&&e.category_id==a.category_id);0==e.length?(a.flagEvicted=!1,n.push(a)):2==e[0].is_active&&0==e.filter(e=>2!=e.is_active&&4!=e.is_active).length&&(a.flagEvicted=!0,n.push(a))}console.log("KQ",n),this.resultlist=n})})}selectAll(e){e.target.checked?(this.exportList=[],this.resultlist.forEach(e=>this.exportList.push(e.sample_id+","+e.parameter_id+","+e.category_id))):this.exportList=[]}selectItem(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(e=>e!=t)}_switch(e,t){if(1==e)if(0==t.length){let e=[];for(let t of this.resultlist){let n="";n+=t.sample_id+","+t.parameter_id+","+t.category_id,e.push(n)}this._processByIds(e,"draft")}else this._processByIds(t,"draft");if(2==e)if(0==t.length){let e=[];for(let t of this.resultlist){let n="";n+=t.sample_id+","+t.parameter_id+","+t.category_id,e.push(n)}this._processByIds(e,"official")}else this._processByIds(t,"official")}_processByRequestId(e,t){let n={};n.id=e,n.state=t,n.userId=this.user.id,console.log(n),this._dataService.post("/labresult/processAll",n).subscribe(e=>{console.log(e),"ok"==e.result&&this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK")})}_processByIds(e,t){let n={};n.state=t,n.userId=this.user.id;let a=[];for(let c of e){let e={},t=c.split(",");e.sample_id=t[0],e.parameter_id=t[1],e.category_id=t[2],a.push(e)}n.getlist=a,console.log("Process",n),this._dataService.post("/labresult/processByIds",n).subscribe(e=>{console.log("actions",e),"ok"==e.result&&this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.exportList=[],this.loadOrderDetailDoneById(this._idRequest)})}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(v.a),b.bc(y.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-report"]],decls:88,vars:85,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["routerLink","/request/lab-results/list",1,"btn","btn-sm","btn-warning"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],["content",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","9",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",3,"click"],[3,"ngClass"],[3,"routerLink",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],[3,"routerLink"],[1,"badge","badge-success"],[1,"badge","badge-warning"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"disabled","click"],[1,"btn","btn-sm","btn-success","mr-sm-2",3,"disabled","click"],[2,"text-align","center","width","40px"],["type","checkbox","name","checkAll",1,"form-control",3,"disabled","checked","change"],["type","checkbox",1,"form-control",3,"name","checked","change"],[3,"innerHTML"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.bd(12,Ae,4,3,"button",10),b.hc(13,"button",11),b.dd(14),b.wc(15,"translate"),b.wc(16,"translate"),b.gc(),b.bd(17,Ue,1,0,"img",12),b.gc(),b.gc(),b.hc(18,"div",13),b.hc(19,"div",14),b.hc(20,"select",15),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(21,"option",16),b.dd(22,"#10"),b.gc(),b.hc(23,"option",17),b.dd(24,"#25"),b.gc(),b.hc(25,"option",18),b.dd(26,"#50"),b.gc(),b.hc(27,"option",19),b.dd(28,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(29,"div",20),b.hc(30,"div",21),b.hc(31,"div",22),b.hc(32,"div",23),b.hc(33,"pagination",24),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(34,"div",25),b.hc(35,"a",26),b.dd(36),b.wc(37,"translate"),b.wc(38,"translate"),b.wc(39,"translate"),b.wc(40,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(41,"div",21),b.hc(42,"div",27),b.hc(43,"table",28),b.hc(44,"thead",29),b.hc(45,"tr"),b.hc(46,"th",30),b.dd(47,"#"),b.gc(),b.hc(48,"th",31),b.dd(49),b.wc(50,"translate"),b.gc(),b.hc(51,"th",31),b.dd(52),b.wc(53,"translate"),b.gc(),b.hc(54,"th",31),b.dd(55),b.wc(56,"translate"),b.gc(),b.hc(57,"th",31),b.dd(58),b.wc(59,"translate"),b.gc(),b.hc(60,"th",31),b.dd(61),b.wc(62,"translate"),b.gc(),b.hc(63,"th",31),b.dd(64),b.wc(65,"translate"),b.gc(),b.hc(66,"th",31),b.dd(67),b.wc(68,"translate"),b.gc(),b.hc(69,"th",31),b.dd(70),b.wc(71,"translate"),b.gc(),b.gc(),b.gc(),b.hc(72,"tbody"),b.bd(73,Fe,6,3,"ng-container",32),b.bd(74,Ge,2,1,"ng-container",32),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(75,"div",21),b.hc(76,"div",22),b.hc(77,"div",23),b.hc(78,"pagination",24),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(79,"div",25),b.hc(80,"a",26),b.dd(81),b.wc(82,"translate"),b.wc(83,"translate"),b.wc(84,"translate"),b.wc(85,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(86,Be,41,30,"ng-template",null,33,b.cd)),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,45,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(83,He)),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(84,He)),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),b.Nb(2),b.gd(" ",b.xc(15,47,"Print")," ",b.xc(16,49,"Report")," "),b.Nb(3),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(37,51,"Total of records"),": ",t.totalRow," - ",b.xc(38,53,"Page")," ",t.pageIndex," ",b.xc(39,55,"of")," ",t.totalPage," ",b.xc(40,57,"page"),""),b.Nb(13),b.fd(" ",b.xc(50,59,"Order code")," "),b.Nb(3),b.fd(" ",b.xc(53,61,"Received date")," "),b.Nb(3),b.ed(b.xc(56,63,"Returned date")),b.Nb(3),b.fd(" ",b.xc(59,65,"Total of samples")," "),b.Nb(3),b.ed(b.xc(62,67,"Total of tests")),b.Nb(3),b.ed(b.xc(65,69,"Total of results")),b.Nb(3),b.fd(" ",b.xc(68,71,"Total of validation labs")," "),b.Nb(3),b.fd(" ",b.xc(71,73,"Status")," "),b.Nb(3),b.Dc("ngIf",0==t._preparationlist.length),b.Nb(1),b.Dc("ngIf",t._preparationlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(82,75,"Total of records"),": ",t.totalRow," - ",b.xc(83,77,"Page")," ",t.pageIndex," ",b.xc(84,79,"of")," ",t.totalPage," ",b.xc(85,81,"page"),""))},directives:[c.c,c.n,c.q,D.b,D.a,a.q,i.e,c.x,c.r,c.A,M.a,a.p,a.o,i.g,c.z,c.o,c.p],pipes:[T.c,a.f],styles:[""]}),e})();var $e=n("EUZL"),Ke=n("REEf");function je(e,t){if(1&e&&(b.hc(0,"option",47),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function Xe(e,t){if(1&e&&(b.hc(0,"option",47),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.pl_name_e:e.pl_name_l," ")}}function We(e,t){if(1&e){const e=b.ic();b.hc(0,"button",48),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t._preparationlist)}),b.cc(1,"i",49),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function Je(e,t){if(1&e){const e=b.ic();b.hc(0,"button",50),b.rc("click",function(){return b.Uc(e),b.vc()._exportAllForImport()}),b.cc(1,"i",49),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Download file")," "))}function Ze(e,t){if(1&e){const e=b.ic();b.hc(0,"button",51),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(142);return t._importFile(n)}),b.cc(1,"i",52),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Import")," "))}function et(e,t){1&e&&b.cc(0,"img",53)}function tt(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",54),b.hc(3,"h3",55),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function nt(e,t){1&e&&b.cc(0,"i",72)}function at(e,t){1&e&&b.cc(0,"i",73)}function ct(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"button",69),b.rc("click",function(){return b.Uc(e),b.vc(3)._switchFlagEdit()}),b.wc(2,"translate"),b.bd(3,nt,1,0,"i",70),b.bd(4,at,1,0,"i",71),b.gc(),b.ec()}if(2&e){const e=b.vc().$implicit,t=b.vc(2);b.Nb(1),b.Dc("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!t._authenService.hasPermission("REQ-RES","update"))("title",b.xc(2,5,e.flag?"Cancel":"Edit")),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag)}}function it(e,t){if(1&e){const e=b.ic();b.hc(0,"button",74),b.rc("click",function(){b.Uc(e);const t=b.vc(3);return t._updateStatusv2(t._preparationlist)}),b.wc(1,"translate"),b.cc(2,"i",75),b.gc()}2&e&&b.Dc("title",b.xc(1,1,"Save"))}function ot(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.note_asm,"")}}function rt(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",76),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.note_asm=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","noteasm",t+1,""),b.Dc("ngModel",n.note_asm)}}function lt(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.unit,"")}}function st(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",76),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.unit=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","unit",t+1,""),b.Dc("ngModel",n.unit)}}function dt(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.lod,"")}}function ht(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",76),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.lod=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","lod",t+1,""),b.Dc("ngModel",n.lod)}}function gt(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.loq,"")}}function ut(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",76),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.loq=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","loq",t+1,""),b.Dc("ngModel",n.loq)}}function mt(e,t){if(1&e&&(b.fc(0),b.cc(1,"span",77),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.Dc("innerHTML",e.result_record,b.Vc)}}function _t(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",78),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.result_record=t}),b.wc(2,"translate"),b.gc(),b.hc(3,"input",78),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.result_record_e=t}),b.wc(4,"translate"),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","result_record",t+1,""),b.Dc("ngModel",n.result_record)("placeholder",b.xc(2,6,"Vietnamese")),b.Nb(2),b.Fc("name","result_recorde",t+1,""),b.Dc("ngModel",n.result_record_e)("placeholder",b.xc(4,8,"English"))}}function pt(e,t){1&e&&(b.hc(0,"span",79),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"None")))}function ft(e,t){1&e&&(b.hc(0,"span",80),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Preparation")))}function bt(e,t){1&e&&(b.hc(0,"span",81),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Technical validation")))}function vt(e,t){1&e&&(b.hc(0,"span",82),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Validation")))}function yt(e,t){1&e&&(b.hc(0,"span",83),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Done")))}function xt(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"tr"),b.hc(2,"th",57),b.dd(3),b.gc(),b.hc(4,"td",58),b.bd(5,ct,5,7,"ng-container",45),b.bd(6,it,3,3,"button",59),b.gc(),b.hc(7,"td"),b.dd(8),b.gc(),b.hc(9,"td"),b.dd(10),b.gc(),b.hc(11,"td"),b.dd(12),b.gc(),b.hc(13,"td"),b.dd(14),b.gc(),b.hc(15,"td"),b.dd(16),b.gc(),b.hc(17,"td"),b.dd(18),b.gc(),b.hc(19,"td"),b.dd(20),b.gc(),b.hc(21,"td"),b.bd(22,ot,2,1,"ng-container",45),b.bd(23,rt,2,2,"ng-container",45),b.gc(),b.hc(24,"td"),b.bd(25,lt,2,1,"ng-container",45),b.bd(26,st,2,2,"ng-container",45),b.gc(),b.hc(27,"td"),b.bd(28,dt,2,1,"ng-container",45),b.bd(29,ht,2,2,"ng-container",45),b.gc(),b.hc(30,"td"),b.bd(31,gt,2,1,"ng-container",45),b.bd(32,ut,2,2,"ng-container",45),b.gc(),b.hc(33,"td"),b.bd(34,mt,2,1,"ng-container",45),b.bd(35,_t,5,10,"ng-container",45),b.gc(),b.hc(36,"td",60),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc(2);return n.flag?a._updateStatusOnly(n,n.status):null}),b.bd(37,pt,3,3,"span",61),b.bd(38,ft,3,3,"span",62),b.bd(39,bt,3,3,"span",63),b.bd(40,vt,3,3,"span",64),b.bd(41,yt,3,3,"span",65),b.gc(),b.hc(42,"td",66),b.hc(43,"input",67),b.rc("ngModelChange",function(e){return t.$implicit.hide=e}),b.gc(),b.gc(),b.hc(44,"td"),b.dd(45),b.wc(46,"date"),b.gc(),b.hc(47,"td",68),b.dd(48),b.wc(49,"date"),b.gc(),b.gc(),b.ec()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(2),b.Dc("ngClass",4==e.status?"":e.remaining_days<=1?"jbadge-danger text-white":e.remaining_days>1&&e.remaining_days<=3?"jbadge-warning text-white":""),b.Nb(1),b.fd(" ",n+1+a.pageSize*(a.pageIndex-1)," "),b.Nb(2),b.Dc("ngIf",1==e.status),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.ed(e.inner_code),b.Nb(2),b.ed(e.code),b.Nb(2),b.fd(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ","en"==a.user.lang?e.para_name_e:e.para_name_l," "),b.Nb(2),b.fd(" ","en"==a.user.lang?e.nature_name_e:e.nature_name_l," "),b.Nb(2),b.ed(e.tat),b.Nb(2),b.ed(e.note_lab),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",0==e.status),b.Nb(1),b.Dc("ngIf",1==e.status),b.Nb(1),b.Dc("ngIf",2==e.status),b.Nb(1),b.Dc("ngIf",3==e.status),b.Nb(1),b.Dc("ngIf",4==e.status),b.Nb(2),b.Fc("name","hid",n+1,""),b.Dc("ngModel",e.hide)("disabled",!e.flag),b.Nb(2),b.fd(" ",b.yc(46,32,e.received_date,"dd/MM/yyyy HH:mm")," "),b.Nb(2),b.Dc("ngClass",4==e.status?"":e.remaining_days<=1?"jbadge-danger text-white":e.remaining_days>1&&e.remaining_days<=3?"jbadge-warning text-white":""),b.Nb(1),b.fd(" ",b.yc(49,35,e.returned_date,"dd/MM/yyyy HH:mm")," ")}}function St(e,t){if(1&e&&(b.fc(0),b.bd(1,xt,50,38,"ng-container",56),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._preparationlist)}}function Nt(e,t){if(1&e){const e=b.ic();b.hc(0,"input",94,95),b.rc("change",function(t){return b.Uc(e),b.vc(2).onFileChange(t)}),b.gc()}}function wt(e,t){1&e&&(b.hc(0,"h4",55),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd("",b.xc(2,1,"Processing"),"..."))}function Dt(e,t){if(1&e){const e=b.ic();b.hc(0,"form",84),b.hc(1,"div",85),b.hc(2,"h4",86),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",87),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",88),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",89),b.hc(9,"div",90),b.hc(10,"div",91),b.hc(11,"div",58),b.bd(12,Nt,2,0,"input",92),b.bd(13,wt,3,3,"h4",93),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.fd(" ",b.xc(4,3,"Import")," "),b.Nb(9),b.Dc("ngIf",!e._isLoadingImport),b.Nb(1),b.Dc("ngIf",e._isLoadingImport)}}const Mt=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let Ct=(()=>{class e{constructor(e,t,n,a,c,i,o,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=c,this._excelService=i,this._numberFormat=o,this.modalService=r,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=1,this.entity={},this._depts="",this._isLoadingImport=!1,!1!==e.checkAccess("REQ-RES")&&!1!==e.hasPermission("REQ-RES","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL()}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,e.dept_ids=this.user.department,console.log("log",e),this._dataService.post("/lab/getlistresultlabsbydepts",e).subscribe(e=>{console.log("Origin",e);let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,nature_name_e:n.nature_name_e,nature_name_l:n.nature_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,tat:n.tat,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l,pl_name_e:n.pl_name_e,pl_name_l:n.pl_name_l,hide:n.hide,remaining_days:n.remaining_days,result_record_e:n.result_record_e});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_exportAllForImport(){let e={};e.domain=this.user.short_code,e.flag_status=this._status,e.dept_ids=this.user.department,this._dataService.post("/lab/exportresultlabsbydepts",e).subscribe(e=>{console.log("Origin",e);let t=[];for(let n of e.data)t.push({inner_code:n.inner_code,code:n.code,note_asm:null==n.note_asm?"":n.note_asm,unit:null==n.unit?"":n.unit,lod:null==n.lod?"":n.lod,loq:null==n.loq?"":n.loq,result_record:null==n.result_record?"":n.result_record,result_record_e:null==n.result_record_e?"":n.result_record_e,status:n.status,hide:null!=n.hide&&n.hide,sample_id:n.sample_id,parameter_id:n.parameter_id,category_id:n.category_id});this._excelService.exportAsExcelFile(t,"Result-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+t.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+t.length+" "+f.a.record,"OK")})}_pageSizeChange(e){this.pageSize=e.target.value,this.loadData()}pageChanged(e){this.pageIndex=e.page,this.loadData()}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyPL(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",e).subscribe(e=>{this._pllist=e.data})}_exportAll(e){let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?f.a.s_done_en:f.a.s_done),3==n.status&&(e="en"==this.user.lang?f.a.s_validate_en:f.a.s_validate),2==n.status&&(e="en"==this.user.lang?f.a.s_techvalidate_en:f.a.s_techvalidate),1==n.status&&(e="en"==this.user.lang?f.a.s_prepare_en:f.a.s_prepare),0==n.status&&(e="en"==this.user.lang?f.a.s_none_en:f.a.s_none);let a=new Date(n.received_date).getTime()+864e5*n.tat,c="en"==this.user.lang?n.pl_name_e:n.pl_name_l;t.push({"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,"Note Lab":null==n.note_lab?"":n.note_lab,"Note ASM":null==n.note_asm?"":n.note_asm,Unit:null==n.unit?"":n.unit,LOD:null==n.lod?"":n.lod,LOQ:null==n.loq?"":n.loq,Result:null==n.result_record?"":n.result_record,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(a)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l,PL:null==c?"":c,"Sample name":n.sample_name})}this._excelService.exportAsExcelFile(t,"Result-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.length+" "+f.a.record,"OK")}orgValueChange1(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=r(e).format("YYYY-MM-DD")}_switchFlagEdit(){for(let e of this._preparationlist)e.flag=!e.flag,e.flag||(e.status=1)}_updateStatusv2(e){this._dataService.post("/lab/updateResultv2",{getlist:e,ipaddress:this.user.ipaddress,user_id:this.user.id,short_code:this.user.short_code}).subscribe(e=>{this.loadData()})}_updateStatusOnly(e,t){t=1==t?2:1,console.log(t),this._preparationlist.filter(t=>t.sample_id==e.sample_id&&t.parameter_id==e.parameter_id&&t.category_id==e.category_id)[0].status=t}_updateStatus(e,t){2==t?(e.status=t,p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_switch_en:f.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData()}):this.loadData()})):(console.log("Update",e),this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData()}))}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.loadData(),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}_importFile(e){this.modalService.open(e,{size:"md",centered:!0})}onFileChange(e){let t=null,n=null;const a=new FileReader,c=e.target.files[0];if(void 0===c||void 0===c.name)e.target.value=null,this._notifyService.showError("en"==this.user.lang?f.a.recheck_file_en:f.a.recheck_file,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);else{let i=c.name.split(".").pop();"xls"===i||"xlsx"===i?(a.onload=c=>{t=$e.read(a.result,{type:"binary"}),n=t.SheetNames.reduce((e,n)=>(e[n]=$e.utils.sheet_to_json(t.Sheets[n]),e),{}),e.target.value=null,this.setUpload(n.data)},a.readAsBinaryString(c)):(this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title),e.target.value=null)}}setUpload(e){let t={};t.getlist=e,t.short_code=this.user.short_code,t.ipaddress=this.user.ipaddress,t.userid=this.user.id,this._isLoadingImport=!0,this._dataService.post("/lab/updateResultForImportv2",t).subscribe(e=>{console.log(e),"ok"==e.result&&(e.data_error.length>0&&this._excelService.exportAsExcelFile(e.data_error,"ErrorTestFamilyPL-"+r(new Date).format("YYYY-MM-DD")),e.count>0&&this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK")),this._isLoadingImport=!1,this.loadData(),this.modalService.dismissAll()},()=>this._isLoadingImport=!1)}}return e.\u0275fac=function(t){return new(t||e)(b.bc(v.a),b.bc(y.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(Ke.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-result"]],decls:143,vars:140,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],["contentImport",""],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-cloud-upload"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","18",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row",3,"ngClass"],[2,"text-align","center"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"text-truncate"],["type","checkbox",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],[3,"ngClass"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],["type","text",1,"form-control",2,"width","250px",3,"name","ngModel","placeholder","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],["name","fileUpload","type","file","id","upload","class","form-control",3,"change",4,"ngIf"],["class","text-danger",4,"ngIf"],["name","fileUpload","type","file","id","upload",1,"form-control",3,"change"],["fileUpload",""]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.hc(12,"select",10),b.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),b.hc(13,"option",11),b.dd(14),b.wc(15,"translate"),b.wc(16,"translate"),b.gc(),b.bd(17,je,2,2,"option",12),b.gc(),b.hc(18,"select",13),b.rc("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),b.hc(19,"option",11),b.dd(20),b.wc(21,"translate"),b.gc(),b.bd(22,Xe,2,2,"option",12),b.gc(),b.hc(23,"select",14),b.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),b.hc(24,"option",15),b.dd(25),b.wc(26,"translate"),b.gc(),b.hc(27,"option",16),b.dd(28),b.wc(29,"translate"),b.gc(),b.hc(30,"option",17),b.dd(31),b.wc(32,"translate"),b.gc(),b.hc(33,"option",18),b.dd(34),b.wc(35,"translate"),b.gc(),b.hc(36,"option",19),b.dd(37),b.wc(38,"translate"),b.gc(),b.hc(39,"option",20),b.dd(40),b.wc(41,"translate"),b.gc(),b.gc(),b.bd(42,We,4,3,"button",21),b.bd(43,Je,4,3,"button",22),b.bd(44,Ze,4,3,"button",23),b.bd(45,et,1,0,"img",24),b.gc(),b.gc(),b.hc(46,"div",25),b.hc(47,"div",26),b.hc(48,"select",27),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(49,"option",28),b.dd(50,"#10"),b.gc(),b.hc(51,"option",29),b.dd(52,"#25"),b.gc(),b.hc(53,"option",30),b.dd(54,"#50"),b.gc(),b.hc(55,"option",31),b.dd(56,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(57,"div",32),b.hc(58,"div",33),b.hc(59,"div",34),b.hc(60,"div",35),b.hc(61,"pagination",36),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(62,"div",37),b.hc(63,"a",38),b.dd(64),b.wc(65,"translate"),b.wc(66,"translate"),b.wc(67,"translate"),b.wc(68,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(69,"div",33),b.hc(70,"div",39),b.hc(71,"table",40),b.hc(72,"thead",41),b.hc(73,"tr"),b.hc(74,"th",42),b.dd(75,"#"),b.gc(),b.hc(76,"th",43),b.dd(77),b.wc(78,"translate"),b.gc(),b.hc(79,"th",44),b.dd(80),b.wc(81,"translate"),b.gc(),b.hc(82,"th",44),b.dd(83),b.wc(84,"translate"),b.gc(),b.hc(85,"th",44),b.dd(86),b.wc(87,"translate"),b.gc(),b.hc(88,"th",44),b.dd(89),b.wc(90,"translate"),b.gc(),b.hc(91,"th",44),b.dd(92),b.wc(93,"translate"),b.gc(),b.hc(94,"th",44),b.dd(95),b.wc(96,"translate"),b.gc(),b.hc(97,"th",44),b.dd(98),b.wc(99,"translate"),b.gc(),b.hc(100,"th",44),b.dd(101),b.wc(102,"translate"),b.gc(),b.hc(103,"th",44),b.dd(104),b.wc(105,"translate"),b.gc(),b.hc(106,"th",44),b.dd(107),b.wc(108,"translate"),b.gc(),b.hc(109,"th",44),b.dd(110),b.wc(111,"translate"),b.gc(),b.hc(112,"th",44),b.dd(113),b.wc(114,"translate"),b.gc(),b.hc(115,"th",44),b.dd(116),b.wc(117,"translate"),b.gc(),b.hc(118,"th",44),b.dd(119),b.wc(120,"translate"),b.gc(),b.hc(121,"th",44),b.dd(122),b.wc(123,"translate"),b.gc(),b.hc(124,"th",44),b.dd(125),b.wc(126,"translate"),b.gc(),b.gc(),b.gc(),b.hc(127,"tbody"),b.bd(128,tt,6,3,"ng-container",45),b.bd(129,St,2,1,"ng-container",45),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(130,"div",33),b.hc(131,"div",34),b.hc(132,"div",35),b.hc(133,"pagination",36),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(134,"div",37),b.hc(135,"a",38),b.dd(136),b.wc(137,"translate"),b.wc(138,"translate"),b.wc(139,"translate"),b.wc(140,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(141,Dt,14,5,"ng-template",null,46,b.cd)),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,68,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(138,Mt)),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(139,Mt)),b.Nb(1),b.Dc("ngModel",t.department_id),b.Nb(2),b.gd(" ",b.xc(15,70,"All")," ",b.xc(16,72,"Department")," "),b.Nb(3),b.Dc("ngForOf",t._deptlist),b.Nb(1),b.Dc("ngModel",t.testcsp_id),b.Nb(2),b.fd("",b.xc(21,74,"All")," PL"),b.Nb(2),b.Dc("ngForOf",t._pllist),b.Nb(1),b.Dc("ngModel",t._status),b.Nb(2),b.fd(" ",b.xc(26,76,"All")," "),b.Nb(3),b.fd(" ",b.xc(29,78,"None")," "),b.Nb(3),b.fd(" ",b.xc(32,80,"Preparation")," "),b.Nb(3),b.fd(" ",b.xc(35,82,"Technical validation")," "),b.Nb(3),b.fd(" ",b.xc(38,84,"Validation")," "),b.Nb(3),b.fd(" ",b.xc(41,86,"Done")," "),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-RES","report")),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-RES","update")),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-RES","update")),b.Nb(1),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(65,88,"Total of records"),": ",t.totalRow," - ",b.xc(66,90,"Page")," ",t.pageIndex," ",b.xc(67,92,"of")," ",t.totalPage," ",b.xc(68,94,"page"),""),b.Nb(13),b.ed(b.xc(78,96,"Actions")),b.Nb(3),b.fd(" ",b.xc(81,98,"Inner code")," "),b.Nb(3),b.fd(" ",b.xc(84,100,"Code")," "),b.Nb(3),b.ed(b.xc(87,102,"Internal testing")),b.Nb(3),b.ed(b.xc(90,104,"Parameter name")),b.Nb(3),b.ed(b.xc(93,106,"Sample nature")),b.Nb(3),b.ed(b.xc(96,108,"Priority")),b.Nb(3),b.ed(b.xc(99,110,"Note lab")),b.Nb(3),b.ed(b.xc(102,112,"Note asm")),b.Nb(3),b.ed(b.xc(105,114,"Unit")),b.Nb(3),b.ed(b.xc(108,116,"LOD")),b.Nb(3),b.ed(b.xc(111,118,"LOQ")),b.Nb(3),b.ed(b.xc(114,120,"Results")),b.Nb(3),b.ed(b.xc(117,122,"Status")),b.Nb(3),b.ed(b.xc(120,124,"Hidden")),b.Nb(3),b.ed(b.xc(123,126,"Received date")),b.Nb(3),b.ed(b.xc(126,128,"Returned date")),b.Nb(3),b.Dc("ngIf",0==t._preparationlist.length),b.Nb(1),b.Dc("ngIf",t._preparationlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(137,130,"Total of records"),": ",t.totalRow," - ",b.xc(138,132,"Page")," ",t.pageIndex," ",b.xc(139,134,"of")," ",t.totalPage," ",b.xc(140,136,"page"),""))},directives:[c.c,c.n,c.q,D.b,D.a,c.x,c.r,c.A,a.p,a.q,M.a,a.o,c.b,c.z,c.o,c.p],pipes:[T.c,a.f],styles:[""]}),e})();function Tt(e,t){if(1&e&&(b.hc(0,"option",42),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function It(e,t){if(1&e){const e=b.ic();b.hc(0,"button",43),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t._preparationlist)}),b.cc(1,"i",44),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function kt(e,t){1&e&&b.cc(0,"img",45)}function Pt(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",46),b.hc(3,"h3",47),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function Rt(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.note_asm,"")}}function Et(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",61),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.note_asm=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","note_asm",t+1,""),b.Dc("ngModel",n.note_asm)}}function At(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.lod,"")}}function Ut(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",61),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.lod=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","lod",t+1,""),b.Dc("ngModel",n.lod)}}function Ft(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.loq,"")}}function Ot(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",61),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.loq=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","loq",t+1,""),b.Dc("ngModel",n.loq)}}function Yt(e,t){if(1&e&&(b.fc(0),b.cc(1,"span",62),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.Dc("innerHTML",e.result_record,b.Vc)}}function Lt(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",61),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.result_record=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","result_record",t+1,""),b.Dc("ngModel",n.result_record)}}function qt(e,t){1&e&&(b.hc(0,"span",63),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"None")))}function zt(e,t){1&e&&(b.hc(0,"span",64),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Preparation")))}function Gt(e,t){1&e&&(b.hc(0,"span",65),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Technical validation")))}function Vt(e,t){1&e&&(b.hc(0,"span",66),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Validation")))}function Bt(e,t){1&e&&(b.hc(0,"span",67),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Done")))}function Ht(e,t){if(1&e){const e=b.ic();b.hc(0,"a",68),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._updateStatus(t,1)}),b.cc(1,"i",69),b.gc()}}function Qt(e,t){if(1&e){const e=b.ic();b.hc(0,"a",70),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._updateStatus(t,4)}),b.cc(1,"i",71),b.gc()}}function $t(e,t){if(1&e){const e=b.ic();b.hc(0,"a",72),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._updateStatus(t,2)}),b.cc(1,"i",73),b.gc()}}function Kt(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",49),b.dd(2),b.gc(),b.hc(3,"td"),b.hc(4,"a",50),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(2)._updateStatusAll(n,3==n.status?4:3)}),b.dd(5),b.gc(),b.gc(),b.hc(6,"td"),b.dd(7),b.gc(),b.hc(8,"td"),b.dd(9),b.gc(),b.hc(10,"td"),b.dd(11),b.gc(),b.hc(12,"td"),b.dd(13),b.gc(),b.hc(14,"td"),b.dd(15),b.gc(),b.hc(16,"td"),b.dd(17),b.gc(),b.hc(18,"td"),b.bd(19,Rt,2,1,"ng-container",41),b.bd(20,Et,2,2,"ng-container",41),b.gc(),b.hc(21,"td"),b.dd(22),b.gc(),b.hc(23,"td"),b.bd(24,At,2,1,"ng-container",41),b.bd(25,Ut,2,2,"ng-container",41),b.gc(),b.hc(26,"td"),b.bd(27,Ft,2,1,"ng-container",41),b.bd(28,Ot,2,2,"ng-container",41),b.gc(),b.hc(29,"td"),b.bd(30,Yt,2,1,"ng-container",41),b.bd(31,Lt,2,2,"ng-container",41),b.gc(),b.hc(32,"td"),b.hc(33,"a",51),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc(2);return 2==n.status?a._updateStatus(n,3):null}),b.bd(34,qt,3,3,"span",52),b.bd(35,zt,3,3,"span",53),b.bd(36,Gt,3,3,"span",54),b.bd(37,Vt,3,3,"span",55),b.bd(38,Bt,3,3,"span",56),b.gc(),b.bd(39,Ht,2,0,"a",57),b.gc(),b.hc(40,"td",58),b.bd(41,Qt,2,0,"a",59),b.bd(42,$t,2,0,"a",60),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(2),b.fd(" ",n+1+a.pageSize*(a.pageIndex-1)," "),b.Nb(3),b.ed(e.inner_code),b.Nb(2),b.ed(e.code),b.Nb(2),b.fd(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ","en"==a.user.lang?e.para_name_e:e.para_name_l," "),b.Nb(2),b.ed(e.tat),b.Nb(2),b.ed(e.note),b.Nb(2),b.ed(e.note_lab),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.ed(e.unit),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(3),b.Dc("ngIf",0==e.status),b.Nb(1),b.Dc("ngIf",1==e.status),b.Nb(1),b.Dc("ngIf",2==e.status),b.Nb(1),b.Dc("ngIf",3==e.status),b.Nb(1),b.Dc("ngIf",4==e.status),b.Nb(1),b.Dc("ngIf",2==e.status),b.Nb(2),b.Dc("ngIf",3==e.status),b.Nb(1),b.Dc("ngIf",3==e.status)}}function jt(e,t){if(1&e&&(b.fc(0),b.bd(1,Kt,43,25,"tr",48),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._preparationlist)}}const Xt=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let Wt=(()=>{class e{constructor(e,t,n,a,c,i,o){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=c,this._excelService=i,this.modalService=o,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=2,this.entity={},!1!==e.checkAccess("RES-VALID")&&!1!==e.hasPermission("RES-VALID","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL(),this.socket.on("refreshPage",e=>{this.loadData()})}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,e.dept_ids=this.user.department,this._dataService.post("/lab/getlistresultlabs",e).subscribe(e=>{console.log(e);let t=[];for(let n of e.data)t.push({code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,tat:n.tat,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyPL(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",e).subscribe(e=>{this._pllist=e.data})}_exportAll(e){let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?f.a.s_done_en:f.a.s_done),3==n.status&&(e="en"==this.user.lang?f.a.s_validate_en:f.a.s_validate),2==n.status&&(e="en"==this.user.lang?f.a.s_techvalidate_en:f.a.s_techvalidate),1==n.status&&(e="en"==this.user.lang?f.a.s_prepare_en:f.a.s_prepare),0==n.status&&(e="en"==this.user.lang?f.a.s_none_en:f.a.s_none);let a=new Date(n.received_date).getTime()+864e5*n.tat;t.push({"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,Note:null==n.note?"":n.note,"Note Lab":null==n.note_lab?"":n.note_lab,"Note ASM":null==n.note_asm?"":n.note_asm,Unit:null==n.unit?"":n.unit,LOD:null==n.lod?"":n.lod,LOQ:null==n.loq?"":n.loq,Result:null==n.result_record?"":n.result_record,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(a)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l})}this._excelService.exportAsExcelFile(t,"LabValidation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.length+" "+f.a.record,"OK")}orgValueChange1(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e,t){3==t||4==t?(e.status=t,p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_switch_en:f.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.socket.emit("refresh",{})}):this.socket.emit("refresh",{})})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.socket.emit("refresh",{})}))}_updateStatusAll(e,t){let n=this._preparationlist.filter(t=>t.sample_id==e.sample_id);for(let a of n)a.status=t;p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_switch_en:f.a.are_u_sure_switch,text:"en"==this.user.lang?"Total: "+n.length:"T\u1ed5ng s\u1ed1: "+n.length,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(e=>{e.value?this._dataService.post("/lab/updateValidationv2BySampleId",{getlist:n,user_id:this.user.id,ipaddress:this.user.ipaddress,short_code:this.user.short_code}).subscribe(e=>{this.socket.emit("refresh",{})}):this.socket.emit("refresh",{})})}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(v.a),b.bc(y.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-validation"]],decls:125,vars:124,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","15",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",3,"click"],["href","javascript:;",2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["href","javascript:;","style","cursor: pointer; color: red",3,"click",4,"ngIf"],[2,"text-align","center"],["href","javascript:;","style","cursor: pointer; color: blue; font-size: 18px;",3,"click",4,"ngIf"],["href","javascript:;","style","cursor: pointer; color: tomato; font-size: 18px;",3,"click",4,"ngIf"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],["href","javascript:;",2,"cursor","pointer","color","red",3,"click"],[1,"fa","fa-close"],["href","javascript:;",2,"cursor","pointer","color","blue","font-size","18px",3,"click"],[1,"fa","fa-check-square-o","mr-ms-2"],["href","javascript:;",2,"cursor","pointer","color","tomato","font-size","18px",3,"click"],[1,"fa","fa-times-circle-o"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.hc(12,"select",10),b.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),b.hc(13,"option",11),b.dd(14),b.wc(15,"translate"),b.wc(16,"translate"),b.gc(),b.bd(17,Tt,2,2,"option",12),b.gc(),b.hc(18,"select",13),b.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),b.hc(19,"option",14),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"option",15),b.dd(23),b.wc(24,"translate"),b.gc(),b.hc(25,"option",16),b.dd(26),b.wc(27,"translate"),b.gc(),b.hc(28,"option",17),b.dd(29),b.wc(30,"translate"),b.gc(),b.hc(31,"option",18),b.dd(32),b.wc(33,"translate"),b.gc(),b.hc(34,"option",19),b.dd(35),b.wc(36,"translate"),b.gc(),b.gc(),b.bd(37,It,4,3,"button",20),b.bd(38,kt,1,0,"img",21),b.gc(),b.gc(),b.hc(39,"div",22),b.hc(40,"div",23),b.hc(41,"select",24),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(42,"option",25),b.dd(43,"#10"),b.gc(),b.hc(44,"option",26),b.dd(45,"#25"),b.gc(),b.hc(46,"option",27),b.dd(47,"#50"),b.gc(),b.hc(48,"option",28),b.dd(49,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(50,"div",29),b.hc(51,"div",30),b.hc(52,"div",31),b.hc(53,"div",32),b.hc(54,"pagination",33),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(55,"div",34),b.hc(56,"a",35),b.dd(57),b.wc(58,"translate"),b.wc(59,"translate"),b.wc(60,"translate"),b.wc(61,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(62,"div",30),b.hc(63,"div",36),b.hc(64,"table",37),b.hc(65,"thead",38),b.hc(66,"tr"),b.hc(67,"th",39),b.dd(68,"#"),b.gc(),b.hc(69,"th",40),b.dd(70),b.wc(71,"translate"),b.gc(),b.hc(72,"th",40),b.dd(73),b.wc(74,"translate"),b.gc(),b.hc(75,"th",40),b.dd(76),b.wc(77,"translate"),b.gc(),b.hc(78,"th",40),b.dd(79),b.wc(80,"translate"),b.gc(),b.hc(81,"th",40),b.dd(82),b.wc(83,"translate"),b.gc(),b.hc(84,"th",40),b.dd(85),b.wc(86,"translate"),b.gc(),b.hc(87,"th",40),b.dd(88),b.wc(89,"translate"),b.gc(),b.hc(90,"th",40),b.dd(91),b.wc(92,"translate"),b.gc(),b.hc(93,"th",40),b.dd(94),b.wc(95,"translate"),b.gc(),b.hc(96,"th",40),b.dd(97),b.wc(98,"translate"),b.gc(),b.hc(99,"th",40),b.dd(100),b.wc(101,"translate"),b.gc(),b.hc(102,"th",40),b.dd(103),b.wc(104,"translate"),b.gc(),b.hc(105,"th",40),b.dd(106),b.wc(107,"translate"),b.gc(),b.hc(108,"th",40),b.dd(109),b.wc(110,"translate"),b.gc(),b.gc(),b.gc(),b.hc(111,"tbody"),b.bd(112,Pt,6,3,"ng-container",41),b.bd(113,jt,2,1,"ng-container",41),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(114,"div",30),b.hc(115,"div",31),b.hc(116,"div",32),b.hc(117,"pagination",33),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(118,"div",34),b.hc(119,"a",35),b.dd(120),b.wc(121,"translate"),b.wc(122,"translate"),b.wc(123,"translate"),b.wc(124,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,60,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(122,Xt)),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(123,Xt)),b.Nb(1),b.Dc("ngModel",t.department_id),b.Nb(2),b.gd(" ",b.xc(15,62,"All")," ",b.xc(16,64,"Department")," "),b.Nb(3),b.Dc("ngForOf",t._deptlist),b.Nb(1),b.Dc("ngModel",t._status),b.Nb(2),b.fd(" ",b.xc(21,66,"All")," "),b.Nb(3),b.fd(" ",b.xc(24,68,"None")," "),b.Nb(3),b.fd(" ",b.xc(27,70,"Preparation")," "),b.Nb(3),b.fd(" ",b.xc(30,72,"Technical validation")," "),b.Nb(3),b.fd(" ",b.xc(33,74,"Validation")," "),b.Nb(3),b.fd(" ",b.xc(36,76,"Done")," "),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-VALID","report")),b.Nb(1),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(58,78,"Total of records"),": ",t.totalRow," - ",b.xc(59,80,"Page")," ",t.pageIndex," ",b.xc(60,82,"of")," ",t.totalPage," ",b.xc(61,84,"page"),""),b.Nb(13),b.fd(" ",b.xc(71,86,"Inner code")," "),b.Nb(3),b.fd(" ",b.xc(74,88,"Code")," "),b.Nb(3),b.ed(b.xc(77,90,"Internal testing")),b.Nb(3),b.ed(b.xc(80,92,"Parameter name")),b.Nb(3),b.ed(b.xc(83,94,"Priority")),b.Nb(3),b.ed(b.xc(86,96,"Note")),b.Nb(3),b.ed(b.xc(89,98,"Note lab")),b.Nb(3),b.ed(b.xc(92,100,"Note asm")),b.Nb(3),b.ed(b.xc(95,102,"Unit")),b.Nb(3),b.ed(b.xc(98,104,"LOD")),b.Nb(3),b.ed(b.xc(101,106,"LOQ")),b.Nb(3),b.ed(b.xc(104,108,"Results")),b.Nb(3),b.ed(b.xc(107,110,"Status")),b.Nb(3),b.ed(b.xc(110,112,"Actions")),b.Nb(3),b.Dc("ngIf",0==t._preparationlist.length),b.Nb(1),b.Dc("ngIf",t._preparationlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(121,114,"Total of records"),": ",t.totalRow," - ",b.xc(122,116,"Page")," ",t.pageIndex," ",b.xc(123,118,"of")," ",t.totalPage," ",b.xc(124,120,"page"),""))},directives:[c.c,c.n,c.q,D.b,D.a,c.x,c.r,c.A,a.p,a.q,M.a],pipes:[T.c],styles:[""]}),e})();var Jt=n("qeeY"),Zt=n("tmjD");function en(e,t){if(1&e){const e=b.ic();b.hc(0,"div",21),b.hc(1,"button",22),b.dd(2),b.wc(3,"translate"),b.gc(),b.hc(4,"div",23),b.hc(5,"button",24),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(78);return t.popUpLanguage(n,1)}),b.dd(6),b.wc(7,"translate"),b.gc(),b.hc(8,"button",24),b.rc("click",function(){return b.Uc(e),b.vc().exportQuotationExcel()}),b.dd(9),b.wc(10,"translate"),b.gc(),b.hc(11,"button",24),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(78);return t.popUpLanguage(n,2)}),b.dd(12),b.wc(13,"translate"),b.gc(),b.hc(14,"button",24),b.rc("click",function(){return b.Uc(e),b.vc().exportBOExcel()}),b.dd(15),b.wc(16,"translate"),b.gc(),b.gc(),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,5,"Print")," "),b.Nb(4),b.fd(" ",b.xc(7,7,"Quotation")," "),b.Nb(3),b.fd(" ",b.xc(10,9,"Quotation")," - Excel "),b.Nb(3),b.fd(" ",b.xc(13,11,"Receipt")," "),b.Nb(3),b.fd(" ",b.xc(16,13,"Receipt")," - Excel "))}function tn(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"button",25),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc()._chooseTab(n,n.order_no)}),b.dd(2),b.wc(3,"translate"),b.gc(),b.ec()}if(2&e){const e=t.$implicit,n=b.vc();b.Nb(1),b.Dc("ngClass",n._currentTabActivated==e.order_no?"btn btn-sm btn-warning":"btn btn-sm btn-secondary"),b.Nb(1),b.gd(" ",b.xc(3,3,"Sample")," ",e.order_no," ")}}function nn(e,t){if(1&e){const e=b.ic();b.hc(0,"a",27),b.rc("click",function(){b.Uc(e);const t=b.vc(2);return null==t.entity0.inner_code?t._removeTab(t.entity0.sample_id):null}),b.dd(1,"X"),b.gc()}}function an(e,t){if(1&e&&(b.fc(0),b.bd(1,nn,2,0,"a",26),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngIf",0!=e._currentTabActivated&&null==e.entity0.inner_code)}}function cn(e,t){if(1&e&&(b.hc(0,"div",60),b.dd(1),b.wc(2,"slice"),b.gc()),2&e){const e=t.item;b.Dc("ngbTooltip",e.name.length>25?e.name:""),b.Nb(1),b.fd(" ",e.name.length>25?b.zc(2,2,e.name,0,20)+"..":e.name," ")}}function on(e,t){if(1&e&&(b.hc(0,"div",60),b.dd(1),b.wc(2,"slice"),b.gc()),2&e){const e=t.item;b.Dc("ngbTooltip",e.name.length>25?e.name:""),b.Nb(1),b.fd(" ",e.name.length>25?b.zc(2,2,e.name,0,20)+"..":e.name," ")}}function rn(e,t){if(1&e&&(b.hc(0,"div",60),b.dd(1),b.wc(2,"slice"),b.gc()),2&e){const e=t.item;b.Dc("ngbTooltip",e.name.length>25?e.name:""),b.Nb(1),b.fd(" ",e.name.length>25?b.zc(2,2,e.name,0,20)+"..":e.name," ")}}function ln(e,t){if(1&e&&(b.hc(0,"div",60),b.dd(1),b.wc(2,"slice"),b.gc()),2&e){const e=t.item;b.Dc("ngbTooltip",e.name.length>25?e.name:""),b.Nb(1),b.fd(" ",e.name.length>25?b.zc(2,2,e.name,0,20)+"..":e.name," ")}}function sn(e,t){if(1&e){const e=b.ic();b.hc(0,"a",61),b.rc("click",function(){b.Uc(e);const t=b.vc(2);return t._saveTemplate(t.entity0)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Save")))}function dn(e,t){if(1&e){const e=b.ic();b.hc(0,"a",69),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._removeItem(t)}),b.cc(1,"i",58),b.gc()}}function hn(e,t){1&e&&b.cc(0,"i",73)}function gn(e,t){1&e&&b.cc(0,"i",74)}function un(e,t){if(1&e){const e=b.ic();b.hc(0,"button",70),b.rc("click",function(){return b.Uc(e),b.vc(3)._switchFlagEdit()}),b.wc(1,"translate"),b.bd(2,hn,1,0,"i",71),b.bd(3,gn,1,0,"i",72),b.gc()}if(2&e){const e=b.vc().$implicit;b.Dc("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("ngbTooltip",b.xc(1,4,e.flag?"Cancel":"Edit")),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag)}}function mn(e,t){if(1&e){const e=b.ic();b.hc(0,"a",75),b.rc("click",function(){b.Uc(e);const t=b.vc(3);return t._updatePricev2(t._orderdetailists)}),b.cc(1,"i",76),b.gc()}}function _n(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.fd(" ",null==e.quantity||""==e.quantity?1:e.quantity,"")}}function pn(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.ed(e.quantity)}}function fn(e,t){if(1&e&&(b.fc(0),b.bd(1,_n,2,1,"ng-container",17),b.bd(2,pn,2,1,"ng-container",17),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngIf",0==e.entity0.is_active),b.Nb(1),b.Dc("ngIf",0!=e.entity0.is_active)}}function bn(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",77),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.quantity=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit,a=b.vc(2);b.Nb(1),b.Fc("name","qty",t+1,""),b.Dc("ngModel",n.quantity)("ngClass",null!=n.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=n.code_father)}}function vn(e,t){if(1&e&&(b.fc(0),b.dd(1),b.wc(2,"number"),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.fd(" ",b.xc(2,1,e.price),"")}}function yn(e,t){if(1&e&&(b.fc(0),b.dd(1),b.wc(2,"number"),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.ed(b.xc(2,1,e.price))}}function xn(e,t){if(1&e&&(b.fc(0),b.bd(1,vn,3,3,"ng-container",17),b.bd(2,yn,3,3,"ng-container",17),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngIf",0==e.entity0.is_active),b.Nb(1),b.Dc("ngIf",0!=e.entity0.is_active)}}function Sn(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",78),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.price=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit,a=b.vc(2);b.Nb(1),b.Fc("name","p",t+1,""),b.Dc("ngModel",n.price)("ngClass",null!=n.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=n.code_father)}}function Nn(e,t){if(1&e&&(b.fc(0),b.dd(1),b.wc(2,"number"),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.fd(" ",b.yc(2,1,e.discount,"1.1"),"")}}function wn(e,t){if(1&e&&(b.fc(0),b.dd(1),b.wc(2,"number"),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.ed(b.yc(2,1,e.discount,"1.1"))}}function Dn(e,t){if(1&e&&(b.fc(0),b.bd(1,Nn,3,4,"ng-container",17),b.bd(2,wn,3,4,"ng-container",17),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngIf",0==e.entity0.is_active),b.Nb(1),b.Dc("ngIf",0!=e.entity0.is_active)}}function Mn(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",78),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.discount=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit,a=b.vc(2);b.Nb(1),b.Fc("name","gg",t+1,""),b.Dc("ngModel",n.discount)("ngClass",null!=n.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=n.code_father)}}function Cn(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.fd(" ",null==e.priority||""==e.priority?0:e.priority,"")}}function Tn(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.ed(e.priority)}}function In(e,t){if(1&e&&(b.fc(0),b.bd(1,Cn,2,1,"ng-container",17),b.bd(2,Tn,2,1,"ng-container",17),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngIf",0==e.entity0.is_active),b.Nb(1),b.Dc("ngIf",0!=e.entity0.is_active)}}function kn(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",79),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.priority=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit,a=b.vc(2);b.Nb(1),b.Fc("name","pri",t+1,""),b.Dc("ngModel",n.priority)("ngClass",null!=n.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=n.code_father)}}function Pn(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.fd(" ",e.tat," ")}}function Rn(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc(2).$implicit;b.Nb(1),b.fd(" ",e.tat," ")}}function En(e,t){if(1&e&&(b.fc(0),b.bd(1,Pn,2,1,"ng-container",17),b.bd(2,Rn,2,1,"ng-container",17),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngIf",0==e.entity0.is_active),b.Nb(1),b.Dc("ngIf",0!=e.entity0.is_active)}}function An(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",79),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.tat=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit,a=b.vc(2);b.Nb(1),b.Fc("name","ta",t+1,""),b.Dc("ngModel",n.tat)("ngClass",null!=n.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=n.code_father)}}function Un(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"td"),b.dd(2),b.gc(),b.hc(3,"td"),b.bd(4,dn,2,0,"a",62),b.bd(5,un,4,6,"button",63),b.bd(6,mn,2,0,"a",64),b.gc(),b.hc(7,"td"),b.hc(8,"span",65),b.dd(9),b.gc(),b.gc(),b.hc(10,"td"),b.dd(11),b.gc(),b.hc(12,"td",66),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc(2),c=b.Rc(80);return a._addComment(c,n)}),b.dd(13),b.gc(),b.hc(14,"td"),b.dd(15),b.gc(),b.hc(16,"td"),b.dd(17),b.gc(),b.hc(18,"td"),b.dd(19),b.gc(),b.hc(20,"td"),b.bd(21,fn,3,2,"ng-container",17),b.bd(22,bn,2,4,"ng-container",17),b.gc(),b.hc(23,"td"),b.bd(24,xn,3,2,"ng-container",17),b.bd(25,Sn,2,4,"ng-container",17),b.gc(),b.hc(26,"td"),b.bd(27,Dn,3,2,"ng-container",17),b.bd(28,Mn,2,4,"ng-container",17),b.gc(),b.hc(29,"td"),b.dd(30),b.wc(31,"number"),b.gc(),b.hc(32,"td"),b.bd(33,In,3,2,"ng-container",17),b.bd(34,kn,2,4,"ng-container",17),b.gc(),b.hc(35,"td"),b.bd(36,En,3,2,"ng-container",17),b.bd(37,An,2,4,"ng-container",17),b.gc(),b.hc(38,"td"),b.hc(39,"input",67),b.rc("ngModelChange",function(e){return t.$implicit.order_no=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._assignOrderDetail(t._orderdetailists)}),b.gc(),b.gc(),b.hc(40,"td"),b.hc(41,"input",68),b.rc("ngModelChange",function(e){return t.$implicit.hide=e}),b.gc(),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(2),b.ed(n+1),b.Nb(2),b.Dc("ngIf",0==a.entity0.is_active&&!e.flag&&a._authenService.hasPermission("REQ-LIST","delete")),b.Nb(1),b.Dc("ngIf",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","update")),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngClass",null==e.code_father?"text-bold jtext-default":"text-warning"),b.Nb(1),b.ed(e.code),b.Nb(2),b.fd(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ",e.comment_ext," "),b.Nb(2),b.ed(e.method),b.Nb(2),b.ed(e.lod),b.Nb(2),b.fd(" ",e.unit," "),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.fd(" ",b.xc(31,29,e.amount)," "),b.Nb(3),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Fc("name","odd",n+1,""),b.Dc("ngModel",e.order_no)("ngClass",null!=e.code_father?"form-control jdisabled":"form-control")("disabled",0!=a.entity0.is_active||null!=e.code_father),b.Nb(2),b.Fc("name","ckb",n+1,""),b.Dc("ngModel",e.hide)("disabled",!e.flag)}}function Fn(e,t){if(1&e){const e=b.ic();b.hc(0,"form",28),b.hc(1,"div",9),b.hc(2,"div",1),b.hc(3,"div",29),b.hc(4,"div",30),b.hc(5,"label",31),b.hc(6,"strong"),b.dd(7),b.wc(8,"translate"),b.gc(),b.gc(),b.hc(9,"div",32),b.hc(10,"input",33),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_name=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(11,"translate"),b.gc(),b.hc(12,"input",33),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_name_e=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(13,"translate"),b.wc(14,"translate"),b.gc(),b.hc(15,"input",34),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_id=t}),b.gc(),b.gc(),b.hc(16,"label",31),b.hc(17,"strong"),b.dd(18),b.wc(19,"translate"),b.gc(),b.gc(),b.hc(20,"div",32),b.hc(21,"input",35),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_code=t}),b.wc(22,"translate"),b.gc(),b.gc(),b.hc(23,"label",31),b.hc(24,"strong"),b.dd(25),b.wc(26,"translate"),b.wc(27,"translate"),b.gc(),b.gc(),b.hc(28,"div",32),b.hc(29,"input",33),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.description=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(30,"translate"),b.gc(),b.hc(31,"input",33),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.description_e=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(32,"translate"),b.wc(33,"translate"),b.gc(),b.gc(),b.hc(34,"label",31),b.hc(35,"strong"),b.dd(36),b.wc(37,"translate"),b.gc(),b.gc(),b.hc(38,"div",32),b.hc(39,"input",35),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.inner_code=t}),b.wc(40,"translate"),b.gc(),b.gc(),b.hc(41,"label",31),b.hc(42,"strong"),b.dd(43),b.wc(44,"translate"),b.gc(),b.gc(),b.hc(45,"div",32),b.hc(46,"textarea",36),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.note=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(47,"translate"),b.gc(),b.gc(),b.hc(48,"label",31),b.hc(49,"strong"),b.dd(50),b.wc(51,"translate"),b.gc(),b.gc(),b.hc(52,"div",32),b.hc(53,"input",33),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.weight=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)})("keypress.enter",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(54,"translate"),b.gc(),b.gc(),b.hc(55,"label",31),b.hc(56,"strong"),b.dd(57),b.wc(58,"translate"),b.gc(),b.gc(),b.hc(59,"div",32),b.hc(60,"select",37),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.is_active=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.hc(61,"option",38),b.dd(62),b.wc(63,"translate"),b.gc(),b.hc(64,"option",39),b.dd(65),b.wc(66,"translate"),b.gc(),b.hc(67,"option",40),b.dd(68),b.wc(69,"translate"),b.gc(),b.gc(),b.gc(),b.hc(70,"label",41),b.hc(71,"strong"),b.dd(72),b.wc(73,"translate"),b.gc(),b.gc(),b.hc(74,"div",32),b.hc(75,"ng-select",42),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity0.sample_nature_id=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSampleOrder(t.entity0)}),b.wc(76,"translate"),b.wc(77,"translate"),b.bd(78,cn,3,6,"ng-template",43),b.gc(),b.gc(),b.hc(79,"label",31),b.hc(80,"strong"),b.dd(81),b.wc(82,"translate"),b.gc(),b.gc(),b.hc(83,"div",32),b.hc(84,"ng-select",44),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().selectedCategory0=t})("change",function(){return b.Uc(e),b.vc().changeCategoryMatrix()}),b.wc(85,"translate"),b.wc(86,"translate"),b.bd(87,on,3,6,"ng-template",43),b.gc(),b.gc(),b.hc(88,"label",31),b.hc(89,"strong"),b.dd(90),b.wc(91,"translate"),b.gc(),b.gc(),b.hc(92,"div",32),b.hc(93,"ng-select",45),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().selectedSpecification0=t})("change",function(){b.Uc(e);const t=b.vc();return t.changeSpecification(t.entity0,t.selectedCategory0)}),b.bd(94,rn,3,6,"ng-template",43),b.gc(),b.gc(),b.hc(95,"label",31),b.hc(96,"strong"),b.dd(97),b.wc(98,"translate"),b.gc(),b.gc(),b.hc(99,"div",32),b.hc(100,"input",46),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._tat=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateTAT(t.entity0,t._tat)}),b.wc(101,"translate"),b.gc(),b.gc(),b.hc(102,"label",47),b.hc(103,"strong"),b.dd(104),b.wc(105,"translate"),b.gc(),b.gc(),b.hc(106,"div",32),b.hc(107,"ng-select",48),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().selectedTemplate0=t})("change",function(){b.Uc(e);const t=b.vc();return t.changeTemplate(t.entity0)}),b.bd(108,ln,3,6,"ng-template",43),b.gc(),b.dd(109," \xa0"),b.bd(110,sn,3,3,"a",49),b.gc(),b.hc(111,"div",50),b.hc(112,"div",51),b.hc(113,"table",52),b.hc(114,"thead",53),b.hc(115,"tr"),b.hc(116,"th",54),b.dd(117),b.wc(118,"translate"),b.wc(119,"number"),b.gc(),b.gc(),b.gc(),b.hc(120,"thead",55),b.hc(121,"tr"),b.hc(122,"th",56),b.dd(123,"#"),b.gc(),b.hc(124,"th",57),b.cc(125,"i",58),b.gc(),b.hc(126,"th",59),b.dd(127),b.wc(128,"translate"),b.gc(),b.hc(129,"th",59),b.dd(130),b.wc(131,"translate"),b.gc(),b.hc(132,"th",59),b.dd(133),b.wc(134,"translate"),b.gc(),b.hc(135,"th",59),b.dd(136),b.wc(137,"translate"),b.gc(),b.hc(138,"th",59),b.dd(139,"LOD"),b.gc(),b.hc(140,"th",59),b.dd(141),b.wc(142,"translate"),b.gc(),b.hc(143,"th",59),b.dd(144),b.wc(145,"translate"),b.gc(),b.hc(146,"th",59),b.dd(147),b.wc(148,"translate"),b.gc(),b.hc(149,"th",59),b.dd(150),b.wc(151,"translate"),b.gc(),b.hc(152,"th",59),b.dd(153),b.wc(154,"translate"),b.gc(),b.hc(155,"th",59),b.dd(156),b.wc(157,"translate"),b.gc(),b.hc(158,"th",59),b.dd(159),b.wc(160,"translate"),b.gc(),b.hc(161,"th",59),b.dd(162),b.wc(163,"translate"),b.gc(),b.hc(164,"th",59),b.dd(165),b.wc(166,"translate"),b.gc(),b.gc(),b.gc(),b.hc(167,"tbody"),b.bd(168,Un,42,31,"tr",15),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(5),b.Fc("for","sn",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(8,130,"Sample name")),b.Nb(3),b.Fc("id","sn",e._currentTabActivated,""),b.Fc("name","sample_name",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(11,132,"Sample")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_name)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.Fc("id","sne",e._currentTabActivated,""),b.Fc("name","sample_namee",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(13,134,"Sample")+" "+b.xc(14,136,"English")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_name_e)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(3),b.Fc("id","id",e._currentTabActivated,""),b.Fc("name","id",e._currentTabActivated,""),b.Dc("ngModel",e.entity0.sample_id),b.Nb(1),b.Fc("for","sample_code",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(19,138,"Sample code")),b.Nb(3),b.Fc("id","sample_code",e._currentTabActivated,""),b.Fc("name","sample_code",e._currentTabActivated,""),b.Dc("placeholder",b.xc(22,140,"Sample code")+" "+e._currentTabActivated)("ngModel",e.entity0.sample_code),b.Nb(2),b.Fc("for","description",e._currentTabActivated,""),b.Nb(2),b.gd("",b.xc(26,142,"Description")," (",b.xc(27,144,"State of sample"),")"),b.Nb(4),b.Fc("id","description",e._currentTabActivated,""),b.Fc("name","description",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(30,146,"Description")+" "+e._currentTabActivated)("ngModel",e.entity0.description)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.Fc("id","descriptione",e._currentTabActivated,""),b.Fc("name","descriptione",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(32,148,"Description")+" "+b.xc(33,150,"English")+" "+e._currentTabActivated)("ngModel",e.entity0.description_e)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(3),b.Fc("for","inner_code",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(37,152,"Inner code")),b.Nb(3),b.Fc("id","inner_code",e._currentTabActivated,""),b.Fc("name","inner_code",e._currentTabActivated,""),b.Dc("placeholder",b.xc(40,154,"Inner code")+" "+e._currentTabActivated)("ngModel",e.entity0.inner_code),b.Nb(2),b.Fc("for","note",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(44,156,"Note")),b.Nb(3),b.Fc("id","note",e._currentTabActivated,""),b.Fc("name","note",e._currentTabActivated,""),b.Dc("placeholder",b.xc(47,158,"Note")+" "+e._currentTabActivated)("ngModel",e.entity0.note)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.Fc("for","weight",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(51,160,"Weight")),b.Nb(3),b.Fc("id","weight",e._currentTabActivated,""),b.Fc("name","weight",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(54,162,"Weight")+" "+e._currentTabActivated)("ngModel",e.entity0.weight)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.Fc("for","state",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(58,164,"State")),b.Nb(3),b.Dc("ngModel",e.entity0.is_active)("disabled",0!=e.entity.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.fd(" ",b.xc(63,166,"Pending")," "),b.Nb(3),b.fd(" ",b.xc(66,168,"Confirmed")," "),b.Nb(3),b.fd(" ",b.xc(69,170,"Cancel")," "),b.Nb(2),b.Fc("for","_samplenatures",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(73,172,"Sample nature")),b.Nb(3),b.Pb("ajustar"),b.Fc("name","_samplenatures",e._currentTabActivated,""),b.Dc("items",e._samplenatures)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.entity0.sample_nature_id)("placeholder",b.xc(76,174,"Please choose"))("notFoundText",b.xc(77,176,"Not found item")),b.Nb(4),b.Fc("for","matrix_category",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(82,178,"Matrix category")),b.Nb(3),b.Pb("ajustar"),b.Dc("items",e._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCategory0)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create"))("placeholder",b.xc(85,180,"Please choose"))("notFoundText",b.xc(86,182,"Not found item")),b.Nb(4),b.Fc("for","para_assignment",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(91,184,"Parameter assignment")),b.Nb(3),b.Dc("items",e._specifications)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSpecification0)("disabled",0!=e.entity0.is_active||null==e.selectedCategory0||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(2),b.Fc("for","tatc",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(98,186,"TAT")),b.Nb(3),b.Fc("id","tatc",e._currentTabActivated,""),b.Fc("name","tatc",e._currentTabActivated,""),b.Dc("ngClass",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",b.xc(101,188,"TAT")+" "+e._currentTabActivated)("ngModel",e._tat)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(4),b.ed(b.xc(105,190,"Copy sample")),b.Nb(3),b.Dc("items",e._templates)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedTemplate0)("disabled",0!=e.entity0.is_active||!e._authenService.hasPermission("REQ-LIST","create")),b.Nb(3),b.Dc("ngIf",0==e.entity0.is_active&&e._authenService.hasPermission("REQ-LIST","update")),b.Nb(7),b.gd(" ",b.xc(118,192,"Subtotal"),": ",b.xc(119,194,e._totalSub)," (VND) "),b.Nb(10),b.fd(" ",b.xc(128,196,"Code")," "),b.Nb(3),b.fd(" ",b.xc(131,198,"Specification")," "),b.Nb(3),b.fd(" ",b.xc(134,200,"Note")," "),b.Nb(3),b.fd(" ",b.xc(137,202,"Method")," "),b.Nb(5),b.fd(" ",b.xc(142,204,"Unit")," "),b.Nb(3),b.fd(" ",b.xc(145,206,"Quantity")," "),b.Nb(3),b.fd(" ",b.xc(148,208,"Unit price")," "),b.Nb(3),b.fd("",b.xc(151,210,"Discount")," %"),b.Nb(3),b.fd(" ",b.xc(154,212,"Amount")," "),b.Nb(3),b.fd(" ",b.xc(157,214,"Priority")," "),b.Nb(3),b.fd(" ",b.xc(160,216,"TAT")," "),b.Nb(3),b.fd(" ",b.xc(163,218,"Order")," "),b.Nb(3),b.fd(" ",b.xc(166,220,"Hidden")," "),b.Nb(3),b.Dc("ngForOf",e._orderdetailists)}}function On(e,t){if(1&e){const e=b.ic();b.hc(0,"form",28),b.hc(1,"div",80),b.hc(2,"h4",81),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",82),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",83),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",84),b.hc(9,"div",30),b.hc(10,"div",50),b.hc(11,"div",85),b.hc(12,"button",86),b.rc("click",function(){return b.Uc(e),b.vc()._print("vn")}),b.dd(13),b.wc(14,"translate"),b.gc(),b.hc(15,"button",87),b.rc("click",function(){return b.Uc(e),b.vc()._print("en")}),b.dd(16),b.wc(17,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}2&e&&(b.Nb(3),b.fd(" ",b.xc(4,3,"Language")," "),b.Nb(10),b.fd(" ",b.xc(14,5,"Vietnamese")," "),b.Nb(3),b.fd(" ",b.xc(17,7,"English")," "))}function Yn(e,t){1&e&&(b.fc(0),b.hc(1,"a",94),b.cc(2,"img",95),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing")," "))}function Ln(e,t){if(1&e){const e=b.ic();b.hc(0,"a",96),b.rc("click",function(){return b.Uc(e),b.vc(2).saveComment()}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Save & close")," "))}function qn(e,t){if(1&e){const e=b.ic();b.hc(0,"form",28),b.hc(1,"div",80),b.hc(2,"h4",81),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",82),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",83),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",84),b.hc(9,"div",30),b.hc(10,"div",50),b.hc(11,"div",88),b.hc(12,"label",89),b.dd(13),b.wc(14,"translate"),b.gc(),b.hc(15,"textarea",90),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entityComment.comment_ext=t}),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(16,"div",91),b.hc(17,"a",92),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.dd(18),b.wc(19,"translate"),b.gc(),b.bd(20,Yn,5,3,"ng-container",17),b.bd(21,Ln,3,3,"a",93),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.gd(" ",b.xc(4,7,"Note")," - ",e.entityComment.code," "),b.Nb(10),b.ed(b.xc(14,9,"Note")),b.Nb(2),b.Dc("ngModel",e.entityComment.comment_ext),b.Nb(3),b.fd(" ",b.xc(19,11,"Close")," "),b.Nb(2),b.Dc("ngIf",e.isSaveNote),b.Nb(1),b.Dc("ngIf",!e.isSaveNote)}}g.a.vfs=m.a.pdfMake.vfs;let zn=(()=>{class e{constructor(e,t,n,a,c,i,o,r,l,h){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=c,this._excelService=i,this._activatedRoute=o,this._utilityService=r,this.formatPipe=l,this.modalService=h,this.isSave=!1,this._flagModal="",this._flagPrintPreview=!1,this.entity={},this.baseFolder=d.a.BASE_API+"/",this._id="",this.entityDetail={},this._xList=[],this._tabOrder=9,this._categories=[],this._specifications=[],this._templates=[],this._orderdetailists=[],this._totalSub=0,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._flagEdit=!1,this.isLoadingEmail=!1,this._currentTab=0,this.isLoadingEmail1=!1,this.isLoadingEmail2=!0,this.config={displayKey:"name",search:!0,limitTo:5},this.selectedSpecification0=null,this.selectedCategory0=null,this.selectedTemplate0=null,this._currentTabActivated=0,this._currentTabSampleId="",this._logoPath=d.a.BASE_API+"/",this._logoIsoPath=d.a.BASE_API+"/",this.entity0={},this.entityComment={},this.isSaveNote=!1,this._samplenatures=[],!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.user=this._authenService.getLoggedInUser(),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.loadImgs(),this._activatedRoute.params.subscribe(e=>{this._id=e.id,this.loadDetail(this._id),this.loadSampleNature(),this.loadCategories(),this.loadSpecs(null),this.socket.on("refreshPage",e=>{this.loadCategories()})})}ngAfterViewInit(){}counter(e,t){return console.log(e,t),new Array(e-t)}loadDetail(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{this.entity=e.data;let t=[];for(let a of e.data.orders_list)t.push({sample_id:a.sample_id,sample_name:a.sample_name,sample_name_e:a.sample_name_e,sample_code:a.sample_code,inner_code:a.inner_code,description:a.description,description_e:a.description_e,note:a.note,weight:a.weight,is_active:a.is_active,userid:a.userid,total_sub:a.total_sub,order_no:a.order_no,flag_close:!1,sample_nature_id:a.sample_nature_id});this._xList=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0];let n={};n.id=this.entity.userid,n.short_code=this.user.short_code,this.updateEmployeeCode(n)})}removeOrderWithNull(e){let t={};t.sample_id=e,this._dataService.post("/request/removeOrderWithNull",t).subscribe(e=>{})}loadDetailWithNoloadOrderSampleTabs(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{this.entity.total=e.data.total})}updateEmployeeCode(e){this._dataService.post("/user/updateCodeEmployee",e).subscribe(e=>{})}loadDetail1(e){let t={};t.id=e,this._dataService.post("/request/detailA",t).subscribe(e=>{this.entity=e.data;let t=[];if(0==e.data.orders_list.length){var n=0;for(let a of this.counter(e.data.number_sample,0))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}else{n=0;for(let a of e.data.orders_list)t.push({sample_id:a.sample_id,sample_name:a.sample_name,sample_code:a.sample_code,inner_code:a.inner_code,description:a.description,note:a.note,weight:a.weight,is_active:a.is_active,userid:a.userid,order_no:n}),n+=1;for(let a of this.counter(e.data.number_sample,e.data.orders_list.length))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}this._xList=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0],this.loadTemplates(this.entity.customer_id)})}loadDetailByTab(e,t){this._currentTab=t;let n={};n.id=e,this._dataService.post("/request/detailA",n).subscribe(e=>{this.entity=e.data;let t=[];if(0==e.data.orders_list.length){var n=0;for(let a of this.counter(e.data.number_sample,0))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}else{n=0;for(let a of e.data.orders_list)t.push({sample_id:a.sample_id,sample_name:a.sample_name,sample_code:a.sample_code,inner_code:a.inner_code,description:a.description,note:a.note,weight:a.weight,is_active:a.is_active,userid:a.userid,order_no:n}),n+=1;for(let a of this.counter(e.data.number_sample,e.data.orders_list.length))t.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:n}),n+=1}this._xList=t,this.entity0=t.filter(e=>e.order_no==this._currentTabActivated)[0],this.loadTemplates(this.entity.customer_id)})}loadTemplates(e){let t={};t.customer_id=e,this._dataService.post("/sample_matrix/getallsampletemplates",t).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.sample_name,code:n.id});this._templates=t})}loadCategories(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:"en"==this.user.lang?n.category_name_e:n.category_name_l,code:n.id});this._categories=t})}loadSpecs(e){if(null!=e){let t={};t.domain=this.user.short_code,t.id=e,this._dataService.post("/sample_matrix/getallparametersnopagingbycat",t).subscribe(e=>{let t=[];for(let n of e.data.filter(e=>e.is_active))t.push({name:n.specification_name_l,code:n.parameter_id});this._specifications=t})}else{let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparametersnopaging",e).subscribe(e=>{let t=[];for(let n of e.data.filter(e=>e.is_active))t.push({name:n.specification_name_l,code:n.id});this._specifications=t})}}_updateRequest(){console.log(this.entity),this._dataService.post("/request/update",this.entity).subscribe(e=>{console.log(e.data),"failed"==e.result?this._notifyService.showError("en"==this.user.lang?f.a.MSG_UPDATENO_EN:f.a.MSG_UPDATENO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title):(this.loadDetail(e.data[0]._id),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"))})}_updateSampleOrder(e){e.request_id=this._id,e.userid=this.user.id,this._tabOrder=e.order_no,null!=e.sample_name&&""!=e.sample_name&&(console.log("Params",e),this._dataService.post("/request/updateSampleOrder",e).subscribe(t=>{1==e.is_active&&null==e.sample_code&&this._updateCodeInSampleOrder(e),this._updateSubTotal(e.sample_id),this._currentTabSampleId=e.sample_id,this._currentTabActivated=t.data.order_no,this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK")}))}_updateCodeInSampleOrder(e){let t={};t.sample_id=e.sample_id,t.sample_code=e.sample_code,t.inner_code=e.inner_code,t.is_active=e.is_active,t.userid=this.user.id,console.log("Code",t),this._dataService.post("/request/addCodesInSampleOrder",t).subscribe(t=>{this.loadDetail(this._id),this._updateSubTotal(e.sample_id)})}loadDetailSampleOrder(e){let t={};t.sample_id=e,this._dataService.post("/request/detailSampleOrder",t).subscribe(e=>{null!=e.data&&(this._totalSub=e.data.total_sub)})}_removeTab(e){console.log("Call here",e),this._currentTabActivated=0,this._dataService.post("/request/removeOrder",{id:e,request_id:this._id,number_sample:this.entity.number_sample}).subscribe(e=>{console.log("Call KQ",e),this.entity0={},this.loadDetail(this._id)})}_updateSampleNo(){if(0==this.entity.number_sample)return this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_SAMPLE_ZERO_EN:f.a.MSG_ERROR_SAMPLE_ZERO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title),void(this.entity.number_sample=1);this._dataService.post("/request/update2",{request_id:this._id,number_sample:this.entity.number_sample,short_code:this.user.short_code,ipaddress:this.user.ipaddress}).subscribe(e=>{console.log("Run here",e),this.loadDetail(this._id)})}_chooseTab(e,t){for(let n of this._xList)n.flag_close=n.order_no==t&&!n.flag_close;this.entity0=e,this._orderdetailists=[],this.selectedCategory=null,this.selectedSpecification=null,this.selectedTemplate=null,this._tat=null,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this.totalPage=0,this._updateSubTotalWithNoloadOrderSampleTabs(e.sample_id),this.loadDetailSampleOrder(e.sample_id),this.loadOrderDetailList(e.sample_id),this._currentTabActivated=t}changeCategoryMatrix(){this.loadSpecs(this.selectedCategory0)}changeTemplate(e){this._getTemplate(this.selectedTemplate0,e)}changeSpecification(e,t){console.log(this.selectedSpecification0,t),null!=this.selectedSpecification0&&null!=t&&this._addItems(this.selectedSpecification0,e,t)}_addItems(e,t,n){if(console.log(e,t),null!=t.sample_id)if(null!=e){let a={};a.sample_id=t.sample_id,a.parameter_id=e,a.category_id=n,a.priority=0,a.short_code=this.user.short_code,this._dataService.post("/request/addItemOrderv2",a).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.selectedSpecification0=null,this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id),this._updateSubTotal(t.sample_id),this.loadDetail(this._id)},()=>{this.selectedSpecification0=null,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}else this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id);else this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}loadOrderDetailList(e){if(null!=e){let t={page:1,limit:9999};t.sample_id=e,this._dataService.post("/request/getlistorderdetail",t).subscribe(e=>{let t=[];this._totalSub=0;for(let n of e.data)0==t.filter(e=>e.code==n.code&&e.category_id==n.category_id).length&&(t.push({code:n.code,code_father:0==e.data.filter(e=>e.code==n.code_father).length||n.code==n.code_father?null:n.code_father,lod:n.lod,mark:n.mark,method:n.method,parameter_id:n.parameter_id,category_id:n.category_id,price:null==n.price?0:n.price,priority:n.priority,sample_id:n.sample_id,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,tat:n.tat,unit:n.unit,quantity:n.quantity,flag:!1,comment_ext:n.comment_ext,discount:null==n.discount?0:parseFloat(n.discount),amount:(1-parseFloat(null==n.discount?0:n.discount)/100)*parseInt(n.quantity)*parseFloat(null==n.price?0:n.price),order_no:null==n.order_no?9:n.order_no,hide:null!=n.hide&&null!=n.hide&&n.hide}),this._totalSub+=parseInt(null==n.price?0:n.price)*n.quantity);this._orderdetailists=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages,this.selectedSpecification=null})}}_assignOrderDetail(e){let t=[];for(let n of e)t.push({sample_id:n.sample_id,parameter_id:n.parameter_id,category_id:n.category_id,order_no:n.order_no,code:n.code,code_father:n.code_father});this._dataService.post("/request/re-assignOrders",{getlist:t}).subscribe(t=>{this._updateSubTotal(e[0].sample_id),this.loadOrderDetailList(e[0].sample_id),this.loadDetail(this._id)})}_switchFlagEdit(){for(let e of this._orderdetailists)e.flag=!e.flag}pageChanged(e,t){this.pageIndex=e.page,this.loadOrderDetailList(t)}_removeItem(e){let t={};t.sample_id=e.sample_id,t.parameter_id=e.parameter_id,t.category_id=e.category_id,t.code=e.code,t.code_father=e.code_father,this._dataService.post("/request/removeItemOrderv2",t).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_DELETE_EN:f.a.MSG_DELETE,"OK"),this._updateSubTotal(e.sample_id),this.loadDetailSampleOrder(e.sample_id),this.loadOrderDetailList(e.sample_id)})}_updateTAT(e,t){this._tat=null;let n={};n.sample_id=e.sample_id,n.tat=t,this._dataService.post("/request/updateTAT",n).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this._updateSubTotal(e.sample_id),this.loadOrderDetailList(e.sample_id)})}_updatePrice(e){let t={};t.sample_id=e.sample_id,t.parameter_id=e.parameter_id,t.category_id=e.category_id,t.price=e.price,t.mark=e.mark,t.priority=e.priority,t.tat=e.tat,t.quantity=e.quantity,t.discount=e.discount,this._dataService.post("/request/updatePriceOrder",t).subscribe(t=>{console.log("KQ",t),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this._updateSubTotal(e.sample_id),this.loadOrderDetailList(e.sample_id),this.loadDetail(this._id)})}_updatePricev2(e){console.log("List",e),this._dataService.post("/request/updatePriceOrderv2",{getlist:e}).subscribe(t=>{console.log("KQ",t),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this._updateSubTotal(e[0].sample_id),this.loadOrderDetailList(e[0].sample_id),this.loadDetail(this._id)})}_updateSubTotal(e){let t={};t.sample_id=e,this._dataService.post("/request/updateSubTotal",t).subscribe(t=>{this._updateTotal(this._id),this.loadDetailSampleOrder(e)})}_updateSubTotalWithNoloadOrderSampleTabs(e){this.selectedCategory0=null;let t={};t.sample_id=e,this._dataService.post("/request/updateSubTotal",t).subscribe(t=>{this._updateTotalWithNoloadOrderSampleTabs(this._id),this.loadDetailSampleOrder(e)})}_updateTotalWithNoloadOrderSampleTabs(e){let t={};t.request_id=e,this._dataService.post("/request/updateTotal",t).subscribe(e=>{this.loadDetailWithNoloadOrderSampleTabs(this._id)})}_updateTotal(e){let t={};t.request_id=e,this._dataService.post("/request/updateTotal",t).subscribe(e=>{this.loadDetail(this._id)})}_addComment(e,t){this.entityComment=t,this.modalService.open(e,{size:"md",centered:!0})}saveComment(){this.isSaveNote=!0,this._dataService.post("/request/addCommentParameter",{sample_id:this.entityComment.sample_id,parameter_id:this.entityComment.parameter_id,category_id:this.entityComment.category_id,comment_ext:this.entityComment.comment_ext}).subscribe(e=>{this.isSaveNote=!1,this.loadOrderDetailList(this.entityComment.sample_id),this.modalService.dismissAll()})}_saveTemplate(e){if(null==e.sample_name||""==e.sample_name)return void this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);let t={};t.sample_name=e.sample_name,t.weight=e.weight,t.customer_id=this.entity.customer_id;let n=[];for(let a of this._orderdetailists)n.push({code:a.code,flag:a.flag,lod:a.lod,mark:a.mark,method:a.method,loq:a.loq,parameter_id:a.parameter_id,category_id:a.category_id,price:a.price,priority:a.priority,sample_id:null,specification_name_e:a.specification_name_e,specification_name_l:a.specification_name_l,tat:a.tat,unit:a.unit,quantity:a.quantity});t.json=JSON.stringify(n),this._dataService.post("/request/addSampleTemplate",t).subscribe(e=>{"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.loadTemplates(this.entity.customer_id)):this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}_getTemplate(e,t){if(console.log(e,t),null!=t.sample_name&&null!=e)p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_replace_en:f.a.are_u_sure_replace,text:t.sample_name,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(n=>{if(n.value){let n={};n.id=e,n.sample_id=t.sample_id,n.userid=this.user.id,console.log(n),this._dataService.post("/request/replaceOrderDetailBySampleId",n).subscribe(e=>{this.selectedTemplate=null,"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.selectedTemplate0=[],this._updateSubTotal(t.sample_id),this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id)):this._notifyService.showError("en"==this.user.lang?f.a.MSG_ADDNO_EN:f.a.MSG_ADDNO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}else this.selectedTemplate=null});else if(null!=e){let n={};n.id=e,n.sample_id=t.sample_id,n.request_id=this._id;let a=new Date;n.timestamp=new Date(r(a.setHours(a.getHours()+7)).format("YYYY-MM-DD HH:mm:ss")),n.is_active=0,n.userid=this.user.id,this._dataService.post("/request/replaceOrderDetailBySampleId",n).subscribe(e=>{this.selectedTemplate=null,"ok"==e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.selectedTemplate0=null,this._updateSubTotal(e.data.sample_id),this.socket.emit("refresh",{}),this.loadDetailSampleOrder(e.data.sample_id),this.loadOrderDetailList(e.data.sample_id)):(this.selectedTemplate0=null,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title))})}}_currentTabClicked(e){console.log(e)}popUpLanguage(e,t){this.choosePrintType=t,this.modalService.open(e,{size:"md",centered:!0})}_print(e){1==this.choosePrintType&&this.printQuotationAsPDF(e),2==this.choosePrintType&&this.printBOAsPDF(e)}printQuotationAsPDF(e){return Object(o.__awaiter)(this,void 0,void 0,function*(){let t={};t.id=this._id,this._dataService.post("/request/detailIn",t).subscribe(t=>Object(o.__awaiter)(this,void 0,void 0,function*(){console.log("KQ In",t),this.entity=t.data;let n=t.data;var a=new Date(n.received_date),c=new Date(a.getTime()+24*n.valid_number*60*60*1e3),i=(r(c).format("DD/MM/YYYY"),r(a).format("DD/MM/YYYY")),o=[];o.push({text:"\n"});let l="en"==e?this.entity.company_name_e:this.entity.company_name_l,s="en"==e?this.entity.address_e:this.entity.address_l,d="en"==e?"Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 b\xe1o gi\xe1: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length);"0"==e&&(d="M\xe3 s\u1ed1 b\xe1o gi\xe1/ Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)),o.push({alignment:"justify",columns:[{text:[{text:l,bold:!0},"\n",{text:s},"\n",{text:this.entity.contact_name_sender,bold:!0},"\n",{text:null==this.entity.sender_phone?"":this.entity.sender_phone},"\n",{text:null==this.entity.email?"":this.entity.email}],style:"body_top"},{qr:d,foreground:"#20a8d8",fit:65,alignment:"right"}]});let h="en"==e?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,";"0"==e&&(h="K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng/ Dear customers,");let u="en"==e?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.";0==e&&(u="Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.");let m="en"==e?"Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any).":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3).";0==e&&(m="Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3)/ Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any).");let _="en"==e?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",p="en"==e?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",f="en"==e?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",b="en"==e?"QUOTATION":"B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M";"0"==e&&(b="B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M\nQUOTATION"),o.push({text:"\n"}),o.push({table:{widths:["*"],body:[[{text:h,alignment:"left",style:"body_footer"}],[{text:u,alignment:"left",style:"body_footer"}],[{text:m,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),o.push({text:"\n"});let v=this.formatPipe.localeString(n.total),y="0.00";var x=n.total*n.promo_perorder/100;let S=this.formatPipe.localeString((n.total-x)*n.tax_vat/100),N=this.formatPipe.localeString(parseFloat(n.total)-x+(n.total-x)*n.tax_vat/100);null!=n.promo_special&&""!=n.promo_special&&(y=this.formatPipe.localeString(n.promo_special),S=this.formatPipe.localeString((n.total-n.promo_special-(x=(n.total-n.promo_special)*n.promo_perorder/100))*n.tax_vat/100),N=this.formatPipe.localeString(parseFloat(n.total)-parseFloat(n.promo_special)-x+(n.total-n.promo_special-x)*n.tax_vat/100));let w=this.formatPipe.localeString(x),D=1,M=!1,C="en"==e?"No.":"STT";"0"==e&&(C="STT\nNo.");let T="en"==e?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m";"0"==e&&(T="Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m\nParameters");let I="en"==e?"Method":"Ph\u01b0\u01a1ng ph\xe1p";"0"==e&&(I="Ph\u01b0\u01a1ng ph\xe1p\nMethod");let k="en"==e?"Note":"Ghi ch\xfa";"0"==e&&(k="Ghi ch\xfa\nNote");let P="en"==e?"Unit price":"\u0110\u01a1n gi\xe1";"0"==e&&(P="\u0110\u01a1n gi\xe1\nUnit price");let R="en"==e?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng";"0"==e&&(R="S\u1ed1 l\u01b0\u1ee3ng\nQuantity");let E="en"==e?"Discount":"Gi\u1ea3m gi\xe1";"0"==e&&(E="Gi\u1ea3m gi\xe1Discount");let A="en"==e?"Amount":"Th\xe0nh ti\u1ec1n";"0"==e&&(A="Th\xe0nh ti\u1ec1n\nAmount");for(let t of n.orders_list.filter(e=>2!=e.is_active))if(t.orderdetail_list.length>0){o.push({table:{widths:[20,"*",120,100,50,50,60],body:[[{border:[!0,!0,!0,!0],text:{text:C,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:T,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:I,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:k,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:P,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:R,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:A,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}});let a=null==t.weight?"":t.weight,c="en"==e?"Sample volume: "+a:"L\u01b0\u1ee3ng m\u1eabu: "+a;"0"==e&&(c="L\u01b0\u1ee3ng m\u1eabu/ Sample volume: "+a),o.push({table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:D+". "+("0"==e?t.sample_name+"/ "+t.sample_name_e:"en"==e?t.sample_name_e:t.sample_name),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:{text:this.formatPipe.localeString(t.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:6,text:{text:c,italics:!0,bold:!1},border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}});var U=[],F=1,O=[];let i="en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",r="en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",l="en"==e?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)";"0"==e&&(i="T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)/ Total (not incluled VAT)",r="T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)/ Total (incluled VAT)",l="Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)/ Discount on total orders (%)");for(let n of t.orderdetail_list){let t=!1;"b709ca6e-2823-11eb-9a33-acde48001122"==n.department_id?(O.push(!0),t=!0):(O.push(!1),t=!1);let a="",c=null==n.standards?[]:JSON.parse(n.standards);for(let e of c.filter(e=>null!=e))null==e.id?null!=e&&(a+="("+e+")"):a+="("+e.id+")";let i="en"==e?n.specification_ex_name_e:n.specification_ex_name_l;"0"==e&&(i=n.specification_ex_name_l+"/ "+n.specification_ex_name_e),U.push({STT:F,Para:[{text:i+" ",italics:t},{text:a,fontSize:8,italics:t}],Method:n.method,Note:n.comment_ext,Price:this.formatPipe.localeString(n.price*(1-(null==n.discount?0:n.discount)/100)),Qty:n.quantity,Amount:this.formatPipe.localeString(n.price*n.quantity*(1-(null==n.discount?0:n.discount)/100))}),F+=1}o.push(this.tablePrintQuotation(U,["STT","Para","Method","Note","Price","Qty","Amount"],[20,"*",120,100,50,50,60],O));let s=""!=n.title_promo_spec&&null!=n.title_promo_spec?n.title_promo_spec:"en"==e?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m";"0"==e&&(s=""!=n.title_promo_spec&&null!=n.title_promo_spec?n.title_promo_spec:"Gi\u1ea3m gi\xe1 cho nh\xf3m/ Discount on group"),D==n.orders_list.filter(e=>2!=e.is_active).length&&(M=!0,o.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:l,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:s,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:v,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:s,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:l,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:r,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}})),D+=1}if(o.push({text:"\n"}),this.entity.standard_list.length>0){let t="";for(let n of this.entity.standard_list){let a="("+n.id+") "+("en"==e?n.description_e:n.description_l);t.includes(a)||(t+=a+"\n")}o.push({text:t,fontSize:8,italics:!0})}o.push({text:"\n"});let Y="en"==e?"These prices are valid for one month if the quotation is accepted within one month.\nPayment period: on order.\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + Account number (VND): 15000168\n       + Bank name: Asia Commercial Bank\n       +Bank branch: Dong Sai Gon":"Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\n       + S\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",L="en"==e?"Estimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.":"Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng",q="en"==e?"For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form":"N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.";if(0==e&&(Y="Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1./ These prices are valid for one month if the quotation is accepted within one month.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng./ Payment period: on order.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + S\u1ed1 t\xe0i kho\u1ea3n/ Account number (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u/ Bank name: Asia Commercial Bank\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n/ Bank branch: Dong Sai Gon",L="Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nEstimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.",q="N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.\n For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form."),o.push({text:Y,fontSize:10}),o.push({text:"\n"}),o.push({text:L,fontSize:8,italics:!0}),o.push({text:"\n"}),o.push({columns:[{width:"*",text:q,fontSize:10},{width:"*",qr:"http://phieuyeucauthunghiemtv.com",foreground:"#20a8d8",fit:45,alignment:"center"}]}),o.push({text:"\n"}),o.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:i+"\n"+("en"==e?"Valid by":"Ng\u01b0\u1eddi l\u1eadp b\xe1o gi\xe1"),alignment:"center",fontSize:10}]}),o.push({text:"\n"}),null!=this.entity.signature_user){let e=this.baseFolder+this.entity.signature_user;o.push({columns:[{width:"*",text:"",fontSize:10},{width:"150",image:yield this._convertBase64ImageFromURL(e),alignment:"center"}]})}const z={pageSize:"A4",pageMargins:[25,80,25,70],defaultStyle:{fontSize:12,columnGap:20},content:[{text:b,style:"title_top"},{text:"\n"},{text:d,alignment:"right",fontSize:13,bold:!0},o],footer:function(e,t){return r(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:p+"\n"+_,alignment:"left",style:"body_footer"},{height:150,text:f,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},header:(e,t,n)=>({table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}),styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},images:{myLogo:yield this._convertBase64ImageFromURL(this._logoPath),myIso:yield this._convertBase64ImageFromURL(this._logoIsoPath)}};var G="'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf";G=G.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g.a.createPdf(z).download(G),g.a.createPdf(z).open()}))})}printBOAsPDF(e){return Object(o.__awaiter)(this,void 0,void 0,function*(){let t={};t.id=this._id,this._dataService.post("/request/detailIn",t).subscribe(t=>Object(o.__awaiter)(this,void 0,void 0,function*(){this.entity=t.data;let n=t.data;var a=new Date(n.received_date),c=new Date(a.getTime()+24*n.valid_number*60*60*1e3),i=(r(c).format("DD/MM/YYYY"),r(a).format("DD/MM/YYYY")),o=[];o.push({text:"\n"});let l=null==this.entity.company_receiver?this.entity.company_name_l:"en"==e?null==this.entity.company_receiver.company_name_e?this.entity.company_receiver.company_name_l:this.entity.company_receiver.company_name_e:this.entity.company_receiver.company_name_l,s=null==this.entity.company_receiver?null==this.entity.address_l?"":this.entity.address_l:"en"==e?null==this.entity.company_receiver.address_e?this.entity.company_receiver.address_l:this.entity.company_receiver.address_e:this.entity.company_receiver.address_l,d="en"==e?"Order code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 \u0111\u01a1n h\xe0ng: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length);o.push({alignment:"justify",columns:[{text:[{text:l,bold:!0},"\n",{text:s},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.contact_name?"":this.entity.contact_receiver.contact_name,bold:!0},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.phone||"-"==this.entity.contact_receiver.phone?"":this.entity.contact_receiver.phone},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.email?"":this.entity.contact_receiver.email}],style:"body_top"},{qr:d,foreground:"#20a8d8",fit:65,alignment:"right"}]});let h="en"==e?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,",u="en"==e?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.",m="en"==e?"Sac Ky Tien Phong Science & Technology JSC would like to confirm we received the sample provided by customers (please see attachment).":"C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong xin x\xe1c nh\u1eadn \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c m\u1eabu do qu\xfd kh\xe1ch h\xe0ng cung c\u1ea5p (vui l\xf2ng xem danh s\xe1ch \u0111\xednh k\xe8m).",_="en"==e?"Please check and confirm the information: sample name, sample description, parameters, etc\u2026 and notify us immediately in case corrections are needed. The information in this receipt will be used for outputting the testing report.":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra v\xe0 x\xe1c nh\u1eadn l\u1ea1i c\xe1c th\xf4ng tin: t\xean m\u1eabu, m\xf4 t\u1ea3 m\u1eabu, ch\u1ec9 ti\xeau ph\xe2n t\xedch, \u2026 v\xe0 th\xf4ng b\xe1o ngay cho ch\xfang t\xf4i trong tr\u01b0\u1eddng h\u1ee3p c\u1ea7n ch\u1ec9nh s\u1eeda. Nh\u1eefng th\xf4ng tin trong bi\xean nh\u1eadn n\xe0y s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho vi\u1ec7c xu\u1ea5t k\u1ebft qu\u1ea3.",p="en"==e?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",f="en"==e?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",b="en"==e?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",v="en"==e?"RECEIPT":"BI\xcaN NH\u1eacN";o.push({text:"\n"}),o.push({table:{widths:["*"],body:[[{text:h,alignment:"left",style:"body_footer"}],[{text:u,alignment:"left",style:"body_footer"}],[{text:m,alignment:"left",style:"body_footer"}],[{text:_,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),o.push({text:"\n"});let y=this.formatPipe.localeString(n.total),x="0.00";var S=n.total*n.promo_perorder/100;let N=this.formatPipe.localeString((n.total-S)*n.tax_vat/100),w=this.formatPipe.localeString(parseFloat(n.total)-S+(n.total-S)*n.tax_vat/100);null!=n.promo_special&&""!=n.promo_special&&(x=this.formatPipe.localeString(n.promo_special),N=this.formatPipe.localeString((n.total-n.promo_special-(S=(n.total-n.promo_special)*n.promo_perorder/100))*n.tax_vat/100),w=this.formatPipe.localeString(parseFloat(n.total)-parseFloat(n.promo_special)-S+(n.total-n.promo_special-S)*n.tax_vat/100));let D=this.formatPipe.localeString(S),M=1,C="en"==e?"No.":"STT",T="en"==e?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m",I="en"==e?"Method":"Ph\u01b0\u01a1ng ph\xe1p ",k="en"==e?"Unit price":"\u0110\u01a1n gi\xe1",P="en"==e?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng",R="en"==e?"Amount":"Th\xe0nh ti\u1ec1n",E="en"==e?"Sample code: ":"M\xe3 m\u1eabu: ",A="en"==e?"Sample description: ":"T\xecnh tr\u1ea1ng m\u1eabu: ",U="en"==e?"Amount of samples: ":"Kh\u1ed1i l\u01b0\u1ee3ng m\u1eabu: ",F="en"==e?"Date of receiving samples: "+r(new Date(n.received_date)).format("DD/MM/YYYY"):"Ng\xe0y nh\u1eadn m\u1eabu: "+r(new Date(n.received_date)).format("DD/MM/YYYY");for(let t of n.orders_list.filter(e=>2!=e.is_active)){let a="en"==e?"Client estimated due date: "+r(new Date(t.estimated_date)).format("DD/MM/YYYY"):"Ng\xe0y d\u1ef1 ki\u1ebfn tr\u1ea3 k\u1ebft qu\u1ea3: "+r(new Date(t.estimated_date)).format("DD/MM/YYYY");o.push({table:{headerRows:1,widths:[30,"*","*",50,50,110],body:[[{border:[!0,!0,!0,!0],text:{text:C,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:T,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:I,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:k,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:P,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:R,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}});let c=null==t.weight?"":t.weight;o.push({table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:M+". "+t.sample_name,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{text:{text:this.formatPipe.localeString(t.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:5,text:E+(null==t.inner_code?"":t.inner_code),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:A+(null==t.description?"":t.description),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:U+": "+c,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:F,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:a,border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}});var O=[],Y=1,L=[];for(let n of t.orderdetail_list){let t=!1;"b709ca6e-2823-11eb-9a33-acde48001122"==n.department_id?(L.push(!0),t=!0):(L.push(!1),t=!1);let a="",c=null==n.standards?[]:JSON.parse(n.standards);for(let e of c.filter(e=>null!=e))null==e.id?null!=e&&(a+="("+e+")"):a+="("+e.id+")";O.push({STT:Y,Para:[{text:("en"==e?n.specification_ex_name_e:n.specification_ex_name_l)+" ",italics:t},{text:a,fontSize:8,italics:t}],Method:n.method,Price:this.formatPipe.localeString(n.price*(1-(null==n.discount?0:n.discount)/100)),Qty:n.quantity,Amount:this.formatPipe.localeString(n.price*n.quantity*(1-(null==n.discount?0:n.discount)/100))}),Y+=1}o.push(this.tablePrintQuotationa(O,["STT","Para","Method","Price","Qty","Amount"],[30,"*","*",50,50,110],L));let i=""!=n.title_promo_spec&&null!=n.title_promo_spec?n.title_promo_spec:"en"==e?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m";M==n.orders_list.filter(e=>2!=e.is_active).length&&o.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==e?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:y,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:i,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==e?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}),M+=1}if(this.entity.standard_list.length>0){let t="";for(let n of this.entity.standard_list){let a="("+n.id+") "+("en"==e?n.description_e:n.description_l);t.includes(a)||(t+=a+"\n")}o.push({text:t,fontSize:8,italics:!0})}o.push({text:"\n"});let q="en"==e?"BILLING INFORMATION :":"Th\xf4ng tin xu\u1ea5t ho\xe1 \u0111\u01a1n :",z="en"==e?"Bank transfer information :":"Th\xf4ng tin chuy\u1ec3n kho\u1ea3n :",G="en"==e?"Account name: CONG TY CP KHCN SAC KY TIEN PHONG\nAccount number (VND): 15000168\nBank name: Asia Commercial Bank Bank branch: Dong Sai Gon":"T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\nS\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\nNg\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\nChi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",V="en"==e?"Company\u2019s name: ":"T\xean c\xf4ng ty: ",B="en"==e?"Address: ":"\u0110\u1ecba ch\u1ec9: ",H="en"==e?"Tax number: ":"M\xe3 s\u1ed1 thu\u1ebf: ",Q=null==this.entity.company_bill?l:this.entity.company_bill.company_name_l,$=null==this.entity.company_bill?p:null==this.entity.company_bill.address_l?"":this.entity.company_bill.address_l,K=null==this.entity.company_bill?this.entity.tax_code:null==this.entity.company_bill.tax_code?"":this.entity.company_bill.tax_code,j=n.orders_list.filter(e=>null!=e.note&&""!=e.note),X=0,W="";for(let e of j)X<=e.note.length&&(W=e.note,X=e.note.length);let J="";if(""!=W&&(J="en"==e?"OTHERS INFORMATION :":"Th\xf4ng tin kh\xe1c :"),o.push(""!=W?{table:{widths:["*","*"],body:[[{border:[!0,!0,!0,!1],text:{text:q,bold:!0},style:"body_footer",alignment:"left"},{border:[!0,!0,!0,!1],text:{text:z,bold:!0},style:"body_footer",alignment:"left"}],[{border:[!0,!1,!0,!0],text:{text:V+Q+"\n"+B+$+"\n"+H+K,bold:!1},style:"body_footer",alignment:"left"},{border:[!0,!1,!0,!0],text:{text:G,bold:!1},style:"body_footer",alignment:"left"}],[{colSpan:2,border:[!0,!0,!0,!1],text:{text:J,bold:!0},style:"body_footer",alignment:"left"},{}],[{colSpan:2,border:[!0,!1,!0,!0],text:{text:W,bold:!1},style:"body_footer",alignment:"left"},{}]]},layout:{defaultBorder:!1}}:{table:{widths:["*","*"],body:[[{border:[!0,!0,!0,!1],text:{text:q,bold:!0},style:"body_footer",alignment:"left"},{border:[!0,!0,!0,!1],text:{text:z,bold:!0},style:"body_footer",alignment:"left"}],[{border:[!0,!1,!0,!0],text:{text:V+Q+"\n"+B+$+"\n"+H+K,bold:!1},style:"body_footer",alignment:"left"},{border:[!0,!1,!0,!0],text:{text:G,bold:!1},style:"body_footer",alignment:"left"}]]},layout:{defaultBorder:!1}}),o.push({text:"\n"}),o.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:i+"\n"+("en"==e?"Valid by":"Ng\u01b0\u1eddi l\u1eadp bi\xean nh\u1eadn"),alignment:"center",fontSize:10}]}),o.push({text:"\n"}),null!=this.entity.signature_user){let e=this.baseFolder+this.entity.signature_user;o.push({columns:[{width:"*",text:"",fontSize:10},{width:"150",image:yield this._convertBase64ImageFromURL(e),alignment:"center"}]})}const Z={pageSize:"A4",pageMargins:[25,80,25,70],defaultStyle:{fontSize:12,columnGap:20},content:[{text:v,style:"title_top"},{text:"\n"},{text:d,alignment:"right",fontSize:13,bold:!0},o],footer:function(e,t){return r(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:f+"\n"+p,alignment:"left",style:"body_footer"},{height:150,text:b,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},header:(e,t,n)=>({table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}),styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},images:{myLogo:yield this._convertBase64ImageFromURL(this._logoPath),myIso:yield this._convertBase64ImageFromURL(this._logoIsoPath)}};var ee="'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf";ee=ee.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g.a.createPdf(Z).open()}))})}tablePrintQuotation(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,a)}}}buildTableBodyPrintQuotation(e,t,n){var a=[];let c=0;return e.forEach(function(e){var i=[],o=1;t.forEach(function(t){i.push({text:{text:e[t]},alignment:2==o||3==o||4==o?"left":5==o||7==o?"right":"center",fontSize:10,italics:2==o&&n[c]}),o+=1,c+=1}),a.push(i)}),a}tablePrintQuotationa(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotationa(e,t,a)}}}buildTableBodyPrintQuotationa(e,t,n){var a=[];let c=0;return e.forEach(function(e){var i=[],o=1;t.forEach(function(t){i.push({text:{text:e[t]},alignment:2==o||3==o?"left":4==o||6==o?"right":"center",fontSize:10,italics:2==o&&n[c]}),o+=1,c+=1}),a.push(i)}),a}_convertBase64ImageFromURL(e){return new Promise((t,n)=>{var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=e=>{n(e)},a.src=e})}loadImgs(){let e={};e.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",e).subscribe(e=>Object(o.__awaiter)(this,void 0,void 0,function*(){this._logoPath+=e.data.filter(e=>"logo-stp"==e.file_name_e)[0].path_file,this._logoIsoPath+=e.data.filter(e=>"logo-iso"==e.file_name_e)[0].path_file}))}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}createImageFromBlob(e){let t=new FileReader;t.addEventListener("load",()=>{this.imageToShow=t.result},!1),e&&t.readAsDataURL(e)}loadSampleNature(){this._dataService.post("/sample_matrix/getallsamplenaturenopaging",{short_code:this.user.short_code}).subscribe(e=>{console.log(e);let t=[];for(let n of e.data)t.push({id:n.id,name:"en"==this.user.lang?n.name_e:n.name_l});this._samplenatures=t})}exportQuotationExcel(){this._dataService.post("/request/detailIn",{id:this._id}).subscribe(e=>Object(o.__awaiter)(this,void 0,void 0,function*(){let t=[],n=1;for(let a of e.data.orders_list.filter(e=>2!=e.is_active)){t.push({"No.":n+". "+(null==a.sample_name_e?a.sample_name:a.sample_name_e),Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(parseFloat(a.total_sub))}),t.push({"No.":"Sample volume: "+(null==a.weight?"":a.weight),Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:""});let e=1;for(let n of a.orderdetail_list)t.push({"No.":e,Parameters:n.specification_ex_name_l,Method:n.method,Note:n.comment_ext,"Unit Price":this.formatPipe.localeString(parseFloat(n.price)),Quantity:n.quantity,Discount:n.discount+"%",Amount:this.formatPipe.localeString(parseFloat(n.price)*parseInt(n.quantity)*(1-parseFloat(null==n.discount?0:n.discount)/100))}),e+=1;n+=1}if(t.push({"No.":"Total (before tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(e.data.total)}),null==e.data.promo_special)if(null==e.data.promo_perorder){let n=parseFloat(e.data.total)*parseFloat(e.data.tax_vat)/100,a=Math.round(parseFloat(e.data.total)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeStringEn(n)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(a)})}else{let n=parseFloat(e.data.total)*parseFloat(e.data.promo_perorder)/100,a=(parseFloat(e.data.total)-n)*parseFloat(e.data.tax_vat)/100,c=Math.round((parseFloat(e.data.total)-n)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on parameters",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.promo_perorder+"%",Amount:this.formatPipe.localeString(n)}),t.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(c)})}else if(null==e.promo_perorder){let n=parseFloat(e.data.promo_special),a=(parseFloat(e.data.total)-n)*parseFloat(e.data.tax_vat)/100,c=Math.round((parseFloat(e.data.total)-n)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on group",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(n),Amount:this.formatPipe.localeString(n)}),t.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(c)})}else{let n=parseFloat(e.data.promo_special),a=parseFloat(e.data.total)*parseFloat(e.data.promo_perorder)/100,c=(parseFloat(e.data.total)-n-a)*parseFloat(e.data.tax_vat)/100,i=Math.round((parseFloat(e.data.total)-n-a)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on group",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(n),Amount:this.formatPipe.localeString(n)}),t.push({"No.":"Discount on parameters",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.promo_perorder+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(c)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(i)})}this._excelService.exportAsExcelFile(t,"Requests-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+t.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+t.length+" "+f.a.record,"OK")}))}exportBOExcel(){this._dataService.post("/request/detailIn",{id:this._id}).subscribe(e=>Object(o.__awaiter)(this,void 0,void 0,function*(){let t=[],n=1;for(let a of e.data.orders_list.filter(e=>2!=e.is_active)){t.push({"No.":n+". "+(null==a.sample_name_e?a.sample_name:a.sample_name_e),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(parseFloat(a.total_sub))}),t.push({"No.":"Sample code: "+(null==a.sample_code?"":a.sample_code),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),t.push({"No.":"Sample description: "+(null==a.description_e&&null==a.description?"":a.description),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),t.push({"No.":"Sample volume: "+(null==a.weight?"":a.weight),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),t.push({"No.":"Received date: "+r(new Date(e.data.received_date)).format("DD/MM/YYYY"),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),t.push({"No.":"Returned date: "+r(new Date(e.data.returned_date)).format("DD/MM/YYYY"),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""});let c=1;for(let e of a.orderdetail_list)t.push({"No.":c,Parameters:e.specification_ex_name_l,Method:e.method,"Unit Price":this.formatPipe.localeString(parseFloat(e.price)),Quantity:e.quantity,Discount:e.discount+"%",Amount:this.formatPipe.localeString(parseFloat(e.price)*parseInt(e.quantity)*(1-parseFloat(null==e.discount?0:e.discount)/100))}),c+=1;n+=1}if(t.push({"No.":"Total (before tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(e.data.total)}),null==e.data.promo_special)if(null==e.data.promo_perorder){let n=parseFloat(e.data.total)*parseFloat(e.data.tax_vat)/100,a=Math.round(parseFloat(e.data.total)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeStringEn(n)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(a)})}else{let n=parseFloat(e.data.total)*parseFloat(e.data.promo_perorder)/100,a=(parseFloat(e.data.total)-n)*parseFloat(e.data.tax_vat)/100,c=Math.round((parseFloat(e.data.total)-n)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on parameters",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.promo_perorder+"%",Amount:this.formatPipe.localeString(n)}),t.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(c)})}else if(null==e.promo_perorder){let n=parseFloat(e.data.promo_special),a=(parseFloat(e.data.total)-n)*parseFloat(e.data.tax_vat)/100,c=Math.round((parseFloat(e.data.total)-n)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on group",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(n),Amount:this.formatPipe.localeString(n)}),t.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(c)})}else{let n=parseFloat(e.data.promo_special),a=parseFloat(e.data.total)*parseFloat(e.data.promo_perorder)/100,c=(parseFloat(e.data.total)-n-a)*parseFloat(e.data.tax_vat)/100,i=Math.round((parseFloat(e.data.total)-n-a)*(1+parseFloat(e.data.tax_vat)/100));t.push({"No.":"Discount on group",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(n),Amount:this.formatPipe.localeString(n)}),t.push({"No.":"Discount on parameters",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.promo_perorder+"%",Amount:this.formatPipe.localeString(a)}),t.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:e.data.tax_vat+"%",Amount:this.formatPipe.localeString(c)}),t.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(i)})}this._excelService.exportAsExcelFile(t,"BO-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+t.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+t.length+" "+f.a.record,"OK")}))}}return e.\u0275fac=function(t){return new(t||e)(b.bc(v.a),b.bc(y.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(i.a),b.bc(Jt.a),b.bc(Ke.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-detail"]],decls:81,vars:48,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","button","routerLink","/request/list",1,"btn","btn-sm","btn-primary","mr-sm-2"],["ngbDropdown","","class","btn-group","role","group",4,"ngIf"],[1,"card-body"],[1,"col-xl-3","xl-100"],["type","number","min","0","name","number_sample",1,"form-control","form-control-sm",3,"ngModel","disabled","ngModelChange","change"],[1,"text-danger"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"btn-group","flex-wrap"],[4,"ngFor","ngForOf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[4,"ngIf"],["class","form theme-form",4,"ngIf"],["contentLanguage",""],["contentComment",""],["ngbDropdown","","role","group",1,"btn-group"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[1,"dropdown-item",3,"click"],["type","button",3,"ngClass","click"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],[1,"form","theme-form"],[1,"col"],[1,"form-group","row"],[1,"col-md-3","col-form-label",3,"for"],[1,"col-md-3"],["type","text",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change","keypress.enter"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["type","text","disabled","",1,"form-control","jdisabled",3,"id","placeholder","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","disabled","ngModelChange","change"],["name","_status",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["value","0"],["value","1"],["value","2"],[1,"col-md-3",3,"for"],["bindValue","id","bindLabel","name",3,"items","name","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["ng-option-tmp",""],["name","selectedCategory0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","placeholder","notFoundText","ngModelChange","change"],["name","selectedSpecification0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["type","number",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change"],[1,"col-md-3","col-form-label"],["name","selectedTemplate0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["href","javascript:;",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-secondary"],["colspan","16",1,"text-right"],[1,"table-primary"],[2,"width","50px"],[2,"width","100px"],[1,"fa","fa-trash"],["scope","col"],["container","body",3,"ngbTooltip"],["href","javascript:;",3,"click"],["href","javascript:;","class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],[3,"ngClass","ngbTooltip","click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[3,"ngClass"],[2,"cursor","pointer",3,"click"],["type","number","min","0",2,"width","65px",3,"name","ngModel","ngClass","disabled","ngModelChange","change"],["type","checkbox",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],["href","javascript:;",1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[3,"ngClass","ngbTooltip","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],["type","text",3,"name","ngModel","ngClass","disabled","ngModelChange"],["type","text","min","0","mask","separator.2","thousandSeparator",",",3,"name","ngModel","ngClass","disabled","ngModelChange"],["type","number","min","0",3,"name","ngModel","ngClass","disabled","ngModelChange"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"form-group"],["for","takenote"],["id","takenote","rows","3","name","takenote",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["href","javascript:;",1,"btn","btn-light",3,"click"],["href","javascript:;","class","btn btn-primary",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["href","javascript:;",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"button",7),b.dd(9),b.wc(10,"translate"),b.gc(),b.bd(11,en,17,15,"div",8),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(12,"div",9),b.hc(13,"div",1),b.hc(14,"div",10),b.hc(15,"strong"),b.dd(16),b.wc(17,"translate"),b.gc(),b.gc(),b.hc(18,"div",10),b.dd(19),b.gc(),b.hc(20,"div",10),b.hc(21,"strong"),b.dd(22),b.wc(23,"translate"),b.gc(),b.gc(),b.hc(24,"div",10),b.dd(25),b.gc(),b.hc(26,"div",10),b.hc(27,"strong"),b.dd(28),b.wc(29,"translate"),b.gc(),b.gc(),b.hc(30,"div",10),b.dd(31),b.wc(32,"date"),b.gc(),b.hc(33,"div",10),b.hc(34,"strong"),b.dd(35),b.wc(36,"translate"),b.gc(),b.gc(),b.hc(37,"div",10),b.dd(38),b.wc(39,"date"),b.gc(),b.hc(40,"div",10),b.hc(41,"strong"),b.dd(42),b.wc(43,"translate"),b.gc(),b.gc(),b.hc(44,"div",10),b.hc(45,"input",11),b.rc("ngModelChange",function(e){return t.entity.number_sample=e})("change",function(){return t._updateSampleNo()}),b.gc(),b.gc(),b.hc(46,"div",10),b.hc(47,"strong"),b.dd(48),b.wc(49,"translate"),b.gc(),b.gc(),b.hc(50,"div",10),b.dd(51),b.gc(),b.hc(52,"div",10),b.hc(53,"strong"),b.dd(54),b.wc(55,"translate"),b.gc(),b.gc(),b.hc(56,"div",10),b.hc(57,"strong"),b.dd(58),b.gc(),b.gc(),b.hc(59,"div",10),b.hc(60,"strong"),b.dd(61),b.wc(62,"translate"),b.gc(),b.gc(),b.hc(63,"div",10),b.hc(64,"strong",12),b.dd(65),b.wc(66,"number"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(67,"div",2),b.hc(68,"div",3),b.hc(69,"div",4),b.hc(70,"div",1),b.hc(71,"div",13),b.hc(72,"div",14),b.bd(73,tn,4,5,"ng-container",15),b.gc(),b.gc(),b.hc(74,"div",16),b.bd(75,an,2,1,"ng-container",17),b.gc(),b.gc(),b.gc(),b.bd(76,Fn,169,222,"form",18),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(77,On,18,9,"ng-template",null,19,b.cd),b.bd(79,qn,22,13,"ng-template",null,20,b.cd)),2&e&&(b.Nb(9),b.fd(" ",b.xc(10,22,"Go back")," "),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","print")),b.Nb(5),b.ed(b.xc(17,24,"Company")),b.Nb(3),b.fd(" ","en"==t.user.lang?t.entity.company_name_e:t.entity.company_name_l," "),b.Nb(3),b.ed(b.xc(23,26,"Contact")),b.Nb(3),b.fd(" ",t.entity.contact_name," "),b.Nb(3),b.ed(b.xc(29,28,"Received date")),b.Nb(3),b.fd(" ",b.yc(32,30,t.entity.received_date,"dd/MM/yyyy HH:mm")," "),b.Nb(4),b.ed(b.xc(36,33,"Returned date")),b.Nb(3),b.fd(" ",b.yc(39,35,t.entity.returned_date,"dd/MM/yyyy HH:mm")," "),b.Nb(4),b.ed(b.xc(43,38,"Number of sample")),b.Nb(3),b.Dc("ngModel",t.entity.number_sample)("disabled",0!=t.entity.is_active||!t._authenService.hasPermission("REQ-LIST","create")),b.Nb(3),b.ed(b.xc(49,40,"Created by")),b.Nb(3),b.fd(" ",t.entity.created_by," "),b.Nb(3),b.ed(b.xc(55,42,"Request code")),b.Nb(4),b.ed(t.entity.request_no),b.Nb(3),b.ed(b.xc(62,44,"Total")),b.Nb(4),b.fd("",null==t.entity.total||"NaN"==t.entity.total?0:b.xc(66,46,t.entity.total)," (VND)"),b.Nb(8),b.Dc("ngForOf",t._xList),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")),b.Nb(1),b.Dc("ngIf",0!=t._currentTabActivated))},directives:[i.e,a.q,c.s,c.c,c.n,c.q,a.p,w.l,w.p,w.o,a.o,c.z,c.o,c.p,c.x,c.r,c.A,C.a,C.c,w.N,c.b,Zt.a],pipes:[T.c,a.f,a.g,a.y],styles:[""]}),e})();function Gn(e,t){if(1&e){const e=b.ic();b.hc(0,"button",46),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(108);return t._openModal(n,null)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Add new request")," "))}function Vn(e,t){if(1&e){const e=b.ic();b.hc(0,"button",47),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(114);return t._exportAllRangeWithStatus(n)}),b.cc(1,"i",48),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function Bn(e,t){if(1&e){const e=b.ic();b.hc(0,"button",49),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(112);return t.openCopyModal(n,t.exportList,1)}),b.cc(1,"i",50),b.dd(2),b.wc(3,"translate"),b.wc(4,"translate"),b.gc()}2&e&&(b.Nb(2),b.gd(" ",b.xc(3,2,"Copy")," ",b.xc(4,4,"All")," "))}function Hn(e,t){if(1&e){const e=b.ic();b.hc(0,"button",51),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(116);return t.openTemplateModal(n)}),b.cc(1,"i",52),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Request template")," "))}function Qn(e,t){1&e&&b.cc(0,"img",53)}function $n(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",54),b.hc(3,"h3",55),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function Kn(e,t){if(1&e){const e=b.ic();b.hc(0,"button",68),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit,n=b.vc(2),a=b.Rc(108);return n._openModal(a,t)}),b.wc(1,"translate"),b.cc(2,"i",69),b.gc()}if(2&e){const e=b.vc(3);b.Fc("ngbTooltip","\n                          ",b.xc(1,2,"Edit"),"\n                          "),b.Dc("disabled",!e._authenService.hasPermission("REQ-LIST","update"))}}function jn(e,t){if(1&e&&(b.hc(0,"strong"),b.dd(1),b.wc(2,"number"),b.gc()),2&e){const e=b.vc().$implicit;b.Nb(1),b.ed(b.xc(2,1,e.total))}}function Xn(e,t){if(1&e&&(b.hc(0,"i"),b.dd(1),b.wc(2,"number"),b.gc()),2&e){const e=b.vc().$implicit;b.Nb(1),b.ed(b.xc(2,1,e.total_estimated))}}function Wn(e,t){1&e&&(b.hc(0,"span",70),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Pending")))}function Jn(e,t){1&e&&(b.hc(0,"span",71),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Confirmed")))}function Zn(e,t){1&e&&(b.hc(0,"span",72),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Cancel")))}function ea(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",57),b.dd(2),b.gc(),b.hc(3,"th",57),b.hc(4,"input",58),b.rc("change",function(n){b.Uc(e);const a=t.$implicit;return b.vc(2).selectItem(n,a.id)}),b.gc(),b.gc(),b.hc(5,"td"),b.hc(6,"button",59),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(2)._routeDetail(n)}),b.wc(7,"translate"),b.cc(8,"i",60),b.gc(),b.bd(9,Kn,3,4,"button",61),b.hc(10,"button",62),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc(2),c=b.Rc(112);return a.openCopyModal(c,n,0)}),b.wc(11,"translate"),b.cc(12,"i",50),b.gc(),b.gc(),b.hc(13,"td"),b.dd(14),b.gc(),b.hc(15,"td"),b.dd(16),b.gc(),b.hc(17,"td"),b.dd(18),b.wc(19,"date"),b.gc(),b.hc(20,"td"),b.hc(21,"span",63),b.dd(22),b.gc(),b.gc(),b.hc(23,"td"),b.dd(24),b.gc(),b.hc(25,"td",64),b.bd(26,jn,3,3,"strong",39),b.bd(27,Xn,3,3,"i",39),b.gc(),b.hc(28,"td"),b.dd(29),b.gc(),b.hc(30,"td"),b.dd(31),b.wc(32,"date"),b.gc(),b.hc(33,"td"),b.bd(34,Wn,3,3,"span",65),b.bd(35,Jn,3,3,"span",66),b.bd(36,Zn,3,3,"span",67),b.gc(),b.hc(37,"td"),b.dd(38),b.wc(39,"date"),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(2),b.fd(" ",n+1+a.pageSize*(a.pageIndex-1)," "),b.Nb(2),b.Fc("name","ckU",n+1,""),b.Dc("checked",a.exportList.includes(e.id)),b.Nb(2),b.Fc("ngbTooltip","\n                          ",b.xc(7,22,"View detail"),"\n                          "),b.Dc("disabled",!a._authenService.hasPermission("REQ-LIST","read")),b.Nb(3),b.Dc("ngIf",e.is_active<=2),b.Nb(1),b.Fc("ngbTooltip","\n                          ",b.xc(11,24,"Copy"),"\n                          "),b.Dc("disabled",!a._authenService.hasPermission("REQ-LIST","update")),b.Nb(4),b.fd(" ",e.request_no," "),b.Nb(2),b.ed(e.order_no),b.Nb(2),b.ed(b.yc(19,26,e.received_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.Dc("ngbTooltip",e.note),b.Nb(1),b.ed("en"==a.user.lang?e.company_name_e:e.company_name_l),b.Nb(2),b.fd(" ","en"==a.user.lang?e.receive_company_e:e.receive_company_l," "),b.Nb(2),b.Dc("ngIf",1==e.is_active),b.Nb(1),b.Dc("ngIf",1!=e.is_active),b.Nb(2),b.ed(e.contact_name),b.Nb(2),b.ed(b.yc(32,29,e.returned_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.Dc("ngIf",0==e.is_active),b.Nb(1),b.Dc("ngIf",0!=e.is_active&&2!=e.is_active),b.Nb(1),b.Dc("ngIf",2==e.is_active),b.Nb(2),b.ed(b.yc(39,32,e.timestamp,"dd/MM/yyyy HH:mm"))}}function ta(e,t){if(1&e&&(b.fc(0),b.bd(1,ea,40,35,"tr",56),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._requestslist)}}function na(e,t){if(1&e&&(b.hc(0,"small",115),b.dd(1),b.gc()),2&e){const e=b.vc(2);b.Nb(1),b.ed(e.selectedCustomerLabel)}}function aa(e,t){1&e&&(b.fc(0),b.hc(1,"a",116),b.cc(2,"img",117),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing")," "))}function ca(e,t){1&e&&(b.hc(0,"button",118),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Save & close")," "))}const ia=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function oa(e,t){if(1&e){const e=b.ic();b.hc(0,"form",73,74),b.rc("ngSubmit",function(){b.Uc(e);const t=b.vc();return t.saveChange(t.selectedCustomer)}),b.hc(2,"div",75),b.hc(3,"h4",76),b.dd(4),b.wc(5,"translate"),b.wc(6,"translate"),b.gc(),b.hc(7,"button",77),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(8,"span",78),b.dd(9,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(10,"div",79),b.hc(11,"div",80),b.hc(12,"div",81),b.hc(13,"div",82),b.hc(14,"label",83),b.dd(15),b.wc(16,"translate"),b.hc(17,"span",55),b.dd(18,"(*)"),b.gc(),b.gc(),b.hc(19,"input",84),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.number_sample=t}),b.wc(20,"translate"),b.gc(),b.hc(21,"input",85),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.id=t}),b.gc(),b.gc(),b.gc(),b.hc(22,"div",86),b.hc(23,"div",82),b.hc(24,"label",87),b.dd(25,"VAT (%) "),b.hc(26,"span",55),b.dd(27,"(*)"),b.gc(),b.gc(),b.hc(28,"input",88),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.tax_vat=t}),b.gc(),b.gc(),b.gc(),b.hc(29,"div",86),b.hc(30,"div",82),b.hc(31,"label",89),b.dd(32),b.wc(33,"translate"),b.gc(),b.hc(34,"div",90),b.hc(35,"input",91),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.is_issue_bill=t}),b.gc(),b.cc(36,"label",89),b.gc(),b.gc(),b.gc(),b.hc(37,"div",92),b.hc(38,"div",82),b.hc(39,"label",93),b.dd(40),b.wc(41,"translate"),b.gc(),b.hc(42,"input",94),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.title_promo_spec=t}),b.wc(43,"translate"),b.gc(),b.gc(),b.gc(),b.hc(44,"div",81),b.hc(45,"div",82),b.hc(46,"label",95),b.dd(47),b.wc(48,"translate"),b.gc(),b.hc(49,"input",96),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.promo_special=t}),b.wc(50,"translate"),b.gc(),b.gc(),b.gc(),b.hc(51,"div",81),b.hc(52,"div",82),b.hc(53,"label",97),b.dd(54),b.wc(55,"translate"),b.gc(),b.hc(56,"input",98),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.promo_perorder=t})("change",function(){b.Uc(e);const t=b.vc();return t._switchPercent(t.entity.promo_perorder)}),b.wc(57,"translate"),b.gc(),b.gc(),b.gc(),b.hc(58,"div",92),b.hc(59,"div",82),b.hc(60,"label",99),b.dd(61),b.wc(62,"translate"),b.hc(63,"span",55),b.dd(64,"(*)"),b.gc(),b.gc(),b.hc(65,"ng-select",100),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().selectedCustomer=t})("change",function(){return b.Uc(e),b.vc()._getInfoLabelCustomer()}),b.wc(66,"translate"),b.wc(67,"translate"),b.gc(),b.bd(68,na,2,1,"small",101),b.gc(),b.gc(),b.hc(69,"div",81),b.hc(70,"div",82),b.hc(71,"label",102),b.dd(72),b.wc(73,"translate"),b.hc(74,"span",55),b.dd(75,"(*)"),b.gc(),b.gc(),b.hc(76,"input",103),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._fdate=t})("bsValueChange",function(t){return b.Uc(e),b.vc().orgValueChange1(t)}),b.wc(77,"translate"),b.gc(),b.gc(),b.gc(),b.hc(78,"div",81),b.hc(79,"div",82),b.hc(80,"label",104),b.dd(81),b.wc(82,"translate"),b.hc(83,"span",55),b.dd(84,"(*)"),b.gc(),b.gc(),b.hc(85,"input",105),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._tdate=t})("bsValueChange",function(t){return b.Uc(e),b.vc().orgValueChange2(t)}),b.wc(86,"translate"),b.gc(),b.gc(),b.gc(),b.hc(87,"div",81),b.hc(88,"div",82),b.hc(89,"label",106),b.dd(90),b.wc(91,"translate"),b.gc(),b.hc(92,"input",107),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.valid_number=t})("change",function(){return b.Uc(e),b.vc()._calculateDays()}),b.wc(93,"translate"),b.gc(),b.gc(),b.gc(),b.hc(94,"div",81),b.hc(95,"div",82),b.hc(96,"label",108),b.dd(97),b.wc(98,"translate"),b.gc(),b.hc(99,"select",109),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.is_active=t}),b.hc(100,"option",22),b.dd(101),b.wc(102,"translate"),b.gc(),b.hc(103,"option",23),b.dd(104),b.wc(105,"translate"),b.gc(),b.hc(106,"option",24),b.dd(107),b.wc(108,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(109,"div",92),b.hc(110,"div",82),b.hc(111,"label",110),b.dd(112),b.wc(113,"translate"),b.gc(),b.hc(114,"textarea",111),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.note=t}),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(115,"div",112),b.hc(116,"button",113),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.dd(117),b.wc(118,"translate"),b.gc(),b.bd(119,aa,5,3,"ng-container",39),b.bd(120,ca,3,3,"button",114),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(4),b.fd(" ","ADD"==e._flagModal?b.xc(5,68,"Add new"):b.xc(6,70,"Update")," "),b.Nb(11),b.fd("",b.xc(16,72,"Number of sample")," "),b.Nb(4),b.Dc("ngClass","ADD"==e._flagModal?"form-control":"form-control jdisabled")("placeholder",b.xc(20,74,"Number of sample"))("ngModel",e.entity.number_sample)("disabled","ADD"!=e._flagModal),b.Nb(2),b.Dc("ngModel",e.entity.id),b.Nb(7),b.Dc("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("placeholder","VAT")("ngModel",e.entity.tax_vat)("disabled",0!=e.entity.is_active),b.Nb(4),b.ed(b.xc(33,76,"Issue bill")),b.Nb(3),b.Dc("ngModel",e.entity.is_issue_bill),b.Nb(5),b.ed(b.xc(41,78,"Promotion title")),b.Nb(2),b.Dc("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("placeholder",b.xc(43,80,"Promotion title"))("ngModel",e.entity.title_promo_spec)("disabled",0!=e.entity.is_active),b.Nb(5),b.fd("",b.xc(48,82,"Promotion per order")," (VND)"),b.Nb(2),b.Dc("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("placeholder",b.xc(50,84,"Promotion per order"))("ngModel",e.entity.promo_special)("disabled",0!=e.entity.is_active),b.Nb(5),b.fd("",b.xc(55,86,"Total promotion")," (%)"),b.Nb(2),b.Dc("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("placeholder",b.xc(57,88,"Total promotion"))("ngModel",e.entity.promo_perorder)("min",0)("max",100)("disabled",0!=e.entity.is_active),b.Nb(5),b.fd("",b.xc(62,90,"Company")," "),b.Nb(4),b.Dc("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCustomer)("placeholder",b.xc(66,92,"Please choose"))("notFoundText",b.xc(67,94,"Not found item")),b.Nb(3),b.Dc("ngIf",null!=e.selectedCustomer),b.Nb(4),b.fd("",b.xc(73,96,"Received date")," "),b.Nb(4),b.Dc("placeholder",b.xc(77,98,"Received date"))("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("ngModel",e._fdate)("bsConfig",b.Hc(120,ia))("disabled",0!=e.entity.is_active),b.Nb(5),b.fd("",b.xc(82,100,"Returned date")," "),b.Nb(4),b.Dc("placeholder",b.xc(86,102,"Returned date"))("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("ngModel",e._tdate)("bsConfig",b.Hc(121,ia))("disabled",0!=e.entity.is_active),b.Nb(5),b.ed(b.xc(91,104,"Valid date")),b.Nb(2),b.Dc("type","number")("placeholder",b.xc(93,106,"Valid date"))("ngClass",0!=e.entity.is_active?"form-control jdisabled":"form-control")("ngModel",e.entity.valid_number)("disabled",0!=e.entity.is_active)("min",0),b.Nb(5),b.ed(b.xc(98,108,"Status")),b.Nb(2),b.Dc("ngModel",e.entity.is_active),b.Nb(2),b.fd(" ",b.xc(102,110,"Pending")," "),b.Nb(3),b.fd(" ",b.xc(105,112,"Confirmed")," "),b.Nb(3),b.fd(" ",b.xc(108,114,"Cancel")," "),b.Nb(5),b.ed(b.xc(113,116,"Note")),b.Nb(2),b.Dc("ngModel",e.entity.note),b.Nb(3),b.fd(" ",b.xc(118,118,"Close")," "),b.Nb(2),b.Dc("ngIf",e.isSave),b.Nb(1),b.Dc("ngIf",!e.isSave)}}function ra(e,t){1&e&&(b.hc(0,"h4",76),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Relationship")," "))}function la(e,t){if(1&e&&(b.hc(0,"h4",76),b.dd(1),b.wc(2,"translate"),b.gc()),2&e){const e=b.vc(2);b.Nb(1),b.gd(" ",b.xc(2,2,"Contact")," - ",e._diaName," ")}}function sa(e,t){if(1&e&&(b.hc(0,"h4",76),b.dd(1),b.wc(2,"translate"),b.wc(3,"translate"),b.gc()),2&e){const e=b.vc(2);b.Nb(1),b.gd(" ",b.xc(2,2,"Relationship")," - ",b.xc(3,4,"ADDREL"==e._flagModal1?"Add new":"Update")," ")}}function da(e,t){if(1&e){const e=b.ic();b.hc(0,"div",127),b.hc(1,"pagination",128),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(3).pageIndexRel=t})("pageChanged",function(t){return b.Uc(e),b.vc(3).pageChangedRel(t)}),b.gc(),b.hc(2,"a",31),b.dd(3),b.wc(4,"translate"),b.wc(5,"translate"),b.wc(6,"translate"),b.wc(7,"translate"),b.gc(),b.gc()}if(2&e){const e=b.vc(3);b.Nb(1),b.Dc("boundaryLinks",!0)("totalItems",e.totalRowRel)("ngModel",e.pageIndexRel)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSizeRel),b.Nb(2),b.id("",b.xc(4,12,"Total of records"),": ",e.totalRowRel," - ",b.xc(5,14,"Page")," ",e.pageIndexRel," ",b.xc(6,16,"of")," ",e.totalPageRel," ",b.xc(7,18,"page"),"")}}function ha(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",129),b.hc(3,"h3",55),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function ga(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"td",130),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(4).editLinkPopUp(n)}),b.dd(2),b.gc(),b.hc(3,"td"),b.dd(4),b.gc(),b.hc(5,"td"),b.dd(6),b.gc(),b.hc(7,"td"),b.dd(8),b.gc(),b.hc(9,"td"),b.dd(10),b.gc(),b.hc(11,"td"),b.dd(12),b.gc(),b.hc(13,"td"),b.dd(14),b.gc(),b.hc(15,"td"),b.hc(16,"button",131),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(4).deleteItemLinkContact(n)}),b.wc(17,"translate"),b.cc(18,"i",132),b.gc(),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=b.vc(4);b.Nb(2),b.fd(" ",e.code_link," "),b.Nb(2),b.ed(e.company_name_l),b.Nb(2),b.ed(e.sender_name),b.Nb(2),b.fd(" ",e.receive_company_l," "),b.Nb(2),b.fd(" ",e.receive_name," "),b.Nb(2),b.fd(" ",e.bill_company_l," "),b.Nb(2),b.fd(" ",e.bill_name," "),b.Nb(2),b.Ec("ngbTooltip",b.xc(17,9,"Delete")),b.Dc("disabled",!n._authenService.hasPermission("CUSTOMER","delete"))}}function ua(e,t){if(1&e&&(b.fc(0),b.bd(1,ga,19,11,"tr",56),b.ec()),2&e){const e=b.vc(3);b.Nb(1),b.Dc("ngForOf",e._relationslist)}}function ma(e,t){if(1&e){const e=b.ic();b.hc(0,"div",127),b.hc(1,"pagination",128),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(3).pageIndexRel=t})("pageChanged",function(t){return b.Uc(e),b.vc(3).pageChangedRel(t)}),b.gc(),b.hc(2,"a",31),b.dd(3),b.wc(4,"translate"),b.wc(5,"translate"),b.wc(6,"translate"),b.wc(7,"translate"),b.gc(),b.gc()}if(2&e){const e=b.vc(3);b.Nb(1),b.Dc("boundaryLinks",!0)("totalItems",e.totalRowRel)("ngModel",e.pageIndexRel)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSizeRel),b.Nb(2),b.id("",b.xc(4,12,"Total of records"),": ",e.totalRowRel," - ",b.xc(5,14,"Page")," ",e.pageIndexRel," ",b.xc(6,16,"of")," ",e.totalPageRel," ",b.xc(7,18,"page"),"")}}function _a(e,t){if(1&e){const e=b.ic();b.hc(0,"div",80),b.hc(1,"div",122),b.hc(2,"input",123),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2)._keywordRel=t})("change",function(){return b.Uc(e),b.vc(2).loadRelationship()})("keyup.enter",function(){return b.Uc(e),b.vc(2).loadRelationship()}),b.wc(3,"translate"),b.gc(),b.gc(),b.hc(4,"div",124),b.hc(5,"button",125),b.rc("click",function(){return b.Uc(e),b.vc(2).linkContactPopUp1()}),b.dd(6),b.wc(7,"translate"),b.gc(),b.gc(),b.hc(8,"div",92),b.cc(9,"br"),b.bd(10,da,8,20,"div",126),b.hc(11,"div",32),b.hc(12,"table",33),b.hc(13,"thead",34),b.hc(14,"tr"),b.hc(15,"th",36),b.dd(16),b.wc(17,"translate"),b.gc(),b.hc(18,"th",36),b.dd(19),b.wc(20,"translate"),b.gc(),b.hc(21,"th",36),b.dd(22),b.wc(23,"translate"),b.gc(),b.hc(24,"th",36),b.dd(25),b.wc(26,"translate"),b.gc(),b.hc(27,"th",36),b.dd(28),b.wc(29,"translate"),b.gc(),b.hc(30,"th",36),b.dd(31),b.wc(32,"translate"),b.gc(),b.hc(33,"th",36),b.dd(34),b.wc(35,"translate"),b.gc(),b.hc(36,"th",36),b.dd(37),b.wc(38,"translate"),b.gc(),b.gc(),b.gc(),b.hc(39,"tbody"),b.bd(40,ha,6,3,"ng-container",39),b.bd(41,ua,2,1,"ng-container",39),b.gc(),b.gc(),b.gc(),b.bd(42,ma,8,20,"div",126),b.gc(),b.gc()}if(2&e){const e=b.vc(2);b.Nb(2),b.Dc("placeholder",b.xc(3,15,"Search"))("ngModel",e._keywordRel),b.Nb(4),b.fd(" ",b.xc(7,17,"Add new")," "),b.Nb(4),b.Dc("ngIf",e._relationslist.length>0),b.Nb(6),b.fd(" ",b.xc(17,19,"Relevant code")," "),b.Nb(3),b.fd(" ",b.xc(20,21,"Company")," "),b.Nb(3),b.fd(" ",b.xc(23,23,"Sender")," "),b.Nb(3),b.fd(" ",b.xc(26,25,"Received company")," "),b.Nb(3),b.fd(" ",b.xc(29,27,"Receiver")," "),b.Nb(3),b.fd(" ",b.xc(32,29,"Bill company")," "),b.Nb(3),b.fd(" ",b.xc(35,31,"Bill receiver")," "),b.Nb(3),b.ed(b.xc(38,33,"Actions")),b.Nb(3),b.Dc("ngIf",0==e._relationslist.length),b.Nb(1),b.Dc("ngIf",e._relationslist.length>0),b.Nb(1),b.Dc("ngIf",e._relationslist.length>0)}}function pa(e,t){1&e&&(b.fc(0),b.hc(1,"a",116),b.cc(2,"img",117),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing"),""))}function fa(e,t){if(1&e&&(b.hc(0,"button",152),b.dd(1),b.wc(2,"translate"),b.gc()),2&e){b.vc();const e=b.Rc(2);b.Dc("disabled",!e.valid),b.Nb(1),b.fd(" ",b.xc(2,2,"Save")," ")}}function ba(e,t){if(1&e){const e=b.ic();b.hc(0,"button",153),b.rc("click",function(){return b.Uc(e),b.vc(3)._clearContact()}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Add new")," "))}function va(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"td"),b.dd(2),b.gc(),b.hc(3,"td"),b.dd(4),b.gc(),b.hc(5,"td"),b.dd(6),b.gc(),b.hc(7,"td"),b.dd(8),b.gc(),b.hc(9,"td"),b.dd(10),b.gc(),b.hc(11,"td"),b.hc(12,"button",154),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc(3);return a.loadDetail1(n.id,a.entityContact.company_id)}),b.cc(13,"i",69),b.gc(),b.hc(14,"button",155),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(3).deleteItem0(n)}),b.cc(15,"i",132),b.gc(),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=b.vc(3);b.Nb(2),b.fd(" ",e.contact_code," "),b.Nb(2),b.fd(" ",e.contact_name," "),b.Nb(2),b.fd(" ",e.phone," "),b.Nb(2),b.ed(e.email),b.Nb(2),b.ed(e.note_l),b.Nb(2),b.Dc("disabled",!n._authenService.hasPermission("CUSTOMER","update")),b.Nb(2),b.Dc("disabled",!n._authenService.hasPermission("CUSTOMER","delete"))}}function ya(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"form",73,133),b.rc("ngSubmit",function(){return b.Uc(e),b.vc(2).saveChange0()}),b.hc(3,"div",80),b.hc(4,"div",81),b.hc(5,"div",82),b.hc(6,"label",134),b.dd(7),b.wc(8,"translate"),b.hc(9,"span",55),b.dd(10,"(*)"),b.gc(),b.gc(),b.hc(11,"input",135),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.contact_name=t}),b.wc(12,"translate"),b.gc(),b.gc(),b.gc(),b.hc(13,"div",81),b.hc(14,"div",82),b.hc(15,"label",136),b.dd(16),b.wc(17,"translate"),b.gc(),b.hc(18,"input",137),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.contact_code=t}),b.wc(19,"translate"),b.gc(),b.gc(),b.gc(),b.hc(20,"div",81),b.hc(21,"div",82),b.hc(22,"label",138),b.dd(23),b.wc(24,"translate"),b.hc(25,"span",55),b.dd(26,"(*)"),b.gc(),b.gc(),b.hc(27,"input",139),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.phone=t}),b.wc(28,"translate"),b.gc(),b.gc(),b.gc(),b.hc(29,"div",81),b.hc(30,"div",82),b.hc(31,"label",140),b.dd(32,"Email"),b.gc(),b.hc(33,"input",141),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.email=t}),b.gc(),b.gc(),b.gc(),b.hc(34,"div",81),b.hc(35,"div",82),b.hc(36,"label",142),b.dd(37),b.wc(38,"translate"),b.wc(39,"translate"),b.gc(),b.hc(40,"textarea",143),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.note_l=t}),b.wc(41,"translate"),b.gc(),b.gc(),b.gc(),b.hc(42,"div",81),b.hc(43,"div",82),b.hc(44,"label",144),b.dd(45),b.wc(46,"translate"),b.wc(47,"translate"),b.gc(),b.hc(48,"textarea",145),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityContact.note_e=t}),b.wc(49,"translate"),b.gc(),b.gc(),b.gc(),b.hc(50,"div",81),b.hc(51,"div",82),b.hc(52,"label",108),b.dd(53),b.wc(54,"translate"),b.gc(),b.hc(55,"div",90),b.hc(56,"input",146),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2)._status=t}),b.gc(),b.cc(57,"label",108),b.gc(),b.gc(),b.gc(),b.hc(58,"div",81),b.hc(59,"div",82),b.bd(60,pa,5,3,"ng-container",39),b.bd(61,fa,3,4,"button",147),b.bd(62,ba,3,3,"button",148),b.gc(),b.gc(),b.hc(63,"div",92),b.hc(64,"div",82),b.hc(65,"input",149),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2)._keyword1=t})("change",function(){b.Uc(e);const t=b.vc(2);return t.loadDataContact(t.entityContact.company_id)})("keyup.enter",function(){b.Uc(e);const t=b.vc(2);return t.loadDataContact(t.entityContact.company_id)}),b.wc(66,"translate"),b.gc(),b.gc(),b.gc(),b.hc(67,"div",92),b.hc(68,"div",127),b.hc(69,"pagination",150),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).pageIndex1=t})("pageChanged",function(t){return b.Uc(e),b.vc(2).pageChanged1(t)}),b.gc(),b.hc(70,"a",31),b.dd(71),b.wc(72,"translate"),b.wc(73,"translate"),b.wc(74,"translate"),b.wc(75,"translate"),b.gc(),b.gc(),b.hc(76,"div",151),b.hc(77,"table",33),b.hc(78,"thead",34),b.hc(79,"tr"),b.hc(80,"th",36),b.dd(81),b.wc(82,"translate"),b.gc(),b.hc(83,"th",36),b.dd(84),b.wc(85,"translate"),b.gc(),b.hc(86,"th",36),b.dd(87),b.wc(88,"translate"),b.gc(),b.hc(89,"th",36),b.dd(90,"Email"),b.gc(),b.hc(91,"th",36),b.dd(92),b.wc(93,"translate"),b.gc(),b.hc(94,"th",36),b.dd(95),b.wc(96,"translate"),b.gc(),b.gc(),b.gc(),b.hc(97,"tbody"),b.bd(98,va,16,7,"tr",56),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.ec()}if(2&e){const e=b.vc(2);b.Nb(7),b.fd("",b.xc(8,45,"Customer name")," "),b.Nb(4),b.Dc("placeholder",b.xc(12,47,"Customer name"))("ngModel",e.entityContact.contact_name),b.Nb(5),b.ed(b.xc(17,49,"Customer code")),b.Nb(2),b.Dc("placeholder",b.xc(19,51,"Customer code"))("ngModel",e.entityContact.contact_code)("disabled",!0),b.Nb(5),b.fd("",b.xc(24,53,"Phone")," "),b.Nb(4),b.Dc("placeholder",b.xc(28,55,"Phone"))("ngModel",e.entityContact.phone),b.Nb(6),b.Dc("placeholder","abc@company.com")("ngModel",e.entityContact.email),b.Nb(4),b.gd("",b.xc(38,57,"Note")," (",b.xc(39,59,"Vietnamese"),")"),b.Nb(3),b.Ec("placeholder",b.xc(41,61,"Note")),b.Dc("ngModel",e.entityContact.note_l),b.Nb(5),b.gd("",b.xc(46,63,"Note")," (",b.xc(47,65,"English"),")"),b.Nb(3),b.Ec("placeholder",b.xc(49,67,"Note")),b.Dc("ngModel",e.entityContact.note_e),b.Nb(5),b.ed(b.xc(54,69,"Status")),b.Nb(3),b.Dc("ngModel",e._status),b.Nb(4),b.Dc("ngIf",e.isSave1),b.Nb(1),b.Dc("ngIf",!e.isSave1),b.Nb(1),b.Dc("ngIf","UPDATE"==e._flagModal1),b.Nb(3),b.Ec("placeholder",b.xc(66,71,"Search")),b.Dc("ngModel",e._keyword1),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",e.totalRow1)("ngModel",e.pageIndex1)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize1),b.Nb(2),b.id("",b.xc(72,73,"Total of records"),": ",e.totalRow1," - ",b.xc(73,75,"Page")," ",e.pageIndex1," ",b.xc(74,77,"of")," ",e.totalPage1," ",b.xc(75,79,"page"),""),b.Nb(10),b.fd(" ",b.xc(82,81,"Customer code")," "),b.Nb(3),b.fd(" ",b.xc(85,83,"Customer name")," "),b.Nb(3),b.fd(" ",b.xc(88,85,"Phone")," "),b.Nb(5),b.fd(" ",b.xc(93,87,"Note")," "),b.Nb(3),b.fd(" ",b.xc(96,89,"Actions")," "),b.Nb(3),b.Dc("ngForOf",e._contacts)}}function xa(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"form",null,156),b.hc(3,"div",80),b.hc(4,"div",92),b.hc(5,"div",82),b.hc(6,"label",157),b.dd(7),b.wc(8,"translate"),b.hc(9,"span",55),b.dd(10,"(*)"),b.gc(),b.gc(),b.hc(11,"textarea",158),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entityLinkC.code_link=t}),b.wc(12,"translate"),b.gc(),b.gc(),b.gc(),b.hc(13,"div",81),b.hc(14,"div",82),b.hc(15,"label",159),b.dd(16),b.wc(17,"translate"),b.hc(18,"span",55),b.dd(19,"(*)"),b.gc(),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"ng-select",160),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedCompany=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("cty",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(23,"translate"),b.wc(24,"translate"),b.gc(),b.gc(),b.gc(),b.hc(25,"div",81),b.hc(26,"div",82),b.hc(27,"label",159),b.dd(28),b.wc(29,"translate"),b.hc(30,"span",55),b.dd(31,"(*)"),b.gc(),b.dd(32),b.wc(33,"translate"),b.gc(),b.hc(34,"ng-select",161),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedSender=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("lh",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(35,"translate"),b.wc(36,"translate"),b.gc(),b.gc(),b.gc(),b.hc(37,"div",81),b.hc(38,"div",82),b.hc(39,"label"),b.dd(40),b.wc(41,"translate"),b.hc(42,"span",55),b.dd(43,"(*)"),b.gc(),b.dd(44),b.wc(45,"translate"),b.gc(),b.hc(46,"ng-select",162),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedCompanyKQ=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("kq",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(47,"translate"),b.wc(48,"translate"),b.gc(),b.gc(),b.gc(),b.hc(49,"div",81),b.hc(50,"div",82),b.hc(51,"label"),b.dd(52),b.wc(53,"translate"),b.hc(54,"span",55),b.dd(55,"(*)"),b.gc(),b.dd(56),b.wc(57,"translate"),b.gc(),b.hc(58,"ng-select",163),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedSenderKQ=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("lhkq",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(59,"translate"),b.wc(60,"translate"),b.gc(),b.gc(),b.gc(),b.hc(61,"div",81),b.hc(62,"div",82),b.hc(63,"label"),b.dd(64),b.wc(65,"translate"),b.hc(66,"span",55),b.dd(67,"(*)"),b.gc(),b.dd(68),b.wc(69,"translate"),b.gc(),b.hc(70,"ng-select",164),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedCompanyBill=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("bill",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(71,"translate"),b.wc(72,"translate"),b.gc(),b.gc(),b.gc(),b.hc(73,"div",81),b.hc(74,"div",82),b.hc(75,"label"),b.dd(76),b.wc(77,"translate"),b.hc(78,"span",55),b.dd(79,"(*)"),b.gc(),b.dd(80),b.wc(81,"translate"),b.gc(),b.hc(82,"ng-select",165),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedSenderBill=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._changeCompanyInfo("lhbill",t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.wc(83,"translate"),b.wc(84,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.ec()}if(2&e){const e=b.vc(2);b.Nb(7),b.fd("",b.xc(8,58,"Code")," "),b.Nb(4),b.Dc("placeholder",b.xc(12,60,"Code"))("ngModel",e.entityLinkC.code_link)("disabled",!0),b.Nb(5),b.fd("",b.xc(17,62,"Customer")," "),b.Nb(4),b.fd(" - ",b.xc(21,64,"Information"),""),b.Nb(2),b.Dc("items",e._getlistcompany)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCompany)("placeholder",b.xc(23,66,"Please choose"))("notFoundText",b.xc(24,68,"Not found item")),b.Nb(6),b.fd("",b.xc(29,70,"Contact")," "),b.Nb(4),b.fd(" - ",b.xc(33,72,"Sender"),""),b.Nb(2),b.Dc("items",e._getlistsender)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSender)("placeholder",b.xc(35,74,"Please choose"))("notFoundText",b.xc(36,76,"Not found item")),b.Nb(6),b.fd("",b.xc(41,78,"Customer")," "),b.Nb(4),b.fd(" - ",b.xc(45,80,"Received company"),""),b.Nb(2),b.Dc("items",e._getlistcompanyKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCompanyKQ)("placeholder",b.xc(47,82,"Please choose"))("notFoundText",b.xc(48,84,"Not found item")),b.Nb(6),b.fd("",b.xc(53,86,"Contact")," "),b.Nb(4),b.fd(" - ",b.xc(57,88,"Received company"),""),b.Nb(2),b.Dc("items",e._getlistsenderKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSenderKQ)("placeholder",b.xc(59,90,"Please choose"))("notFoundText",b.xc(60,92,"Not found item")),b.Nb(6),b.fd("",b.xc(65,94,"Customer")," "),b.Nb(4),b.fd(" - ",b.xc(69,96,"Bill company"),""),b.Nb(2),b.Dc("items",e._getlistcompanyBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCompanyBill)("placeholder",b.xc(71,98,"Please choose"))("notFoundText",b.xc(72,100,"Not found item")),b.Nb(6),b.fd("",b.xc(77,102,"Contact")," "),b.Nb(4),b.fd(" - ",b.xc(81,104,"Bill company"),""),b.Nb(2),b.Dc("items",e._getlistsenderBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSenderBill)("placeholder",b.xc(83,106,"Please choose"))("notFoundText",b.xc(84,108,"Not found item"))}}function Sa(e,t){1&e&&(b.fc(0),b.hc(1,"a",116),b.cc(2,"img",117),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing"),""))}function Na(e,t){if(1&e){const e=b.ic();b.hc(0,"button",168),b.rc("click",function(){b.Uc(e);const t=b.vc(3);return t.saveChangeLink(t.selectedCompany,t.selectedSender,t.selectedCompanyKQ,t.selectedSenderKQ,t.selectedCompanyBill,t.selectedSenderBill)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Save & close")," "))}function wa(e,t){if(1&e){const e=b.ic();b.hc(0,"div",112),b.hc(1,"button",166),b.rc("click",function(){return b.Uc(e),b.vc(2).closeModal()}),b.dd(2),b.wc(3,"translate"),b.gc(),b.hc(4,"button",153),b.rc("click",function(){return b.Uc(e),b.vc(2)._switchLinkList()}),b.dd(5),b.wc(6,"translate"),b.gc(),b.bd(7,Sa,5,3,"ng-container",39),b.bd(8,Na,3,3,"button",167),b.gc()}if(2&e){const e=b.vc(2);b.Nb(2),b.fd(" ",b.xc(3,4,"Close")," "),b.Nb(3),b.fd(" ",b.xc(6,6,"Relationship")," "),b.Nb(2),b.Dc("ngIf",e.isSave),b.Nb(1),b.Dc("ngIf",!e.isSave)}}function Da(e,t){if(1&e){const e=b.ic();b.hc(0,"div",75),b.bd(1,ra,3,3,"h4",119),b.bd(2,la,3,4,"h4",119),b.bd(3,sa,4,6,"h4",119),b.hc(4,"button",77),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(5,"span",78),b.dd(6,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(7,"div",79),b.bd(8,_a,43,35,"div",120),b.bd(9,ya,99,91,"ng-container",39),b.bd(10,xa,85,110,"ng-container",39),b.gc(),b.bd(11,wa,9,8,"div",121)}if(2&e){const e=b.vc();b.Nb(1),b.Dc("ngIf","LIST"==e._flagModal1),b.Nb(1),b.Dc("ngIf","ADD"==e._flagModal1||"UPDATE"==e._flagModal1),b.Nb(1),b.Dc("ngIf","ADDREL"==e._flagModal1||"UPDATEREL"==e._flagModal1),b.Nb(5),b.Dc("ngIf","LIST"==e._flagModal1),b.Nb(1),b.Dc("ngIf","ADD"==e._flagModal1||"UPDATE"==e._flagModal1),b.Nb(1),b.Dc("ngIf","ADDREL"==e._flagModal1||"UPDATEREL"==e._flagModal1),b.Nb(1),b.Dc("ngIf","ADDREL"==e._flagModal1||"UPDATEREL"==e._flagModal1)}}function Ma(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"ng-select",171),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedCustomer1=t})("change",function(){b.Uc(e);const t=b.vc(2);return t.exportList.length>0?t._copyAll(t.exportList,t.selectedCustomer1):t._copyRequest(t.selectedCustomer1)}),b.wc(2,"translate"),b.wc(3,"translate"),b.gc(),b.ec()}if(2&e){const e=b.vc(2);b.Nb(1),b.Dc("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCustomer1)("placeholder",b.xc(2,7,"Please choose"))("notFoundText",b.xc(3,9,"Not found item"))}}function Ca(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"ng-select",171),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectedCustomer1=t})("change",function(){b.Uc(e);const t=b.vc(2);return t._copyTemplate(t._idTemplate,t.selectedCustomer1)}),b.wc(2,"translate"),b.wc(3,"translate"),b.gc(),b.ec()}if(2&e){const e=b.vc(2);b.Nb(1),b.Dc("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCustomer1)("placeholder",b.xc(2,7,"Please choose"))("notFoundText",b.xc(3,9,"Not found item"))}}function Ta(e,t){if(1&e&&(b.hc(0,"form",169),b.hc(1,"div",75),b.hc(2,"h4",76),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",77),b.rc("click",function(){return t.$implicit.dismiss("Cross click")}),b.hc(6,"span",78),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",79),b.hc(9,"div",80),b.hc(10,"div",92),b.hc(11,"div",82),b.hc(12,"label",170),b.dd(13),b.wc(14,"translate"),b.gc(),b.bd(15,Ma,4,11,"ng-container",39),b.bd(16,Ca,4,11,"ng-container",39),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()),2&e){const e=b.vc();b.Nb(3),b.gd("",b.xc(4,5,"Copy")," - ",e._titleCopy,""),b.Nb(10),b.ed(b.xc(14,7,"Company")),b.Nb(2),b.Dc("ngIf",!e._flagChooseTemplate),b.Nb(1),b.Dc("ngIf",e._flagChooseTemplate)}}function Ia(e,t){if(1&e){const e=b.ic();b.hc(0,"a",179),b.rc("click",function(){return b.Uc(e),b.vc(2)._exportAllRangeWithStatusA()}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Submit")))}function ka(e,t){1&e&&(b.hc(0,"a",180),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.fd("",b.xc(2,1,"Loading"),"..."))}const Pa=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};function Ra(e,t){if(1&e){const e=b.ic();b.hc(0,"form",169),b.hc(1,"div",75),b.hc(2,"h4",76),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",77),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",78),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",79),b.hc(9,"div",80),b.hc(10,"div",81),b.hc(11,"label",172),b.dd(12),b.wc(13,"translate"),b.gc(),b.hc(14,"input",173),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._fDate=t})("bsValueChange",function(t){return b.Uc(e),b.vc().changeFromDate(t)})("keypress",function(t){return b.Uc(e),b.vc().changeFromDate(t)}),b.gc(),b.gc(),b.hc(15,"div",81),b.hc(16,"label",174),b.dd(17),b.wc(18,"translate"),b.gc(),b.hc(19,"input",175),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._tDate=t})("bsValueChange",function(t){return b.Uc(e),b.vc().changeToDate(t)})("keypress",function(t){return b.Uc(e),b.vc().changeToDate(t)}),b.gc(),b.gc(),b.hc(20,"div",176),b.hc(21,"div",82),b.cc(22,"br"),b.bd(23,Ia,3,3,"a",177),b.bd(24,ka,3,3,"a",178),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.ed(b.xc(4,9,"Export")),b.Nb(9),b.ed(b.xc(13,11,"From date")),b.Nb(2),b.Dc("ngModel",e._fDate)("bsConfig",b.Hc(15,Pa)),b.Nb(3),b.ed(b.xc(18,13,"To date")),b.Nb(2),b.Dc("ngModel",e._tDate)("bsConfig",b.Hc(16,Pa)),b.Nb(4),b.Dc("ngIf",!e.isExportLoading),b.Nb(1),b.Dc("ngIf",e.isExportLoading)}}function Ea(e,t){1&e&&b.cc(0,"img",189)}function Aa(e,t){if(1&e){const e=b.ic();b.hc(0,"div",26),b.hc(1,"div",27),b.hc(2,"div",28),b.hc(3,"pagination",29),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).pageIndex1=t})("pageChanged",function(t){return b.Uc(e),b.vc(2).pageChangedTemplate(t)}),b.gc(),b.gc(),b.hc(4,"div",30),b.hc(5,"a",31),b.dd(6),b.wc(7,"translate"),b.wc(8,"translate"),b.wc(9,"translate"),b.wc(10,"translate"),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc(2);b.Nb(3),b.Dc("boundaryLinks",!0)("totalItems",e.totalRow1)("ngModel",e.pageIndex1)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize1),b.Nb(3),b.id("",b.xc(7,12,"Total of records"),": ",e.totalRow1," - ",b.xc(8,14,"Page")," ",e.pageIndex1," ",b.xc(9,16,"of")," ",e.totalPage1," ",b.xc(10,18,"page"),"")}}function Ua(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",190),b.hc(3,"h4",55),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function Fa(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"td"),b.dd(2),b.gc(),b.hc(3,"td"),b.dd(4),b.gc(),b.hc(5,"td"),b.dd(6),b.gc(),b.hc(7,"td"),b.dd(8),b.gc(),b.hc(9,"td"),b.dd(10),b.wc(11,"number"),b.gc(),b.hc(12,"td"),b.dd(13),b.wc(14,"date"),b.gc(),b.hc(15,"td"),b.hc(16,"button",191),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc(3),c=b.Rc(118);return a.popupTemplateModal(c,n)}),b.wc(17,"translate"),b.cc(18,"i",192),b.gc(),b.hc(19,"button",193),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc(3),c=b.Rc(112);return a._popupCopyTemplate(c,n)}),b.wc(20,"translate"),b.cc(21,"i",50),b.gc(),b.hc(22,"button",194),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(3).deleteItemTemplate(n)}),b.wc(23,"translate"),b.cc(24,"i",132),b.gc(),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(3);b.Nb(2),b.ed(n+1+a.pageSize1*(a.pageIndex1-1)),b.Nb(2),b.ed(e.name),b.Nb(2),b.ed(e.number_sample),b.Nb(2),b.ed(e.total_parameters),b.Nb(2),b.ed(b.xc(11,9,e.total)),b.Nb(3),b.ed(b.yc(14,11,e.timestamp,"dd/MM/YYYY HH:mm:ss a")),b.Nb(3),b.Dc("ngbTooltip",b.xc(17,14,"Edit")),b.Nb(3),b.Dc("ngbTooltip",b.xc(20,16,"Copy")),b.Nb(3),b.Dc("ngbTooltip",b.xc(23,18,"Delete"))}}function Oa(e,t){if(1&e&&(b.fc(0),b.bd(1,Fa,25,20,"tr",56),b.ec()),2&e){const e=b.vc(2);b.Nb(1),b.Dc("ngForOf",e._templatelist)}}function Ya(e,t){if(1&e){const e=b.ic();b.hc(0,"form",169),b.hc(1,"div",75),b.hc(2,"h4",76),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"button",77),b.rc("click",function(){return b.Uc(e),b.vc().closeModal()}),b.hc(6,"span",78),b.dd(7,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(8,"div",79),b.hc(9,"div",80),b.hc(10,"div",181),b.hc(11,"div",182),b.hc(12,"input",183),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc()._keyword1=t})("keyup.enter",function(){return b.Uc(e),b.vc().loadTemplateList()})("change",function(){return b.Uc(e),b.vc().loadTemplateList()}),b.wc(13,"translate"),b.gc(),b.hc(14,"button",184),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(118);return t.popupTemplateModal(n,null)}),b.dd(15),b.wc(16,"translate"),b.gc(),b.bd(17,Ea,1,0,"img",185),b.gc(),b.gc(),b.hc(18,"div",86),b.hc(19,"div",82),b.hc(20,"div",14),b.hc(21,"select",186),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().pageSize1=t})("change",function(t){return b.Uc(e),b.vc()._pageSizeChangeTemplate(t)}),b.hc(22,"option",16),b.dd(23,"#10"),b.gc(),b.hc(24,"option",17),b.dd(25,"#25"),b.gc(),b.hc(26,"option",18),b.dd(27,"#50"),b.gc(),b.hc(28,"option",19),b.dd(29,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(30,"div",92),b.hc(31,"div",32),b.bd(32,Aa,11,20,"div",187),b.hc(33,"table",33),b.hc(34,"thead",34),b.hc(35,"tr"),b.hc(36,"th",188),b.dd(37,"#"),b.gc(),b.hc(38,"th",36),b.dd(39),b.wc(40,"translate"),b.gc(),b.hc(41,"th",36),b.dd(42),b.wc(43,"translate"),b.gc(),b.hc(44,"th",36),b.dd(45),b.wc(46,"translate"),b.gc(),b.hc(47,"th",36),b.dd(48),b.wc(49,"translate"),b.gc(),b.hc(50,"th",36),b.dd(51),b.wc(52,"translate"),b.gc(),b.hc(53,"th",36),b.dd(54),b.wc(55,"translate"),b.gc(),b.gc(),b.gc(),b.hc(56,"tbody"),b.bd(57,Ua,6,3,"ng-container",39),b.bd(58,Oa,2,1,"ng-container",39),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.ed(b.xc(4,15,"Request template")),b.Nb(9),b.Fc("placeholder","",b.xc(13,17,"Search"),"..."),b.Dc("ngModel",e._keyword1),b.Nb(3),b.fd(" ",b.xc(16,19,"Add new")," "),b.Nb(2),b.Dc("ngIf",e.isLoadingTemplate),b.Nb(4),b.Dc("ngModel",e.pageSize1),b.Nb(11),b.Dc("ngIf",e._templatelist.length>0),b.Nb(7),b.fd(" ",b.xc(40,21,"Name")," "),b.Nb(3),b.fd(" ",b.xc(43,23,"Total of sample")," "),b.Nb(3),b.fd(" ",b.xc(46,25,"Total of parameter")," "),b.Nb(3),b.fd(" ",b.xc(49,27,"Total")," "),b.Nb(3),b.fd(" ",b.xc(52,29,"Timestamp")," "),b.Nb(3),b.ed(b.xc(55,31,"Actions")),b.Nb(3),b.Dc("ngIf",0==e._templatelist.length),b.Nb(1),b.Dc("ngIf",e._templatelist.length>0)}}function La(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"button",218),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(2)._chooseTab(n)}),b.dd(2),b.wc(3,"translate"),b.gc(),b.ec()}if(2&e){const e=t.$implicit,n=b.vc(2);b.Nb(1),b.Dc("ngClass",n._currentTabActivated==e.id?"btn btn-sm btn-warning":"btn btn-sm btn-secondary"),b.Nb(1),b.gd(" ",b.xc(3,3,"Sample")," ",e.id," ")}}function qa(e,t){if(1&e){const e=b.ic();b.hc(0,"a",219),b.rc("click",function(){b.Uc(e);const t=b.vc(2);return t._removeTab(t._currentTabActivated)}),b.dd(1,"X"),b.gc()}}function za(e,t){if(1&e&&(b.hc(0,"div",220),b.dd(1),b.wc(2,"slice"),b.gc()),2&e){const e=t.item;b.Dc("ngbTooltip",e.name.length>25?e.name:""),b.Nb(1),b.fd(" ",e.name.length>25?b.zc(2,2,e.name,0,20)+"..":e.name," ")}}function Ga(e,t){if(1&e&&(b.hc(0,"div",220),b.dd(1),b.wc(2,"slice"),b.gc()),2&e){const e=t.item;b.Dc("ngbTooltip",e.name.length>25?e.name:""),b.Nb(1),b.fd(" ",e.name.length>25?b.zc(2,2,e.name,0,20)+"..":e.name," ")}}function Va(e,t){if(1&e&&(b.hc(0,"div",220),b.dd(1),b.wc(2,"slice"),b.gc()),2&e){const e=t.item;b.Dc("ngbTooltip",e.name.length>25?e.name:""),b.Nb(1),b.fd(" ",e.name.length>25?b.zc(2,2,e.name,0,20)+"..":e.name," ")}}function Ba(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"td",216),b.dd(2),b.gc(),b.hc(3,"td",216),b.hc(4,"a",221),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(2)._removeItemTemplate(n)}),b.cc(5,"i",132),b.gc(),b.gc(),b.hc(6,"td",217),b.hc(7,"span",222),b.dd(8),b.gc(),b.gc(),b.hc(9,"td",217),b.dd(10),b.gc(),b.hc(11,"td",217),b.dd(12),b.gc(),b.hc(13,"td",217),b.dd(14),b.gc(),b.hc(15,"td",216),b.hc(16,"input",223),b.rc("ngModelChange",function(e){return t.$implicit.quantity=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)}),b.gc(),b.gc(),b.hc(17,"td",217),b.dd(18),b.gc(),b.hc(19,"td",216),b.hc(20,"input",224),b.rc("ngModelChange",function(e){return t.$implicit.price=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)}),b.gc(),b.gc(),b.hc(21,"td",216),b.hc(22,"input",225),b.rc("ngModelChange",function(e){return t.$implicit.discount=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)}),b.gc(),b.gc(),b.hc(23,"td",216),b.dd(24),b.wc(25,"number"),b.gc(),b.hc(26,"td",216),b.hc(27,"input",226),b.rc("ngModelChange",function(e){return t.$implicit.priority=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)}),b.gc(),b.gc(),b.hc(28,"td",216),b.hc(29,"input",226),b.rc("ngModelChange",function(e){return t.$implicit.tat=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)}),b.gc(),b.gc(),b.hc(30,"td",216),b.hc(31,"input",226),b.rc("ngModelChange",function(e){return t.$implicit.order_no=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)})("keyup.enter",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)}),b.gc(),b.gc(),b.hc(32,"td",216),b.hc(33,"input",227),b.rc("ngModelChange",function(e){return t.$implicit.hide=e})("change",function(){b.Uc(e);const t=b.vc(2);return t._updateItemTemplate(t._orderdetailists)}),b.gc(),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(2),b.ed(n+1),b.Nb(5),b.Dc("ngClass",null==e.code_father?"text-bold text-default":"text-warning"),b.Nb(1),b.ed(e.code),b.Nb(2),b.fd(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.ed(e.method),b.Nb(2),b.ed(e.lod),b.Nb(2),b.Fc("name","qty",n+1,""),b.Dc("ngModel",e.quantity),b.Nb(2),b.fd(" ",e.unit," "),b.Nb(2),b.Fc("name","p",n+1,""),b.Dc("ngModel",e.price),b.Nb(2),b.Fc("name","gg",n+1,""),b.Dc("ngModel",e.discount),b.Nb(2),b.fd(" ",b.xc(25,22,e.amount)," "),b.Nb(3),b.Fc("name","pri",n+1,""),b.Dc("ngModel",e.priority),b.Nb(2),b.Fc("name","ta",n+1,""),b.Dc("ngModel",e.tat),b.Nb(2),b.Fc("name","odd",n+1,""),b.Dc("ngModel",e.order_no),b.Nb(2),b.Fc("name","hid",n+1,""),b.Dc("ngModel",e.hide)}}function Ha(e,t){if(1&e){const e=b.ic();b.hc(0,"form",169),b.hc(1,"div",75),b.hc(2,"h4",76),b.dd(3),b.wc(4,"translate"),b.wc(5,"translate"),b.gc(),b.hc(6,"button",77),b.rc("click",function(){return t.$implicit.dismiss("Cross click")}),b.hc(7,"span",78),b.dd(8,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(9,"div",79),b.hc(10,"div",80),b.hc(11,"div",195),b.hc(12,"label",196),b.dd(13),b.wc(14,"translate"),b.gc(),b.hc(15,"input",197),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entityTemplate.name=t})("change",function(){return b.Uc(e),b.vc().saveChangeSample()}),b.gc(),b.gc(),b.hc(16,"div",86),b.hc(17,"label",198),b.dd(18),b.wc(19,"translate"),b.gc(),b.hc(20,"input",199),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entityTemplate.number_sample=t})("keyup.enter",function(){b.Uc(e);const t=b.vc();return t._changeSample(t.entityTemplate.number_sample)})("change",function(){b.Uc(e);const t=b.vc();return t._changeSample(t.entityTemplate.number_sample)}),b.gc(),b.gc(),b.hc(21,"div",124),b.hc(22,"label"),b.dd(23),b.wc(24,"translate"),b.gc(),b.hc(25,"input",200),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entityTemplate.total=t}),b.gc(),b.gc(),b.hc(26,"div",92),b.cc(27,"hr"),b.hc(28,"div",1),b.hc(29,"div",201),b.hc(30,"div",202),b.bd(31,La,4,5,"ng-container",56),b.gc(),b.gc(),b.hc(32,"div",203),b.bd(33,qa,2,0,"a",204),b.gc(),b.gc(),b.gc(),b.hc(34,"div",81),b.hc(35,"label",205),b.hc(36,"strong"),b.dd(37),b.wc(38,"translate"),b.gc(),b.gc(),b.hc(39,"input",206),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entitySample.sample_name=t})("keyup.enter",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)})("change",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)}),b.wc(40,"translate"),b.wc(41,"translate"),b.gc(),b.hc(42,"input",206),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entitySample.sample_name_e=t})("keyup.enter",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)})("change",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)}),b.wc(43,"translate"),b.wc(44,"translate"),b.gc(),b.gc(),b.hc(45,"div",81),b.hc(46,"label",205),b.hc(47,"strong"),b.dd(48),b.wc(49,"translate"),b.wc(50,"translate"),b.gc(),b.gc(),b.hc(51,"input",206),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entitySample.description=t})("keyup.enter",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)})("change",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)}),b.wc(52,"translate"),b.wc(53,"translate"),b.gc(),b.hc(54,"input",206),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entitySample.description_e=t})("keyup.enter",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)})("change",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)}),b.wc(55,"translate"),b.wc(56,"translate"),b.gc(),b.gc(),b.hc(57,"div",81),b.hc(58,"label",205),b.hc(59,"strong"),b.dd(60),b.wc(61,"translate"),b.gc(),b.gc(),b.hc(62,"textarea",207),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entitySample.note=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)}),b.wc(63,"translate"),b.gc(),b.gc(),b.hc(64,"div",86),b.hc(65,"label",205),b.hc(66,"strong"),b.dd(67),b.wc(68,"translate"),b.gc(),b.gc(),b.hc(69,"input",208),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entitySample.weight=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)})("keypress.enter",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)}),b.wc(70,"translate"),b.gc(),b.gc(),b.hc(71,"div",86),b.hc(72,"label",205),b.hc(73,"strong"),b.dd(74),b.wc(75,"translate"),b.gc(),b.gc(),b.hc(76,"ng-select",209),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entitySample.sample_nature_id=t})("change",function(){b.Uc(e);const t=b.vc();return t._updateSample(t.entitySample)}),b.wc(77,"translate"),b.wc(78,"translate"),b.bd(79,za,3,6,"ng-template",210),b.gc(),b.gc(),b.hc(80,"div",81),b.hc(81,"label",205),b.hc(82,"strong"),b.dd(83),b.wc(84,"translate"),b.gc(),b.gc(),b.hc(85,"ng-select",211),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().selectedCategory0=t})("change",function(){return b.Uc(e),b.vc().changeCategoryMatrix()}),b.wc(86,"translate"),b.wc(87,"translate"),b.bd(88,Ga,3,6,"ng-template",210),b.gc(),b.gc(),b.hc(89,"div",81),b.hc(90,"label",205),b.hc(91,"strong"),b.dd(92),b.wc(93,"translate"),b.gc(),b.gc(),b.hc(94,"ng-select",212),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().selectedSpecification0=t})("change",function(){b.Uc(e);const t=b.vc();return t.changeSpecification(t.entitySample,t.selectedCategory0)}),b.bd(95,Va,3,6,"ng-template",210),b.gc(),b.gc(),b.hc(96,"div",92),b.cc(97,"br"),b.hc(98,"div",213),b.hc(99,"table",214),b.hc(100,"thead"),b.hc(101,"tr"),b.hc(102,"th",215),b.dd(103),b.wc(104,"translate"),b.wc(105,"number"),b.gc(),b.gc(),b.hc(106,"tr"),b.hc(107,"th",216),b.dd(108,"#"),b.gc(),b.hc(109,"th",216),b.cc(110,"i",132),b.gc(),b.hc(111,"th",216),b.dd(112),b.wc(113,"translate"),b.gc(),b.hc(114,"th",216),b.dd(115),b.wc(116,"translate"),b.gc(),b.hc(117,"th",216),b.dd(118),b.wc(119,"translate"),b.gc(),b.hc(120,"th",216),b.dd(121,"LOD"),b.gc(),b.hc(122,"th",217),b.dd(123),b.wc(124,"translate"),b.gc(),b.hc(125,"th",217),b.dd(126),b.wc(127,"translate"),b.gc(),b.hc(128,"th",216),b.dd(129),b.wc(130,"translate"),b.gc(),b.hc(131,"th",217),b.dd(132),b.wc(133,"translate"),b.gc(),b.hc(134,"th",216),b.dd(135),b.wc(136,"translate"),b.gc(),b.hc(137,"th",217),b.dd(138),b.wc(139,"translate"),b.gc(),b.hc(140,"th",217),b.dd(141),b.wc(142,"translate"),b.gc(),b.hc(143,"th",217),b.dd(144),b.wc(145,"translate"),b.gc(),b.hc(146,"th",217),b.dd(147),b.wc(148,"translate"),b.gc(),b.gc(),b.gc(),b.hc(149,"tbody"),b.bd(150,Ba,34,24,"tr",56),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(3),b.gd(" ",b.xc(4,89,"Add new"),"/ ",b.xc(5,91,"Update")," "),b.Nb(10),b.ed(b.xc(14,93,"Name")),b.Nb(2),b.Dc("ngModel",e.entityTemplate.name),b.Nb(3),b.ed(b.xc(19,95,"Number of sample")),b.Nb(2),b.Dc("ngModel",e.entityTemplate.number_sample),b.Nb(3),b.ed(b.xc(24,97,"Total")),b.Nb(2),b.Dc("ngModel",e.entityTemplate.total),b.Nb(6),b.Dc("ngForOf",e._samples),b.Nb(2),b.Dc("ngIf",e._samples.length>1),b.Nb(2),b.Fc("for","sample_name",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(38,99,"Sample name")),b.Nb(2),b.Fc("id","sample_name",e._currentTabActivated,""),b.Fc("name","sample_name",e._currentTabActivated,""),b.Dc("ngModel",e.entitySample.sample_name)("placeholder",b.xc(40,101,"Sample name")+" "+e._currentTabActivated+" ("+b.xc(41,103,"Vietnamese")+")"),b.Nb(3),b.Fc("id","sample_namee",e._currentTabActivated,""),b.Fc("name","sample_namee",e._currentTabActivated,""),b.Dc("ngModel",e.entitySample.sample_name_e)("placeholder",b.xc(43,105,"Sample name")+" "+e._currentTabActivated+" ("+b.xc(44,107,"English")+")"),b.Nb(4),b.Fc("for","description",e._currentTabActivated,""),b.Nb(2),b.gd("",b.xc(49,109,"Description")," (",b.xc(50,111,"State of sample"),")"),b.Nb(3),b.Fc("id","description",e._currentTabActivated,""),b.Fc("name","description",e._currentTabActivated,""),b.Dc("ngModel",e.entitySample.description)("placeholder",b.xc(52,113,"Description")+" "+e._currentTabActivated+" ("+b.xc(53,115,"Vietnamese")+")"),b.Nb(3),b.Fc("id","descriptione",e._currentTabActivated,""),b.Fc("name","descriptione",e._currentTabActivated,""),b.Dc("ngModel",e.entitySample.description_e)("placeholder",b.xc(55,117,"Description")+" "+e._currentTabActivated+" ("+b.xc(56,119,"English")+")"),b.Nb(4),b.Fc("for","note",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(61,121,"Note")),b.Nb(2),b.Fc("id","note",e._currentTabActivated,""),b.Fc("name","note",e._currentTabActivated,""),b.Dc("placeholder",b.xc(63,123,"Note")+" "+e._currentTabActivated)("ngModel",e.entitySample.note),b.Nb(3),b.Fc("for","weight",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(68,125,"Weight")),b.Nb(2),b.Fc("id","weight",e._currentTabActivated,""),b.Fc("name","weight",e._currentTabActivated,""),b.Dc("placeholder",b.xc(70,127,"Weight")+" "+e._currentTabActivated)("ngModel",e.entitySample.weight),b.Nb(3),b.Fc("for","_samplenatures",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(75,129,"Sample nature")),b.Nb(2),b.Pb("ajustar"),b.Fc("name","_samplenatures",e._currentTabActivated,""),b.Dc("items",e._samplenatures)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.entitySample.sample_nature_id)("placeholder",b.xc(77,131,"Please choose"))("notFoundText",b.xc(78,133,"Not found item")),b.Nb(5),b.Fc("for","matrix_category",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(84,135,"Matrix category")),b.Nb(2),b.Pb("ajustar"),b.Dc("items",e._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedCategory0)("placeholder",b.xc(86,137,"Please choose"))("notFoundText",b.xc(87,139,"Not found item")),b.Nb(5),b.Fc("for","para_assignment",e._currentTabActivated,""),b.Nb(2),b.ed(b.xc(93,141,"Parameter assignment")),b.Nb(2),b.Dc("items",e._specifications)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectedSpecification0)("disabled",null==e.selectedCategory0),b.Nb(9),b.gd(" ",b.xc(104,143,"Subtotal"),": ",b.xc(105,145,e.entitySample.total_sub)," (VND) "),b.Nb(9),b.ed(b.xc(113,147,"Code")),b.Nb(3),b.fd(" ",b.xc(116,149,"Specification")," "),b.Nb(3),b.ed(b.xc(119,151,"Method")),b.Nb(5),b.ed(b.xc(124,153,"Quantity")),b.Nb(3),b.ed(b.xc(127,155,"Unit")),b.Nb(3),b.ed(b.xc(130,157,"Unit price")),b.Nb(3),b.ed(b.xc(133,159,"Discount")),b.Nb(3),b.ed(b.xc(136,161,"Amount")),b.Nb(3),b.ed(b.xc(139,163,"Priority")),b.Nb(3),b.ed(b.xc(142,165,"TAT")),b.Nb(3),b.ed(b.xc(145,167,"Order")),b.Nb(3),b.ed(b.xc(148,169,"Hidden")),b.Nb(3),b.Dc("ngForOf",e._orderdetailists)}}let Qa=(()=>{class e{constructor(e,t,n,a,c,i,o,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=c,this._excelService=i,this._numberFormat=o,this.modalService=r,this.isSave=!1,this._flagModal="",this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this.filter_status="",this._requestslist=[],this.entity={},this.baseFolder=d.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this._reqlist=[],this._checkAll=!1,this._dt1="",this._dt2="",this._fdate=new Date,this._tdate=new Date,this.selectedCustomer=null,this.selectedCustomerLabel=null,this.selectedCustomer1=null,this._customers=[],this._contacts=[],this._today=new Date,this.singleSelect=[],this._titleCopy="",this._idCopy="",this.exportList=[],this.isExportLoading=!1,this._fromdateStr="",this._todateStr="",this._fromdate=new Date,this._todate=new Date,this.pageIndex1=1,this.pageSize1=10,this.totalRow1=0,this.pageIndex2=1,this.pageSize2=10,this.totalRow2=0,this.isLoadingTemplate=!1,this._templatelist=[],this._keyword1="",this.entityTemplate={},this._currentTabActivated=1,this._samples=[],this.entitySample={},this._categories=[],this.selectedCategory0=null,this._specifications=[],this.selectedSpecification0=null,this._orderdetailists=[],this._idTemplate="",this._flagChooseTemplate=!1,this._samplenatures=[],this.sample_nature_id=null,!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadCompanyLinks(),this.socket.on("refreshPage",e=>{this.loadData(),this.loadCompanyLinks()})}loadData(){this._isLoading=!0;let e={};e.page=this.pageIndex,e.limit=this.pageSize,e.filter=this._keyword,e.status=this.filter_status,e.domain=this.user.short_code,e.user_id=this.user.id,this._dataService.post("/request/getall",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,company_name_l:n.company_name_l,company_name_e:n.company_name_e,receive_company_e:n.receive_company_e,receive_company_l:n.receive_company_l,contact_name:n.contact_name,short_code:n.short_code,flag:!1,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat,total:(parseFloat("NaN"==n.total?0:n.total)-parseInt(null==n.promo_special?0:n.promo_special))*(1-parseFloat(null==n.promo_perorder?0:n.promo_perorder)/100)*(1+parseFloat(null==n.tax_vat?0:n.tax_vat)/100),total_estimated:(parseFloat("NaN"==n.total_estimated?0:n.total_estimated)-parseInt(null==n.promo_special?0:n.promo_special))*(1-parseFloat(null==n.promo_perorder?0:n.promo_perorder)/100)*(1+parseFloat(null==n.tax_vat?0:n.tax_vat)/100),created_by:n.created_by,ordered_samples:n.ordered_samples,note:n.note,order_no:(null==n.employee_nr?"":n.employee_nr)+n.request_no.substr(2,n.request_no.length)});this._requestslist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages,this._isLoading=!1})}loadCustomers(){let e={};e.domain=this.user.short_code,this._dataService.post("/customer/getallcustomersnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.name_l,code:n.id});this._customers=t})}loadCompanyLinks(){let e={};e.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:n.code_link,code:n.id});this._customers=t})}_getInfoLabelCustomer(){this.selectedCustomerLabel=null!=this.selectedCustomer?this._customers.filter(e=>e.code==this.selectedCustomer)[0].name:null}_switchPercent(e){e>100&&(this.entity.promo_perorder=100)}selectAll(e){e.target.checked?(this.exportList=[],this._requestslist.forEach(e=>this.exportList.push(e.id))):this.exportList=[]}selectItem(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(e=>e!==t)}loadContacts(e){if(null==e)this.selectedContact=null;else{let t={};t.customer_id=e,this._dataService.post("/customer/getallcontactsnopaging",t).subscribe(e=>{console.log("Contact",e);let t=[];for(let n of e.data)t.push({name:n.name_l,code:n.id});this._contacts=t})}}changeCheckAll(e){let t=[];if(this._checkAll)for(let n of e)t.push({id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:!0,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat,total:n.total,created_by:n.created_by,ordered_samples:n.ordered_samples});else for(let n of e)t.push({id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:!1,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat,total:n.total,created_by:n.created_by,ordered_samples:n.ordered_samples});this._requestslist=t}_changeCheckOne(e){this._checkAll=!0;let t=[];for(let n of this._requestslist)t.push(n.id==e.id?{id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:e.flag,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat}:{id:n.id,request_no:n.request_no,received_date:n.received_date,returned_date:n.returned_date,cus_name_l:n.cus_name_l,cus_name_e:n.cus_name_e,contact_name_l:n.contact_name_l,contact_name_e:n.contact_name_e,short_code:n.short_code,flag:n.flag,number_sample:n.number_sample,is_active:n.is_active,timestamp:n.timestamp,tax_vat:n.tax_vat});this._requestslist=t}_pageSizeChange(e){this.pageSize=e.target.value,this._checkAll||this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this._checkAll||this.socket.emit("refresh",{})}loadDetail(e){let t={};t.id=e,this._dataService.post("/request/detail",t).subscribe(e=>{this.entity=e.data,null!=e.data.customer_id?(this.selectedCustomer=e.data.customer_id,this.selectedCustomerLabel=this._customers.filter(e=>e.code==this.selectedCustomer)[0].name):(this.selectedCustomer=null,this.selectedCustomerLabel=null),null!=e.data.received_date&&(this._dt1=r(new Date(e.data.received_date)).format("YYYY-MM-DD HH:mm"),this._fdate=new Date(e.data.received_date)),null!=e.data.returned_date&&(this._dt2=r(new Date(e.data.returned_date)).format("YYYY-MM-DD HH:mm"),this._tdate=new Date(e.data.returned_date))})}deleteItem(e){p.a.fire({title:"en"==this.user.lang?f.a.are_you_sure_en:f.a.are_you_sure,text:"en"==this.user.lang?e.category_name_e:e.category_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{if(t.value){let t={};t.id=e.id,this._dataService.post("/sample_matrix/deleteCat",t).subscribe(e=>{this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_DELETE_EN:f.a.MSG_DELETE,"OK"),this.socket.emit("refresh",{})},()=>{this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}})}saveChange(e){if(this._fdate>this._tdate||null==e||0==this.entity.number_sample||null==this._fdate||null==this._tdate)this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_DATE_EN:f.a.MSG_ERROR_DATE,"en"==this.user.lang?f.a.error_title_en:f.a.error_title);else if(this.isSave=!0,this.entity.customer_id=e,this.entity.received_date=this._dt1,this.entity.returned_date=this._dt2,this.entity.userid=this.user.id,this.entity.ipaddress=this.user.ipaddress,"ADD"==this._flagModal){this.entity.short_code=this.user.short_code;let e=new Date;this.entity.timestamp=r(e).format("YYYY-MM-DD HH:mm:ss"),console.log(this.entity),this._dataService.post("/request/add",this.entity).subscribe(e=>{this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.entity={},this.entity.tax_vat=10,this.entity.number_sample=1,this.entity.is_active=0,this.entity.valid_number=5,this.selectedContact=null,this.selectedCustomer=null,this._fdate=null,this._tdate=null,this._dt1="",this._dt2="",this.isSave=!1,this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}else console.log("Update",this.entity),this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/request/update",this.entity).subscribe(e=>{this.isSave=!1,this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}orgValueChange1(e){null!=e&&"Invalid date"!=e?(this._fdate=e,this._tdate=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1=r(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=r(this._tdate).format("YYYY-MM-DD HH:mm")):(this._dt1="",this._fdate=null)}orgValueChange2(e){null!=e&&"Invalid date"!=e?(this._tdate=e,this._dt1=r(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=r(this._tdate).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdate-this._fdate)/864e5)):(this._dt2="",this._tdate=null)}_calculateDays(){null!=this._fdate&&(this._tdate=new Date(this._fdate.getTime()+864e5*this.entity.valid_number))}_openModal(e,t){null==t?(this._flagModal="ADD",this.entity={},this.entity.tax_vat=10,this.entity.number_sample=1,this.entity.is_active=0,this.entity.valid_number=7,this.entity.is_issue_bill=!0,this.selectedContact=null,this.selectedCustomer=null,this._fdate=null,this._tdate=null,this._dt1="",this._dt2=""):(this._flagModal="UPDATE",this.loadDetail(t.id)),this.modalService.open(e,{size:"lg",centered:!0})}_routeDetail(e){this._route.navigate(["/request/detail/"+e.id])}_exportAll(e){console.log(e),this.isExportLoading=!0,this._dataService.post("/request/exportRequest",e).subscribe(e=>{if(e.data.length>0){let t=[];for(let n of e.data)t.push({"Request No":n.request_no,"Customer Name":n.company_name_l,Contact:n.contact_name,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(n.returned_date)).format("DD/MM/YYYY"),"Samples Ordered":n.ordered_samples+"/"+(null==n.number_sample?"0":n.number_sample),"VAT (%)":null==n.tax_vat?"":n.tax_vat,Total:0==n.ordered_samples?"0":this._numberFormat.localeString(parseFloat(n.total)),Status:n.is_active?"Confirmed":"Cancelled","Created By":n.created_by,"Promotion Per Group":this._numberFormat.localeString(parseFloat(n.promotion_per_group)),"Promotion Per Order":this._numberFormat.localeString(parseFloat(n.promotion_per_order)),"Total before tax":this._numberFormat.localeString(parseFloat(n.before_tax)),"Total after tax":this._numberFormat.localeString(parseFloat(n.after_tax)).substr(0,this._numberFormat.localeString(parseFloat(n.after_tax)).lastIndexOf("."))});this._excelService.exportAsExcelFile(t,"Requests-"+r(new Date).format("YYYY-MM-DD")),this.isExportLoading=!1,this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.data.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.data.length+" "+f.a.record,"OK")}else this.isExportLoading=!1,this._notifyService.showWarning("en"==this.user.lang?f.a.MSG_EXPORT_EN+" 0 "+f.a.record_en:f.a.MSG_EXPORT+" 0 "+f.a.record,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)},()=>{this.isExportLoading=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_EXPORTNO_EN:f.a.MSG_EXPORT_NO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}_exportAllRangeWithStatus(e){this.modalService.open(e,{size:"md",centered:!0})}openCopyModal(e,t,n){0==n?(this._titleCopy=t.request_no,this._idCopy=t.id):(this._titleCopy="en"==this.user.lang?"total of requests: ":"t\u1ed5ng s\u1ed1 y\xeau c\u1ea7u: "+t.length,this._idCopy=t),this.modalService.open(e,{size:"md",centered:!0})}_copyRequest(e){let t={};t.id=this._idCopy,t.customer_id=e,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/request/copy",t).subscribe(e=>{this._idCopy="",this._titleCopy="",this.selectedCustomer1=null,this.modalService.dismissAll(),this._notifyService.showSuccess("en"==this.user.lang?f.a.copy_msgok_en:f.a.copy_msgok,"OK"),this.socket.emit("refresh",{})})}_copyAll(e,t){console.log(e,t);let n={};n.ids=e,n.customer_id=t,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,this._dataService.post("/request/copyAll",n).subscribe(e=>{this._idCopy="",this._titleCopy="",this.selectedCustomer1=null,this.modalService.dismissAll(),this._notifyService.showSuccess("en"==this.user.lang?f.a.copy_msgok_en:f.a.copy_msgok,"OK"),this.exportList=[],this.socket.emit("refresh",{})})}closeModal(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}changeFromDate(e){null==e?(this._fromdateStr="",this._fromdate=null):(this._fromdateStr=r(e).format("YYYY-MM-DD"),this._fromdate=e)}changeToDate(e){null==e?(this._todateStr="",this._todate=null):(this._todateStr=r(e).format("YYYY-MM-DD"),this._todate=e)}_exportAllRangeWithStatusA(){console.log(this._fromdate,this._todate),this._fromdate>this._todate||null==this._fromdate||null==this._todate?this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_DATE_EN:f.a.MSG_ERROR_DATE,"en"==this.user.lang?f.a.error_title_en:f.a.error_title):this._dataService.post("/request/exportRange",{from_date:this._fromdateStr,to_date:this._todateStr,short_code:this.user.short_code}).subscribe(e=>{if(e.data.length>0){let t=[];for(let n of e.data)t.push({"Request No":n.request_no,"Customer Name":n.company_name_l,Contact:n.contact_name,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(n.returned_date)).format("DD/MM/YYYY"),"Samples Ordered":n.ordered_samples+"/"+(null==n.number_sample?"0":n.number_sample),"VAT (%)":null==n.tax_vat?"":n.tax_vat,Total:0==n.ordered_samples?"0":this._numberFormat.localeString(parseFloat(n.total)),Status:n.is_active?"Confirmed":"Cancelled","Created By":n.created_by,"Promotion Per Group":this._numberFormat.localeString(parseFloat(n.promotion_per_group)),"Promotion Per Order":this._numberFormat.localeString(parseFloat(n.promotion_per_order)),"Total Before Tax":this._numberFormat.localeString(parseFloat(n.before_tax)),"Total After Tax":this._numberFormat.localeString(parseFloat(n.after_tax)).substr(0,this._numberFormat.localeString(parseFloat(n.after_tax)).lastIndexOf(".")),"Issue Bill VAT":null!=n.is_issue_bill&&n.is_issue_bill?"Yes":"No",Note:n.note});this._excelService.exportAsExcelFile(t,"Requests-"+r(new Date).format("YYYY-MM-DD")),this.isExportLoading=!1,this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.data.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.data.length+" "+f.a.record,"OK"),this.modalService.dismissAll()}else this.isExportLoading=!1,this._notifyService.showWarning("en"==this.user.lang?f.a.MSG_EXPORT_EN+" 0 "+f.a.record_en:f.a.MSG_EXPORT+" 0 "+f.a.record,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)},()=>{this.isExportLoading=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_EXPORTNO_EN:f.a.MSG_EXPORT_NO,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}loadTemplateList(){this.isLoadingTemplate=!0;let e={};e.page=this.pageIndex1,e.limit=this.pageSize1,e.filter=this._keyword1,e.domain=this.user.short_code,this._dataService.post("/request/getalltemplates",e).subscribe(e=>{console.log(e);let t=[];for(let n of e.data){let e=0;for(let t of n.json.data)e+=t.order_details.length;t.push({id:n.id,name:n.name,number_sample:n.number_sample,json:n.json,short_code:n.short_code,timestamp:n.timestamp,total:n.total,total_parameters:e})}this._templatelist=t,this.totalRow1=e.rowCount,this.totalPage1=e.totalPages,this.isLoadingTemplate=!1})}_pageSizeChangeTemplate(e){this.pageSize1=e.target.value,this.loadTemplateList()}pageChangedTemplate(e){this.pageIndex1=e.page,this.loadTemplateList()}openTemplateModal(e){this.loadTemplateList(),this.modalService.open(e,{size:"xl",centered:!0,backdrop:!1})}popupTemplateModal(e,t){this.loadSampleNature(),this.loadCategories(),null==t?(this._currentTabActivated=1,this.entitySample={},this.entityTemplate={},this.entityTemplate.id=null,this.entityTemplate.name=null,this.entityTemplate.number_sample=1,this.entityTemplate.short_code=this.user.short_code,this.entityTemplate.total=0,this._orderdetailists=[],this._samples=[{id:1,sample_name:null,sample_name_e:null,description:null,description_e:null,note:null,weight:null,order_details:this._orderdetailists,total_sub:0,sample_nature_id:null}],this.entityTemplate.json={data:this._samples}):this.loadDetailRequestTemplate(t.id),this.modalService.open(e,{size:"xl",centered:!0})}_changeSample(e){if(e>this._samples.length){for(let t=0;t<e-this._samples.length;t++)this._samples.push({id:this._samples.length+t+1,sample_name:null,sample_name_e:null,description:null,description_e:null,note:null,weight:null,order_details:[],total_sub:0});this.entityTemplate.json={data:this._samples},this.saveChangeSample()}else null!=this.entityTemplate.id&&this.loadDetailRequestTemplate(this.entityTemplate.id)}_chooseTab(e){this.selectedSpecification0=null,this.selectedCategory0=null,this.sample_nature_id=null,this._currentTabActivated=e.id,this.entitySample=this._samples.filter(t=>t.id==e.id)[0],this._orderdetailists=this._samples.filter(t=>t.id==e.id)[0].order_details}_updateSample(e){for(let t of this._samples)t.id==this._currentTabActivated&&(t.sample_name=null==e.sample_name?null:e.sample_name,t.sample_name_e=null==e.sample_name_e?null:e.sample_name_e,t.description=null==e.description?null:e.description,t.description_e=null==e.description_e?null:e.description_e,t.note=null==e.note?null:e.note,t.weight=null==e.weight?null:e.weight,t.total_sub=e.total_sub);this.entityTemplate.json={data:this._samples},this.saveChangeSample()}_removeTab(e){let t=[],n=1;for(let a of this._samples.filter(t=>t.id!=e))t.push({id:n,sample_name:a.sample_name,sample_name_e:a.sample_name_e,description:a.description,description_e:a.description_e,note:a.note,weight:a.weight,order_details:a.order_details}),n+=1;this.entityTemplate.number_sample=t.length,this.entityTemplate.json={data:t},this.saveChangeSample()}saveChangeSample(){null==this.entityTemplate.id?this._dataService.post("/request/addRequestTemplate",this.entityTemplate).subscribe(e=>{this.loadDetailRequestTemplate(e.data.id),this.loadTemplateList()}):this._dataService.post("/request/updateRequestTemplate",this.entityTemplate).subscribe(e=>{this.loadDetailRequestTemplate(e.data.id)})}loadDetailRequestTemplate(e){this._dataService.post("/request/detailRequestTemplate",{id:e}).subscribe(e=>{this.entityTemplate=e.data,this._samples=e.data.json.data,this.entitySample=this._samples.filter(e=>e.id==this._currentTabActivated)[0],this._orderdetailists=this._samples.filter(e=>e.id==this._currentTabActivated)[0].order_details})}loadCategories(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({name:"en"==this.user.lang?n.category_name_e:n.category_name_l,code:n.id});this._categories=t})}changeCategoryMatrix(){this.loadSpecs(this.selectedCategory0)}loadSpecs(e){if(null!=e){let t={};t.domain=this.user.short_code,t.id=e,this._dataService.post("/sample_matrix/getallparametersnopagingbycat",t).subscribe(e=>{let t=[];for(let n of e.data.filter(e=>e.is_active))t.push({name:n.specification_name_l,code:n.parameter_id});this._specifications=t})}else{let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparametersnopaging",e).subscribe(e=>{let t=[];for(let n of e.data.filter(e=>e.is_active))t.push({name:n.specification_name_l,code:n.id});this._specifications=t})}}changeSpecification(e,t){console.log(this.selectedSpecification0,t),null!=this.selectedSpecification0&&null!=t&&this._addItemsTemplate(this.selectedSpecification0,e,t)}_removeItemTemplate(e){this._dataService.post("/request/removeItemOrderTemplate",{sample_id:e.sample_id,parameter_id:e.parameter_id,category_id:e.category_id,id:this.entityTemplate.id}).subscribe(e=>{this.loadDetailRequestTemplate(this.entityTemplate.id),this.loadTemplateList()})}_addItemsTemplate(e,t,n){console.log(e,t),this._dataService.post("/request/addItemOrderTemplate",{sample_id:this._currentTabActivated,parameter_id:e,category_id:n,priority:0,id:this.entityTemplate.id}).subscribe(e=>{console.log(e),this.selectedSpecification0=null,this.loadDetailRequestTemplate(this.entityTemplate.id),this.loadTemplateList()})}_updateItemTemplate(e){this._dataService.post("/request/updateItemTemplate",{id:this.entityTemplate.id,getlist:e}).subscribe(e=>{this.loadDetailRequestTemplate(this.entityTemplate.id)})}_popupCopyTemplate(e,t){this.selectedCustomer1=null,this._idTemplate=t.id,this._flagChooseTemplate=!0,this._titleCopy="en"==this.user.lang?"From Template: "+t.name:"T\u1eeb nguy\xean m\u1eabu: "+t.name,this.modalService.open(e,{size:"md",centered:!0,backdrop:!1})}deleteItemTemplate(e){this._dataService.post("/request/deleteItemTemplate",{id:e.id}).subscribe(e=>{this.loadTemplateList(),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_DELETE_EN:f.a.MSG_DELETE,"OK")})}_copyTemplate(e,t){this._dataService.post("/request/convertTemplate2Request",{id:e,customer_id:t,userid:this.user.id,ipaddress:this.user.ipaddress,short_code:this.user.short_code}).subscribe(e=>{console.log(e),this._notifyService.showSuccess("en"==this.user.lang?f.a.copy_msgok_en:f.a.copy_msgok,"OK"),this.selectedCustomer1=null,this.modalService.dismissAll(),this.socket.emit("refresh",{})})}loadSampleNature(){this._dataService.post("/sample_matrix/getallsamplenaturenopaging",{short_code:this.user.short_code}).subscribe(e=>{console.log(e);let t=[];for(let n of e.data)t.push({id:n.id,name:"en"==this.user.lang?n.name_e:n.name_l});this._samplenatures=t})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(v.a),b.bc(y.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(Ke.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-management"]],decls:119,vars:100,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[2,"width","130px"],[4,"ngIf"],["content",""],["contentRelationship",""],["contentCopy",""],["contentRangeDate",""],["contentTemplate",""],["contentAddTemplateModal",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-copy"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-bookmark-o"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","13",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-eye"],["class","btn btn-sm btn-primary mr-sm-1",3,"disabled","ngbTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"disabled","ngbTooltip","click"],[3,"ngbTooltip"],[1,"text-right"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-pencil"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"form","theme-form",3,"ngSubmit"],["f0","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","number_sample"],["type","number","id","number_sample","name","number_sample","required","","autocomplete","off","min","0",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["type","hidden","name","ID",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-3"],["for","tax_vat"],["type","number","id","tax_vat","name","tax_vat","required","","autocomplete","off","min","0",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","isOnOff"],[1,"checkbox","checkbox-primary"],["id","isOnOff","type","checkbox","name","isOnOff",3,"ngModel","ngModelChange"],[1,"col-md-12"],["for","title_promo_spec"],["type","text","id","title_promo_spec","name","title_promo_spec","autocomplete","off",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","promo_special_en"],["type","text","id","promo_special_en","name","promo_special_en","autocomplete","off","min","0","mask","separator.2","thousandSeparator",",",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","promo_perorder"],["type","number","id","promo_perorder","name","promo_perorder","autocomplete","off",3,"ngClass","placeholder","ngModel","min","max","disabled","ngModelChange","change"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["class","mute",4,"ngIf"],["for","received_date"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",3,"placeholder","ngClass","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdate","bsDatepicker","","autocomplete","off","required","",3,"placeholder","ngClass","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",3,"type","placeholder","ngClass","ngModel","disabled","min","ngModelChange","change"],["for","permission_write"],["id","permission_write","name","permission_write",1,"form-control",3,"ngModel","ngModelChange"],["for","comment"],["rows","2","id","comment","name","comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",4,"ngIf"],[1,"mute"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary"],["class","modal-title",4,"ngIf"],["class","form-group row",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"col-md-10"],["type","search","aria-label","Search","name","_keywordRel","autocomplete","off",1,"form-control","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"col-md-2"],["type","button",1,"btn","btn-primary","bt-sm",3,"click"],["class","form-inline my-2 my-lg-0",4,"ngIf"],[1,"form-inline","my-2","my-lg-0"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],["colspan","8",2,"text-align","center"],[2,"cursor","pointer",3,"click"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-trash"],["form1","ngForm"],["for","contact_name"],["type","text","id","contact_name","name","contact_name","required","","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","ngModelChange"],["for","contact_code"],["type","text","id","contact_code","name","contact_code","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","phone"],["type","text","id","phone","name","phone","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","email"],["type","text","id","email","name","email","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Descriptiona"],["rows","2","id","Descriptiona","name","Descriptiona",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Description1a"],["rows","2","id","Description1a","name","Description1a",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["id","permission_write","type","checkbox","name","permission_write",3,"ngModel","ngModelChange"],["type","submit","class","btn btn-primary mr-sm-1",3,"disabled",4,"ngIf"],["type","button","class","btn btn-warning mr-sm-1",3,"click",4,"ngIf"],["type","text","autocomplete","off","name","_keyword1",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["name","mypage","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[2,"overflow-x","auto"],["type","submit",1,"btn","btn-primary","mr-sm-1",3,"disabled"],["type","button",1,"btn","btn-warning","mr-sm-1",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","click"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],["form2","ngForm"],["for","link_code"],["id","link_code","name","link_code","rows","2",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","info_company_id"],["name","selectedCompany","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSender","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","button",1,"btn","btn-secondary","mr-sm-1",3,"click"],["type","button","class","btn btn-primary mr-sm-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","mr-sm-1",3,"click"],[1,"form","theme-form"],["for","company_en"],["name","selectedCustomer1","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["for","fromdate"],["id","fromdate","type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","fromdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["for","todate"],["id","todate","type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","todate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],[1,"col-md-12","text-center"],["href","javascript:;","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-warning",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-warning",3,"click"],["href","javascript:;",1,"btn","btn-sm","btn-warning"],[1,"col-md-9"],[1,"form-group","form-inline"],["type","text","name","_keyword",1,"form-control","mr-sm-1",3,"placeholder","ngModel","ngModelChange","keyup.enter","change"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"click"],["src","../../../../assets/img/circles.svg","width","17px","class","mr-sm-1",4,"ngIf"],["id","select151","name","select151",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["class","col-sm-12 col-lg-12 col-xl-12",4,"ngIf"],[2,"width","2px","text-align","center"],["src","../../../../assets/img/circles.svg","width","17px",1,"mr-sm-1"],["colspan","7",1,"text-center"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],[1,"btn","btn-sm","btn-secondary","mr-sm-1",3,"ngbTooltip","click"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"ngbTooltip","click"],[1,"col-md-7"],["for","temp_name"],["type","text","id","temp_name","name","temp_name","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","change"],["for","tmep_num_sample"],["type","number","id","tmep_num_sample","name","tmep_num_sample","autocomplete","off","min","1",1,"form-control",3,"ngModel","ngModelChange","keyup.enter","change"],["type","text","name","temp_total","autocomplete","off","mask","separator.2","thousandSeparator",",","disabled","",1,"form-control","jdisabled",3,"ngModel","ngModelChange"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"btn-group","flex-wrap"],[1,"col-sm-12","col-lg-12","col-xl-1","text-right"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[3,"for"],["type","text","autocomplete","off",1,"form-control",3,"id","name","ngModel","placeholder","ngModelChange","keyup.enter","change"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange","change"],["type","text",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange","change","keypress.enter"],["bindValue","id","bindLabel","name",3,"items","name","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["ng-option-tmp",""],["name","matrix_category","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSpecification0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],[1,"table-responsive",2,"max-height","200px"],["id","hor-minimalist-line-border"],["colspan","15",1,"text-right",2,"background-color","rgb(201, 201, 201)","color","black"],[1,"text-truncate"],[1,"scope"],["type","button",3,"ngClass","click"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],["container","body",3,"ngbTooltip"],["href","javascript:;",1,"text-danger",3,"click"],[3,"ngClass"],["type","text",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","text","min","0","mask","separator.2","thousandSeparator",",",1,"form-control",2,"width","100px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","text","min","0","mask","separator.2","thousandSeparator",",",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","number","min","0",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","checkbox",1,"form-control",3,"name","ngModel","ngModelChange","change"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.bd(10,Gn,3,3,"button",8),b.bd(11,Vn,4,3,"button",9),b.bd(12,Bn,5,6,"button",10),b.bd(13,Hn,4,3,"button",11),b.bd(14,Qn,1,0,"img",12),b.gc(),b.gc(),b.hc(15,"div",13),b.hc(16,"div",14),b.hc(17,"select",15),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(18,"option",16),b.dd(19,"#10"),b.gc(),b.hc(20,"option",17),b.dd(21,"#25"),b.gc(),b.hc(22,"option",18),b.dd(23,"#50"),b.gc(),b.hc(24,"option",19),b.dd(25,"#100"),b.gc(),b.gc(),b.hc(26,"select",20),b.rc("ngModelChange",function(e){return t.filter_status=e})("change",function(){return t.loadData()}),b.hc(27,"option",21),b.dd(28),b.wc(29,"translate"),b.gc(),b.hc(30,"option",22),b.dd(31),b.wc(32,"translate"),b.gc(),b.hc(33,"option",23),b.dd(34),b.wc(35,"translate"),b.gc(),b.hc(36,"option",24),b.dd(37),b.wc(38,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(39,"div",25),b.hc(40,"div",26),b.hc(41,"div",27),b.hc(42,"div",28),b.hc(43,"pagination",29),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(44,"div",30),b.hc(45,"a",31),b.dd(46),b.wc(47,"translate"),b.wc(48,"translate"),b.wc(49,"translate"),b.wc(50,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(51,"div",26),b.hc(52,"div",32),b.hc(53,"table",33),b.hc(54,"thead",34),b.hc(55,"tr"),b.hc(56,"th",35),b.dd(57,"#"),b.gc(),b.hc(58,"th",36),b.hc(59,"input",37),b.rc("change",function(e){return t.selectAll(e)}),b.gc(),b.gc(),b.hc(60,"th",38),b.dd(61),b.wc(62,"translate"),b.gc(),b.hc(63,"th",36),b.dd(64),b.wc(65,"translate"),b.gc(),b.hc(66,"th",36),b.dd(67),b.wc(68,"translate"),b.gc(),b.hc(69,"th",36),b.dd(70),b.wc(71,"translate"),b.gc(),b.hc(72,"th",36),b.dd(73),b.wc(74,"translate"),b.gc(),b.hc(75,"th",36),b.dd(76),b.wc(77,"translate"),b.gc(),b.hc(78,"th",36),b.dd(79),b.wc(80,"translate"),b.gc(),b.hc(81,"th",36),b.dd(82),b.wc(83,"translate"),b.gc(),b.hc(84,"th",36),b.dd(85),b.wc(86,"translate"),b.gc(),b.hc(87,"th",36),b.dd(88),b.wc(89,"translate"),b.gc(),b.hc(90,"th",36),b.dd(91),b.wc(92,"translate"),b.gc(),b.gc(),b.gc(),b.hc(93,"tbody"),b.bd(94,$n,6,3,"ng-container",39),b.bd(95,ta,2,1,"ng-container",39),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(96,"div",26),b.hc(97,"div",27),b.hc(98,"div",28),b.hc(99,"pagination",29),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(100,"div",30),b.hc(101,"a",31),b.dd(102),b.wc(103,"translate"),b.wc(104,"translate"),b.wc(105,"translate"),b.wc(106,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(107,oa,121,122,"ng-template",null,40,b.cd),b.bd(109,Da,12,7,"ng-template",null,41,b.cd),b.bd(111,Ta,17,9,"ng-template",null,42,b.cd),b.bd(113,Ra,25,17,"ng-template",null,43,b.cd),b.bd(115,Ya,59,33,"ng-template",null,44,b.cd),b.bd(117,Ha,151,171,"ng-template",null,45,b.cd)),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,52,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","report")),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")&&t.exportList.length>0),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","report")),b.Nb(1),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(9),b.Dc("ngModel",t.filter_status),b.Nb(2),b.fd(" ",b.xc(29,54,"All")," "),b.Nb(3),b.fd(" ",b.xc(32,56,"Pending")," "),b.Nb(3),b.fd(" ",b.xc(35,58,"Confirmed")," "),b.Nb(3),b.fd(" ",b.xc(38,60,"Cancel")," "),b.Nb(6),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(47,62,"Total of records"),": ",t.totalRow," - ",b.xc(48,64,"Page")," ",t.pageIndex," ",b.xc(49,66,"of")," ",t.totalPage," ",b.xc(50,68,"page"),""),b.Nb(13),b.Dc("disabled",0==t._requestslist.length)("checked",t.exportList.length==t._requestslist.length),b.Nb(2),b.ed(b.xc(62,70,"Actions")),b.Nb(3),b.fd(" ",b.xc(65,72,"Request code")," "),b.Nb(3),b.fd(" ",b.xc(68,74,"Order code")," "),b.Nb(3),b.fd(" ",b.xc(71,76,"Received date")," "),b.Nb(3),b.fd(" ",b.xc(74,78,"Customer")," "),b.Nb(3),b.fd(" ",b.xc(77,80,"Report company")," "),b.Nb(3),b.fd(" ",b.xc(80,82,"Total")," "),b.Nb(3),b.ed(b.xc(83,84,"Contact")),b.Nb(3),b.ed(b.xc(86,86,"Returned date")),b.Nb(3),b.ed(b.xc(89,88,"Status")),b.Nb(3),b.ed(b.xc(92,90,"Timestamp")),b.Nb(3),b.Dc("ngIf",0==t._requestslist.length),b.Nb(1),b.Dc("ngIf",t._requestslist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(103,92,"Total of records"),": ",t.totalRow," - ",b.xc(104,94,"Page")," ",t.pageIndex," ",b.xc(105,96,"of")," ",t.totalPage," ",b.xc(106,98,"page"),""))},directives:[c.c,c.n,c.q,a.q,c.x,c.r,c.A,M.a,a.p,w.N,c.z,c.o,c.p,c.s,c.w,a.o,c.b,Zt.a,C.a,D.b,D.a,c.t,C.c],pipes:[T.c,a.f,a.g,a.y],styles:[""]}),e})();function $a(e,t){if(1&e&&(b.hc(0,"option",45),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.dept_name_e:e.dept_name_l," ")}}function Ka(e,t){if(1&e&&(b.hc(0,"option",45),b.dd(1),b.gc()),2&e){const e=t.$implicit,n=b.vc();b.Dc("value",e.id),b.Nb(1),b.fd(" ","en"==n.user.lang?e.csp_name_e:e.csp_name_l," ")}}function ja(e,t){if(1&e){const e=b.ic();b.hc(0,"button",46),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t._preparationlist)}),b.cc(1,"i",47),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function Xa(e,t){if(1&e){const e=b.ic();b.hc(0,"button",48),b.rc("click",function(){return b.Uc(e),b.vc()._exportAll1()}),b.cc(1,"i",47),b.dd(2),b.wc(3,"translate"),b.wc(4,"translate"),b.gc()}2&e&&(b.Nb(2),b.gd(" ",b.xc(3,2,"Export")," ",b.xc(4,4,"All")," "))}function Wa(e,t){1&e&&b.cc(0,"img",49)}function Ja(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",50),b.hc(3,"h3",51),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.fd(" ",b.xc(5,1,"No records now!!!")," "))}function Za(e,t){1&e&&b.cc(0,"i",65)}function ec(e,t){1&e&&b.cc(0,"i",66)}function tc(e,t){if(1&e){const e=b.ic();b.hc(0,"button",62),b.rc("click",function(){return b.Uc(e),b.vc(3)._switchFlagEdit()}),b.wc(1,"translate"),b.bd(2,Za,1,0,"i",63),b.bd(3,ec,1,0,"i",64),b.gc()}if(2&e){const e=b.vc().$implicit,t=b.vc(2);b.Dc("ngClass",e.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!t._authenService.hasPermission("REQ-PRE","update"))("title",b.xc(1,5,e.flag?"Edit":"Cancel")),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag)}}function nc(e,t){if(1&e){const e=b.ic();b.hc(0,"button",67),b.rc("click",function(){b.Uc(e);const t=b.vc(3);return t._updateStatusv2(t._preparationlist)}),b.wc(1,"translate"),b.cc(2,"i",68),b.gc()}2&e&&b.Dc("title",b.xc(1,1,"Save"))}function ac(e,t){if(1&e&&(b.fc(0),b.dd(1),b.ec()),2&e){const e=b.vc().$implicit;b.Nb(1),b.fd(" ",e.note_lab,"")}}function cc(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"input",69),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.note_lab=t}),b.gc(),b.ec()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Nb(1),b.Fc("name","note_lab",t+1,""),b.Dc("ngModel",n.note_lab)}}function ic(e,t){1&e&&(b.hc(0,"span",70),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"None")))}function oc(e,t){1&e&&(b.hc(0,"span",71),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Preparation")))}function rc(e,t){1&e&&(b.hc(0,"span",72),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Technical validation")))}function lc(e,t){1&e&&(b.hc(0,"span",73),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Validation")))}function sc(e,t){1&e&&(b.hc(0,"span",74),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Done")))}function dc(e,t){if(1&e){const e=b.ic();b.hc(0,"tr"),b.hc(1,"th",53),b.dd(2),b.gc(),b.hc(3,"td"),b.bd(4,tc,4,7,"button",54),b.bd(5,nc,3,3,"button",55),b.gc(),b.hc(6,"td"),b.dd(7),b.gc(),b.hc(8,"td"),b.dd(9),b.gc(),b.hc(10,"td"),b.dd(11),b.gc(),b.hc(12,"td"),b.dd(13),b.gc(),b.hc(14,"td"),b.dd(15),b.gc(),b.hc(16,"td"),b.dd(17),b.gc(),b.hc(18,"td"),b.dd(19),b.gc(),b.hc(20,"td"),b.dd(21),b.gc(),b.hc(22,"td"),b.dd(23),b.gc(),b.hc(24,"td"),b.bd(25,ac,2,1,"ng-container",44),b.bd(26,cc,2,2,"ng-container",44),b.gc(),b.hc(27,"td",56),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc(2);return(1==n.status||0==n.status)&&n.flag&&a._authenService.hasPermission("REQ-PRE","update")?a._updateStatusItem(n):null}),b.bd(28,ic,3,3,"span",57),b.bd(29,oc,3,3,"span",58),b.bd(30,rc,3,3,"span",59),b.bd(31,lc,3,3,"span",60),b.bd(32,sc,3,3,"span",61),b.gc(),b.gc()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(2),b.fd(" ",n+1+a.pageSize*(a.pageIndex-1)," "),b.Nb(2),b.Dc("ngIf",0==e.status||1==e.status),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.fd(" ",e.order_code," "),b.Nb(2),b.ed(e.inner_code),b.Nb(2),b.fd(" ",e.code," "),b.Nb(2),b.fd(" ","en"==a.user.lang?e.specification_name_e:e.specification_name_l," "),b.Nb(2),b.fd(" ","en"==a.user.lang?e.para_name_e:e.para_name_l," "),b.Nb(2),b.fd(" ","en"==a.user.lang?e.category_name_e:e.category_name_l," "),b.Nb(2),b.ed("en"==a.user.lang?e.nature_name_e:e.nature_name_l),b.Nb(2),b.ed(e.tat),b.Nb(2),b.ed(e.note),b.Nb(2),b.Dc("ngIf",!e.flag),b.Nb(1),b.Dc("ngIf",e.flag),b.Nb(2),b.Dc("ngIf",0==e.status),b.Nb(1),b.Dc("ngIf",1==e.status),b.Nb(1),b.Dc("ngIf",2==e.status),b.Nb(1),b.Dc("ngIf",3==e.status),b.Nb(1),b.Dc("ngIf",4==e.status)}}function hc(e,t){if(1&e&&(b.fc(0),b.bd(1,dc,33,19,"tr",52),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._preparationlist)}}const gc=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};let uc=(()=>{class e{constructor(e,t,n,a,c,i,o,r){this._authenService=e,this._dataService=t,this._route=n,this._notifyService=a,this._uploadService=c,this._excelService=i,this.formatPipe=o,this.modalService=r,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=9,this.entity={},!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyCSP()}loadData(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,e.start_date=this._dt1,e.end_date=this._dt2,e.department_id=this.department_id,e.family_id=this.testcsp_id,e.flag_status=this._status,e.page=this.pageIndex,e.limit=this.pageSize,this._dataService.post("/lab/getlistlabspre",e).subscribe(e=>{let t=[];for(let n of e.data)t.push({order_code:n.employee_nr+n.request_no.substr(2,n.request_no.length),code:n.code,code_father:n.code_father,company_code:n.company_code,company_name_e:n.company_name_e,company_name_l:n.company_name_l,contact_name:n.contact_name,customer_id:n.customer_id,email:n.email,employee_nr:n.employee_nr,id:n.id,is_active:n.is_active,lod:n.lod,loq:n.loq,mark:n.mark,note_asm:n.note_asm,para_name_e:n.para_name_e,para_name_l:n.para_name_l,nature_name_e:n.nature_name_e,nature_name_l:n.nature_name_l,parameter_id:n.parameter_id,phone:n.phone,received_date:n.received_date,request_no:n.request_no,result_record:n.result_record,returned_date:n.returned_date,sale_man:n.sale_man,sample_code:n.sample_code,inner_code:n.inner_code,sample_id:n.sample_id,category_id:n.category_id,sample_name:n.sample_name,specification_name_e:n.specification_name_e,specification_name_l:n.specification_name_l,unit:n.unit,userid:n.userid,flag:!1,note_lab:n.note_lab,status:n.status,note:n.note,category_name_e:n.category_name_e,category_name_l:n.category_name_l,tat:n.tat,dept_name_e:n.dept_name_e,dept_name_l:n.dept_name_l,csp_name_e:n.csp_name_e,csp_name_l:n.csp_name_l,receiver_company:n.receiver_company,receiver_contact:n.receiver_contact,biller_company:n.biller_company,biller_contact:n.biller_contact,price:n.price,quantity:n.quantity,state_of_report:n.state_of_report});this._preparationlist=t,this.totalRow=e.rowCount,this.totalPage=e.totalPages})}_pageSizeChange(e){this.pageSize=e.target.value,this.loadData()}pageChanged(e){this.pageIndex=e.page,this.loadData()}loadDepartment(){let e={};e.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",e).subscribe(e=>{this._deptlist=e.data})}loadTestFamilyCSP(){let e={};e.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",e).subscribe(e=>{this._csplist=e.data})}_exportAll(e){console.log("Origin",e);let t=[];for(let n of e){let e="";4==n.status&&(e="en"==this.user.lang?f.a.s_done_en:f.a.s_done),3==n.status&&(e="en"==this.user.lang?f.a.s_validate_en:f.a.s_validate),2==n.status&&(e="en"==this.user.lang?f.a.s_techvalidate_en:f.a.s_techvalidate),1==n.status&&(e="en"==this.user.lang?f.a.s_prepare_en:f.a.s_prepare),0==n.status&&(e="en"==this.user.lang?f.a.s_none_en:f.a.s_none);let a=new Date(n.received_date).getTime()+864e5*n.tat,c="en"==this.user.lang?n.csp_name_e:n.csp_name_l,i=n.company_name_l+(null==n.phone?"":"/Phone: "+n.phone),o="";null!=n.receiver_company&&(o=n.receiver_company.company_name_l+(null==n.receiver_company.address_l?"":"/Address: "+n.receiver_company.address_l));let l="";null!=n.biller_company&&(l=n.biller_company.company_name_l+(null==n.biller_company.tax_code?"":"/Tax code: "+n.biller_company.tax_code)+(null==n.biller_company.address_l?"":"/Address: "+n.biller_company.address_l),null!=n.biller_contact&&(l+=(null==n.biller_contact.email?"":"/Email: "+n.biller_contact.email)+(null==n.biller_contact.phone?"":"/Phone: "+n.biller_contact.phone)));let s="Unknown";0==n.state_of_report&&(s="Draft"),1==n.state_of_report&&(s="Official"),2==n.state_of_report&&(s="Evicted"),3==n.state_of_report&&(s="Printed"),4==n.state_of_report&&(s="Cancel"),t.push({"Request No":n.request_no,"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,Note:null==n.note?"":n.note,"Note to Lab":null==n.note_lab?"":n.note_lab,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(a)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l,CSP:null==c?"":c,"Sample name":n.sample_name,Sender:i,Receiver:o,Biller:l,"Customer code":n.company_code,BD:n.employee_nr,Amount:this.formatPipe.localeString(n.price*n.quantity),"State of report":s})}this._excelService.exportAsExcelFile(t,"Preparation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+e.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+e.length+" "+f.a.record,"OK")}_exportAll1(){let e={};e.filter=this._keyword,e.domain=this.user.short_code,this._dataService.post("/lab/exportgetlistlabspre",e).subscribe(e=>{let t=[];for(let n of e.data){let e="";4==n.status&&(e="en"==this.user.lang?f.a.s_done_en:f.a.s_done),3==n.status&&(e="en"==this.user.lang?f.a.s_validate_en:f.a.s_validate),2==n.status&&(e="en"==this.user.lang?f.a.s_techvalidate_en:f.a.s_techvalidate),1==n.status&&(e="en"==this.user.lang?f.a.s_prepare_en:f.a.s_prepare),0==n.status&&(e="en"==this.user.lang?f.a.s_none_en:f.a.s_none);let a=new Date(n.received_date).getTime()+864e5*n.tat,c="en"==this.user.lang?n.csp_name_e:n.csp_name_l,i=n.company_name_l+(null==n.phone?"":"/Phone: "+n.phone),o="";null!=n.receiver_company&&(o=n.receiver_company.company_name_l+(null==n.receiver_company.address_l?"":"/Address: "+n.receiver_company.address_l));let l="";null!=n.biller_company&&(l=n.biller_company.company_name_l+(null==n.biller_company.tax_code?"":"/Tax code: "+n.biller_company.tax_code)+(null==n.biller_company.address_l?"":"/Address: "+n.biller_company.address_l),null!=n.biller_contact&&(l+=(null==n.biller_contact.email?"":"/Email: "+n.biller_contact.email)+(null==n.biller_contact.phone?"":"/Phone: "+n.biller_contact.phone)));let s="Unknown";0==n.state_of_report&&(s="Draft"),1==n.state_of_report&&(s="Official"),2==n.state_of_report&&(s="Evicted"),3==n.state_of_report&&(s="Printed"),4==n.state_of_report&&(s="Cancel"),t.push({"Request No":n.request_no,"Inner code":n.inner_code,Code:n.code,"Internal test":n.specification_name_l,Parameter:n.para_name_l,"Sample matrix":n.category_name_l,"Priority TAT":n.tat,Note:null==n.note?"":n.note,"Note to Lab":null==n.note_lab?"":n.note_lab,Status:e,"Received Date":r(new Date(n.received_date)).format("DD/MM/YYYY"),"Returned Date":r(new Date(a)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?n.dept_name_e:n.dept_name_l,CSP:null==c?"":c,"Sample name":n.sample_name,Sender:i,Receiver:o,Biller:l,"Customer code":n.company_code,BD:n.employee_nr,Amount:this.formatPipe.localeString(n.price*n.quantity),"State of report":s})}this._excelService.exportAsExcelFile(t,"Preparation-"+r(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_EXPORT_EN+" "+t.length+" "+f.a.record_en:f.a.MSG_EXPORT+" "+t.length+" "+f.a.record,"OK")})}orgValueChange1(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=r(e).format("YYYY-MM-DD")}orgValueChange2(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=r(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=r(e).format("YYYY-MM-DD")}_updateStatus(e,t){console.log(e),1==t?(e.status=t,p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_switch_en:f.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value?this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData()}):this.loadData()})):(console.log(e),this._dataService.post("/lab/updateResult",e).subscribe(e=>{this.loadData()}))}_switchFlagEdit(){for(let e of this._preparationlist)e.flag=!e.flag}_updateStatusItem(e,t){e.status=0==e.status?1:0,this._preparationlist.filter(t=>t.sample_id==e.sample_id&&t.parameter_id==e.parameter_id&&t.category_id==e.category_id)[0].status=e.status}_updateStatusv2(e){p.a.fire({title:"en"==this.user.lang?f.a.are_u_sure_switch_en:f.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(t=>{t.value&&this._dataService.post("/lab/updateResultPreparationv2",{getlist:e,ipaddress:this.user.ipaddress,user_id:this.user.id,short_code:this.user.short_code}).subscribe(e=>{this.loadData()})})}saveChange(){this.isSave=!0;let e={};e.id=this.entity.id,e.is_active=this.entity.is_active,e.ipaddress=this.user.ipaddress,e.user_id=this.user.id,e.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",e).subscribe(e=>{this.isSave=!1,this.loadData(),this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(v.a),b.bc(y.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(Ke.a),b.bc(w.s))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-req-preparelab"]],hostBindings:function(e,t){1&e&&b.rc("click",function(e){return t.ngOnInit(e)},!1,b.Sc)},decls:125,vars:124,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","13",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],[3,"ngClass","disabled","title","click",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.hc(10,"input",8),b.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),b.gc(),b.hc(11,"input",9),b.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),b.gc(),b.hc(12,"select",10),b.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),b.hc(13,"option",11),b.dd(14),b.wc(15,"translate"),b.wc(16,"translate"),b.gc(),b.bd(17,$a,2,2,"option",12),b.gc(),b.hc(18,"select",13),b.rc("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),b.hc(19,"option",11),b.dd(20),b.wc(21,"translate"),b.gc(),b.bd(22,Ka,2,2,"option",12),b.gc(),b.hc(23,"select",14),b.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),b.hc(24,"option",15),b.dd(25),b.wc(26,"translate"),b.gc(),b.hc(27,"option",16),b.dd(28),b.wc(29,"translate"),b.gc(),b.hc(30,"option",17),b.dd(31),b.wc(32,"translate"),b.gc(),b.hc(33,"option",18),b.dd(34),b.wc(35,"translate"),b.gc(),b.hc(36,"option",19),b.dd(37),b.wc(38,"translate"),b.gc(),b.hc(39,"option",20),b.dd(40),b.wc(41,"translate"),b.gc(),b.gc(),b.bd(42,ja,4,3,"button",21),b.bd(43,Xa,5,6,"button",22),b.bd(44,Wa,1,0,"img",23),b.gc(),b.gc(),b.hc(45,"div",24),b.hc(46,"div",25),b.hc(47,"select",26),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(48,"option",27),b.dd(49,"#10"),b.gc(),b.hc(50,"option",28),b.dd(51,"#25"),b.gc(),b.hc(52,"option",29),b.dd(53,"#50"),b.gc(),b.hc(54,"option",30),b.dd(55,"#100"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(56,"div",31),b.hc(57,"div",32),b.hc(58,"div",33),b.hc(59,"div",34),b.hc(60,"pagination",35),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(61,"div",36),b.hc(62,"a",37),b.dd(63),b.wc(64,"translate"),b.wc(65,"translate"),b.wc(66,"translate"),b.wc(67,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(68,"div",32),b.hc(69,"div",38),b.hc(70,"table",39),b.hc(71,"thead",40),b.hc(72,"tr"),b.hc(73,"th",41),b.dd(74,"#"),b.gc(),b.hc(75,"th",42),b.dd(76),b.wc(77,"translate"),b.gc(),b.hc(78,"th",43),b.dd(79),b.wc(80,"translate"),b.gc(),b.hc(81,"th",43),b.dd(82),b.wc(83,"translate"),b.gc(),b.hc(84,"th",43),b.dd(85),b.wc(86,"translate"),b.gc(),b.hc(87,"th",43),b.dd(88),b.wc(89,"translate"),b.gc(),b.hc(90,"th",43),b.dd(91),b.wc(92,"translate"),b.gc(),b.hc(93,"th",43),b.dd(94),b.wc(95,"translate"),b.gc(),b.hc(96,"th",43),b.dd(97),b.wc(98,"translate"),b.gc(),b.hc(99,"th",43),b.dd(100),b.wc(101,"translate"),b.gc(),b.hc(102,"th",43),b.dd(103),b.wc(104,"translate"),b.gc(),b.hc(105,"th",43),b.dd(106),b.wc(107,"translate"),b.gc(),b.hc(108,"th",43),b.dd(109),b.wc(110,"translate"),b.gc(),b.gc(),b.gc(),b.hc(111,"tbody"),b.bd(112,Ja,6,3,"ng-container",44),b.bd(113,hc,2,1,"ng-container",44),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(114,"div",32),b.hc(115,"div",33),b.hc(116,"div",34),b.hc(117,"pagination",35),b.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),b.gc(),b.gc(),b.hc(118,"div",36),b.hc(119,"a",37),b.dd(120),b.wc(121,"translate"),b.wc(122,"translate"),b.wc(123,"translate"),b.wc(124,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,62,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngModel",t._fDate)("bsConfig",b.Hc(122,gc)),b.Nb(1),b.Dc("ngModel",t._tDate)("bsConfig",b.Hc(123,gc)),b.Nb(1),b.Dc("ngModel",t.department_id),b.Nb(2),b.gd(" ",b.xc(15,64,"All")," ",b.xc(16,66,"Department")," "),b.Nb(3),b.Dc("ngForOf",t._deptlist),b.Nb(1),b.Dc("ngModel",t.testcsp_id),b.Nb(2),b.fd("",b.xc(21,68,"All")," CSP"),b.Nb(2),b.Dc("ngForOf",t._csplist),b.Nb(1),b.Dc("ngModel",t._status),b.Nb(2),b.fd(" ",b.xc(26,70,"All")," "),b.Nb(3),b.fd(" ",b.xc(29,72,"None")," "),b.Nb(3),b.fd(" ",b.xc(32,74,"Preparation")," "),b.Nb(3),b.fd(" ",b.xc(35,76,"Technical validation")," "),b.Nb(3),b.fd(" ",b.xc(38,78,"Validation")," "),b.Nb(3),b.fd(" ",b.xc(41,80,"Done")," "),b.Nb(2),b.Dc("ngIf",t._authenService.hasPermission("REQ-PRE","report")),b.Nb(1),b.Dc("ngIf",t._authenService.hasPermission("REQ-PRE","report")),b.Nb(1),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(13),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(64,82,"Total of records"),": ",t.totalRow," - ",b.xc(65,84,"Page")," ",t.pageIndex," ",b.xc(66,86,"of")," ",t.totalPage," ",b.xc(67,88,"page"),""),b.Nb(13),b.ed(b.xc(77,90,"Actions")),b.Nb(3),b.fd(" ",b.xc(80,92,"Order code")," "),b.Nb(3),b.fd(" ",b.xc(83,94,"Inner code")," "),b.Nb(3),b.fd(" ",b.xc(86,96,"Code")," "),b.Nb(3),b.ed(b.xc(89,98,"Internal testing")),b.Nb(3),b.ed(b.xc(92,100,"Parameter name")),b.Nb(3),b.ed(b.xc(95,102,"Sample matrix")),b.Nb(3),b.ed(b.xc(98,104,"Sample nature")),b.Nb(3),b.ed(b.xc(101,106,"Priority")),b.Nb(3),b.ed(b.xc(104,108,"Note")),b.Nb(3),b.ed(b.xc(107,110,"Note lab")),b.Nb(3),b.ed(b.xc(110,112,"Status")),b.Nb(3),b.Dc("ngIf",0==t._preparationlist.length),b.Nb(1),b.Dc("ngIf",t._preparationlist.length>0),b.Nb(4),b.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),b.Nb(3),b.id("",b.xc(121,114,"Total of records"),": ",t.totalRow," - ",b.xc(122,116,"Page")," ",t.pageIndex," ",b.xc(123,118,"of")," ",t.totalPage," ",b.xc(124,120,"page"),""))},directives:[c.c,c.n,c.q,D.b,D.a,c.x,c.r,c.A,a.p,a.q,M.a,a.o],pipes:[T.c],styles:[""]}),e})();const mc=["tagInput"];function _c(e,t){if(1&e){const e=b.ic();b.hc(0,"button",37),b.rc("click",function(){b.Uc(e);const t=b.vc(),n=b.Rc(88);return t._openModal(n,null)}),b.dd(1),b.wc(2,"translate"),b.gc()}2&e&&(b.Nb(1),b.fd(" ",b.xc(2,1,"Add new request")," "))}function pc(e,t){if(1&e){const e=b.ic();b.hc(0,"button",38),b.rc("click",function(){b.Uc(e);const t=b.vc();return t._exportAll(t.exportList)}),b.cc(1,"i",39),b.dd(2),b.wc(3,"translate"),b.gc()}2&e&&(b.Nb(2),b.fd(" ",b.xc(3,1,"Export")," "))}function fc(e,t){1&e&&b.cc(0,"img",40)}function bc(e,t){if(1&e){const e=b.ic();b.hc(0,"div",41),b.hc(1,"div",42),b.hc(2,"pagination",43),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().pageIndex=t})("pageChanged",function(t){return b.Uc(e),b.vc().pageChanged(t)}),b.gc(),b.gc(),b.hc(3,"div",44),b.hc(4,"a",45),b.dd(5),b.wc(6,"translate"),b.wc(7,"translate"),b.wc(8,"translate"),b.wc(9,"translate"),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(2),b.Dc("boundaryLinks",!0)("totalItems",e.totalRow)("ngModel",e.pageIndex)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize),b.Nb(3),b.id("",b.xc(6,12,"Total of records"),": ",e.totalRow," - ",b.xc(7,14,"Page")," ",e.pageIndex," ",b.xc(8,16,"of")," ",e.totalPage," ",b.xc(9,18,"page"),"")}}function vc(e,t){1&e&&(b.fc(0),b.hc(1,"tr"),b.hc(2,"td",46),b.hc(3,"h4"),b.dd(4),b.wc(5,"translate"),b.gc(),b.gc(),b.gc(),b.ec()),2&e&&(b.Nb(4),b.ed(b.xc(5,1,"No records now!!!")))}function yc(e,t){1&e&&(b.hc(0,"span"),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Cash")))}function xc(e,t){1&e&&(b.hc(0,"span"),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Transfer bank")))}function Sc(e,t){1&e&&(b.hc(0,"span"),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Visa/Master")))}function Nc(e,t){1&e&&(b.hc(0,"span"),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Cheque")))}function wc(e,t){1&e&&(b.hc(0,"span",59),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Unpaid")))}function Dc(e,t){1&e&&(b.hc(0,"span",60),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Delivery-Unpaid")))}function Mc(e,t){1&e&&(b.hc(0,"span",61),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Delivery-Paid")))}function Cc(e,t){1&e&&(b.hc(0,"span",62),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Cancel-Unpaid")))}function Tc(e,t){1&e&&(b.hc(0,"span",63),b.dd(1),b.wc(2,"translate"),b.gc()),2&e&&(b.Nb(1),b.ed(b.xc(2,1,"Cancel-Refund")))}function Ic(e,t){if(1&e&&(b.hc(0,"span",69),b.dd(1),b.gc()),2&e){const e=t.$implicit;b.Nb(1),b.ed(e)}}function kc(e,t){if(1&e&&(b.hc(0,"tr"),b.hc(1,"td",66),b.dd(2),b.gc(),b.hc(3,"td",66),b.dd(4),b.gc(),b.hc(5,"td",66),b.dd(6),b.gc(),b.hc(7,"td",66),b.dd(8),b.gc(),b.hc(9,"td",66),b.dd(10),b.gc(),b.hc(11,"td",66),b.bd(12,Ic,2,1,"span",67),b.gc(),b.hc(13,"td",66),b.dd(14),b.gc(),b.hc(15,"td",68),b.dd(16),b.wc(17,"number"),b.gc(),b.hc(18,"td",68),b.dd(19),b.wc(20,"number"),b.gc(),b.gc()),2&e){const e=t.$implicit,n=t.index,a=b.vc(4);b.Nb(2),b.ed(n+1),b.Nb(2),b.fd(" ","en"==a.user.lang?e.fabric_name_e:e.fabric_name_l," "),b.Nb(2),b.fd(" ",e.color_name_l," "),b.Nb(2),b.ed(e.code),b.Nb(2),b.fd(" ",e.quantity_info," "),b.Nb(2),b.Dc("ngForOf",e.tags),b.Nb(2),b.fd(" ",e.total," "),b.Nb(2),b.fd(" ",b.xc(17,9,e.price)," "),b.Nb(3),b.fd(" ",b.xc(20,11,e.amount)," ")}}function Pc(e,t){if(1&e&&(b.hc(0,"tr"),b.hc(1,"td",64),b.hc(2,"strong"),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"div",28),b.hc(6,"table",65),b.hc(7,"thead"),b.hc(8,"th",66),b.dd(9,"#"),b.gc(),b.hc(10,"th",66),b.dd(11),b.wc(12,"translate"),b.gc(),b.hc(13,"th",66),b.dd(14),b.wc(15,"translate"),b.gc(),b.hc(16,"th",66),b.dd(17),b.wc(18,"translate"),b.gc(),b.hc(19,"th",66),b.dd(20),b.wc(21,"translate"),b.gc(),b.hc(22,"th",66),b.dd(23),b.wc(24,"translate"),b.gc(),b.hc(25,"th",66),b.dd(26),b.wc(27,"translate"),b.gc(),b.hc(28,"th",66),b.dd(29),b.wc(30,"translate"),b.gc(),b.hc(31,"th",66),b.dd(32),b.wc(33,"translate"),b.gc(),b.gc(),b.hc(34,"tbody"),b.bd(35,kc,21,13,"tr",47),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()),2&e){const e=b.vc().$implicit;b.Nb(3),b.ed(b.xc(4,10,"Items Information")),b.Nb(8),b.fd(" ",b.xc(12,12,"Type of fabric")," "),b.Nb(3),b.fd(" ",b.xc(15,14,"Color name")," "),b.Nb(3),b.fd(" ",b.xc(18,16,"Mix-Fabric code")," "),b.Nb(3),b.fd(" ",b.xc(21,18,"Quantity")," "),b.Nb(3),b.fd(" ",b.xc(24,20,"Description")," "),b.Nb(3),b.fd(" ",b.xc(27,22,"Total")," (kg) "),b.Nb(3),b.fd(" ",b.xc(30,24,"Price")," "),b.Nb(3),b.fd(" ",b.xc(33,26,"Amount")," "),b.Nb(3),b.Dc("ngForOf",e.orders)}}function Rc(e,t){if(1&e){const e=b.ic();b.fc(0),b.hc(1,"tr"),b.hc(2,"td"),b.dd(3),b.gc(),b.hc(4,"td"),b.hc(5,"input",48),b.rc("change",function(n){b.Uc(e);const a=t.$implicit;return b.vc(2).selectItem(n,a.id)}),b.gc(),b.gc(),b.hc(6,"td"),b.dd(7),b.wc(8,"date"),b.gc(),b.hc(9,"td",49),b.rc("click",function(){const e=t.$implicit;return e.expanded=!e.expanded}),b.dd(10),b.gc(),b.hc(11,"td"),b.dd(12),b.gc(),b.hc(13,"td"),b.dd(14),b.gc(),b.hc(15,"td"),b.dd(16),b.wc(17,"number"),b.gc(),b.hc(18,"td"),b.bd(19,yc,3,3,"span",35),b.bd(20,xc,3,3,"span",35),b.bd(21,Sc,3,3,"span",35),b.bd(22,Nc,3,3,"span",35),b.gc(),b.hc(23,"td"),b.bd(24,wc,3,3,"span",50),b.bd(25,Dc,3,3,"span",51),b.bd(26,Mc,3,3,"span",52),b.bd(27,Cc,3,3,"span",53),b.bd(28,Tc,3,3,"span",54),b.gc(),b.hc(29,"td"),b.dd(30),b.gc(),b.hc(31,"td"),b.hc(32,"button",55),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc(2),c=b.Rc(88);return a._openModal(c,n)}),b.wc(33,"translate"),b.cc(34,"i",56),b.gc(),b.hc(35,"button",57),b.rc("click",function(){b.Uc(e);const n=t.$implicit;return b.vc(2).printQuotationAsPDF(n)}),b.wc(36,"translate"),b.cc(37,"i",58),b.gc(),b.gc(),b.gc(),b.bd(38,Pc,36,28,"tr",35),b.ec()}if(2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(3),b.ed(n+1+a.pageSize*(a.pageIndex-1)),b.Nb(2),b.Fc("name","ckU1",n+1,""),b.Dc("checked",a.exportList.includes(e.id)),b.Nb(2),b.ed(b.yc(8,21,e.issue_date,"dd/MM/yyyy HH:mm")),b.Nb(3),b.fd(" ",e.code," "),b.Nb(2),b.fd(" ","en"==a.user.lang?e.company_name_e:e.company_name_l," "),b.Nb(2),b.ed(e.phone),b.Nb(2),b.ed(b.xc(17,24,e.total)),b.Nb(3),b.Dc("ngIf",0==e.payment),b.Nb(1),b.Dc("ngIf",1==e.payment),b.Nb(1),b.Dc("ngIf",2==e.payment),b.Nb(1),b.Dc("ngIf",3==e.payment),b.Nb(2),b.Dc("ngIf",0==e.is_active),b.Nb(1),b.Dc("ngIf",1==e.is_active),b.Nb(1),b.Dc("ngIf",2==e.is_active),b.Nb(1),b.Dc("ngIf",3==e.is_active),b.Nb(1),b.Dc("ngIf",4==e.is_active),b.Nb(2),b.ed(e.username),b.Nb(2),b.Dc("ngbTooltip",b.xc(33,26,"Edit")),b.Nb(3),b.Dc("ngbTooltip",b.xc(36,28,"Print")),b.Nb(3),b.Dc("ngIf",e.expanded)}}function Ec(e,t){if(1&e&&(b.fc(0),b.bd(1,Rc,39,30,"ng-container",47),b.ec()),2&e){const e=b.vc();b.Nb(1),b.Dc("ngForOf",e._categories)}}function Ac(e,t){if(1&e){const e=b.ic();b.hc(0,"div",41),b.hc(1,"div",42),b.hc(2,"pagination",43),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().pageIndex=t})("pageChanged",function(t){return b.Uc(e),b.vc().pageChanged(t)}),b.gc(),b.gc(),b.hc(3,"div",44),b.hc(4,"a",45),b.dd(5),b.wc(6,"translate"),b.wc(7,"translate"),b.wc(8,"translate"),b.wc(9,"translate"),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(2),b.Dc("boundaryLinks",!0)("totalItems",e.totalRow)("ngModel",e.pageIndex)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize),b.Nb(3),b.id("",b.xc(6,12,"Total of records"),": ",e.totalRow," - ",b.xc(7,14,"Page")," ",e.pageIndex," ",b.xc(8,16,"of")," ",e.totalPage," ",b.xc(9,18,"page"),"")}}function Uc(e,t){if(1&e){const e=b.ic();b.hc(0,"ng-select",100),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).entity.customer_id=t})("change",function(){b.Uc(e);const t=b.vc(2);return t.loadLabel(t.entity.customer_id)}),b.wc(1,"translate"),b.wc(2,"translate"),b.gc()}if(2&e){const e=b.vc(2);b.Dc("items",e._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("bindLabel","en"==e.user.lang?"company_name_e":"company_name_l")("ngModel",e.entity.customer_id)("placeholder",b.xc(1,8,"Please choose"))("notFoundText",b.xc(2,10,"Not found item"))}}const Fc=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function Oc(e,t){if(1&e){const e=b.ic();b.hc(0,"input",101),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2)._fdate=t})("bsValueChange",function(t){return b.Uc(e),b.vc(2).orgValueChange(t)}),b.wc(1,"translate"),b.gc()}if(2&e){const e=b.vc(2);b.Dc("placeholder",b.xc(1,3,"Issue of date"))("ngModel",e._fdate)("bsConfig",b.Hc(5,Fc))}}function Yc(e,t){if(1&e){const e=b.ic();b.hc(0,"input",102),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2)._dt1=t}),b.gc()}if(2&e){const e=b.vc(2);b.Dc("ngModel",e._dt1)}}function Lc(e,t){if(1&e){const e=b.ic();b.hc(0,"div",77),b.hc(1,"div",84),b.hc(2,"label",103),b.dd(3),b.wc(4,"translate"),b.gc(),b.hc(5,"select",104),b.rc("change",function(){b.Uc(e);const t=b.vc(2);return 2!=t.entity.is_active?null:t._confirmFinalOrder()})("ngModelChange",function(t){return b.Uc(e),b.vc(2).entity.is_active=t}),b.hc(6,"option",20),b.dd(7),b.wc(8,"translate"),b.gc(),b.hc(9,"option",21),b.dd(10),b.wc(11,"translate"),b.gc(),b.hc(12,"option",22),b.dd(13),b.wc(14,"translate"),b.gc(),b.hc(15,"option",23),b.dd(16),b.wc(17,"translate"),b.gc(),b.hc(18,"option",24),b.dd(19),b.wc(20,"translate"),b.gc(),b.gc(),b.gc(),b.gc()}if(2&e){const e=b.vc(2);b.Nb(3),b.ed(b.xc(4,8,"Status")),b.Nb(2),b.Dc("disabled",2==e.entity.is_active)("ngModel",e.entity.is_active),b.Nb(2),b.ed(b.xc(8,10,"Unpaid")),b.Nb(3),b.ed(b.xc(11,12,"Delivery-Unpaid")),b.Nb(3),b.ed(b.xc(14,14,"Delivery-Paid")),b.Nb(3),b.ed(b.xc(17,16,"Cancel-Unpaid")),b.Nb(3),b.ed(b.xc(20,18,"Cancel-Refund"))}}function qc(e,t){if(1&e){const e=b.ic();b.hc(0,"div",79),b.hc(1,"label",105),b.dd(2),b.wc(3,"translate"),b.gc(),b.hc(4,"ng-select",106),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc(2).selectId=t})("change",function(){b.Uc(e);const t=b.vc(2);return t.addItem(t.selectId)}),b.wc(5,"translate"),b.wc(6,"translate"),b.gc(),b.gc()}if(2&e){const e=b.vc(2);b.Nb(2),b.ed(b.xc(3,8,"Items")),b.Nb(2),b.Dc("items",e._fabrics)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",e.selectId)("placeholder",b.xc(5,10,"Please choose"))("notFoundText",b.xc(6,12,"Not found item"))}}function zc(e,t){1&e&&(b.hc(0,"th",66),b.cc(1,"i",107),b.gc())}function Gc(e,t){if(1&e){const e=b.ic();b.hc(0,"td",66),b.hc(1,"a",114),b.rc("click",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2).removeItem(t.mixfabric_id)}),b.cc(2,"i",107),b.gc(),b.gc()}}function Vc(e,t){if(1&e){const e=b.ic();b.hc(0,"input",115),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.quantity_info=t})("change",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2).updateItem(t)}),b.gc()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Fc("id","ck",t+1,""),b.Fc("name","ck",t+1,""),b.Dc("ngModel",n.quantity_info)}}function Bc(e,t){if(1&e&&(b.hc(0,"span"),b.dd(1),b.gc()),2&e){const e=b.vc().$implicit;b.Nb(1),b.ed(e.quantity_info)}}function Hc(e,t){if(1&e){const e=b.ic();b.hc(0,"input",116),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.tag=t})("keyup.enter",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._addTag(t)})("change",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2)._addTag(t)}),b.gc()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Fc("id","tag",t+1,""),b.Fc("name","tag",t+1,""),b.Dc("ngModel",n.tag)}}function Qc(e,t){if(1&e){const e=b.ic();b.hc(0,"span",117),b.rc("click",function(){b.Uc(e);const n=t.$implicit,a=b.vc().$implicit,c=b.vc(2);return 0==c.entity.is_active?c._removeTag(a,n):null}),b.dd(1),b.gc()}if(2&e){const e=t.$implicit;b.Nb(1),b.ed(e)}}function $c(e,t){if(1&e){const e=b.ic();b.hc(0,"input",118),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().$implicit.price=t})("change",function(){b.Uc(e);const t=b.vc().$implicit;return b.vc(2).updateItem(t)}),b.gc()}if(2&e){const e=b.vc(),t=e.index,n=e.$implicit;b.Fc("id","p",t+1,""),b.Fc("name","p",t+1,""),b.Dc("ngModel",n.price)}}function Kc(e,t){if(1&e&&(b.hc(0,"span"),b.dd(1),b.wc(2,"number"),b.gc()),2&e){const e=b.vc().$implicit;b.Nb(1),b.ed(b.xc(2,1,e.price))}}function jc(e,t){if(1&e&&(b.hc(0,"tr"),b.bd(1,Gc,3,0,"td",96),b.hc(2,"td",66),b.dd(3),b.gc(),b.hc(4,"td",66),b.dd(5),b.gc(),b.hc(6,"td",66),b.dd(7),b.gc(),b.hc(8,"td",66),b.dd(9),b.gc(),b.hc(10,"td",66),b.bd(11,Vc,1,3,"input",108),b.bd(12,Bc,2,1,"span",35),b.gc(),b.hc(13,"td",66),b.bd(14,Hc,1,3,"input",109),b.dd(15," ("),b.hc(16,"span",82),b.dd(17),b.gc(),b.dd(18,") "),b.hc(19,"small",110),b.bd(20,Qc,2,1,"span",111),b.gc(),b.gc(),b.hc(21,"td",112),b.dd(22),b.wc(23,"number"),b.gc(),b.hc(24,"td",68),b.bd(25,$c,1,3,"input",113),b.bd(26,Kc,3,3,"span",35),b.gc(),b.hc(27,"td",68),b.dd(28),b.wc(29,"number"),b.gc(),b.gc()),2&e){const e=t.$implicit,n=t.index,a=b.vc(2);b.Nb(1),b.Dc("ngIf",0==a.entity.is_active),b.Nb(2),b.ed(n+1),b.Nb(2),b.fd(" ",e.fabric_name," "),b.Nb(2),b.ed(e.color_name_l),b.Nb(2),b.ed(e.code),b.Nb(2),b.Dc("ngIf",0==a.entity.is_active),b.Nb(1),b.Dc("ngIf",0!=a.entity.is_active),b.Nb(2),b.Dc("ngIf",0==a.entity.is_active),b.Nb(3),b.ed(e.count),b.Nb(3),b.Dc("ngForOf",e.tags),b.Nb(2),b.fd(" ",b.xc(23,14,e.total)," "),b.Nb(3),b.Dc("ngIf",0==a.entity.is_active),b.Nb(1),b.Dc("ngIf",0!=a.entity.is_active),b.Nb(2),b.fd(" ",b.xc(29,16,e.amount)," ")}}function Xc(e,t){1&e&&(b.fc(0),b.hc(1,"a",119),b.cc(2,"img",120),b.dd(3),b.wc(4,"translate"),b.gc(),b.ec()),2&e&&(b.Nb(3),b.fd(" ",b.xc(4,1,"Processing")," "))}function Wc(e,t){if(1&e){const e=b.ic();b.hc(0,"button",121),b.rc("click",function(){b.Uc(e);const t=b.vc(2);return t.printQuotationAsPDF(t.entity)}),b.wc(1,"translate"),b.cc(2,"i",58),b.dd(3),b.wc(4,"translate"),b.gc()}2&e&&(b.Dc("ngbTooltip",b.xc(1,2,"Print")),b.Nb(3),b.fd(" ",b.xc(4,4,"Print")," "))}function Jc(e,t){if(1&e&&(b.hc(0,"button",122),b.dd(1),b.wc(2,"translate"),b.gc()),2&e){b.vc();const e=b.Rc(1);b.Dc("disabled",!e.valid),b.Nb(1),b.fd(" ",b.xc(2,2,"Save")," ")}}function Zc(e,t){if(1&e){const e=b.ic();b.hc(0,"form",70,71),b.rc("ngSubmit",function(){return b.Uc(e),b.vc().saveChange()}),b.hc(2,"div",72),b.hc(3,"h4",73),b.dd(4),b.wc(5,"translate"),b.wc(6,"translate"),b.wc(7,"translate"),b.gc(),b.hc(8,"button",74),b.rc("click",function(){return t.$implicit.dismiss("Cross click")}),b.hc(9,"span",75),b.dd(10,"\xd7"),b.gc(),b.gc(),b.gc(),b.hc(11,"div",76),b.hc(12,"div",1),b.hc(13,"div",77),b.hc(14,"div",78),b.hc(15,"div",79),b.hc(16,"label",80),b.hc(17,"strong"),b.dd(18),b.wc(19,"translate"),b.gc(),b.gc(),b.gc(),b.hc(20,"div",79),b.hc(21,"label",81),b.dd(22),b.wc(23,"translate"),b.hc(24,"span",82),b.dd(25,"(*)"),b.gc(),b.gc(),b.bd(26,Uc,3,12,"ng-select",83),b.gc(),b.hc(27,"div",77),b.hc(28,"div",84),b.hc(29,"label",85),b.dd(30),b.wc(31,"translate"),b.hc(32,"span",82),b.dd(33,"(*)"),b.gc(),b.gc(),b.bd(34,Oc,2,6,"input",86),b.bd(35,Yc,1,1,"input",87),b.gc(),b.gc(),b.hc(36,"div",77),b.hc(37,"div",84),b.hc(38,"label",88),b.dd(39),b.wc(40,"translate"),b.gc(),b.hc(41,"select",89),b.rc("ngModelChange",function(t){return b.Uc(e),b.vc().entity.payment=t}),b.hc(42,"option",90),b.dd(43),b.wc(44,"translate"),b.gc(),b.hc(45,"option",20),b.dd(46),b.wc(47,"translate"),b.gc(),b.hc(48,"option",21),b.dd(49),b.wc(50,"translate"),b.gc(),b.hc(51,"option",22),b.dd(52),b.wc(53,"translate"),b.gc(),b.hc(54,"option",23),b.dd(55),b.wc(56,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(57,Lc,21,20,"div",91),b.hc(58,"div",79),b.hc(59,"div",84),b.hc(60,"label",92),b.dd(61),b.wc(62,"translate"),b.gc(),b.dd(63,"\xa0 "),b.hc(64,"span",93),b.hc(65,"strong"),b.dd(66),b.wc(67,"number"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(68,"div",77),b.hc(69,"div",78),b.hc(70,"div",79),b.hc(71,"label",80),b.hc(72,"strong"),b.dd(73),b.wc(74,"translate"),b.gc(),b.gc(),b.gc(),b.bd(75,qc,7,14,"div",94),b.hc(76,"div",95),b.hc(77,"div",28),b.hc(78,"table",65),b.hc(79,"thead"),b.bd(80,zc,2,0,"th",96),b.hc(81,"th",66),b.dd(82,"#"),b.gc(),b.hc(83,"th",66),b.dd(84),b.wc(85,"translate"),b.gc(),b.hc(86,"th",66),b.dd(87),b.wc(88,"translate"),b.gc(),b.hc(89,"th",66),b.dd(90),b.wc(91,"translate"),b.gc(),b.hc(92,"th",66),b.dd(93),b.wc(94,"translate"),b.gc(),b.hc(95,"th",66),b.dd(96),b.wc(97,"translate"),b.gc(),b.hc(98,"th",66),b.dd(99),b.wc(100,"translate"),b.gc(),b.hc(101,"th",66),b.dd(102),b.wc(103,"translate"),b.gc(),b.hc(104,"th",66),b.dd(105),b.wc(106,"translate"),b.gc(),b.gc(),b.hc(107,"tbody"),b.bd(108,jc,30,18,"tr",47),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(109,"div",97),b.bd(110,Xc,5,3,"ng-container",35),b.bd(111,Wc,5,6,"button",98),b.bd(112,Jc,3,4,"button",99),b.gc(),b.gc()}if(2&e){const e=b.vc();b.Nb(4),b.gd(" ","ADD"==e._flagModal?b.xc(5,34,"Add new"):b.xc(6,36,"Update")," #",b.xc(7,38,e.entity.code)," "),b.Nb(14),b.ed(b.xc(19,40,"General Information")),b.Nb(4),b.fd("",b.xc(23,42,"Customer")," "),b.Nb(4),b.Dc("ngIf",0==e.entity.is_active),b.Nb(4),b.fd("",b.xc(31,44,"Issue of date")," "),b.Nb(4),b.Dc("ngIf",0==e.entity.is_active),b.Nb(1),b.Dc("ngIf",0!=e.entity.is_active),b.Nb(4),b.ed(b.xc(40,46,"Payment method")),b.Nb(2),b.Dc("ngModel",e.entity.payment)("disabled",0!=e.entity.is_active),b.Nb(2),b.fd(" ",b.xc(44,48,"Please choose")," "),b.Nb(3),b.ed(b.xc(47,50,"Cash")),b.Nb(3),b.ed(b.xc(50,52,"Transfer bank")),b.Nb(3),b.ed(b.xc(53,54,"Visa/Mater")),b.Nb(3),b.ed(b.xc(56,56,"Cheque")),b.Nb(2),b.Dc("ngIf","ADD"!=e._flagModal),b.Nb(4),b.ed(b.xc(62,58,"Total")),b.Nb(5),b.fd("",b.xc(67,60,e.entity.total)," VND"),b.Nb(7),b.ed(b.xc(74,62,"Items Information")),b.Nb(2),b.Dc("ngIf",0==e.entity.is_active),b.Nb(5),b.Dc("ngIf",0==e.entity.is_active),b.Nb(4),b.fd(" ",b.xc(85,64,"Type of fabric")," "),b.Nb(3),b.fd(" ",b.xc(88,66,"Color name")," "),b.Nb(3),b.fd(" ",b.xc(91,68,"Mix-Fabric code")," "),b.Nb(3),b.ed(b.xc(94,70,"Quantity")),b.Nb(3),b.fd(" ",b.xc(97,72,"Description")," "),b.Nb(3),b.fd(" ",b.xc(100,74,"Total")," (kg) "),b.Nb(3),b.ed(b.xc(103,76,"Price")),b.Nb(3),b.ed(b.xc(106,78,"Amount")),b.Nb(3),b.Dc("ngForOf",e._orders),b.Nb(2),b.Dc("ngIf",e.isSave),b.Nb(1),b.Dc("ngIf",null!=e.entity.id),b.Nb(1),b.Dc("ngIf",!e.isSave&&2!=e.entity.is_active)}}g.a.vfs=m.a.pdfMake.vfs;const ei=[{path:"",children:[{path:"list",component:Qa,data:{title:"Request Management",breadcrumb:"Request Management"}},{path:"detail/:id",component:zn,data:{title:"Request detail",breadcrumb:"Request detail"}},{path:"lab-preparation",component:uc,data:{title:"Lab preparation",breadcrumb:"Lab preparation"}},{path:"lab-result",component:Ct,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"lab-validation",component:Wt,data:{title:"Lab validation",breadcrumb:"Lab validation"}},{path:"lab-report-validation",component:Ee,data:{title:"Lab Report Validation",breadcrumb:"Lab Report Validation"}},{path:"lab-report-validation/:id",component:Ee,data:{title:"Validation"}},{path:"lab-report",component:Qe,data:{title:"Lab report",breadcrumb:"Lab report"}},{path:"lab-results/:id",component:le,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"orders-fabric",component:(()=>{class e{constructor(e,t,n,a,c,i,o,r,l){this._authService=e,this.modalService=t,this._dataService=n,this._route=a,this._notifyService=c,this._uploadService=i,this._excelService=o,this.formatPipe=r,this._utilityServce=l,this.isSave=!1,this.isSaveSub=!1,this.isImport=!1,this._flagModal="ADD",this._flagSubModal="",this._title="",this._subTitle="",this.baseFolder=d.a.BASE_API+"/",this._categories=[],this.exportList=[],this.entity={},this.entitySub={},this.formData=new FormData,this.pageIndex=1,this.pageSize=10,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._customers=[],this._fdate=null,this._dt1=null,this._fabrics=[],this._fabricsCompare=[],this._orders=[],this.selectId=null,this.tags=["html","Angular"],this._numTags=0,!1!==e.checkAccess("FAB-ORDER")&&!1!==e.hasPermission("FAB-ORDER","read")||this._route.navigate(["/error/404"]),this.socket=s()(d.a.BASE_API)}ngOnInit(){this.user=this._authService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",e=>{this.loadData(),this.loadCompany(),this.loadProducts()})}loadData(){let e={};e.page=this.pageIndex,e.limit=this.pageSize,e.filter=this._keyword,this._dataService.post("/order/getall",e).subscribe(e=>{console.log("Test",e),this._categories=e.data;for(let t of this._categories){let e=[];for(let n of t.orders)e.push({amount:n.amount,code:n.code,color_id:n.color_id,color_name_e:n.color_name_e,color_name_l:n.color_name_l,description:n.description,is_active:n.is_active,mixfabric_id:n.mixfabric_id,name_e:n.name_e,name_l:n.name_l,order_id:n.order_id,price:n.price,provider_name_e:n.provider_name_e,provider_name_l:n.provider_name_l,quantity_info:n.quantity_info,total:n.total,type_id:n.type_id,tags:JSON.parse(n.description)});t.orders=e}console.log(this._categories),this.totalRow=e.rowCount,this.totalPage=e.totalPages})}loadProducts(){this._dataService.post("/mix-fabric/getallnp",null).subscribe(e=>{let t=[];for(let n of e.data){let e="Type: "+(0==n.type_id?"Neck":1==n.type_id?"Hand":"Fabric");"en"!=this.user.lang&&(e="Lo\u1ea1i: "+(0==n.type_id?"Bo c\u1ed5":1==n.type_id?"Bo tay":"V\u1ea3i")),t.push({id:n.id,name:n.code+"-"+e+("en"==this.user.lang?"-Quantity (segment/kg):":"-S\u1ed1 l\u01b0\u1ee3ng (c\xe2y/kg):")+n.total_segment_re+"/"+n.total_kg_re})}this._fabrics=t,this._fabricsCompare=e.data})}loadCompany(){let e={};e.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",e).subscribe(e=>{this._customers=e.data})}_pageSizeChange(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}pageChanged(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}selectAll(e){e.target.checked?(this.exportList=[],this._categories.forEach(e=>this.exportList.push(e.id))):this.exportList=[]}selectItem(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(e=>e!==t)}loadLabel(e){let t=this._customers.filter(t=>t.id==e);this._flagSubModal=null==e?"":t[0].code_link}_openModal(e,t){if(this.loadCompany(),this.loadProducts(),null==t)this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.code=null,this.entity.payment=null,this.entity.total=0,this._orders=[],this._fdate=null,this._dt1=null,this.entity.is_active=0,this._flagSubModal="";else{this._flagModal="UPDATE",this._flagSubModal="en"==this.user.lang?t.company_name_e:t.company_name_l,this.entity=t,this._fdate=new Date(t.issue_date),this._dt1=r(new Date(t.issue_date)).format("DD-MM-YYYY HH:mm"),this._orders=t.orders,console.log("Order",this._orders);for(let e of this._orders){e.fabric_name="en"==this.user.lang?e.name_e:e.name_l,e.tag=null,e.tags=null==e.description?[]:JSON.parse(e.description),e.total_count=Math.ceil(e.quantity_info);let t=0;for(let n of e.tags)t+=n.split("-").length;e.count=t}}this.modalService.open(e,{size:"xl",centered:!0})}saveChange(){let e={};e=this.entity,e.orders=this._orders,e.issue_date=this._dt1,e.created_by=this.user.id,e.ipaddress=this.user.ipaddress,e.short_code=this.user.short_code;let t=!1;for(let n of this._orders)console.log("QT",n.total_count),n.total_count>n.count&&(t=!0);t?this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_ORDER_EN:f.a.MSG_ERROR_ORDER,"en"==this.user.lang?f.a.error_title_en:f.a.error_title):(console.log("save",e),"ADD"==this._flagModal?this._dataService.post("/order/add",e).subscribe(e=>{this.socket.emit("refresh",{}),"failed"!=e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_ADD_EN:f.a.MSG_ADD,"OK"),this.modalService.dismissAll()):this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}):this._dataService.post("/order/update",e).subscribe(e=>{console.log(e),this.socket.emit("refresh",{}),"failed"!=e.result?(this._notifyService.showSuccess("en"==this.user.lang?f.a.MSG_UPDATE_EN:f.a.MSG_UPDATE,"OK"),this.modalService.dismissAll()):this._notifyService.showError("en"==this.user.lang?f.a.MSG_ERROR_EN:f.a.MSG_ERROR,"en"==this.user.lang?f.a.error_title_en:f.a.error_title)}))}orgValueChange(e){null!=e&&"Invalid date"!=e?(this._fdate=e,this._dt1=r(this._fdate).format("YYYY-MM-DD HH:mm")):(this._fdate=null,this._dt1=null)}addItem(e){if(null!=e){let t={};t.id=e,this._dataService.post("/mix-fabric/detail",t).subscribe(e=>{let t={};t={mixfabric_id:e.data.id,color_name_l:e.data.color_name_l,color_name_e:e.data.color_name_e,code:e.data.code,fabric_name:"en"==this.user.lang?e.data.cat_name_e:e.data.cat_name_l,price:0,quantity_info:1,amount:0,is_active:!0,tag:null,tags:null==e.data.description||null==e.data.description?[]:JSON.parse(e.data.description),total:0,type_id:e.data.type_id,count:0,total_count:Math.ceil(1)},this._orders.length>0&&this._orders.filter(t=>t.mixfabric_id==e.data.id).length>0?(this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].quantity_info+=1,0==e.data.type_id||1==e.data.type_id?this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].quantity_info>e.data.qty_kg_after&&(this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].quantity_info=e.data.qty_kg_after):this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].quantity_info>e.data.quantity_tree&&(this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].quantity_info=e.data.quantity_tree),this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].amount=this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].total*this._orders.filter(t=>t.mixfabric_id==e.data.id)[0].price):this._orders.push(t),this.selectId=null;let n=0;for(let a of this._orders)n+=parseInt(a.amount);this.entity.total=n;for(let a of this._orders)a.total_count=Math.ceil(a.quantity_info)})}}removeItem(e){const t=this._orders.findIndex(t=>t.mixfabric_id==e);t>-1&&this._orders.splice(t,1);let n=0;for(let a of this._orders)n+=parseInt(a.amount),a.total_count=Math.ceil(a.quantity_info);this.entity.total=n,this.socket.emit("refresh",{})}updateItem(e){let t=this._fabricsCompare.filter(t=>t.id==e.mixfabric_id);0==t[0].type_id||1==t[0].type_id?parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info)>parseFloat(t[0].qty_kg_after)&&(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info=parseFloat(t[0].qty_kg_after)):parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info)>parseFloat(t[0].quantity_tree)&&(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].quantity_info=parseFloat(t[0].quantity_tree)),this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].amount=parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].total)*parseFloat(this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].price);let n=0;for(let a of this._orders)n+=parseFloat(a.amount),a.total_count=Math.ceil(a.quantity_info);this.entity.total=n,this.socket.emit("refresh",{})}_confirmFinalOrder(){p.a.fire({title:"en"==this.user.lang?f.a.are_you_sure_en:f.a.are_you_sure,text:"en"==this.user.lang?f.a.MSG_CONFIRM_ORDER_EN:f.a.MSG_CONFIRM_ORDER,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?f.a.cancel_en:f.a.cancel,confirmButtonText:"en"==this.user.lang?f.a.confirmtext_en:f.a.confirmtext}).then(e=>{e.value&&this.saveChange()})}_addTag(e){console.log(e);let t=this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0];if(t.total_count<t.count+e.tag.split("-").length)return void console.log("Overload");if(0==t.tags.length){let n="",a=0;for(let t of e.tag.split("-"))this._utilityServce.isNumber(t)&&(n+=t+"-",a+=parseFloat(t));t.tags.push(n.substr(0,n.length-1)),t.total=a,t.amount=a*parseFloat(t.price)}else{t.tags.push(e.tag);let n=0;for(let e of t.tags){let t="";for(let a of e.split("-"))this._utilityServce.isNumber(a)&&(t+=a+"-",n+=parseFloat(a));e=t.substr(0,t.length-1)}t.total=n,t.amount=n*parseFloat(t.price)}this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tag=null,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tags=t.tags;let n=0;for(let c of t.tags)n+=c.split("-").length;this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].count=n;let a=0;for(let c of this._orders)a+=parseFloat(c.amount);this.entity.total=a}_removeTag(e,t){let n=this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0];n.tags.findIndex(e=>e==t)>-1&&n.tags.splice(n.tags.findIndex(e=>e==t),1),this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tag=null,this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].tags=n.tags;let a=0;for(let o of n.tags){let e="";for(let t of o.split("-"))this._utilityServce.isNumber(t)&&(e+=t+"-",a+=parseFloat(t));o=e.substr(0,e.length-1)}n.total=a,n.amount=a*parseFloat(n.price);let c=0;for(let o of this._orders)c+=parseFloat(o.amount);this.entity.total=c;let i=0;for(let o of n.tags)i+=o.split("-").length;this._orders.filter(t=>t.mixfabric_id==e.mixfabric_id)[0].count=i}printQuotationAsPDF(e){return Object(o.__awaiter)(this,void 0,void 0,function*(){let t=r(new Date).format("YYYYMMDD");console.log("KQ In",e);var n=[];n.push({text:"\n"}),n.push({alignment:"justify",columns:[{text:["T\xean kh\xe1ch h\xe0ng: ",{text:e.company_name_l,bold:!0},"\n","\u0110\u1ecba ch\u1ec9: ",{text:null==e.address_l?"":e.address_l,bold:!0},"\n","Ng\u01b0\u1eddi li\xean h\u1ec7: ",{text:null==e.contact_name?"":e.contact_name,bold:!0},"\n","\u0110i\u1ec7n tho\u1ea1i: ",{text:null==e.phone?"":e.phone,bold:!0},"\n","Email: ",{text:null==e.email?"":e.email,bold:!0}],style:"body_top"},{qr:e.code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),n.push({text:"\n"}),n.push({text:"\n"}),n.push({table:{headerRows:1,widths:[25,"*",90,90,40,180,55,50,70],body:[[{border:[!0,!0,!0,!0],text:{text:"STT",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Lo\u1ea1i v\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe0u",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe3 m\u1ec5",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"S\u1ed1 c\xe2y",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Di\u1ec5n gi\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"T\u1ed5ng (kg)",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"\u0110\u01a1n gi\xe1",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Th\xe0nh ti\u1ec1n",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}});var a=1,c=[];for(let r of e.orders){let e="",t=null==r.description?[]:JSON.parse(r.description);for(let n of t)for(let t of n.split("-"))e+=t+" - ";c.push({STT:a,LoaiVai:r.name_l,Mau:r.color_name_l,Code:r.code.toUpperCase(),SoCay:r.quantity_info,DienGiai:""==e?"":e.substr(0,e.length-3),Tong:r.total,Price:this.formatPipe.localeString(r.price),Amount:this.formatPipe.localeString(r.amount)}),a+=1}n.push(this.tablePrintQuotation(c,["STT","LoaiVai","Mau","Code","SoCay","DienGiai","Tong","Price","Amount"],[25,"*",90,90,40,180,55,50,70],!0)),n.push({text:"\n"}),n.push({columns:[{width:"*",text:"Ch\u1eef k\xfd kh\xe1ch h\xe0ng",fontSize:10},{width:"200",text:"Ng\xe0y l\u1eadp "+r(new Date(e.issue_date)).format("DD/MM/YYYY HH:mm a"),alignment:"center",fontSize:10}]});const i={pageSize:"A4",pageMargins:[25,30,25,70],defaultStyle:{fontSize:12,columnGap:20},pageOrientation:"landscape",content:[{text:"TH\xd4NG TIN \u0110\u01a0N H\xc0NG",style:"title_top"},{text:"\n"},n],footer:(e,t,n)=>({table:{widths:[160,"*"],body:[[{border:[!1,!0,!1,!1],text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],text:"",alignment:"right",style:"body_footer"}],[{width:160,text:"",alignment:"left"},{width:150,alignment:"right",text:"Trang "+e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}),header:(e,t,n)=>({table:{widths:[160,"*"],body:[[{width:160,height:30,text:"C\u1eeda h\xe0ng v\u1ea3i VA",alignment:"left"},{width:150,height:30,alignment:"right",text:""}],[{width:160,border:[!1,!0,!1,!1],text:"",alignment:"left"},{width:150,border:[!1,!0,!1,!1],alignment:"right",text:""}]]},layout:{defaultBorder:!1}}),styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}}};var o="'print-'"+t+".pdf";o=o.split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),g.a.createPdf(i).open()})}tablePrintQuotation(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,a)}}}buildTableBodyPrintQuotation(e,t,n){var a=[];let c=0;return e.forEach(function(e){var i=[],o=1;t.forEach(function(t){i.push({text:{text:e[t],noWrap:!1},alignment:2==o||3==o?"left":8==o||9==o?"right":"center",fontSize:10,italics:2==o&&n[c]}),o+=1,c+=1}),a.push(i)}),a}_convertBase64ImageFromURL(e){return new Promise((t,n)=>{var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=e=>{n(e)},a.src=e})}}return e.\u0275fac=function(t){return new(t||e)(b.bc(v.a),b.bc(w.s),b.bc(y.a),b.bc(i.d),b.bc(x.a),b.bc(S.a),b.bc(N.a),b.bc(Ke.a),b.bc(Jt.a))},e.\u0275cmp=b.Vb({type:e,selectors:[["app-fab-orders"]],viewQuery:function(e,t){if(1&e&&b.jd(mc,1),2&e){let e;b.Qc(e=b.sc())&&(t.tagInputRef=e.first)}},decls:89,vars:60,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],["class","form-inline",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"table-primary"],[2,"width","2px","text-align","center"],[2,"width","10px","text-align","center"],["type","checkbox","name","checkAll",3,"disabled","checked","change"],["scope","col"],[4,"ngIf"],["orderModal",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],["colspan","11",1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["type","checkbox",3,"name","checked","change"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-light",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],[1,"btn","btn-sm","btn-info","mr-sm-1",3,"ngbTooltip","click"],[1,"fa","fa-print"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"badge","badge-light"],["colspan","11",1,"text-truncate"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate"],["class","badge badge-primary","style","cursor: pointer",4,"ngFor","ngForOf"],[1,"text-truncate","text-right"],[1,"badge","badge-primary",2,"cursor","pointer"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-6"],[1,"form-group","row"],[1,"col-12"],[1,"text-primary"],["for","Company"],[1,"text-danger"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change",4,"ngIf"],[1,"form-group"],["for","issue_date"],["type","text","class","form-control","bsDatepicker","","name","_fdate","autocomplete","off","required","",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange",4,"ngIf"],["type","text","class","form-control","style","background-color: rgb(235, 235, 235)","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],["for","payment"],["name","payment",1,"form-control",3,"ngModel","disabled","ngModelChange"],["value","null"],["class","col-6",4,"ngIf"],["for","total"],[1,"title","text-danger"],["class","col-12",4,"ngIf"],[1,"col-md-12"],["class","text-truncate",4,"ngIf"],[1,"modal-footer"],["class","btn btn-info mr-sm-1",3,"ngbTooltip","click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["type","text","disabled","",1,"form-control",2,"background-color","rgb(235, 235, 235)",3,"ngModel","ngModelChange"],["for","status"],["id","status","name","status",1,"form-control",3,"disabled","ngModel","change","ngModelChange"],["for","Items"],["name","Items","bindValue","id","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],[1,"fa","fa-trash"],["type","text","min","1","class","form-control form-control-sm","style","width: 80px","autocomplete","off","mask","separator.2","thousandSeparator",",",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["type","text","class","form-control form-control-sm","style","width: 80px",3,"id","name","ngModel","ngModelChange","keyup.enter","change",4,"ngIf"],[1,"mute"],["class","badge badge-primary","style","cursor: pointer",3,"click",4,"ngFor","ngForOf"],[1,"text-truncate","text-center"],["type","text","mask","separator.2","thousandSeparator",",","class","form-control form-control-sm","style","width: 100px",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["href","javascript:;",1,"text-primary",3,"click"],["type","text","min","1","autocomplete","off","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","80px",3,"id","name","ngModel","ngModelChange","change"],["type","text",1,"form-control","form-control-sm",2,"width","80px",3,"id","name","ngModel","ngModelChange","keyup.enter","change"],[1,"badge","badge-primary",2,"cursor","pointer",3,"click"],["type","text","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","100px",3,"id","name","ngModel","ngModelChange","change"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],[1,"btn","btn-info","mr-sm-1",3,"ngbTooltip","click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(b.hc(0,"div",0),b.hc(1,"div",1),b.hc(2,"div",2),b.hc(3,"div",3),b.hc(4,"div",4),b.hc(5,"div",1),b.hc(6,"div",5),b.hc(7,"div",6),b.hc(8,"input",7),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),b.wc(9,"translate"),b.gc(),b.bd(10,_c,3,3,"button",8),b.bd(11,pc,4,3,"button",9),b.bd(12,fc,1,0,"img",10),b.gc(),b.gc(),b.hc(13,"div",11),b.hc(14,"div",12),b.hc(15,"select",13),b.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),b.hc(16,"option",14),b.dd(17,"#10"),b.gc(),b.hc(18,"option",15),b.dd(19,"#25"),b.gc(),b.hc(20,"option",16),b.dd(21,"#50"),b.gc(),b.hc(22,"option",17),b.dd(23,"#100"),b.gc(),b.gc(),b.hc(24,"select",18),b.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()}),b.hc(25,"option",19),b.dd(26),b.wc(27,"translate"),b.gc(),b.hc(28,"option",20),b.dd(29),b.wc(30,"translate"),b.gc(),b.hc(31,"option",21),b.dd(32),b.wc(33,"translate"),b.gc(),b.hc(34,"option",22),b.dd(35),b.wc(36,"translate"),b.gc(),b.hc(37,"option",23),b.dd(38),b.wc(39,"translate"),b.gc(),b.hc(40,"option",24),b.dd(41),b.wc(42,"translate"),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(43,"div",25),b.hc(44,"div",26),b.bd(45,bc,10,20,"div",27),b.gc(),b.hc(46,"div",26),b.hc(47,"div",28),b.hc(48,"table",29),b.hc(49,"thead",30),b.hc(50,"tr"),b.hc(51,"th",31),b.dd(52,"#"),b.gc(),b.hc(53,"th",32),b.hc(54,"input",33),b.rc("change",function(e){return t.selectAll(e)}),b.gc(),b.gc(),b.hc(55,"th",34),b.dd(56),b.wc(57,"translate"),b.gc(),b.hc(58,"th",34),b.dd(59),b.wc(60,"translate"),b.gc(),b.hc(61,"th",34),b.dd(62),b.wc(63,"translate"),b.gc(),b.hc(64,"th",34),b.dd(65),b.wc(66,"translate"),b.gc(),b.hc(67,"th",34),b.dd(68),b.wc(69,"translate"),b.gc(),b.hc(70,"th",34),b.dd(71),b.wc(72,"translate"),b.gc(),b.hc(73,"th",34),b.dd(74),b.wc(75,"translate"),b.gc(),b.hc(76,"th",34),b.dd(77),b.wc(78,"translate"),b.gc(),b.hc(79,"th",34),b.dd(80),b.wc(81,"translate"),b.gc(),b.gc(),b.gc(),b.hc(82,"tbody"),b.bd(83,vc,6,3,"ng-container",35),b.bd(84,Ec,2,1,"ng-container",35),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(85,"div",26),b.bd(86,Ac,10,20,"div",27),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.bd(87,Zc,113,80,"ng-template",null,36,b.cd)),2&e&&(b.Nb(8),b.Dc("placeholder",b.xc(9,28,"Search"))("ngModel",t._keyword),b.Nb(2),b.Dc("ngIf",t._authService.hasPermission("FAB-ORDER","create")),b.Nb(1),b.Dc("ngIf",t._authService.hasPermission("FAB-ORDER","report")),b.Nb(1),b.Dc("ngIf",t._isLoading),b.Nb(3),b.Dc("ngModel",t.pageSize),b.Nb(9),b.Dc("ngModel",t._keyword),b.Nb(2),b.fd(" ",b.xc(27,30,"All")," "),b.Nb(3),b.fd(" ",b.xc(30,32,"Unpaid")," "),b.Nb(3),b.fd(" ",b.xc(33,34,"Delivery-Unpaid")," "),b.Nb(3),b.fd(" ",b.xc(36,36,"Delivery-Paid")," "),b.Nb(3),b.fd(" ",b.xc(39,38,"Cancel-Unpaid")," "),b.Nb(3),b.fd(" ",b.xc(42,40,"Cancel-Refund")," "),b.Nb(4),b.Dc("ngIf",t._categories.length>0),b.Nb(9),b.Dc("disabled",0==t._categories.length)("checked",t.exportList.length==t._categories.length),b.Nb(2),b.fd(" ",b.xc(57,42,"Issue of date")," "),b.Nb(3),b.fd(" ",b.xc(60,44,"Order code")," "),b.Nb(3),b.fd(" ",b.xc(63,46,"Customers")," "),b.Nb(3),b.fd(" ",b.xc(66,48,"Phone")," "),b.Nb(3),b.fd(" ",b.xc(69,50,"Total")," "),b.Nb(3),b.fd(" ",b.xc(72,52,"Payment method")," "),b.Nb(3),b.ed(b.xc(75,54,"Status")),b.Nb(3),b.ed(b.xc(78,56,"Created by")),b.Nb(3),b.ed(b.xc(81,58,"Actions")),b.Nb(3),b.Dc("ngIf",0==t._categories.length),b.Nb(1),b.Dc("ngIf",t._categories.length>0),b.Nb(2),b.Dc("ngIf",t._categories.length>0))},directives:[c.c,c.n,c.q,a.q,c.x,c.r,c.A,M.a,a.p,w.N,c.z,c.o,c.p,C.a,c.w,D.b,D.a,Zt.a],pipes:[T.c,a.f,a.g],styles:[""]}),e})(),data:{title:"Orders",breadcrumb:"Orders"}}]}];let ti=(()=>{class e{}return e.\u0275mod=b.Zb({type:e}),e.\u0275inj=b.Yb({factory:function(t){return new(t||e)},imports:[[i.h.forChild(ei)],i.h]}),e})();var ni=n("oOf3"),ai=n("LPYB"),ci=n("dZIy"),ii=n("+Cnu"),oi=n("K3ix"),ri=n("44PX"),li=n("g9iH"),si=n("arFO"),di=n("5gP/");let hi=(()=>{class e{}return e.\u0275mod=b.Zb({type:e}),e.\u0275inj=b.Yb({factory:function(t){return new(t||e)},providers:[v.a,y.a,T.d,S.a,Jt.a,Ke.a,di.a],imports:[[a.c,c.k,ti,ni.a,ai.b,ci.a,D.c.forRoot(),M.b.forRoot(),ii.a.forRoot(),oi.a.forRoot(),T.b,ri.a.forRoot(),w.u,li.b,si.a,C.b,Zt.b.forRoot()]]}),e})()}}]);