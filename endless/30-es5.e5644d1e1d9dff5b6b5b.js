!function(){function e(e,c){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,c){if(!e)return;if("string"==typeof e)return t(e,c);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,c)}(e))||c&&e&&"number"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){s=!0,l=e},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw l}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,i=new Array(t);c<t;c++)i[c]=e[c];return i}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var c=0;c<t.length;c++){var i=t[c];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,c){return t&&i(e.prototype,t),c&&i(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{REEf:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var n=i("fXoL"),l=function(){var e=function(){function e(){c(this,e)}return a(e,[{key:"transform",value:function(e){return this.localeString(e)}},{key:"missingOneDecimalCheck",value:function(e){var t=(e+="").split(",")[1];return!(!t||1!==t.length)}},{key:"missingAllDecimalsCheck",value:function(e){return!(e+="").split(",")[1]}},{key:"missingOneDecimalCheck1",value:function(e){var t=(e+="").split(".")[1];return!(!t||1!==t.length)}},{key:"missingAllDecimalsCheck1",value:function(e){return!(e+="").split(".")[1]}},{key:"localeString",value:function(e){if(""===e)return"";var t,c,i,a,n;for(c=(t=(e+="").split(","))[0],i=t.length>1?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(c);)c=c.replace(a,"$1,$2");if(-1!==c.indexOf("."))n=c.slice(c.lastIndexOf(".")).replace(/\,/g,""),t=c.split(".")[0]+n;else{if(t=c+i,this.missingOneDecimalCheck(t))return t+"0";if(this.missingAllDecimalsCheck(t))return t+""}return t}},{key:"localeStringEn",value:function(e){if(""===e)return"";var t,c,i,a,n;for(c=(t=(e+="").split(","))[0],i=t.length>1?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(c);)c=c.replace(a,"$1,$2");if(-1!==c.indexOf("."))n=c.slice(c.lastIndexOf(".")).replace(/\,/g,""),t=c.split(".")[0]+n;else{if(t=c+i,this.missingOneDecimalCheck(t))return t+"0";if(this.missingAllDecimalsCheck(t))return t+".00"}return t}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.ac({name:"numberFormat",type:e,pure:!0}),e}()},fRIO:function(t,i,n){"use strict";n.r(i),n.d(i,"TasksModule",function(){return lt});var l=n("ofXK"),r=n("VToC"),s=n("25+x"),o=n("cplz"),d=n("7dP1"),u=n("bmg4"),g=n("44PX"),f=n("K3ix"),h=n("+Cnu"),v=n("Lm2G"),b=n("hzby"),p=n("dZIy"),m=n("LPYB"),_=n("oOf3"),y=n("3Pt+"),S=n("tyNb"),w=n("WuMH"),D=n("gFX4"),N=n.n(D),E=n("CMKA"),k=n("piOG"),x=n("PSD3"),M=n.n(x),R=n("fXoL"),C=n("3t6R"),I=n("REEf"),U=n("1kSV"),O=n("qeeY"),T=n("jhN1"),A=n("eLGb"),G=n("ZOsW"),P=n("sYmb");function F(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",69),R.ec()),2&e){var c=R.vc();R.Nb(1),R.Ec("alt",c.user.name)}}function j(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",70),R.ec()),2&e){var c=R.vc();R.Nb(1),R.Ec("alt",c.user.name),R.Dc("src",c.baseFolder+"/"+c.user.avatar,R.Wc)}}function $(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",72),R.ec()),2&e){var c=R.vc().$implicit,i=R.vc();R.Nb(1),R.Ec("alt",c.name),R.Dc("src",i.baseFolder+"/"+c.avatar,R.Wc)("ngbTooltip",c.name)}}function L(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",73),R.ec()),2&e){var c=R.vc().$implicit;R.Nb(1),R.Ec("alt",c.name),R.Dc("ngbTooltip",c.name)}}function z(e,t){if(1&e&&(R.hc(0,"li",71),R.bd(1,$,2,3,"ng-container",10),R.bd(2,L,2,2,"ng-container",10),R.gc()),2&e){var c=t.$implicit;R.Nb(1),R.Dc("ngIf",null!=c.avatar),R.Nb(1),R.Dc("ngIf",null==c.avatar)}}function q(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",72),R.ec()),2&e){var c=R.vc().$implicit,i=R.vc(2);R.Nb(1),R.Ec("alt",c.name),R.Dc("src",i.baseFolder+"/"+c.avatar,R.Wc)("ngbTooltip",c.name)}}function B(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",73),R.ec()),2&e){var c=R.vc().$implicit;R.Nb(1),R.Ec("alt",c.name),R.Dc("ngbTooltip",c.name)}}function H(e,t){if(1&e&&(R.hc(0,"li",71),R.bd(1,q,2,3,"ng-container",10),R.bd(2,B,2,2,"ng-container",10),R.gc()),2&e){var c=t.$implicit;R.Nb(1),R.Dc("ngIf",null!=c.avatar),R.Nb(1),R.Dc("ngIf",null==c.avatar)}}function K(e,t){if(1&e&&(R.fc(0),R.hc(1,"p"),R.dd(2),R.wc(3,"translate"),R.gc(),R.hc(4,"div",13),R.hc(5,"ul"),R.bd(6,H,3,2,"li",14),R.gc(),R.gc(),R.ec()),2&e){var c=R.vc();R.Nb(2),R.fd("",R.xc(3,2,"Followers"),":"),R.Nb(4),R.Dc("ngForOf",c.ccList)}}function V(e,t){if(1&e){var c=R.ic();R.hc(0,"a",74),R.rc("click",function(){R.Uc(c);var e=R.vc();return e.closeTask(e.entity)}),R.cc(1,"i",75),R.dd(2),R.wc(3,"translate"),R.wc(4,"translate"),R.gc()}2&e&&(R.Nb(2),R.gd(" ",R.xc(3,2,"Close")," ",R.xc(4,4,"Task")," "))}function Y(e,t){if(1&e){var c=R.ic();R.hc(0,"li",21),R.rc("click",function(){return R.Uc(c),R.vc()._createNew()}),R.hc(1,"a",22),R.hc(2,"span",23),R.cc(3,"i",30),R.dd(4),R.wc(5,"translate"),R.gc(),R.gc(),R.gc()}2&e&&(R.Nb(4),R.fd(" ",R.xc(5,1,"Create new"),""))}function W(e,t){if(1&e){var c=R.ic();R.hc(0,"li",26),R.rc("click",function(){R.Uc(c);var e=R.vc();return e.getUserEmail(e.type="trash")}),R.hc(1,"a",27),R.hc(2,"span",23),R.cc(3,"i",76),R.dd(4),R.wc(5,"translate"),R.gc(),R.hc(6,"span",25),R.dd(7),R.gc(),R.gc(),R.gc()}if(2&e){var i=R.vc();R.Nb(4),R.fd(" ",R.xc(5,2,"Trash"),""),R.Nb(3),R.fd("(",i.getUserEmail("trash").length,")")}}function J(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",81),R.ec()),2&e){var c=R.vc().$implicit,i=R.vc();R.Nb(1),R.Ec("alt",c.name),R.Dc("src",i.baseFolder+"/"+c.avatar,R.Wc)}}function X(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",82),R.ec()),2&e){var c=R.vc().$implicit;R.Nb(1),R.Ec("alt",c.name)}}function Z(e,t){1&e&&R.cc(0,"img",83)}function Q(e,t){if(1&e){var c=R.ic();R.fc(0),R.dd(1," | "),R.hc(2,"a",84),R.rc("click",function(){R.Uc(c);var e=R.vc().$implicit;return R.vc()._editComposer(e)}),R.dd(3),R.wc(4,"translate"),R.gc(),R.ec()}2&e&&(R.Nb(3),R.ed(R.xc(4,1,"Edit")))}function ee(e,t){if(1&e){var c=R.ic();R.hc(0,"a",27),R.hc(1,"div",8),R.hc(2,"div",77),R.rc("click",function(){R.Uc(c);var e=t.$implicit;return R.vc().selectedUserEmail(e)}),R.bd(3,J,2,2,"ng-container",10),R.bd(4,X,2,1,"ng-container",10),R.gc(),R.hc(5,"div",31),R.hc(6,"h6"),R.hc(7,"span",26),R.rc("click",function(){R.Uc(c);var e=t.$implicit;return R.vc().selectedUserEmail(e)}),R.dd(8),R.gc(),R.hc(9,"small",26),R.rc("click",function(){R.Uc(c);var e=t.$implicit;return R.vc().selectedUserEmail(e)}),R.dd(10,"("),R.hc(11,"span",78),R.dd(12),R.wc(13,"date"),R.gc(),R.dd(14,") "),R.bd(15,Z,1,0,"img",79),R.bd(16,Q,5,3,"ng-container",10),R.gc(),R.gc(),R.hc(17,"p"),R.hc(18,"span",80),R.rc("click",function(){R.Uc(c);var e=t.$implicit;return R.vc().selectedUserEmail(e)}),R.gc(),R.gc(),R.gc(),R.gc(),R.gc()}if(2&e){var i=t.$implicit,a=R.vc();R.Nb(3),R.Dc("ngIf",null!=i.avatar),R.Nb(1),R.Dc("ngIf",null==i.avatar),R.Nb(1),R.Dc("ngClass",2==i.type?"media-body jignore":"media-body"),R.Nb(3),R.fd("",i.title," "),R.Nb(4),R.ed(R.yc(13,8,i.timestamp,"dd/MM/yyyy HH:mm")),R.Nb(3),R.Dc("ngIf",i.is_active),R.Nb(1),R.Dc("ngIf",!i.is_active&&a.user.id==i.created_by),R.Nb(2),R.Dc("innerHtml",i.content,R.Vc)}}function te(e,t){1&e&&(R.fc(0),R.hc(1,"div",85),R.hc(2,"div",86),R.cc(3,"img",87),R.hc(4,"p",49),R.dd(5),R.wc(6,"translate"),R.gc(),R.gc(),R.gc(),R.ec()),2&e&&(R.Nb(5),R.ed(R.xc(6,1,"Not found items")))}function ce(e,t){1&e&&(R.fc(0),R.dd(1),R.wc(2,"translate"),R.ec()),2&e&&(R.Nb(1),R.ed(R.xc(2,1,"Send")))}function ie(e,t){1&e&&(R.fc(0),R.dd(1),R.wc(2,"translate"),R.ec()),2&e&&(R.Nb(1),R.ed(R.xc(2,1,"Loading")))}function ae(e,t){if(1&e){var c=R.ic();R.hc(0,"div",55),R.hc(1,"label",88),R.dd(2),R.wc(3,"translate"),R.gc(),R.hc(4,"ng-select",89),R.rc("ngModelChange",function(e){return R.Uc(c),R.vc().follow_users=e}),R.wc(5,"translate"),R.wc(6,"translate"),R.gc(),R.gc()}if(2&e){var i=R.vc();R.Nb(2),R.ed(R.xc(3,9,"Followers")),R.Nb(2),R.Dc("items",i._users)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",i.follow_users)("placeholder",R.xc(5,11,"Please choose"))("notFoundText",R.xc(6,13,"Not found item"))}}function ne(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",82),R.ec()),2&e){var c=R.vc(2);R.Nb(1),R.Ec("alt",null==c.selectEmail?null:c.selectEmail.name)}}function le(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",102),R.ec()),2&e){var c=R.vc(2);R.Nb(1),R.Dc("src",c.baseFolder+"/"+(null==c.selectEmail?null:c.selectEmail.avatar),R.Wc)}}function re(e,t){if(1&e&&(R.hc(0,"span"),R.dd(1),R.gc()),2&e){var c=t.$implicit;R.Nb(1),R.fd("",c.name,", ")}}function se(e,t){if(1&e){var c=R.ic();R.hc(0,"li",111),R.hc(1,"img",112),R.rc("click",function(){R.Uc(c);var e=t.$implicit;return R.vc(3)._downloadFileResult(e)}),R.gc(),R.gc()}}function oe(e,t){if(1&e&&(R.fc(0),R.hc(1,"div",71),R.hc(2,"h6",103),R.cc(3,"i",104),R.dd(4),R.wc(5,"translate"),R.gc(),R.hc(6,"a",105),R.cc(7,"i",106),R.dd(8),R.wc(9,"translate"),R.gc(),R.cc(10,"div",107),R.gc(),R.hc(11,"div",108),R.hc(12,"ul",109),R.bd(13,se,2,0,"li",110),R.gc(),R.gc(),R.cc(14,"hr"),R.ec()),2&e){var c=R.vc(2);R.Nb(4),R.fd(" ",R.xc(5,3,"Attachment")," "),R.Nb(4),R.ed(R.xc(9,5,"All")),R.Nb(5),R.Dc("ngForOf",null==c.selectEmail?null:c.selectEmail.urls.data)}}function de(e,t){if(1&e){var c=R.ic();R.hc(0,"li"),R.hc(1,"a",113),R.rc("click",function(){R.Uc(c);var e=R.vc(2);return e.flagReply=!e.flagReply}),R.cc(2,"i",114),R.dd(3),R.wc(4,"translate"),R.gc(),R.gc()}2&e&&(R.Nb(3),R.ed(R.xc(4,1,"Reply")))}function ue(e,t){if(1&e){var c=R.ic();R.hc(0,"li"),R.hc(1,"a",113),R.rc("click",function(){R.Uc(c);var e=R.vc(2);return e.selectedmail(null,e.selectEmail)}),R.cc(2,"i",115),R.dd(3),R.wc(4,"translate"),R.gc(),R.gc()}2&e&&(R.Nb(3),R.ed(R.xc(4,1,"Complete")))}function ge(e,t){if(1&e){var c=R.ic();R.hc(0,"li"),R.hc(1,"a",113),R.rc("click",function(){R.Uc(c);var e=R.vc(2);return e.updateType(e.selectEmail,2)}),R.cc(2,"i",116),R.dd(3),R.wc(4,"translate"),R.gc(),R.gc()}2&e&&(R.Nb(3),R.ed(R.xc(4,1,"Delete")))}function fe(e,t){if(1&e){var c=R.ic();R.hc(0,"li"),R.hc(1,"a",113),R.rc("click",function(){R.Uc(c);var e=R.vc(2);return e.updateType(e.selectEmail,null)}),R.cc(2,"i",117),R.dd(3),R.wc(4,"translate"),R.gc(),R.gc()}2&e&&(R.Nb(3),R.ed(R.xc(4,1,"Recall")))}function he(e,t){1&e&&R.cc(0,"i",128)}function ve(e,t){1&e&&(R.fc(0),R.dd(1),R.wc(2,"translate"),R.ec()),2&e&&(R.Nb(1),R.ed(R.xc(2,1,"Processing")))}function be(e,t){if(1&e){var c=R.ic();R.fc(0),R.cc(1,"hr"),R.hc(2,"div",2),R.hc(3,"div",118),R.hc(4,"div",55),R.hc(5,"div",119),R.hc(6,"input",120),R.rc("ngModelChange",function(e){return R.Uc(c),R.vc(2).entitySubDID.content=e}),R.wc(7,"translate"),R.gc(),R.hc(8,"div",121),R.hc(9,"span",122),R.cc(10,"i",123),R.hc(11,"input",124,125),R.rc("change",function(e){R.Uc(c);var t=R.Rc(12);return R.vc(2).fileEvent1(e,t)}),R.gc(),R.gc(),R.hc(13,"span",126),R.rc("click",function(){R.Uc(c);var e=R.vc(2);return e.isSaveComment?null:e.submitComment(e.selectEmail)}),R.bd(14,he,1,0,"i",127),R.bd(15,ve,3,3,"ng-container",10),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.ec()}if(2&e){var i=R.vc(2);R.Nb(6),R.Ec("placeholder",R.xc(7,4,"Comment")),R.Dc("ngModel",i.entitySubDID.content),R.Nb(8),R.Dc("ngIf",!i.isSaveComment),R.Nb(1),R.Dc("ngIf",i.isSaveComment)}}function pe(e,t){1&e&&R.cc(0,"hr")}function me(e,t){if(1&e){var c=R.ic();R.hc(0,"li",111),R.hc(1,"img",112),R.rc("click",function(){R.Uc(c);var e=t.$implicit;return R.vc(4)._downloadFileResult(e)}),R.gc(),R.gc()}}var _e=function(){return[]};function ye(e,t){if(1&e&&(R.hc(0,"tr"),R.hc(1,"td"),R.dd(2),R.gc(),R.hc(3,"td"),R.hc(4,"div",108),R.hc(5,"ul",109),R.bd(6,me,2,0,"li",110),R.gc(),R.gc(),R.gc(),R.hc(7,"td"),R.dd(8),R.gc(),R.hc(9,"td"),R.dd(10),R.wc(11,"date"),R.gc(),R.gc()),2&e){var c=t.$implicit;R.Nb(2),R.ed(c.content),R.Nb(4),R.Dc("ngForOf",null==c.urls?R.Hc(7,_e):c.urls.data),R.Nb(2),R.ed(c.name),R.Nb(2),R.fd(" ",R.yc(11,4,c.timestamp,"dd/MM/yyyy h:mm a")," ")}}function Se(e,t){if(1&e){var c=R.ic();R.fc(0),R.bd(1,pe,1,0,"hr",10),R.hc(2,"div",2),R.hc(3,"div",118),R.hc(4,"div",129),R.hc(5,"table",130),R.hc(6,"thead"),R.hc(7,"th"),R.dd(8),R.wc(9,"translate"),R.gc(),R.hc(10,"th"),R.dd(11),R.wc(12,"translate"),R.gc(),R.hc(13,"th"),R.dd(14),R.wc(15,"translate"),R.gc(),R.hc(16,"th"),R.dd(17),R.wc(18,"translate"),R.gc(),R.gc(),R.hc(19,"tbody"),R.bd(20,ye,12,8,"tr",94),R.gc(),R.gc(),R.gc(),R.hc(21,"div",131),R.hc(22,"div",132),R.hc(23,"pagination",133),R.rc("ngModelChange",function(e){return R.Uc(c),R.vc(2).pageIndex=e})("pageChanged",function(e){return R.Uc(c),R.vc(2).pageChanged(e)}),R.gc(),R.gc(),R.hc(24,"div",134),R.hc(25,"a",135),R.dd(26),R.wc(27,"translate"),R.wc(28,"translate"),R.wc(29,"translate"),R.wc(30,"translate"),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.ec()}if(2&e){var i=R.vc(2);R.Nb(1),R.Dc("ngIf",!i.selectEmail.is_active),R.Nb(7),R.ed(R.xc(9,18,"Content")),R.Nb(3),R.ed(R.xc(12,20,"Attachment")),R.Nb(3),R.ed(R.xc(15,22,"Created by")),R.Nb(3),R.ed(R.xc(18,24,"CreatedDate")),R.Nb(3),R.Dc("ngForOf",i._children),R.Nb(3),R.Dc("boundaryLinks",!0)("totalItems",i.totalRow)("ngModel",i.pageIndex)("maxSize",i.pageDisplay)("itemsPerPage",i.pageSize),R.Nb(3),R.id("",R.xc(27,26,"Total of records"),": ",i.totalRow," - ",R.xc(28,28,"Page")," ",i.pageIndex," ",R.xc(29,30,"of")," ",i.totalPage," ",R.xc(30,32,"page"),"")}}var we=function(e){return{"active show":e}};function De(e,t){if(1&e){var c=R.ic();R.hc(0,"div",90),R.hc(1,"div",91),R.hc(2,"div",36),R.hc(3,"div",2),R.hc(4,"div",92),R.hc(5,"div",8),R.bd(6,ne,2,1,"ng-container",10),R.bd(7,le,2,1,"ng-container",10),R.hc(8,"div",11),R.hc(9,"h6"),R.dd(10),R.hc(11,"small"),R.hc(12,"span",78),R.dd(13),R.wc(14,"date"),R.gc(),R.hc(15,"span",78),R.dd(16),R.wc(17,"date"),R.gc(),R.dd(18),R.wc(19,"date"),R.hc(20,"i",93),R.rc("click",function(){R.Uc(c);var e=R.vc();return e.updateType(e.selectEmail,1)}),R.gc(),R.gc(),R.gc(),R.hc(21,"p"),R.bd(22,re,2,1,"span",94),R.gc(),R.gc(),R.gc(),R.gc(),R.hc(23,"div",95),R.hc(24,"div",96),R.hc(25,"p",97),R.dd(26),R.gc(),R.hc(27,"i",98),R.rc("click",function(){R.Uc(c);var e=R.vc();return e.addFavourite(e.selectEmail)}),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.hc(28,"div",53),R.cc(29,"p",99),R.cc(30,"hr"),R.bd(31,oe,15,7,"ng-container",10),R.hc(32,"div",100),R.hc(33,"ul",101),R.bd(34,de,5,3,"li",10),R.bd(35,ue,5,3,"li",10),R.bd(36,ge,5,3,"li",10),R.bd(37,fe,5,3,"li",10),R.gc(),R.gc(),R.bd(38,be,16,6,"ng-container",10),R.bd(39,Se,31,34,"ng-container",10),R.gc(),R.gc(),R.gc()}if(2&e){var i=R.vc();R.Dc("ngClass",R.Ic(29,we,!i.compose)),R.Nb(6),R.Dc("ngIf",null==(null==i.selectEmail?null:i.selectEmail.avatar)),R.Nb(1),R.Dc("ngIf",null!=(null==i.selectEmail?null:i.selectEmail.avatar)),R.Nb(3),R.fd(" ",null==i.selectEmail?null:i.selectEmail.title," "),R.Nb(3),R.fd("(",R.yc(14,20,null==i.selectEmail?null:i.selectEmail.timestamp,"dd/MM/yyyy"),")"),R.Nb(3),R.fd(" ",R.yc(17,23,null==i.selectEmail?null:i.selectEmail.timestamp,"h:mm"),""),R.Nb(2),R.fd(" ",R.yc(19,26,null==i.selectEmail?null:i.selectEmail.timestamp,"a")," "),R.Nb(2),R.Dc("ngClass",1==(null==i.selectEmail?null:i.selectEmail.type)?"icofont icofont-flag-alt-1 text-danger":"icofont icofont-flag-alt-1"),R.Nb(2),R.Dc("ngForOf",null==i.selectEmail?null:i.selectEmail.cc),R.Nb(4),R.ed(null==i.selectEmail?null:i.selectEmail.email),R.Nb(1),R.Tb("starred",i._flagFav),R.Nb(2),R.Dc("innerHTML",null==i.selectEmail?null:i.selectEmail.content,R.Vc),R.Nb(2),R.Dc("ngIf",null!=(null==i.selectEmail?null:i.selectEmail.urls)),R.Nb(3),R.Dc("ngIf",!i.selectEmail.is_active),R.Nb(1),R.Dc("ngIf",2!=(null==i.selectEmail?null:i.selectEmail.type)&&!i.selectEmail.is_active),R.Nb(1),R.Dc("ngIf",2!=(null==i.selectEmail?null:i.selectEmail.type)&&!i.selectEmail.is_active),R.Nb(1),R.Dc("ngIf",2==(null==i.selectEmail?null:i.selectEmail.type)),R.Nb(1),R.Dc("ngIf",i.flagReply),R.Nb(1),R.Dc("ngIf",i._children.length>0)}}var Ne,Ee=((Ne=function(){function t(e,i,a,n,l,r,s,o,d,u,g){c(this,t),this._authenService=e,this._dataService=i,this._route=a,this._notifyService=n,this._uploadService=l,this._excelService=r,this._numberFormat=s,this.modalService=o,this._utilyService=d,this.sanitizer=u,this._activatedRoute=g,this._id="",this.entity={},this.entitySub={},this.baseFolder=E.a.BASE_API,this._users=[],this.follow_users=[],this.related_users=[],this.ccList=[],this.flagShow=!1,this.filesToUpload=[],this.isSave=!1,this.getlist=[],this.getlistAll=[],this.flagReply=!1,this.pageIndex=1,this.pageSize=10,this.pageDisplay=10,this.totalRow=0,this._children=[],this.entitySubDID={},this.filesToUpload1=[],this.isSaveComment=!1,this._flagFav=!1,this._flagAllowCC=!1,this._detailId="",this.compose=!0,this.allEmails=w.a.Emails,this.selectedEmails=[],this.socket=N()(E.a.BASE_API)}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this._activatedRoute.params.subscribe(function(t){e._id=t.id,e.loadUsersWithDept(e._id),e.loadData(),e.socket.on("refreshPage",function(t){""!=e._detailId&&e.loadSubData(e._detailId)})})}},{key:"loadUsersWithDept",value:function(t){var c=this,i={};i.short_code=this.user.short_code,this._dataService.post("/cat-submission/getallUsersNP",i).subscribe(function(i){c._dataService.post("/tasks/detailCount",{id:t,userid:c.user.id}).subscribe(function(t){c.entity=t.data,c.related_users=null==t.data.related_users?[]:t.data.related_users.data;var a,n=[],l=e(t.data.related_users.data);try{for(l.s();!(a=l.n()).done;){var r=a.value;r.id!=c.user.id&&n.push({id:r.id,name:r.name})}}catch(b){l.e(b)}finally{l.f()}var s,o=null==t.data.follow_users?[]:JSON.parse(t.data.follow_users),d=e(o);try{var u=function(){var e=s.value;if(c.user.id!=e){var t=i.data.filter(function(t){return t.id==e})[0];n.push({id:e,name:t.name})}};for(d.s();!(s=d.n()).done;)u()}catch(b){d.e(b)}finally{d.f()}var g,f=[],h=e(o);try{var v=function(){var e=g.value;c.user.id==e&&(c._flagAllowCC=!0,c.compose=!1);var t=i.data.filter(function(t){return t.id==e})[0];f.push({id:e,name:t.name,avatar:t.avatar})};for(h.s();!(g=h.n()).done;)v()}catch(b){h.e(b)}finally{h.f()}1==t.data.is_active&&(c.compose=!1),c.ccList=f,c._users=n,c.socket.emit("refresh",{})})})}},{key:"loadDetailByDID",value:function(t){var c=this;console.log(t,this.compose),this._dataService.post("/tasks/detailByDID",{did:t}).subscribe(function(t){if(console.log("Detail",t),c.compose=!0,c.entitySub=t.data,t.data.cc.length>0){var i,a=[],n=e(t.data.cc);try{for(n.s();!(i=n.n()).done;){var l=i.value;a.push(l.id)}}catch(r){n.e(r)}finally{n.f()}c.follow_users=a,c.flagShow=!0}else c.follow_users=[],c.flagShow=!1})}},{key:"fileEvent",value:function(e,t){this.filesToUpload=e.target.files,this._files=t}},{key:"submit",value:function(){var e=this;this.entitySub.follow_users=this.flagShow?JSON.stringify(this.follow_users):null,this.isSave=!0,this.entitySub.id=this._id,this.entitySub.parent_id=null,this.entitySub.created_by=this.user.id,null!=this.entitySub.did?(this.isSave=!1,0==this.filesToUpload.length?this._dataService.post("/tasks/updateDetail",this.entitySub).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?k.a.MSG_UPDATENO_EN:k.a.MSG_UPDATENO,"en"==e.user.lang?k.a.error_title_en:k.a.error_title):(e.entitySub={},e.entitySub.title=null,e.entitySub.content=null,e.follow_users=[],e.entitySub.follow_users=null,e.flagShow=!1,e.loadData(),e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?k.a.MSG_UPDATE_EN:k.a.MSG_UPDATE,"OK"))},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==e.user.lang?k.a.error_title_en:k.a.error_title)}):this._processUploadDisagreeAfter(this.filesToUpload)):0==this.filesToUpload.length?this._dataService.post("/tasks/addDetail",this.entitySub).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?k.a.MSG_ADDNO_EN:k.a.MSG_ADDNO,"en"==e.user.lang?k.a.error_title_en:k.a.error_title):(e.entitySub={},e.entitySub.title=null,e.entitySub.content=null,e.follow_users=[],e.entitySub.follow_users=null,e.flagShow=!1,e.loadData(),e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?k.a.MSG_ADD_EN:k.a.MSG_ADD,"OK"))},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==e.user.lang?k.a.error_title_en:k.a.error_title)}):this._processUploadDisagreeAfter(this.filesToUpload)}},{key:"_processUploadDisagreeAfter",value:function(e){var t=this,c={folder_name:"tasks"};c.id=this._id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+c.id+"/"+c.folder_name,e).subscribe(function(e){t.entitySub.urls={data:e.data},console.log(t.entitySub,e),null==t.entitySub.id?t._dataService.post("/tasks/addDetail",t.entitySub).subscribe(function(e){t.isSave=!1,"failed"!=e.result&&(t._files.value=[],t._notifyService.showSuccess("en"==t.user.lang?k.a.MSG_ADD_EN:k.a.MSG_ADD,"OK"),t.socket.emit("refresh",{}))},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==t.user.lang?k.a.error_title_en:k.a.error_title)}):t._dataService.post("/tasks/updateDetail",t.entitySub).subscribe(function(e){t.isSave=!1,"failed"!=e.result&&(t._files.value=[],t._notifyService.showSuccess("en"==t.user.lang?k.a.MSG_UPDATE_EN:k.a.MSG_UPDATE,"OK"),t.socket.emit("refresh",{}))},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==t.user.lang?k.a.error_title_en:k.a.error_title)})},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==t.user.lang?k.a.error_title_en:k.a.error_title)})}},{key:"closeTask",value:function(e){var t=this;M.a.fire({title:"en"==this.user.lang?k.a.are_you_sure_complete_en:k.a.are_you_sure_complete,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?k.a.cancel_en:k.a.cancel,confirmButtonText:"en"==this.user.lang?k.a.confirmtext_en:k.a.confirmtext}).then(function(c){if(c.value){var i={};i.id=e.id,i.stat=!0,t._dataService.post("/tasks/closeTask",i).subscribe(function(e){"failed"!=e.result?(t._notifyService.showSuccess("en"==t.user.lang?k.a.MSG_UPDATE_EN:k.a.MSG_UPDATE,"OK"),t._route.navigate(["/tasks/requests"])):t._notifyService.showError("en"==t.user.lang?k.a.MSG_UPDATENO_EN:k.a.MSG_UPDATENO,"en"==t.user.lang?k.a.error_title_en:k.a.error_title)},function(){t._notifyService.showError("en"==t.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==t.user.lang?k.a.error_title_en:k.a.error_title)})}})}},{key:"loadData",value:function(){var e=this;this._dataService.post("/tasks/getalltaskdetail",{userid:this.user.id,id:this._id}).subscribe(function(t){e.getlist=t.data.filter(function(e){return 2!=e.type}),e.getlistAll=t.data})}},{key:"getUserEmail",value:function(t){var c=this;if("allmail"==t)return this.getlist;if("favourite"==t){var i,a=[],n=e(this.getlistAll.filter(function(e){return null!=e.favorites&&2!=e.type}));try{for(n.s();!(i=n.n()).done;){var l=i.value;l.favorites.data.filter(function(e){return e.id==c.user.id&&e.stat}).length>0&&a.push(l)}}catch(r){n.e(r)}finally{n.f()}return a}return"trash"===t?this.getlistAll.filter(function(e){return 2==e.type}):"pending"===t?this.getlistAll.filter(function(e){return(null==e.is_active||0==e.is_active)&&2!=e.type}):"important"===t?this.getlistAll.filter(function(e){return 1==e.type}):[]}},{key:"selectedUserEmail",value:function(e){var t=this;this.selectEmail=e,this.flagReply=!1,null!=this.selectEmail&&(this._flagFav=null!=this.selectEmail.favorites&&this.selectEmail.favorites.data.filter(function(e){return e.id==t.user.id&&e.stat}).length>0),this.compose=!1,this._detailId=e.did,this.loadSubData(e.did)}},{key:"selectedmail",value:function(e,t){var c=this;M.a.fire({title:"en"==this.user.lang?k.a.are_you_sure_complete_en:k.a.are_you_sure_complete,text:t.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?k.a.cancel_en:k.a.cancel,confirmButtonText:"en"==this.user.lang?k.a.confirmtext_en:k.a.confirmtext}).then(function(e){if(e.value){var i={};i.did=t.did,i.stat=!0,c._dataService.post("/tasks/updateStatus",i).subscribe(function(e){c._notifyService.showSuccess("en"==c.user.lang?k.a.MSG_UPDATE_EN:k.a.MSG_UPDATE,"OK"),c.selectEmail=e.data,c.loadUsersWithDept(c._id),c.loadData(),c.loadSubData(c._detailId)},function(){c._notifyService.showError("en"==c.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==c.user.lang?k.a.error_title_en:k.a.error_title)})}})}},{key:"moveEmails",value:function(e){e&&this.selectedEmails.filter(function(t){return t.type=e})}},{key:"addFavourite",value:function(e){console.log(e),this.updateFavorite(e.did,!this._flagFav)}},{key:"_downloadFileResult",value:function(e){window.open(E.a.BASE_API+"/"+e,"blank")}},{key:"loadSubData",value:function(e){var t=this;this._dataService.post("/tasks/getalltaskdetailbydid",{did:e,page:this.pageIndex,limit:this.pageSize}).subscribe(function(e){t._children=e.data,t.totalRow=e.rowCount,t.totalPage=e.totalPages})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.loadSubData(this._detailId)}},{key:"_createNew",value:function(){this.compose=!0,this.entitySub={},this.entitySub.did=null,this._children=[],this.follow_users=[],this.flagShow=!1}},{key:"fileEvent1",value:function(e,t){this.filesToUpload1=e.target.files,this._files1=t}},{key:"submitComment",value:function(e){var t=this;this.isSaveComment=!0,this.entitySubDID.id=this._id,this.entitySubDID.parent_id=e.did,this.entitySubDID.created_by=this.user.id,this.entitySubDID.title="Re: "+e.title,0==this.filesToUpload1.length?this._dataService.post("/tasks/addDetail",this.entitySubDID).subscribe(function(e){t.isSaveComment=!1,t.flagReply=!1,"failed"===e.result?t._notifyService.showError("en"==t.user.lang?k.a.MSG_ADDNO_EN:k.a.MSG_ADDNO,"en"==t.user.lang?k.a.error_title_en:k.a.error_title):(t.entitySubDID={},t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?k.a.MSG_ADD_EN:k.a.MSG_ADD,"OK"))},function(){t.isSaveComment=!1,t.flagReply=!1,t._notifyService.showError("en"==t.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==t.user.lang?k.a.error_title_en:k.a.error_title)}):this._processUploadDisagreeAfter1(this.filesToUpload1,e.did)}},{key:"_processUploadDisagreeAfter1",value:function(e,t){var c=this,i={folder_name:"tasks"};i.id=this._id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+i.id+"/"+i.folder_name,e).subscribe(function(e){c.entitySubDID.urls={data:e.data},c._dataService.post("/tasks/addDetail",c.entitySubDID).subscribe(function(e){c.isSaveComment=!1,c.flagReply=!1,"failed"!=e.result&&(c._files1.value=[],c._notifyService.showSuccess("en"==c.user.lang?k.a.MSG_ADD_EN:k.a.MSG_ADD,"OK"),c.loadSubData(t))},function(){c.isSaveComment=!1,c.flagReply=!1,c._notifyService.showError("en"==c.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==c.user.lang?k.a.error_title_en:k.a.error_title)})},function(){c.isSaveComment=!1,c.flagReply=!1,c._notifyService.showError("en"==c.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==c.user.lang?k.a.error_title_en:k.a.error_title)})}},{key:"updateFavorite",value:function(e,t){var c=this,i={};i.did=e,i.stat=t,i.userid=this.user.id,this._dataService.post("/tasks/updateFavorite",i).subscribe(function(t){"failed"===t.result?c._notifyService.showError("en"==c.user.lang?k.a.MSG_UPDATENO_EN:k.a.MSG_UPDATENO,"en"==c.user.lang?k.a.error_title_en:k.a.error_title):(c.compose=!0,c._children=[],c.selectEmail=t.data,c.loadData(),c.loadSubData(e),c._notifyService.showSuccess("en"==c.user.lang?k.a.MSG_UPDATE_EN:k.a.MSG_UPDATE,"OK"))},function(){c._notifyService.showError("en"==c.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==c.user.lang?k.a.error_title_en:k.a.error_title)})}},{key:"updateType",value:function(e,t){var c=this;this.compose=!0,this._children=[];var i={};i.did=e.did,i.type=1==e.type?null:t,this._dataService.post("/tasks/updateTypes",i).subscribe(function(t){"failed"===t.result?c._notifyService.showError("en"==c.user.lang?k.a.MSG_UPDATENO_EN:k.a.MSG_UPDATENO,"en"==c.user.lang?k.a.error_title_en:k.a.error_title):(c.loadUsersWithDept(c._id),c.loadData(),c.loadSubData(e.did),c._notifyService.showSuccess("en"==c.user.lang?k.a.MSG_UPDATE_EN:k.a.MSG_UPDATE,"OK"))},function(){c._notifyService.showError("en"==c.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==c.user.lang?k.a.error_title_en:k.a.error_title)})}},{key:"_editComposer",value:function(e){this.compose=!0,this.loadDetailByDID(e.did)}}]),t}()).\u0275fac=function(e){return new(e||Ne)(R.bc(d.a),R.bc(o.a),R.bc(S.d),R.bc(C.a),R.bc(s.a),R.bc(r.a),R.bc(I.a),R.bc(U.s),R.bc(O.a),R.bc(T.b),R.bc(S.a))},Ne.\u0275cmp=R.Vb({type:Ne,selectors:[["app-task-detail"]],decls:137,vars:79,consts:[[1,"container-fluid"],[1,"email-wrap"],[1,"row"],[1,"col-xl-3","col-md-6"],[1,"email-left-aside"],[1,"card"],[1,"card-body"],[1,"email-app-sidebar"],[1,"media"],[1,"media-size-email"],[4,"ngIf"],[1,"media-body"],[1,"f-w-600"],[1,"customers","d-inline-block","avatar-group"],["class","d-inline-block",4,"ngFor","ngForOf"],["role","tablist",1,"nav","main-menu"],[1,"nav-item"],["routerLink","/tasks/requests","id","pills-darkhome-tab","data-toggle","pill","role","tab","aria-controls","pills-darkhome","aria-selected","true",1,"btn-primary","btn-block","btn-mail"],[1,"icofont","icofont-rounded-double-left","mr-2"],["href","javascript:;","class","btn-success btn-block btn-mail","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",3,"click",4,"ngIf"],["class","nav-item",3,"click",4,"ngIf"],[1,"nav-item",3,"click"],["href","javascript:void(0)","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",1,"show"],[1,"title"],[1,"icon-info-alt"],[1,"badge","pull-right","digits"],[3,"click"],["href","javascript:void(0)"],[1,"icon-star"],[1,"icon-folder"],[1,"icon-pencil-alt"],[3,"ngClass"],[3,"click",4,"ngIf"],[1,"email-right-aside"],[1,"card","email-body"],[1,"pr-0","b-r-light"],[1,"email-top"],[1,"col"],[1,"col","text-right"],[1,"inbox",2,"max-height","630px !important"],["href","javascript:void(0)",4,"ngFor","ngForOf"],[1,"col-xl-6","col-md-12"],[1,"card","email-body","radius-left"],[1,"pl-0"],[1,"tab-content"],["id","pills-darkhome","role","tabpanel","aria-labelledby","pills-darkhome-tab",1,"tab-pane","fade",3,"ngClass"],[1,"email-compose"],[1,"email-top","compose-border"],[1,"col-sm-8","xl-50"],[1,"mb-0"],[1,"col-sm-4","btn-middle","xl-50"],["type","button",1,"btn","btn-primary","btn-block","btn-mail","text-center","mb-0","mt-0",3,"click"],[1,"fa","fa-paper-plane","mr-2"],[1,"email-wrapper"],[1,"theme-form"],[1,"form-group"],["for","title"],[1,"text-danger"],["id","title","type","text","name","title","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","chk-hidden",1,"d-block"],["id","chk-hidden","name","chk-hidden","type","checkbox",1,"checkbox_animated",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"form-group","mb-0"],["id","content",1,"text-muted"],["name","content","id","content","skin","moono-lisa","language","en",3,"ngModel","ngModelChange"],["for","filesToUpload",1,"col-form-label","pt-0"],["id","filesToUpload","name","filesToUpload","multiple","","type","file","accept",".pdf,.doc,.docx,.png,.jpg,jpeg",1,"form-control",3,"change"],["filesToUpload",""],["class","tab-pane fade","id","pills-darkprofile","role","tabpanel","aria-labelledby","pills-darkprofile-tab",3,"ngClass",4,"ngIf"],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-60",3,"alt"],[1,"mr-3","rounded-circle","img-60",3,"src","alt"],[1,"d-inline-block"],[1,"img-40","rounded-circle",3,"src","alt","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"img-40","rounded-circle",3,"alt","ngbTooltip"],["href","javascript:;","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",1,"btn-success","btn-block","btn-mail",3,"click"],[1,"icon-share","mr-2"],[1,"icon-trash"],[1,"media-size-email",3,"click"],[1,"digits"],["src","../../../../assets/img/icon-yes.svg",4,"ngIf"],[3,"innerHtml","click"],[1,"mr-3","rounded-circle","img-50",3,"src","alt"],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-50",3,"alt"],["src","../../../../assets/img/icon-yes.svg"],["href","javascript:;",1,"text-danger",3,"click"],[1,"search-not-found","text-center"],[1,""],["src","../../../../assets/images/search-not-found.png","alt","",1,"second-search"],["for","follower"],["name","_usersCc","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange"],["id","pills-darkprofile","role","tabpanel","aria-labelledby","pills-darkprofile-tab",1,"tab-pane","fade",3,"ngClass"],[1,"email-content"],[1,"col-md-6","xl-100","col-sm-12"],[2,"cursor","pointer","font-size","16pt",3,"ngClass","click"],[4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-12"],[1,"float-right","d-flex"],[1,"user-emailid"],[1,"fa","fa-star-o","f-18","mt-1",2,"cursor","pointer",3,"click"],[3,"innerHTML"],[1,"action-wrapper"],[1,"actions"],["alt","image",1,"mr-3","rounded-circle","img-50",3,"src"],[1,"text-muted"],[1,"icofont","icofont-clip"],["href","javascript:void(0)",1,"text-muted","text-right","right-download"],[1,"fa","fa-long-arrow-down","mr-2"],[1,"clearfix"],[1,"attachment"],[1,"list-inline"],["class","list-inline-item",4,"ngFor","ngForOf"],[1,"list-inline-item"],["src","../../../../assets/files/ico_file.png",1,"img-fluid",2,"width","20px","height","25px","cursor","pointer",3,"click"],["href","javascript:void(0)",1,"text-muted",3,"click"],[1,"fa","fa-reply","mr-2"],[1,"fa","fa-save","mr-2","text-success"],[1,"fa","fa-trash","text-danger","mr-2"],[1,"fa","fa-recycle","mr-2"],[1,"col-md-12"],[1,"input-group"],["type","text","aria-label","Recipient's username","name","comment",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"input-group-append"],[1,"input-group-text","btn-file"],[1,"icofont","icofont-attachment"],["type","file","name","filesToUpload1","multiple","","type","file","accept",".pdf,.doc,.docx,.png,.jpg,jpeg",3,"change"],["filesToUpload1",""],[1,"input-group-text",3,"click"],["class","icofont icofont-save",4,"ngIf"],[1,"icofont","icofont-save"],[1,"table-responsive"],[1,"table","card-table","table-vcenter","text-nowrap"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"]],template:function(e,t){if(1&e){var c=R.ic();R.hc(0,"div",0),R.hc(1,"div",1),R.hc(2,"div",2),R.hc(3,"div",3),R.hc(4,"div",4),R.hc(5,"div",5),R.hc(6,"div",6),R.hc(7,"div",7),R.hc(8,"div",8),R.hc(9,"div",9),R.bd(10,F,2,1,"ng-container",10),R.bd(11,j,2,2,"ng-container",10),R.gc(),R.hc(12,"div",11),R.hc(13,"h6",12),R.dd(14),R.gc(),R.hc(15,"p"),R.dd(16),R.gc(),R.gc(),R.gc(),R.hc(17,"div",8),R.hc(18,"div",11),R.hc(19,"p"),R.dd(20),R.wc(21,"translate"),R.gc(),R.hc(22,"p"),R.dd(23),R.wc(24,"translate"),R.gc(),R.hc(25,"p"),R.dd(26),R.wc(27,"translate"),R.gc(),R.hc(28,"div",13),R.hc(29,"ul"),R.bd(30,z,3,2,"li",14),R.gc(),R.gc(),R.bd(31,K,7,4,"ng-container",10),R.gc(),R.gc(),R.hc(32,"ul",15),R.hc(33,"li",16),R.hc(34,"a",17),R.cc(35,"i",18),R.dd(36),R.wc(37,"translate"),R.gc(),R.bd(38,V,5,6,"a",19),R.gc(),R.hc(39,"li"),R.cc(40,"hr"),R.gc(),R.bd(41,Y,6,3,"li",20),R.hc(42,"li",21),R.rc("click",function(){return t.getUserEmail(t.type="important")}),R.hc(43,"a",22),R.hc(44,"span",23),R.cc(45,"i",24),R.dd(46),R.wc(47,"translate"),R.gc(),R.hc(48,"span",25),R.dd(49),R.gc(),R.gc(),R.gc(),R.hc(50,"li",26),R.rc("click",function(){return t.getUserEmail(t.type="favourite")}),R.hc(51,"a",27),R.hc(52,"span",23),R.cc(53,"i",28),R.dd(54),R.wc(55,"translate"),R.gc(),R.hc(56,"span",25),R.dd(57),R.gc(),R.gc(),R.gc(),R.hc(58,"li",26),R.rc("click",function(){return t.getUserEmail(t.type="allmail")}),R.hc(59,"a",27),R.hc(60,"span",23),R.cc(61,"i",29),R.dd(62),R.wc(63,"translate"),R.gc(),R.hc(64,"span",25),R.dd(65),R.gc(),R.gc(),R.gc(),R.hc(66,"li",26),R.rc("click",function(){return t.getUserEmail(t.type="pending")}),R.hc(67,"a",27),R.hc(68,"span",23),R.cc(69,"i",30),R.dd(70),R.wc(71,"translate"),R.gc(),R.hc(72,"span",31),R.dd(73),R.gc(),R.gc(),R.gc(),R.bd(74,W,8,4,"li",32),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.hc(75,"div",3),R.hc(76,"div",33),R.hc(77,"div",34),R.hc(78,"div",35),R.hc(79,"div",36),R.hc(80,"div",2),R.hc(81,"div",37),R.hc(82,"h5"),R.dd(83),R.wc(84,"translate"),R.wc(85,"titlecase"),R.gc(),R.gc(),R.cc(86,"div",38),R.gc(),R.gc(),R.hc(87,"div",39),R.bd(88,ee,19,11,"a",40),R.wc(89,"slice"),R.bd(90,te,7,3,"ng-container",10),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.hc(91,"div",41),R.hc(92,"div",33),R.hc(93,"div",42),R.hc(94,"div",43),R.hc(95,"div",44),R.hc(96,"div",45),R.hc(97,"div",46),R.hc(98,"div",47),R.hc(99,"div",2),R.hc(100,"div",48),R.hc(101,"h4",49),R.dd(102),R.wc(103,"translate"),R.gc(),R.gc(),R.hc(104,"div",50),R.hc(105,"button",51),R.rc("click",function(){return t.isSave?null:t.submit()}),R.cc(106,"i",52),R.bd(107,ce,3,3,"ng-container",10),R.bd(108,ie,3,3,"ng-container",10),R.gc(),R.gc(),R.gc(),R.gc(),R.hc(109,"div",53),R.hc(110,"form",54),R.hc(111,"div",55),R.hc(112,"label",56),R.dd(113),R.wc(114,"translate"),R.hc(115,"span",57),R.dd(116,"*"),R.gc(),R.gc(),R.hc(117,"input",58),R.rc("ngModelChange",function(e){return t.entitySub.title=e}),R.gc(),R.gc(),R.hc(118,"div",55),R.hc(119,"label",59),R.dd(120),R.wc(121,"translate"),R.wc(122,"translate"),R.gc(),R.hc(123,"input",60),R.rc("ngModelChange",function(e){return t.flagShow=e}),R.gc(),R.gc(),R.bd(124,ae,7,15,"div",61),R.hc(125,"div",62),R.hc(126,"label",63),R.dd(127),R.wc(128,"translate"),R.gc(),R.hc(129,"ck-editor",64),R.rc("ngModelChange",function(e){return t.entitySub.content=e}),R.gc(),R.gc(),R.hc(130,"div",55),R.hc(131,"label",65),R.dd(132),R.wc(133,"translate"),R.gc(),R.hc(134,"input",66,67),R.rc("change",function(e){R.Uc(c);var i=R.Rc(135);return t.fileEvent(e,i)}),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.bd(136,De,40,31,"div",68),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.gc()}2&e&&(R.Nb(10),R.Dc("ngIf",null==t.user.avatar),R.Nb(1),R.Dc("ngIf",null!=t.user.avatar),R.Nb(3),R.ed(t.user.name),R.Nb(2),R.ed(t.user.email),R.Nb(4),R.gd("",R.xc(21,41,"Title"),": ",t.entity.title,""),R.Nb(3),R.gd("",R.xc(24,43,"Content"),": ",t.entity.description,""),R.Nb(3),R.fd("",R.xc(27,45,"Assigned to"),":"),R.Nb(4),R.Dc("ngForOf",t.related_users),R.Nb(1),R.Dc("ngIf",t.ccList.length>0),R.Nb(5),R.fd(" ",R.xc(37,47,"Return")," "),R.Nb(2),R.Dc("ngIf",0==t.entity.is_active),R.Nb(3),R.Dc("ngIf",!t._flagAllowCC&&1!=t.entity.is_active),R.Nb(5),R.fd(" ",R.xc(47,49,"Important"),""),R.Nb(3),R.fd("(",t.getUserEmail("important").length,")"),R.Nb(5),R.fd(" ",R.xc(55,51,"Favourite"),""),R.Nb(3),R.fd("(",t.getUserEmail("favourite").length,")"),R.Nb(5),R.fd(" ",R.xc(63,53,"All"),""),R.Nb(3),R.fd("(",t.getUserEmail("allmail").length,")"),R.Nb(5),R.fd(" ",R.xc(71,55,"Pending"),""),R.Nb(2),R.Dc("ngClass",0==t.getUserEmail("pending").length?"badge pull-right digits":"badge pull-right text-danger digits"),R.Nb(1),R.fd("(",t.getUserEmail("pending").length,")"),R.Nb(1),R.Dc("ngIf",!t._flagAllowCC),R.Nb(9),R.fd(" ",R.xc(84,57,t.type?R.xc(85,59,"allmail"==t.type?"All":t.type):"All")," "),R.Nb(5),R.Dc("ngForOf",R.zc(89,61,t.getUserEmail(t.type?t.type:"allmail"),0,7)),R.Nb(2),R.Dc("ngIf",!t.getUserEmail(t.type?t.type:"allmail").length),R.Nb(6),R.Dc("ngClass",R.Ic(77,we,t.compose)),R.Nb(6),R.ed(R.xc(103,65,"New message")),R.Nb(5),R.Dc("ngIf",!t.isSave),R.Nb(1),R.Dc("ngIf",t.isSave),R.Nb(5),R.fd("",R.xc(114,67,"Title")," "),R.Nb(4),R.Dc("ngModel",t.entitySub.title),R.Nb(3),R.gd(" ",R.xc(121,69,"Shown")," / ",R.xc(122,71,"Hidden"),"?"),R.Nb(3),R.Dc("ngModel",t.flagShow),R.Nb(1),R.Dc("ngIf",t.flagShow),R.Nb(3),R.ed(R.xc(128,73,"Description")),R.Nb(2),R.Dc("ngModel",t.entitySub.content),R.Nb(3),R.ed(R.xc(133,75,"Attachment")),R.Nb(4),R.Dc("ngIf",null!=t.selectEmail))},directives:[l.q,l.p,S.g,l.o,y.z,y.o,y.p,y.c,y.w,y.n,y.q,y.b,A.a,U.N,G.a,v.a],pipes:[P.c,l.z,l.y,l.f],styles:[".btn-file[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;text-align:right;opacity:0;outline:none;background:#fff;cursor:pointer;display:block}"]}),Ne),ke=n("wd/R");function xe(e,t){1&e&&R.cc(0,"img",31)}function Me(e,t){1&e&&(R.fc(0),R.hc(1,"tr"),R.hc(2,"td",32),R.hc(3,"h3",33),R.dd(4),R.wc(5,"translate"),R.gc(),R.gc(),R.gc(),R.ec()),2&e&&(R.Nb(4),R.fd(" ",R.xc(5,1,"No records now!!!")," "))}function Re(e,t){if(1&e&&(R.fc(0),R.dd(1),R.wc(2,"date"),R.ec()),2&e){var c=R.vc().$implicit;R.Nb(1),R.ed(R.yc(2,1,c.valid_date,"dd/MM/yyyy HH:mm"))}}function Ce(e,t){1&e&&(R.fc(0),R.dd(1),R.wc(2,"translate"),R.ec()),2&e&&(R.Nb(1),R.ed(R.xc(2,1,"Indefinite")))}function Ie(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",44),R.ec()),2&e){var c=R.vc().$implicit,i=R.vc(2);R.Nb(1),R.Ec("alt",c.name),R.Dc("src",i.baseFolder+"/"+c.avatar,R.Wc)("ngbTooltip",c.name)}}function Ue(e,t){if(1&e&&(R.fc(0),R.cc(1,"img",45),R.ec()),2&e){var c=R.vc().$implicit;R.Nb(1),R.Ec("alt",c.name),R.Dc("ngbTooltip",c.name)}}function Oe(e,t){if(1&e&&(R.hc(0,"li",43),R.bd(1,Ie,2,3,"ng-container",28),R.bd(2,Ue,2,2,"ng-container",28),R.gc()),2&e){var c=t.$implicit;R.Nb(1),R.Dc("ngIf",null!=c.avatar),R.Nb(1),R.Dc("ngIf",null==c.avatar)}}function Te(e,t){1&e&&(R.hc(0,"span",46),R.dd(1),R.wc(2,"translate"),R.gc()),2&e&&(R.Nb(1),R.ed(R.xc(2,1,"Opening")))}function Ae(e,t){1&e&&(R.hc(0,"span",47),R.dd(1),R.wc(2,"translate"),R.gc()),2&e&&(R.Nb(1),R.ed(R.xc(2,1,"Completed")))}function Ge(e,t){1&e&&(R.hc(0,"span",48),R.dd(1),R.wc(2,"translate"),R.gc()),2&e&&(R.Nb(1),R.ed(R.xc(2,1,"Cancel")))}function Pe(e,t){1&e&&R.cc(0,"span")}function Fe(e,t){if(1&e){var c=R.ic();R.hc(0,"button",52),R.rc("click",function(){R.Uc(c);var e=R.vc(2).$implicit;return R.vc().deleteItem(e)}),R.wc(1,"translate"),R.cc(2,"i",53),R.gc()}2&e&&R.Dc("ngbTooltip",R.xc(1,1,"Delete"))}function je(e,t){if(1&e){var c=R.ic();R.fc(0),R.hc(1,"button",49),R.rc("click",function(){R.Uc(c);var e=R.vc().$implicit,t=R.vc(),i=R.Rc(81);return t._openModal(i,e)}),R.wc(2,"translate"),R.cc(3,"i",50),R.gc(),R.bd(4,Fe,3,3,"button",51),R.ec()}if(2&e){var i=R.vc().$implicit;R.Nb(1),R.Dc("ngbTooltip",R.xc(2,2,"Edit")),R.Nb(3),R.Dc("ngIf",0==i.is_active)}}function $e(e,t){if(1&e){var c=R.ic();R.fc(0),R.hc(1,"tr"),R.hc(2,"td",27),R.dd(3),R.gc(),R.hc(4,"td",27),R.hc(5,"a",34),R.dd(6),R.gc(),R.gc(),R.hc(7,"td",27),R.bd(8,Re,3,4,"ng-container",28),R.bd(9,Ce,3,3,"ng-container",28),R.gc(),R.hc(10,"td",27),R.hc(11,"div",35),R.hc(12,"ul"),R.bd(13,Oe,3,2,"li",36),R.gc(),R.gc(),R.gc(),R.hc(14,"td",37),R.rc("click",function(){R.Uc(c);var e=t.$implicit,i=R.vc();return 0==e.is_active?i._addReminder(e):null}),R.cc(15,"i",38),R.wc(16,"translate"),R.hc(17,"span",39),R.dd(18),R.gc(),R.gc(),R.hc(19,"td",27),R.dd(20),R.wc(21,"translate"),R.gc(),R.hc(22,"td",27),R.bd(23,Te,3,3,"span",40),R.bd(24,Ae,3,3,"span",41),R.bd(25,Ge,3,3,"span",42),R.gc(),R.hc(26,"td"),R.bd(27,Pe,1,0,"span",28),R.gc(),R.hc(28,"td",27),R.bd(29,je,5,4,"ng-container",28),R.gc(),R.gc(),R.ec()}if(2&e){var i=t.$implicit,a=t.index,n=R.vc();R.Nb(3),R.fd(" ",a+1," "),R.Nb(2),R.Fc("routerLink","/tasks/requests/detail/",i.id,""),R.Nb(1),R.ed(i.title),R.Nb(2),R.Dc("ngIf",null!=i.valid_date),R.Nb(1),R.Dc("ngIf",null==i.valid_date),R.Nb(4),R.Dc("ngForOf",i.related_users.data),R.Nb(2),R.Dc("ngbTooltip",R.xc(16,16,"Reminder")),R.Nb(3),R.ed(null==i.reminder?0:i.reminder),R.Nb(2),R.hd(" ",R.xc(21,18,"Viewed")," (",i.count_view,"/",i.total_users,") "),R.Nb(3),R.Dc("ngIf",0==i.is_active),R.Nb(1),R.Dc("ngIf",1==i.is_active),R.Nb(1),R.Dc("ngIf",2==i.is_active),R.Nb(2),R.Dc("ngIf",1==i.is_active),R.Nb(2),R.Dc("ngIf",i.created_by==n.user.id)}}function Le(e,t){if(1&e){var c=R.ic();R.hc(0,"a",74),R.rc("click",function(){return R.Uc(c),R.vc(2).turnOnFlagCC()}),R.dd(1),R.wc(2,"translate"),R.gc()}2&e&&(R.Nb(1),R.ed(R.xc(2,1,"Cc")))}function ze(e,t){if(1&e){var c=R.ic();R.hc(0,"div",60),R.hc(1,"label",75),R.dd(2),R.wc(3,"translate"),R.gc(),R.hc(4,"ng-select",76),R.rc("ngModelChange",function(e){return R.Uc(c),R.vc(2).follow_users=e}),R.wc(5,"translate"),R.wc(6,"translate"),R.gc(),R.gc()}if(2&e){var i=R.vc(2);R.Nb(2),R.ed(R.xc(3,10,"Followers")),R.Nb(2),R.Dc("items",i._usersCc)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",i.follow_users)("placeholder",R.xc(5,12,"Please choose"))("notFoundText",R.xc(6,14,"Not found item"))("disabled",0!=i.entity.is_active)}}function qe(e,t){1&e&&(R.fc(0),R.hc(1,"a",77),R.cc(2,"img",78),R.dd(3),R.wc(4,"translate"),R.gc(),R.ec()),2&e&&(R.Nb(3),R.fd(" ",R.xc(4,1,"Processing")," "))}function Be(e,t){if(1&e){var c=R.ic();R.hc(0,"button",80),R.rc("click",function(){return R.Uc(c),R.vc(3).saveChange()}),R.dd(1),R.wc(2,"translate"),R.gc()}2&e&&(R.Nb(1),R.fd(" ",R.xc(2,1,"Save")," "))}function He(e,t){if(1&e&&(R.fc(0),R.bd(1,Be,3,3,"button",79),R.ec()),2&e){var c=R.vc(2);R.Nb(1),R.Dc("ngIf",!c.isSave)}}var Ke=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm:ss",containerClass:"theme-dark-blue"}};function Ve(e,t){if(1&e){var c=R.ic();R.hc(0,"div",54),R.hc(1,"h4",55),R.dd(2),R.wc(3,"translate"),R.gc(),R.hc(4,"button",56),R.rc("click",function(){return t.$implicit.dismiss("Cross click")}),R.hc(5,"span",57),R.dd(6,"\xd7"),R.gc(),R.gc(),R.gc(),R.hc(7,"div",58),R.hc(8,"div",59),R.hc(9,"div",60),R.hc(10,"label",61),R.dd(11),R.wc(12,"translate"),R.hc(13,"span",33),R.dd(14,"*"),R.gc(),R.gc(),R.hc(15,"input",62),R.rc("ngModelChange",function(e){return R.Uc(c),R.vc().entity.title=e}),R.gc(),R.gc(),R.hc(16,"div",60),R.hc(17,"label",63),R.dd(18),R.wc(19,"translate"),R.hc(20,"span",33),R.dd(21,"*"),R.gc(),R.gc(),R.hc(22,"textarea",64),R.rc("ngModelChange",function(e){return R.Uc(c),R.vc().entity.description=e}),R.gc(),R.gc(),R.hc(23,"div",60),R.hc(24,"label",65),R.dd(25),R.wc(26,"translate"),R.hc(27,"span",66),R.dd(28,"*"),R.gc(),R.bd(29,Le,3,3,"a",67),R.gc(),R.hc(30,"ng-select",68),R.rc("ngModelChange",function(e){return R.Uc(c),R.vc().related_users=e})("change",function(){return R.Uc(c),R.vc().changeUserCC()}),R.wc(31,"translate"),R.wc(32,"translate"),R.gc(),R.gc(),R.bd(33,ze,7,16,"div",69),R.hc(34,"div",60),R.hc(35,"label",70),R.dd(36),R.wc(37,"translate"),R.gc(),R.hc(38,"input",71),R.rc("ngModelChange",function(e){return R.Uc(c),R.vc().jdate=e})("bsValueChange",function(e){return R.Uc(c),R.vc().orgValueChange(e)}),R.wc(39,"translate"),R.gc(),R.gc(),R.gc(),R.gc(),R.hc(40,"div",72),R.hc(41,"button",73),R.rc("click",function(){return t.$implicit.dismiss("Cross click")}),R.dd(42),R.wc(43,"translate"),R.gc(),R.bd(44,qe,5,3,"ng-container",28),R.bd(45,He,2,1,"ng-container",28),R.gc()}if(2&e){var i=R.vc();R.Nb(2),R.gd(" ",R.xc(3,28,"ADD"==i._flagModal?"Add new":"Update")," ",i._title," "),R.Nb(9),R.fd("",R.xc(12,30,"Title")," "),R.Nb(4),R.Dc("ngModel",i.entity.title)("disabled",0!=i.entity.is_active),R.Nb(3),R.fd("",R.xc(19,32,"Content")," "),R.Nb(4),R.Dc("ngModel",i.entity.description)("disabled",0!=i.entity.is_active),R.Nb(3),R.fd("",R.xc(26,34,"Assigned to")," "),R.Nb(4),R.Dc("ngIf",0==i.entity.is_active),R.Nb(1),R.Dc("items",i._users)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",i.related_users)("placeholder",R.xc(31,36,"Please choose"))("notFoundText",R.xc(32,38,"Not found item"))("disabled",0!=i.entity.is_active),R.Nb(3),R.Dc("ngIf",i.flagCc),R.Nb(3),R.ed(R.xc(37,40,"Valid date")),R.Nb(2),R.Dc("placeholder",R.xc(39,42,"Indefinite"))("ngModel",i.jdate)("bsConfig",R.Hc(46,Ke))("disabled",0!=i.entity.is_active),R.Nb(4),R.fd(" ",R.xc(43,44,"Close")," "),R.Nb(2),R.Dc("ngIf",i.isSave),R.Nb(1),R.Dc("ngIf",0==i.entity.is_active)}}var Ye,We,Je,Xe=[{path:"",children:[{path:"requests",component:(Ye=function(){function t(e,i,a,n,l,r,s,o,d,u){c(this,t),this._authenService=e,this._dataService=i,this._route=a,this._notifyService=n,this._uploadService=l,this._excelService=r,this._numberFormat=s,this.modalService=o,this._utilyService=d,this.sanitizer=u,this._keyword="",this.baseFolder=E.a.BASE_API,this._isLoading=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._requestslist=[],this._title="",this._flagModal="ADD",this.isSave=!1,this.entity={},this.related_users=[],this.follow_users=[],this._users=[],this._usersCc=[],this.jdate=null,this.flagCc=!1,this.socket=N()(E.a.BASE_API)}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadUsersWithDept(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var t=this;this._isLoading=!0;var c={};c.page=this.pageIndex,c.limit=this.pageSize,c.filter=this._keyword,c.userid=this.user.id,this._dataService.post("/tasks/getall",c).subscribe(function(c){console.log("test",c);var i,a=[],n=e(c.data);try{for(n.s();!(i=n.n()).done;){var l=i.value,r=l.related_users.data.filter(function(e){return e.is_view}).length;l.count_view=r,l.total_users=l.related_users.data.length,a.push(l)}}catch(s){n.e(s)}finally{n.f()}t._requestslist=a,t.totalRow=c.rowCount,t.totalPage=c.totalPages,t._isLoading=!1})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadUsersWithDept",value:function(){var t=this,c={};c.short_code=this.user.short_code,this._dataService.post("/cat-submission/getallUsersNP",c).subscribe(function(c){console.log(c),t._users=c.data;var i=[];if(null!=t.entity.follow_users){var a,n=e(t._users);try{var l=function(){var e=a.value;null!=t.entity.follow_users&&0==JSON.parse(t.entity.follow_users).filter(function(t){return t==e.id}).length&&i.push(e)};for(n.s();!(a=n.n()).done;)l()}catch(r){n.e(r)}finally{n.f()}t._usersCc=i}else t._usersCc=t._users})}},{key:"changeUserCC",value:function(){var t=this;if(console.log("Before",this.related_users,this.follow_users),0==this.related_users.length)this.entity.related_users=null;else{var c,i=[],a=[],n=e(this.related_users);try{var l=function(){var e=c.value,n=t._users.filter(function(t){return t.id==e})[0];i.push({id:e,name:n.name,avatar:n.avatar,is_view:!1}),a.push(e)};for(n.s();!(c=n.n()).done;)l()}catch(u){n.e(u)}finally{n.f()}this.entity.related_users={data:i},this.entity.joined_users=0==a.length?null:JSON.stringify(a)}var r,s=[],o=e(this._users);try{var d=function(){var e=r.value;0==t.related_users.filter(function(t){return t==e.id}).length&&s.push(e)};for(o.s();!(r=o.n()).done;)d()}catch(u){o.e(u)}finally{o.f()}this._usersCc=s}},{key:"turnOnFlagCC",value:function(){var t=this;if(this.flagCc=!this.flagCc,this.flagCc){var c,i=[],a=e(this._users);try{var n=function(){var e=c.value;0==t.related_users.filter(function(t){return t==e.id}).length&&i.push(e)};for(a.s();!(c=a.n()).done;)n()}catch(l){a.e(l)}finally{a.f()}this._usersCc=i}}},{key:"_openModal",value:function(e,t){null==t?(this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.title=null,this.entity.description=null,this.related_users=[],this.entity.related_users={data:[]},this.follow_users=[],this.jdate=null,this.entity.valid_date=null,this.entity.is_active=0,this.entity.created_by=this.user.id):(this._flagModal="UPDATE",this.loadDetailById(t.id)),this.modalService.open(e,{size:"md",centered:!0,backdrop:!1})}},{key:"loadDetailById",value:function(t){var c=this;this._dataService.post("/tasks/detail",{id:t}).subscribe(function(t){c.entity=t.data;var i,a=[],n=e(t.data.related_users.data);try{for(n.s();!(i=n.n()).done;){var l=i.value;a.push(l.id)}}catch(u){n.e(u)}finally{n.f()}if(c.related_users=a,null!=t.data.valid_date&&(c.jdate=new Date(t.data.valid_date),c.entity.valid_date=ke(new Date(c.jdate)).format("DD/MM/YYYY HH:mm:ss")),null!=t.data.follow_users){c.flagCc=!0,c.follow_users=JSON.parse(t.data.follow_users);var r,s=[],o=e(c._users);try{var d=function(){var e=r.value;0==t.data.related_users.data.filter(function(t){return t.id==e.id}).length&&s.push(e)};for(o.s();!(r=o.n()).done;)d()}catch(u){o.e(u)}finally{o.f()}c._usersCc=s}else c.flagCc=!1,c.follow_users=[]})}},{key:"orgValueChange",value:function(e){null!=e&&"Invalid date"!=e?(this.jdate=e,this.entity.valid_date=ke(this.jdate).format("YYYY-MM-DD HH:mm:ss")):(this.jdate=null,this.entity.valid_date=null)}},{key:"saveChange",value:function(){var e=this;this.entity.follow_users=0==this.follow_users.length?null:JSON.stringify(this.follow_users),this.isSave=!0,"ADD"==this._flagModal?this._dataService.post("/tasks/add",this.entity).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?k.a.MSG_ADDNO_EN:k.a.MSG_ADDNO,"en"==e.user.lang?k.a.error_title_en:k.a.error_title):(e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?k.a.MSG_ADD_EN:k.a.MSG_ADD,"OK"),e.modalService.dismissAll())},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==e.user.lang?k.a.error_title_en:k.a.error_title)}):this._dataService.post("/tasks/update",this.entity).subscribe(function(t){e.isSave=!1,"failed"===t.result?e._notifyService.showError("en"==e.user.lang?k.a.MSG_UPDATENO_EN:k.a.MSG_UPDATENO,"en"==e.user.lang?k.a.error_title_en:k.a.error_title):(e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?k.a.MSG_UPDATE_EN:k.a.MSG_UPDATE,"OK"),e.modalService.dismissAll())},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==e.user.lang?k.a.error_title_en:k.a.error_title)})}},{key:"_addReminder",value:function(e){var t=this;M.a.fire({title:"en"==this.user.lang?k.a.are_you_sure2send_en:k.a.are_you_sure2send,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?k.a.cancel_en:k.a.cancel,confirmButtonText:"en"==this.user.lang?k.a.confirmtext_en:k.a.confirmtext}).then(function(c){c.value&&t._dataService.post("/tasks/addReminder",{id:e.id}).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?k.a.MSG_UPDATE_EN:k.a.MSG_UPDATE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==t.user.lang?k.a.error_title_en:k.a.error_title)})})}},{key:"deleteItem",value:function(e){var t=this;M.a.fire({title:"en"==this.user.lang?k.a.are_you_sure_cancel_en:k.a.are_you_sure_cancel,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?k.a.cancel_en:k.a.cancel,confirmButtonText:"en"==this.user.lang?k.a.confirmtext_en:k.a.confirmtext}).then(function(c){c.value&&(e.is_active=2,t._dataService.post("/tasks/update",e).subscribe(function(e){t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?k.a.MSG_UPDATE_EN:k.a.MSG_UPDATE,"OK")},function(){t._notifyService.showError("en"==t.user.lang?k.a.MSG_ERROR_EN:k.a.MSG_ERROR,"en"==t.user.lang?k.a.error_title_en:k.a.error_title)}))})}}]),t}(),Ye.\u0275fac=function(e){return new(e||Ye)(R.bc(d.a),R.bc(o.a),R.bc(S.d),R.bc(C.a),R.bc(s.a),R.bc(r.a),R.bc(I.a),R.bc(U.s),R.bc(O.a),R.bc(T.b))},Ye.\u0275cmp=R.Vb({type:Ye,selectors:[["app-task-request"]],decls:82,vars:75,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-body"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate",2,"width","15px"],[1,"text-truncate"],[4,"ngIf"],[4,"ngFor","ngForOf"],["popupWorkModal",""],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","9",2,"text-align","center"],[1,"text-danger"],["href","javascript:;",1,"text-danger",3,"routerLink"],[1,"customers","d-inline-block","avatar-group"],["class","d-inline-block",4,"ngFor","ngForOf"],[1,"text-truncate",2,"cursor","pointer",3,"click"],[1,"fa","fa-bell-o",2,"font-size","14pt",3,"ngbTooltip"],[1,"badge-pill","badge-danger"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"d-inline-block"],[1,"img-40","rounded-circle",3,"src","alt","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"img-40","rounded-circle",3,"alt","ngbTooltip"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],["class","btn btn-sm btn-danger mr-sm-1",3,"ngbTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"ngbTooltip","click"],[1,"fa","fa-trash"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],[1,"col-md-12"],["for","title"],["type","text","name","title","id","title","autocomplete","off","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","description"],["id","description","rows","3","name","description","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","assignedto"],[1,"text-danger","mr-sm-2"],["href","javascript:;","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["name","_users","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","disabled","ngModelChange","change"],["class","col-md-12",4,"ngIf"],["for","validdate"],["type","text","name","jdate","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],["for","follower"],["name","_usersCc","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","disabled","ngModelChange"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){if(1&e){var c=R.ic();R.hc(0,"div",0),R.hc(1,"div",1),R.hc(2,"div",2),R.hc(3,"div",3),R.hc(4,"div",4),R.hc(5,"div",1),R.hc(6,"div",5),R.hc(7,"div",6),R.hc(8,"input",7),R.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),R.wc(9,"translate"),R.gc(),R.hc(10,"button",8),R.rc("click",function(){R.Uc(c);var e=R.Rc(81);return t._openModal(e,null)}),R.dd(11),R.wc(12,"translate"),R.gc(),R.bd(13,xe,1,0,"img",9),R.gc(),R.gc(),R.hc(14,"div",10),R.hc(15,"div",11),R.hc(16,"select",12),R.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),R.hc(17,"option",13),R.dd(18,"#10"),R.gc(),R.hc(19,"option",14),R.dd(20,"#25"),R.gc(),R.hc(21,"option",15),R.dd(22,"#50"),R.gc(),R.hc(23,"option",16),R.dd(24,"#100"),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.hc(25,"div",17),R.hc(26,"div",18),R.hc(27,"div",19),R.hc(28,"div",20),R.hc(29,"pagination",21),R.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),R.gc(),R.gc(),R.hc(30,"div",22),R.hc(31,"a",23),R.dd(32),R.wc(33,"translate"),R.wc(34,"translate"),R.wc(35,"translate"),R.wc(36,"translate"),R.gc(),R.gc(),R.gc(),R.gc(),R.hc(37,"div",24),R.hc(38,"table",25),R.hc(39,"thead"),R.hc(40,"th",26),R.dd(41,"#"),R.gc(),R.hc(42,"th",27),R.dd(43),R.wc(44,"translate"),R.gc(),R.hc(45,"th",27),R.dd(46),R.wc(47,"translate"),R.gc(),R.hc(48,"th",27),R.dd(49),R.wc(50,"translate"),R.gc(),R.hc(51,"th",27),R.dd(52),R.wc(53,"translate"),R.gc(),R.hc(54,"th",27),R.dd(55),R.wc(56,"translate"),R.gc(),R.hc(57,"th",27),R.dd(58),R.wc(59,"translate"),R.gc(),R.hc(60,"th",27),R.dd(61),R.wc(62,"translate"),R.gc(),R.hc(63,"th",27),R.dd(64),R.wc(65,"translate"),R.gc(),R.gc(),R.hc(66,"tbody"),R.bd(67,Me,6,3,"ng-container",28),R.bd(68,$e,30,20,"ng-container",29),R.gc(),R.gc(),R.gc(),R.hc(69,"div",18),R.hc(70,"div",19),R.hc(71,"div",20),R.hc(72,"pagination",21),R.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),R.gc(),R.gc(),R.hc(73,"div",22),R.hc(74,"a",23),R.dd(75),R.wc(76,"translate"),R.wc(77,"translate"),R.wc(78,"translate"),R.wc(79,"translate"),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.gc(),R.bd(80,Ve,46,47,"ng-template",null,30,R.cd)}2&e&&(R.Nb(8),R.Dc("placeholder",R.xc(9,39,"Search"))("ngModel",t._keyword),R.Nb(3),R.fd(" ",R.xc(12,41,"Add new request")," "),R.Nb(2),R.Dc("ngIf",t._isLoading),R.Nb(3),R.Dc("ngModel",t.pageSize),R.Nb(13),R.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),R.Nb(3),R.id("",R.xc(33,43,"Total of records"),": ",t.totalRow," - ",R.xc(34,45,"Page")," ",t.pageIndex," ",R.xc(35,47,"of")," ",t.totalPage," ",R.xc(36,49,"page"),""),R.Nb(11),R.ed(R.xc(44,51,"Title")),R.Nb(3),R.fd(" ",R.xc(47,53,"Valid date")," "),R.Nb(3),R.fd(" ",R.xc(50,55,"Assigned to")," "),R.Nb(3),R.fd(" ",R.xc(53,57,"Reminder")," "),R.Nb(3),R.fd(" ",R.xc(56,59,"Joined")," "),R.Nb(3),R.ed(R.xc(59,61,"Status")),R.Nb(3),R.ed(R.xc(62,63,"Time")),R.Nb(3),R.ed(R.xc(65,65,"Actions")),R.Nb(3),R.Dc("ngIf",0==t._requestslist.length),R.Nb(1),R.Dc("ngForOf",t._requestslist),R.Nb(4),R.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),R.Nb(3),R.id("",R.xc(76,67,"Total of records"),": ",t.totalRow," - ",R.xc(77,69,"Page")," ",t.pageIndex," ",R.xc(78,71,"of")," ",t.totalPage," ",R.xc(79,73,"page"),""))},directives:[y.c,y.n,y.q,l.q,y.x,y.r,y.A,v.a,l.p,S.g,U.N,y.w,G.a,b.b,b.a],pipes:[P.c,l.f],styles:[""]}),Ye),data:{title:"Requests",breadcrumb:"Requests"}},{path:"requests/detail/:id",component:Ee,data:{title:"Details",breadcrumb:"Details"}}]}],Ze=((We=function e(){c(this,e)}).\u0275mod=R.Zb({type:We}),We.\u0275inj=R.Yb({factory:function(e){return new(e||We)},imports:[[S.h.forChild(Xe)],S.h]}),We),Qe=n("arFO"),et=n("tmjD"),tt=n("Kdsb"),ct=n("g9iH"),it=n("UkRs"),at=n("VXpv"),nt=n("IkSl"),lt=((Je=function e(){c(this,e)}).\u0275mod=R.Zb({type:Je}),Je.\u0275inj=R.Yb({factory:function(e){return new(e||Je)},providers:[d.a,o.a,s.a,r.a,P.d,I.a],imports:[[l.c,Ze,y.k,_.a,m.b,P.b,p.a,b.c.forRoot(),v.b.forRoot(),h.a.forRoot(),f.a.forRoot(),ct.b,g.a,u.a,Qe.a,U.u,G.b,et.b.forRoot(),tt.c,it.c,A.b,at.b,nt.b]]}),Je)}}])}();