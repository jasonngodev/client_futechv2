!function(){function e(e,n){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var c=0,i=function(){};return{s:i,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw r}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{d8eE:function(t,a,i){"use strict";i.r(a),i.d(a,"RequestModule",function(){return wi});var r=i("ofXK"),o=i("3Pt+"),l=i("tyNb"),s=i("mrSG"),d=i("wd/R"),u=i("gFX4"),h=i.n(u),g=i("CMKA"),m=i("5JmO"),_=i.n(m),p=i("TruH"),f=i.n(p),b=i("PSD3"),v=i.n(b),y=i("piOG"),x=i("fXoL"),S=i("7dP1"),w=i("cplz"),N=i("3t6R"),D=i("25+x"),M=i("VToC"),C=i("1kSV"),k=i("hzby"),T=i("Lm2G"),I=i("ZOsW"),P=i("sYmb"),R=["fileUpload"];function A(e,t){if(1&e){var n=x.ic();x.hc(0,"button",46),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e._getlist)}),x.cc(1,"i",47),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function E(e,t){1&e&&x.cc(0,"img",48)}function U(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",49),x.hc(3,"h3",50),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function F(e,t){if(1&e){var n=x.ic();x.hc(0,"a",65),x.rc("click",function(){x.Uc(n);var e=x.vc(2).$implicit,t=x.vc(2),a=x.Rc(108);return t._switchLanguage(a,3,e)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Report standard compared")))}function O(e,t){if(1&e){var n=x.ic();x.hc(0,"a",65),x.rc("click",function(){x.Uc(n);var e=x.vc(2).$implicit,t=x.vc(2),a=x.Rc(108);return t._switchLanguage(a,4,e)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Report standard attached")))}function Y(e,t){if(1&e){var n=x.ic();x.hc(0,"div",61),x.hc(1,"button",62),x.cc(2,"i",63),x.gc(),x.hc(3,"div",64),x.hc(4,"a",65),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit,t=x.vc(2),a=x.Rc(108);return t._switchLanguage(a,0,e)}),x.dd(5),x.wc(6,"translate"),x.gc(),x.hc(7,"a",65),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit,t=x.vc(2),a=x.Rc(108);return t._switchLanguage(a,1,e)}),x.dd(8),x.wc(9,"translate"),x.gc(),x.bd(10,F,3,3,"a",66),x.bd(11,O,3,3,"a",66),x.gc(),x.gc()}if(2&e){var a=x.vc().$implicit;x.Nb(5),x.ed(x.xc(6,4,"All")),x.Nb(3),x.ed(x.xc(9,6,"Report standard")),x.Nb(2),x.Dc("ngIf",a.flag_compare),x.Nb(1),x.Dc("ngIf",null!=a.url_img)}}function L(e,t){if(1&e){var n=x.ic();x.hc(0,"a",68),x.rc("click",function(){x.Uc(n);var e=x.vc(2).$implicit,t=x.vc(2),a=x.Rc(112);return t._editInformation(a,e)}),x.cc(1,"i",69),x.gc()}}function q(e,t){if(1&e&&(x.fc(0),x.bd(1,L,2,0,"a",67),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngIf",n._authenService.hasPermission("REQ-REPORT","update"))}}function z(e,t){if(1&e){var n=x.ic();x.hc(0,"a",70),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit,t=x.vc(2),a=x.Rc(114);return t._popupRepareResults(a,e)}),x.dd(1),x.gc()}if(2&e){var a=x.vc().$implicit;x.Nb(1),x.ed(a.report_inner_code)}}function G(e,t){if(1&e&&(x.hc(0,"span"),x.dd(1),x.gc()),2&e){var n=x.vc().$implicit;x.Nb(1),x.ed(n.report_inner_code)}}function V(e,t){1&e&&(x.hc(0,"span",71),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Draft")," "))}function B(e,t){1&e&&(x.hc(0,"span",72),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Official")," "))}function Q(e,t){1&e&&(x.hc(0,"span",73),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Evicted")," "))}function H(e,t){1&e&&(x.hc(0,"span",74),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Printed")," "))}function $(e,t){1&e&&(x.hc(0,"span",75),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Cancel")," "))}function K(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",52),x.dd(2),x.gc(),x.hc(3,"td"),x.bd(4,Y,12,8,"div",53),x.bd(5,q,2,1,"ng-container",40),x.gc(),x.hc(6,"td"),x.bd(7,z,2,1,"a",54),x.bd(8,G,2,1,"span",40),x.gc(),x.hc(9,"td"),x.dd(10),x.gc(),x.hc(11,"td"),x.dd(12),x.gc(),x.hc(13,"td"),x.dd(14),x.wc(15,"date"),x.gc(),x.hc(16,"td"),x.dd(17),x.wc(18,"date"),x.gc(),x.hc(19,"td"),x.dd(20),x.gc(),x.hc(21,"td"),x.dd(22),x.gc(),x.hc(23,"td",55),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2),c=x.Rc(110);return 2!=e.is_active&&a._authenService.hasPermission("REQ-REPORT","update")?3==e.is_active?a._switchEviction(e):a._popupStates(c,e):null}),x.bd(24,V,3,3,"span",56),x.bd(25,B,3,3,"span",57),x.bd(26,Q,3,3,"span",58),x.bd(27,H,3,3,"span",59),x.bd(28,$,3,3,"span",60),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.Dc("ngIf",i._authenService.hasPermission("REQ-REPORT","print")),x.Nb(1),x.Dc("ngIf",0==a.is_active||1==a.is_active),x.Nb(2),x.Dc("ngIf",0==a.is_active),x.Nb(1),x.Dc("ngIf",0!=a.is_active),x.Nb(2),x.fd(" ",a.request_no," "),x.Nb(2),x.fd(" ",a.sample_name," "),x.Nb(2),x.ed(x.yc(15,16,a.received_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.ed(x.yc(18,19,a.returned_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.ed(a.company_sender_l),x.Nb(2),x.ed(a.sender_name),x.Nb(2),x.Dc("ngIf",0==a.is_active),x.Nb(1),x.Dc("ngIf",1==a.is_active),x.Nb(1),x.Dc("ngIf",2==a.is_active),x.Nb(1),x.Dc("ngIf",3==a.is_active),x.Nb(1),x.Dc("ngIf",4==a.is_active)}}function j(e,t){if(1&e&&(x.fc(0),x.bd(1,K,29,22,"tr",51),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._getlist)}}function X(e,t){if(1&e){var n=x.ic();x.hc(0,"form",76),x.hc(1,"div",77),x.hc(2,"h4",78),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",79),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",80),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",81),x.hc(9,"div",82),x.hc(10,"div",83),x.hc(11,"div",84),x.hc(12,"button",85),x.rc("click",function(){return x.Uc(n),x.vc()._print("vn")}),x.dd(13),x.wc(14,"translate"),x.gc(),x.hc(15,"button",86),x.rc("click",function(){return x.Uc(n),x.vc()._print("en")}),x.dd(16),x.wc(17,"translate"),x.gc(),x.hc(18,"button",87),x.rc("click",function(){return x.Uc(n),x.vc()._print("0")}),x.dd(19),x.wc(20,"translate"),x.wc(21,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}2&e&&(x.Nb(3),x.fd(" ",x.xc(4,5,"Language")," "),x.Nb(10),x.fd(" ",x.xc(14,7,"Vietnamese")," "),x.Nb(3),x.fd(" ",x.xc(17,9,"English")," "),x.Nb(3),x.gd(" ",x.xc(20,11,"Vietnamese"),"/",x.xc(21,13,"English")," "))}function W(e,t){if(1&e){var n=x.ic();x.hc(0,"form",76),x.hc(1,"div",77),x.hc(2,"h4",78),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",79),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",80),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",81),x.hc(9,"div",82),x.hc(10,"div",83),x.hc(11,"div",84),x.hc(12,"select",88),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().changeState=e})("change",function(){return x.Uc(n),x.vc()._updateState()}),x.hc(13,"option",89),x.dd(14),x.wc(15,"translate"),x.gc(),x.hc(16,"option",89),x.dd(17),x.wc(18,"translate"),x.gc(),x.hc(19,"option",89),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"option",89),x.dd(23),x.wc(24,"translate"),x.gc(),x.hc(25,"option",89),x.dd(26),x.wc(27,"translate"),x.gc(),x.hc(28,"option",89),x.dd(29),x.wc(30,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.gd(" ",x.xc(4,15,"Status")," - ",a._titleLanguage," "),x.Nb(9),x.Dc("ngModel",a.changeState),x.Nb(1),x.Dc("value",null),x.Nb(1),x.ed(x.xc(15,17,"Please choose")),x.Nb(2),x.Dc("value",0),x.Nb(1),x.ed(x.xc(18,19,"Draft")),x.Nb(2),x.Dc("value",1),x.Nb(1),x.ed(x.xc(21,21,"Official")),x.Nb(2),x.Dc("value",2),x.Nb(1),x.ed(x.xc(24,23,"Evicted")),x.Nb(2),x.Dc("value",3),x.Nb(1),x.ed(x.xc(27,25,"Printed")),x.Nb(2),x.Dc("value",4),x.Nb(1),x.ed(x.xc(30,27,"Cancel"))}}function J(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"button",112),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(2)._chooseTab(e,e.order_no)}),x.dd(2),x.wc(3,"translate"),x.gc(),x.ec()}if(2&e){var a=t.$implicit,c=x.vc(2);x.Nb(1),x.Dc("ngClass",a.order_no==c._currentTabActivated?"btn btn-sm btn-primary":"btn btn-sm btn-secondary"),x.Nb(1),x.gd(" ",x.xc(3,3,"Sample")," ",a.order_no," ")}}var Z=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function ee(e,t){if(1&e){var n=x.ic();x.hc(0,"form",76),x.hc(1,"div",77),x.hc(2,"h4",78),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",79),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",80),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",81),x.hc(9,"div",82),x.hc(10,"div",83),x.hc(11,"div",90),x.hc(12,"label",91),x.dd(13),x.wc(14,"translate"),x.hc(15,"span",50),x.dd(16,"(*)"),x.gc(),x.gc(),x.hc(17,"ng-select",92),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.customer_id=e}),x.wc(18,"translate"),x.wc(19,"translate"),x.gc(),x.gc(),x.gc(),x.hc(20,"div",93),x.hc(21,"div",90),x.hc(22,"label",94),x.dd(23),x.wc(24,"translate"),x.hc(25,"span",50),x.dd(26,"(*)"),x.gc(),x.gc(),x.hc(27,"input",95),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._fdatea=e})("bsValueChange",function(e){return x.Uc(n),x.vc().orgValueChange1a(e)}),x.wc(28,"translate"),x.gc(),x.gc(),x.gc(),x.hc(29,"div",93),x.hc(30,"div",90),x.hc(31,"label",96),x.dd(32),x.wc(33,"translate"),x.hc(34,"span",50),x.dd(35,"(*)"),x.gc(),x.gc(),x.hc(36,"input",97),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._tdatea=e})("bsValueChange",function(e){return x.Uc(n),x.vc().orgValueChange2a(e)}),x.wc(37,"translate"),x.gc(),x.gc(),x.gc(),x.hc(38,"div",93),x.hc(39,"div",90),x.hc(40,"label",98),x.dd(41),x.wc(42,"translate"),x.gc(),x.hc(43,"div",29),x.hc(44,"input",99),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.valid_number=e})("change",function(){return x.Uc(n),x.vc()._calculateDays()}),x.wc(45,"translate"),x.gc(),x.hc(46,"button",100),x.rc("click",function(){return x.Uc(n),x.vc().saveChangeRequest()}),x.cc(47,"i",101),x.dd(48),x.wc(49,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(50,"div",83),x.cc(51,"hr"),x.hc(52,"div",102),x.hc(53,"div",103),x.bd(54,J,4,5,"ng-container",51),x.gc(),x.gc(),x.cc(55,"hr"),x.gc(),x.hc(56,"div",104),x.hc(57,"div",90),x.hc(58,"label",105),x.hc(59,"strong"),x.dd(60),x.wc(61,"translate"),x.gc(),x.gc(),x.hc(62,"input",106),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_name=e}),x.wc(63,"translate"),x.gc(),x.hc(64,"input",107),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_id=e}),x.gc(),x.gc(),x.gc(),x.hc(65,"div",104),x.hc(66,"div",90),x.hc(67,"label",105),x.hc(68,"strong"),x.dd(69),x.wc(70,"translate"),x.gc(),x.gc(),x.hc(71,"input",106),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.weight=e}),x.wc(72,"translate"),x.gc(),x.gc(),x.gc(),x.hc(73,"div",104),x.hc(74,"div",90),x.hc(75,"label",105),x.hc(76,"strong"),x.dd(77),x.wc(78,"translate"),x.wc(79,"translate"),x.gc(),x.gc(),x.hc(80,"textarea",108),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.description=e}),x.wc(81,"translate"),x.gc(),x.gc(),x.gc(),x.hc(82,"div",104),x.hc(83,"div",90),x.hc(84,"label",105),x.hc(85,"strong"),x.dd(86),x.wc(87,"translate"),x.gc(),x.gc(),x.hc(88,"textarea",108),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.note=e}),x.wc(89,"translate"),x.gc(),x.gc(),x.gc(),x.hc(90,"div",109),x.hc(91,"button",110),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.cc(92,"i",111),x.dd(93),x.wc(94,"translate"),x.gc(),x.hc(95,"button",100),x.rc("click",function(){return x.Uc(n),x.vc().saveChangeSample()}),x.cc(96,"i",101),x.dd(97),x.wc(98,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.gd(" ",x.xc(4,55,"Request code")," - ",a._titleLanguage," "),x.Nb(10),x.fd("",x.xc(14,57,"Company")," "),x.Nb(4),x.Dc("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.entity.customer_id)("placeholder",x.xc(18,59,"Please choose"))("notFoundText",x.xc(19,61,"Not found item")),x.Nb(6),x.fd("",x.xc(24,63,"Received date")," "),x.Nb(4),x.Dc("placeholder",x.xc(28,65,"Received date"))("ngModel",a._fdatea)("bsConfig",x.Hc(99,Z)),x.Nb(5),x.fd("",x.xc(33,67,"Returned date")," "),x.Nb(4),x.Dc("placeholder",x.xc(37,69,"Returned date"))("ngModel",a._tdatea)("bsConfig",x.Hc(100,Z)),x.Nb(5),x.ed(x.xc(42,71,"Valid date")),x.Nb(3),x.Dc("type","number")("placeholder",x.xc(45,73,"Valid date"))("ngModel",a.entity.valid_number)("min",0),x.Nb(4),x.fd(" ",x.xc(49,75,"Save")," "),x.Nb(6),x.Dc("ngForOf",a.entity._samples),x.Nb(4),x.Fc("for","sn",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(61,77,"Sample name")),x.Nb(2),x.Fc("id","sn",a._currentTabActivated,""),x.Fc("name","sample_name",a._currentTabActivated,""),x.Dc("placeholder",x.xc(63,79,"Sample")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_name),x.Nb(2),x.Fc("id","id",a._currentTabActivated,""),x.Fc("name","id",a._currentTabActivated,""),x.Dc("ngModel",a.entity0.sample_id),x.Nb(3),x.Fc("for","weight",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(70,81,"Weight")),x.Nb(2),x.Fc("id","weight",a._currentTabActivated,""),x.Fc("name","weight",a._currentTabActivated,""),x.Dc("placeholder",x.xc(72,83,"Weight")+" "+a._currentTabActivated)("ngModel",a.entity0.weight),x.Nb(4),x.Fc("for","description",a._currentTabActivated,""),x.Nb(2),x.gd("",x.xc(78,85,"Description")," (",x.xc(79,87,"State of sample"),")"),x.Nb(3),x.Fc("id","description",a._currentTabActivated,""),x.Fc("name","description",a._currentTabActivated,""),x.Dc("placeholder",x.xc(81,89,"Description")+" "+a._currentTabActivated)("ngModel",a.entity0.description),x.Nb(4),x.Fc("for","note",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(87,91,"Note")),x.Nb(2),x.Fc("id","note",a._currentTabActivated,""),x.Fc("name","note",a._currentTabActivated,""),x.Dc("placeholder",x.xc(89,93,"Note")+" "+a._currentTabActivated)("ngModel",a.entity0.note),x.Nb(5),x.fd(" ",x.xc(94,95,"Close")," "),x.Nb(4),x.fd(" ",x.xc(98,97,"Save")," ")}}function te(e,t){1&e&&x.cc(0,"img",48)}function ne(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"a",70),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit,t=x.vc(2),a=x.Rc(116);return t.popupComment(a,e)}),x.dd(2),x.gc(),x.ec()}if(2&e){var a=x.vc().$implicit;x.Nb(2),x.ed(a.inner_code)}}function ae(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.ed(n.inner_code)}}function ce(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"td",117),x.dd(2),x.gc(),x.hc(3,"td",117),x.bd(4,ne,3,1,"ng-container",40),x.bd(5,ae,2,1,"ng-container",40),x.gc(),x.hc(6,"td",117),x.dd(7),x.gc(),x.hc(8,"td",39),x.dd(9),x.gc(),x.hc(10,"td"),x.hc(11,"input",118),x.rc("ngModelChange",function(e){return t.$implicit.lod=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._reupdateInformation(e._getlist2side)}),x.gc(),x.gc(),x.hc(12,"td",117),x.hc(13,"input",118),x.rc("ngModelChange",function(e){return t.$implicit.loq=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._reupdateInformation(e._getlist2side)}),x.gc(),x.gc(),x.hc(14,"td",117),x.hc(15,"input",119),x.rc("ngModelChange",function(e){return t.$implicit.result_record=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._reupdateInformation(e._getlist2side)}),x.wc(16,"translate"),x.gc(),x.hc(17,"input",119),x.rc("ngModelChange",function(e){return t.$implicit.result_record_e=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._reupdateInformation(e._getlist2side)}),x.wc(18,"translate"),x.gc(),x.gc(),x.hc(19,"td",117),x.hc(20,"input",118),x.rc("ngModelChange",function(e){return t.$implicit.mark=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._reupdateInformation(e._getlist2side)}),x.gc(),x.gc(),x.hc(21,"td",120),x.hc(22,"input",121),x.rc("ngModelChange",function(e){return t.$implicit.allow_lod=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._reupdateInformation(e._getlist2side)}),x.gc(),x.gc(),x.hc(23,"td",117),x.hc(24,"input",118),x.rc("ngModelChange",function(e){return t.$implicit.compare_note=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._reupdateInformation(e._getlist2side)}),x.gc(),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.ed(c+1),x.Nb(2),x.Dc("ngIf",i._authenService.hasPermission("REQ-REPORT","update")),x.Nb(1),x.Dc("ngIf",!i._authenService.hasPermission("REQ-REPORT","update")),x.Nb(2),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.Fc("name","lod",c+1,""),x.Dc("ngModel",a.lod),x.Nb(2),x.Fc("name","loq",c+1,""),x.Dc("ngModel",a.loq),x.Nb(2),x.Fc("name","result_record",c+1,""),x.Dc("ngModel",a.result_record)("placeholder",x.xc(16,21,"Vietnamese")),x.Nb(2),x.Fc("name","result_record_e",c+1,""),x.Dc("ngModel",a.result_record_e)("placeholder",x.xc(18,23,"English")),x.Nb(3),x.Fc("name","mark",c+1,""),x.Dc("ngModel",a.mark),x.Nb(2),x.Fc("name","allow_lod",c+1,""),x.Dc("ngModel",a.allow_lod),x.Nb(2),x.Fc("name","compare_note",c+1,""),x.Dc("ngModel",a.compare_note)}}function ie(e,t){if(1&e){var n=x.ic();x.hc(0,"form",76),x.hc(1,"div",81),x.hc(2,"div",82),x.hc(3,"div",83),x.hc(4,"label",113),x.dd(5),x.wc(6,"translate"),x.bd(7,te,1,0,"img",19),x.gc(),x.hc(8,"input",114),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._keywordAdditional=e})("change",function(){return x.Uc(n),x.vc().loadLabResultList()})("keyup.enter",function(){return x.Uc(n),x.vc().loadLabResultList()}),x.gc(),x.gc(),x.hc(9,"div",83),x.hc(10,"div",115),x.hc(11,"table",116),x.hc(12,"thead"),x.hc(13,"th",117),x.dd(14,"#"),x.gc(),x.hc(15,"th",117),x.dd(16),x.wc(17,"translate"),x.gc(),x.hc(18,"th",117),x.dd(19),x.wc(20,"translate"),x.gc(),x.hc(21,"th",117),x.dd(22),x.wc(23,"translate"),x.gc(),x.hc(24,"th"),x.dd(25),x.wc(26,"translate"),x.gc(),x.hc(27,"th",117),x.dd(28),x.wc(29,"translate"),x.gc(),x.hc(30,"th",117),x.dd(31),x.wc(32,"translate"),x.gc(),x.hc(33,"th",117),x.dd(34),x.wc(35,"translate"),x.gc(),x.hc(36,"th",117),x.dd(37),x.wc(38,"translate"),x.gc(),x.hc(39,"th",117),x.dd(40),x.wc(41,"translate"),x.gc(),x.gc(),x.hc(42,"tbody"),x.bd(43,ce,25,25,"tr",51),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(5),x.fd("",x.xc(6,13,"Search")," "),x.Nb(2),x.Dc("ngIf",a._isLoadingResult),x.Nb(1),x.Dc("ngModel",a._keywordAdditional),x.Nb(8),x.ed(x.xc(17,15,"Inner code")),x.Nb(3),x.ed(x.xc(20,17,"Code")),x.Nb(3),x.fd(" ",x.xc(23,19,"Internal testing")," "),x.Nb(3),x.ed(x.xc(26,21,"LOD")),x.Nb(3),x.ed(x.xc(29,23,"LOQ")),x.Nb(3),x.ed(x.xc(32,25,"Results")),x.Nb(3),x.ed(x.xc(35,27,"Mark")),x.Nb(3),x.ed(x.xc(38,29,"Tick LOD?")),x.Nb(3),x.ed(x.xc(41,31,"Compare")),x.Nb(3),x.Dc("ngForOf",a._getlist2side)}}function re(e,t){if(1&e){var n=x.ic();x.hc(0,"a",136),x.rc("click",function(){x.Uc(n);var e=x.vc(2);return e.removeAttachment(e.entityComment)}),x.cc(1,"i",137),x.gc()}}function oe(e,t){1&e&&(x.fc(0),x.hc(1,"a",138),x.cc(2,"img",139),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing"),""))}function le(e,t){1&e&&(x.hc(0,"button",140),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Save & close")," "))}function se(e,t){if(1&e){var n=x.ic();x.hc(0,"form",122,123),x.rc("ngSubmit",function(){x.Uc(n);var e=x.vc();return e.saveChangeComment(e.entityComment,0)}),x.hc(2,"div",77),x.hc(3,"h4",78),x.dd(4),x.wc(5,"translate"),x.gc(),x.hc(6,"button",79),x.rc("click",function(){return t.$implicit.dismiss("Cross click")}),x.hc(7,"span",80),x.dd(8,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(9,"div",81),x.hc(10,"div",82),x.hc(11,"div",83),x.hc(12,"div",90),x.hc(13,"label",124),x.dd(14),x.wc(15,"translate"),x.gc(),x.hc(16,"textarea",125),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entityComment.take_note=e}),x.gc(),x.gc(),x.gc(),x.hc(17,"div",83),x.hc(18,"div",90),x.hc(19,"label",126),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"input",127,128),x.rc("change",function(e){return x.Uc(n),x.vc().fileEvent(e)}),x.gc(),x.hc(24,"input",129),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entityComment.url_img=e}),x.gc(),x.cc(25,"br"),x.hc(26,"small",130),x.hc(27,"a",131),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._downloadFileResult(e.entityComment)}),x.dd(28),x.gc(),x.bd(29,re,2,0,"a",132),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(30,"div",133),x.hc(31,"button",134),x.rc("click",function(){return t.$implicit.dismiss("Cross click")}),x.dd(32),x.wc(33,"translate"),x.gc(),x.bd(34,oe,5,3,"ng-container",40),x.bd(35,le,3,3,"button",135),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(4),x.gd(" ",x.xc(5,11,"Note")," - ",a.entityComment.inner_code," "),x.Nb(10),x.fd("",x.xc(15,13,"Content")," "),x.Nb(2),x.Dc("ngModel",a.entityComment.take_note),x.Nb(4),x.ed(x.xc(21,15,"Attachment")),x.Nb(4),x.Dc("ngModel",a.entityComment.url_img),x.Nb(4),x.ed(a._path),x.Nb(1),x.Dc("ngIf",null!=a.entityComment.url_img),x.Nb(3),x.fd(" ",x.xc(33,17,"Close")," "),x.Nb(2),x.Dc("ngIf",a.isSave),x.Nb(1),x.Dc("ngIf",!a.isSave)}}var de=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};_.a.vfs=f.a.pdfMake.vfs;var ue,he=((ue=function(){function t(e,a,c,i,r,o,l){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=r,this._excelService=o,this.modalService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._getlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this._status="",this._titleLanguage="",this._detail={},this._logoPath=g.a.BASE_API+"/",this._logoIsoPath=g.a.BASE_API+"/",this._signatureCTOPath=g.a.BASE_API+"/",this._signatureCEOPath=g.a.BASE_API+"/",this.changeState=null,this._printAll=[],this._langMain=1,this.entity={},this.entity0={},this.requestId="",this._customers=[],this._dt1a="",this._dt2a="",this._fdatea=new Date,this._tdatea=new Date,this._currentTabActivated=1,this._keywordAdditional="",this._getlist2side=[],this._isLoadingResult=!1,this._requestIdTemp="",this.entityComment={},this._path="",this._id="",!1!==e.checkAccess("REQ-REPORT")&&!1!==e.hasPermission("REQ-REPORT","read")||this._route.navigate(["/error/404"]),this.socket=h()(g.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadImgs(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var e=this,t={};t.filter=this._keyword,t.domain=this.user.short_code,t.start_date=this._dt1,t.end_date=this._dt2,t.flag_status=this._status,t.page=this.pageIndex,t.limit=this.pageSize,this._dataService.post("/labresult/getlistbypaging",t).subscribe(function(t){e._getlist=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages,e._resolveDuplicateCode()})}},{key:"_resolveDuplicateCode",value:function(){this._dataService.post("/error/duplicateReportCode",{}).subscribe(function(e){})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"orgValueChange1",value:function(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_switchLanguage",value:function(e,t,n){this.loadAllReportByRequestId(n.request_id),this._titleLanguage=n.report_code,this._chooseOne=t,this._detail=n,this.modalService.open(e,{size:"md",centered:!0})}},{key:"loadAllReportByRequestId",value:function(e){var t=this,n={};n.request_id=e,console.log(n),this._dataService.post("/labresult/getlistbyrequestId",n).subscribe(function(e){console.log("All",e),t._printAll=e.data})}},{key:"_print",value:function(t){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,c,i,r,o,l,s,u,h,m,p,f,b,v,y,x,S,w,N,D,M,C,k,T,I,P,R,A,E,U,F,O,Y,L,q,z,G,V,B,Q,H,$,K,j,X,W,J,Z,ee,te,ne,ae,ce,ie,re,oe,le,se,de,ue,he,ge,me,_e,pe,fe,be,ve,ye,xe,Se,we,Ne,De,Me,Ce,ke,Te,Ie,Pe,Re,Ae,Ee,Ue,Fe,Oe,Ye,Le,qe,ze,Ge,Ve,Be,Qe,He,$e,Ke,je,Xe,We,Je,Ze,et,tt,nt,at,ct,it,rt,ot,lt,st,dt,ut,ht,gt,mt,_t,pt,ft,bt,vt,yt,xt,St,wt,Nt,Dt,Mt,Ct,kt,Tt,It,Pt,Rt,At,Et,Ut,Ft,Ot,Yt,Lt,qt=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this._langMain=t,a=[],0==this._chooseOne){n.next=100;break}if(null!=this._detail.old_report_detail&&(c="(* K\u1ebft qu\u1ea3 n\xe0y thay th\u1ebf cho k\u1ebft qu\u1ea3  "+this._detail.old_report_detail.report_code+", xu\u1ea5t ng\xe0y  "+d(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; b\u1ea3n k\u1ebft qu\u1ea3 c\u0169 s\u1ebd b\u1ecb h\u1ee7y)",i="(* This report cancels and replaces the previous one numbered "+this._detail.old_report_detail.report_code+", date "+d(new Date(this._detail.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+"; which must be destroyed)",r="vn"==t?c:i,"0"==t&&(r=c+"\n"+i),a.push({text:r,alignment:"right",italics:!0,fontSize:10})),a.push({text:"\n"}),o="en"==t?null==this._detail.company_sender_e?this._detail.company_sender_l.toUpperCase():this._detail.company_sender_e.toUpperCase():this._detail.company_sender_l.toUpperCase(),null==this._detail.company_receiver_l&&null==this._detail.company_receiver_e||(o="en"==t||"0"==t?null==this._detail.company_receiver_e?this._detail.company_receiver_l.toUpperCase():this._detail.company_receiver_e.toUpperCase():this._detail.company_receiver_l.toUpperCase()),"0"==t&&(o="en"==t,this._detail.company_sender_l.toUpperCase(),null==this._detail.company_sender_e||this._detail.company_sender_e.toUpperCase(),null==this._detail.company_receiver_l&&null==this._detail.company_receiver_e||(o=this._detail.company_receiver_l.toUpperCase()+"\n"+(null==this._detail.company_receiver_e?"":this._detail.company_receiver_e.toUpperCase()))),this._detail.address_receiver_l=null==this._detail.address_receiver_l?this._detail.address_l:this._detail.address_receiver_l,l="en"==t?null==this._detail.address_receiver_e?this._detail.address_receiver_l:this._detail.address_receiver_e:this._detail.address_receiver_l,"0"==t&&(l=this._detail.address_receiver_l+"\n"+(null==this._detail.address_receiver_e?"":this._detail.address_receiver_e)),s="en"==t?"Sample described as":"T\xean m\u1eabu","0"==t&&(s="T\xean m\u1eabu/ Sample described as"),u="en"==t?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng","0"==t&&(u="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference"),h=this._detail.employee_code+this._detail.request_no.substr(2,this._detail.request_no.length),null==this._detail.employee_code&&(h=this._detail.request_no.substr(2,this._detail.request_no.length)),m="en"==t?"Sample code":"M\xe3 s\u1ed1 m\u1eabu","0"==t&&(m="M\xe3 s\u1ed1 m\u1eabu/ Sample code"),p="en"==t?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu","0"==t&&(p="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning"),f="en"==t?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu","0"==t&&(f="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date"),b="en"==t?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m","0"==t&&(b="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time"),v="en"==t?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng","0"==t&&(v="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date"),y=d(new Date(this._detail.returned_date)).subtract(7,"hours").format("DD/MM/YYYY"),a.push({alignment:"justify",columns:[[{text:[{text:o,bold:!0,fontSize:12},"\n\n",{text:l},"\n\n\n"],style:"body_top"}],{width:150,qr:this._detail.report_code+","+this._detail.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),x="en"==t?null==this._detail.sample_name_e?"":this._detail.sample_name_e:this._detail.sample_name,"0"==t&&(x=this._detail.sample_name+(null==this._detail.sample_name_e?"":"/ "+this._detail.sample_name_e)),S="en"==t?null==this._detail.description_e?"":this._detail.description_e:null==this._detail.description?"":this._detail.description,"0"==t&&(S=(null==this._detail.description?"":this._detail.description)+(null==this._detail.description_e?"":"/ "+this._detail.description_e)),a.push({table:{widths:[150,5,"*"],body:[[{text:s,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:x,bold:!0,fontSize:11}],[{text:u,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:h,bold:!0,style:"body_footer"}],[{text:m,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:this._detail.report_inner_code,bold:!0,style:"body_footer"}],[{text:p,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:S,style:"body_footer"}],[{text:f,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:d(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:b,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:d(new Date(this._detail.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+y,style:"body_footer"}],[{text:v,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:y,style:"body_footer"}]]},layout:{defaultBorder:!1}}),a.push({text:"\n"}),w=!1,1==this._chooseOne&&(N=[],D=1,this._detail.order_details.length>0)){M=e(this._detail.order_details);try{for(M.s();!(C=M.n()).done;){k=C.value,T="b709ca6e-2823-11eb-9a33-acde48001122"==k.department_id,I="",P=null==k.standards?[]:JSON.parse(k.standards),R=e(P.filter(function(e){return null!=e}));try{for(R.s();!(A=R.n()).done;)null==(E=A.value).id?null!=E&&(I+="("+E+")"):I+="("+E.id+")"}catch(zt){R.e(zt)}finally{R.f()}U="vn"==t?k.para_name_l:k.para_name_e,"0"==t&&(U=k.para_name_l+"/ "+k.para_name_e),F=k.unit,O=k.method,Y=k.result_record.includes("<sup>")?k.result_record.substr(0,k.result_record.indexOf("<")):k.result_record,L=k.result_record.substr(k.result_record.indexOf("<sup>")+5,k.result_record.indexOf("</sup>")).replace("</sup>",""),console.log(L),N.push({STT:D,Para:{columns:[{text:U,fontSize:10,italics:T,width:"auto",bold:!0},{text:I,fontSize:8,italics:T,bold:!0}],columnGap:3},Unit:F,Method:O,Results:[{columns:[{text:Y,width:"auto",fontSize:10,bold:!0},{text:L,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:k.allow_lod?"(LOD="+k.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),D+=1,k.allow_lod&&(w=!0)}}catch(zt){M.e(zt)}finally{M.f()}a.push(this.tablePrintQuotation5(N,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if(3==this._chooseOne){N=[],D=1,q=e(this._detail.order_details);try{for(q.s();!(z=q.n()).done;){G=z.value,V="b709ca6e-2823-11eb-9a33-acde48001122"==G.department_id,B="",Q=null==G.standards?[]:JSON.parse(G.standards),H=e(Q.filter(function(e){return null!=e}));try{for(H.s();!($=H.n()).done;)null==(K=$.value).id?null!=K&&(B+="("+K+")"):B+="("+K.id+")"}catch(zt){H.e(zt)}finally{H.f()}j="vn"==t?G.para_name_l:G.para_name_e,"0"==t&&(j=G.para_name_l+"/ "+G.para_name_e),X=G.unit,W=G.method,J=G.result_record.includes("<sup>")?G.result_record.substr(0,G.result_record.indexOf("<")):G.result_record,Z=G.result_record.substr(G.result_record.indexOf("<sup>")+5,G.result_record.indexOf("</sup>")).replace("</sup>",""),N.push({STT:D,Para:{columns:[{text:j,fontSize:10,italics:V,width:"auto",bold:!0},{text:B,fontSize:8,italics:V,bold:!0}],columnGap:3},Unit:X,Method:W,Results:[{columns:[{text:J,width:"auto",fontSize:10,bold:!0},{text:Z,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:G.allow_lod?"(LOD="+G.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:G.compare_note}),D+=1,G.allow_lod&&(w=!0)}}catch(zt){q.e(zt)}finally{q.f()}a.push(this.tablePrintQuotation(N,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}if(4==this._chooseOne)if(this._detail.flag_compare){N=[],D=1,ee=e(this._detail.order_details);try{for(ee.s();!(te=ee.n()).done;){ne=te.value,ae="b709ca6e-2823-11eb-9a33-acde48001122"==ne.department_id,ce="",ie=null==ne.standards?[]:JSON.parse(ne.standards),re=e(ie.filter(function(e){return null!=e}));try{for(re.s();!(oe=re.n()).done;)null==(le=oe.value).id?null!=le&&(ce+="("+le+")"):ce+="("+le.id+")"}catch(zt){re.e(zt)}finally{re.f()}se="vn"==t?ne.para_name_l:ne.para_name_e,"0"==t&&(se=ne.para_name_l+"/ "+ne.para_name_e),de=ne.unit,ue=ne.method,he=ne.result_record.includes("<sup>")?ne.result_record.substr(0,ne.result_record.indexOf("<")):ne.result_record,ge=ne.result_record.substr(ne.result_record.indexOf("<sup>")+5,ne.result_record.indexOf("</sup>")).replace("</sup>",""),console.log(ge),N.push({STT:D,Para:{columns:[{text:se,fontSize:10,italics:ae,width:"auto",bold:!0},{text:ce,fontSize:8,italics:ae,bold:!0}],columnGap:3},Unit:de,Method:ue,Results:[{columns:[{text:he,width:"auto",fontSize:10,bold:!0},{text:ge,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:ne.allow_lod?"(LOD="+ne.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}],Compare:ne.compare_note}),D+=1,ne.allow_lod&&(w=!0)}}catch(zt){ee.e(zt)}finally{ee.f()}a.push(this.tablePrintQuotation(N,["STT","Para","Unit","Method","Results","Compare"],[30,"*",50,"*",100,110]))}else if(N=[],D=1,this._detail.order_details.length>0){me=e(this._detail.order_details);try{for(me.s();!(_e=me.n()).done;){pe=_e.value,fe="b709ca6e-2823-11eb-9a33-acde48001122"==pe.department_id,be="",ve=null==pe.standards?[]:JSON.parse(pe.standards),ye=e(ve.filter(function(e){return null!=e}));try{for(ye.s();!(xe=ye.n()).done;)null==(Se=xe.value).id?null!=Se&&(be+="("+Se+")"):be+="("+Se.id+")"}catch(zt){ye.e(zt)}finally{ye.f()}we="vn"==t?pe.para_name_l:pe.para_name_e,"0"==t&&(we=pe.para_name_l+"/ "+pe.para_name_e),Ne=pe.unit,De=pe.method,Me=pe.result_record.includes("<sup>")?pe.result_record.substr(0,pe.result_record.indexOf("<")):pe.result_record,Ce=pe.result_record.substr(pe.result_record.indexOf("<sup>")+5,pe.result_record.indexOf("</sup>")).replace("</sup>",""),N.push({STT:D,Para:{columns:[{text:we,fontSize:10,italics:fe,width:"auto",bold:!0},{text:be,fontSize:8,italics:fe,bold:!0}],columnGap:3},Unit:Ne,Method:De,Results:[{columns:[{text:Me,width:"auto",fontSize:10,bold:!0},{text:Ce,fontSize:6,bold:!0}],columnGap:0},{columns:[{text:pe.allow_lod?"(LOD="+pe.lod+")":"",width:"auto",fontSize:10,bold:!0}],columnGap:0}]}),D+=1,pe.allow_lod&&(w=!0)}}catch(zt){me.e(zt)}finally{me.f()}a.push(this.tablePrintQuotation5(N,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if((null!=this._detail.take_note||w)&&(Te="vn"==t?"Ghi ch\xfa: ":"Note: ","0"==t&&(Te="Ghi ch\xfa/ Note: "),Ie="vn"==t?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection","0"==t&&(Ie="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),(ke=[]).push({LOD:Te+(null==this._detail.take_note?"":this._detail.take_note)+(w?Ie:"")}),a.push(this.tablePrintQuotation5A(ke,["LOD"],["*"]))),a.push({text:"\n"}),Pe="vn"==t?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR","0"==t&&(Pe="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR"),Re="vn"==t?"GI\xc1M \u0110\u1ed0C":"DIRECTOR","0"==t&&(Re="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==this._detail.is_active&&(a.push({columns:[{width:50,text:""},{width:180,text:Pe,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:Re,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"})),null==this._signatureCTOPath||null==this._signatureCEOPath||0==this._detail.is_active){n.next=77;break}return n.t0=a,n.t1={width:50,text:""},n.next=59,this._convertBase64ImageFromURL(this._signatureCTOPath);case 59:return n.t2=n.sent,n.t3=!0,n.t4=[190,190],n.t5={width:180,image:n.t2,alignment:"center",fontSize:10,bold:n.t3,fit:n.t4},n.t6={width:"*",text:""},n.next=66,this._convertBase64ImageFromURL(this._signatureCEOPath);case 66:n.t7=n.sent,n.t8=!0,n.t9=[190,190],n.t10={width:180,image:n.t7,alignment:"center",fontSize:10,bold:n.t8,fit:n.t9},n.t11={width:50,text:""},n.t12=[n.t1,n.t5,n.t6,n.t10,n.t11],n.t13={columns:n.t12},n.t0.push.call(n.t0,n.t13),a.push({text:"\n"}),n.next=78;break;case 77:a.push({columns:[{width:50,text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]});case 78:if(0==this._detail.is_active&&a.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"}),Ae="vn"==t?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note","0"==t&&(Ae="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note"),Ee="vn"==t?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.","0"==t&&(Ee="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample."),Ue="vn"==t?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.","0"==t&&(Ue="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request."),Fe="",this._detail.standard_list.length>0){Oe=e(this._detail.standard_list);try{for(Oe.s();!(Ye=Oe.n()).done;)Le=Ye.value,qe="vn"==t?Le.description_l:Le.description_e,"0"==t&&(qe=Le.description_l+"/ "+Le.description_e),Fe+="("+Le.id+") "+qe+"\n"}catch(zt){Oe.e(zt)}finally{Oe.f()}}if(a.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:Ae,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:Ee+"\n"+Ue+"\n"},{text:Fe,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null==this._detail.url_img||4!=this._chooseOne){n.next=98;break}return ze="en"==t?"Sample photo":"H\xecnh m\u1eabu","0"==t&&(ze="H\xecnh m\u1eabu/ Sample photo"),a.push({text:"",pageBreak:"after"}),a.push({text:ze+"\n",alignment:"center"}),Ge=g.a.BASE_API+"/"+this._detail.url_img,n.t14=a,n.next=95,this._convertBase64ImageFromURL(Ge);case 95:n.t15=n.sent,n.t16={image:n.t15,alignment:"center",width:430},n.t14.push.call(n.t14,n.t16);case 98:n.next=208;break;case 100:Ve=0,Be=0,Qe=e(this._printAll),n.prev=102,Qe.s();case 104:if((He=Qe.n()).done){n.next=200;break}if($e=He.value,Be+=1,null!=$e.old_report_detail&&(Ke="(This report cancels and replaces the previous one numbered "+$e.old_report_detail.report_code+" date "+d(new Date($e.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)",je="(This report cancels and replaces the previous one numbered "+$e.old_report_detail.report_code+" date "+d(new Date($e.old_report_detail.timestamp)).subtract(7,"hours").format("DD/MM/YYYY")+" which must be destroyed)",a.push({text:"vn"==t?Ke:je,alignment:"right",italics:!0,fontSize:10})),Xe=("vn"==t?"M\xe3 k\u1ebft qu\u1ea3: ":"Report code: ")+$e.report_code,"0"==t&&(Xe="M\xe3 k\u1ebft qu\u1ea3/Report code: "+$e.report_code),We=("vn"==t?"Trang: ":"Page: ")+Be.toString()+"/"+this._printAll.length.toString(),"0"==t&&(We="Trang/Page: "+Be.toString()+this._printAll.length.toString()),Je="en"==t?null==$e.company_sender_e?$e.company_sender_l.toUpperCase():$e.company_sender_e.toUpperCase():$e.company_sender_l.toUpperCase(),null==$e.company_receiver_l&&null==$e.company_receiver_e||(Je="en"==t||"0"==t?null==$e.company_receiver_e?$e.company_receiver_l.toUpperCase():$e.company_receiver_e.toUpperCase():$e.company_receiver_l.toUpperCase()),$e.address_receiver_l=null==$e.address_receiver_l?$e.address_l:$e.address_receiver_l,Ze="en"==t?null==$e.address_receiver_e?$e.address_receiver_l:$e.address_receiver_e:$e.address_receiver_l,"0"==t&&(Je=$e.company_sender_l.toUpperCase()+"\n"+(null==$e.company_sender_e?"":$e.company_sender_e.toUpperCase()),null==$e.company_receiver_l&&null==$e.company_receiver_e||(Je=$e.company_receiver_l.toUpperCase()+"\n"+(null==$e.company_receiver_e?"":$e.company_receiver_e.toUpperCase())),Ze=$e.address_receiver_l+"\n"+(null==$e.address_receiver_e?"":$e.address_receiver_e)),et="en"==t?"Sample described as":"T\xean m\u1eabu","0"==t&&(et="T\xean m\u1eabu/ Sample described as"),tt="en"==t?"Your purchase order reference":"M\xe3 \u0111\u01a1n h\xe0ng","0"==t&&(tt="M\xe3 \u0111\u01a1n h\xe0ng/ Your purchase order reference"),nt=$e.employee_code+$e.request_no.substr(2,$e.request_no.length),null==$e.employee_code&&(nt=$e.request_no.substr(2,$e.request_no.length)),at="en"==t?"Sample code":"M\xe3 s\u1ed1 m\u1eabu","0"==t&&(at="M\xe3 s\u1ed1 m\u1eabu/ Sample code"),ct="en"==t?"Conditioning":"T\xecnh tr\u1ea1ng m\u1eabu","0"==t&&(ct="T\xecnh tr\u1ea1ng m\u1eabu/ Conditioning"),it="en"==t?"Sample reception date":"Ng\xe0y nh\u1eadn m\u1eabu","0"==t&&(it="Ng\xe0y nh\u1eadn m\u1eabu/ Sample reception date"),rt="en"==t?"Analysis time":"Th\u1eddi gian th\u1eed nghi\u1ec7m","0"==t&&(rt="Th\u1eddi gian th\u1eed nghi\u1ec7m/ Analysis time"),ot="en"==t?"Client due date":"Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3 kh\xe1ch h\xe0ng","0"==t&&(ot="Ng\xe0y h\u1eb9n tr\u1ea3 k\u1ebft qu\u1ea3/ Client due date"),lt=1==$e.is_active?d(new Date($e.timestamp)).subtract(7,"hours").format("DD/MM/YYYY"):d(new Date($e.returned_date)).subtract(7,"hours").format("DD/MM/YYYY"),a.push({alignment:"right",columns:[{text:[{text:Xe+"-"+We},"\n\n"],alignment:"right",bold:!0}]}),a.push({alignment:"justify",columns:[[{text:[{text:Je,bold:!0,fontSize:12},"\n\n",{text:Ze},"\n\n\n"],style:"body_top"}],{width:150,qr:$e.report_code+","+$e.report_inner_code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),a.push({table:{widths:[150,5,"*"],body:[[{text:et,bold:!0,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:$e.sample_name,bold:!0,fontSize:11}],[{text:tt,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:nt,bold:!0,style:"body_footer"}],[{text:at,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:$e.report_inner_code,bold:!0,style:"body_footer"}],[{text:ct,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:null==$e.description?"":$e.description,style:"body_footer"}],[{text:it,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:d(new Date($e.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),style:"body_footer"}],[{text:rt,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:d(new Date($e.received_date)).subtract(7,"hours").format("DD/MM/YYYY")+" - "+lt,style:"body_footer"}],[{text:ot,style:"body_footer",alignment:"left"},{text:":",style:"body_footer",alignment:"left"},{text:lt,style:"body_footer"}]]},layout:{defaultBorder:!1}}),a.push({text:"\n"}),st=!1,N=[],D=1,$e.order_details.length>0){dt=e($e.order_details);try{for(dt.s();!(ut=dt.n()).done;){ht=ut.value,gt="b709ca6e-2823-11eb-9a33-acde48001122"==ht.department_id,mt="",_t=null==ht.standards?[]:JSON.parse(ht.standards),pt=e(_t.filter(function(e){return null!=e}));try{for(pt.s();!(ft=pt.n()).done;)null==(bt=ft.value).id?null!=bt&&(mt+="("+bt+")"):mt+="("+bt.id+")"}catch(zt){pt.e(zt)}finally{pt.f()}vt="vn"==t?ht.para_name_l:ht.para_name_e,"0"==t&&(vt=ht.para_name_l+"/ "+ht.para_name_e),yt=ht.unit,xt=ht.method,St=ht.result_record.includes("<sup>")?ht.result_record.substr(0,ht.result_record.indexOf("<")):ht.result_record,wt=ht.result_record.substr(ht.result_record.indexOf("<sup>")+5,ht.result_record.indexOf("</sup>")).replace("</sup>",""),console.log(wt),N.push({STT:D,Para:{columns:[{text:vt,fontSize:10,italics:gt,width:"auto",bold:!0},{text:mt,fontSize:8,italics:gt,bold:!0}],columnGap:3,bold:!0},Unit:yt,Method:xt,Results:[{columns:[{text:St,width:"auto",fontSize:10,bold:!0},{text:wt,fontSize:6,bold:!0}],columnGap:0,alignment:"center"},{columns:[{text:ht.allow_lod?"(LOD="+ht.lod+")":"",width:"auto",fontSize:10,bold:!0,alignment:"center"}],columnGap:0}]}),D+=1,ht.allow_lod&&(st=!0)}}catch(zt){dt.e(zt)}finally{dt.f()}a.push(this.tablePrintQuotation5(N,["STT","Para","Unit","Method","Results"],[30,"*",50,"*",100]))}if((null!=$e.take_note||st)&&(Dt="vn"==t?"Ghi ch\xfa: ":"Note: ","0"==t&&(Dt="Ghi ch\xfa/ Note: "),Mt="vn"==t?"\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p":"\nLOD: limit of detection","0"==t&&(Mt="\nLOD: gi\u1edbi h\u1ea1n ph\xe1t hi\u1ec7n c\u1ee7a ph\u01b0\u01a1ng ph\xe1p/ limit of detection"),(Nt=[]).push({LOD:Dt+(null==$e.take_note?"":$e.take_note)+(st?Mt:"")}),a.push(this.tablePrintQuotation5A(Nt,["LOD"],["*"]))),a.push({text:"\n"}),Ct="vn"==t?"GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT":"TECHNICAL DIRECTOR","0"==t&&(Ct="GI\xc1M \u0110\u1ed0C K\u1ef8 THU\u1eacT\nTECHNICAL DIRECTOR"),kt="vn"==t?"GI\xc1M \u0110\u1ed0C":"DIRECTOR","0"==t&&(kt="GI\xc1M \u0110\u1ed0C\nDIRECTOR"),0==$e.is_active&&(a.push({columns:[{width:50,text:""},{width:180,text:Ct,alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:kt,alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"})),null==this._signatureCTOPath||null==this._signatureCEOPath||0==$e.is_active){n.next=177;break}return n.t17=a,n.t18={width:50,text:""},n.next=159,this._convertBase64ImageFromURL(this._signatureCTOPath);case 159:return n.t19=n.sent,n.t20=!0,n.t21=[190,190],n.t22={width:180,image:n.t19,alignment:"center",fontSize:10,bold:n.t20,fit:n.t21},n.t23={width:"*",text:""},n.next=166,this._convertBase64ImageFromURL(this._signatureCEOPath);case 166:n.t24=n.sent,n.t25=!0,n.t26=[190,190],n.t27={width:180,image:n.t24,alignment:"center",fontSize:10,bold:n.t25,fit:n.t26},n.t28={width:50,text:""},n.t29=[n.t18,n.t22,n.t23,n.t27,n.t28],n.t30={columns:n.t29},n.t17.push.call(n.t17,n.t30),a.push({text:"\n"}),n.next=178;break;case 177:a.push({columns:[{width:50,text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:"*",text:""},{width:180,text:"vn"==t?"Ch\u01b0a k\xfd duy\u1ec7t\n\n\n":"Not signed\n\n\n",alignment:"center",fontSize:10,bold:!0,italics:!0},{width:50,text:""}]});case 178:if(0==$e.is_active&&a.push({columns:[{width:50,text:""},{width:180,text:"MSc. NGUY\u1ec4N HU\u1ef2NH TU\u1ea4N ANH",alignment:"center",fontSize:10,bold:!0},{width:"*",text:""},{width:180,text:"D.Sc. L\xca NG\u1eccC H\xc0 THU",alignment:"center",fontSize:10,bold:!0},{width:50,text:""}]}),a.push({text:"\n"}),Tt="vn"==t?"Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch":"Explanatory note","0"==t&&(Tt="Ghi ch\xfa v\xe0 gi\u1ea3i th\xedch/ Explanatory note"),It="vn"==t?"T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.":"This document can only be reproduced in full; it only concerns the submitted sample.","0"==t&&(It="T\u1ea5t c\u1ea3 c\xe1c th\xf4ng tin trong b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ph\u1ea3i \u0111\u01b0\u1ee3c sao ch\xe9p \u0111\u1ea7y \u0111\u1ee7; b\u1ea3n k\u1ebft qu\u1ea3 n\xe0y ch\u1ec9 c\xf3 gi\xe1 tr\u1ecb v\u1edbi m\u1eabu th\u1eed do kh\xe1ch h\xe0ng cung c\u1ea5p.\n This document can only be reproduced in full; it only concerns the submitted sample."),Pt="vn"==t?"C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch":"Results have been obtained and reported in accordance with our general sales conditions available on request.","0"==t&&(Pt="C\xe1c k\u1ebft qu\u1ea3 ph\xe2n t\xedch \u0111\u01b0\u1ee3c thu th\u1eadp v\xe0 tr\xecnh b\xe0y theo nh\u1eefng \u0111i\u1ec1u kho\u1ea3n chung v\u1ec1 cung c\u1ea5p d\u1ecbch v\u1ee5, c\xe1c th\xf4ng tin n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p theo y\xeau c\u1ea7u c\u1ee7a qu\xfd kh\xe1ch.\n Results have been obtained and reported in accordance with our general sales conditions available on request."),Rt="",$e.standard_list.length>0){At=e($e.standard_list);try{for(At.s();!(Et=At.n()).done;)Ut=Et.value,Ft="vn"==t?Ut.description_l:Ut.description_e,"0"==t&&(Ft=Ut.description_l+"/ "+Ut.description_e),Rt+="("+Ut.id+") "+Ft+"\n"}catch(zt){At.e(zt)}finally{At.f()}}if(a.push({table:{widths:["*"],body:[[{border:[!0,!0,!0,!1],text:{text:Tt,bold:!0},style:"body_footer",alignment:"left",italics:!0}],[{border:[!0,!1,!0,!0],text:[{text:It+"\n"+Pt+"\n"},{text:Rt,fontSize:7}],style:"body_footer",alignment:"left",italics:!0}]]},layout:{defaultBorder:!1}}),null==$e.url_img||2!=$e.is_active){n.next=197;break}return a.push({text:"",pageBreak:"after"}),Ot=g.a.BASE_API+"/"+$e.url_img,n.t31=a,n.next=194,this._convertBase64ImageFromURL(Ot);case 194:n.t32=n.sent,n.t33={image:n.t32,alignment:"center"},n.t31.push.call(n.t31,n.t33);case 197:(Ve+=1)<this._printAll.length&&a.push({text:"",pageBreak:"after"});case 198:n.next=104;break;case 200:n.next=205;break;case 202:n.prev=202,n.t34=n.catch(102),Qe.e(n.t34);case 205:return n.prev=205,Qe.f(),n.finish(205);case 208:return n.t35="vn"==t?0==this._chooseOne?[25,100,25,70]:[25,120,25,70]:0==this._chooseOne?[25,100,25,90]:[25,140,25,90],n.t36={fontSize:12,columnGap:20},n.t37=[a],n.t38=function(e,n){return{table:{widths:[5,"*","*","*"],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:("en"==t||"0"==t?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG")+"\n"+("en"==t||"0"==t?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam"),alignment:"left",style:"body_footer"},{height:150,text:"en"==t||"0"==t?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",alignment:"left",style:"body_footer"},{height:150,text:"en"==t||"0"==t?"Document number : EPR-QP-0023/F02\nVersion : 01\nEffective day : 03/09/2020":"M\xe3 t\xe0i li\u1ec7u : EPR-QP-0023/F02\nL\u1ea7n ban h\xe0nh : 01\nNg\xe0y ban h\xe0nh : 03/09/2020",alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},n.t39=function(e,n,a){var c="vn"==t?"K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M":"ANALYTICAL REPORT";"0"==t&&(c="K\u1ebeT QU\u1ea2 TH\u1eec NGHI\u1ec6M\nANALYTICAL REPORT");var i="vn"==t?"M\xe3 k\u1ebft qu\u1ea3: ":"Report code: ";"0"==t&&(i="M\xe3 k\u1ebft qu\u1ea3/Report code: ");var r="vn"==t?"Trang ":"Page: ";return"0"==t&&(r="Trang/Page "),0!=qt._chooseOne?{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:167,height:70,alignment:"right",image:"myIso"}],[{colSpan:2,text:c,alignment:"center",fontSize:16,bold:!0}],[{colSpan:2,width:"*",text:[{text:i+qt._detail.report_code+"-"+r+e.toString()+"/"+n},{text:"__",color:"#ffffff"}],alignment:"right",bold:!0}]]},layout:{defaultBorder:!1}}:{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:167,height:70,alignment:"right",image:"myIso"}],[{colSpan:2,text:c,alignment:"center",fontSize:16,bold:!0}]]},layout:{defaultBorder:!1}}},n.t40={header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},n.next=216,this._convertBase64ImageFromURL(this._logoPath);case 216:return n.t41=n.sent,n.next=219,this._convertBase64ImageFromURL(this._logoIsoPath);case 219:n.t42=n.sent,n.t43={myLogo:n.t41,myIso:n.t42},Yt={pageSize:"A4",pageMargins:n.t35,defaultStyle:n.t36,content:n.t37,footer:n.t38,header:n.t39,styles:n.t40,images:n.t43},Lt=(Lt="'print-'"+this._detail.report_code+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),_.a.createPdf(Yt).download(Lt),_.a.createPdf(Yt).open();case 224:case"end":return n.stop()}},n,this,[[102,202,205,208]])}))}},{key:"_exportAll",value:function(t){var n,a=[],c=1,i=e(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,o="";4==r.is_active&&(o="en"==this.user.lang?y.a.cancel_en:y.a.cancel),3==r.is_active&&(o="en"==this.user.lang?y.a.printed_en:y.a.printed),2==r.is_active&&(o="en"==this.user.lang?y.a.evicted_en:y.a.evicted),1==r.is_active&&(o="en"==this.user.lang?y.a.official_en:y.a.official),0==r.is_active&&(o="en"==this.user.lang?y.a.draft_en:y.a.draft);var l=new Date(r.received_date).getTime()+864e5*r.tat;a.push({"No.":c,"Report code":r.report_inner_code,"Request No":r.request_no,"Sample name":r.sample_name,"Received Date":d(new Date(r.received_date)).subtract(7,"hours").format("DD/MM/YYYY"),"Returned Date":d(new Date(l)).subtract(7,"hours").format("DD/MM/YYYY"),Company:r.company_sender_l,Contact:null==r.sender_name?"":r.sender_name,State:o}),c+=1}}catch(s){i.e(s)}finally{i.f()}this._excelService.exportAsExcelFile(a,"ResultReport-"+d(new Date).subtract(7,"hours").format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+t.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.length+" "+y.a.record,"OK")}},{key:"tablePrintQuotation",value:function(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation(e,t)}}}},{key:"buildTableBodyPrintQuotation",value:function(e,t){var n=[],a=[],c="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(c="STT\nNO.");var i="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(i="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");var r="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(r="\u0110\u01a0N V\u1eca\nUNIT");var o="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(o="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");var l="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";0==this._langMain&&(l="K\u1ebeT QU\u1ea2\nRESULTS");var s="en"==this._langMain.toString()?"COMPARE / GUIDELINES":"SO S\xc1NH";return 0==this._langMain&&(s="SO S\xc1NH\nCOMPARE / GUIDELINES"),a.push({text:c,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:s,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(a),e.forEach(function(e){var a=[],c=1;t.forEach(function(t){a.push(2==c||5==c?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==c?"left":"center",fontSize:10}),c+=1}),n.push(a)}),n}},{key:"tablePrintQuotation5",value:function(e,t,n){return{table:{headerRows:1,widths:n,body:this.buildTableBodyPrintQuotation5(e,t)}}}},{key:"buildTableBodyPrintQuotation5",value:function(e,t){var n=[],a=[],c="en"==this._langMain.toString()?"NO.":"STT";0==this._langMain&&(c="STT\nNO.");var i="en"==this._langMain.toString()?"PARAMETERS":"CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M";0==this._langMain&&(i="CH\u1ec8 TI\xcaU TH\u1eec NGHI\u1ec6M\nPARAMETERS");var r="en"==this._langMain.toString()?"UNIT":"\u0110\u01a0N V\u1eca";0==this._langMain&&(r="\u0110\u01a0N V\u1eca\nUNIT");var o="en"==this._langMain.toString()?"TEST METHOD":"PH\u01af\u01a0NG PH\xc1P TH\u1eec";0==this._langMain&&(o="PH\u01af\u01a0NG PH\xc1P TH\u1eec\nTEST METHOD");var l="en"==this._langMain.toString()?"RESULTS":"K\u1ebeT QU\u1ea2";return 0==this._langMain&&(l="K\u1ebeT QU\u1ea2\nRESULTS"),this._langMain.toString(),this._langMain,a.push({text:c,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:i,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:r,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:o,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),a.push({text:l,alignment:"center",fontSize:10,bold:!0,color:"#ffffff",fillColor:"#5f5f5f"}),n.push(a),e.forEach(function(e){var a=[],c=1;t.forEach(function(t){a.push(2==c||5==c?{columns:[e[t]]}:{text:{text:e[t]},alignment:2==c?"left":"center",fontSize:10}),c+=1}),n.push(a)}),n}},{key:"tablePrintQuotation5A",value:function(e,t,n){return{table:{widths:n,body:this.buildTableBodyPrintQuotation5A(e,t)}}}},{key:"buildTableBodyPrintQuotation5A",value:function(e,t){var n=[];return e.forEach(function(e){var a=[];t.forEach(function(t){a.push({text:{text:e[t]},alignment:"left",fontSize:10,italics:!0})}),n.push(a)}),n}},{key:"_convertBase64ImageFromURL",value:function(e){return new Promise(function(t,n){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=function(e){n(e)},a.src=e})}},{key:"loadImgs",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",t).subscribe(function(t){return Object(s.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._logoPath+=t.data.filter(function(e){return"logo-stp"==e.file_name_e})[0].path_file,this._logoIsoPath+=t.data.filter(function(e){return"logo-iso"==e.file_name_e})[0].path_file,this._signatureCTOPath+=t.data.filter(function(e){return"signature-cto"==e.file_name_e})[0].path_file,this._signatureCEOPath+=t.data.filter(function(e){return"signature-ceo"==e.file_name_e})[0].path_file;case 1:case"end":return e.stop()}},e,this)}))})}},{key:"_popupStates",value:function(e,t){this._titleLanguage=t.report_code,this.changeState=t.is_active,this._detail=t,this.modalService.open(e,{size:"sm",centered:!0})}},{key:"_updateState",value:function(){var e=this,t={};if(t.report_id=this._detail.report_id,t.is_active=this.changeState,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,2==this.changeState||4==this.changeState){var n=this._titleLanguage.substr(this._titleLanguage.lastIndexOf("-RV")+3,this._titleLanguage.length);if(parseInt(n)+1>9&&2==this.changeState)return void this._notifyService.showError("en"==this.user.lang?y.a.MSG_EXPORTNO_EN:y.a.MSG_EXPORT_NO,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);if(this._detail.flag_warning_eviction)return this._notifyService.showError("en"==this.user.lang?y.a.error_eviction_msg_en:y.a.error_eviction_msg,"en"==this.user.lang?y.a.error_title_en:y.a.error_title),void this.modalService.dismissAll();v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_evic_en:y.a.are_u_sure_evic,text:this._detail.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(n){n.value?e._dataService.post("/labresult/updateState",t).subscribe(function(t){e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),e.socket.emit("refresh",{}),e._updateStateOfSample(e._detail,t.flag),e.modalService.dismissAll()}):e.modalService.dismissAll()})}else this._dataService.post("/labresult/updateState",t).subscribe(function(t){e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),e.socket.emit("refresh",{}),e.modalService.dismissAll()})}},{key:"_switchEviction",value:function(e){var t=this;console.log(e),v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_evic_en:y.a.are_u_sure_evic,text:e.report_code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(n){if(n.value){var a={};a.report_id=e.report_id,a.is_active=2,a.userid=t.user.id,a.ipaddress=t.user.ipaddress,a.short_code=t.user.short_code,t._dataService.post("/labresult/updateState",a).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t.socket.emit("refresh",{}),t._updateStateOfSample(e,n.flag),t.modalService.dismissAll()})}else t.modalService.dismissAll()})}},{key:"_updateStateOfSample",value:function(e,t){var n={};n.getlist=e.order_details,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,n.status=3,this._dataService.post("/labresult/updateStateOfSample",n).subscribe(function(e){console.log(e)})}},{key:"_editInformation",value:function(e,t){console.log(t),this._currentTabActivated=1,this._titleLanguage=t.request_no,this.requestId=t.request_id,this.loadRequestDetail(t.request_id),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"loadRequestDetail",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/request/detailA",a).subscribe(function(t){n.entity=t.data,n._fdatea=new Date(t.data.received_date),n._tdatea=new Date(t.data.returned_date),n._dt1a=d(n._fdatea).format("YYYY-MM-DD HH:mm"),n._dt2a=d(n._tdatea).format("YYYY-MM-DD HH:mm");var a,c=[],i=1,r=e(t.data.orders_list.filter(function(e){return null!=e.inner_code}));try{for(r.s();!(a=r.n()).done;){var o=a.value;c.push({sample_id:o.sample_id,sample_name:o.sample_name,sample_code:o.sample_code,inner_code:o.inner_code,description:o.description,note:o.note,weight:o.weight,is_active:o.is_active,userid:o.userid,total_sub:o.total_sub,order_no:i}),i+=1}}catch(l){r.e(l)}finally{r.f()}console.log(c),n.entity._samples=c,n.entity0=c.filter(function(e){return e.order_no==n._currentTabActivated})[0],n.loadCustomers()})}},{key:"loadCustomers",value:function(){var t=this,n={};n.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({name:r.code_link,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._customers=c})}},{key:"orgValueChange1a",value:function(e){null!=e&&"Invalid date"!=e?(this._fdatea=e,this._tdatea=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1a=d(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=d(this._tdatea).format("YYYY-MM-DD HH:mm")):(this._fdatea=null,this._dt1a=null)}},{key:"orgValueChange2a",value:function(e){null!=e&&"Invalid date"!=e?(this._tdatea=e,this._dt1a=d(this._fdatea).format("YYYY-MM-DD HH:mm"),this._dt2a=d(this._tdatea).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdatea-this._fdatea)/864e5)):(this._tdatea=null,this._dt2a=null)}},{key:"_calculateDays",value:function(){null!=this._fdatea&&(this._tdatea=new Date(this._fdatea.getTime()+864e5*this.entity.valid_number))}},{key:"_chooseTab",value:function(e,t){this.entity0=e,this._currentTabActivated=t}},{key:"saveChangeRequest",value:function(){var e=this;if(null==this._dt1a||null==this._dt2a||this._fdatea>this._tdatea)this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);else{var t={};t.id=this.entity.id,t.customer_id=this.entity.customer_id,t.received_date=this._dt1a,t.returned_date=this._dt2a,t.valid_number=this.entity.valid_number,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,this._dataService.post("/labresult/updateRequestInfo",t).subscribe(function(t){console.log("Request",t),"ok"==t.result?(e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),e.socket.emit("refresh",{})):e._notifyService.showWarning("en"==e.user.lang?y.a.MSG_UPDATENO_EN:y.a.MSG_UPDATENO,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)},function(){e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)})}}},{key:"saveChangeSample",value:function(){var e=this,t={};t.sample_id=this.entity0.sample_id,t.sample_name=this.entity0.sample_name,t.weight=this.entity0.weight,t.description=this.entity0.description,t.note=this.entity0.note,t.userid=this.user.id,t.ipaddress=this.user.ipaddress,t.short_code=this.user.short_code,""!=this.entity0.sample_name&&null!=this.entity0.sample_name?this._dataService.post("/labresult/updateSampleInfo",t).subscribe(function(t){"ok"==t.result?(e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),e.socket.emit("refresh",{})):e._notifyService.showWarning("en"==e.user.lang?y.a.MSG_UPDATENO_EN:y.a.MSG_UPDATENO,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)},function(){e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)}):this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==this.user.lang?y.a.error_title_en:y.a.error_title)}},{key:"_popupRepareResults",value:function(e,t){this._requestIdTemp=t.request_id,this.loadLabResultList(t.request_id),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"loadLabResultList",value:function(t){var n=this;this._isLoadingResult=!0,this._dataService.post("/lab/getlistresultlabsbyid2side",{request_id:t,filter:this._keywordAdditional}).subscribe(function(t){var a,c=[],i=e(t.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({code:r.code,code_father:r.code_father,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,mark:r.mark,request_no:r.request_no,result_record:r.result_record,result_record_e:r.result_record_e,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,parameter_id:r.parameter_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,status:r.status,note:r.note,export_result:null==r.export_result?1:r.export_result,allow_lod:null!=r.allow_lod&&r.allow_lod,compare_note:r.compare_note})}}catch(o){i.e(o)}finally{i.f()}n._getlist2side=c,n._isLoadingResult=!1})}},{key:"_reupdateInformation",value:function(e){this._dataService.post("/lab/reupdateInformation2Sides",{getlist:e}).subscribe(function(e){})}},{key:"popupComment",value:function(e,t){this.loadDetailSample(t.sample_id),this.modalService.open(e,{size:"md",centered:!0})}},{key:"saveChangeComment",value:function(e,t){var n=this,a={};a.sample_id=this.entityComment.sample_id,a.take_note=this.entityComment.take_note,a.url_img=e,a.flag=t,this._dataService.post("/request/updateComment",a).subscribe(function(e){n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),n.fileUpload=null,n.entityComment.url_img=null,n.loadDetailSample(n.entityComment.sample_id)})}},{key:"loadDetailSample",value:function(e){var t=this,n={};n.sample_id=e,this._dataService.post("/request/detailSampleOrder",n).subscribe(function(e){t.entityComment=e.data,t.entityComment.url_img=e.data.url_img,t._path=null==e.data.url_img?null:e.data.url_img.substr(e.data.url_img.lastIndexOf("/")+1,e.data.url_img.length)})}},{key:"fileEvent",value:function(e){var t=e.target.files[0];if(void 0===t||void 0===t.name)this.fileUpload=null,this.entityComment.url_img=null,this._notifyService.showError("en"==this.user.lang?y.a.recheck_file_en:y.a.recheck_file,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);else{this.fileUpload=t.name;var n=this.fileUpload.split(".").pop();"jpg"===n||"jpeg"===n||"png"===n?(this.entityComment.url_img=t.name,this._processUpload(e.target)):(this._notifyService.showError("en"==this.user.lang?y.a.format_incorrect_en:y.a.format_incorrect,"en"==this.user.lang?y.a.error_title_en:y.a.error_title),this.fileUpload=null,this.entityComment.url_img=null)}}},{key:"_processUpload",value:function(e){var t=this;if(null==e)this._notifyService.showError("en"==this.user.lang?y.a.recheck_file_en:y.a.recheck_file,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);else{var n={folder_name:"lab_attachment"};n.id=this.entityComment.sample_id,this._uploadService.uploadFile("/services/uploads/"+n.id+"/"+n.folder_name,e.files).subscribe(function(e){t.saveChangeComment(e.data,1)})}}},{key:"removeAttachment",value:function(e){var t=this,n={};n.url=e.url_img,this._dataService.post("/services/deletefile1",n).subscribe(function(n){var a={};a.sample_id=e.sample_id,a.take_note=e.take_note,a.url_img=null,t._dataService.post("/request/updateComment",a).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t._path="",t.loadDetailSample(e.sample_id)})})}},{key:"_downloadFileResult",value:function(e){window.open(g.a.BASE_API+"/"+e.url_img,"blank")}},{key:"closeModal",value:function(){this.modalService.dismissAll()}}]),t}()).\u0275fac=function(e){return new(e||ue)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(C.s))},ue.\u0275cmp=x.Vb({type:ue,selectors:[["app-lab-results"]],viewQuery:function(e,t){var n;1&e&&(x.jd(R,1),x.jd(R,1)),2&e&&(x.Qc(n=x.sc())&&(t.fileUpload=n.first),x.Qc(n=x.sc())&&(t.fileUpload1=n.first))},decls:117,vars:104,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["type","button","routerLink","/request/lab-report",1,"btn","btn-sm","btn-primary","mr-sm-2"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"row",2,"overflow-x","scroll"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","90px"],["scope","col"],[4,"ngIf"],["contentLanguage",""],["contentStatus",""],["contentRequest",""],["contentAdditionalInfo",""],["contentCommentUpload",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","10",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["ngbDropdown","","class","btn-group mr-sm-1","role","group",4,"ngIf"],["href","javascript:;",3,"click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-default",4,"ngIf"],["ngbDropdown","","role","group",1,"btn-group","mr-sm-1"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["href","javascript:;",1,"dropdown-item",3,"click"],["class","dropdown-item","href","javascript:;",3,"click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-warning",3,"click"],[1,"icofont","icofont-pencil-alt-5"],["href","javascript:;",3,"click"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-danger"],[1,"badge","badge-success"],[1,"badge","badge-default"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-danger","mr-sm-2",3,"click"],["name","changestate",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value"],[1,"form-group"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],[1,"col-md-4"],["for","received_date"],["type","text","bsDatepicker","","name","_fdatea","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdatea","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",1,"form-control","mr-sm-2",3,"type","placeholder","ngModel","min","ngModelChange","change"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],[1,"flex-wrap"],[1,"btn-group","flex-wrap"],[1,"col-md-6"],[3,"for"],["type","text",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange"],[1,"col-md-12","text-right"],[1,"btn","btn-sm","btn-light","mr-sm-2",3,"click"],[1,"fa","fa-times-circle-o"],["type","button",3,"ngClass","click"],["for","search_id",1,"mr-sm-2"],["type","text","name","search_id","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","change","keyup.enter"],[1,"tableFixHead"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate"],["type","text",1,"form-control",2,"width","100px",3,"name","ngModel","ngModelChange","change"],["type","text",1,"form-control",2,"width","100px",3,"name","ngModel","placeholder","ngModelChange","change"],[1,"text-truncate","text-center"],["type","checkbox",1,"form-control",2,"width","25px",3,"name","ngModel","ngModelChange","change"],[1,"form","theme-form",3,"ngSubmit"],["form1","ngForm"],["for","comment"],["rows","2","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["for","img",1,"mr-sm-2"],["name","fileUpload","type","file",3,"change"],["fileUpload",""],["type","hidden","name","fileUpload",3,"ngModel","ngModelChange"],[1,"mute"],["href","javascript:;",1,"mr-sm-2",3,"click"],["href","javascript:;","class","text-danger",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit","class","btn btn-primary mr-sm-1",4,"ngIf"],["href","javascript:;",1,"text-danger",3,"click"],[1,"fa","fa-trash"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary","mr-sm-1"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.hc(12,"select",10),x.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.hc(13,"option",11),x.dd(14),x.wc(15,"translate"),x.gc(),x.hc(16,"option",12),x.dd(17),x.wc(18,"translate"),x.gc(),x.hc(19,"option",13),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"option",14),x.dd(23),x.wc(24,"translate"),x.gc(),x.hc(25,"option",15),x.dd(26),x.wc(27,"translate"),x.gc(),x.hc(28,"option",16),x.dd(29),x.wc(30,"translate"),x.gc(),x.gc(),x.bd(31,A,4,3,"button",17),x.hc(32,"button",18),x.dd(33),x.wc(34,"translate"),x.gc(),x.bd(35,E,1,0,"img",19),x.gc(),x.gc(),x.hc(36,"div",20),x.hc(37,"div",21),x.hc(38,"select",22),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(39,"option",23),x.dd(40,"#10"),x.gc(),x.hc(41,"option",24),x.dd(42,"#25"),x.gc(),x.hc(43,"option",25),x.dd(44,"#50"),x.gc(),x.hc(45,"option",26),x.dd(46,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(47,"div",27),x.hc(48,"div",28),x.hc(49,"div",29),x.hc(50,"div",30),x.hc(51,"pagination",31),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(52,"div",32),x.hc(53,"a",33),x.dd(54),x.wc(55,"translate"),x.wc(56,"translate"),x.wc(57,"translate"),x.wc(58,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(59,"div",28),x.hc(60,"div",34),x.hc(61,"table",35),x.hc(62,"thead",36),x.hc(63,"tr"),x.hc(64,"th",37),x.dd(65,"#"),x.gc(),x.hc(66,"th",38),x.dd(67),x.wc(68,"translate"),x.gc(),x.hc(69,"th",39),x.dd(70),x.wc(71,"translate"),x.gc(),x.hc(72,"th",39),x.dd(73),x.wc(74,"translate"),x.gc(),x.hc(75,"th",39),x.dd(76),x.wc(77,"translate"),x.gc(),x.hc(78,"th",39),x.dd(79),x.wc(80,"translate"),x.gc(),x.hc(81,"th",39),x.dd(82),x.wc(83,"translate"),x.gc(),x.hc(84,"th",39),x.dd(85),x.wc(86,"translate"),x.gc(),x.hc(87,"th",39),x.dd(88),x.wc(89,"translate"),x.gc(),x.hc(90,"th",39),x.dd(91),x.wc(92,"translate"),x.gc(),x.gc(),x.gc(),x.hc(93,"tbody"),x.bd(94,U,6,3,"ng-container",40),x.bd(95,j,2,1,"ng-container",40),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(96,"div",28),x.hc(97,"div",29),x.hc(98,"div",30),x.hc(99,"pagination",31),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(100,"div",32),x.hc(101,"a",33),x.dd(102),x.wc(103,"translate"),x.wc(104,"translate"),x.wc(105,"translate"),x.wc(106,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(107,X,22,15,"ng-template",null,41,x.cd),x.bd(109,W,31,29,"ng-template",null,42,x.cd),x.bd(111,ee,99,101,"ng-template",null,43,x.cd),x.bd(113,ie,44,33,"ng-template",null,44,x.cd),x.bd(115,se,36,19,"ng-template",null,45,x.cd)),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,52,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(102,de)),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(103,de)),x.Nb(1),x.Dc("ngModel",t._status),x.Nb(2),x.fd(" ",x.xc(15,54,"All")," "),x.Nb(3),x.fd(" ",x.xc(18,56,"Draft")," "),x.Nb(3),x.fd(" ",x.xc(21,58,"Official")," "),x.Nb(3),x.fd(" ",x.xc(24,60,"Evicted")," "),x.Nb(3),x.fd(" ",x.xc(27,62,"Printed")," "),x.Nb(3),x.fd(" ",x.xc(30,64,"Cancel")," "),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),x.Nb(2),x.fd(" ",x.xc(34,66,"Go back")," "),x.Nb(2),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(55,68,"Total of records"),": ",t.totalRow," - ",x.xc(56,70,"Page")," ",t.pageIndex," ",x.xc(57,72,"of")," ",t.totalPage," ",x.xc(58,74,"page"),""),x.Nb(13),x.fd(" ",x.xc(68,76,"Actions")," "),x.Nb(3),x.fd(" ",x.xc(71,78,"Report code")," "),x.Nb(3),x.fd(" ",x.xc(74,80,"Request code")," "),x.Nb(3),x.fd(" ",x.xc(77,82,"Sample name")," "),x.Nb(3),x.fd(" ",x.xc(80,84,"Received date")," "),x.Nb(3),x.ed(x.xc(83,86,"Returned date")),x.Nb(3),x.fd(" ",x.xc(86,88,"Company")," "),x.Nb(3),x.ed(x.xc(89,90,"Contact")),x.Nb(3),x.ed(x.xc(92,92,"Status")),x.Nb(3),x.Dc("ngIf",0==t._getlist.length),x.Nb(1),x.Dc("ngIf",t._getlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(103,94,"Total of records"),": ",t.totalRow," - ",x.xc(104,96,"Page")," ",t.pageIndex," ",x.xc(105,98,"of")," ",t.totalPage," ",x.xc(106,100,"page"),""))},directives:[o.c,o.n,o.q,k.b,k.a,o.x,o.r,o.A,r.q,l.e,T.a,r.p,C.l,C.p,C.o,o.z,o.o,o.p,I.a,o.w,o.t,r.o,o.b],pipes:[P.c,r.f],styles:[""]}),ue),ge=["fileUpload"];function me(e,t){if(1&e&&(x.hc(0,"option",37),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function _e(e,t){if(1&e){var n=x.ic();x.hc(0,"button",38),x.rc("click",function(){x.Uc(n);var e=x.vc();return null==e._id||""==e._id?e._exportAll(e._preparationlist):e._exportAllLab()}),x.cc(1,"i",39),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function pe(e,t){1&e&&x.cc(0,"img",40)}function fe(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",41),x.hc(3,"h3",42),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function be(e,t){1&e&&x.cc(0,"i",53)}function ve(e,t){1&e&&x.cc(0,"i",54)}function ye(e,t){if(1&e){var n=x.ic();x.hc(0,"button",55),x.rc("click",function(){x.Uc(n);var e=x.vc(3);return e._updateValidationv2(e._preparationlist)}),x.wc(1,"translate"),x.cc(2,"i",56),x.gc()}2&e&&x.Dc("title",x.xc(1,1,"Save"))}function xe(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"a",57),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit,t=x.vc(2),a=x.Rc(120);return t.popupComment(a,e)}),x.dd(2),x.gc(),x.ec()}if(2&e){var a=x.vc().$implicit;x.Nb(2),x.ed(a.inner_code)}}function Se(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.ed(n.inner_code)}}function we(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"a",57),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._updateStatusSample(e)}),x.dd(2),x.wc(3,"translate"),x.gc(),x.ec()}2&e&&(x.Nb(2),x.ed(x.xc(3,1,"Return lab")))}function Ne(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.mark," ")}}function De(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",58),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.mark=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","mark",c+1,""),x.Dc("ngModel",i.mark)}}function Me(e,t){1&e&&x.cc(0,"i",59)}function Ce(e,t){1&e&&x.cc(0,"i",60)}function ke(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.compare_note," ")}}function Te(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",58),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.compare_note=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","comparenote",c+1,""),x.Dc("ngModel",i.compare_note)}}function Ie(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",34),x.dd(2),x.gc(),x.hc(3,"td",44),x.hc(4,"button",45),x.rc("click",function(){return x.Uc(n),x.vc(2)._switchFlagEdit()}),x.wc(5,"translate"),x.bd(6,be,1,0,"i",46),x.bd(7,ve,1,0,"i",47),x.gc(),x.bd(8,ye,3,3,"button",48),x.gc(),x.hc(9,"td"),x.bd(10,xe,3,1,"ng-container",35),x.bd(11,Se,2,1,"ng-container",35),x.gc(),x.hc(12,"td"),x.dd(13),x.gc(),x.hc(14,"td"),x.dd(15),x.gc(),x.hc(16,"td"),x.dd(17),x.gc(),x.hc(18,"td"),x.dd(19),x.gc(),x.hc(20,"td"),x.dd(21),x.gc(),x.hc(22,"td"),x.dd(23),x.gc(),x.hc(24,"td"),x.dd(25),x.gc(),x.hc(26,"td"),x.dd(27),x.gc(),x.hc(28,"td"),x.dd(29),x.gc(),x.hc(30,"td"),x.dd(31),x.gc(),x.hc(32,"td"),x.cc(33,"span",49),x.gc(),x.hc(34,"td"),x.bd(35,we,4,3,"ng-container",35),x.gc(),x.hc(36,"td"),x.bd(37,Ne,2,1,"ng-container",35),x.bd(38,De,2,2,"ng-container",35),x.gc(),x.hc(39,"td",50),x.rc("click",function(){var e=t.$implicit;return e.allow_lod=!e.allow_lod}),x.bd(40,Me,1,0,"i",51),x.bd(41,Ce,1,0,"i",52),x.gc(),x.hc(42,"td"),x.bd(43,ke,2,1,"ng-container",35),x.bd(44,Te,2,2,"ng-container",35),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.Dc("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!i._authenService.hasPermission("REQ-REPORT","update"))("title",x.xc(5,27,a.flag?"Cancel":"_Edit")),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",i._authenService.hasPermission("REQ-REPORT","update")),x.Nb(1),x.Dc("ngIf",!i._authenService.hasPermission("REQ-REPORT","update")),x.Nb(2),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.para_name_e:a.para_name_l," "),x.Nb(2),x.ed(a.tat),x.Nb(2),x.ed(a.note),x.Nb(2),x.ed(a.note_lab),x.Nb(2),x.fd(" ",a.note_asm," "),x.Nb(2),x.ed(a.unit),x.Nb(2),x.fd(" ",a.lod," "),x.Nb(2),x.fd(" ",a.loq," "),x.Nb(2),x.Dc("innerHTML",a.result_record,x.Vc),x.Nb(2),x.Dc("ngIf",i._authenService.hasPermission("REQ-REPORT","update")&&i._authenService.hasPermission("REQ-REPORT","delete")),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",a.allow_lod),x.Nb(1),x.Dc("ngIf",!a.allow_lod),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag)}}function Pe(e,t){if(1&e&&(x.fc(0),x.bd(1,Ie,45,29,"tr",43),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._preparationlist)}}function Re(e,t){if(1&e){var n=x.ic();x.hc(0,"a",83),x.rc("click",function(){x.Uc(n);var e=x.vc(2);return e.removeAttachment(e.entityComment)}),x.cc(1,"i",84),x.gc()}}function Ae(e,t){1&e&&(x.fc(0),x.hc(1,"a",85),x.cc(2,"img",86),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing"),""))}function Ee(e,t){1&e&&(x.hc(0,"button",87),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Save & close")," "))}function Ue(e,t){if(1&e){var n=x.ic();x.hc(0,"form",61,62),x.rc("ngSubmit",function(){x.Uc(n);var e=x.vc();return e.saveChangeComment(e.entityComment,0)}),x.hc(2,"div",63),x.hc(3,"h4",64),x.dd(4),x.wc(5,"translate"),x.gc(),x.hc(6,"button",65),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(7,"span",66),x.dd(8,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(9,"div",67),x.hc(10,"div",68),x.hc(11,"div",69),x.hc(12,"div",70),x.hc(13,"label",71),x.dd(14),x.wc(15,"translate"),x.gc(),x.hc(16,"textarea",72),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entityComment.take_note=e}),x.gc(),x.gc(),x.gc(),x.hc(17,"div",69),x.hc(18,"div",70),x.hc(19,"label",73),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"input",74,75),x.rc("change",function(e){return x.Uc(n),x.vc().fileEvent(e)}),x.gc(),x.hc(24,"input",76),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entityComment.url_img=e}),x.gc(),x.cc(25,"br"),x.hc(26,"small",77),x.hc(27,"a",78),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._downloadFileResult(e.entityComment)}),x.dd(28),x.gc(),x.bd(29,Re,2,0,"a",79),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(30,"div",80),x.hc(31,"button",81),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.dd(32),x.wc(33,"translate"),x.gc(),x.bd(34,Ae,5,3,"ng-container",35),x.bd(35,Ee,3,3,"button",82),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(4),x.gd(" ",x.xc(5,11,"Note")," - ",a.entityComment.inner_code," "),x.Nb(10),x.fd("",x.xc(15,13,"Content")," "),x.Nb(2),x.Dc("ngModel",a.entityComment.take_note),x.Nb(4),x.ed(x.xc(21,15,"Attachment")),x.Nb(4),x.Dc("ngModel",a.entityComment.url_img),x.Nb(4),x.ed(a._path),x.Nb(1),x.Dc("ngIf",null!=a.entityComment.url_img),x.Nb(3),x.fd(" ",x.xc(33,17,"Close")," "),x.Nb(2),x.Dc("ngIf",a.isSave),x.Nb(1),x.Dc("ngIf",!a.isSave)}}var Fe=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};_.a.vfs=f.a.pdfMake.vfs;var Oe,Ye=((Oe=function(){function t(e,a,c,i,r,o,l,s){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=r,this._excelService=o,this.modalService=l,this._activatedRoute=s,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=3,this.entity={},this.entityComment={},this._path="",this._id="",this._flagEdit=!1,!1!==e.checkAccess("RES-VALID")&&!1!==e.hasPermission("RES-VALID","read")||this._route.navigate(["/404"]),this.socket=h()(g.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this._activatedRoute.params.subscribe(function(t){e._id=t.id,e.loadData(e._id),e.socket.on("refreshPage",function(t){console.log(e._id),e.loadData(e._id)})}),this.loadDepartment(),this.loadTestFamilyPL()}},{key:"loadData",value:function(t){var n=this;if(null==t){var a={};a.filter=this._keyword,a.domain=this.user.short_code,a.start_date=this._dt1,a.end_date=this._dt2,a.department_id=this.department_id,a.family_id=this.testcsp_id,a.flag_status=this._status,a.page=this.pageIndex,a.limit=this.pageSize,this._dataService.post("/lab/getlistresultlabs",a).subscribe(function(t){var a,c=[],i=e(t.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({code:r.code,code_father:r.code_father,company_code:r.company_code,company_name_e:r.company_name_e,company_name_l:r.company_name_l,contact_name:r.contact_name,customer_id:r.customer_id,email:r.email,employee_nr:r.employee_nr,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,tat:r.tat,mark:r.mark,note_asm:r.note_asm,para_name_e:r.para_name_e,para_name_l:r.para_name_l,parameter_id:r.parameter_id,phone:r.phone,received_date:r.received_date,request_no:r.request_no,result_record:r.result_record,returned_date:r.returned_date,sale_man:r.sale_man,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,flag:!1,note_lab:r.note_lab,status:r.status,note:r.note,category_name_e:r.category_name_e,category_name_l:r.category_name_l,export_result:null==r.export_result?1:r.export_result,allow_lod:null!=r.allow_lod&&r.allow_lod,compare_note:r.compare_note,dept_name_e:r.dept_name_e,dept_name_l:r.dept_name_l})}}catch(o){i.e(o)}finally{i.f()}n._preparationlist=c,n.totalRow=t.rowCount,n.totalPage=t.totalPages})}else{var c={};c.filter=this._keyword,c.page=this.pageIndex,c.limit=this.pageSize,c.request_id=this._id,this._dataService.post("/lab/getlistresultlabsbyid",c).subscribe(function(t){var a,c=[],i=e(t.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({code:r.code,code_father:r.code_father,company_code:r.company_code,company_name_e:r.company_name_e,company_name_l:r.company_name_l,contact_name:r.contact_name,customer_id:r.customer_id,email:r.email,employee_nr:r.employee_nr,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,tat:r.tat,mark:r.mark,note_asm:r.note_asm,para_name_e:r.para_name_e,para_name_l:r.para_name_l,parameter_id:r.parameter_id,phone:r.phone,received_date:r.received_date,request_no:r.request_no,result_record:r.result_record,returned_date:r.returned_date,sale_man:r.sale_man,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,flag:!1,note_lab:r.note_lab,status:r.status,note:r.note,category_name_e:r.category_name_e,category_name_l:r.category_name_l,export_result:null==r.export_result?1:r.export_result,allow_lod:null!=r.allow_lod&&r.allow_lod,compare_note:r.compare_note,dept_name_e:r.dept_name_e,dept_name_l:r.dept_name_l})}}catch(o){i.e(o)}finally{i.f()}n._preparationlist=c,n.totalRow=t.rowCount,n.totalPage=t.totalPages})}}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyPL",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",t).subscribe(function(t){e._pllist=t.data})}},{key:"_exportAll",value:function(t){var n,a=[],c=e(t);try{for(c.s();!(n=c.n()).done;){var i=n.value,r="";4==i.status&&(r="en"==this.user.lang?y.a.s_done_en:y.a.s_done),3==i.status&&(r="en"==this.user.lang?y.a.s_validate_en:y.a.s_validate),2==i.status&&(r="en"==this.user.lang?y.a.s_techvalidate_en:y.a.s_techvalidate),1==i.status&&(r="en"==this.user.lang?y.a.s_prepare_en:y.a.s_prepare),0==i.status&&(r="en"==this.user.lang?y.a.s_none_en:y.a.s_none);var o=new Date(i.received_date).getTime()+864e5*i.tat;a.push({"Inner code":i.inner_code,Code:i.code,"Internal test":i.specification_name_l,Parameter:i.para_name_l,"Sample matrix":i.category_name_l,"Priority TAT":i.tat,Note:null==i.note?"":i.note,"Note Lab":null==i.note_lab?"":i.note_lab,"Note ASM":null==i.note_asm?"":i.note_asm,Unit:null==i.unit?"":i.unit,LOD:null==i.lod?"":i.lod,LOQ:null==i.loq?"":i.loq,Result:null==i.result_record?"":i.result_record,Status:r,"Received Date":d(new Date(i.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(o)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?i.dept_name_e:i.dept_name_l})}}catch(l){c.e(l)}finally{c.f()}this._excelService.exportAsExcelFile(a,"LabValidation-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+t.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.length+" "+y.a.record,"OK")}},{key:"_exportAllLab",value:function(){var t=this;this._dataService.post("/lab/exportresultlabbyid",{request_id:this._id,short_code:this.user.short_code}).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({"Ng\xe0y nh\u1eadn m\u1eabu":d(new Date(r.returned_date)).format("DD/MM/YYYY"),"M\xe3 kh\xe1ch h\xe0ng":r.employee_nr+r.request_no.substr(2,r.request_no.length),"M\xe3 s\u1ed1 m\u1eabu":r.inner_code,"T\xean m\u1eabu/n\u1ec1n m\u1eabu":null==r.sample_name_e?r.sample_name:r.sample_name_e,"Kh\u1ed1i l\u01b0\u1ee3ng/th\u1ec3 t\xedch":"",VS:"","H\xf3a":"","T\xecnh tr\u1ea1ng m\u1eabu":null==r.description_e?null==r.description?"":r.description:r.descripton_e,"Ng\xe0y/ ng\u01b0\u1eddi l\u01b0u m\u1eabu":"","Khu v\u1ef1c/ v\u1ecb tr\xed l\u01b0u":"","Ng\xe0y thanh l\xfd":"","Ng\u01b0\u1eddi thanh l\xfd":"","Tr\u01b0\u1edfng ph\xf2ng x\xe1c nh\u1eadn":"","Ghi ch\xfa":""})}}catch(o){i.e(o)}finally{i.f()}t._excelService.exportAsExcelFile(c,"LabValidation-"+d(new Date).format("YYYY-MM-DD")),t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_EXPORT_EN+" "+c.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+c.length+" "+y.a.record,"OK")})}},{key:"orgValueChange1",value:function(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData(this._id)):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e,t){var n=this;3==t||4==t?(e.status=t,v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_switch_en:y.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData(n._id)}):n.loadData(n._id)})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData(n._id)}))}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)})}},{key:"_switchFlagEdit",value:function(){var t,n=e(this._preparationlist);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.flag=!a.flag}}catch(c){n.e(c)}finally{n.f()}}},{key:"_updateValidationv2",value:function(e){var t=this;console.log(e),v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure0_en:y.a.are_u_sure0,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(n){n.value&&t._dataService.post("/lab/updateValidationv2",{getlist:e,user_id:t.user.id,ipaddress:t.user.ipaddress,short_code:t.user.short_code}).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t.socket.emit("refresh",{})})})}},{key:"_updateValidation",value:function(e,t){var n=this;1==t&&(e.allow_lod=!e.allow_lod),v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure0_en:y.a.are_u_sure0,text:e.code,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value&&n._dataService.post("/lab/updateValidation",e).subscribe(function(e){n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),n.socket.emit("refresh",{})})})}},{key:"_updateValidationLOD",value:function(e,t){var n=this;1==t&&(e.allow_lod=!e.allow_lod),this._dataService.post("/lab/updateValidationLOD",e).subscribe(function(e){n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),n.socket.emit("refresh",{})})}},{key:"popupComment",value:function(e,t){this.loadDetailSample(t.sample_id),this.modalService.open(e,{size:"md",centered:!0})}},{key:"saveChangeComment",value:function(e,t){var n=this,a={};a.sample_id=this.entityComment.sample_id,a.take_note=this.entityComment.take_note,a.url_img=e,a.flag=t,this._dataService.post("/request/updateComment",a).subscribe(function(e){n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),n.socket.emit("refresh",{}),n.fileUpload=null,n.entityComment.url_img=null,n.modalService.dismissAll()})}},{key:"loadDetailSample",value:function(e){var t=this,n={};n.sample_id=e,this._dataService.post("/request/detailSampleOrder",n).subscribe(function(e){console.log(e),t.entityComment=e.data,t.entityComment.url_img=e.data.url_img,t._path=null==e.data.url_img?null:e.data.url_img.substr(e.data.url_img.lastIndexOf("/")+1,e.data.url_img.length)})}},{key:"fileEvent",value:function(e){var t=e.target.files[0];if(void 0===t||void 0===t.name)this.fileUpload=null,this.entityComment.url_img=null,this._notifyService.showError("en"==this.user.lang?y.a.recheck_file_en:y.a.recheck_file,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);else{this.fileUpload=t.name;var n=this.fileUpload.split(".").pop();"jpg"===n||"jpeg"===n||"png"===n?(console.log("ok"),this.entityComment.url_img=t.name,this._processUpload(e.target)):(this._notifyService.showError("en"==this.user.lang?y.a.format_incorrect_en:y.a.format_incorrect,"en"==this.user.lang?y.a.error_title_en:y.a.error_title),this.fileUpload=null,this.entityComment.url_img=null)}}},{key:"_processUpload",value:function(e){var t=this;if(null==e)this._notifyService.showError("en"==this.user.lang?y.a.recheck_file_en:y.a.recheck_file,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);else{var n={folder_name:"lab_attachment"};n.id=this.entityComment.sample_id,this._uploadService.uploadFile("/services/uploads/"+n.id+"/"+n.folder_name,e.files).subscribe(function(e){console.log(e),t.saveChangeComment(e.data,1)})}}},{key:"removeAttachment",value:function(e){var t=this,n={};n.url=e.url_img,console.log(n),this._dataService.post("/services/deletefile1",n).subscribe(function(n){var a={};a.sample_id=e.sample_id,a.take_note=e.take_note,a.url_img=null,t._dataService.post("/request/updateComment",a).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t.socket.emit("refresh",{}),t._path="",t.loadDetailSample(e.sample_id)})})}},{key:"_updateStatusSample",value:function(e){var t=this;console.log(e),v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_switch_en:y.a.are_u_sure_switch,text:e.inner_code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(n){if(n.value){var a={};a.sample_id=e.sample_id,a.parameter_id=e.parameter_id,a.category_id=e.category_id,a.userid=t.user.id,a.ipaddress=t.user.ipaddress,a.short_code=t.user.short_code,t._dataService.post("/labresult/updateReturnSample",a).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t.socket.emit("refresh",{})})}})}},{key:"_downloadFileResult",value:function(e){window.open(g.a.BASE_API+"/"+e.url_img,"blank")}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}()).\u0275fac=function(e){return new(e||Oe)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(C.s),x.bc(l.a))},Oe.\u0275cmp=x.Vb({type:Oe,selectors:[["app-labrep-detaillist"]],viewQuery:function(e,t){var n;1&e&&(x.jd(ge,1),x.jd(ge,1)),2&e&&(x.Qc(n=x.sc())&&(t.fileUpload=n.first),x.Qc(n=x.sc())&&(t.fileUpload1=n.first))},decls:121,vars:123,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","disabled","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","disabled","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["routerLink","/request/lab-report",1,"btn","btn-sm","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[1,"text-truncate"],[4,"ngIf"],["contentCommentUpload",""],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","18",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],[2,"text-align","center"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[3,"innerHTML"],[2,"cursor","pointer",3,"click"],["class","fa fa-check-circle text-success",4,"ngIf"],["class","fa fa-times-circle text-danger",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["href","javascript:;",3,"click"],["type","text","autoSizeInput","",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"fa","fa-check-circle","text-success"],[1,"fa","fa-times-circle","text-danger"],[1,"form","theme-form",3,"ngSubmit"],["form1","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-group"],["for","comment"],["rows","2","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["for","img",1,"mr-sm-2"],["name","fileUpload","type","file",3,"change"],["fileUpload",""],["type","hidden","name","fileUpload",3,"ngModel","ngModelChange"],[1,"mute"],["href","javascript:;",1,"mr-sm-2",3,"click"],["href","javascript:;","class","text-danger",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit","class","btn btn-primary mr-sm-1",4,"ngIf"],["href","javascript:;",1,"text-danger",3,"click"],[1,"fa","fa-trash"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary","mr-sm-1"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData(t._id)})("keyup.enter",function(){return t.loadData(t._id)}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.hc(12,"select",10),x.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData(t._id)}),x.hc(13,"option",11),x.dd(14),x.wc(15,"translate"),x.wc(16,"translate"),x.gc(),x.bd(17,me,2,2,"option",12),x.gc(),x.bd(18,_e,4,3,"button",13),x.hc(19,"a",14),x.dd(20),x.wc(21,"translate"),x.wc(22,"translate"),x.gc(),x.bd(23,pe,1,0,"img",15),x.gc(),x.gc(),x.hc(24,"div",16),x.hc(25,"div",17),x.hc(26,"select",18),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(27,"option",19),x.dd(28,"#10"),x.gc(),x.hc(29,"option",20),x.dd(30,"#25"),x.gc(),x.hc(31,"option",21),x.dd(32,"#50"),x.gc(),x.hc(33,"option",22),x.dd(34,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(35,"div",23),x.hc(36,"div",24),x.hc(37,"div",25),x.hc(38,"div",26),x.hc(39,"pagination",27),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(40,"div",28),x.hc(41,"a",29),x.dd(42),x.wc(43,"translate"),x.wc(44,"translate"),x.wc(45,"translate"),x.wc(46,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(47,"div",24),x.hc(48,"div",30),x.hc(49,"table",31),x.hc(50,"thead",32),x.hc(51,"tr"),x.hc(52,"th",33),x.dd(53,"#"),x.gc(),x.hc(54,"th",34),x.dd(55),x.wc(56,"translate"),x.gc(),x.hc(57,"th",34),x.dd(58),x.wc(59,"translate"),x.gc(),x.hc(60,"th",34),x.dd(61),x.wc(62,"translate"),x.gc(),x.hc(63,"th",34),x.dd(64),x.wc(65,"translate"),x.gc(),x.hc(66,"th",34),x.dd(67),x.wc(68,"translate"),x.gc(),x.hc(69,"th",34),x.dd(70),x.wc(71,"translate"),x.gc(),x.hc(72,"th",34),x.dd(73),x.wc(74,"translate"),x.gc(),x.hc(75,"th",34),x.dd(76),x.wc(77,"translate"),x.gc(),x.hc(78,"th",34),x.dd(79),x.wc(80,"translate"),x.gc(),x.hc(81,"th",34),x.dd(82),x.wc(83,"translate"),x.gc(),x.hc(84,"th",34),x.dd(85),x.wc(86,"translate"),x.gc(),x.hc(87,"th",34),x.dd(88),x.wc(89,"translate"),x.gc(),x.hc(90,"th",34),x.dd(91),x.wc(92,"translate"),x.gc(),x.hc(93,"th",34),x.dd(94),x.wc(95,"translate"),x.gc(),x.hc(96,"th",34),x.dd(97),x.wc(98,"translate"),x.gc(),x.hc(99,"th",34),x.dd(100),x.wc(101,"translate"),x.gc(),x.hc(102,"th",34),x.dd(103),x.wc(104,"translate"),x.gc(),x.gc(),x.gc(),x.hc(105,"tbody"),x.bd(106,fe,6,3,"ng-container",35),x.bd(107,Pe,2,1,"ng-container",35),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(108,"div",24),x.hc(109,"div",25),x.hc(110,"div",26),x.hc(111,"pagination",27),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(112,"div",28),x.hc(113,"a",29),x.dd(114),x.wc(115,"translate"),x.wc(116,"translate"),x.wc(117,"translate"),x.wc(118,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(119,Ue,36,19,"ng-template",null,36,x.cd)),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,61,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(121,Fe))("disabled",null!=t._id),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(122,Fe))("disabled",null!=t._id),x.Nb(1),x.Dc("ngModel",t.department_id)("disabled",null!=t._id),x.Nb(2),x.gd(" ",x.xc(15,63,"All")," ",x.xc(16,65,"Department")," "),x.Nb(3),x.Dc("ngForOf",t._deptlist),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-VALID","report")),x.Nb(2),x.gd(" ",x.xc(21,67,"Return")," ",x.xc(22,69,"Report")," "),x.Nb(3),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(43,71,"Total of records"),": ",t.totalRow," - ",x.xc(44,73,"Page")," ",t.pageIndex," ",x.xc(45,75,"of")," ",t.totalPage," ",x.xc(46,77,"page"),""),x.Nb(13),x.ed(x.xc(56,79,"Actions")),x.Nb(3),x.fd(" ",x.xc(59,81,"Inner code")," "),x.Nb(3),x.fd(" ",x.xc(62,83,"Code")," "),x.Nb(3),x.ed(x.xc(65,85,"Internal testing")),x.Nb(3),x.ed(x.xc(68,87,"Parameter name")),x.Nb(3),x.ed(x.xc(71,89,"Priority")),x.Nb(3),x.ed(x.xc(74,91,"Note")),x.Nb(3),x.ed(x.xc(77,93,"Note lab")),x.Nb(3),x.ed(x.xc(80,95,"Note asm")),x.Nb(3),x.ed(x.xc(83,97,"Unit")),x.Nb(3),x.ed(x.xc(86,99,"LOD")),x.Nb(3),x.ed(x.xc(89,101,"LOQ")),x.Nb(3),x.ed(x.xc(92,103,"Results")),x.Nb(3),x.ed(x.xc(95,105,"Status")),x.Nb(3),x.ed(x.xc(98,107,"Mark")),x.Nb(3),x.ed(x.xc(101,109,"Tick LOD?")),x.Nb(3),x.ed(x.xc(104,111,"Compare")),x.Nb(3),x.Dc("ngIf",0==t._preparationlist.length),x.Nb(1),x.Dc("ngIf",t._preparationlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(115,113,"Total of records"),": ",t.totalRow," - ",x.xc(116,115,"Page")," ",t.pageIndex," ",x.xc(117,117,"of")," ",t.totalPage," ",x.xc(118,119,"page"),""))},directives:[o.c,o.n,o.q,k.b,k.a,o.x,o.r,o.A,r.p,r.q,l.g,T.a,r.o,o.z,o.o,o.p],pipes:[P.c],styles:[""]}),Oe);function Le(e,t){if(1&e){var n=x.ic();x.hc(0,"button",34),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e.exportList)}),x.cc(1,"i",35),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function qe(e,t){1&e&&x.cc(0,"img",36)}function ze(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",37),x.hc(3,"h3",38),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function Ge(e,t){if(1&e&&(x.hc(0,"a",46),x.hc(1,"strong",38),x.dd(2),x.gc(),x.gc()),2&e){var n=x.vc().$implicit;x.Fc("routerLink","/request/lab-report-validation/",n.id,""),x.Nb(2),x.ed(n.total_validation)}}function Ve(e,t){1&e&&(x.fc(0),x.hc(1,"strong"),x.dd(2,"0"),x.gc(),x.ec())}function Be(e,t){1&e&&(x.hc(0,"span",47),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Printed")))}function Qe(e,t){1&e&&(x.hc(0,"span",48),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Pending")))}function He(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",40),x.dd(2),x.gc(),x.hc(3,"td"),x.dd(4),x.gc(),x.hc(5,"td"),x.dd(6),x.wc(7,"date"),x.gc(),x.hc(8,"td"),x.dd(9),x.wc(10,"date"),x.gc(),x.hc(11,"td"),x.dd(12),x.gc(),x.hc(13,"td"),x.hc(14,"strong"),x.dd(15),x.gc(),x.gc(),x.hc(16,"td"),x.hc(17,"a",41),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2),c=x.Rc(87);return e.total_results>0?a._openResults(c,e):null}),x.hc(18,"strong",42),x.dd(19),x.gc(),x.gc(),x.gc(),x.hc(20,"td"),x.bd(21,Ge,3,2,"a",43),x.bd(22,Ve,3,0,"ng-container",32),x.gc(),x.hc(23,"td"),x.bd(24,Be,3,3,"span",44),x.bd(25,Qe,3,3,"span",45),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.fd(" ",a.order_code," "),x.Nb(2),x.ed(x.yc(7,12,a.received_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.ed(x.yc(10,15,a.returned_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.ed(a.total_sample),x.Nb(3),x.ed(a.total_tests),x.Nb(3),x.Dc("ngClass",a.total_results<a.total_tests?"text-danger":""),x.Nb(1),x.ed(a.total_results),x.Nb(2),x.Dc("ngIf",a.total_validation>0),x.Nb(1),x.Dc("ngIf",0==a.total_validation),x.Nb(2),x.Dc("ngIf",a.flag),x.Nb(1),x.Dc("ngIf",!a.flag)}}function $e(e,t){if(1&e&&(x.fc(0),x.bd(1,He,26,18,"tr",39),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._preparationlist)}}function Ke(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"td"),x.hc(2,"input",61),x.rc("change",function(e){x.Uc(n);var a=t.$implicit;return x.vc(2).selectItem(e,a.sample_id+","+a.parameter_id+","+a.category_id)}),x.gc(),x.gc(),x.hc(3,"td"),x.hc(4,"span",42),x.dd(5),x.gc(),x.gc(),x.hc(6,"td"),x.dd(7),x.gc(),x.hc(8,"td"),x.dd(9),x.gc(),x.hc(10,"td"),x.dd(11),x.gc(),x.hc(12,"td"),x.cc(13,"span",62),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.Fc("name","ckU",c+1,""),x.Dc("checked",i.exportList.includes(a.sample_id+","+a.parameter_id+","+a.category_id)),x.Nb(2),x.Dc("ngClass",a.flagEvicted?"text-danger":""),x.Nb(1),x.ed(a.inner_code),x.Nb(2),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.para_name_e:a.para_name_l," "),x.Nb(2),x.Dc("innerHTML",a.result_record,x.Vc)}}function je(e,t){if(1&e){var n=x.ic();x.hc(0,"form",49),x.hc(1,"div",50),x.hc(2,"h4",51),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",52),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",53),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",54),x.hc(9,"div",55),x.hc(10,"div",56),x.hc(11,"div",27),x.hc(12,"button",57),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._switch(1,e.exportList)}),x.dd(13),x.wc(14,"translate"),x.gc(),x.hc(15,"button",58),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._switch(2,e.exportList)}),x.dd(16),x.wc(17,"translate"),x.gc(),x.cc(18,"hr"),x.hc(19,"table",28),x.hc(20,"thead",29),x.hc(21,"tr"),x.hc(22,"th",59),x.hc(23,"input",60),x.rc("change",function(e){return x.Uc(n),x.vc().selectAll(e)}),x.gc(),x.gc(),x.hc(24,"th",31),x.dd(25),x.wc(26,"translate"),x.gc(),x.hc(27,"th",31),x.dd(28),x.wc(29,"translate"),x.gc(),x.hc(30,"th",31),x.dd(31),x.wc(32,"translate"),x.gc(),x.hc(33,"th",31),x.dd(34),x.wc(35,"translate"),x.gc(),x.hc(36,"th",31),x.dd(37),x.wc(38,"translate"),x.gc(),x.gc(),x.gc(),x.hc(39,"tbody"),x.bd(40,Ke,14,8,"tr",39),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.gd(" ",x.xc(4,14,"Report")," - ",a._titleRequest," "),x.Nb(9),x.Dc("disabled",0==a.resultlist.length),x.Nb(1),x.fd(" ",x.xc(14,16,"Action draft")," "),x.Nb(2),x.Dc("disabled",0==a.resultlist.length),x.Nb(1),x.fd(" ",x.xc(17,18,"Action direct")," "),x.Nb(7),x.Dc("disabled",0==a.resultlist.length)("checked",a.exportList.length==a.resultlist.length),x.Nb(2),x.fd(" ",x.xc(26,20,"Sample code")," "),x.Nb(3),x.fd(" ",x.xc(29,22,"Code")," "),x.Nb(3),x.fd(" ",x.xc(32,24,"Internal testing")," "),x.Nb(3),x.fd(" ",x.xc(35,26,"Parameter name")," "),x.Nb(3),x.fd(" ",x.xc(38,28,"Results")," "),x.Nb(3),x.Dc("ngForOf",a.resultlist)}}var Xe,We=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},Je=((Xe=function(){function t(e,a,c,i,r,o,l){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=r,this._excelService=o,this.modalService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=0,this.entity={},this.resultlist=[],this._orderdetails=[],this._titleRequest="",this.exportList=[],this._idRequest="",!1!==e.checkAccess("REQ-REPORT")&&!1!==e.hasPermission("REQ-REPORT","read")||this._route.navigate(["/error/404"]),this.socket=h()(g.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var e=this,t={};t.filter=this._keyword,t.domain=this.user.short_code,t.start_date=this._dt1,t.end_date=this._dt2,t.page=this.pageIndex,t.limit=this.pageSize,this._dataService.post("/lab/getlistreportlabs",t).subscribe(function(t){console.log("Load data",t),e._preparationlist=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyCSP",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",t).subscribe(function(t){e._csplist=t.data})}},{key:"_exportAll",value:function(){var t=this,n={filter:""};n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.page=1,n.limit=99999,this._dataService.post("/lab/getlistreportlabs",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({Ma_Yeu_Cau:r.request_no,Ngay_Nhan:d(r.received_date).format("DD/MM/YYYY HH:mm"),Ngay_Tra:d(r.returned_date).format("DD/MM/YYYY HH:mm"),Tong_Mau:parseInt(r.total_sample),Tong_Test:r.total_tests,Tong_Ket_Qua:r.total_results,Tong_Lab_Validation:r.total_validation,Moi_Lien_He:"",Doanh_Thu:""})}}catch(o){i.e(o)}finally{i.f()}t._excelService.exportAsExcelFile(c,"LabReport-"+d(new Date).format("YYYY-MM-DD"))})}},{key:"orgValueChange1",value:function(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e){this.entity=e}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_complete_en:y.a.are_u_sure_complete,text:this.entity.request_no,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(n){n.value?e._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)}):(e.isSave=!1,e.socket.emit("refresh",{}))})}},{key:"_openResults",value:function(e,t){console.log(t),this._titleRequest=t.request_no,this._idRequest=t.id,this.loadOrderDetailDoneById(t.id),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"loadOrderDetailDoneById",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/labresult/getlist-result-byrequestId",a).subscribe(function(a){console.log("ABC",a);var c={};c.id=t,n._dataService.post("/lab/labcompleted",c).subscribe(function(t){console.log("KQ0",t);var c,i=[],r=e(t.data);try{var o=function(){var e=c.value,t=a.data.filter(function(t){return t.sample_id==e.sample_id&&t.parameter_id==e.parameter_id&&t.category_id==e.category_id});0==t.length?(e.flagEvicted=!1,i.push(e)):2==t[0].is_active&&0==t.filter(function(e){return 2!=e.is_active&&4!=e.is_active}).length&&(e.flagEvicted=!0,i.push(e))};for(r.s();!(c=r.n()).done;)o()}catch(l){r.e(l)}finally{r.f()}console.log("KQ",i),n.resultlist=i})})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this.resultlist.forEach(function(e){return t.exportList.push(e.sample_id+","+e.parameter_id+","+e.category_id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!=t})}},{key:"_switch",value:function(t,n){if(1==t)if(0==n.length){var a,c=[],i=e(this.resultlist);try{for(i.s();!(a=i.n()).done;){var r=a.value,o="";o+=r.sample_id+","+r.parameter_id+","+r.category_id,c.push(o)}}catch(g){i.e(g)}finally{i.f()}this._processByIds(c,"draft")}else this._processByIds(n,"draft");if(2==t)if(0==n.length){var l,s=[],d=e(this.resultlist);try{for(d.s();!(l=d.n()).done;){var u=l.value,h="";h+=u.sample_id+","+u.parameter_id+","+u.category_id,s.push(h)}}catch(g){d.e(g)}finally{d.f()}this._processByIds(s,"official")}else this._processByIds(n,"official")}},{key:"_processByRequestId",value:function(e,t){var n=this,a={};a.id=e,a.state=t,a.userId=this.user.id,console.log(a),this._dataService.post("/labresult/processAll",a).subscribe(function(e){console.log(e),"ok"==e.result&&n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK")})}},{key:"_processByIds",value:function(t,n){var a=this,c={};c.state=n,c.userId=this.user.id;var i,r=[],o=e(t);try{for(o.s();!(i=o.n()).done;){var l=i.value,s={},d=l.split(",");s.sample_id=d[0],s.parameter_id=d[1],s.category_id=d[2],r.push(s)}}catch(u){o.e(u)}finally{o.f()}c.getlist=r,console.log("Process",c),this._dataService.post("/labresult/processByIds",c).subscribe(function(e){console.log("actions",e),"ok"==e.result&&a._notifyService.showSuccess("en"==a.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),a.exportList=[],a.loadOrderDetailDoneById(a._idRequest)})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}()).\u0275fac=function(e){return new(e||Xe)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(C.s))},Xe.\u0275cmp=x.Vb({type:Xe,selectors:[["app-req-report"]],decls:88,vars:85,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["routerLink","/request/lab-results/list",1,"btn","btn-sm","btn-warning"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],["content",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","9",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",3,"click"],[3,"ngClass"],[3,"routerLink",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],[3,"routerLink"],[1,"badge","badge-success"],[1,"badge","badge-warning"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"disabled","click"],[1,"btn","btn-sm","btn-success","mr-sm-2",3,"disabled","click"],[2,"text-align","center","width","40px"],["type","checkbox","name","checkAll",1,"form-control",3,"disabled","checked","change"],["type","checkbox",1,"form-control",3,"name","checked","change"],[3,"innerHTML"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.bd(12,Le,4,3,"button",10),x.hc(13,"button",11),x.dd(14),x.wc(15,"translate"),x.wc(16,"translate"),x.gc(),x.bd(17,qe,1,0,"img",12),x.gc(),x.gc(),x.hc(18,"div",13),x.hc(19,"div",14),x.hc(20,"select",15),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(21,"option",16),x.dd(22,"#10"),x.gc(),x.hc(23,"option",17),x.dd(24,"#25"),x.gc(),x.hc(25,"option",18),x.dd(26,"#50"),x.gc(),x.hc(27,"option",19),x.dd(28,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(29,"div",20),x.hc(30,"div",21),x.hc(31,"div",22),x.hc(32,"div",23),x.hc(33,"pagination",24),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(34,"div",25),x.hc(35,"a",26),x.dd(36),x.wc(37,"translate"),x.wc(38,"translate"),x.wc(39,"translate"),x.wc(40,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(41,"div",21),x.hc(42,"div",27),x.hc(43,"table",28),x.hc(44,"thead",29),x.hc(45,"tr"),x.hc(46,"th",30),x.dd(47,"#"),x.gc(),x.hc(48,"th",31),x.dd(49),x.wc(50,"translate"),x.gc(),x.hc(51,"th",31),x.dd(52),x.wc(53,"translate"),x.gc(),x.hc(54,"th",31),x.dd(55),x.wc(56,"translate"),x.gc(),x.hc(57,"th",31),x.dd(58),x.wc(59,"translate"),x.gc(),x.hc(60,"th",31),x.dd(61),x.wc(62,"translate"),x.gc(),x.hc(63,"th",31),x.dd(64),x.wc(65,"translate"),x.gc(),x.hc(66,"th",31),x.dd(67),x.wc(68,"translate"),x.gc(),x.hc(69,"th",31),x.dd(70),x.wc(71,"translate"),x.gc(),x.gc(),x.gc(),x.hc(72,"tbody"),x.bd(73,ze,6,3,"ng-container",32),x.bd(74,$e,2,1,"ng-container",32),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(75,"div",21),x.hc(76,"div",22),x.hc(77,"div",23),x.hc(78,"pagination",24),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(79,"div",25),x.hc(80,"a",26),x.dd(81),x.wc(82,"translate"),x.wc(83,"translate"),x.wc(84,"translate"),x.wc(85,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(86,je,41,30,"ng-template",null,33,x.cd)),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,45,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(83,We)),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(84,We)),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-REPORT","report")),x.Nb(2),x.gd(" ",x.xc(15,47,"Print")," ",x.xc(16,49,"Report")," "),x.Nb(3),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(37,51,"Total of records"),": ",t.totalRow," - ",x.xc(38,53,"Page")," ",t.pageIndex," ",x.xc(39,55,"of")," ",t.totalPage," ",x.xc(40,57,"page"),""),x.Nb(13),x.fd(" ",x.xc(50,59,"Order code")," "),x.Nb(3),x.fd(" ",x.xc(53,61,"Received date")," "),x.Nb(3),x.ed(x.xc(56,63,"Returned date")),x.Nb(3),x.fd(" ",x.xc(59,65,"Total of samples")," "),x.Nb(3),x.ed(x.xc(62,67,"Total of tests")),x.Nb(3),x.ed(x.xc(65,69,"Total of results")),x.Nb(3),x.fd(" ",x.xc(68,71,"Total of validation labs")," "),x.Nb(3),x.fd(" ",x.xc(71,73,"Status")," "),x.Nb(3),x.Dc("ngIf",0==t._preparationlist.length),x.Nb(1),x.Dc("ngIf",t._preparationlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(82,75,"Total of records"),": ",t.totalRow," - ",x.xc(83,77,"Page")," ",t.pageIndex," ",x.xc(84,79,"of")," ",t.totalPage," ",x.xc(85,81,"page"),""))},directives:[o.c,o.n,o.q,k.b,k.a,r.q,l.e,o.x,o.r,o.A,T.a,r.p,r.o,l.g,o.z,o.o,o.p],pipes:[P.c,r.f],styles:[""]}),Xe),Ze=i("EUZL"),et=i("REEf");function tt(e,t){if(1&e&&(x.hc(0,"option",47),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function nt(e,t){if(1&e&&(x.hc(0,"option",47),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.pl_name_e:n.pl_name_l," ")}}function at(e,t){if(1&e){var n=x.ic();x.hc(0,"button",48),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e._preparationlist)}),x.cc(1,"i",49),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function ct(e,t){if(1&e){var n=x.ic();x.hc(0,"button",50),x.rc("click",function(){return x.Uc(n),x.vc()._exportAllForImport()}),x.cc(1,"i",49),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Download file")," "))}function it(e,t){if(1&e){var n=x.ic();x.hc(0,"button",51),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(142);return e._importFile(t)}),x.cc(1,"i",52),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Import")," "))}function rt(e,t){1&e&&x.cc(0,"img",53)}function ot(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",54),x.hc(3,"h3",55),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function lt(e,t){1&e&&x.cc(0,"i",72)}function st(e,t){1&e&&x.cc(0,"i",73)}function dt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"button",69),x.rc("click",function(){return x.Uc(n),x.vc(3)._switchFlagEdit()}),x.wc(2,"translate"),x.bd(3,lt,1,0,"i",70),x.bd(4,st,1,0,"i",71),x.gc(),x.ec()}if(2&e){var a=x.vc().$implicit,c=x.vc(2);x.Nb(1),x.Dc("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!c._authenService.hasPermission("REQ-RES","update"))("title",x.xc(2,5,a.flag?"Cancel":"Edit")),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag)}}function ut(e,t){if(1&e){var n=x.ic();x.hc(0,"button",74),x.rc("click",function(){x.Uc(n);var e=x.vc(3);return e._updateStatusv2(e._preparationlist)}),x.wc(1,"translate"),x.cc(2,"i",75),x.gc()}2&e&&x.Dc("title",x.xc(1,1,"Save"))}function ht(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.note_asm,"")}}function gt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",76),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.note_asm=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","noteasm",c+1,""),x.Dc("ngModel",i.note_asm)}}function mt(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.unit,"")}}function _t(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",76),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.unit=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","unit",c+1,""),x.Dc("ngModel",i.unit)}}function pt(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.lod,"")}}function ft(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",76),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.lod=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","lod",c+1,""),x.Dc("ngModel",i.lod)}}function bt(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.loq,"")}}function vt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",76),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.loq=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","loq",c+1,""),x.Dc("ngModel",i.loq)}}function yt(e,t){if(1&e&&(x.fc(0),x.cc(1,"span",77),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.Dc("innerHTML",n.result_record,x.Vc)}}function xt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",78),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.result_record=e}),x.wc(2,"translate"),x.gc(),x.hc(3,"input",78),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.result_record_e=e}),x.wc(4,"translate"),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","result_record",c+1,""),x.Dc("ngModel",i.result_record)("placeholder",x.xc(2,6,"Vietnamese")),x.Nb(2),x.Fc("name","result_recorde",c+1,""),x.Dc("ngModel",i.result_record_e)("placeholder",x.xc(4,8,"English"))}}function St(e,t){1&e&&(x.hc(0,"span",79),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"None")))}function wt(e,t){1&e&&(x.hc(0,"span",80),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Preparation")))}function Nt(e,t){1&e&&(x.hc(0,"span",81),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Technical validation")))}function Dt(e,t){1&e&&(x.hc(0,"span",82),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Validation")))}function Mt(e,t){1&e&&(x.hc(0,"span",83),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Done")))}function Ct(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"tr"),x.hc(2,"th",57),x.dd(3),x.gc(),x.hc(4,"td",58),x.bd(5,dt,5,7,"ng-container",45),x.bd(6,ut,3,3,"button",59),x.gc(),x.hc(7,"td"),x.dd(8),x.gc(),x.hc(9,"td"),x.dd(10),x.gc(),x.hc(11,"td"),x.dd(12),x.gc(),x.hc(13,"td"),x.dd(14),x.gc(),x.hc(15,"td"),x.dd(16),x.gc(),x.hc(17,"td"),x.dd(18),x.gc(),x.hc(19,"td"),x.dd(20),x.gc(),x.hc(21,"td"),x.bd(22,ht,2,1,"ng-container",45),x.bd(23,gt,2,2,"ng-container",45),x.gc(),x.hc(24,"td"),x.bd(25,mt,2,1,"ng-container",45),x.bd(26,_t,2,2,"ng-container",45),x.gc(),x.hc(27,"td"),x.bd(28,pt,2,1,"ng-container",45),x.bd(29,ft,2,2,"ng-container",45),x.gc(),x.hc(30,"td"),x.bd(31,bt,2,1,"ng-container",45),x.bd(32,vt,2,2,"ng-container",45),x.gc(),x.hc(33,"td"),x.bd(34,yt,2,1,"ng-container",45),x.bd(35,xt,5,10,"ng-container",45),x.gc(),x.hc(36,"td",60),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2);return e.flag?a._updateStatusOnly(e,e.status):null}),x.bd(37,St,3,3,"span",61),x.bd(38,wt,3,3,"span",62),x.bd(39,Nt,3,3,"span",63),x.bd(40,Dt,3,3,"span",64),x.bd(41,Mt,3,3,"span",65),x.gc(),x.hc(42,"td",66),x.hc(43,"input",67),x.rc("ngModelChange",function(e){return t.$implicit.hide=e}),x.gc(),x.gc(),x.hc(44,"td"),x.dd(45),x.wc(46,"date"),x.gc(),x.hc(47,"td",68),x.dd(48),x.wc(49,"date"),x.gc(),x.gc(),x.ec()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.Dc("ngClass",4==a.status?"":a.remaining_days<=1?"jbadge-danger text-white":a.remaining_days>1&&a.remaining_days<=3?"jbadge-warning text-white":""),x.Nb(1),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.Dc("ngIf",1==a.status),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.ed(a.inner_code),x.Nb(2),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.para_name_e:a.para_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.nature_name_e:a.nature_name_l," "),x.Nb(2),x.ed(a.tat),x.Nb(2),x.ed(a.note_lab),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",0==a.status),x.Nb(1),x.Dc("ngIf",1==a.status),x.Nb(1),x.Dc("ngIf",2==a.status),x.Nb(1),x.Dc("ngIf",3==a.status),x.Nb(1),x.Dc("ngIf",4==a.status),x.Nb(2),x.Fc("name","hid",c+1,""),x.Dc("ngModel",a.hide)("disabled",!a.flag),x.Nb(2),x.fd(" ",x.yc(46,32,a.received_date,"dd/MM/yyyy HH:mm")," "),x.Nb(2),x.Dc("ngClass",4==a.status?"":a.remaining_days<=1?"jbadge-danger text-white":a.remaining_days>1&&a.remaining_days<=3?"jbadge-warning text-white":""),x.Nb(1),x.fd(" ",x.yc(49,35,a.returned_date,"dd/MM/yyyy HH:mm")," ")}}function kt(e,t){if(1&e&&(x.fc(0),x.bd(1,Ct,50,38,"ng-container",56),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._preparationlist)}}function Tt(e,t){if(1&e){var n=x.ic();x.hc(0,"input",94,95),x.rc("change",function(e){return x.Uc(n),x.vc(2).onFileChange(e)}),x.gc()}}function It(e,t){1&e&&(x.hc(0,"h4",55),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd("",x.xc(2,1,"Processing"),"..."))}function Pt(e,t){if(1&e){var n=x.ic();x.hc(0,"form",84),x.hc(1,"div",85),x.hc(2,"h4",86),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",87),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",88),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",89),x.hc(9,"div",90),x.hc(10,"div",91),x.hc(11,"div",58),x.bd(12,Tt,2,0,"input",92),x.bd(13,It,3,3,"h4",93),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.fd(" ",x.xc(4,3,"Import")," "),x.Nb(9),x.Dc("ngIf",!a._isLoadingImport),x.Nb(1),x.Dc("ngIf",a._isLoadingImport)}}var Rt,At=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},Et=((Rt=function(){function t(e,a,c,i,r,o,l,s){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=r,this._excelService=o,this._numberFormat=l,this.modalService=s,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=1,this.entity={},this._depts="",this._isLoadingImport=!1,!1!==e.checkAccess("REQ-RES")&&!1!==e.hasPermission("REQ-RES","read")||this._route.navigate(["/error/404"]),this.socket=h()(g.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL()}},{key:"loadData",value:function(){var t=this,n={};n.filter=this._keyword,n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.department_id=this.department_id,n.family_id=this.testcsp_id,n.flag_status=this._status,n.page=this.pageIndex,n.limit=this.pageSize,n.dept_ids=this.user.department,console.log("log",n),this._dataService.post("/lab/getlistresultlabsbydepts",n).subscribe(function(n){console.log("Origin",n);var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({code:r.code,code_father:r.code_father,company_code:r.company_code,company_name_e:r.company_name_e,company_name_l:r.company_name_l,contact_name:r.contact_name,customer_id:r.customer_id,email:r.email,employee_nr:r.employee_nr,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,mark:r.mark,note_asm:r.note_asm,para_name_e:r.para_name_e,para_name_l:r.para_name_l,nature_name_e:r.nature_name_e,nature_name_l:r.nature_name_l,parameter_id:r.parameter_id,phone:r.phone,received_date:r.received_date,request_no:r.request_no,result_record:r.result_record,returned_date:r.returned_date,sale_man:r.sale_man,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,flag:!1,note_lab:r.note_lab,status:r.status,note:r.note,category_name_e:r.category_name_e,category_name_l:r.category_name_l,tat:r.tat,dept_name_e:r.dept_name_e,dept_name_l:r.dept_name_l,pl_name_e:r.pl_name_e,pl_name_l:r.pl_name_l,hide:r.hide,remaining_days:r.remaining_days,result_record_e:r.result_record_e})}}catch(o){i.e(o)}finally{i.f()}t._preparationlist=c,t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"_exportAllForImport",value:function(){var t=this,n={};n.domain=this.user.short_code,n.flag_status=this._status,n.dept_ids=this.user.department,this._dataService.post("/lab/exportresultlabsbydepts",n).subscribe(function(n){console.log("Origin",n);var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({inner_code:r.inner_code,code:r.code,note_asm:null==r.note_asm?"":r.note_asm,unit:null==r.unit?"":r.unit,lod:null==r.lod?"":r.lod,loq:null==r.loq?"":r.loq,result_record:null==r.result_record?"":r.result_record,result_record_e:null==r.result_record_e?"":r.result_record_e,status:r.status,hide:null!=r.hide&&r.hide,sample_id:r.sample_id,parameter_id:r.parameter_id,category_id:r.category_id})}}catch(o){i.e(o)}finally{i.f()}t._excelService.exportAsExcelFile(c,"Result-"+d(new Date).format("YYYY-MM-DD")),t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_EXPORT_EN+" "+c.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+c.length+" "+y.a.record,"OK")})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.loadData()}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.loadData()}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyPL",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",t).subscribe(function(t){e._pllist=t.data})}},{key:"_exportAll",value:function(t){var n,a=[],c=e(t);try{for(c.s();!(n=c.n()).done;){var i=n.value,r="";4==i.status&&(r="en"==this.user.lang?y.a.s_done_en:y.a.s_done),3==i.status&&(r="en"==this.user.lang?y.a.s_validate_en:y.a.s_validate),2==i.status&&(r="en"==this.user.lang?y.a.s_techvalidate_en:y.a.s_techvalidate),1==i.status&&(r="en"==this.user.lang?y.a.s_prepare_en:y.a.s_prepare),0==i.status&&(r="en"==this.user.lang?y.a.s_none_en:y.a.s_none);var o=new Date(i.received_date).getTime()+864e5*i.tat,l="en"==this.user.lang?i.pl_name_e:i.pl_name_l;a.push({"Inner code":i.inner_code,Code:i.code,"Internal test":i.specification_name_l,Parameter:i.para_name_l,"Sample matrix":i.category_name_l,"Priority TAT":i.tat,"Note Lab":null==i.note_lab?"":i.note_lab,"Note ASM":null==i.note_asm?"":i.note_asm,Unit:null==i.unit?"":i.unit,LOD:null==i.lod?"":i.lod,LOQ:null==i.loq?"":i.loq,Result:null==i.result_record?"":i.result_record,Status:r,"Received Date":d(new Date(i.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(o)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?i.dept_name_e:i.dept_name_l,PL:null==l?"":l,"Sample name":i.sample_name})}}catch(s){c.e(s)}finally{c.f()}this._excelService.exportAsExcelFile(a,"Result-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+t.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.length+" "+y.a.record,"OK")}},{key:"orgValueChange1",value:function(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_switchFlagEdit",value:function(){var t,n=e(this._preparationlist);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.flag=!a.flag,a.flag||(a.status=1)}}catch(c){n.e(c)}finally{n.f()}}},{key:"_updateStatusv2",value:function(e){var t=this;this._dataService.post("/lab/updateResultv2",{getlist:e,ipaddress:this.user.ipaddress,user_id:this.user.id,short_code:this.user.short_code}).subscribe(function(e){t.loadData()})}},{key:"_updateStatusOnly",value:function(e,t){t=1==t?2:1,console.log(t),this._preparationlist.filter(function(t){return t.sample_id==e.sample_id&&t.parameter_id==e.parameter_id&&t.category_id==e.category_id})[0].status=t}},{key:"_updateStatus",value:function(e,t){var n=this;2==t?(e.status=t,v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_switch_en:y.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData()}):n.loadData()})):(console.log("Update",e),this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData()}))}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.loadData(),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)})}},{key:"_importFile",value:function(e){this.modalService.open(e,{size:"md",centered:!0})}},{key:"onFileChange",value:function(e){var t=this,n=null,a=null,c=new FileReader,i=e.target.files[0];if(void 0===i||void 0===i.name)e.target.value=null,this._notifyService.showError("en"==this.user.lang?y.a.recheck_file_en:y.a.recheck_file,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);else{var r=i.name.split(".").pop();"xls"===r||"xlsx"===r?(c.onload=function(i){n=Ze.read(c.result,{type:"binary"}),a=n.SheetNames.reduce(function(e,t){return e[t]=Ze.utils.sheet_to_json(n.Sheets[t]),e},{}),e.target.value=null,t.setUpload(a.data)},c.readAsBinaryString(i)):(this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==this.user.lang?y.a.error_title_en:y.a.error_title),e.target.value=null)}}},{key:"setUpload",value:function(e){var t=this,n={};n.getlist=e,n.short_code=this.user.short_code,n.ipaddress=this.user.ipaddress,n.userid=this.user.id,this._isLoadingImport=!0,this._dataService.post("/lab/updateResultForImportv2",n).subscribe(function(e){console.log(e),"ok"==e.result&&(e.data_error.length>0&&t._excelService.exportAsExcelFile(e.data_error,"ErrorTestFamilyPL-"+d(new Date).format("YYYY-MM-DD")),e.count>0&&t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK")),t._isLoadingImport=!1,t.loadData(),t.modalService.dismissAll()},function(){return t._isLoadingImport=!1})}}]),t}()).\u0275fac=function(e){return new(e||Rt)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(et.a),x.bc(C.s))},Rt.\u0275cmp=x.Vb({type:Rt,selectors:[["app-req-result"]],decls:143,vars:140,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],["contentImport",""],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-cloud-upload"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","18",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row",3,"ngClass"],[2,"text-align","center"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"text-truncate"],["type","checkbox",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],[3,"ngClass"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],["type","text",1,"form-control",2,"width","250px",3,"name","ngModel","placeholder","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[1,"form","theme-form"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],["name","fileUpload","type","file","id","upload","class","form-control",3,"change",4,"ngIf"],["class","text-danger",4,"ngIf"],["name","fileUpload","type","file","id","upload",1,"form-control",3,"change"],["fileUpload",""]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.hc(12,"select",10),x.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),x.hc(13,"option",11),x.dd(14),x.wc(15,"translate"),x.wc(16,"translate"),x.gc(),x.bd(17,tt,2,2,"option",12),x.gc(),x.hc(18,"select",13),x.rc("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),x.hc(19,"option",11),x.dd(20),x.wc(21,"translate"),x.gc(),x.bd(22,nt,2,2,"option",12),x.gc(),x.hc(23,"select",14),x.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.hc(24,"option",15),x.dd(25),x.wc(26,"translate"),x.gc(),x.hc(27,"option",16),x.dd(28),x.wc(29,"translate"),x.gc(),x.hc(30,"option",17),x.dd(31),x.wc(32,"translate"),x.gc(),x.hc(33,"option",18),x.dd(34),x.wc(35,"translate"),x.gc(),x.hc(36,"option",19),x.dd(37),x.wc(38,"translate"),x.gc(),x.hc(39,"option",20),x.dd(40),x.wc(41,"translate"),x.gc(),x.gc(),x.bd(42,at,4,3,"button",21),x.bd(43,ct,4,3,"button",22),x.bd(44,it,4,3,"button",23),x.bd(45,rt,1,0,"img",24),x.gc(),x.gc(),x.hc(46,"div",25),x.hc(47,"div",26),x.hc(48,"select",27),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(49,"option",28),x.dd(50,"#10"),x.gc(),x.hc(51,"option",29),x.dd(52,"#25"),x.gc(),x.hc(53,"option",30),x.dd(54,"#50"),x.gc(),x.hc(55,"option",31),x.dd(56,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(57,"div",32),x.hc(58,"div",33),x.hc(59,"div",34),x.hc(60,"div",35),x.hc(61,"pagination",36),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(62,"div",37),x.hc(63,"a",38),x.dd(64),x.wc(65,"translate"),x.wc(66,"translate"),x.wc(67,"translate"),x.wc(68,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(69,"div",33),x.hc(70,"div",39),x.hc(71,"table",40),x.hc(72,"thead",41),x.hc(73,"tr"),x.hc(74,"th",42),x.dd(75,"#"),x.gc(),x.hc(76,"th",43),x.dd(77),x.wc(78,"translate"),x.gc(),x.hc(79,"th",44),x.dd(80),x.wc(81,"translate"),x.gc(),x.hc(82,"th",44),x.dd(83),x.wc(84,"translate"),x.gc(),x.hc(85,"th",44),x.dd(86),x.wc(87,"translate"),x.gc(),x.hc(88,"th",44),x.dd(89),x.wc(90,"translate"),x.gc(),x.hc(91,"th",44),x.dd(92),x.wc(93,"translate"),x.gc(),x.hc(94,"th",44),x.dd(95),x.wc(96,"translate"),x.gc(),x.hc(97,"th",44),x.dd(98),x.wc(99,"translate"),x.gc(),x.hc(100,"th",44),x.dd(101),x.wc(102,"translate"),x.gc(),x.hc(103,"th",44),x.dd(104),x.wc(105,"translate"),x.gc(),x.hc(106,"th",44),x.dd(107),x.wc(108,"translate"),x.gc(),x.hc(109,"th",44),x.dd(110),x.wc(111,"translate"),x.gc(),x.hc(112,"th",44),x.dd(113),x.wc(114,"translate"),x.gc(),x.hc(115,"th",44),x.dd(116),x.wc(117,"translate"),x.gc(),x.hc(118,"th",44),x.dd(119),x.wc(120,"translate"),x.gc(),x.hc(121,"th",44),x.dd(122),x.wc(123,"translate"),x.gc(),x.hc(124,"th",44),x.dd(125),x.wc(126,"translate"),x.gc(),x.gc(),x.gc(),x.hc(127,"tbody"),x.bd(128,ot,6,3,"ng-container",45),x.bd(129,kt,2,1,"ng-container",45),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(130,"div",33),x.hc(131,"div",34),x.hc(132,"div",35),x.hc(133,"pagination",36),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(134,"div",37),x.hc(135,"a",38),x.dd(136),x.wc(137,"translate"),x.wc(138,"translate"),x.wc(139,"translate"),x.wc(140,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(141,Pt,14,5,"ng-template",null,46,x.cd)),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,68,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(138,At)),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(139,At)),x.Nb(1),x.Dc("ngModel",t.department_id),x.Nb(2),x.gd(" ",x.xc(15,70,"All")," ",x.xc(16,72,"Department")," "),x.Nb(3),x.Dc("ngForOf",t._deptlist),x.Nb(1),x.Dc("ngModel",t.testcsp_id),x.Nb(2),x.fd("",x.xc(21,74,"All")," PL"),x.Nb(2),x.Dc("ngForOf",t._pllist),x.Nb(1),x.Dc("ngModel",t._status),x.Nb(2),x.fd(" ",x.xc(26,76,"All")," "),x.Nb(3),x.fd(" ",x.xc(29,78,"None")," "),x.Nb(3),x.fd(" ",x.xc(32,80,"Preparation")," "),x.Nb(3),x.fd(" ",x.xc(35,82,"Technical validation")," "),x.Nb(3),x.fd(" ",x.xc(38,84,"Validation")," "),x.Nb(3),x.fd(" ",x.xc(41,86,"Done")," "),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-RES","report")),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-RES","update")),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-RES","update")),x.Nb(1),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(65,88,"Total of records"),": ",t.totalRow," - ",x.xc(66,90,"Page")," ",t.pageIndex," ",x.xc(67,92,"of")," ",t.totalPage," ",x.xc(68,94,"page"),""),x.Nb(13),x.ed(x.xc(78,96,"Actions")),x.Nb(3),x.fd(" ",x.xc(81,98,"Inner code")," "),x.Nb(3),x.fd(" ",x.xc(84,100,"Code")," "),x.Nb(3),x.ed(x.xc(87,102,"Internal testing")),x.Nb(3),x.ed(x.xc(90,104,"Parameter name")),x.Nb(3),x.ed(x.xc(93,106,"Sample nature")),x.Nb(3),x.ed(x.xc(96,108,"Priority")),x.Nb(3),x.ed(x.xc(99,110,"Note lab")),x.Nb(3),x.ed(x.xc(102,112,"Note asm")),x.Nb(3),x.ed(x.xc(105,114,"Unit")),x.Nb(3),x.ed(x.xc(108,116,"LOD")),x.Nb(3),x.ed(x.xc(111,118,"LOQ")),x.Nb(3),x.ed(x.xc(114,120,"Results")),x.Nb(3),x.ed(x.xc(117,122,"Status")),x.Nb(3),x.ed(x.xc(120,124,"Hidden")),x.Nb(3),x.ed(x.xc(123,126,"Received date")),x.Nb(3),x.ed(x.xc(126,128,"Returned date")),x.Nb(3),x.Dc("ngIf",0==t._preparationlist.length),x.Nb(1),x.Dc("ngIf",t._preparationlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(137,130,"Total of records"),": ",t.totalRow," - ",x.xc(138,132,"Page")," ",t.pageIndex," ",x.xc(139,134,"of")," ",t.totalPage," ",x.xc(140,136,"page"),""))},directives:[o.c,o.n,o.q,k.b,k.a,o.x,o.r,o.A,r.p,r.q,T.a,r.o,o.b,o.z,o.o,o.p],pipes:[P.c,r.f],styles:[""]}),Rt);function Ut(e,t){if(1&e&&(x.hc(0,"option",42),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function Ft(e,t){if(1&e){var n=x.ic();x.hc(0,"button",43),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e._preparationlist)}),x.cc(1,"i",44),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function Ot(e,t){1&e&&x.cc(0,"img",45)}function Yt(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",46),x.hc(3,"h3",47),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function Lt(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.note_asm,"")}}function qt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",61),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.note_asm=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","note_asm",c+1,""),x.Dc("ngModel",i.note_asm)}}function zt(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.lod,"")}}function Gt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",61),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.lod=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","lod",c+1,""),x.Dc("ngModel",i.lod)}}function Vt(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.loq,"")}}function Bt(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",61),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.loq=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","loq",c+1,""),x.Dc("ngModel",i.loq)}}function Qt(e,t){if(1&e&&(x.fc(0),x.cc(1,"span",62),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.Dc("innerHTML",n.result_record,x.Vc)}}function Ht(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",61),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.result_record=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","result_record",c+1,""),x.Dc("ngModel",i.result_record)}}function $t(e,t){1&e&&(x.hc(0,"span",63),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"None")))}function Kt(e,t){1&e&&(x.hc(0,"span",64),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Preparation")))}function jt(e,t){1&e&&(x.hc(0,"span",65),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Technical validation")))}function Xt(e,t){1&e&&(x.hc(0,"span",66),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Validation")))}function Wt(e,t){1&e&&(x.hc(0,"span",67),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Done")))}function Jt(e,t){if(1&e){var n=x.ic();x.hc(0,"a",68),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._updateStatus(e,1)}),x.cc(1,"i",69),x.gc()}}function Zt(e,t){if(1&e){var n=x.ic();x.hc(0,"a",70),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._updateStatus(e,4)}),x.cc(1,"i",71),x.gc()}}function en(e,t){if(1&e){var n=x.ic();x.hc(0,"a",72),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._updateStatus(e,2)}),x.cc(1,"i",73),x.gc()}}function tn(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",49),x.dd(2),x.gc(),x.hc(3,"td"),x.hc(4,"a",50),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(2)._updateStatusAll(e,3==e.status?4:3)}),x.dd(5),x.gc(),x.gc(),x.hc(6,"td"),x.dd(7),x.gc(),x.hc(8,"td"),x.dd(9),x.gc(),x.hc(10,"td"),x.dd(11),x.gc(),x.hc(12,"td"),x.dd(13),x.gc(),x.hc(14,"td"),x.dd(15),x.gc(),x.hc(16,"td"),x.dd(17),x.gc(),x.hc(18,"td"),x.bd(19,Lt,2,1,"ng-container",41),x.bd(20,qt,2,2,"ng-container",41),x.gc(),x.hc(21,"td"),x.dd(22),x.gc(),x.hc(23,"td"),x.bd(24,zt,2,1,"ng-container",41),x.bd(25,Gt,2,2,"ng-container",41),x.gc(),x.hc(26,"td"),x.bd(27,Vt,2,1,"ng-container",41),x.bd(28,Bt,2,2,"ng-container",41),x.gc(),x.hc(29,"td"),x.bd(30,Qt,2,1,"ng-container",41),x.bd(31,Ht,2,2,"ng-container",41),x.gc(),x.hc(32,"td"),x.hc(33,"a",51),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2);return 2==e.status?a._updateStatus(e,3):null}),x.bd(34,$t,3,3,"span",52),x.bd(35,Kt,3,3,"span",53),x.bd(36,jt,3,3,"span",54),x.bd(37,Xt,3,3,"span",55),x.bd(38,Wt,3,3,"span",56),x.gc(),x.bd(39,Jt,2,0,"a",57),x.gc(),x.hc(40,"td",58),x.bd(41,Zt,2,0,"a",59),x.bd(42,en,2,0,"a",60),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(3),x.ed(a.inner_code),x.Nb(2),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.para_name_e:a.para_name_l," "),x.Nb(2),x.ed(a.tat),x.Nb(2),x.ed(a.note),x.Nb(2),x.ed(a.note_lab),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.ed(a.unit),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(3),x.Dc("ngIf",0==a.status),x.Nb(1),x.Dc("ngIf",1==a.status),x.Nb(1),x.Dc("ngIf",2==a.status),x.Nb(1),x.Dc("ngIf",3==a.status),x.Nb(1),x.Dc("ngIf",4==a.status),x.Nb(1),x.Dc("ngIf",2==a.status),x.Nb(2),x.Dc("ngIf",3==a.status),x.Nb(1),x.Dc("ngIf",3==a.status)}}function nn(e,t){if(1&e&&(x.fc(0),x.bd(1,tn,43,25,"tr",48),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._preparationlist)}}var an,cn=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},rn=((an=function(){function t(e,a,c,i,r,o,l){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=r,this._excelService=o,this.modalService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._pllist=[],this._status=2,this.entity={},!1!==e.checkAccess("RES-VALID")&&!1!==e.hasPermission("RES-VALID","read")||this._route.navigate(["/error/404"]),this.socket=h()(g.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyPL(),this.socket.on("refreshPage",function(t){e.loadData()})}},{key:"loadData",value:function(){var t=this,n={};n.filter=this._keyword,n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.department_id=this.department_id,n.family_id=this.testcsp_id,n.flag_status=this._status,n.page=this.pageIndex,n.limit=this.pageSize,n.dept_ids=this.user.department,this._dataService.post("/lab/getlistresultlabs",n).subscribe(function(n){console.log(n);var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({code:r.code,code_father:r.code_father,company_code:r.company_code,company_name_e:r.company_name_e,company_name_l:r.company_name_l,contact_name:r.contact_name,customer_id:r.customer_id,email:r.email,employee_nr:r.employee_nr,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,tat:r.tat,mark:r.mark,note_asm:r.note_asm,para_name_e:r.para_name_e,para_name_l:r.para_name_l,parameter_id:r.parameter_id,phone:r.phone,received_date:r.received_date,request_no:r.request_no,result_record:r.result_record,returned_date:r.returned_date,sale_man:r.sale_man,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,flag:!1,note_lab:r.note_lab,status:r.status,note:r.note,category_name_e:r.category_name_e,category_name_l:r.category_name_l,dept_name_e:r.dept_name_e,dept_name_l:r.dept_name_l})}}catch(o){i.e(o)}finally{i.f()}t._preparationlist=c,t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyPL",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",t).subscribe(function(t){e._pllist=t.data})}},{key:"_exportAll",value:function(t){var n,a=[],c=e(t);try{for(c.s();!(n=c.n()).done;){var i=n.value,r="";4==i.status&&(r="en"==this.user.lang?y.a.s_done_en:y.a.s_done),3==i.status&&(r="en"==this.user.lang?y.a.s_validate_en:y.a.s_validate),2==i.status&&(r="en"==this.user.lang?y.a.s_techvalidate_en:y.a.s_techvalidate),1==i.status&&(r="en"==this.user.lang?y.a.s_prepare_en:y.a.s_prepare),0==i.status&&(r="en"==this.user.lang?y.a.s_none_en:y.a.s_none);var o=new Date(i.received_date).getTime()+864e5*i.tat;a.push({"Inner code":i.inner_code,Code:i.code,"Internal test":i.specification_name_l,Parameter:i.para_name_l,"Sample matrix":i.category_name_l,"Priority TAT":i.tat,Note:null==i.note?"":i.note,"Note Lab":null==i.note_lab?"":i.note_lab,"Note ASM":null==i.note_asm?"":i.note_asm,Unit:null==i.unit?"":i.unit,LOD:null==i.lod?"":i.lod,LOQ:null==i.loq?"":i.loq,Result:null==i.result_record?"":i.result_record,Status:r,"Received Date":d(new Date(i.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(o)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?i.dept_name_e:i.dept_name_l})}}catch(l){c.e(l)}finally{c.f()}this._excelService.exportAsExcelFile(a,"LabValidation-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+t.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.length+" "+y.a.record,"OK")}},{key:"orgValueChange1",value:function(e){console.log(e),null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){console.log(e,this._dt1),null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.socket.emit("refresh",{})):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e,t){var n=this;3==t||4==t?(e.status=t,v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_switch_en:y.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.socket.emit("refresh",{})}):n.socket.emit("refresh",{})})):(e.status=t,this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.socket.emit("refresh",{})}))}},{key:"_updateStatusAll",value:function(t,n){var a,c=this,i=this._preparationlist.filter(function(e){return e.sample_id==t.sample_id}),r=e(i);try{for(r.s();!(a=r.n()).done;)a.value.status=n}catch(o){r.e(o)}finally{r.f()}v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_switch_en:y.a.are_u_sure_switch,text:"en"==this.user.lang?"Total: "+i.length:"T\u1ed5ng s\u1ed1: "+i.length,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(e){e.value?c._dataService.post("/lab/updateValidationv2BySampleId",{getlist:i,user_id:c.user.id,ipaddress:c.user.ipaddress,short_code:c.user.short_code}).subscribe(function(e){c.socket.emit("refresh",{})}):c.socket.emit("refresh",{})})}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)})}}]),t}()).\u0275fac=function(e){return new(e||an)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(C.s))},an.\u0275cmp=x.Vb({type:an,selectors:[["app-req-validation"]],decls:125,vars:124,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","15",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:;",3,"click"],["href","javascript:;",2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["href","javascript:;","style","cursor: pointer; color: red",3,"click",4,"ngIf"],[2,"text-align","center"],["href","javascript:;","style","cursor: pointer; color: blue; font-size: 18px;",3,"click",4,"ngIf"],["href","javascript:;","style","cursor: pointer; color: tomato; font-size: 18px;",3,"click",4,"ngIf"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"innerHTML"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],["href","javascript:;",2,"cursor","pointer","color","red",3,"click"],[1,"fa","fa-close"],["href","javascript:;",2,"cursor","pointer","color","blue","font-size","18px",3,"click"],[1,"fa","fa-check-square-o","mr-ms-2"],["href","javascript:;",2,"cursor","pointer","color","tomato","font-size","18px",3,"click"],[1,"fa","fa-times-circle-o"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.hc(12,"select",10),x.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),x.hc(13,"option",11),x.dd(14),x.wc(15,"translate"),x.wc(16,"translate"),x.gc(),x.bd(17,Ut,2,2,"option",12),x.gc(),x.hc(18,"select",13),x.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.hc(19,"option",14),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"option",15),x.dd(23),x.wc(24,"translate"),x.gc(),x.hc(25,"option",16),x.dd(26),x.wc(27,"translate"),x.gc(),x.hc(28,"option",17),x.dd(29),x.wc(30,"translate"),x.gc(),x.hc(31,"option",18),x.dd(32),x.wc(33,"translate"),x.gc(),x.hc(34,"option",19),x.dd(35),x.wc(36,"translate"),x.gc(),x.gc(),x.bd(37,Ft,4,3,"button",20),x.bd(38,Ot,1,0,"img",21),x.gc(),x.gc(),x.hc(39,"div",22),x.hc(40,"div",23),x.hc(41,"select",24),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(42,"option",25),x.dd(43,"#10"),x.gc(),x.hc(44,"option",26),x.dd(45,"#25"),x.gc(),x.hc(46,"option",27),x.dd(47,"#50"),x.gc(),x.hc(48,"option",28),x.dd(49,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(50,"div",29),x.hc(51,"div",30),x.hc(52,"div",31),x.hc(53,"div",32),x.hc(54,"pagination",33),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(55,"div",34),x.hc(56,"a",35),x.dd(57),x.wc(58,"translate"),x.wc(59,"translate"),x.wc(60,"translate"),x.wc(61,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(62,"div",30),x.hc(63,"div",36),x.hc(64,"table",37),x.hc(65,"thead",38),x.hc(66,"tr"),x.hc(67,"th",39),x.dd(68,"#"),x.gc(),x.hc(69,"th",40),x.dd(70),x.wc(71,"translate"),x.gc(),x.hc(72,"th",40),x.dd(73),x.wc(74,"translate"),x.gc(),x.hc(75,"th",40),x.dd(76),x.wc(77,"translate"),x.gc(),x.hc(78,"th",40),x.dd(79),x.wc(80,"translate"),x.gc(),x.hc(81,"th",40),x.dd(82),x.wc(83,"translate"),x.gc(),x.hc(84,"th",40),x.dd(85),x.wc(86,"translate"),x.gc(),x.hc(87,"th",40),x.dd(88),x.wc(89,"translate"),x.gc(),x.hc(90,"th",40),x.dd(91),x.wc(92,"translate"),x.gc(),x.hc(93,"th",40),x.dd(94),x.wc(95,"translate"),x.gc(),x.hc(96,"th",40),x.dd(97),x.wc(98,"translate"),x.gc(),x.hc(99,"th",40),x.dd(100),x.wc(101,"translate"),x.gc(),x.hc(102,"th",40),x.dd(103),x.wc(104,"translate"),x.gc(),x.hc(105,"th",40),x.dd(106),x.wc(107,"translate"),x.gc(),x.hc(108,"th",40),x.dd(109),x.wc(110,"translate"),x.gc(),x.gc(),x.gc(),x.hc(111,"tbody"),x.bd(112,Yt,6,3,"ng-container",41),x.bd(113,nn,2,1,"ng-container",41),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(114,"div",30),x.hc(115,"div",31),x.hc(116,"div",32),x.hc(117,"pagination",33),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(118,"div",34),x.hc(119,"a",35),x.dd(120),x.wc(121,"translate"),x.wc(122,"translate"),x.wc(123,"translate"),x.wc(124,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,60,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(122,cn)),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(123,cn)),x.Nb(1),x.Dc("ngModel",t.department_id),x.Nb(2),x.gd(" ",x.xc(15,62,"All")," ",x.xc(16,64,"Department")," "),x.Nb(3),x.Dc("ngForOf",t._deptlist),x.Nb(1),x.Dc("ngModel",t._status),x.Nb(2),x.fd(" ",x.xc(21,66,"All")," "),x.Nb(3),x.fd(" ",x.xc(24,68,"None")," "),x.Nb(3),x.fd(" ",x.xc(27,70,"Preparation")," "),x.Nb(3),x.fd(" ",x.xc(30,72,"Technical validation")," "),x.Nb(3),x.fd(" ",x.xc(33,74,"Validation")," "),x.Nb(3),x.fd(" ",x.xc(36,76,"Done")," "),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-VALID","report")),x.Nb(1),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(58,78,"Total of records"),": ",t.totalRow," - ",x.xc(59,80,"Page")," ",t.pageIndex," ",x.xc(60,82,"of")," ",t.totalPage," ",x.xc(61,84,"page"),""),x.Nb(13),x.fd(" ",x.xc(71,86,"Inner code")," "),x.Nb(3),x.fd(" ",x.xc(74,88,"Code")," "),x.Nb(3),x.ed(x.xc(77,90,"Internal testing")),x.Nb(3),x.ed(x.xc(80,92,"Parameter name")),x.Nb(3),x.ed(x.xc(83,94,"Priority")),x.Nb(3),x.ed(x.xc(86,96,"Note")),x.Nb(3),x.ed(x.xc(89,98,"Note lab")),x.Nb(3),x.ed(x.xc(92,100,"Note asm")),x.Nb(3),x.ed(x.xc(95,102,"Unit")),x.Nb(3),x.ed(x.xc(98,104,"LOD")),x.Nb(3),x.ed(x.xc(101,106,"LOQ")),x.Nb(3),x.ed(x.xc(104,108,"Results")),x.Nb(3),x.ed(x.xc(107,110,"Status")),x.Nb(3),x.ed(x.xc(110,112,"Actions")),x.Nb(3),x.Dc("ngIf",0==t._preparationlist.length),x.Nb(1),x.Dc("ngIf",t._preparationlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(121,114,"Total of records"),": ",t.totalRow," - ",x.xc(122,116,"Page")," ",t.pageIndex," ",x.xc(123,118,"of")," ",t.totalPage," ",x.xc(124,120,"page"),""))},directives:[o.c,o.n,o.q,k.b,k.a,o.x,o.r,o.A,r.p,r.q,T.a],pipes:[P.c],styles:[""]}),an),on=i("qeeY"),ln=i("tmjD");function sn(e,t){if(1&e){var n=x.ic();x.hc(0,"div",21),x.hc(1,"button",22),x.dd(2),x.wc(3,"translate"),x.gc(),x.hc(4,"div",23),x.hc(5,"button",24),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(78);return e.popUpLanguage(t,1)}),x.dd(6),x.wc(7,"translate"),x.gc(),x.hc(8,"button",24),x.rc("click",function(){return x.Uc(n),x.vc().exportQuotationExcel()}),x.dd(9),x.wc(10,"translate"),x.gc(),x.hc(11,"button",24),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(78);return e.popUpLanguage(t,2)}),x.dd(12),x.wc(13,"translate"),x.gc(),x.hc(14,"button",24),x.rc("click",function(){return x.Uc(n),x.vc().exportBOExcel()}),x.dd(15),x.wc(16,"translate"),x.gc(),x.gc(),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,5,"Print")," "),x.Nb(4),x.fd(" ",x.xc(7,7,"Quotation")," "),x.Nb(3),x.fd(" ",x.xc(10,9,"Quotation")," - Excel "),x.Nb(3),x.fd(" ",x.xc(13,11,"Receipt")," "),x.Nb(3),x.fd(" ",x.xc(16,13,"Receipt")," - Excel "))}function dn(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"button",25),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc()._chooseTab(e,e.order_no)}),x.dd(2),x.wc(3,"translate"),x.gc(),x.ec()}if(2&e){var a=t.$implicit,c=x.vc();x.Nb(1),x.Dc("ngClass",c._currentTabActivated==a.order_no?"btn btn-sm btn-warning":"btn btn-sm btn-secondary"),x.Nb(1),x.gd(" ",x.xc(3,3,"Sample")," ",a.order_no," ")}}function un(e,t){if(1&e){var n=x.ic();x.hc(0,"a",27),x.rc("click",function(){x.Uc(n);var e=x.vc(2);return null==e.entity0.inner_code?e._removeTab(e.entity0.sample_id):null}),x.dd(1,"X"),x.gc()}}function hn(e,t){if(1&e&&(x.fc(0),x.bd(1,un,2,0,"a",26),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngIf",0!=n._currentTabActivated&&null==n.entity0.inner_code)}}function gn(e,t){if(1&e&&(x.hc(0,"div",60),x.dd(1),x.wc(2,"slice"),x.gc()),2&e){var n=t.item;x.Dc("ngbTooltip",n.name.length>25?n.name:""),x.Nb(1),x.fd(" ",n.name.length>25?x.zc(2,2,n.name,0,20)+"..":n.name," ")}}function mn(e,t){if(1&e&&(x.hc(0,"div",60),x.dd(1),x.wc(2,"slice"),x.gc()),2&e){var n=t.item;x.Dc("ngbTooltip",n.name.length>25?n.name:""),x.Nb(1),x.fd(" ",n.name.length>25?x.zc(2,2,n.name,0,20)+"..":n.name," ")}}function _n(e,t){if(1&e&&(x.hc(0,"div",60),x.dd(1),x.wc(2,"slice"),x.gc()),2&e){var n=t.item;x.Dc("ngbTooltip",n.name.length>25?n.name:""),x.Nb(1),x.fd(" ",n.name.length>25?x.zc(2,2,n.name,0,20)+"..":n.name," ")}}function pn(e,t){if(1&e&&(x.hc(0,"div",60),x.dd(1),x.wc(2,"slice"),x.gc()),2&e){var n=t.item;x.Dc("ngbTooltip",n.name.length>25?n.name:""),x.Nb(1),x.fd(" ",n.name.length>25?x.zc(2,2,n.name,0,20)+"..":n.name," ")}}function fn(e,t){if(1&e){var n=x.ic();x.hc(0,"a",61),x.rc("click",function(){x.Uc(n);var e=x.vc(2);return e._saveTemplate(e.entity0)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Save")))}function bn(e,t){if(1&e){var n=x.ic();x.hc(0,"a",69),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._removeItem(e)}),x.cc(1,"i",58),x.gc()}}function vn(e,t){1&e&&x.cc(0,"i",73)}function yn(e,t){1&e&&x.cc(0,"i",74)}function xn(e,t){if(1&e){var n=x.ic();x.hc(0,"button",70),x.rc("click",function(){return x.Uc(n),x.vc(3)._switchFlagEdit()}),x.wc(1,"translate"),x.bd(2,vn,1,0,"i",71),x.bd(3,yn,1,0,"i",72),x.gc()}if(2&e){var a=x.vc().$implicit;x.Dc("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("ngbTooltip",x.xc(1,4,a.flag?"Cancel":"Edit")),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag)}}function Sn(e,t){if(1&e){var n=x.ic();x.hc(0,"a",75),x.rc("click",function(){x.Uc(n);var e=x.vc(3);return e._updatePricev2(e._orderdetailists)}),x.cc(1,"i",76),x.gc()}}function wn(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.fd(" ",null==n.quantity||""==n.quantity?1:n.quantity,"")}}function Nn(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.ed(n.quantity)}}function Dn(e,t){if(1&e&&(x.fc(0),x.bd(1,wn,2,1,"ng-container",17),x.bd(2,Nn,2,1,"ng-container",17),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngIf",0==n.entity0.is_active),x.Nb(1),x.Dc("ngIf",0!=n.entity0.is_active)}}function Mn(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",77),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.quantity=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit,r=x.vc(2);x.Nb(1),x.Fc("name","qty",c+1,""),x.Dc("ngModel",i.quantity)("ngClass",null!=i.code_father?"form-control jdisabled":"form-control")("disabled",0!=r.entity0.is_active||null!=i.code_father)}}function Cn(e,t){if(1&e&&(x.fc(0),x.dd(1),x.wc(2,"number"),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.fd(" ",x.xc(2,1,n.price),"")}}function kn(e,t){if(1&e&&(x.fc(0),x.dd(1),x.wc(2,"number"),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.ed(x.xc(2,1,n.price))}}function Tn(e,t){if(1&e&&(x.fc(0),x.bd(1,Cn,3,3,"ng-container",17),x.bd(2,kn,3,3,"ng-container",17),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngIf",0==n.entity0.is_active),x.Nb(1),x.Dc("ngIf",0!=n.entity0.is_active)}}function In(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",78),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.price=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit,r=x.vc(2);x.Nb(1),x.Fc("name","p",c+1,""),x.Dc("ngModel",i.price)("ngClass",null!=i.code_father?"form-control jdisabled":"form-control")("disabled",0!=r.entity0.is_active||null!=i.code_father)}}function Pn(e,t){if(1&e&&(x.fc(0),x.dd(1),x.wc(2,"number"),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.fd(" ",x.yc(2,1,n.discount,"1.1"),"")}}function Rn(e,t){if(1&e&&(x.fc(0),x.dd(1),x.wc(2,"number"),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.ed(x.yc(2,1,n.discount,"1.1"))}}function An(e,t){if(1&e&&(x.fc(0),x.bd(1,Pn,3,4,"ng-container",17),x.bd(2,Rn,3,4,"ng-container",17),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngIf",0==n.entity0.is_active),x.Nb(1),x.Dc("ngIf",0!=n.entity0.is_active)}}function En(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",78),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.discount=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit,r=x.vc(2);x.Nb(1),x.Fc("name","gg",c+1,""),x.Dc("ngModel",i.discount)("ngClass",null!=i.code_father?"form-control jdisabled":"form-control")("disabled",0!=r.entity0.is_active||null!=i.code_father)}}function Un(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.fd(" ",null==n.priority||""==n.priority?0:n.priority,"")}}function Fn(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.ed(n.priority)}}function On(e,t){if(1&e&&(x.fc(0),x.bd(1,Un,2,1,"ng-container",17),x.bd(2,Fn,2,1,"ng-container",17),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngIf",0==n.entity0.is_active),x.Nb(1),x.Dc("ngIf",0!=n.entity0.is_active)}}function Yn(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",79),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.priority=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit,r=x.vc(2);x.Nb(1),x.Fc("name","pri",c+1,""),x.Dc("ngModel",i.priority)("ngClass",null!=i.code_father?"form-control jdisabled":"form-control")("disabled",0!=r.entity0.is_active||null!=i.code_father)}}function Ln(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.fd(" ",n.tat," ")}}function qn(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc(2).$implicit;x.Nb(1),x.fd(" ",n.tat," ")}}function zn(e,t){if(1&e&&(x.fc(0),x.bd(1,Ln,2,1,"ng-container",17),x.bd(2,qn,2,1,"ng-container",17),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngIf",0==n.entity0.is_active),x.Nb(1),x.Dc("ngIf",0!=n.entity0.is_active)}}function Gn(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",79),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.tat=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit,r=x.vc(2);x.Nb(1),x.Fc("name","ta",c+1,""),x.Dc("ngModel",i.tat)("ngClass",null!=i.code_father?"form-control jdisabled":"form-control")("disabled",0!=r.entity0.is_active||null!=i.code_father)}}function Vn(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"td"),x.dd(2),x.gc(),x.hc(3,"td"),x.bd(4,bn,2,0,"a",62),x.bd(5,xn,4,6,"button",63),x.bd(6,Sn,2,0,"a",64),x.gc(),x.hc(7,"td"),x.hc(8,"span",65),x.dd(9),x.gc(),x.gc(),x.hc(10,"td"),x.dd(11),x.gc(),x.hc(12,"td",66),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2),c=x.Rc(80);return a._addComment(c,e)}),x.dd(13),x.gc(),x.hc(14,"td"),x.dd(15),x.gc(),x.hc(16,"td"),x.dd(17),x.gc(),x.hc(18,"td"),x.dd(19),x.gc(),x.hc(20,"td"),x.bd(21,Dn,3,2,"ng-container",17),x.bd(22,Mn,2,4,"ng-container",17),x.gc(),x.hc(23,"td"),x.bd(24,Tn,3,2,"ng-container",17),x.bd(25,In,2,4,"ng-container",17),x.gc(),x.hc(26,"td"),x.bd(27,An,3,2,"ng-container",17),x.bd(28,En,2,4,"ng-container",17),x.gc(),x.hc(29,"td"),x.dd(30),x.wc(31,"number"),x.gc(),x.hc(32,"td"),x.bd(33,On,3,2,"ng-container",17),x.bd(34,Yn,2,4,"ng-container",17),x.gc(),x.hc(35,"td"),x.bd(36,zn,3,2,"ng-container",17),x.bd(37,Gn,2,4,"ng-container",17),x.gc(),x.hc(38,"td"),x.hc(39,"input",67),x.rc("ngModelChange",function(e){return t.$implicit.order_no=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._assignOrderDetail(e._orderdetailists)}),x.gc(),x.gc(),x.hc(40,"td"),x.hc(41,"input",68),x.rc("ngModelChange",function(e){return t.$implicit.hide=e}),x.gc(),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.ed(c+1),x.Nb(2),x.Dc("ngIf",0==i.entity0.is_active&&!a.flag&&i._authenService.hasPermission("REQ-LIST","delete")),x.Nb(1),x.Dc("ngIf",0==i.entity0.is_active&&i._authenService.hasPermission("REQ-LIST","update")),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngClass",null==a.code_father?"text-bold jtext-default":"text-warning"),x.Nb(1),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ",a.comment_ext," "),x.Nb(2),x.ed(a.method),x.Nb(2),x.ed(a.lod),x.Nb(2),x.fd(" ",a.unit," "),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.fd(" ",x.xc(31,29,a.amount)," "),x.Nb(3),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Fc("name","odd",c+1,""),x.Dc("ngModel",a.order_no)("ngClass",null!=a.code_father?"form-control jdisabled":"form-control")("disabled",0!=i.entity0.is_active||null!=a.code_father),x.Nb(2),x.Fc("name","ckb",c+1,""),x.Dc("ngModel",a.hide)("disabled",!a.flag)}}function Bn(e,t){if(1&e){var n=x.ic();x.hc(0,"form",28),x.hc(1,"div",9),x.hc(2,"div",1),x.hc(3,"div",29),x.hc(4,"div",30),x.hc(5,"label",31),x.hc(6,"strong"),x.dd(7),x.wc(8,"translate"),x.gc(),x.gc(),x.hc(9,"div",32),x.hc(10,"input",33),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_name=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(11,"translate"),x.gc(),x.hc(12,"input",33),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_name_e=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(13,"translate"),x.wc(14,"translate"),x.gc(),x.hc(15,"input",34),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_id=e}),x.gc(),x.gc(),x.hc(16,"label",31),x.hc(17,"strong"),x.dd(18),x.wc(19,"translate"),x.gc(),x.gc(),x.hc(20,"div",32),x.hc(21,"input",35),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_code=e}),x.wc(22,"translate"),x.gc(),x.gc(),x.hc(23,"label",31),x.hc(24,"strong"),x.dd(25),x.wc(26,"translate"),x.wc(27,"translate"),x.gc(),x.gc(),x.hc(28,"div",32),x.hc(29,"input",33),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.description=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(30,"translate"),x.gc(),x.hc(31,"input",33),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.description_e=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(32,"translate"),x.wc(33,"translate"),x.gc(),x.gc(),x.hc(34,"label",31),x.hc(35,"strong"),x.dd(36),x.wc(37,"translate"),x.gc(),x.gc(),x.hc(38,"div",32),x.hc(39,"input",35),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.inner_code=e}),x.wc(40,"translate"),x.gc(),x.gc(),x.hc(41,"label",31),x.hc(42,"strong"),x.dd(43),x.wc(44,"translate"),x.gc(),x.gc(),x.hc(45,"div",32),x.hc(46,"textarea",36),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.note=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(47,"translate"),x.gc(),x.gc(),x.hc(48,"label",31),x.hc(49,"strong"),x.dd(50),x.wc(51,"translate"),x.gc(),x.gc(),x.hc(52,"div",32),x.hc(53,"input",33),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.weight=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)})("keypress.enter",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(54,"translate"),x.gc(),x.gc(),x.hc(55,"label",31),x.hc(56,"strong"),x.dd(57),x.wc(58,"translate"),x.gc(),x.gc(),x.hc(59,"div",32),x.hc(60,"select",37),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.is_active=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.hc(61,"option",38),x.dd(62),x.wc(63,"translate"),x.gc(),x.hc(64,"option",39),x.dd(65),x.wc(66,"translate"),x.gc(),x.hc(67,"option",40),x.dd(68),x.wc(69,"translate"),x.gc(),x.gc(),x.gc(),x.hc(70,"label",41),x.hc(71,"strong"),x.dd(72),x.wc(73,"translate"),x.gc(),x.gc(),x.hc(74,"div",32),x.hc(75,"ng-select",42),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity0.sample_nature_id=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSampleOrder(e.entity0)}),x.wc(76,"translate"),x.wc(77,"translate"),x.bd(78,gn,3,6,"ng-template",43),x.gc(),x.gc(),x.hc(79,"label",31),x.hc(80,"strong"),x.dd(81),x.wc(82,"translate"),x.gc(),x.gc(),x.hc(83,"div",32),x.hc(84,"ng-select",44),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().selectedCategory0=e})("change",function(){return x.Uc(n),x.vc().changeCategoryMatrix()}),x.wc(85,"translate"),x.wc(86,"translate"),x.bd(87,mn,3,6,"ng-template",43),x.gc(),x.gc(),x.hc(88,"label",31),x.hc(89,"strong"),x.dd(90),x.wc(91,"translate"),x.gc(),x.gc(),x.hc(92,"div",32),x.hc(93,"ng-select",45),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().selectedSpecification0=e})("change",function(){x.Uc(n);var e=x.vc();return e.changeSpecification(e.entity0,e.selectedCategory0)}),x.bd(94,_n,3,6,"ng-template",43),x.gc(),x.gc(),x.hc(95,"label",31),x.hc(96,"strong"),x.dd(97),x.wc(98,"translate"),x.gc(),x.gc(),x.hc(99,"div",32),x.hc(100,"input",46),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._tat=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateTAT(e.entity0,e._tat)}),x.wc(101,"translate"),x.gc(),x.gc(),x.hc(102,"label",47),x.hc(103,"strong"),x.dd(104),x.wc(105,"translate"),x.gc(),x.gc(),x.hc(106,"div",32),x.hc(107,"ng-select",48),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().selectedTemplate0=e})("change",function(){x.Uc(n);var e=x.vc();return e.changeTemplate(e.entity0)}),x.bd(108,pn,3,6,"ng-template",43),x.gc(),x.dd(109," \xa0"),x.bd(110,fn,3,3,"a",49),x.gc(),x.hc(111,"div",50),x.hc(112,"div",51),x.hc(113,"table",52),x.hc(114,"thead",53),x.hc(115,"tr"),x.hc(116,"th",54),x.dd(117),x.wc(118,"translate"),x.wc(119,"number"),x.gc(),x.gc(),x.gc(),x.hc(120,"thead",55),x.hc(121,"tr"),x.hc(122,"th",56),x.dd(123,"#"),x.gc(),x.hc(124,"th",57),x.cc(125,"i",58),x.gc(),x.hc(126,"th",59),x.dd(127),x.wc(128,"translate"),x.gc(),x.hc(129,"th",59),x.dd(130),x.wc(131,"translate"),x.gc(),x.hc(132,"th",59),x.dd(133),x.wc(134,"translate"),x.gc(),x.hc(135,"th",59),x.dd(136),x.wc(137,"translate"),x.gc(),x.hc(138,"th",59),x.dd(139,"LOD"),x.gc(),x.hc(140,"th",59),x.dd(141),x.wc(142,"translate"),x.gc(),x.hc(143,"th",59),x.dd(144),x.wc(145,"translate"),x.gc(),x.hc(146,"th",59),x.dd(147),x.wc(148,"translate"),x.gc(),x.hc(149,"th",59),x.dd(150),x.wc(151,"translate"),x.gc(),x.hc(152,"th",59),x.dd(153),x.wc(154,"translate"),x.gc(),x.hc(155,"th",59),x.dd(156),x.wc(157,"translate"),x.gc(),x.hc(158,"th",59),x.dd(159),x.wc(160,"translate"),x.gc(),x.hc(161,"th",59),x.dd(162),x.wc(163,"translate"),x.gc(),x.hc(164,"th",59),x.dd(165),x.wc(166,"translate"),x.gc(),x.gc(),x.gc(),x.hc(167,"tbody"),x.bd(168,Vn,42,31,"tr",15),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(5),x.Fc("for","sn",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(8,130,"Sample name")),x.Nb(3),x.Fc("id","sn",a._currentTabActivated,""),x.Fc("name","sample_name",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(11,132,"Sample")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_name)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.Fc("id","sne",a._currentTabActivated,""),x.Fc("name","sample_namee",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(13,134,"Sample")+" "+x.xc(14,136,"English")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_name_e)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(3),x.Fc("id","id",a._currentTabActivated,""),x.Fc("name","id",a._currentTabActivated,""),x.Dc("ngModel",a.entity0.sample_id),x.Nb(1),x.Fc("for","sample_code",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(19,138,"Sample code")),x.Nb(3),x.Fc("id","sample_code",a._currentTabActivated,""),x.Fc("name","sample_code",a._currentTabActivated,""),x.Dc("placeholder",x.xc(22,140,"Sample code")+" "+a._currentTabActivated)("ngModel",a.entity0.sample_code),x.Nb(2),x.Fc("for","description",a._currentTabActivated,""),x.Nb(2),x.gd("",x.xc(26,142,"Description")," (",x.xc(27,144,"State of sample"),")"),x.Nb(4),x.Fc("id","description",a._currentTabActivated,""),x.Fc("name","description",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(30,146,"Description")+" "+a._currentTabActivated)("ngModel",a.entity0.description)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.Fc("id","descriptione",a._currentTabActivated,""),x.Fc("name","descriptione",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(32,148,"Description")+" "+x.xc(33,150,"English")+" "+a._currentTabActivated)("ngModel",a.entity0.description_e)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(3),x.Fc("for","inner_code",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(37,152,"Inner code")),x.Nb(3),x.Fc("id","inner_code",a._currentTabActivated,""),x.Fc("name","inner_code",a._currentTabActivated,""),x.Dc("placeholder",x.xc(40,154,"Inner code")+" "+a._currentTabActivated)("ngModel",a.entity0.inner_code),x.Nb(2),x.Fc("for","note",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(44,156,"Note")),x.Nb(3),x.Fc("id","note",a._currentTabActivated,""),x.Fc("name","note",a._currentTabActivated,""),x.Dc("placeholder",x.xc(47,158,"Note")+" "+a._currentTabActivated)("ngModel",a.entity0.note)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.Fc("for","weight",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(51,160,"Weight")),x.Nb(3),x.Fc("id","weight",a._currentTabActivated,""),x.Fc("name","weight",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(54,162,"Weight")+" "+a._currentTabActivated)("ngModel",a.entity0.weight)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.Fc("for","state",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(58,164,"State")),x.Nb(3),x.Dc("ngModel",a.entity0.is_active)("disabled",0!=a.entity.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.fd(" ",x.xc(63,166,"Pending")," "),x.Nb(3),x.fd(" ",x.xc(66,168,"Confirmed")," "),x.Nb(3),x.fd(" ",x.xc(69,170,"Cancel")," "),x.Nb(2),x.Fc("for","_samplenatures",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(73,172,"Sample nature")),x.Nb(3),x.Pb("ajustar"),x.Fc("name","_samplenatures",a._currentTabActivated,""),x.Dc("items",a._samplenatures)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.entity0.sample_nature_id)("placeholder",x.xc(76,174,"Please choose"))("notFoundText",x.xc(77,176,"Not found item")),x.Nb(4),x.Fc("for","matrix_category",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(82,178,"Matrix category")),x.Nb(3),x.Pb("ajustar"),x.Dc("items",a._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCategory0)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create"))("placeholder",x.xc(85,180,"Please choose"))("notFoundText",x.xc(86,182,"Not found item")),x.Nb(4),x.Fc("for","para_assignment",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(91,184,"Parameter assignment")),x.Nb(3),x.Dc("items",a._specifications)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSpecification0)("disabled",0!=a.entity0.is_active||null==a.selectedCategory0||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(2),x.Fc("for","tatc",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(98,186,"TAT")),x.Nb(3),x.Fc("id","tatc",a._currentTabActivated,""),x.Fc("name","tatc",a._currentTabActivated,""),x.Dc("ngClass",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","create")?"form-control":"form-control jdisabled")("placeholder",x.xc(101,188,"TAT")+" "+a._currentTabActivated)("ngModel",a._tat)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(4),x.ed(x.xc(105,190,"Copy sample")),x.Nb(3),x.Dc("items",a._templates)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedTemplate0)("disabled",0!=a.entity0.is_active||!a._authenService.hasPermission("REQ-LIST","create")),x.Nb(3),x.Dc("ngIf",0==a.entity0.is_active&&a._authenService.hasPermission("REQ-LIST","update")),x.Nb(7),x.gd(" ",x.xc(118,192,"Subtotal"),": ",x.xc(119,194,a._totalSub)," (VND) "),x.Nb(10),x.fd(" ",x.xc(128,196,"Code")," "),x.Nb(3),x.fd(" ",x.xc(131,198,"Specification")," "),x.Nb(3),x.fd(" ",x.xc(134,200,"Note")," "),x.Nb(3),x.fd(" ",x.xc(137,202,"Method")," "),x.Nb(5),x.fd(" ",x.xc(142,204,"Unit")," "),x.Nb(3),x.fd(" ",x.xc(145,206,"Quantity")," "),x.Nb(3),x.fd(" ",x.xc(148,208,"Unit price")," "),x.Nb(3),x.fd("",x.xc(151,210,"Discount")," %"),x.Nb(3),x.fd(" ",x.xc(154,212,"Amount")," "),x.Nb(3),x.fd(" ",x.xc(157,214,"Priority")," "),x.Nb(3),x.fd(" ",x.xc(160,216,"TAT")," "),x.Nb(3),x.fd(" ",x.xc(163,218,"Order")," "),x.Nb(3),x.fd(" ",x.xc(166,220,"Hidden")," "),x.Nb(3),x.Dc("ngForOf",a._orderdetailists)}}function Qn(e,t){if(1&e){var n=x.ic();x.hc(0,"form",28),x.hc(1,"div",80),x.hc(2,"h4",81),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",82),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",83),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",84),x.hc(9,"div",30),x.hc(10,"div",50),x.hc(11,"div",85),x.hc(12,"button",86),x.rc("click",function(){return x.Uc(n),x.vc()._print("vn")}),x.dd(13),x.wc(14,"translate"),x.gc(),x.hc(15,"button",87),x.rc("click",function(){return x.Uc(n),x.vc()._print("en")}),x.dd(16),x.wc(17,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}2&e&&(x.Nb(3),x.fd(" ",x.xc(4,3,"Language")," "),x.Nb(10),x.fd(" ",x.xc(14,5,"Vietnamese")," "),x.Nb(3),x.fd(" ",x.xc(17,7,"English")," "))}function Hn(e,t){1&e&&(x.fc(0),x.hc(1,"a",94),x.cc(2,"img",95),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing")," "))}function $n(e,t){if(1&e){var n=x.ic();x.hc(0,"a",96),x.rc("click",function(){return x.Uc(n),x.vc(2).saveComment()}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Save & close")," "))}function Kn(e,t){if(1&e){var n=x.ic();x.hc(0,"form",28),x.hc(1,"div",80),x.hc(2,"h4",81),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",82),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",83),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",84),x.hc(9,"div",30),x.hc(10,"div",50),x.hc(11,"div",88),x.hc(12,"label",89),x.dd(13),x.wc(14,"translate"),x.gc(),x.hc(15,"textarea",90),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entityComment.comment_ext=e}),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(16,"div",91),x.hc(17,"a",92),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.dd(18),x.wc(19,"translate"),x.gc(),x.bd(20,Hn,5,3,"ng-container",17),x.bd(21,$n,3,3,"a",93),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.gd(" ",x.xc(4,7,"Note")," - ",a.entityComment.code," "),x.Nb(10),x.ed(x.xc(14,9,"Note")),x.Nb(2),x.Dc("ngModel",a.entityComment.comment_ext),x.Nb(3),x.fd(" ",x.xc(19,11,"Close")," "),x.Nb(2),x.Dc("ngIf",a.isSaveNote),x.Nb(1),x.Dc("ngIf",!a.isSaveNote)}}_.a.vfs=f.a.pdfMake.vfs;var jn,Xn=((jn=function(){function t(e,a,c,i,r,o,l,s,d,u){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=r,this._excelService=o,this._activatedRoute=l,this._utilityService=s,this.formatPipe=d,this.modalService=u,this.isSave=!1,this._flagModal="",this._flagPrintPreview=!1,this.entity={},this.baseFolder=g.a.BASE_API+"/",this._id="",this.entityDetail={},this._xList=[],this._tabOrder=9,this._categories=[],this._specifications=[],this._templates=[],this._orderdetailists=[],this._totalSub=0,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._flagEdit=!1,this.isLoadingEmail=!1,this._currentTab=0,this.isLoadingEmail1=!1,this.isLoadingEmail2=!0,this.config={displayKey:"name",search:!0,limitTo:5},this.selectedSpecification0=null,this.selectedCategory0=null,this.selectedTemplate0=null,this._currentTabActivated=0,this._currentTabSampleId="",this._logoPath=g.a.BASE_API+"/",this._logoIsoPath=g.a.BASE_API+"/",this.entity0={},this.entityComment={},this.isSaveNote=!1,this._samplenatures=[],!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.user=this._authenService.getLoggedInUser(),this.socket=h()(g.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.loadImgs(),this._activatedRoute.params.subscribe(function(t){e._id=t.id,e.loadDetail(e._id),e.loadSampleNature(),e.loadCategories(),e.loadSpecs(null),e.socket.on("refreshPage",function(t){e.loadCategories()})})}},{key:"ngAfterViewInit",value:function(){}},{key:"counter",value:function(e,t){return console.log(e,t),new Array(e-t)}},{key:"loadDetail",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/request/detailA",a).subscribe(function(t){n.entity=t.data;var a,c=[],i=e(t.data.orders_list);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({sample_id:r.sample_id,sample_name:r.sample_name,sample_name_e:r.sample_name_e,sample_code:r.sample_code,inner_code:r.inner_code,description:r.description,description_e:r.description_e,note:r.note,weight:r.weight,is_active:r.is_active,userid:r.userid,total_sub:r.total_sub,order_no:r.order_no,flag_close:!1,sample_nature_id:r.sample_nature_id})}}catch(l){i.e(l)}finally{i.f()}n._xList=c,n.entity0=c.filter(function(e){return e.order_no==n._currentTabActivated})[0];var o={};o.id=n.entity.userid,o.short_code=n.user.short_code,n.updateEmployeeCode(o)})}},{key:"removeOrderWithNull",value:function(e){var t={};t.sample_id=e,this._dataService.post("/request/removeOrderWithNull",t).subscribe(function(e){})}},{key:"loadDetailWithNoloadOrderSampleTabs",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/request/detailA",n).subscribe(function(e){t.entity.total=e.data.total})}},{key:"updateEmployeeCode",value:function(e){this._dataService.post("/user/updateCodeEmployee",e).subscribe(function(e){})}},{key:"loadDetail1",value:function(t){var n=this,a={};a.id=t,this._dataService.post("/request/detailA",a).subscribe(function(t){n.entity=t.data;var a=[];if(0==t.data.orders_list.length){var c,i=0,r=e(n.counter(t.data.number_sample,0));try{for(r.s();!(c=r.n()).done;)c.value,a.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:i}),i+=1}catch(h){r.e(h)}finally{r.f()}}else{i=0;var o,l=e(t.data.orders_list);try{for(l.s();!(o=l.n()).done;){var s=o.value;a.push({sample_id:s.sample_id,sample_name:s.sample_name,sample_code:s.sample_code,inner_code:s.inner_code,description:s.description,note:s.note,weight:s.weight,is_active:s.is_active,userid:s.userid,order_no:i}),i+=1}}catch(h){l.e(h)}finally{l.f()}var d,u=e(n.counter(t.data.number_sample,t.data.orders_list.length));try{for(u.s();!(d=u.n()).done;)d.value,a.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:i}),i+=1}catch(h){u.e(h)}finally{u.f()}}n._xList=a,n.entity0=a.filter(function(e){return e.order_no==n._currentTabActivated})[0],n.loadTemplates(n.entity.customer_id)})}},{key:"loadDetailByTab",value:function(t,n){var a=this;this._currentTab=n;var c={};c.id=t,this._dataService.post("/request/detailA",c).subscribe(function(t){a.entity=t.data;var n=[];if(0==t.data.orders_list.length){var c,i=0,r=e(a.counter(t.data.number_sample,0));try{for(r.s();!(c=r.n()).done;)c.value,n.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:i}),i+=1}catch(h){r.e(h)}finally{r.f()}}else{i=0;var o,l=e(t.data.orders_list);try{for(l.s();!(o=l.n()).done;){var s=o.value;n.push({sample_id:s.sample_id,sample_name:s.sample_name,sample_code:s.sample_code,inner_code:s.inner_code,description:s.description,note:s.note,weight:s.weight,is_active:s.is_active,userid:s.userid,order_no:i}),i+=1}}catch(h){l.e(h)}finally{l.f()}var d,u=e(a.counter(t.data.number_sample,t.data.orders_list.length));try{for(u.s();!(d=u.n()).done;)d.value,n.push({sample_id:null,sample_name:null,sample_code:null,inner_code:null,description:null,note:null,weight:null,is_active:0,userid:null,order_no:i}),i+=1}catch(h){u.e(h)}finally{u.f()}}a._xList=n,a.entity0=n.filter(function(e){return e.order_no==a._currentTabActivated})[0],a.loadTemplates(a.entity.customer_id)})}},{key:"loadTemplates",value:function(t){var n=this,a={};a.customer_id=t,this._dataService.post("/sample_matrix/getallsampletemplates",a).subscribe(function(t){var a,c=[],i=e(t.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({name:r.sample_name,code:r.id})}}catch(o){i.e(o)}finally{i.f()}n._templates=c})}},{key:"loadCategories",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({name:"en"==t.user.lang?r.category_name_e:r.category_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._categories=c})}},{key:"loadSpecs",value:function(t){var n=this;if(null!=t){var a={};a.domain=this.user.short_code,a.id=t,this._dataService.post("/sample_matrix/getallparametersnopagingbycat",a).subscribe(function(t){var a,c=[],i=e(t.data.filter(function(e){return e.is_active}));try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({name:r.specification_name_l,code:r.parameter_id})}}catch(o){i.e(o)}finally{i.f()}n._specifications=c})}else{var c={};c.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparametersnopaging",c).subscribe(function(t){var a,c=[],i=e(t.data.filter(function(e){return e.is_active}));try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({name:r.specification_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}n._specifications=c})}}},{key:"_updateRequest",value:function(){var e=this;console.log(this.entity),this._dataService.post("/request/update",this.entity).subscribe(function(t){console.log(t.data),"failed"==t.result?e._notifyService.showError("en"==e.user.lang?y.a.MSG_UPDATENO_EN:y.a.MSG_UPDATENO,"en"==e.user.lang?y.a.error_title_en:y.a.error_title):(e.loadDetail(t.data[0]._id),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"))})}},{key:"_updateSampleOrder",value:function(e){var t=this;e.request_id=this._id,e.userid=this.user.id,this._tabOrder=e.order_no,null!=e.sample_name&&""!=e.sample_name&&(console.log("Params",e),this._dataService.post("/request/updateSampleOrder",e).subscribe(function(n){1==e.is_active&&null==e.sample_code&&t._updateCodeInSampleOrder(e),t._updateSubTotal(e.sample_id),t._currentTabSampleId=e.sample_id,t._currentTabActivated=n.data.order_no,t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK")}))}},{key:"_updateCodeInSampleOrder",value:function(e){var t=this,n={};n.sample_id=e.sample_id,n.sample_code=e.sample_code,n.inner_code=e.inner_code,n.is_active=e.is_active,n.userid=this.user.id,console.log("Code",n),this._dataService.post("/request/addCodesInSampleOrder",n).subscribe(function(n){t.loadDetail(t._id),t._updateSubTotal(e.sample_id)})}},{key:"loadDetailSampleOrder",value:function(e){var t=this,n={};n.sample_id=e,this._dataService.post("/request/detailSampleOrder",n).subscribe(function(e){null!=e.data&&(t._totalSub=e.data.total_sub)})}},{key:"_removeTab",value:function(e){var t=this;console.log("Call here",e),this._currentTabActivated=0,this._dataService.post("/request/removeOrder",{id:e,request_id:this._id,number_sample:this.entity.number_sample}).subscribe(function(e){console.log("Call KQ",e),t.entity0={},t.loadDetail(t._id)})}},{key:"_updateSampleNo",value:function(){var e=this;if(0==this.entity.number_sample)return this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_SAMPLE_ZERO_EN:y.a.MSG_ERROR_SAMPLE_ZERO,"en"==this.user.lang?y.a.error_title_en:y.a.error_title),void(this.entity.number_sample=1);this._dataService.post("/request/update2",{request_id:this._id,number_sample:this.entity.number_sample,short_code:this.user.short_code,ipaddress:this.user.ipaddress}).subscribe(function(t){console.log("Run here",t),e.loadDetail(e._id)})}},{key:"_chooseTab",value:function(t,n){var a,c=e(this._xList);try{for(c.s();!(a=c.n()).done;){var i=a.value;i.flag_close=i.order_no==n&&!i.flag_close}}catch(r){c.e(r)}finally{c.f()}this.entity0=t,this._orderdetailists=[],this.selectedCategory=null,this.selectedSpecification=null,this.selectedTemplate=null,this._tat=null,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this.totalPage=0,this._updateSubTotalWithNoloadOrderSampleTabs(t.sample_id),this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id),this._currentTabActivated=n}},{key:"changeCategoryMatrix",value:function(){this.loadSpecs(this.selectedCategory0)}},{key:"changeTemplate",value:function(e){this._getTemplate(this.selectedTemplate0,e)}},{key:"changeSpecification",value:function(e,t){console.log(this.selectedSpecification0,t),null!=this.selectedSpecification0&&null!=t&&this._addItems(this.selectedSpecification0,e,t)}},{key:"_addItems",value:function(e,t,n){var a=this;if(console.log(e,t),null!=t.sample_id)if(null!=e){var c={};c.sample_id=t.sample_id,c.parameter_id=e,c.category_id=n,c.priority=0,c.short_code=this.user.short_code,this._dataService.post("/request/addItemOrderv2",c).subscribe(function(e){a._notifyService.showSuccess("en"==a.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),a.selectedSpecification0=null,a.loadDetailSampleOrder(t.sample_id),a.loadOrderDetailList(t.sample_id),a._updateSubTotal(t.sample_id),a.loadDetail(a._id)},function(){a.selectedSpecification0=null,a._notifyService.showError("en"==a.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==a.user.lang?y.a.error_title_en:y.a.error_title)})}else this.loadDetailSampleOrder(t.sample_id),this.loadOrderDetailList(t.sample_id);else this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==this.user.lang?y.a.error_title_en:y.a.error_title)}},{key:"loadOrderDetailList",value:function(t){var n=this;if(null!=t){var a={page:1,limit:9999};a.sample_id=t,this._dataService.post("/request/getlistorderdetail",a).subscribe(function(t){var a=[];n._totalSub=0;var c,i=e(t.data);try{var r=function(){var e=c.value;0==a.filter(function(t){return t.code==e.code&&t.category_id==e.category_id}).length&&(a.push({code:e.code,code_father:0==t.data.filter(function(t){return t.code==e.code_father}).length||e.code==e.code_father?null:e.code_father,lod:e.lod,mark:e.mark,method:e.method,parameter_id:e.parameter_id,category_id:e.category_id,price:null==e.price?0:e.price,priority:e.priority,sample_id:e.sample_id,specification_name_e:e.specification_name_e,specification_name_l:e.specification_name_l,tat:e.tat,unit:e.unit,quantity:e.quantity,flag:!1,comment_ext:e.comment_ext,discount:null==e.discount?0:parseFloat(e.discount),amount:(1-parseFloat(null==e.discount?0:e.discount)/100)*parseInt(e.quantity)*parseFloat(null==e.price?0:e.price),order_no:null==e.order_no?9:e.order_no,hide:null!=e.hide&&null!=e.hide&&e.hide}),n._totalSub+=parseInt(null==e.price?0:e.price)*e.quantity)};for(i.s();!(c=i.n()).done;)r()}catch(o){i.e(o)}finally{i.f()}n._orderdetailists=a,n.totalRow=t.rowCount,n.totalPage=t.totalPages,n.selectedSpecification=null})}}},{key:"_assignOrderDetail",value:function(t){var n,a=this,c=[],i=e(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;c.push({sample_id:r.sample_id,parameter_id:r.parameter_id,category_id:r.category_id,order_no:r.order_no,code:r.code,code_father:r.code_father})}}catch(o){i.e(o)}finally{i.f()}this._dataService.post("/request/re-assignOrders",{getlist:c}).subscribe(function(e){a._updateSubTotal(t[0].sample_id),a.loadOrderDetailList(t[0].sample_id),a.loadDetail(a._id)})}},{key:"_switchFlagEdit",value:function(){var t,n=e(this._orderdetailists);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.flag=!a.flag}}catch(c){n.e(c)}finally{n.f()}}},{key:"pageChanged",value:function(e,t){this.pageIndex=e.page,this.loadOrderDetailList(t)}},{key:"_removeItem",value:function(e){var t=this,n={};n.sample_id=e.sample_id,n.parameter_id=e.parameter_id,n.category_id=e.category_id,n.code=e.code,n.code_father=e.code_father,this._dataService.post("/request/removeItemOrderv2",n).subscribe(function(n){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_DELETE_EN:y.a.MSG_DELETE,"OK"),t._updateSubTotal(e.sample_id),t.loadDetailSampleOrder(e.sample_id),t.loadOrderDetailList(e.sample_id)})}},{key:"_updateTAT",value:function(e,t){var n=this;this._tat=null;var a={};a.sample_id=e.sample_id,a.tat=t,this._dataService.post("/request/updateTAT",a).subscribe(function(t){n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),n._updateSubTotal(e.sample_id),n.loadOrderDetailList(e.sample_id)})}},{key:"_updatePrice",value:function(e){var t=this,n={};n.sample_id=e.sample_id,n.parameter_id=e.parameter_id,n.category_id=e.category_id,n.price=e.price,n.mark=e.mark,n.priority=e.priority,n.tat=e.tat,n.quantity=e.quantity,n.discount=e.discount,this._dataService.post("/request/updatePriceOrder",n).subscribe(function(n){console.log("KQ",n),t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t._updateSubTotal(e.sample_id),t.loadOrderDetailList(e.sample_id),t.loadDetail(t._id)})}},{key:"_updatePricev2",value:function(e){var t=this;console.log("List",e),this._dataService.post("/request/updatePriceOrderv2",{getlist:e}).subscribe(function(n){console.log("KQ",n),t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t._updateSubTotal(e[0].sample_id),t.loadOrderDetailList(e[0].sample_id),t.loadDetail(t._id)})}},{key:"_updateSubTotal",value:function(e){var t=this,n={};n.sample_id=e,this._dataService.post("/request/updateSubTotal",n).subscribe(function(n){t._updateTotal(t._id),t.loadDetailSampleOrder(e)})}},{key:"_updateSubTotalWithNoloadOrderSampleTabs",value:function(e){var t=this;this.selectedCategory0=null;var n={};n.sample_id=e,this._dataService.post("/request/updateSubTotal",n).subscribe(function(n){t._updateTotalWithNoloadOrderSampleTabs(t._id),t.loadDetailSampleOrder(e)})}},{key:"_updateTotalWithNoloadOrderSampleTabs",value:function(e){var t=this,n={};n.request_id=e,this._dataService.post("/request/updateTotal",n).subscribe(function(e){t.loadDetailWithNoloadOrderSampleTabs(t._id)})}},{key:"_updateTotal",value:function(e){var t=this,n={};n.request_id=e,this._dataService.post("/request/updateTotal",n).subscribe(function(e){t.loadDetail(t._id)})}},{key:"_addComment",value:function(e,t){this.entityComment=t,this.modalService.open(e,{size:"md",centered:!0})}},{key:"saveComment",value:function(){var e=this;this.isSaveNote=!0,this._dataService.post("/request/addCommentParameter",{sample_id:this.entityComment.sample_id,parameter_id:this.entityComment.parameter_id,category_id:this.entityComment.category_id,comment_ext:this.entityComment.comment_ext}).subscribe(function(t){e.isSaveNote=!1,e.loadOrderDetailList(e.entityComment.sample_id),e.modalService.dismissAll()})}},{key:"_saveTemplate",value:function(t){var n=this;if(null!=t.sample_name&&""!=t.sample_name){var a={};a.sample_name=t.sample_name,a.weight=t.weight,a.customer_id=this.entity.customer_id;var c,i=[],r=e(this._orderdetailists);try{for(r.s();!(c=r.n()).done;){var o=c.value;i.push({code:o.code,flag:o.flag,lod:o.lod,mark:o.mark,method:o.method,loq:o.loq,parameter_id:o.parameter_id,category_id:o.category_id,price:o.price,priority:o.priority,sample_id:null,specification_name_e:o.specification_name_e,specification_name_l:o.specification_name_l,tat:o.tat,unit:o.unit,quantity:o.quantity})}}catch(l){r.e(l)}finally{r.f()}a.json=JSON.stringify(i),this._dataService.post("/request/addSampleTemplate",a).subscribe(function(e){"ok"==e.result?(n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),n.loadTemplates(n.entity.customer_id)):n._notifyService.showError("en"==n.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==n.user.lang?y.a.error_title_en:y.a.error_title)})}else this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==this.user.lang?y.a.error_title_en:y.a.error_title)}},{key:"_getTemplate",value:function(e,t){var n=this;if(console.log(e,t),null!=t.sample_name&&null!=e)v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_replace_en:y.a.are_u_sure_replace,text:t.sample_name,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(a){if(a.value){var c={};c.id=e,c.sample_id=t.sample_id,c.userid=n.user.id,console.log(c),n._dataService.post("/request/replaceOrderDetailBySampleId",c).subscribe(function(e){n.selectedTemplate=null,"ok"==e.result?(n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),n.selectedTemplate0=[],n._updateSubTotal(t.sample_id),n.loadDetailSampleOrder(t.sample_id),n.loadOrderDetailList(t.sample_id)):n._notifyService.showError("en"==n.user.lang?y.a.MSG_ADDNO_EN:y.a.MSG_ADDNO,"en"==n.user.lang?y.a.error_title_en:y.a.error_title)})}else n.selectedTemplate=null});else if(null!=e){var a={};a.id=e,a.sample_id=t.sample_id,a.request_id=this._id;var c=new Date;a.timestamp=new Date(d(c.setHours(c.getHours()+7)).format("YYYY-MM-DD HH:mm:ss")),a.is_active=0,a.userid=this.user.id,this._dataService.post("/request/replaceOrderDetailBySampleId",a).subscribe(function(e){n.selectedTemplate=null,"ok"==e.result?(n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),n.selectedTemplate0=null,n._updateSubTotal(e.data.sample_id),n.socket.emit("refresh",{}),n.loadDetailSampleOrder(e.data.sample_id),n.loadOrderDetailList(e.data.sample_id)):(n.selectedTemplate0=null,n._notifyService.showError("en"==n.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==n.user.lang?y.a.error_title_en:y.a.error_title))})}}},{key:"_currentTabClicked",value:function(e){console.log(e)}},{key:"popUpLanguage",value:function(e,t){this.choosePrintType=t,this.modalService.open(e,{size:"md",centered:!0})}},{key:"_print",value:function(e){1==this.choosePrintType&&this.printQuotationAsPDF(e),2==this.choosePrintType&&this.printBOAsPDF(e)}},{key:"printQuotationAsPDF",value:function(t){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,c=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(a={}).id=this._id,this._dataService.post("/request/detailIn",a).subscribe(function(n){return Object(s.__awaiter)(c,void 0,void 0,regeneratorRuntime.mark(function a(){var c,i,r,o,l,s,u,h,g,m,p,f,b,v,y,x,S,w,N,D,M,C,k,T,I,P,R,A,E,U,F,O,Y,L,q,z,G,V,B,Q,H,$,K,j,X,W,J,Z,ee,te,ne,ae,ce,ie,re,oe,le,se,de,ue,he,ge;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:console.log("KQ In",n),this.entity=n.data,c=n.data,i=new Date(c.received_date),r=new Date(i.getTime()+24*c.valid_number*60*60*1e3),d(r).format("DD/MM/YYYY"),o=d(i).format("DD/MM/YYYY"),(l=[]).push({text:"\n"}),s="en"==t?this.entity.company_name_e:this.entity.company_name_l,u="en"==t?this.entity.address_e:this.entity.address_l,h="en"==t?"Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 b\xe1o gi\xe1: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length),"0"==t&&(h="M\xe3 s\u1ed1 b\xe1o gi\xe1/ Quotation code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)),l.push({alignment:"justify",columns:[{text:[{text:s,bold:!0},"\n",{text:u},"\n",{text:this.entity.contact_name_sender,bold:!0},"\n",{text:null==this.entity.sender_phone?"":this.entity.sender_phone},"\n",{text:null==this.entity.email?"":this.entity.email}],style:"body_top"},{qr:h,foreground:"#20a8d8",fit:65,alignment:"right"}]}),g="en"==t?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,","0"==t&&(g="K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng/ Dear customers,"),m="en"==t?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.",0==t&&(m="Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry."),p="en"==t?"Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any).":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3).",0==t&&(p="Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra b\u1ea3ng b\xe1o gi\xe1 v\xe0 th\xf4ng tin k\u1ef9 thu\u1eadt \u0111\xednh k\xe8m (n\u1ebfu c\xf3)/ Please find enclosed our quotation answering your analytical needs, as well as the corresponding technical sheets (if any)."),f="en"==t?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",b="en"==t?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",v="en"==t?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",y="en"==t?"QUOTATION":"B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M","0"==t&&(y="B\xc1O GI\xc1 D\u1ecaCH V\u1ee4 KI\u1ec2M NGHI\u1ec6M\nQUOTATION"),l.push({text:"\n"}),l.push({table:{widths:["*"],body:[[{text:g,alignment:"left",style:"body_footer"}],[{text:m,alignment:"left",style:"body_footer"}],[{text:p,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),l.push({text:"\n"}),x=this.formatPipe.localeString(c.total),S="0.00",w=c.total*c.promo_perorder/100,N=this.formatPipe.localeString((c.total-w)*c.tax_vat/100),D=this.formatPipe.localeString(parseFloat(c.total)-w+(c.total-w)*c.tax_vat/100),null!=c.promo_special&&""!=c.promo_special&&(S=this.formatPipe.localeString(c.promo_special),N=this.formatPipe.localeString((c.total-c.promo_special-(w=(c.total-c.promo_special)*c.promo_perorder/100))*c.tax_vat/100),D=this.formatPipe.localeString(parseFloat(c.total)-parseFloat(c.promo_special)-w+(c.total-c.promo_special-w)*c.tax_vat/100)),M=this.formatPipe.localeString(w),C=1,k="en"==t?"No.":"STT","0"==t&&(k="STT\nNo."),T="en"==t?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m","0"==t&&(T="Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m\nParameters"),I="en"==t?"Method":"Ph\u01b0\u01a1ng ph\xe1p","0"==t&&(I="Ph\u01b0\u01a1ng ph\xe1p\nMethod"),P="en"==t?"Note":"Ghi ch\xfa","0"==t&&(P="Ghi ch\xfa\nNote"),R="en"==t?"Unit price":"\u0110\u01a1n gi\xe1","0"==t&&(R="\u0110\u01a1n gi\xe1\nUnit price"),A="en"==t?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng","0"==t&&(A="S\u1ed1 l\u01b0\u1ee3ng\nQuantity"),E="en"==t?"Amount":"Th\xe0nh ti\u1ec1n","0"==t&&(E="Th\xe0nh ti\u1ec1n\nAmount"),U=e(c.orders_list.filter(function(e){return 2!=e.is_active}));try{for(U.s();!(F=U.n()).done;)if((O=F.value).orderdetail_list.length>0){l.push({table:{widths:[20,"*",120,100,50,50,60],body:[[{border:[!0,!0,!0,!0],text:{text:k,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:T,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:I,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:P,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:R,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:A,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:E,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}}),Y=null==O.weight?"":O.weight,L="en"==t?"Sample volume: "+Y:"L\u01b0\u1ee3ng m\u1eabu: "+Y,"0"==t&&(L="L\u01b0\u1ee3ng m\u1eabu/ Sample volume: "+Y),l.push({table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:C+". "+("0"==t?O.sample_name+"/ "+O.sample_name_e:"en"==t?O.sample_name_e:O.sample_name),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:{text:this.formatPipe.localeString(O.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:6,text:{text:L,italics:!0,bold:!1},border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}}),q=[],z=1,G=[],V="en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",B="en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",Q="en"==t?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)","0"==t&&(V="T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)/ Total (not incluled VAT)",B="T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)/ Total (incluled VAT)",Q="Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)/ Discount on total orders (%)"),H=e(O.orderdetail_list);try{for(H.s();!($=H.n()).done;){K=$.value,j=!1,"b709ca6e-2823-11eb-9a33-acde48001122"==K.department_id?(G.push(!0),j=!0):(G.push(!1),j=!1),X="",W=null==K.standards?[]:JSON.parse(K.standards),J=e(W.filter(function(e){return null!=e}));try{for(J.s();!(Z=J.n()).done;)null==(ee=Z.value).id?null!=ee&&(X+="("+ee+")"):X+="("+ee.id+")"}catch(me){J.e(me)}finally{J.f()}te="en"==t?K.specification_ex_name_e:K.specification_ex_name_l,"0"==t&&(te=K.specification_ex_name_l+"/ "+K.specification_ex_name_e),q.push({STT:z,Para:[{text:te+" ",italics:j},{text:X,fontSize:8,italics:j}],Method:K.method,Note:K.comment_ext,Price:this.formatPipe.localeString(K.price*(1-(null==K.discount?0:K.discount)/100)),Qty:K.quantity,Amount:this.formatPipe.localeString(K.price*K.quantity*(1-(null==K.discount?0:K.discount)/100))}),z+=1}}catch(me){H.e(me)}finally{H.f()}l.push(this.tablePrintQuotation(q,["STT","Para","Method","Note","Price","Qty","Amount"],[20,"*",120,100,50,50,60],G)),ne=""!=c.title_promo_spec&&null!=c.title_promo_spec?c.title_promo_spec:"en"==t?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m","0"==t&&(ne=""!=c.title_promo_spec&&null!=c.title_promo_spec?c.title_promo_spec:"Gi\u1ea3m gi\xe1 cho nh\xf3m/ Discount on group"),C==c.orders_list.filter(function(e){return 2!=e.is_active}).length&&l.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:V,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:B,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:V,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:Q,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:B,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:V,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:B,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[20,"*",120,100,50,50,60],body:[[{colSpan:6,text:V,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:x,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:Q,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:N,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:6,text:B,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}),C+=1}}catch(me){U.e(me)}finally{U.f()}if(l.push({text:"\n"}),this.entity.standard_list.length>0){ae="",ce=e(this.entity.standard_list);try{for(ce.s();!(ie=ce.n()).done;)re=ie.value,oe="("+re.id+") "+("en"==t?re.description_e:re.description_l),ae.includes(oe)||(ae+=oe+"\n")}catch(me){ce.e(me)}finally{ce.f()}l.push({text:ae,fontSize:8,italics:!0})}if(l.push({text:"\n"}),le="en"==t?"These prices are valid for one month if the quotation is accepted within one month.\nPayment period: on order.\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + Account number (VND): 15000168\n       + Bank name: Asia Commercial Bank\n       +Bank branch: Dong Sai Gon":"Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\n       + S\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",se="en"==t?"Estimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.":"Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng",de="en"==t?"For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form":"N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.",0==t&&(le="Hi\u1ec7u l\u1ef1c b\xe1o gi\xe1 trong v\xf2ng 30 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y b\xe1o gi\xe1./ These prices are valid for one month if the quotation is accepted within one month.\nTh\u1eddi h\u1ea1n thanh to\xe1n: khi g\u1edfi \u0111\u01a1n h\xe0ng./ Payment period: on order.\nN\u01a1i nh\u1eadn m\u1eabu: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong, 114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c, TP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam. Th\xf4ng tin chuy\u1ec3n kho\u1ea3n:\nPlease send your samples to this address: Sac Ky Tien Phong Science & Technology JSC, 114 Truong Van Bang Street, Thanh My Loi Ward, Th\u1ee7 \u0110\u1ee9c Dist., Ho Chi Minh, Viet Nam. Bank transfer information:\n       + T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong/ Account name: CONG TY CP KHCN SAC KY TIEN PHONG\n       + S\u1ed1 t\xe0i kho\u1ea3n/ Account number (VN\u0110): 15000168\n       + Ng\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u/ Bank name: Asia Commercial Bank\n       + Chi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n/ Bank branch: Dong Sai Gon",se="Th\u1eddi gian ph\xe2n t\xedch m\u1eabu d\u1ef1 ki\u1ebfn: 5 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t)\nEstimated normal TAT: 5 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements).\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu g\u1ea5p: 3 ng\xe0y l\xe0m vi\u1ec7c (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed g\u1ea5p = 1,5 x Ph\xed th\u01b0\u1eddng.\nRush TAT: 3 working days (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Rush fee = 1,5 x Normal fee.\nTh\u1eddi gian ph\xe2n t\xedch m\u1eabu kh\u1ea9n: 24-48 gi\u1edd (kh\xf4ng bao g\u1ed3m th\u1ee9 b\u1ea3y, ch\u1ee7 nh\u1eadt, ng\xe0y l\u1ec5 v\xe0 c\xe1c ch\u1ec9 ti\xeau g\u1eedi th\u1ea7u ph\u1ee5, c\xe1c ch\u1ec9 ti\xeau c\xf3 y\xeau c\u1ea7u \u0111\u1eb7c bi\u1ec7t). Ph\xed kh\u1ea9n = 2 x Ph\xed th\u01b0\u1eddng\nSuper rush TAT: 24-48 hours (not included Saturday, Sunday, Holidays, parameters are performed by subcontractors and parameters have special analytical requirements). Super rush fee = 2 x Normal fee.",de="N\u1ebfu qu\xfd kh\xe1ch h\xe0ng \u0111\u1ed3ng \xfd g\u1eedi m\u1eabu vui l\xf2ng truy c\u1eadp link http://phieuyeucauthunghiemtv.com ho\u1eb7c qu\xe9t m\xe3 QR code \u0111\u1ec3 \u0111i\u1ec1n th\xf4ng tin g\u1eedi m\u1eabu ki\u1ec3m nghi\u1ec7m.\n For sending requests or samples, please go to http://testingrequestform.com or scan QR code to fill in The testing request form."),l.push({text:le,fontSize:10}),l.push({text:"\n"}),l.push({text:se,fontSize:8,italics:!0}),l.push({text:"\n"}),l.push({columns:[{width:"*",text:de,fontSize:10},{width:"*",qr:"http://phieuyeucauthunghiemtv.com",foreground:"#20a8d8",fit:45,alignment:"center"}]}),l.push({text:"\n"}),l.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:o+"\n"+("en"==t?"Valid by":"Ng\u01b0\u1eddi l\u1eadp b\xe1o gi\xe1"),alignment:"center",fontSize:10}]}),l.push({text:"\n"}),null==this.entity.signature_user){a.next=50;break}return ue=this.baseFolder+this.entity.signature_user,a.t0=l,a.t1={width:"*",text:"",fontSize:10},a.next=45,this._convertBase64ImageFromURL(ue);case 45:a.t2=a.sent,a.t3={width:"150",image:a.t2,alignment:"center"},a.t4=[a.t1,a.t3],a.t5={columns:a.t4},a.t0.push.call(a.t0,a.t5);case 50:return a.t6=[25,80,25,70],a.t7={fontSize:12,columnGap:20},a.t8=[{text:y,style:"title_top"},{text:"\n"},{text:h,alignment:"right",fontSize:13,bold:!0},l],a.t9=function(e,t){return d(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:b+"\n"+f,alignment:"left",style:"body_footer"},{height:150,text:v,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},a.t10=function(e,t,n){return{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}},a.t11={header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},a.next=58,this._convertBase64ImageFromURL(this._logoPath);case 58:return a.t12=a.sent,a.next=61,this._convertBase64ImageFromURL(this._logoIsoPath);case 61:a.t13=a.sent,a.t14={myLogo:a.t12,myIso:a.t13},he={pageSize:"A4",pageMargins:a.t6,defaultStyle:a.t7,content:a.t8,footer:a.t9,header:a.t10,styles:a.t11,images:a.t14},ge=(ge="'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),_.a.createPdf(he).download(ge),_.a.createPdf(he).open();case 66:case"end":return a.stop()}},a,this)}))});case 2:case"end":return n.stop()}},n,this)}))}},{key:"printBOAsPDF",value:function(t){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,c=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(a={}).id=this._id,this._dataService.post("/request/detailIn",a).subscribe(function(n){return Object(s.__awaiter)(c,void 0,void 0,regeneratorRuntime.mark(function a(){var c,i,r,o,l,s,u,h,g,m,p,f,b,v,y,x,S,w,N,D,M,C,k,T,I,P,R,A,E,U,F,O,Y,L,q,z,G,V,B,Q,H,$,K,j,X,W,J,Z,ee,te,ne,ae,ce,ie,re,oe,le,se,de,ue,he,ge,me,_e,pe,fe,be,ve,ye,xe,Se,we,Ne,De;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.entity=n.data,c=n.data,i=new Date(c.received_date),r=new Date(i.getTime()+24*c.valid_number*60*60*1e3),d(r).format("DD/MM/YYYY"),o=d(i).format("DD/MM/YYYY"),(l=[]).push({text:"\n"}),s=null==this.entity.company_receiver?this.entity.company_name_l:"en"==t?null==this.entity.company_receiver.company_name_e?this.entity.company_receiver.company_name_l:this.entity.company_receiver.company_name_e:this.entity.company_receiver.company_name_l,u=null==this.entity.company_receiver?null==this.entity.address_l?"":this.entity.address_l:"en"==t?null==this.entity.company_receiver.address_e?this.entity.company_receiver.address_l:this.entity.company_receiver.address_e:this.entity.company_receiver.address_l,h="en"==t?"Order code: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length):"M\xe3 s\u1ed1 \u0111\u01a1n h\xe0ng: "+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length),l.push({alignment:"justify",columns:[{text:[{text:s,bold:!0},"\n",{text:u},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.contact_name?"":this.entity.contact_receiver.contact_name,bold:!0},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.phone||"-"==this.entity.contact_receiver.phone?"":this.entity.contact_receiver.phone},"\n",{text:null==this.entity.contact_receiver||null==this.entity.contact_receiver.email?"":this.entity.contact_receiver.email}],style:"body_top"},{qr:h,foreground:"#20a8d8",fit:65,alignment:"right"}]}),g="en"==t?"Dear customers,":"K\xednh ch\xe0o qu\xfd kh\xe1ch h\xe0ng,",m="en"==t?"Thank you for contacting Sac Ky Tien Phong Science & Technology JSC for your inquiry.":"Ch\xe2n th\xe0nh c\u1ea3m \u01a1n qu\xfd kh\xe1ch \u0111\xe3 li\xean h\u1ec7 v\u1edbi C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong.",p="en"==t?"Sac Ky Tien Phong Science & Technology JSC would like to confirm we received the sample provided by customers (please see attachment).":"C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong xin x\xe1c nh\u1eadn \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c m\u1eabu do qu\xfd kh\xe1ch h\xe0ng cung c\u1ea5p (vui l\xf2ng xem danh s\xe1ch \u0111\xednh k\xe8m).",f="en"==t?"Please check and confirm the information: sample name, sample description, parameters, etc\u2026 and notify us immediately in case corrections are needed. The information in this receipt will be used for outputting the testing report.":"Qu\xfd kh\xe1ch vui l\xf2ng ki\u1ec3m tra v\xe0 x\xe1c nh\u1eadn l\u1ea1i c\xe1c th\xf4ng tin: t\xean m\u1eabu, m\xf4 t\u1ea3 m\u1eabu, ch\u1ec9 ti\xeau ph\xe2n t\xedch, \u2026 v\xe0 th\xf4ng b\xe1o ngay cho ch\xfang t\xf4i trong tr\u01b0\u1eddng h\u1ee3p c\u1ea7n ch\u1ec9nh s\u1eeda. Nh\u1eefng th\xf4ng tin trong bi\xean nh\u1eadn n\xe0y s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho vi\u1ec7c xu\u1ea5t k\u1ebft qu\u1ea3.",b="en"==t?"114 Truong Van Bang St., Thanh My Loi Ward , Th\u1ee7 \u0110\u1ee9c Dist.,\nHo Chi Minh city, Vietnam":"114 Tr\u01b0\u01a1ng V\u0103n Bang, Ph\u01b0\u1eddng Th\u1ea1nh M\u1ef9 L\u1ee3i, TP.Th\u1ee7 \u0110\u1ee9c\nTP.H\u1ed3 Ch\xed Minh, Vi\u1ec7t Nam",v="en"==t?"SAC KY TIEN PHONG Science & Technology JSC":"C\xd4NG TY CP KHCN S\u1eaeC K\xdd TI\xcaN PHONG",y="en"==t?"Tel : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com":"\u0110i\u1ec7n tho\u1ea1i : (+84) 28 6271 1823\nEmail : EDC-PR@sackytienphong.com\nWebsite : www.sackytienphong.com",x="en"==t?"RECEIPT":"BI\xcaN NH\u1eacN",l.push({text:"\n"}),l.push({table:{widths:["*"],body:[[{text:g,alignment:"left",style:"body_footer"}],[{text:m,alignment:"left",style:"body_footer"}],[{text:p,alignment:"left",style:"body_footer"}],[{text:f,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}),l.push({text:"\n"}),S=this.formatPipe.localeString(c.total),w="0.00",N=c.total*c.promo_perorder/100,D=this.formatPipe.localeString((c.total-N)*c.tax_vat/100),M=this.formatPipe.localeString(parseFloat(c.total)-N+(c.total-N)*c.tax_vat/100),null!=c.promo_special&&""!=c.promo_special&&(w=this.formatPipe.localeString(c.promo_special),D=this.formatPipe.localeString((c.total-c.promo_special-(N=(c.total-c.promo_special)*c.promo_perorder/100))*c.tax_vat/100),M=this.formatPipe.localeString(parseFloat(c.total)-parseFloat(c.promo_special)-N+(c.total-c.promo_special-N)*c.tax_vat/100)),C=this.formatPipe.localeString(N),k=1,T="en"==t?"No.":"STT",I="en"==t?"Parameters":"Ch\u1ec9 ti\xeau th\u1eed nghi\u1ec7m",P="en"==t?"Method":"Ph\u01b0\u01a1ng ph\xe1p ",R="en"==t?"Unit price":"\u0110\u01a1n gi\xe1",A="en"==t?"Quantity":"S\u1ed1 l\u01b0\u1ee3ng",E="en"==t?"Amount":"Th\xe0nh ti\u1ec1n",U="en"==t?"Sample code: ":"M\xe3 m\u1eabu: ",F="en"==t?"Sample description: ":"T\xecnh tr\u1ea1ng m\u1eabu: ",O="en"==t?"Amount of samples: ":"Kh\u1ed1i l\u01b0\u1ee3ng m\u1eabu: ",Y="en"==t?"Date of receiving samples: "+d(new Date(c.received_date)).format("DD/MM/YYYY"):"Ng\xe0y nh\u1eadn m\u1eabu: "+d(new Date(c.received_date)).format("DD/MM/YYYY"),L=e(c.orders_list.filter(function(e){return 2!=e.is_active}));try{for(L.s();!(q=L.n()).done;){z=q.value,G="en"==t?"Client estimated due date: "+d(new Date(z.estimated_date)).format("DD/MM/YYYY"):"Ng\xe0y d\u1ef1 ki\u1ebfn tr\u1ea3 k\u1ebft qu\u1ea3: "+d(new Date(z.estimated_date)).format("DD/MM/YYYY"),l.push({table:{headerRows:1,widths:[30,"*","*",50,50,110],body:[[{border:[!0,!0,!0,!0],text:{text:T,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:I,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:P,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:R,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:A,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:E,bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}}),V=null==z.weight?"":z.weight,l.push({table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:k+". "+z.sample_name,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!0,fillColor:"#e2e2e2"},{},{},{},{},{text:{text:this.formatPipe.localeString(z.total_sub),bold:!0},border:[!1,!1,!0,!1],style:"body_footer",alignment:"right",fillColor:"#e2e2e2"}],[{colSpan:5,text:U+(null==z.inner_code?"":z.inner_code),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:F+(null==z.description?"":z.description),border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:O+": "+V,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:Y,border:[!0,!1,!1,!1],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!1],fillColor:"#e2e2e2"}],[{colSpan:5,text:G,border:[!0,!1,!1,!0],style:"body_footer",alignment:"left",bold:!1,fillColor:"#e2e2e2"},{},{},{},{},{text:"",border:[!1,!1,!0,!0],fillColor:"#e2e2e2"}]]},layout:{defaultBorder:!1}}),B=[],Q=1,H=[],$=e(z.orderdetail_list);try{for($.s();!(K=$.n()).done;){j=K.value,X=!1,"b709ca6e-2823-11eb-9a33-acde48001122"==j.department_id?(H.push(!0),X=!0):(H.push(!1),X=!1),W="",J=null==j.standards?[]:JSON.parse(j.standards),Z=e(J.filter(function(e){return null!=e}));try{for(Z.s();!(ee=Z.n()).done;)null==(te=ee.value).id?null!=te&&(W+="("+te+")"):W+="("+te.id+")"}catch(Me){Z.e(Me)}finally{Z.f()}B.push({STT:Q,Para:[{text:("en"==t?j.specification_ex_name_e:j.specification_ex_name_l)+" ",italics:X},{text:W,fontSize:8,italics:X}],Method:j.method,Price:this.formatPipe.localeString(j.price*(1-(null==j.discount?0:j.discount)/100)),Qty:j.quantity,Amount:this.formatPipe.localeString(j.price*j.quantity*(1-(null==j.discount?0:j.discount)/100))}),Q+=1}}catch(Me){$.e(Me)}finally{$.f()}l.push(this.tablePrintQuotationa(B,["STT","Para","Method","Price","Qty","Amount"],[30,"*","*",50,50,110],H)),ne=""!=c.title_promo_spec&&null!=c.title_promo_spec?c.title_promo_spec:"en"==t?"Discount on group":"Gi\u1ea3m gi\xe1 cho nh\xf3m",k==c.orders_list.filter(function(e){return 2!=e.is_active}).length&&l.push(null==this.entity.promo_special||""==this.entity.promo_special?null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:C,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:null==this.entity.promo_perorder||""==this.entity.promo_perorder?{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}:{table:{widths:[30,"*","*",50,50,110],body:[[{colSpan:5,text:"en"==t?"Total (not incluled VAT)":"T\u1ed5ng chi ph\xed (ch\u01b0a bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:S,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:ne,border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:w,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Discount on total orders (%)":"Gi\u1ea3m gi\xe1 tr\xean t\u1ed5ng s\u1ed1 \u0111\u01a1n \u0111\u1eb7t h\xe0ng (%)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:C,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"VAT",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:D,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}],[{colSpan:5,text:"en"==t?"Total (incluled VAT)":"T\u1ed5ng chi ph\xed (bao g\u1ed3m VAT)",border:[!0,!1,!1,!0],style:"body_footer",alignment:"right",bold:!0},{},{},{},{},{text:{text:M,bold:!0,style:"body_footer"},border:[!1,!1,!0,!0],alignment:"right"}]]},layout:{defaultBorder:!1}}),k+=1}}catch(Me){L.e(Me)}finally{L.f()}if(this.entity.standard_list.length>0){ae="",ce=e(this.entity.standard_list);try{for(ce.s();!(ie=ce.n()).done;)re=ie.value,oe="("+re.id+") "+("en"==t?re.description_e:re.description_l),ae.includes(oe)||(ae+=oe+"\n")}catch(Me){ce.e(Me)}finally{ce.f()}l.push({text:ae,fontSize:8,italics:!0})}l.push({text:"\n"}),le="en"==t?"BILLING INFORMATION :":"Th\xf4ng tin xu\u1ea5t ho\xe1 \u0111\u01a1n :",se="en"==t?"Bank transfer information :":"Th\xf4ng tin chuy\u1ec3n kho\u1ea3n :",de="en"==t?"Account name: CONG TY CP KHCN SAC KY TIEN PHONG\nAccount number (VND): 15000168\nBank name: Asia Commercial Bank Bank branch: Dong Sai Gon":"T\xean t\xe0i kho\u1ea3n: C\xf4ng ty CP KHCN S\u1eafc K\xfd Ti\xean Phong\nS\u1ed1 t\xe0i kho\u1ea3n (VN\u0110): 15000168\nNg\xe2n h\xe0ng: Ng\xe2n h\xe0ng TMCP \xc1 Ch\xe2u\nChi nh\xe1nh: \u0110\xf4ng S\xe0i G\xf2n",ue="en"==t?"Company\u2019s name: ":"T\xean c\xf4ng ty: ",he="en"==t?"Address: ":"\u0110\u1ecba ch\u1ec9: ",ge="en"==t?"Tax number: ":"M\xe3 s\u1ed1 thu\u1ebf: ",me=null==this.entity.company_bill?s:this.entity.company_bill.company_name_l,_e=null==this.entity.company_bill?b:null==this.entity.company_bill.address_l?"":this.entity.company_bill.address_l,pe=null==this.entity.company_bill?this.entity.tax_code:null==this.entity.company_bill.tax_code?"":this.entity.company_bill.tax_code,fe=c.orders_list.filter(function(e){return null!=e.note&&""!=e.note}),be=0,ve="",ye=e(fe);try{for(ye.s();!(xe=ye.n()).done;)Se=xe.value,be<=Se.note.length&&(ve=Se.note,be=Se.note.length)}catch(Me){ye.e(Me)}finally{ye.f()}if(we="",""!=ve&&(we="en"==t?"OTHERS INFORMATION :":"Th\xf4ng tin kh\xe1c :"),l.push(""!=ve?{table:{widths:["*","*"],body:[[{border:[!0,!0,!0,!1],text:{text:le,bold:!0},style:"body_footer",alignment:"left"},{border:[!0,!0,!0,!1],text:{text:se,bold:!0},style:"body_footer",alignment:"left"}],[{border:[!0,!1,!0,!0],text:{text:ue+me+"\n"+he+_e+"\n"+ge+pe,bold:!1},style:"body_footer",alignment:"left"},{border:[!0,!1,!0,!0],text:{text:de,bold:!1},style:"body_footer",alignment:"left"}],[{colSpan:2,border:[!0,!0,!0,!1],text:{text:we,bold:!0},style:"body_footer",alignment:"left"},{}],[{colSpan:2,border:[!0,!1,!0,!0],text:{text:ve,bold:!1},style:"body_footer",alignment:"left"},{}]]},layout:{defaultBorder:!1}}:{table:{widths:["*","*"],body:[[{border:[!0,!0,!0,!1],text:{text:le,bold:!0},style:"body_footer",alignment:"left"},{border:[!0,!0,!0,!1],text:{text:se,bold:!0},style:"body_footer",alignment:"left"}],[{border:[!0,!1,!0,!0],text:{text:ue+me+"\n"+he+_e+"\n"+ge+pe,bold:!1},style:"body_footer",alignment:"left"},{border:[!0,!1,!0,!0],text:{text:de,bold:!1},style:"body_footer",alignment:"left"}]]},layout:{defaultBorder:!1}}),l.push({text:"\n"}),l.push({columns:[{width:"*",text:"",fontSize:10},{width:"200",text:o+"\n"+("en"==t?"Valid by":"Ng\u01b0\u1eddi l\u1eadp bi\xean nh\u1eadn"),alignment:"center",fontSize:10}]}),l.push({text:"\n"}),null==this.entity.signature_user){a.next=32;break}return Ne=this.baseFolder+this.entity.signature_user,a.t0=l,a.t1={width:"*",text:"",fontSize:10},a.next=27,this._convertBase64ImageFromURL(Ne);case 27:a.t2=a.sent,a.t3={width:"150",image:a.t2,alignment:"center"},a.t4=[a.t1,a.t3],a.t5={columns:a.t4},a.t0.push.call(a.t0,a.t5);case 32:return a.t6=[25,80,25,70],a.t7={fontSize:12,columnGap:20},a.t8=[{text:x,style:"title_top"},{text:"\n"},{text:h,alignment:"right",fontSize:13,bold:!0},l],a.t9=function(e,t){return d(new Date).format("DD/MM/YYYY"),{table:{widths:[5,"*",200],body:[[{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],height:150,text:"",alignment:"right",style:"body_footer"}],[{height:150,text:"",alignment:"left",style:"body_footer"},{height:150,text:v+"\n"+b,alignment:"left",style:"body_footer"},{height:150,text:y,alignment:"left",style:"body_footer"}]]},layout:{defaultBorder:!1}}},a.t10=function(e,t,n){return{table:{widths:[160,"*"],body:[[{image:"myLogo",width:160,height:70,alignment:"left"},{width:150,height:70,alignment:"right",margin:[10,50,10,10],text:e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}},a.t11={header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}},a.next=40,this._convertBase64ImageFromURL(this._logoPath);case 40:return a.t12=a.sent,a.next=43,this._convertBase64ImageFromURL(this._logoIsoPath);case 43:a.t13=a.sent,a.t14={myLogo:a.t12,myIso:a.t13},De={pageSize:"A4",pageMargins:a.t6,defaultStyle:a.t7,content:a.t8,footer:a.t9,header:a.t10,styles:a.t11,images:a.t14},("'print-'"+this.entity.employee_nr+this.entity.request_no.substr(2,this.entity.request_no.length)+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),_.a.createPdf(De).open();case 48:case"end":return a.stop()}},a,this)}))});case 2:case"end":return n.stop()}},n,this)}))}},{key:"tablePrintQuotation",value:function(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,a)}}}},{key:"buildTableBodyPrintQuotation",value:function(e,t,n){var a=[],c=0;return e.forEach(function(e){var i=[],r=1;t.forEach(function(t){i.push({text:{text:e[t]},alignment:2==r||3==r||4==r?"left":5==r||7==r?"right":"center",fontSize:10,italics:2==r&&n[c]}),r+=1,c+=1}),a.push(i)}),a}},{key:"tablePrintQuotationa",value:function(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotationa(e,t,a)}}}},{key:"buildTableBodyPrintQuotationa",value:function(e,t,n){var a=[],c=0;return e.forEach(function(e){var i=[],r=1;t.forEach(function(t){i.push({text:{text:e[t]},alignment:2==r||3==r?"left":4==r||6==r?"right":"center",fontSize:10,italics:2==r&&n[c]}),r+=1,c+=1}),a.push(i)}),a}},{key:"_convertBase64ImageFromURL",value:function(e){return new Promise(function(t,n){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=function(e){n(e)},a.src=e})}},{key:"loadImgs",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/folder/getallfoldersnopaging",t).subscribe(function(t){return Object(s.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._logoPath+=t.data.filter(function(e){return"logo-stp"==e.file_name_e})[0].path_file,this._logoIsoPath+=t.data.filter(function(e){return"logo-iso"==e.file_name_e})[0].path_file;case 1:case"end":return e.stop()}},e,this)}))})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}},{key:"createImageFromBlob",value:function(e){var t=this,n=new FileReader;n.addEventListener("load",function(){t.imageToShow=n.result},!1),e&&n.readAsDataURL(e)}},{key:"loadSampleNature",value:function(){var t=this;this._dataService.post("/sample_matrix/getallsamplenaturenopaging",{short_code:this.user.short_code}).subscribe(function(n){console.log(n);var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({id:r.id,name:"en"==t.user.lang?r.name_e:r.name_l})}}catch(o){i.e(o)}finally{i.f()}t._samplenatures=c})}},{key:"exportQuotationExcel",value:function(){var t=this;this._dataService.post("/request/detailIn",{id:this._id}).subscribe(function(n){return Object(s.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var a,c,i,r,o,l,s,u,h,g,m,_,p,f,b,v,x,S,w,N,D;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[],c=1,i=e(n.data.orders_list.filter(function(e){return 2!=e.is_active}));try{for(i.s();!(r=i.n()).done;){o=r.value,a.push({"No.":c+". "+(null==o.sample_name_e?o.sample_name:o.sample_name_e),Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(parseFloat(o.total_sub))}),a.push({"No.":"Sample volume: "+(null==o.weight?"":o.weight),Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),l=1,s=e(o.orderdetail_list);try{for(s.s();!(u=s.n()).done;)h=u.value,a.push({"No.":l,Parameters:h.specification_ex_name_l,Method:h.method,Note:h.comment_ext,"Unit Price":this.formatPipe.localeString(parseFloat(h.price)),Quantity:h.quantity,Discount:h.discount+"%",Amount:this.formatPipe.localeString(parseFloat(h.price)*parseInt(h.quantity)*(1-parseFloat(null==h.discount?0:h.discount)/100))}),l+=1}catch(M){s.e(M)}finally{s.f()}c+=1}}catch(M){i.e(M)}finally{i.f()}a.push({"No.":"Total (before tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(n.data.total)}),null==n.data.promo_special?null==n.data.promo_perorder?(g=parseFloat(n.data.total)*parseFloat(n.data.tax_vat)/100,m=Math.round(parseFloat(n.data.total)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeStringEn(g)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(m)})):(_=parseFloat(n.data.total)*parseFloat(n.data.promo_perorder)/100,p=(parseFloat(n.data.total)-_)*parseFloat(n.data.tax_vat)/100,f=Math.round((parseFloat(n.data.total)-_)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on parameters",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.promo_perorder+"%",Amount:this.formatPipe.localeString(_)}),a.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(p)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(f)})):null==n.promo_perorder?(b=parseFloat(n.data.promo_special),v=(parseFloat(n.data.total)-b)*parseFloat(n.data.tax_vat)/100,x=Math.round((parseFloat(n.data.total)-b)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on group",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(b),Amount:this.formatPipe.localeString(b)}),a.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(v)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(x)})):(S=parseFloat(n.data.promo_special),w=parseFloat(n.data.total)*parseFloat(n.data.promo_perorder)/100,N=(parseFloat(n.data.total)-S-w)*parseFloat(n.data.tax_vat)/100,D=Math.round((parseFloat(n.data.total)-S-w)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on group",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(S),Amount:this.formatPipe.localeString(S)}),a.push({"No.":"Discount on parameters",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.promo_perorder+"%",Amount:this.formatPipe.localeString(w)}),a.push({"No.":"VAT",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(N)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"",Note:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(D)})),this._excelService.exportAsExcelFile(a,"Requests-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+a.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+a.length+" "+y.a.record,"OK");case 5:case"end":return t.stop()}},t,this)}))})}},{key:"exportBOExcel",value:function(){var t=this;this._dataService.post("/request/detailIn",{id:this._id}).subscribe(function(n){return Object(s.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var a,c,i,r,o,l,s,u,h,g,m,_,p,f,b,v,x,S,w,N,D;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[],c=1,i=e(n.data.orders_list.filter(function(e){return 2!=e.is_active}));try{for(i.s();!(r=i.n()).done;){o=r.value,a.push({"No.":c+". "+(null==o.sample_name_e?o.sample_name:o.sample_name_e),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(parseFloat(o.total_sub))}),a.push({"No.":"Sample code: "+(null==o.sample_code?"":o.sample_code),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),a.push({"No.":"Sample description: "+(null==o.description_e&&null==o.description?"":o.description),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),a.push({"No.":"Sample volume: "+(null==o.weight?"":o.weight),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),a.push({"No.":"Received date: "+d(new Date(n.data.received_date)).format("DD/MM/YYYY"),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),a.push({"No.":"Returned date: "+d(new Date(n.data.returned_date)).format("DD/MM/YYYY"),Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:""}),l=1,s=e(o.orderdetail_list);try{for(s.s();!(u=s.n()).done;)h=u.value,a.push({"No.":l,Parameters:h.specification_ex_name_l,Method:h.method,"Unit Price":this.formatPipe.localeString(parseFloat(h.price)),Quantity:h.quantity,Discount:h.discount+"%",Amount:this.formatPipe.localeString(parseFloat(h.price)*parseInt(h.quantity)*(1-parseFloat(null==h.discount?0:h.discount)/100))}),l+=1}catch(M){s.e(M)}finally{s.f()}c+=1}}catch(M){i.e(M)}finally{i.f()}a.push({"No.":"Total (before tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(n.data.total)}),null==n.data.promo_special?null==n.data.promo_perorder?(g=parseFloat(n.data.total)*parseFloat(n.data.tax_vat)/100,m=Math.round(parseFloat(n.data.total)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeStringEn(g)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeStringEn(m)})):(_=parseFloat(n.data.total)*parseFloat(n.data.promo_perorder)/100,p=(parseFloat(n.data.total)-_)*parseFloat(n.data.tax_vat)/100,f=Math.round((parseFloat(n.data.total)-_)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on parameters",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.promo_perorder+"%",Amount:this.formatPipe.localeString(_)}),a.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(p)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(f)})):null==n.promo_perorder?(b=parseFloat(n.data.promo_special),v=(parseFloat(n.data.total)-b)*parseFloat(n.data.tax_vat)/100,x=Math.round((parseFloat(n.data.total)-b)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on group",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(b),Amount:this.formatPipe.localeString(b)}),a.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(v)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(x)})):(S=parseFloat(n.data.promo_special),w=parseFloat(n.data.total)*parseFloat(n.data.promo_perorder)/100,N=(parseFloat(n.data.total)-S-w)*parseFloat(n.data.tax_vat)/100,D=Math.round((parseFloat(n.data.total)-S-w)*(1+parseFloat(n.data.tax_vat)/100)),a.push({"No.":"Discount on group",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:this.formatPipe.localeString(S),Amount:this.formatPipe.localeString(S)}),a.push({"No.":"Discount on parameters",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.promo_perorder+"%",Amount:this.formatPipe.localeString(w)}),a.push({"No.":"VAT",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:n.data.tax_vat+"%",Amount:this.formatPipe.localeString(N)}),a.push({"No.":"Total (after tax)",Parameters:"",Method:"","Unit Price":"",Quantity:"",Discount:"",Amount:this.formatPipe.localeString(D)})),this._excelService.exportAsExcelFile(a,"BO-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+a.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+a.length+" "+y.a.record,"OK");case 5:case"end":return t.stop()}},t,this)}))})}}]),t}()).\u0275fac=function(e){return new(e||jn)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(l.a),x.bc(on.a),x.bc(et.a),x.bc(C.s))},jn.\u0275cmp=x.Vb({type:jn,selectors:[["app-req-detail"]],decls:81,vars:48,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","button","routerLink","/request/list",1,"btn","btn-sm","btn-primary","mr-sm-2"],["ngbDropdown","","class","btn-group","role","group",4,"ngIf"],[1,"card-body"],[1,"col-xl-3","xl-100"],["type","number","min","0","name","number_sample",1,"form-control","form-control-sm",3,"ngModel","disabled","ngModelChange","change"],[1,"text-danger"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"btn-group","flex-wrap"],[4,"ngFor","ngForOf"],[1,"col-sm-12","col-lg-12","col-xl-1"],[4,"ngIf"],["class","form theme-form",4,"ngIf"],["contentLanguage",""],["contentComment",""],["ngbDropdown","","role","group",1,"btn-group"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-success","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[1,"dropdown-item",3,"click"],["type","button",3,"ngClass","click"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],[1,"form","theme-form"],[1,"col"],[1,"form-group","row"],[1,"col-md-3","col-form-label",3,"for"],[1,"col-md-3"],["type","text",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change","keypress.enter"],["type","hidden",1,"form-control",3,"id","name","ngModel","ngModelChange"],["type","text","disabled","",1,"form-control","jdisabled",3,"id","placeholder","name","ngModel","ngModelChange"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","disabled","ngModelChange","change"],["name","_status",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["value","0"],["value","1"],["value","2"],[1,"col-md-3",3,"for"],["bindValue","id","bindLabel","name",3,"items","name","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["ng-option-tmp",""],["name","selectedCategory0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","placeholder","notFoundText","ngModelChange","change"],["name","selectedSpecification0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["type","number",3,"id","ngClass","placeholder","name","ngModel","disabled","ngModelChange","change"],[1,"col-md-3","col-form-label"],["name","selectedTemplate0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],["href","javascript:;",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-secondary"],["colspan","16",1,"text-right"],[1,"table-primary"],[2,"width","50px"],[2,"width","100px"],[1,"fa","fa-trash"],["scope","col"],["container","body",3,"ngbTooltip"],["href","javascript:;",3,"click"],["href","javascript:;","class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],[3,"ngClass","ngbTooltip","click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[3,"ngClass"],[2,"cursor","pointer",3,"click"],["type","number","min","0",2,"width","65px",3,"name","ngModel","ngClass","disabled","ngModelChange","change"],["type","checkbox",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],["href","javascript:;",1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[3,"ngClass","ngbTooltip","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],["type","text",3,"name","ngModel","ngClass","disabled","ngModelChange"],["type","text","min","0","mask","separator.2","thousandSeparator",",",3,"name","ngModel","ngClass","disabled","ngModelChange"],["type","number","min","0",3,"name","ngModel","ngClass","disabled","ngModelChange"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group",2,"text-align","center"],[1,"btn","btn-sm","btn-warning","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-2",3,"click"],[1,"form-group"],["for","takenote"],["id","takenote","rows","3","name","takenote",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["href","javascript:;",1,"btn","btn-light",3,"click"],["href","javascript:;","class","btn btn-primary",3,"click",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["href","javascript:;",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"button",7),x.dd(9),x.wc(10,"translate"),x.gc(),x.bd(11,sn,17,15,"div",8),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(12,"div",9),x.hc(13,"div",1),x.hc(14,"div",10),x.hc(15,"strong"),x.dd(16),x.wc(17,"translate"),x.gc(),x.gc(),x.hc(18,"div",10),x.dd(19),x.gc(),x.hc(20,"div",10),x.hc(21,"strong"),x.dd(22),x.wc(23,"translate"),x.gc(),x.gc(),x.hc(24,"div",10),x.dd(25),x.gc(),x.hc(26,"div",10),x.hc(27,"strong"),x.dd(28),x.wc(29,"translate"),x.gc(),x.gc(),x.hc(30,"div",10),x.dd(31),x.wc(32,"date"),x.gc(),x.hc(33,"div",10),x.hc(34,"strong"),x.dd(35),x.wc(36,"translate"),x.gc(),x.gc(),x.hc(37,"div",10),x.dd(38),x.wc(39,"date"),x.gc(),x.hc(40,"div",10),x.hc(41,"strong"),x.dd(42),x.wc(43,"translate"),x.gc(),x.gc(),x.hc(44,"div",10),x.hc(45,"input",11),x.rc("ngModelChange",function(e){return t.entity.number_sample=e})("change",function(){return t._updateSampleNo()}),x.gc(),x.gc(),x.hc(46,"div",10),x.hc(47,"strong"),x.dd(48),x.wc(49,"translate"),x.gc(),x.gc(),x.hc(50,"div",10),x.dd(51),x.gc(),x.hc(52,"div",10),x.hc(53,"strong"),x.dd(54),x.wc(55,"translate"),x.gc(),x.gc(),x.hc(56,"div",10),x.hc(57,"strong"),x.dd(58),x.gc(),x.gc(),x.hc(59,"div",10),x.hc(60,"strong"),x.dd(61),x.wc(62,"translate"),x.gc(),x.gc(),x.hc(63,"div",10),x.hc(64,"strong",12),x.dd(65),x.wc(66,"number"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(67,"div",2),x.hc(68,"div",3),x.hc(69,"div",4),x.hc(70,"div",1),x.hc(71,"div",13),x.hc(72,"div",14),x.bd(73,dn,4,5,"ng-container",15),x.gc(),x.gc(),x.hc(74,"div",16),x.bd(75,hn,2,1,"ng-container",17),x.gc(),x.gc(),x.gc(),x.bd(76,Bn,169,222,"form",18),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(77,Qn,18,9,"ng-template",null,19,x.cd),x.bd(79,Kn,22,13,"ng-template",null,20,x.cd)),2&e&&(x.Nb(9),x.fd(" ",x.xc(10,22,"Go back")," "),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","print")),x.Nb(5),x.ed(x.xc(17,24,"Company")),x.Nb(3),x.fd(" ","en"==t.user.lang?t.entity.company_name_e:t.entity.company_name_l," "),x.Nb(3),x.ed(x.xc(23,26,"Contact")),x.Nb(3),x.fd(" ",t.entity.contact_name," "),x.Nb(3),x.ed(x.xc(29,28,"Received date")),x.Nb(3),x.fd(" ",x.yc(32,30,t.entity.received_date,"dd/MM/yyyy HH:mm")," "),x.Nb(4),x.ed(x.xc(36,33,"Returned date")),x.Nb(3),x.fd(" ",x.yc(39,35,t.entity.returned_date,"dd/MM/yyyy HH:mm")," "),x.Nb(4),x.ed(x.xc(43,38,"Number of sample")),x.Nb(3),x.Dc("ngModel",t.entity.number_sample)("disabled",0!=t.entity.is_active||!t._authenService.hasPermission("REQ-LIST","create")),x.Nb(3),x.ed(x.xc(49,40,"Created by")),x.Nb(3),x.fd(" ",t.entity.created_by," "),x.Nb(3),x.ed(x.xc(55,42,"Request code")),x.Nb(4),x.ed(t.entity.request_no),x.Nb(3),x.ed(x.xc(62,44,"Total")),x.Nb(4),x.fd("",null==t.entity.total||"NaN"==t.entity.total?0:x.xc(66,46,t.entity.total)," (VND)"),x.Nb(8),x.Dc("ngForOf",t._xList),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")),x.Nb(1),x.Dc("ngIf",0!=t._currentTabActivated))},directives:[l.e,r.q,o.s,o.c,o.n,o.q,r.p,C.l,C.p,C.o,r.o,o.z,o.o,o.p,o.x,o.r,o.A,I.a,I.c,C.N,o.b,ln.a],pipes:[P.c,r.f,r.g,r.y],styles:[""]}),jn);function Wn(e,t){if(1&e){var n=x.ic();x.hc(0,"button",46),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(108);return e._openModal(t,null)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Add new request")," "))}function Jn(e,t){if(1&e){var n=x.ic();x.hc(0,"button",47),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(114);return e._exportAllRangeWithStatus(t)}),x.cc(1,"i",48),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function Zn(e,t){if(1&e){var n=x.ic();x.hc(0,"button",49),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(112);return e.openCopyModal(t,e.exportList,1)}),x.cc(1,"i",50),x.dd(2),x.wc(3,"translate"),x.wc(4,"translate"),x.gc()}2&e&&(x.Nb(2),x.gd(" ",x.xc(3,2,"Copy")," ",x.xc(4,4,"All")," "))}function ea(e,t){if(1&e){var n=x.ic();x.hc(0,"button",51),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(116);return e.openTemplateModal(t)}),x.cc(1,"i",52),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Request template")," "))}function ta(e,t){1&e&&x.cc(0,"img",53)}function na(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",54),x.hc(3,"h3",55),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function aa(e,t){if(1&e){var n=x.ic();x.hc(0,"button",68),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit,t=x.vc(2),a=x.Rc(108);return t._openModal(a,e)}),x.wc(1,"translate"),x.cc(2,"i",69),x.gc()}if(2&e){var a=x.vc(3);x.Fc("ngbTooltip","\n                          ",x.xc(1,2,"Edit"),"\n                          "),x.Dc("disabled",!a._authenService.hasPermission("REQ-LIST","update"))}}function ca(e,t){1&e&&(x.hc(0,"span",70),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Pending")))}function ia(e,t){1&e&&(x.hc(0,"span",71),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Confirmed")))}function ra(e,t){1&e&&(x.hc(0,"span",72),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cancel")))}function oa(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",57),x.dd(2),x.gc(),x.hc(3,"th",57),x.hc(4,"input",58),x.rc("change",function(e){x.Uc(n);var a=t.$implicit;return x.vc(2).selectItem(e,a.id)}),x.gc(),x.gc(),x.hc(5,"td"),x.hc(6,"button",59),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(2)._routeDetail(e)}),x.wc(7,"translate"),x.cc(8,"i",60),x.gc(),x.bd(9,aa,3,4,"button",61),x.hc(10,"button",62),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2),c=x.Rc(112);return a.openCopyModal(c,e,0)}),x.wc(11,"translate"),x.cc(12,"i",50),x.gc(),x.gc(),x.hc(13,"td"),x.dd(14),x.gc(),x.hc(15,"td"),x.dd(16),x.gc(),x.hc(17,"td"),x.dd(18),x.wc(19,"date"),x.gc(),x.hc(20,"td"),x.hc(21,"span",63),x.dd(22),x.gc(),x.gc(),x.hc(23,"td"),x.dd(24),x.gc(),x.hc(25,"td",64),x.dd(26),x.wc(27,"number"),x.gc(),x.hc(28,"td"),x.dd(29),x.gc(),x.hc(30,"td"),x.dd(31),x.wc(32,"date"),x.gc(),x.hc(33,"td"),x.bd(34,ca,3,3,"span",65),x.bd(35,ia,3,3,"span",66),x.bd(36,ra,3,3,"span",67),x.gc(),x.hc(37,"td"),x.dd(38),x.wc(39,"date"),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.Fc("name","ckU",c+1,""),x.Dc("checked",i.exportList.includes(a.id)),x.Nb(2),x.Fc("ngbTooltip","\n                          ",x.xc(7,21,"View detail"),"\n                          "),x.Dc("disabled",!i._authenService.hasPermission("REQ-LIST","read")),x.Nb(3),x.Dc("ngIf",a.is_active<=2),x.Nb(1),x.Fc("ngbTooltip","\n                          ",x.xc(11,23,"Copy"),"\n                          "),x.Dc("disabled",!i._authenService.hasPermission("REQ-LIST","update")),x.Nb(4),x.fd(" ",a.request_no," "),x.Nb(2),x.ed(a.order_no),x.Nb(2),x.ed(x.yc(19,25,a.received_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.Dc("ngbTooltip",a.note),x.Nb(1),x.ed("en"==i.user.lang?a.company_name_e:a.company_name_l),x.Nb(2),x.fd(" ","en"==i.user.lang?a.receive_company_e:a.receive_company_l," "),x.Nb(2),x.ed(x.xc(27,28,a.total)),x.Nb(3),x.ed(a.contact_name),x.Nb(2),x.ed(x.yc(32,30,a.returned_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.Dc("ngIf",0==a.is_active),x.Nb(1),x.Dc("ngIf",0!=a.is_active&&2!=a.is_active),x.Nb(1),x.Dc("ngIf",2==a.is_active),x.Nb(2),x.ed(x.yc(39,33,a.timestamp,"dd/MM/yyyy HH:mm"))}}function la(e,t){if(1&e&&(x.fc(0),x.bd(1,oa,40,36,"tr",56),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._requestslist)}}function sa(e,t){if(1&e&&(x.hc(0,"small",115),x.dd(1),x.gc()),2&e){var n=x.vc(2);x.Nb(1),x.ed(n.selectedCustomerLabel)}}function da(e,t){1&e&&(x.fc(0),x.hc(1,"a",116),x.cc(2,"img",117),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing")," "))}function ua(e,t){1&e&&(x.hc(0,"button",118),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Save & close")," "))}var ha=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function ga(e,t){if(1&e){var n=x.ic();x.hc(0,"form",73,74),x.rc("ngSubmit",function(){x.Uc(n);var e=x.vc();return e.saveChange(e.selectedCustomer)}),x.hc(2,"div",75),x.hc(3,"h4",76),x.dd(4),x.wc(5,"translate"),x.wc(6,"translate"),x.gc(),x.hc(7,"button",77),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(8,"span",78),x.dd(9,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(10,"div",79),x.hc(11,"div",80),x.hc(12,"div",81),x.hc(13,"div",82),x.hc(14,"label",83),x.dd(15),x.wc(16,"translate"),x.hc(17,"span",55),x.dd(18,"(*)"),x.gc(),x.gc(),x.hc(19,"input",84),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.number_sample=e}),x.wc(20,"translate"),x.gc(),x.hc(21,"input",85),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.id=e}),x.gc(),x.gc(),x.gc(),x.hc(22,"div",86),x.hc(23,"div",82),x.hc(24,"label",87),x.dd(25,"VAT (%) "),x.hc(26,"span",55),x.dd(27,"(*)"),x.gc(),x.gc(),x.hc(28,"input",88),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.tax_vat=e}),x.gc(),x.gc(),x.gc(),x.hc(29,"div",86),x.hc(30,"div",82),x.hc(31,"label",89),x.dd(32),x.wc(33,"translate"),x.gc(),x.hc(34,"div",90),x.hc(35,"input",91),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.is_issue_bill=e}),x.gc(),x.cc(36,"label",89),x.gc(),x.gc(),x.gc(),x.hc(37,"div",92),x.hc(38,"div",82),x.hc(39,"label",93),x.dd(40),x.wc(41,"translate"),x.gc(),x.hc(42,"input",94),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.title_promo_spec=e}),x.wc(43,"translate"),x.gc(),x.gc(),x.gc(),x.hc(44,"div",81),x.hc(45,"div",82),x.hc(46,"label",95),x.dd(47),x.wc(48,"translate"),x.gc(),x.hc(49,"input",96),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.promo_special=e}),x.wc(50,"translate"),x.gc(),x.gc(),x.gc(),x.hc(51,"div",81),x.hc(52,"div",82),x.hc(53,"label",97),x.dd(54),x.wc(55,"translate"),x.gc(),x.hc(56,"input",98),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.promo_perorder=e})("change",function(){x.Uc(n);var e=x.vc();return e._switchPercent(e.entity.promo_perorder)}),x.wc(57,"translate"),x.gc(),x.gc(),x.gc(),x.hc(58,"div",92),x.hc(59,"div",82),x.hc(60,"label",99),x.dd(61),x.wc(62,"translate"),x.hc(63,"span",55),x.dd(64,"(*)"),x.gc(),x.gc(),x.hc(65,"ng-select",100),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().selectedCustomer=e})("change",function(){return x.Uc(n),x.vc()._getInfoLabelCustomer()}),x.wc(66,"translate"),x.wc(67,"translate"),x.gc(),x.bd(68,sa,2,1,"small",101),x.gc(),x.gc(),x.hc(69,"div",81),x.hc(70,"div",82),x.hc(71,"label",102),x.dd(72),x.wc(73,"translate"),x.hc(74,"span",55),x.dd(75,"(*)"),x.gc(),x.gc(),x.hc(76,"input",103),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._fdate=e})("bsValueChange",function(e){return x.Uc(n),x.vc().orgValueChange1(e)}),x.wc(77,"translate"),x.gc(),x.gc(),x.gc(),x.hc(78,"div",81),x.hc(79,"div",82),x.hc(80,"label",104),x.dd(81),x.wc(82,"translate"),x.hc(83,"span",55),x.dd(84,"(*)"),x.gc(),x.gc(),x.hc(85,"input",105),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._tdate=e})("bsValueChange",function(e){return x.Uc(n),x.vc().orgValueChange2(e)}),x.wc(86,"translate"),x.gc(),x.gc(),x.gc(),x.hc(87,"div",81),x.hc(88,"div",82),x.hc(89,"label",106),x.dd(90),x.wc(91,"translate"),x.gc(),x.hc(92,"input",107),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.valid_number=e})("change",function(){return x.Uc(n),x.vc()._calculateDays()}),x.wc(93,"translate"),x.gc(),x.gc(),x.gc(),x.hc(94,"div",81),x.hc(95,"div",82),x.hc(96,"label",108),x.dd(97),x.wc(98,"translate"),x.gc(),x.hc(99,"select",109),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.is_active=e}),x.hc(100,"option",22),x.dd(101),x.wc(102,"translate"),x.gc(),x.hc(103,"option",23),x.dd(104),x.wc(105,"translate"),x.gc(),x.hc(106,"option",24),x.dd(107),x.wc(108,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(109,"div",92),x.hc(110,"div",82),x.hc(111,"label",110),x.dd(112),x.wc(113,"translate"),x.gc(),x.hc(114,"textarea",111),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.note=e}),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(115,"div",112),x.hc(116,"button",113),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.dd(117),x.wc(118,"translate"),x.gc(),x.bd(119,da,5,3,"ng-container",39),x.bd(120,ua,3,3,"button",114),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(4),x.fd(" ","ADD"==a._flagModal?x.xc(5,68,"Add new"):x.xc(6,70,"Update")," "),x.Nb(11),x.fd("",x.xc(16,72,"Number of sample")," "),x.Nb(4),x.Dc("ngClass","ADD"==a._flagModal?"form-control":"form-control jdisabled")("placeholder",x.xc(20,74,"Number of sample"))("ngModel",a.entity.number_sample)("disabled","ADD"!=a._flagModal),x.Nb(2),x.Dc("ngModel",a.entity.id),x.Nb(7),x.Dc("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("placeholder","VAT")("ngModel",a.entity.tax_vat)("disabled",0!=a.entity.is_active),x.Nb(4),x.ed(x.xc(33,76,"Issue bill")),x.Nb(3),x.Dc("ngModel",a.entity.is_issue_bill),x.Nb(5),x.ed(x.xc(41,78,"Promotion title")),x.Nb(2),x.Dc("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("placeholder",x.xc(43,80,"Promotion title"))("ngModel",a.entity.title_promo_spec)("disabled",0!=a.entity.is_active),x.Nb(5),x.fd("",x.xc(48,82,"Promotion per order")," (VND)"),x.Nb(2),x.Dc("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("placeholder",x.xc(50,84,"Promotion per order"))("ngModel",a.entity.promo_special)("disabled",0!=a.entity.is_active),x.Nb(5),x.fd("",x.xc(55,86,"Total promotion")," (%)"),x.Nb(2),x.Dc("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("placeholder",x.xc(57,88,"Total promotion"))("ngModel",a.entity.promo_perorder)("min",0)("max",100)("disabled",0!=a.entity.is_active),x.Nb(5),x.fd("",x.xc(62,90,"Company")," "),x.Nb(4),x.Dc("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCustomer)("placeholder",x.xc(66,92,"Please choose"))("notFoundText",x.xc(67,94,"Not found item")),x.Nb(3),x.Dc("ngIf",null!=a.selectedCustomer),x.Nb(4),x.fd("",x.xc(73,96,"Received date")," "),x.Nb(4),x.Dc("placeholder",x.xc(77,98,"Received date"))("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("ngModel",a._fdate)("bsConfig",x.Hc(120,ha))("disabled",0!=a.entity.is_active),x.Nb(5),x.fd("",x.xc(82,100,"Returned date")," "),x.Nb(4),x.Dc("placeholder",x.xc(86,102,"Returned date"))("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("ngModel",a._tdate)("bsConfig",x.Hc(121,ha))("disabled",0!=a.entity.is_active),x.Nb(5),x.ed(x.xc(91,104,"Valid date")),x.Nb(2),x.Dc("type","number")("placeholder",x.xc(93,106,"Valid date"))("ngClass",0!=a.entity.is_active?"form-control jdisabled":"form-control")("ngModel",a.entity.valid_number)("disabled",0!=a.entity.is_active)("min",0),x.Nb(5),x.ed(x.xc(98,108,"Status")),x.Nb(2),x.Dc("ngModel",a.entity.is_active),x.Nb(2),x.fd(" ",x.xc(102,110,"Pending")," "),x.Nb(3),x.fd(" ",x.xc(105,112,"Confirmed")," "),x.Nb(3),x.fd(" ",x.xc(108,114,"Cancel")," "),x.Nb(5),x.ed(x.xc(113,116,"Note")),x.Nb(2),x.Dc("ngModel",a.entity.note),x.Nb(3),x.fd(" ",x.xc(118,118,"Close")," "),x.Nb(2),x.Dc("ngIf",a.isSave),x.Nb(1),x.Dc("ngIf",!a.isSave)}}function ma(e,t){1&e&&(x.hc(0,"h4",76),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Relationship")," "))}function _a(e,t){if(1&e&&(x.hc(0,"h4",76),x.dd(1),x.wc(2,"translate"),x.gc()),2&e){var n=x.vc(2);x.Nb(1),x.gd(" ",x.xc(2,2,"Contact")," - ",n._diaName," ")}}function pa(e,t){if(1&e&&(x.hc(0,"h4",76),x.dd(1),x.wc(2,"translate"),x.wc(3,"translate"),x.gc()),2&e){var n=x.vc(2);x.Nb(1),x.gd(" ",x.xc(2,2,"Relationship")," - ",x.xc(3,4,"ADDREL"==n._flagModal1?"Add new":"Update")," ")}}function fa(e,t){if(1&e){var n=x.ic();x.hc(0,"div",127),x.hc(1,"pagination",128),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(3).pageIndexRel=e})("pageChanged",function(e){return x.Uc(n),x.vc(3).pageChangedRel(e)}),x.gc(),x.hc(2,"a",31),x.dd(3),x.wc(4,"translate"),x.wc(5,"translate"),x.wc(6,"translate"),x.wc(7,"translate"),x.gc(),x.gc()}if(2&e){var a=x.vc(3);x.Nb(1),x.Dc("boundaryLinks",!0)("totalItems",a.totalRowRel)("ngModel",a.pageIndexRel)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSizeRel),x.Nb(2),x.id("",x.xc(4,12,"Total of records"),": ",a.totalRowRel," - ",x.xc(5,14,"Page")," ",a.pageIndexRel," ",x.xc(6,16,"of")," ",a.totalPageRel," ",x.xc(7,18,"page"),"")}}function ba(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",129),x.hc(3,"h3",55),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function va(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"td",130),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(4).editLinkPopUp(e)}),x.dd(2),x.gc(),x.hc(3,"td"),x.dd(4),x.gc(),x.hc(5,"td"),x.dd(6),x.gc(),x.hc(7,"td"),x.dd(8),x.gc(),x.hc(9,"td"),x.dd(10),x.gc(),x.hc(11,"td"),x.dd(12),x.gc(),x.hc(13,"td"),x.dd(14),x.gc(),x.hc(15,"td"),x.hc(16,"button",131),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(4).deleteItemLinkContact(e)}),x.wc(17,"translate"),x.cc(18,"i",132),x.gc(),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=x.vc(4);x.Nb(2),x.fd(" ",a.code_link," "),x.Nb(2),x.ed(a.company_name_l),x.Nb(2),x.ed(a.sender_name),x.Nb(2),x.fd(" ",a.receive_company_l," "),x.Nb(2),x.fd(" ",a.receive_name," "),x.Nb(2),x.fd(" ",a.bill_company_l," "),x.Nb(2),x.fd(" ",a.bill_name," "),x.Nb(2),x.Ec("ngbTooltip",x.xc(17,9,"Delete")),x.Dc("disabled",!c._authenService.hasPermission("CUSTOMER","delete"))}}function ya(e,t){if(1&e&&(x.fc(0),x.bd(1,va,19,11,"tr",56),x.ec()),2&e){var n=x.vc(3);x.Nb(1),x.Dc("ngForOf",n._relationslist)}}function xa(e,t){if(1&e){var n=x.ic();x.hc(0,"div",127),x.hc(1,"pagination",128),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(3).pageIndexRel=e})("pageChanged",function(e){return x.Uc(n),x.vc(3).pageChangedRel(e)}),x.gc(),x.hc(2,"a",31),x.dd(3),x.wc(4,"translate"),x.wc(5,"translate"),x.wc(6,"translate"),x.wc(7,"translate"),x.gc(),x.gc()}if(2&e){var a=x.vc(3);x.Nb(1),x.Dc("boundaryLinks",!0)("totalItems",a.totalRowRel)("ngModel",a.pageIndexRel)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSizeRel),x.Nb(2),x.id("",x.xc(4,12,"Total of records"),": ",a.totalRowRel," - ",x.xc(5,14,"Page")," ",a.pageIndexRel," ",x.xc(6,16,"of")," ",a.totalPageRel," ",x.xc(7,18,"page"),"")}}function Sa(e,t){if(1&e){var n=x.ic();x.hc(0,"div",80),x.hc(1,"div",122),x.hc(2,"input",123),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2)._keywordRel=e})("change",function(){return x.Uc(n),x.vc(2).loadRelationship()})("keyup.enter",function(){return x.Uc(n),x.vc(2).loadRelationship()}),x.wc(3,"translate"),x.gc(),x.gc(),x.hc(4,"div",124),x.hc(5,"button",125),x.rc("click",function(){return x.Uc(n),x.vc(2).linkContactPopUp1()}),x.dd(6),x.wc(7,"translate"),x.gc(),x.gc(),x.hc(8,"div",92),x.cc(9,"br"),x.bd(10,fa,8,20,"div",126),x.hc(11,"div",32),x.hc(12,"table",33),x.hc(13,"thead",34),x.hc(14,"tr"),x.hc(15,"th",36),x.dd(16),x.wc(17,"translate"),x.gc(),x.hc(18,"th",36),x.dd(19),x.wc(20,"translate"),x.gc(),x.hc(21,"th",36),x.dd(22),x.wc(23,"translate"),x.gc(),x.hc(24,"th",36),x.dd(25),x.wc(26,"translate"),x.gc(),x.hc(27,"th",36),x.dd(28),x.wc(29,"translate"),x.gc(),x.hc(30,"th",36),x.dd(31),x.wc(32,"translate"),x.gc(),x.hc(33,"th",36),x.dd(34),x.wc(35,"translate"),x.gc(),x.hc(36,"th",36),x.dd(37),x.wc(38,"translate"),x.gc(),x.gc(),x.gc(),x.hc(39,"tbody"),x.bd(40,ba,6,3,"ng-container",39),x.bd(41,ya,2,1,"ng-container",39),x.gc(),x.gc(),x.gc(),x.bd(42,xa,8,20,"div",126),x.gc(),x.gc()}if(2&e){var a=x.vc(2);x.Nb(2),x.Dc("placeholder",x.xc(3,15,"Search"))("ngModel",a._keywordRel),x.Nb(4),x.fd(" ",x.xc(7,17,"Add new")," "),x.Nb(4),x.Dc("ngIf",a._relationslist.length>0),x.Nb(6),x.fd(" ",x.xc(17,19,"Relevant code")," "),x.Nb(3),x.fd(" ",x.xc(20,21,"Company")," "),x.Nb(3),x.fd(" ",x.xc(23,23,"Sender")," "),x.Nb(3),x.fd(" ",x.xc(26,25,"Received company")," "),x.Nb(3),x.fd(" ",x.xc(29,27,"Receiver")," "),x.Nb(3),x.fd(" ",x.xc(32,29,"Bill company")," "),x.Nb(3),x.fd(" ",x.xc(35,31,"Bill receiver")," "),x.Nb(3),x.ed(x.xc(38,33,"Actions")),x.Nb(3),x.Dc("ngIf",0==a._relationslist.length),x.Nb(1),x.Dc("ngIf",a._relationslist.length>0),x.Nb(1),x.Dc("ngIf",a._relationslist.length>0)}}function wa(e,t){1&e&&(x.fc(0),x.hc(1,"a",116),x.cc(2,"img",117),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing"),""))}function Na(e,t){if(1&e&&(x.hc(0,"button",152),x.dd(1),x.wc(2,"translate"),x.gc()),2&e){x.vc();var n=x.Rc(2);x.Dc("disabled",!n.valid),x.Nb(1),x.fd(" ",x.xc(2,2,"Save")," ")}}function Da(e,t){if(1&e){var n=x.ic();x.hc(0,"button",153),x.rc("click",function(){return x.Uc(n),x.vc(3)._clearContact()}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Add new")," "))}function Ma(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"td"),x.dd(2),x.gc(),x.hc(3,"td"),x.dd(4),x.gc(),x.hc(5,"td"),x.dd(6),x.gc(),x.hc(7,"td"),x.dd(8),x.gc(),x.hc(9,"td"),x.dd(10),x.gc(),x.hc(11,"td"),x.hc(12,"button",154),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(3);return a.loadDetail1(e.id,a.entityContact.company_id)}),x.cc(13,"i",69),x.gc(),x.hc(14,"button",155),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(3).deleteItem0(e)}),x.cc(15,"i",132),x.gc(),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=x.vc(3);x.Nb(2),x.fd(" ",a.contact_code," "),x.Nb(2),x.fd(" ",a.contact_name," "),x.Nb(2),x.fd(" ",a.phone," "),x.Nb(2),x.ed(a.email),x.Nb(2),x.ed(a.note_l),x.Nb(2),x.Dc("disabled",!c._authenService.hasPermission("CUSTOMER","update")),x.Nb(2),x.Dc("disabled",!c._authenService.hasPermission("CUSTOMER","delete"))}}function Ca(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"form",73,133),x.rc("ngSubmit",function(){return x.Uc(n),x.vc(2).saveChange0()}),x.hc(3,"div",80),x.hc(4,"div",81),x.hc(5,"div",82),x.hc(6,"label",134),x.dd(7),x.wc(8,"translate"),x.hc(9,"span",55),x.dd(10,"(*)"),x.gc(),x.gc(),x.hc(11,"input",135),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.contact_name=e}),x.wc(12,"translate"),x.gc(),x.gc(),x.gc(),x.hc(13,"div",81),x.hc(14,"div",82),x.hc(15,"label",136),x.dd(16),x.wc(17,"translate"),x.gc(),x.hc(18,"input",137),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.contact_code=e}),x.wc(19,"translate"),x.gc(),x.gc(),x.gc(),x.hc(20,"div",81),x.hc(21,"div",82),x.hc(22,"label",138),x.dd(23),x.wc(24,"translate"),x.hc(25,"span",55),x.dd(26,"(*)"),x.gc(),x.gc(),x.hc(27,"input",139),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.phone=e}),x.wc(28,"translate"),x.gc(),x.gc(),x.gc(),x.hc(29,"div",81),x.hc(30,"div",82),x.hc(31,"label",140),x.dd(32,"Email"),x.gc(),x.hc(33,"input",141),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.email=e}),x.gc(),x.gc(),x.gc(),x.hc(34,"div",81),x.hc(35,"div",82),x.hc(36,"label",142),x.dd(37),x.wc(38,"translate"),x.wc(39,"translate"),x.gc(),x.hc(40,"textarea",143),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.note_l=e}),x.wc(41,"translate"),x.gc(),x.gc(),x.gc(),x.hc(42,"div",81),x.hc(43,"div",82),x.hc(44,"label",144),x.dd(45),x.wc(46,"translate"),x.wc(47,"translate"),x.gc(),x.hc(48,"textarea",145),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityContact.note_e=e}),x.wc(49,"translate"),x.gc(),x.gc(),x.gc(),x.hc(50,"div",81),x.hc(51,"div",82),x.hc(52,"label",108),x.dd(53),x.wc(54,"translate"),x.gc(),x.hc(55,"div",90),x.hc(56,"input",146),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2)._status=e}),x.gc(),x.cc(57,"label",108),x.gc(),x.gc(),x.gc(),x.hc(58,"div",81),x.hc(59,"div",82),x.bd(60,wa,5,3,"ng-container",39),x.bd(61,Na,3,4,"button",147),x.bd(62,Da,3,3,"button",148),x.gc(),x.gc(),x.hc(63,"div",92),x.hc(64,"div",82),x.hc(65,"input",149),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2)._keyword1=e})("change",function(){x.Uc(n);var e=x.vc(2);return e.loadDataContact(e.entityContact.company_id)})("keyup.enter",function(){x.Uc(n);var e=x.vc(2);return e.loadDataContact(e.entityContact.company_id)}),x.wc(66,"translate"),x.gc(),x.gc(),x.gc(),x.hc(67,"div",92),x.hc(68,"div",127),x.hc(69,"pagination",150),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).pageIndex1=e})("pageChanged",function(e){return x.Uc(n),x.vc(2).pageChanged1(e)}),x.gc(),x.hc(70,"a",31),x.dd(71),x.wc(72,"translate"),x.wc(73,"translate"),x.wc(74,"translate"),x.wc(75,"translate"),x.gc(),x.gc(),x.hc(76,"div",151),x.hc(77,"table",33),x.hc(78,"thead",34),x.hc(79,"tr"),x.hc(80,"th",36),x.dd(81),x.wc(82,"translate"),x.gc(),x.hc(83,"th",36),x.dd(84),x.wc(85,"translate"),x.gc(),x.hc(86,"th",36),x.dd(87),x.wc(88,"translate"),x.gc(),x.hc(89,"th",36),x.dd(90,"Email"),x.gc(),x.hc(91,"th",36),x.dd(92),x.wc(93,"translate"),x.gc(),x.hc(94,"th",36),x.dd(95),x.wc(96,"translate"),x.gc(),x.gc(),x.gc(),x.hc(97,"tbody"),x.bd(98,Ma,16,7,"tr",56),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.ec()}if(2&e){var a=x.vc(2);x.Nb(7),x.fd("",x.xc(8,45,"Customer name")," "),x.Nb(4),x.Dc("placeholder",x.xc(12,47,"Customer name"))("ngModel",a.entityContact.contact_name),x.Nb(5),x.ed(x.xc(17,49,"Customer code")),x.Nb(2),x.Dc("placeholder",x.xc(19,51,"Customer code"))("ngModel",a.entityContact.contact_code)("disabled",!0),x.Nb(5),x.fd("",x.xc(24,53,"Phone")," "),x.Nb(4),x.Dc("placeholder",x.xc(28,55,"Phone"))("ngModel",a.entityContact.phone),x.Nb(6),x.Dc("placeholder","abc@company.com")("ngModel",a.entityContact.email),x.Nb(4),x.gd("",x.xc(38,57,"Note")," (",x.xc(39,59,"Vietnamese"),")"),x.Nb(3),x.Ec("placeholder",x.xc(41,61,"Note")),x.Dc("ngModel",a.entityContact.note_l),x.Nb(5),x.gd("",x.xc(46,63,"Note")," (",x.xc(47,65,"English"),")"),x.Nb(3),x.Ec("placeholder",x.xc(49,67,"Note")),x.Dc("ngModel",a.entityContact.note_e),x.Nb(5),x.ed(x.xc(54,69,"Status")),x.Nb(3),x.Dc("ngModel",a._status),x.Nb(4),x.Dc("ngIf",a.isSave1),x.Nb(1),x.Dc("ngIf",!a.isSave1),x.Nb(1),x.Dc("ngIf","UPDATE"==a._flagModal1),x.Nb(3),x.Ec("placeholder",x.xc(66,71,"Search")),x.Dc("ngModel",a._keyword1),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",a.totalRow1)("ngModel",a.pageIndex1)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSize1),x.Nb(2),x.id("",x.xc(72,73,"Total of records"),": ",a.totalRow1," - ",x.xc(73,75,"Page")," ",a.pageIndex1," ",x.xc(74,77,"of")," ",a.totalPage1," ",x.xc(75,79,"page"),""),x.Nb(10),x.fd(" ",x.xc(82,81,"Customer code")," "),x.Nb(3),x.fd(" ",x.xc(85,83,"Customer name")," "),x.Nb(3),x.fd(" ",x.xc(88,85,"Phone")," "),x.Nb(5),x.fd(" ",x.xc(93,87,"Note")," "),x.Nb(3),x.fd(" ",x.xc(96,89,"Actions")," "),x.Nb(3),x.Dc("ngForOf",a._contacts)}}function ka(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"form",null,156),x.hc(3,"div",80),x.hc(4,"div",92),x.hc(5,"div",82),x.hc(6,"label",157),x.dd(7),x.wc(8,"translate"),x.hc(9,"span",55),x.dd(10,"(*)"),x.gc(),x.gc(),x.hc(11,"textarea",158),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entityLinkC.code_link=e}),x.wc(12,"translate"),x.gc(),x.gc(),x.gc(),x.hc(13,"div",81),x.hc(14,"div",82),x.hc(15,"label",159),x.dd(16),x.wc(17,"translate"),x.hc(18,"span",55),x.dd(19,"(*)"),x.gc(),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"ng-select",160),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedCompany=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("cty",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(23,"translate"),x.wc(24,"translate"),x.gc(),x.gc(),x.gc(),x.hc(25,"div",81),x.hc(26,"div",82),x.hc(27,"label",159),x.dd(28),x.wc(29,"translate"),x.hc(30,"span",55),x.dd(31,"(*)"),x.gc(),x.dd(32),x.wc(33,"translate"),x.gc(),x.hc(34,"ng-select",161),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedSender=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("lh",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(35,"translate"),x.wc(36,"translate"),x.gc(),x.gc(),x.gc(),x.hc(37,"div",81),x.hc(38,"div",82),x.hc(39,"label"),x.dd(40),x.wc(41,"translate"),x.hc(42,"span",55),x.dd(43,"(*)"),x.gc(),x.dd(44),x.wc(45,"translate"),x.gc(),x.hc(46,"ng-select",162),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedCompanyKQ=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("kq",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(47,"translate"),x.wc(48,"translate"),x.gc(),x.gc(),x.gc(),x.hc(49,"div",81),x.hc(50,"div",82),x.hc(51,"label"),x.dd(52),x.wc(53,"translate"),x.hc(54,"span",55),x.dd(55,"(*)"),x.gc(),x.dd(56),x.wc(57,"translate"),x.gc(),x.hc(58,"ng-select",163),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedSenderKQ=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("lhkq",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(59,"translate"),x.wc(60,"translate"),x.gc(),x.gc(),x.gc(),x.hc(61,"div",81),x.hc(62,"div",82),x.hc(63,"label"),x.dd(64),x.wc(65,"translate"),x.hc(66,"span",55),x.dd(67,"(*)"),x.gc(),x.dd(68),x.wc(69,"translate"),x.gc(),x.hc(70,"ng-select",164),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedCompanyBill=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("bill",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(71,"translate"),x.wc(72,"translate"),x.gc(),x.gc(),x.gc(),x.hc(73,"div",81),x.hc(74,"div",82),x.hc(75,"label"),x.dd(76),x.wc(77,"translate"),x.hc(78,"span",55),x.dd(79,"(*)"),x.gc(),x.dd(80),x.wc(81,"translate"),x.gc(),x.hc(82,"ng-select",165),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedSenderBill=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._changeCompanyInfo("lhbill",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.wc(83,"translate"),x.wc(84,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.ec()}if(2&e){var a=x.vc(2);x.Nb(7),x.fd("",x.xc(8,58,"Code")," "),x.Nb(4),x.Dc("placeholder",x.xc(12,60,"Code"))("ngModel",a.entityLinkC.code_link)("disabled",!0),x.Nb(5),x.fd("",x.xc(17,62,"Customer")," "),x.Nb(4),x.fd(" - ",x.xc(21,64,"Information"),""),x.Nb(2),x.Dc("items",a._getlistcompany)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCompany)("placeholder",x.xc(23,66,"Please choose"))("notFoundText",x.xc(24,68,"Not found item")),x.Nb(6),x.fd("",x.xc(29,70,"Contact")," "),x.Nb(4),x.fd(" - ",x.xc(33,72,"Sender"),""),x.Nb(2),x.Dc("items",a._getlistsender)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSender)("placeholder",x.xc(35,74,"Please choose"))("notFoundText",x.xc(36,76,"Not found item")),x.Nb(6),x.fd("",x.xc(41,78,"Customer")," "),x.Nb(4),x.fd(" - ",x.xc(45,80,"Received company"),""),x.Nb(2),x.Dc("items",a._getlistcompanyKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCompanyKQ)("placeholder",x.xc(47,82,"Please choose"))("notFoundText",x.xc(48,84,"Not found item")),x.Nb(6),x.fd("",x.xc(53,86,"Contact")," "),x.Nb(4),x.fd(" - ",x.xc(57,88,"Received company"),""),x.Nb(2),x.Dc("items",a._getlistsenderKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSenderKQ)("placeholder",x.xc(59,90,"Please choose"))("notFoundText",x.xc(60,92,"Not found item")),x.Nb(6),x.fd("",x.xc(65,94,"Customer")," "),x.Nb(4),x.fd(" - ",x.xc(69,96,"Bill company"),""),x.Nb(2),x.Dc("items",a._getlistcompanyBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCompanyBill)("placeholder",x.xc(71,98,"Please choose"))("notFoundText",x.xc(72,100,"Not found item")),x.Nb(6),x.fd("",x.xc(77,102,"Contact")," "),x.Nb(4),x.fd(" - ",x.xc(81,104,"Bill company"),""),x.Nb(2),x.Dc("items",a._getlistsenderBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSenderBill)("placeholder",x.xc(83,106,"Please choose"))("notFoundText",x.xc(84,108,"Not found item"))}}function Ta(e,t){1&e&&(x.fc(0),x.hc(1,"a",116),x.cc(2,"img",117),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing"),""))}function Ia(e,t){if(1&e){var n=x.ic();x.hc(0,"button",168),x.rc("click",function(){x.Uc(n);var e=x.vc(3);return e.saveChangeLink(e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Save & close")," "))}function Pa(e,t){if(1&e){var n=x.ic();x.hc(0,"div",112),x.hc(1,"button",166),x.rc("click",function(){return x.Uc(n),x.vc(2).closeModal()}),x.dd(2),x.wc(3,"translate"),x.gc(),x.hc(4,"button",153),x.rc("click",function(){return x.Uc(n),x.vc(2)._switchLinkList()}),x.dd(5),x.wc(6,"translate"),x.gc(),x.bd(7,Ta,5,3,"ng-container",39),x.bd(8,Ia,3,3,"button",167),x.gc()}if(2&e){var a=x.vc(2);x.Nb(2),x.fd(" ",x.xc(3,4,"Close")," "),x.Nb(3),x.fd(" ",x.xc(6,6,"Relationship")," "),x.Nb(2),x.Dc("ngIf",a.isSave),x.Nb(1),x.Dc("ngIf",!a.isSave)}}function Ra(e,t){if(1&e){var n=x.ic();x.hc(0,"div",75),x.bd(1,ma,3,3,"h4",119),x.bd(2,_a,3,4,"h4",119),x.bd(3,pa,4,6,"h4",119),x.hc(4,"button",77),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(5,"span",78),x.dd(6,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(7,"div",79),x.bd(8,Sa,43,35,"div",120),x.bd(9,Ca,99,91,"ng-container",39),x.bd(10,ka,85,110,"ng-container",39),x.gc(),x.bd(11,Pa,9,8,"div",121)}if(2&e){var a=x.vc();x.Nb(1),x.Dc("ngIf","LIST"==a._flagModal1),x.Nb(1),x.Dc("ngIf","ADD"==a._flagModal1||"UPDATE"==a._flagModal1),x.Nb(1),x.Dc("ngIf","ADDREL"==a._flagModal1||"UPDATEREL"==a._flagModal1),x.Nb(5),x.Dc("ngIf","LIST"==a._flagModal1),x.Nb(1),x.Dc("ngIf","ADD"==a._flagModal1||"UPDATE"==a._flagModal1),x.Nb(1),x.Dc("ngIf","ADDREL"==a._flagModal1||"UPDATEREL"==a._flagModal1),x.Nb(1),x.Dc("ngIf","ADDREL"==a._flagModal1||"UPDATEREL"==a._flagModal1)}}function Aa(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"ng-select",171),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedCustomer1=e})("change",function(){x.Uc(n);var e=x.vc(2);return e.exportList.length>0?e._copyAll(e.exportList,e.selectedCustomer1):e._copyRequest(e.selectedCustomer1)}),x.wc(2,"translate"),x.wc(3,"translate"),x.gc(),x.ec()}if(2&e){var a=x.vc(2);x.Nb(1),x.Dc("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCustomer1)("placeholder",x.xc(2,7,"Please choose"))("notFoundText",x.xc(3,9,"Not found item"))}}function Ea(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"ng-select",171),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectedCustomer1=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._copyTemplate(e._idTemplate,e.selectedCustomer1)}),x.wc(2,"translate"),x.wc(3,"translate"),x.gc(),x.ec()}if(2&e){var a=x.vc(2);x.Nb(1),x.Dc("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCustomer1)("placeholder",x.xc(2,7,"Please choose"))("notFoundText",x.xc(3,9,"Not found item"))}}function Ua(e,t){if(1&e&&(x.hc(0,"form",169),x.hc(1,"div",75),x.hc(2,"h4",76),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",77),x.rc("click",function(){return t.$implicit.dismiss("Cross click")}),x.hc(6,"span",78),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",79),x.hc(9,"div",80),x.hc(10,"div",92),x.hc(11,"div",82),x.hc(12,"label",170),x.dd(13),x.wc(14,"translate"),x.gc(),x.bd(15,Aa,4,11,"ng-container",39),x.bd(16,Ea,4,11,"ng-container",39),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()),2&e){var n=x.vc();x.Nb(3),x.gd("",x.xc(4,5,"Copy")," - ",n._titleCopy,""),x.Nb(10),x.ed(x.xc(14,7,"Company")),x.Nb(2),x.Dc("ngIf",!n._flagChooseTemplate),x.Nb(1),x.Dc("ngIf",n._flagChooseTemplate)}}function Fa(e,t){if(1&e){var n=x.ic();x.hc(0,"a",179),x.rc("click",function(){return x.Uc(n),x.vc(2)._exportAllRangeWithStatusA()}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Submit")))}function Oa(e,t){1&e&&(x.hc(0,"a",180),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.fd("",x.xc(2,1,"Loading"),"..."))}var Ya=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}};function La(e,t){if(1&e){var n=x.ic();x.hc(0,"form",169),x.hc(1,"div",75),x.hc(2,"h4",76),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",77),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",78),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",79),x.hc(9,"div",80),x.hc(10,"div",81),x.hc(11,"label",172),x.dd(12),x.wc(13,"translate"),x.gc(),x.hc(14,"input",173),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._fDate=e})("bsValueChange",function(e){return x.Uc(n),x.vc().changeFromDate(e)})("keypress",function(e){return x.Uc(n),x.vc().changeFromDate(e)}),x.gc(),x.gc(),x.hc(15,"div",81),x.hc(16,"label",174),x.dd(17),x.wc(18,"translate"),x.gc(),x.hc(19,"input",175),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._tDate=e})("bsValueChange",function(e){return x.Uc(n),x.vc().changeToDate(e)})("keypress",function(e){return x.Uc(n),x.vc().changeToDate(e)}),x.gc(),x.gc(),x.hc(20,"div",176),x.hc(21,"div",82),x.cc(22,"br"),x.bd(23,Fa,3,3,"a",177),x.bd(24,Oa,3,3,"a",178),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.ed(x.xc(4,9,"Export")),x.Nb(9),x.ed(x.xc(13,11,"From date")),x.Nb(2),x.Dc("ngModel",a._fDate)("bsConfig",x.Hc(15,Ya)),x.Nb(3),x.ed(x.xc(18,13,"To date")),x.Nb(2),x.Dc("ngModel",a._tDate)("bsConfig",x.Hc(16,Ya)),x.Nb(4),x.Dc("ngIf",!a.isExportLoading),x.Nb(1),x.Dc("ngIf",a.isExportLoading)}}function qa(e,t){1&e&&x.cc(0,"img",189)}function za(e,t){if(1&e){var n=x.ic();x.hc(0,"div",26),x.hc(1,"div",27),x.hc(2,"div",28),x.hc(3,"pagination",29),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).pageIndex1=e})("pageChanged",function(e){return x.Uc(n),x.vc(2).pageChangedTemplate(e)}),x.gc(),x.gc(),x.hc(4,"div",30),x.hc(5,"a",31),x.dd(6),x.wc(7,"translate"),x.wc(8,"translate"),x.wc(9,"translate"),x.wc(10,"translate"),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc(2);x.Nb(3),x.Dc("boundaryLinks",!0)("totalItems",a.totalRow1)("ngModel",a.pageIndex1)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSize1),x.Nb(3),x.id("",x.xc(7,12,"Total of records"),": ",a.totalRow1," - ",x.xc(8,14,"Page")," ",a.pageIndex1," ",x.xc(9,16,"of")," ",a.totalPage1," ",x.xc(10,18,"page"),"")}}function Ga(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",190),x.hc(3,"h4",55),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function Va(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"td"),x.dd(2),x.gc(),x.hc(3,"td"),x.dd(4),x.gc(),x.hc(5,"td"),x.dd(6),x.gc(),x.hc(7,"td"),x.dd(8),x.gc(),x.hc(9,"td"),x.dd(10),x.wc(11,"number"),x.gc(),x.hc(12,"td"),x.dd(13),x.wc(14,"date"),x.gc(),x.hc(15,"td"),x.hc(16,"button",191),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(3),c=x.Rc(118);return a.popupTemplateModal(c,e)}),x.wc(17,"translate"),x.cc(18,"i",192),x.gc(),x.hc(19,"button",193),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(3),c=x.Rc(112);return a._popupCopyTemplate(c,e)}),x.wc(20,"translate"),x.cc(21,"i",50),x.gc(),x.hc(22,"button",194),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(3).deleteItemTemplate(e)}),x.wc(23,"translate"),x.cc(24,"i",132),x.gc(),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(3);x.Nb(2),x.ed(c+1+i.pageSize1*(i.pageIndex1-1)),x.Nb(2),x.ed(a.name),x.Nb(2),x.ed(a.number_sample),x.Nb(2),x.ed(a.total_parameters),x.Nb(2),x.ed(x.xc(11,9,a.total)),x.Nb(3),x.ed(x.yc(14,11,a.timestamp,"dd/MM/YYYY HH:mm:ss a")),x.Nb(3),x.Dc("ngbTooltip",x.xc(17,14,"Edit")),x.Nb(3),x.Dc("ngbTooltip",x.xc(20,16,"Copy")),x.Nb(3),x.Dc("ngbTooltip",x.xc(23,18,"Delete"))}}function Ba(e,t){if(1&e&&(x.fc(0),x.bd(1,Va,25,20,"tr",56),x.ec()),2&e){var n=x.vc(2);x.Nb(1),x.Dc("ngForOf",n._templatelist)}}function Qa(e,t){if(1&e){var n=x.ic();x.hc(0,"form",169),x.hc(1,"div",75),x.hc(2,"h4",76),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"button",77),x.rc("click",function(){return x.Uc(n),x.vc().closeModal()}),x.hc(6,"span",78),x.dd(7,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(8,"div",79),x.hc(9,"div",80),x.hc(10,"div",181),x.hc(11,"div",182),x.hc(12,"input",183),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc()._keyword1=e})("keyup.enter",function(){return x.Uc(n),x.vc().loadTemplateList()})("change",function(){return x.Uc(n),x.vc().loadTemplateList()}),x.wc(13,"translate"),x.gc(),x.hc(14,"button",184),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(118);return e.popupTemplateModal(t,null)}),x.dd(15),x.wc(16,"translate"),x.gc(),x.bd(17,qa,1,0,"img",185),x.gc(),x.gc(),x.hc(18,"div",86),x.hc(19,"div",82),x.hc(20,"div",14),x.hc(21,"select",186),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().pageSize1=e})("change",function(e){return x.Uc(n),x.vc()._pageSizeChangeTemplate(e)}),x.hc(22,"option",16),x.dd(23,"#10"),x.gc(),x.hc(24,"option",17),x.dd(25,"#25"),x.gc(),x.hc(26,"option",18),x.dd(27,"#50"),x.gc(),x.hc(28,"option",19),x.dd(29,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(30,"div",92),x.hc(31,"div",32),x.bd(32,za,11,20,"div",187),x.hc(33,"table",33),x.hc(34,"thead",34),x.hc(35,"tr"),x.hc(36,"th",188),x.dd(37,"#"),x.gc(),x.hc(38,"th",36),x.dd(39),x.wc(40,"translate"),x.gc(),x.hc(41,"th",36),x.dd(42),x.wc(43,"translate"),x.gc(),x.hc(44,"th",36),x.dd(45),x.wc(46,"translate"),x.gc(),x.hc(47,"th",36),x.dd(48),x.wc(49,"translate"),x.gc(),x.hc(50,"th",36),x.dd(51),x.wc(52,"translate"),x.gc(),x.hc(53,"th",36),x.dd(54),x.wc(55,"translate"),x.gc(),x.gc(),x.gc(),x.hc(56,"tbody"),x.bd(57,Ga,6,3,"ng-container",39),x.bd(58,Ba,2,1,"ng-container",39),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.ed(x.xc(4,15,"Request template")),x.Nb(9),x.Fc("placeholder","",x.xc(13,17,"Search"),"..."),x.Dc("ngModel",a._keyword1),x.Nb(3),x.fd(" ",x.xc(16,19,"Add new")," "),x.Nb(2),x.Dc("ngIf",a.isLoadingTemplate),x.Nb(4),x.Dc("ngModel",a.pageSize1),x.Nb(11),x.Dc("ngIf",a._templatelist.length>0),x.Nb(7),x.fd(" ",x.xc(40,21,"Name")," "),x.Nb(3),x.fd(" ",x.xc(43,23,"Total of sample")," "),x.Nb(3),x.fd(" ",x.xc(46,25,"Total of parameter")," "),x.Nb(3),x.fd(" ",x.xc(49,27,"Total")," "),x.Nb(3),x.fd(" ",x.xc(52,29,"Timestamp")," "),x.Nb(3),x.ed(x.xc(55,31,"Actions")),x.Nb(3),x.Dc("ngIf",0==a._templatelist.length),x.Nb(1),x.Dc("ngIf",a._templatelist.length>0)}}function Ha(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"button",218),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(2)._chooseTab(e)}),x.dd(2),x.wc(3,"translate"),x.gc(),x.ec()}if(2&e){var a=t.$implicit,c=x.vc(2);x.Nb(1),x.Dc("ngClass",c._currentTabActivated==a.id?"btn btn-sm btn-warning":"btn btn-sm btn-secondary"),x.Nb(1),x.gd(" ",x.xc(3,3,"Sample")," ",a.id," ")}}function $a(e,t){if(1&e){var n=x.ic();x.hc(0,"a",219),x.rc("click",function(){x.Uc(n);var e=x.vc(2);return e._removeTab(e._currentTabActivated)}),x.dd(1,"X"),x.gc()}}function Ka(e,t){if(1&e&&(x.hc(0,"div",220),x.dd(1),x.wc(2,"slice"),x.gc()),2&e){var n=t.item;x.Dc("ngbTooltip",n.name.length>25?n.name:""),x.Nb(1),x.fd(" ",n.name.length>25?x.zc(2,2,n.name,0,20)+"..":n.name," ")}}function ja(e,t){if(1&e&&(x.hc(0,"div",220),x.dd(1),x.wc(2,"slice"),x.gc()),2&e){var n=t.item;x.Dc("ngbTooltip",n.name.length>25?n.name:""),x.Nb(1),x.fd(" ",n.name.length>25?x.zc(2,2,n.name,0,20)+"..":n.name," ")}}function Xa(e,t){if(1&e&&(x.hc(0,"div",220),x.dd(1),x.wc(2,"slice"),x.gc()),2&e){var n=t.item;x.Dc("ngbTooltip",n.name.length>25?n.name:""),x.Nb(1),x.fd(" ",n.name.length>25?x.zc(2,2,n.name,0,20)+"..":n.name," ")}}function Wa(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"td",216),x.dd(2),x.gc(),x.hc(3,"td",216),x.hc(4,"a",221),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(2)._removeItemTemplate(e)}),x.cc(5,"i",132),x.gc(),x.gc(),x.hc(6,"td",217),x.hc(7,"span",222),x.dd(8),x.gc(),x.gc(),x.hc(9,"td",217),x.dd(10),x.gc(),x.hc(11,"td",217),x.dd(12),x.gc(),x.hc(13,"td",217),x.dd(14),x.gc(),x.hc(15,"td",216),x.hc(16,"input",223),x.rc("ngModelChange",function(e){return t.$implicit.quantity=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)}),x.gc(),x.gc(),x.hc(17,"td",217),x.dd(18),x.gc(),x.hc(19,"td",216),x.hc(20,"input",224),x.rc("ngModelChange",function(e){return t.$implicit.price=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)}),x.gc(),x.gc(),x.hc(21,"td",216),x.hc(22,"input",225),x.rc("ngModelChange",function(e){return t.$implicit.discount=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)}),x.gc(),x.gc(),x.hc(23,"td",216),x.dd(24),x.wc(25,"number"),x.gc(),x.hc(26,"td",216),x.hc(27,"input",226),x.rc("ngModelChange",function(e){return t.$implicit.priority=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)}),x.gc(),x.gc(),x.hc(28,"td",216),x.hc(29,"input",226),x.rc("ngModelChange",function(e){return t.$implicit.tat=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)}),x.gc(),x.gc(),x.hc(30,"td",216),x.hc(31,"input",226),x.rc("ngModelChange",function(e){return t.$implicit.order_no=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)})("keyup.enter",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)}),x.gc(),x.gc(),x.hc(32,"td",216),x.hc(33,"input",227),x.rc("ngModelChange",function(e){return t.$implicit.hide=e})("change",function(){x.Uc(n);var e=x.vc(2);return e._updateItemTemplate(e._orderdetailists)}),x.gc(),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.ed(c+1),x.Nb(5),x.Dc("ngClass",null==a.code_father?"text-bold text-default":"text-warning"),x.Nb(1),x.ed(a.code),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.ed(a.method),x.Nb(2),x.ed(a.lod),x.Nb(2),x.Fc("name","qty",c+1,""),x.Dc("ngModel",a.quantity),x.Nb(2),x.fd(" ",a.unit," "),x.Nb(2),x.Fc("name","p",c+1,""),x.Dc("ngModel",a.price),x.Nb(2),x.Fc("name","gg",c+1,""),x.Dc("ngModel",a.discount),x.Nb(2),x.fd(" ",x.xc(25,22,a.amount)," "),x.Nb(3),x.Fc("name","pri",c+1,""),x.Dc("ngModel",a.priority),x.Nb(2),x.Fc("name","ta",c+1,""),x.Dc("ngModel",a.tat),x.Nb(2),x.Fc("name","odd",c+1,""),x.Dc("ngModel",a.order_no),x.Nb(2),x.Fc("name","hid",c+1,""),x.Dc("ngModel",a.hide)}}function Ja(e,t){if(1&e){var n=x.ic();x.hc(0,"form",169),x.hc(1,"div",75),x.hc(2,"h4",76),x.dd(3),x.wc(4,"translate"),x.wc(5,"translate"),x.gc(),x.hc(6,"button",77),x.rc("click",function(){return t.$implicit.dismiss("Cross click")}),x.hc(7,"span",78),x.dd(8,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(9,"div",79),x.hc(10,"div",80),x.hc(11,"div",195),x.hc(12,"label",196),x.dd(13),x.wc(14,"translate"),x.gc(),x.hc(15,"input",197),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entityTemplate.name=e})("change",function(){return x.Uc(n),x.vc().saveChangeSample()}),x.gc(),x.gc(),x.hc(16,"div",86),x.hc(17,"label",198),x.dd(18),x.wc(19,"translate"),x.gc(),x.hc(20,"input",199),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entityTemplate.number_sample=e})("keyup.enter",function(){x.Uc(n);var e=x.vc();return e._changeSample(e.entityTemplate.number_sample)})("change",function(){x.Uc(n);var e=x.vc();return e._changeSample(e.entityTemplate.number_sample)}),x.gc(),x.gc(),x.hc(21,"div",124),x.hc(22,"label"),x.dd(23),x.wc(24,"translate"),x.gc(),x.hc(25,"input",200),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entityTemplate.total=e}),x.gc(),x.gc(),x.hc(26,"div",92),x.cc(27,"hr"),x.hc(28,"div",1),x.hc(29,"div",201),x.hc(30,"div",202),x.bd(31,Ha,4,5,"ng-container",56),x.gc(),x.gc(),x.hc(32,"div",203),x.bd(33,$a,2,0,"a",204),x.gc(),x.gc(),x.gc(),x.hc(34,"div",81),x.hc(35,"label",205),x.hc(36,"strong"),x.dd(37),x.wc(38,"translate"),x.gc(),x.gc(),x.hc(39,"input",206),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entitySample.sample_name=e})("keyup.enter",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)})("change",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)}),x.wc(40,"translate"),x.wc(41,"translate"),x.gc(),x.hc(42,"input",206),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entitySample.sample_name_e=e})("keyup.enter",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)})("change",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)}),x.wc(43,"translate"),x.wc(44,"translate"),x.gc(),x.gc(),x.hc(45,"div",81),x.hc(46,"label",205),x.hc(47,"strong"),x.dd(48),x.wc(49,"translate"),x.wc(50,"translate"),x.gc(),x.gc(),x.hc(51,"input",206),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entitySample.description=e})("keyup.enter",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)})("change",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)}),x.wc(52,"translate"),x.wc(53,"translate"),x.gc(),x.hc(54,"input",206),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entitySample.description_e=e})("keyup.enter",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)})("change",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)}),x.wc(55,"translate"),x.wc(56,"translate"),x.gc(),x.gc(),x.hc(57,"div",81),x.hc(58,"label",205),x.hc(59,"strong"),x.dd(60),x.wc(61,"translate"),x.gc(),x.gc(),x.hc(62,"textarea",207),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entitySample.note=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)}),x.wc(63,"translate"),x.gc(),x.gc(),x.hc(64,"div",86),x.hc(65,"label",205),x.hc(66,"strong"),x.dd(67),x.wc(68,"translate"),x.gc(),x.gc(),x.hc(69,"input",208),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entitySample.weight=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)})("keypress.enter",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)}),x.wc(70,"translate"),x.gc(),x.gc(),x.hc(71,"div",86),x.hc(72,"label",205),x.hc(73,"strong"),x.dd(74),x.wc(75,"translate"),x.gc(),x.gc(),x.hc(76,"ng-select",209),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entitySample.sample_nature_id=e})("change",function(){x.Uc(n);var e=x.vc();return e._updateSample(e.entitySample)}),x.wc(77,"translate"),x.wc(78,"translate"),x.bd(79,Ka,3,6,"ng-template",210),x.gc(),x.gc(),x.hc(80,"div",81),x.hc(81,"label",205),x.hc(82,"strong"),x.dd(83),x.wc(84,"translate"),x.gc(),x.gc(),x.hc(85,"ng-select",211),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().selectedCategory0=e})("change",function(){return x.Uc(n),x.vc().changeCategoryMatrix()}),x.wc(86,"translate"),x.wc(87,"translate"),x.bd(88,ja,3,6,"ng-template",210),x.gc(),x.gc(),x.hc(89,"div",81),x.hc(90,"label",205),x.hc(91,"strong"),x.dd(92),x.wc(93,"translate"),x.gc(),x.gc(),x.hc(94,"ng-select",212),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().selectedSpecification0=e})("change",function(){x.Uc(n);var e=x.vc();return e.changeSpecification(e.entitySample,e.selectedCategory0)}),x.bd(95,Xa,3,6,"ng-template",210),x.gc(),x.gc(),x.hc(96,"div",92),x.cc(97,"br"),x.hc(98,"div",213),x.hc(99,"table",214),x.hc(100,"thead"),x.hc(101,"tr"),x.hc(102,"th",215),x.dd(103),x.wc(104,"translate"),x.wc(105,"number"),x.gc(),x.gc(),x.hc(106,"tr"),x.hc(107,"th",216),x.dd(108,"#"),x.gc(),x.hc(109,"th",216),x.cc(110,"i",132),x.gc(),x.hc(111,"th",216),x.dd(112),x.wc(113,"translate"),x.gc(),x.hc(114,"th",216),x.dd(115),x.wc(116,"translate"),x.gc(),x.hc(117,"th",216),x.dd(118),x.wc(119,"translate"),x.gc(),x.hc(120,"th",216),x.dd(121,"LOD"),x.gc(),x.hc(122,"th",217),x.dd(123),x.wc(124,"translate"),x.gc(),x.hc(125,"th",217),x.dd(126),x.wc(127,"translate"),x.gc(),x.hc(128,"th",216),x.dd(129),x.wc(130,"translate"),x.gc(),x.hc(131,"th",217),x.dd(132),x.wc(133,"translate"),x.gc(),x.hc(134,"th",216),x.dd(135),x.wc(136,"translate"),x.gc(),x.hc(137,"th",217),x.dd(138),x.wc(139,"translate"),x.gc(),x.hc(140,"th",217),x.dd(141),x.wc(142,"translate"),x.gc(),x.hc(143,"th",217),x.dd(144),x.wc(145,"translate"),x.gc(),x.hc(146,"th",217),x.dd(147),x.wc(148,"translate"),x.gc(),x.gc(),x.gc(),x.hc(149,"tbody"),x.bd(150,Wa,34,24,"tr",56),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(3),x.gd(" ",x.xc(4,89,"Add new"),"/ ",x.xc(5,91,"Update")," "),x.Nb(10),x.ed(x.xc(14,93,"Name")),x.Nb(2),x.Dc("ngModel",a.entityTemplate.name),x.Nb(3),x.ed(x.xc(19,95,"Number of sample")),x.Nb(2),x.Dc("ngModel",a.entityTemplate.number_sample),x.Nb(3),x.ed(x.xc(24,97,"Total")),x.Nb(2),x.Dc("ngModel",a.entityTemplate.total),x.Nb(6),x.Dc("ngForOf",a._samples),x.Nb(2),x.Dc("ngIf",a._samples.length>1),x.Nb(2),x.Fc("for","sample_name",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(38,99,"Sample name")),x.Nb(2),x.Fc("id","sample_name",a._currentTabActivated,""),x.Fc("name","sample_name",a._currentTabActivated,""),x.Dc("ngModel",a.entitySample.sample_name)("placeholder",x.xc(40,101,"Sample name")+" "+a._currentTabActivated+" ("+x.xc(41,103,"Vietnamese")+")"),x.Nb(3),x.Fc("id","sample_namee",a._currentTabActivated,""),x.Fc("name","sample_namee",a._currentTabActivated,""),x.Dc("ngModel",a.entitySample.sample_name_e)("placeholder",x.xc(43,105,"Sample name")+" "+a._currentTabActivated+" ("+x.xc(44,107,"English")+")"),x.Nb(4),x.Fc("for","description",a._currentTabActivated,""),x.Nb(2),x.gd("",x.xc(49,109,"Description")," (",x.xc(50,111,"State of sample"),")"),x.Nb(3),x.Fc("id","description",a._currentTabActivated,""),x.Fc("name","description",a._currentTabActivated,""),x.Dc("ngModel",a.entitySample.description)("placeholder",x.xc(52,113,"Description")+" "+a._currentTabActivated+" ("+x.xc(53,115,"Vietnamese")+")"),x.Nb(3),x.Fc("id","descriptione",a._currentTabActivated,""),x.Fc("name","descriptione",a._currentTabActivated,""),x.Dc("ngModel",a.entitySample.description_e)("placeholder",x.xc(55,117,"Description")+" "+a._currentTabActivated+" ("+x.xc(56,119,"English")+")"),x.Nb(4),x.Fc("for","note",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(61,121,"Note")),x.Nb(2),x.Fc("id","note",a._currentTabActivated,""),x.Fc("name","note",a._currentTabActivated,""),x.Dc("placeholder",x.xc(63,123,"Note")+" "+a._currentTabActivated)("ngModel",a.entitySample.note),x.Nb(3),x.Fc("for","weight",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(68,125,"Weight")),x.Nb(2),x.Fc("id","weight",a._currentTabActivated,""),x.Fc("name","weight",a._currentTabActivated,""),x.Dc("placeholder",x.xc(70,127,"Weight")+" "+a._currentTabActivated)("ngModel",a.entitySample.weight),x.Nb(3),x.Fc("for","_samplenatures",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(75,129,"Sample nature")),x.Nb(2),x.Pb("ajustar"),x.Fc("name","_samplenatures",a._currentTabActivated,""),x.Dc("items",a._samplenatures)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.entitySample.sample_nature_id)("placeholder",x.xc(77,131,"Please choose"))("notFoundText",x.xc(78,133,"Not found item")),x.Nb(5),x.Fc("for","matrix_category",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(84,135,"Matrix category")),x.Nb(2),x.Pb("ajustar"),x.Dc("items",a._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedCategory0)("placeholder",x.xc(86,137,"Please choose"))("notFoundText",x.xc(87,139,"Not found item")),x.Nb(5),x.Fc("for","para_assignment",a._currentTabActivated,""),x.Nb(2),x.ed(x.xc(93,141,"Parameter assignment")),x.Nb(2),x.Dc("items",a._specifications)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectedSpecification0)("disabled",null==a.selectedCategory0),x.Nb(9),x.gd(" ",x.xc(104,143,"Subtotal"),": ",x.xc(105,145,a.entitySample.total_sub)," (VND) "),x.Nb(9),x.ed(x.xc(113,147,"Code")),x.Nb(3),x.fd(" ",x.xc(116,149,"Specification")," "),x.Nb(3),x.ed(x.xc(119,151,"Method")),x.Nb(5),x.ed(x.xc(124,153,"Quantity")),x.Nb(3),x.ed(x.xc(127,155,"Unit")),x.Nb(3),x.ed(x.xc(130,157,"Unit price")),x.Nb(3),x.ed(x.xc(133,159,"Discount")),x.Nb(3),x.ed(x.xc(136,161,"Amount")),x.Nb(3),x.ed(x.xc(139,163,"Priority")),x.Nb(3),x.ed(x.xc(142,165,"TAT")),x.Nb(3),x.ed(x.xc(145,167,"Order")),x.Nb(3),x.ed(x.xc(148,169,"Hidden")),x.Nb(3),x.Dc("ngForOf",a._orderdetailists)}}var Za,ec=((Za=function(){function t(e,a,c,i,r,o,l,s){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=r,this._excelService=o,this._numberFormat=l,this.modalService=s,this.isSave=!1,this._flagModal="",this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this.filter_status="",this._requestslist=[],this.entity={},this.baseFolder=g.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this._reqlist=[],this._checkAll=!1,this._dt1="",this._dt2="",this._fdate=new Date,this._tdate=new Date,this.selectedCustomer=null,this.selectedCustomerLabel=null,this.selectedCustomer1=null,this._customers=[],this._contacts=[],this._today=new Date,this.singleSelect=[],this._titleCopy="",this._idCopy="",this.exportList=[],this.isExportLoading=!1,this._fromdateStr="",this._todateStr="",this._fromdate=new Date,this._todate=new Date,this.pageIndex1=1,this.pageSize1=10,this.totalRow1=0,this.pageIndex2=1,this.pageSize2=10,this.totalRow2=0,this.isLoadingTemplate=!1,this._templatelist=[],this._keyword1="",this.entityTemplate={},this._currentTabActivated=1,this._samples=[],this.entitySample={},this._categories=[],this.selectedCategory0=null,this._specifications=[],this.selectedSpecification0=null,this._orderdetailists=[],this._idTemplate="",this._flagChooseTemplate=!1,this._samplenatures=[],this.sample_nature_id=null,!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.socket=h()(g.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadCompanyLinks(),this.socket.on("refreshPage",function(t){e.loadData(),e.loadCompanyLinks()})}},{key:"loadData",value:function(){var t=this;this._isLoading=!0;var n={};n.page=this.pageIndex,n.limit=this.pageSize,n.filter=this._keyword,n.status=this.filter_status,n.domain=this.user.short_code,n.user_id=this.user.id,this._dataService.post("/request/getall",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({id:r.id,request_no:r.request_no,received_date:r.received_date,returned_date:r.returned_date,company_name_l:r.company_name_l,company_name_e:r.company_name_e,receive_company_e:r.receive_company_e,receive_company_l:r.receive_company_l,contact_name:r.contact_name,short_code:r.short_code,flag:!1,number_sample:r.number_sample,is_active:r.is_active,timestamp:r.timestamp,tax_vat:r.tax_vat,total:(parseFloat("NaN"==r.total?0:r.total)-parseInt(null==r.promo_special?0:r.promo_special))*(1-parseFloat(null==r.promo_perorder?0:r.promo_perorder)/100)*(1+parseFloat(null==r.tax_vat?0:r.tax_vat)/100),created_by:r.created_by,ordered_samples:r.ordered_samples,note:r.note,order_no:(null==r.employee_nr?"":r.employee_nr)+r.request_no.substr(2,r.request_no.length)})}}catch(o){i.e(o)}finally{i.f()}t._requestslist=c,t.totalRow=n.rowCount,t.totalPage=n.totalPages,t._isLoading=!1})}},{key:"loadCustomers",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/customer/getallcustomersnopaging",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({name:r.name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._customers=c})}},{key:"loadCompanyLinks",value:function(){var t=this,n={};n.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({name:r.code_link,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._customers=c})}},{key:"_getInfoLabelCustomer",value:function(){var e=this;this.selectedCustomerLabel=null!=this.selectedCustomer?this._customers.filter(function(t){return t.code==e.selectedCustomer})[0].name:null}},{key:"_switchPercent",value:function(e){e>100&&(this.entity.promo_perorder=100)}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._requestslist.forEach(function(e){return t.exportList.push(e.id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!==t})}},{key:"loadContacts",value:function(t){var n=this;if(null==t)this.selectedContact=null;else{var a={};a.customer_id=t,this._dataService.post("/customer/getallcontactsnopaging",a).subscribe(function(t){console.log("Contact",t);var a,c=[],i=e(t.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({name:r.name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}n._contacts=c})}}},{key:"changeCheckAll",value:function(t){var n=[];if(this._checkAll){var a,c=e(t);try{for(c.s();!(a=c.n()).done;){var i=a.value;n.push({id:i.id,request_no:i.request_no,received_date:i.received_date,returned_date:i.returned_date,cus_name_l:i.cus_name_l,cus_name_e:i.cus_name_e,contact_name_l:i.contact_name_l,contact_name_e:i.contact_name_e,short_code:i.short_code,flag:!0,number_sample:i.number_sample,is_active:i.is_active,timestamp:i.timestamp,tax_vat:i.tax_vat,total:i.total,created_by:i.created_by,ordered_samples:i.ordered_samples})}}catch(s){c.e(s)}finally{c.f()}}else{var r,o=e(t);try{for(o.s();!(r=o.n()).done;){var l=r.value;n.push({id:l.id,request_no:l.request_no,received_date:l.received_date,returned_date:l.returned_date,cus_name_l:l.cus_name_l,cus_name_e:l.cus_name_e,contact_name_l:l.contact_name_l,contact_name_e:l.contact_name_e,short_code:l.short_code,flag:!1,number_sample:l.number_sample,is_active:l.is_active,timestamp:l.timestamp,tax_vat:l.tax_vat,total:l.total,created_by:l.created_by,ordered_samples:l.ordered_samples})}}catch(s){o.e(s)}finally{o.f()}}this._requestslist=n}},{key:"_changeCheckOne",value:function(t){this._checkAll=!0;var n,a=[],c=e(this._requestslist);try{for(c.s();!(n=c.n()).done;){var i=n.value;a.push(i.id==t.id?{id:i.id,request_no:i.request_no,received_date:i.received_date,returned_date:i.returned_date,cus_name_l:i.cus_name_l,cus_name_e:i.cus_name_e,contact_name_l:i.contact_name_l,contact_name_e:i.contact_name_e,short_code:i.short_code,flag:t.flag,number_sample:i.number_sample,is_active:i.is_active,timestamp:i.timestamp,tax_vat:i.tax_vat}:{id:i.id,request_no:i.request_no,received_date:i.received_date,returned_date:i.returned_date,cus_name_l:i.cus_name_l,cus_name_e:i.cus_name_e,contact_name_l:i.contact_name_l,contact_name_e:i.contact_name_e,short_code:i.short_code,flag:i.flag,number_sample:i.number_sample,is_active:i.is_active,timestamp:i.timestamp,tax_vat:i.tax_vat})}}catch(r){c.e(r)}finally{c.f()}this._requestslist=a}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this._checkAll||this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this._checkAll||this.socket.emit("refresh",{})}},{key:"loadDetail",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/request/detail",n).subscribe(function(e){t.entity=e.data,null!=e.data.customer_id?(t.selectedCustomer=e.data.customer_id,t.selectedCustomerLabel=t._customers.filter(function(e){return e.code==t.selectedCustomer})[0].name):(t.selectedCustomer=null,t.selectedCustomerLabel=null),null!=e.data.received_date&&(t._dt1=d(new Date(e.data.received_date)).format("YYYY-MM-DD HH:mm"),t._fdate=new Date(e.data.received_date)),null!=e.data.returned_date&&(t._dt2=d(new Date(e.data.returned_date)).format("YYYY-MM-DD HH:mm"),t._tdate=new Date(e.data.returned_date))})}},{key:"deleteItem",value:function(e){var t=this;v.a.fire({title:"en"==this.user.lang?y.a.are_you_sure_en:y.a.are_you_sure,text:"en"==this.user.lang?e.category_name_e:e.category_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(n){if(n.value){var a={};a.id=e.id,t._dataService.post("/sample_matrix/deleteCat",a).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_DELETE_EN:y.a.MSG_DELETE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)})}})}},{key:"saveChange",value:function(e){var t=this;if(this._fdate>this._tdate||null==e||0==this.entity.number_sample||null==this._fdate||null==this._tdate)this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_DATE_EN:y.a.MSG_ERROR_DATE,"en"==this.user.lang?y.a.error_title_en:y.a.error_title);else if(this.isSave=!0,this.entity.customer_id=e,this.entity.received_date=this._dt1,this.entity.returned_date=this._dt2,this.entity.userid=this.user.id,this.entity.ipaddress=this.user.ipaddress,"ADD"==this._flagModal){this.entity.short_code=this.user.short_code;var n=new Date;this.entity.timestamp=d(n).format("YYYY-MM-DD HH:mm:ss"),console.log(this.entity),this._dataService.post("/request/add",this.entity).subscribe(function(e){t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),t.entity={},t.entity.tax_vat=10,t.entity.number_sample=1,t.entity.is_active=0,t.entity.valid_number=5,t.selectedContact=null,t.selectedCustomer=null,t._fdate=null,t._tdate=null,t._dt1="",t._dt2="",t.isSave=!1,t.modalService.dismissAll()},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)})}else console.log("Update",this.entity),this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/request/update",this.entity).subscribe(function(e){t.isSave=!1,t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t.modalService.dismissAll()},function(){t.isSave=!1,t._notifyService.showError("en"==t.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)})}},{key:"orgValueChange1",value:function(e){null!=e&&"Invalid date"!=e?(this._fdate=e,this._tdate=new Date(e.getTime()+864e5*this.entity.valid_number),this._dt1=d(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=d(this._tdate).format("YYYY-MM-DD HH:mm")):(this._dt1="",this._fdate=null)}},{key:"orgValueChange2",value:function(e){null!=e&&"Invalid date"!=e?(this._tdate=e,this._dt1=d(this._fdate).format("YYYY-MM-DD HH:mm"),this._dt2=d(this._tdate).format("YYYY-MM-DD HH:mm"),this.entity.valid_number=Math.round((this._tdate-this._fdate)/864e5)):(this._dt2="",this._tdate=null)}},{key:"_calculateDays",value:function(){null!=this._fdate&&(this._tdate=new Date(this._fdate.getTime()+864e5*this.entity.valid_number))}},{key:"_openModal",value:function(e,t){null==t?(this._flagModal="ADD",this.entity={},this.entity.tax_vat=10,this.entity.number_sample=1,this.entity.is_active=0,this.entity.valid_number=7,this.entity.is_issue_bill=!0,this.selectedContact=null,this.selectedCustomer=null,this._fdate=null,this._tdate=null,this._dt1="",this._dt2=""):(this._flagModal="UPDATE",this.loadDetail(t.id)),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"_routeDetail",value:function(e){this._route.navigate(["/request/detail/"+e.id])}},{key:"_exportAll",value:function(t){var n=this;console.log(t),this.isExportLoading=!0,this._dataService.post("/request/exportRequest",t).subscribe(function(t){if(t.data.length>0){var a,c=[],i=e(t.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({"Request No":r.request_no,"Customer Name":r.company_name_l,Contact:r.contact_name,"Received Date":d(new Date(r.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(r.returned_date)).format("DD/MM/YYYY"),"Samples Ordered":r.ordered_samples+"/"+(null==r.number_sample?"0":r.number_sample),"VAT (%)":null==r.tax_vat?"":r.tax_vat,Total:0==r.ordered_samples?"0":n._numberFormat.localeString(parseFloat(r.total)),Status:r.is_active?"Confirmed":"Cancelled","Created By":r.created_by,"Promotion Per Group":n._numberFormat.localeString(parseFloat(r.promotion_per_group)),"Promotion Per Order":n._numberFormat.localeString(parseFloat(r.promotion_per_order)),"Total before tax":n._numberFormat.localeString(parseFloat(r.before_tax)),"Total after tax":n._numberFormat.localeString(parseFloat(r.after_tax)).substr(0,n._numberFormat.localeString(parseFloat(r.after_tax)).lastIndexOf("."))})}}catch(o){i.e(o)}finally{i.f()}n._excelService.exportAsExcelFile(c,"Requests-"+d(new Date).format("YYYY-MM-DD")),n.isExportLoading=!1,n._notifyService.showSuccess("en"==n.user.lang?y.a.MSG_EXPORT_EN+" "+t.data.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.data.length+" "+y.a.record,"OK")}else n.isExportLoading=!1,n._notifyService.showWarning("en"==n.user.lang?y.a.MSG_EXPORT_EN+" 0 "+y.a.record_en:y.a.MSG_EXPORT+" 0 "+y.a.record,"en"==n.user.lang?y.a.error_title_en:y.a.error_title)},function(){n.isExportLoading=!1,n._notifyService.showError("en"==n.user.lang?y.a.MSG_EXPORTNO_EN:y.a.MSG_EXPORT_NO,"en"==n.user.lang?y.a.error_title_en:y.a.error_title)})}},{key:"_exportAllRangeWithStatus",value:function(e){this.modalService.open(e,{size:"md",centered:!0})}},{key:"openCopyModal",value:function(e,t,n){0==n?(this._titleCopy=t.request_no,this._idCopy=t.id):(this._titleCopy="en"==this.user.lang?"total of requests: ":"t\u1ed5ng s\u1ed1 y\xeau c\u1ea7u: "+t.length,this._idCopy=t),this.modalService.open(e,{size:"md",centered:!0})}},{key:"_copyRequest",value:function(e){var t=this,n={};n.id=this._idCopy,n.customer_id=e,n.userid=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code,this._dataService.post("/request/copy",n).subscribe(function(e){t._idCopy="",t._titleCopy="",t.selectedCustomer1=null,t.modalService.dismissAll(),t._notifyService.showSuccess("en"==t.user.lang?y.a.copy_msgok_en:y.a.copy_msgok,"OK"),t.socket.emit("refresh",{})})}},{key:"_copyAll",value:function(e,t){var n=this;console.log(e,t);var a={};a.ids=e,a.customer_id=t,a.userid=this.user.id,a.ipaddress=this.user.ipaddress,a.short_code=this.user.short_code,this._dataService.post("/request/copyAll",a).subscribe(function(e){n._idCopy="",n._titleCopy="",n.selectedCustomer1=null,n.modalService.dismissAll(),n._notifyService.showSuccess("en"==n.user.lang?y.a.copy_msgok_en:y.a.copy_msgok,"OK"),n.exportList=[],n.socket.emit("refresh",{})})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}},{key:"changeFromDate",value:function(e){null==e?(this._fromdateStr="",this._fromdate=null):(this._fromdateStr=d(e).format("YYYY-MM-DD"),this._fromdate=e)}},{key:"changeToDate",value:function(e){null==e?(this._todateStr="",this._todate=null):(this._todateStr=d(e).format("YYYY-MM-DD"),this._todate=e)}},{key:"_exportAllRangeWithStatusA",value:function(){var t=this;console.log(this._fromdate,this._todate),this._fromdate>this._todate||null==this._fromdate||null==this._todate?this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_DATE_EN:y.a.MSG_ERROR_DATE,"en"==this.user.lang?y.a.error_title_en:y.a.error_title):this._dataService.post("/request/exportRange",{from_date:this._fromdateStr,to_date:this._todateStr,short_code:this.user.short_code}).subscribe(function(n){if(n.data.length>0){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({"Request No":r.request_no,"Customer Name":r.company_name_l,Contact:r.contact_name,"Received Date":d(new Date(r.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(r.returned_date)).format("DD/MM/YYYY"),"Samples Ordered":r.ordered_samples+"/"+(null==r.number_sample?"0":r.number_sample),"VAT (%)":null==r.tax_vat?"":r.tax_vat,Total:0==r.ordered_samples?"0":t._numberFormat.localeString(parseFloat(r.total)),Status:r.is_active?"Confirmed":"Cancelled","Created By":r.created_by,"Promotion Per Group":t._numberFormat.localeString(parseFloat(r.promotion_per_group)),"Promotion Per Order":t._numberFormat.localeString(parseFloat(r.promotion_per_order)),"Total Before Tax":t._numberFormat.localeString(parseFloat(r.before_tax)),"Total After Tax":t._numberFormat.localeString(parseFloat(r.after_tax)).substr(0,t._numberFormat.localeString(parseFloat(r.after_tax)).lastIndexOf(".")),"Issue Bill VAT":null!=r.is_issue_bill&&r.is_issue_bill?"Yes":"No",Note:r.note})}}catch(o){i.e(o)}finally{i.f()}t._excelService.exportAsExcelFile(c,"Requests-"+d(new Date).format("YYYY-MM-DD")),t.isExportLoading=!1,t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_EXPORT_EN+" "+n.data.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+n.data.length+" "+y.a.record,"OK"),t.modalService.dismissAll()}else t.isExportLoading=!1,t._notifyService.showWarning("en"==t.user.lang?y.a.MSG_EXPORT_EN+" 0 "+y.a.record_en:y.a.MSG_EXPORT+" 0 "+y.a.record,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)},function(){t.isExportLoading=!1,t._notifyService.showError("en"==t.user.lang?y.a.MSG_EXPORTNO_EN:y.a.MSG_EXPORT_NO,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)})}},{key:"loadTemplateList",value:function(){var t=this;this.isLoadingTemplate=!0;var n={};n.page=this.pageIndex1,n.limit=this.pageSize1,n.filter=this._keyword1,n.domain=this.user.short_code,this._dataService.post("/request/getalltemplates",n).subscribe(function(n){console.log(n);var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r,o=a.value,l=0,s=e(o.json.data);try{for(s.s();!(r=s.n()).done;)l+=r.value.order_details.length}catch(d){s.e(d)}finally{s.f()}c.push({id:o.id,name:o.name,number_sample:o.number_sample,json:o.json,short_code:o.short_code,timestamp:o.timestamp,total:o.total,total_parameters:l})}}catch(d){i.e(d)}finally{i.f()}t._templatelist=c,t.totalRow1=n.rowCount,t.totalPage1=n.totalPages,t.isLoadingTemplate=!1})}},{key:"_pageSizeChangeTemplate",value:function(e){this.pageSize1=e.target.value,this.loadTemplateList()}},{key:"pageChangedTemplate",value:function(e){this.pageIndex1=e.page,this.loadTemplateList()}},{key:"openTemplateModal",value:function(e){this.loadTemplateList(),this.modalService.open(e,{size:"xl",centered:!0,backdrop:!1})}},{key:"popupTemplateModal",value:function(e,t){this.loadSampleNature(),this.loadCategories(),null==t?(this._currentTabActivated=1,this.entitySample={},this.entityTemplate={},this.entityTemplate.id=null,this.entityTemplate.name=null,this.entityTemplate.number_sample=1,this.entityTemplate.short_code=this.user.short_code,this.entityTemplate.total=0,this._orderdetailists=[],this._samples=[{id:1,sample_name:null,sample_name_e:null,description:null,description_e:null,note:null,weight:null,order_details:this._orderdetailists,total_sub:0,sample_nature_id:null}],this.entityTemplate.json={data:this._samples}):this.loadDetailRequestTemplate(t.id),this.modalService.open(e,{size:"xl",centered:!0})}},{key:"_changeSample",value:function(e){if(e>this._samples.length){for(var t=0;t<e-this._samples.length;t++)this._samples.push({id:this._samples.length+t+1,sample_name:null,sample_name_e:null,description:null,description_e:null,note:null,weight:null,order_details:[],total_sub:0});this.entityTemplate.json={data:this._samples},this.saveChangeSample()}else null!=this.entityTemplate.id&&this.loadDetailRequestTemplate(this.entityTemplate.id)}},{key:"_chooseTab",value:function(e){this.selectedSpecification0=null,this.selectedCategory0=null,this.sample_nature_id=null,this._currentTabActivated=e.id,this.entitySample=this._samples.filter(function(t){return t.id==e.id})[0],this._orderdetailists=this._samples.filter(function(t){return t.id==e.id})[0].order_details}},{key:"_updateSample",value:function(t){var n,a=e(this._samples);try{for(a.s();!(n=a.n()).done;){var c=n.value;c.id==this._currentTabActivated&&(c.sample_name=null==t.sample_name?null:t.sample_name,c.sample_name_e=null==t.sample_name_e?null:t.sample_name_e,c.description=null==t.description?null:t.description,c.description_e=null==t.description_e?null:t.description_e,c.note=null==t.note?null:t.note,c.weight=null==t.weight?null:t.weight,c.total_sub=t.total_sub)}}catch(i){a.e(i)}finally{a.f()}this.entityTemplate.json={data:this._samples},this.saveChangeSample()}},{key:"_removeTab",value:function(t){var n,a=[],c=1,i=e(this._samples.filter(function(e){return e.id!=t}));try{for(i.s();!(n=i.n()).done;){var r=n.value;a.push({id:c,sample_name:r.sample_name,sample_name_e:r.sample_name_e,description:r.description,description_e:r.description_e,note:r.note,weight:r.weight,order_details:r.order_details}),c+=1}}catch(o){i.e(o)}finally{i.f()}this.entityTemplate.number_sample=a.length,this.entityTemplate.json={data:a},this.saveChangeSample()}},{key:"saveChangeSample",value:function(){var e=this;null==this.entityTemplate.id?this._dataService.post("/request/addRequestTemplate",this.entityTemplate).subscribe(function(t){e.loadDetailRequestTemplate(t.data.id),e.loadTemplateList()}):this._dataService.post("/request/updateRequestTemplate",this.entityTemplate).subscribe(function(t){e.loadDetailRequestTemplate(t.data.id)})}},{key:"loadDetailRequestTemplate",value:function(e){var t=this;this._dataService.post("/request/detailRequestTemplate",{id:e}).subscribe(function(e){t.entityTemplate=e.data,t._samples=e.data.json.data,t.entitySample=t._samples.filter(function(e){return e.id==t._currentTabActivated})[0],t._orderdetailists=t._samples.filter(function(e){return e.id==t._currentTabActivated})[0].order_details})}},{key:"loadCategories",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({name:"en"==t.user.lang?r.category_name_e:r.category_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._categories=c})}},{key:"changeCategoryMatrix",value:function(){this.loadSpecs(this.selectedCategory0)}},{key:"loadSpecs",value:function(t){var n=this;if(null!=t){var a={};a.domain=this.user.short_code,a.id=t,this._dataService.post("/sample_matrix/getallparametersnopagingbycat",a).subscribe(function(t){var a,c=[],i=e(t.data.filter(function(e){return e.is_active}));try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({name:r.specification_name_l,code:r.parameter_id})}}catch(o){i.e(o)}finally{i.f()}n._specifications=c})}else{var c={};c.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparametersnopaging",c).subscribe(function(t){var a,c=[],i=e(t.data.filter(function(e){return e.is_active}));try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({name:r.specification_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}n._specifications=c})}}},{key:"changeSpecification",value:function(e,t){console.log(this.selectedSpecification0,t),null!=this.selectedSpecification0&&null!=t&&this._addItemsTemplate(this.selectedSpecification0,e,t)}},{key:"_removeItemTemplate",value:function(e){var t=this;this._dataService.post("/request/removeItemOrderTemplate",{sample_id:e.sample_id,parameter_id:e.parameter_id,category_id:e.category_id,id:this.entityTemplate.id}).subscribe(function(e){t.loadDetailRequestTemplate(t.entityTemplate.id),t.loadTemplateList()})}},{key:"_addItemsTemplate",value:function(e,t,n){var a=this;console.log(e,t),this._dataService.post("/request/addItemOrderTemplate",{sample_id:this._currentTabActivated,parameter_id:e,category_id:n,priority:0,id:this.entityTemplate.id}).subscribe(function(e){console.log(e),a.selectedSpecification0=null,a.loadDetailRequestTemplate(a.entityTemplate.id),a.loadTemplateList()})}},{key:"_updateItemTemplate",value:function(e){var t=this;this._dataService.post("/request/updateItemTemplate",{id:this.entityTemplate.id,getlist:e}).subscribe(function(e){t.loadDetailRequestTemplate(t.entityTemplate.id)})}},{key:"_popupCopyTemplate",value:function(e,t){this.selectedCustomer1=null,this._idTemplate=t.id,this._flagChooseTemplate=!0,this._titleCopy="en"==this.user.lang?"From Template: "+t.name:"T\u1eeb nguy\xean m\u1eabu: "+t.name,this.modalService.open(e,{size:"md",centered:!0,backdrop:!1})}},{key:"deleteItemTemplate",value:function(e){var t=this;this._dataService.post("/request/deleteItemTemplate",{id:e.id}).subscribe(function(e){t.loadTemplateList(),t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_DELETE_EN:y.a.MSG_DELETE,"OK")})}},{key:"_copyTemplate",value:function(e,t){var n=this;this._dataService.post("/request/convertTemplate2Request",{id:e,customer_id:t,userid:this.user.id,ipaddress:this.user.ipaddress,short_code:this.user.short_code}).subscribe(function(e){console.log(e),n._notifyService.showSuccess("en"==n.user.lang?y.a.copy_msgok_en:y.a.copy_msgok,"OK"),n.selectedCustomer1=null,n.modalService.dismissAll(),n.socket.emit("refresh",{})})}},{key:"loadSampleNature",value:function(){var t=this;this._dataService.post("/sample_matrix/getallsamplenaturenopaging",{short_code:this.user.short_code}).subscribe(function(n){console.log(n);var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({id:r.id,name:"en"==t.user.lang?r.name_e:r.name_l})}}catch(o){i.e(o)}finally{i.f()}t._samplenatures=c})}}]),t}()).\u0275fac=function(e){return new(e||Za)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(et.a),x.bc(C.s))},Za.\u0275cmp=x.Vb({type:Za,selectors:[["app-req-management"]],decls:119,vars:100,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[2,"width","130px"],[4,"ngIf"],["content",""],["contentRelationship",""],["contentCopy",""],["contentRangeDate",""],["contentTemplate",""],["contentAddTemplateModal",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-copy"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-bookmark-o"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","13",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-eye"],["class","btn btn-sm btn-primary mr-sm-1",3,"disabled","ngbTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"disabled","ngbTooltip","click"],[3,"ngbTooltip"],[1,"text-right"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","ngbTooltip","click"],[1,"fa","fa-pencil"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"form","theme-form",3,"ngSubmit"],["f0","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","number_sample"],["type","number","id","number_sample","name","number_sample","required","","autocomplete","off","min","0",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["type","hidden","name","ID",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-3"],["for","tax_vat"],["type","number","id","tax_vat","name","tax_vat","required","","autocomplete","off","min","0",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","isOnOff"],[1,"checkbox","checkbox-primary"],["id","isOnOff","type","checkbox","name","isOnOff",3,"ngModel","ngModelChange"],[1,"col-md-12"],["for","title_promo_spec"],["type","text","id","title_promo_spec","name","title_promo_spec","autocomplete","off",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","promo_special_en"],["type","text","id","promo_special_en","name","promo_special_en","autocomplete","off","min","0","mask","separator.2","thousandSeparator",",",3,"ngClass","placeholder","ngModel","disabled","ngModelChange"],["for","promo_perorder"],["type","number","id","promo_perorder","name","promo_perorder","autocomplete","off",3,"ngClass","placeholder","ngModel","min","max","disabled","ngModelChange","change"],["for","Company"],["name","selectedCustomer","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["class","mute",4,"ngIf"],["for","received_date"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",3,"placeholder","ngClass","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","returned_date"],["type","text","name","_tdate","bsDatepicker","","autocomplete","off","required","",3,"placeholder","ngClass","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","valid_number"],["name","num","pattern","[0-9]",3,"type","placeholder","ngClass","ngModel","disabled","min","ngModelChange","change"],["for","permission_write"],["id","permission_write","name","permission_write",1,"form-control",3,"ngModel","ngModelChange"],["for","comment"],["rows","2","id","comment","name","comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",4,"ngIf"],[1,"mute"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary"],["class","modal-title",4,"ngIf"],["class","form-group row",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"col-md-10"],["type","search","aria-label","Search","name","_keywordRel","autocomplete","off",1,"form-control","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"col-md-2"],["type","button",1,"btn","btn-primary","bt-sm",3,"click"],["class","form-inline my-2 my-lg-0",4,"ngIf"],[1,"form-inline","my-2","my-lg-0"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],["colspan","8",2,"text-align","center"],[2,"cursor","pointer",3,"click"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-trash"],["form1","ngForm"],["for","contact_name"],["type","text","id","contact_name","name","contact_name","required","","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","ngModelChange"],["for","contact_code"],["type","text","id","contact_code","name","contact_code","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","phone"],["type","text","id","phone","name","phone","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","email"],["type","text","id","email","name","email","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Descriptiona"],["rows","2","id","Descriptiona","name","Descriptiona",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Description1a"],["rows","2","id","Description1a","name","Description1a",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["id","permission_write","type","checkbox","name","permission_write",3,"ngModel","ngModelChange"],["type","submit","class","btn btn-primary mr-sm-1",3,"disabled",4,"ngIf"],["type","button","class","btn btn-warning mr-sm-1",3,"click",4,"ngIf"],["type","text","autocomplete","off","name","_keyword1",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["name","mypage","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[2,"overflow-x","auto"],["type","submit",1,"btn","btn-primary","mr-sm-1",3,"disabled"],["type","button",1,"btn","btn-warning","mr-sm-1",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","click"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],["form2","ngForm"],["for","link_code"],["id","link_code","name","link_code","rows","2",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","info_company_id"],["name","selectedCompany","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSender","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","button",1,"btn","btn-secondary","mr-sm-1",3,"click"],["type","button","class","btn btn-primary mr-sm-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","mr-sm-1",3,"click"],[1,"form","theme-form"],["for","company_en"],["name","selectedCustomer1","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["for","fromdate"],["id","fromdate","type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","fromdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["for","todate"],["id","todate","type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","todate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],[1,"col-md-12","text-center"],["href","javascript:;","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["href","javascript:;","class","btn btn-sm btn-warning",4,"ngIf"],["href","javascript:;",1,"btn","btn-sm","btn-warning",3,"click"],["href","javascript:;",1,"btn","btn-sm","btn-warning"],[1,"col-md-9"],[1,"form-group","form-inline"],["type","text","name","_keyword",1,"form-control","mr-sm-1",3,"placeholder","ngModel","ngModelChange","keyup.enter","change"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"click"],["src","../../../../assets/img/circles.svg","width","17px","class","mr-sm-1",4,"ngIf"],["id","select151","name","select151",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["class","col-sm-12 col-lg-12 col-xl-12",4,"ngIf"],[2,"width","2px","text-align","center"],["src","../../../../assets/img/circles.svg","width","17px",1,"mr-sm-1"],["colspan","7",1,"text-center"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],[1,"btn","btn-sm","btn-secondary","mr-sm-1",3,"ngbTooltip","click"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"ngbTooltip","click"],[1,"col-md-7"],["for","temp_name"],["type","text","id","temp_name","name","temp_name","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","change"],["for","tmep_num_sample"],["type","number","id","tmep_num_sample","name","tmep_num_sample","autocomplete","off","min","1",1,"form-control",3,"ngModel","ngModelChange","keyup.enter","change"],["type","text","name","temp_total","autocomplete","off","mask","separator.2","thousandSeparator",",","disabled","",1,"form-control","jdisabled",3,"ngModel","ngModelChange"],[1,"col-sm-12","col-lg-12","col-xl-11"],[1,"btn-group","flex-wrap"],[1,"col-sm-12","col-lg-12","col-xl-1","text-right"],["href","javascript:;","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[3,"for"],["type","text","autocomplete","off",1,"form-control",3,"id","name","ngModel","placeholder","ngModelChange","keyup.enter","change"],["rows","3",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange","change"],["type","text",1,"form-control",3,"id","placeholder","name","ngModel","ngModelChange","change","keypress.enter"],["bindValue","id","bindLabel","name",3,"items","name","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["ng-option-tmp",""],["name","matrix_category","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSpecification0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","disabled","ngModelChange","change"],[1,"table-responsive",2,"max-height","200px"],["id","hor-minimalist-line-border"],["colspan","15",1,"text-right",2,"background-color","rgb(201, 201, 201)","color","black"],[1,"text-truncate"],[1,"scope"],["type","button",3,"ngClass","click"],["href","javascript:;",1,"btn","btn-sm","btn-danger",3,"click"],["container","body",3,"ngbTooltip"],["href","javascript:;",1,"text-danger",3,"click"],[3,"ngClass"],["type","text",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","text","min","0","mask","separator.2","thousandSeparator",",",1,"form-control",2,"width","100px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","text","min","0","mask","separator.2","thousandSeparator",",",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","number","min","0",1,"form-control",2,"width","65px",3,"name","ngModel","ngModelChange","change","keyup.enter"],["type","checkbox",1,"form-control",3,"name","ngModel","ngModelChange","change"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.bd(10,Wn,3,3,"button",8),x.bd(11,Jn,4,3,"button",9),x.bd(12,Zn,5,6,"button",10),x.bd(13,ea,4,3,"button",11),x.bd(14,ta,1,0,"img",12),x.gc(),x.gc(),x.hc(15,"div",13),x.hc(16,"div",14),x.hc(17,"select",15),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(18,"option",16),x.dd(19,"#10"),x.gc(),x.hc(20,"option",17),x.dd(21,"#25"),x.gc(),x.hc(22,"option",18),x.dd(23,"#50"),x.gc(),x.hc(24,"option",19),x.dd(25,"#100"),x.gc(),x.gc(),x.hc(26,"select",20),x.rc("ngModelChange",function(e){return t.filter_status=e})("change",function(){return t.loadData()}),x.hc(27,"option",21),x.dd(28),x.wc(29,"translate"),x.gc(),x.hc(30,"option",22),x.dd(31),x.wc(32,"translate"),x.gc(),x.hc(33,"option",23),x.dd(34),x.wc(35,"translate"),x.gc(),x.hc(36,"option",24),x.dd(37),x.wc(38,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(39,"div",25),x.hc(40,"div",26),x.hc(41,"div",27),x.hc(42,"div",28),x.hc(43,"pagination",29),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(44,"div",30),x.hc(45,"a",31),x.dd(46),x.wc(47,"translate"),x.wc(48,"translate"),x.wc(49,"translate"),x.wc(50,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(51,"div",26),x.hc(52,"div",32),x.hc(53,"table",33),x.hc(54,"thead",34),x.hc(55,"tr"),x.hc(56,"th",35),x.dd(57,"#"),x.gc(),x.hc(58,"th",36),x.hc(59,"input",37),x.rc("change",function(e){return t.selectAll(e)}),x.gc(),x.gc(),x.hc(60,"th",38),x.dd(61),x.wc(62,"translate"),x.gc(),x.hc(63,"th",36),x.dd(64),x.wc(65,"translate"),x.gc(),x.hc(66,"th",36),x.dd(67),x.wc(68,"translate"),x.gc(),x.hc(69,"th",36),x.dd(70),x.wc(71,"translate"),x.gc(),x.hc(72,"th",36),x.dd(73),x.wc(74,"translate"),x.gc(),x.hc(75,"th",36),x.dd(76),x.wc(77,"translate"),x.gc(),x.hc(78,"th",36),x.dd(79),x.wc(80,"translate"),x.gc(),x.hc(81,"th",36),x.dd(82),x.wc(83,"translate"),x.gc(),x.hc(84,"th",36),x.dd(85),x.wc(86,"translate"),x.gc(),x.hc(87,"th",36),x.dd(88),x.wc(89,"translate"),x.gc(),x.hc(90,"th",36),x.dd(91),x.wc(92,"translate"),x.gc(),x.gc(),x.gc(),x.hc(93,"tbody"),x.bd(94,na,6,3,"ng-container",39),x.bd(95,la,2,1,"ng-container",39),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(96,"div",26),x.hc(97,"div",27),x.hc(98,"div",28),x.hc(99,"pagination",29),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(100,"div",30),x.hc(101,"a",31),x.dd(102),x.wc(103,"translate"),x.wc(104,"translate"),x.wc(105,"translate"),x.wc(106,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(107,ga,121,122,"ng-template",null,40,x.cd),x.bd(109,Ra,12,7,"ng-template",null,41,x.cd),x.bd(111,Ua,17,9,"ng-template",null,42,x.cd),x.bd(113,La,25,17,"ng-template",null,43,x.cd),x.bd(115,Qa,59,33,"ng-template",null,44,x.cd),x.bd(117,Ja,151,171,"ng-template",null,45,x.cd)),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,52,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","report")),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","create")&&t.exportList.length>0),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-LIST","report")),x.Nb(1),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(9),x.Dc("ngModel",t.filter_status),x.Nb(2),x.fd(" ",x.xc(29,54,"All")," "),x.Nb(3),x.fd(" ",x.xc(32,56,"Pending")," "),x.Nb(3),x.fd(" ",x.xc(35,58,"Confirmed")," "),x.Nb(3),x.fd(" ",x.xc(38,60,"Cancel")," "),x.Nb(6),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(47,62,"Total of records"),": ",t.totalRow," - ",x.xc(48,64,"Page")," ",t.pageIndex," ",x.xc(49,66,"of")," ",t.totalPage," ",x.xc(50,68,"page"),""),x.Nb(13),x.Dc("disabled",0==t._requestslist.length)("checked",t.exportList.length==t._requestslist.length),x.Nb(2),x.ed(x.xc(62,70,"Actions")),x.Nb(3),x.fd(" ",x.xc(65,72,"Request code")," "),x.Nb(3),x.fd(" ",x.xc(68,74,"Order code")," "),x.Nb(3),x.fd(" ",x.xc(71,76,"Received date")," "),x.Nb(3),x.fd(" ",x.xc(74,78,"Customer")," "),x.Nb(3),x.fd(" ",x.xc(77,80,"Report company")," "),x.Nb(3),x.fd(" ",x.xc(80,82,"Total")," "),x.Nb(3),x.ed(x.xc(83,84,"Contact")),x.Nb(3),x.ed(x.xc(86,86,"Returned date")),x.Nb(3),x.ed(x.xc(89,88,"Status")),x.Nb(3),x.ed(x.xc(92,90,"Timestamp")),x.Nb(3),x.Dc("ngIf",0==t._requestslist.length),x.Nb(1),x.Dc("ngIf",t._requestslist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(103,92,"Total of records"),": ",t.totalRow," - ",x.xc(104,94,"Page")," ",t.pageIndex," ",x.xc(105,96,"of")," ",t.totalPage," ",x.xc(106,98,"page"),""))},directives:[o.c,o.n,o.q,r.q,o.x,o.r,o.A,T.a,r.p,C.N,o.z,o.o,o.p,o.s,o.w,r.o,o.b,ln.a,I.a,k.b,k.a,o.t,I.c],pipes:[P.c,r.f,r.g,r.y],styles:[""]}),Za);function tc(e,t){if(1&e&&(x.hc(0,"option",45),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.dept_name_e:n.dept_name_l," ")}}function nc(e,t){if(1&e&&(x.hc(0,"option",45),x.dd(1),x.gc()),2&e){var n=t.$implicit,a=x.vc();x.Dc("value",n.id),x.Nb(1),x.fd(" ","en"==a.user.lang?n.csp_name_e:n.csp_name_l," ")}}function ac(e,t){if(1&e){var n=x.ic();x.hc(0,"button",46),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e._preparationlist)}),x.cc(1,"i",47),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function cc(e,t){if(1&e){var n=x.ic();x.hc(0,"button",48),x.rc("click",function(){return x.Uc(n),x.vc()._exportAll1()}),x.cc(1,"i",47),x.dd(2),x.wc(3,"translate"),x.wc(4,"translate"),x.gc()}2&e&&(x.Nb(2),x.gd(" ",x.xc(3,2,"Export")," ",x.xc(4,4,"All")," "))}function ic(e,t){1&e&&x.cc(0,"img",49)}function rc(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",50),x.hc(3,"h3",51),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.fd(" ",x.xc(5,1,"No records now!!!")," "))}function oc(e,t){1&e&&x.cc(0,"i",65)}function lc(e,t){1&e&&x.cc(0,"i",66)}function sc(e,t){if(1&e){var n=x.ic();x.hc(0,"button",62),x.rc("click",function(){return x.Uc(n),x.vc(3)._switchFlagEdit()}),x.wc(1,"translate"),x.bd(2,oc,1,0,"i",63),x.bd(3,lc,1,0,"i",64),x.gc()}if(2&e){var a=x.vc().$implicit,c=x.vc(2);x.Dc("ngClass",a.flag?"btn btn-sm btn-danger mr-sm-1":"btn btn-sm btn-warning mr-sm-1")("disabled",!c._authenService.hasPermission("REQ-PRE","update"))("title",x.xc(1,5,a.flag?"Edit":"Cancel")),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag)}}function dc(e,t){if(1&e){var n=x.ic();x.hc(0,"button",67),x.rc("click",function(){x.Uc(n);var e=x.vc(3);return e._updateStatusv2(e._preparationlist)}),x.wc(1,"translate"),x.cc(2,"i",68),x.gc()}2&e&&x.Dc("title",x.xc(1,1,"Save"))}function uc(e,t){if(1&e&&(x.fc(0),x.dd(1),x.ec()),2&e){var n=x.vc().$implicit;x.Nb(1),x.fd(" ",n.note_lab,"")}}function hc(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"input",69),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.note_lab=e}),x.gc(),x.ec()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Nb(1),x.Fc("name","note_lab",c+1,""),x.Dc("ngModel",i.note_lab)}}function gc(e,t){1&e&&(x.hc(0,"span",70),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"None")))}function mc(e,t){1&e&&(x.hc(0,"span",71),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Preparation")))}function _c(e,t){1&e&&(x.hc(0,"span",72),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Technical validation")))}function pc(e,t){1&e&&(x.hc(0,"span",73),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Validation")))}function fc(e,t){1&e&&(x.hc(0,"span",74),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Done")))}function bc(e,t){if(1&e){var n=x.ic();x.hc(0,"tr"),x.hc(1,"th",53),x.dd(2),x.gc(),x.hc(3,"td"),x.bd(4,sc,4,7,"button",54),x.bd(5,dc,3,3,"button",55),x.gc(),x.hc(6,"td"),x.dd(7),x.gc(),x.hc(8,"td"),x.dd(9),x.gc(),x.hc(10,"td"),x.dd(11),x.gc(),x.hc(12,"td"),x.dd(13),x.gc(),x.hc(14,"td"),x.dd(15),x.gc(),x.hc(16,"td"),x.dd(17),x.gc(),x.hc(18,"td"),x.dd(19),x.gc(),x.hc(20,"td"),x.dd(21),x.gc(),x.hc(22,"td"),x.dd(23),x.gc(),x.hc(24,"td"),x.bd(25,uc,2,1,"ng-container",44),x.bd(26,hc,2,2,"ng-container",44),x.gc(),x.hc(27,"td",56),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2);return(1==e.status||0==e.status)&&e.flag&&a._authenService.hasPermission("REQ-PRE","update")?a._updateStatusItem(e):null}),x.bd(28,gc,3,3,"span",57),x.bd(29,mc,3,3,"span",58),x.bd(30,_c,3,3,"span",59),x.bd(31,pc,3,3,"span",60),x.bd(32,fc,3,3,"span",61),x.gc(),x.gc()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(2),x.fd(" ",c+1+i.pageSize*(i.pageIndex-1)," "),x.Nb(2),x.Dc("ngIf",0==a.status||1==a.status),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.fd(" ",a.order_code," "),x.Nb(2),x.ed(a.inner_code),x.Nb(2),x.fd(" ",a.code," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.specification_name_e:a.specification_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.para_name_e:a.para_name_l," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.category_name_e:a.category_name_l," "),x.Nb(2),x.ed("en"==i.user.lang?a.nature_name_e:a.nature_name_l),x.Nb(2),x.ed(a.tat),x.Nb(2),x.ed(a.note),x.Nb(2),x.Dc("ngIf",!a.flag),x.Nb(1),x.Dc("ngIf",a.flag),x.Nb(2),x.Dc("ngIf",0==a.status),x.Nb(1),x.Dc("ngIf",1==a.status),x.Nb(1),x.Dc("ngIf",2==a.status),x.Nb(1),x.Dc("ngIf",3==a.status),x.Nb(1),x.Dc("ngIf",4==a.status)}}function vc(e,t){if(1&e&&(x.fc(0),x.bd(1,bc,33,19,"tr",52),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._preparationlist)}}var yc,xc=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-dark-blue"}},Sc=((yc=function(){function t(e,a,c,i,r,o,l,s){n(this,t),this._authenService=e,this._dataService=a,this._route=c,this._notifyService=i,this._uploadService=r,this._excelService=o,this.formatPipe=l,this.modalService=s,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._preparationlist=[],this._fDate=null,this._tDate=null,this._dt1="",this._dt2="",this.department_id="",this.testcsp_id="",this._deptlist=[],this._csplist=[],this._status=9,this.entity={},!1!==e.checkAccess("REQ-LIST")&&!1!==e.hasPermission("REQ-LIST","read")||this._route.navigate(["/error/404"]),this.socket=h()(g.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadDepartment(),this.loadTestFamilyCSP()}},{key:"loadData",value:function(){var t=this,n={};n.filter=this._keyword,n.domain=this.user.short_code,n.start_date=this._dt1,n.end_date=this._dt2,n.department_id=this.department_id,n.family_id=this.testcsp_id,n.flag_status=this._status,n.page=this.pageIndex,n.limit=this.pageSize,this._dataService.post("/lab/getlistlabspre",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;c.push({order_code:r.employee_nr+r.request_no.substr(2,r.request_no.length),code:r.code,code_father:r.code_father,company_code:r.company_code,company_name_e:r.company_name_e,company_name_l:r.company_name_l,contact_name:r.contact_name,customer_id:r.customer_id,email:r.email,employee_nr:r.employee_nr,id:r.id,is_active:r.is_active,lod:r.lod,loq:r.loq,mark:r.mark,note_asm:r.note_asm,para_name_e:r.para_name_e,para_name_l:r.para_name_l,nature_name_e:r.nature_name_e,nature_name_l:r.nature_name_l,parameter_id:r.parameter_id,phone:r.phone,received_date:r.received_date,request_no:r.request_no,result_record:r.result_record,returned_date:r.returned_date,sale_man:r.sale_man,sample_code:r.sample_code,inner_code:r.inner_code,sample_id:r.sample_id,category_id:r.category_id,sample_name:r.sample_name,specification_name_e:r.specification_name_e,specification_name_l:r.specification_name_l,unit:r.unit,userid:r.userid,flag:!1,note_lab:r.note_lab,status:r.status,note:r.note,category_name_e:r.category_name_e,category_name_l:r.category_name_l,tat:r.tat,dept_name_e:r.dept_name_e,dept_name_l:r.dept_name_l,csp_name_e:r.csp_name_e,csp_name_l:r.csp_name_l,receiver_company:r.receiver_company,receiver_contact:r.receiver_contact,biller_company:r.biller_company,biller_contact:r.biller_contact,price:r.price,quantity:r.quantity,state_of_report:r.state_of_report})}}catch(o){i.e(o)}finally{i.f()}t._preparationlist=c,t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.loadData()}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.loadData()}},{key:"loadDepartment",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",t).subscribe(function(t){e._deptlist=t.data})}},{key:"loadTestFamilyCSP",value:function(){var e=this,t={};t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",t).subscribe(function(t){e._csplist=t.data})}},{key:"_exportAll",value:function(t){console.log("Origin",t);var n,a=[],c=e(t);try{for(c.s();!(n=c.n()).done;){var i=n.value,r="";4==i.status&&(r="en"==this.user.lang?y.a.s_done_en:y.a.s_done),3==i.status&&(r="en"==this.user.lang?y.a.s_validate_en:y.a.s_validate),2==i.status&&(r="en"==this.user.lang?y.a.s_techvalidate_en:y.a.s_techvalidate),1==i.status&&(r="en"==this.user.lang?y.a.s_prepare_en:y.a.s_prepare),0==i.status&&(r="en"==this.user.lang?y.a.s_none_en:y.a.s_none);var o=new Date(i.received_date).getTime()+864e5*i.tat,l="en"==this.user.lang?i.csp_name_e:i.csp_name_l,s=i.company_name_l+(null==i.phone?"":"/Phone: "+i.phone),u="";null!=i.receiver_company&&(u=i.receiver_company.company_name_l+(null==i.receiver_company.address_l?"":"/Address: "+i.receiver_company.address_l));var h="";null!=i.biller_company&&(h=i.biller_company.company_name_l+(null==i.biller_company.tax_code?"":"/Tax code: "+i.biller_company.tax_code)+(null==i.biller_company.address_l?"":"/Address: "+i.biller_company.address_l),null!=i.biller_contact&&(h+=(null==i.biller_contact.email?"":"/Email: "+i.biller_contact.email)+(null==i.biller_contact.phone?"":"/Phone: "+i.biller_contact.phone)));var g="Unknown";0==i.state_of_report&&(g="Draft"),1==i.state_of_report&&(g="Official"),2==i.state_of_report&&(g="Evicted"),3==i.state_of_report&&(g="Printed"),4==i.state_of_report&&(g="Cancel"),a.push({"Request No":i.request_no,"Inner code":i.inner_code,Code:i.code,"Internal test":i.specification_name_l,Parameter:i.para_name_l,"Sample matrix":i.category_name_l,"Priority TAT":i.tat,Note:null==i.note?"":i.note,"Note to Lab":null==i.note_lab?"":i.note_lab,Status:r,"Received Date":d(new Date(i.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(o)).format("DD/MM/YYYY"),Department:"en"==this.user.lang?i.dept_name_e:i.dept_name_l,CSP:null==l?"":l,"Sample name":i.sample_name,Sender:s,Receiver:u,Biller:h,"Customer code":i.company_code,BD:i.employee_nr,Amount:this.formatPipe.localeString(i.price*i.quantity),"State of report":g})}}catch(m){c.e(m)}finally{c.f()}this._excelService.exportAsExcelFile(a,"Preparation-"+d(new Date).format("YYYY-MM-DD")),this._notifyService.showSuccess("en"==this.user.lang?y.a.MSG_EXPORT_EN+" "+t.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+t.length+" "+y.a.record,"OK")}},{key:"_exportAll1",value:function(){var t=this,n={};n.filter=this._keyword,n.domain=this.user.short_code,this._dataService.post("/lab/exportgetlistlabspre",n).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value,o="";4==r.status&&(o="en"==t.user.lang?y.a.s_done_en:y.a.s_done),3==r.status&&(o="en"==t.user.lang?y.a.s_validate_en:y.a.s_validate),2==r.status&&(o="en"==t.user.lang?y.a.s_techvalidate_en:y.a.s_techvalidate),1==r.status&&(o="en"==t.user.lang?y.a.s_prepare_en:y.a.s_prepare),0==r.status&&(o="en"==t.user.lang?y.a.s_none_en:y.a.s_none);var l=new Date(r.received_date).getTime()+864e5*r.tat,s="en"==t.user.lang?r.csp_name_e:r.csp_name_l,u=r.company_name_l+(null==r.phone?"":"/Phone: "+r.phone),h="";null!=r.receiver_company&&(h=r.receiver_company.company_name_l+(null==r.receiver_company.address_l?"":"/Address: "+r.receiver_company.address_l));var g="";null!=r.biller_company&&(g=r.biller_company.company_name_l+(null==r.biller_company.tax_code?"":"/Tax code: "+r.biller_company.tax_code)+(null==r.biller_company.address_l?"":"/Address: "+r.biller_company.address_l),null!=r.biller_contact&&(g+=(null==r.biller_contact.email?"":"/Email: "+r.biller_contact.email)+(null==r.biller_contact.phone?"":"/Phone: "+r.biller_contact.phone)));var m="Unknown";0==r.state_of_report&&(m="Draft"),1==r.state_of_report&&(m="Official"),2==r.state_of_report&&(m="Evicted"),3==r.state_of_report&&(m="Printed"),4==r.state_of_report&&(m="Cancel"),c.push({"Request No":r.request_no,"Inner code":r.inner_code,Code:r.code,"Internal test":r.specification_name_l,Parameter:r.para_name_l,"Sample matrix":r.category_name_l,"Priority TAT":r.tat,Note:null==r.note?"":r.note,"Note to Lab":null==r.note_lab?"":r.note_lab,Status:o,"Received Date":d(new Date(r.received_date)).format("DD/MM/YYYY"),"Returned Date":d(new Date(l)).format("DD/MM/YYYY"),Department:"en"==t.user.lang?r.dept_name_e:r.dept_name_l,CSP:null==s?"":s,"Sample name":r.sample_name,Sender:u,Receiver:h,Biller:g,"Customer code":r.company_code,BD:r.employee_nr,Amount:t.formatPipe.localeString(r.price*r.quantity),"State of report":m})}}catch(_){i.e(_)}finally{i.f()}t._excelService.exportAsExcelFile(c,"Preparation-"+d(new Date).format("YYYY-MM-DD")),t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_EXPORT_EN+" "+c.length+" "+y.a.record_en:y.a.MSG_EXPORT+" "+c.length+" "+y.a.record,"OK")})}},{key:"orgValueChange1",value:function(e){null==e?(this._dt1="",this._fDate=null):e<=this._tDate?(this._dt1=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt1=d(e).format("YYYY-MM-DD")}},{key:"orgValueChange2",value:function(e){null==e?(this._dt2="",this._tDate=null):this._fDate<=e?(this._dt2=d(e).format("YYYY-MM-DD"),"Invalid date"!=this._dt1&&"Invalid date"!=this._dt2&&this.loadData()):this._dt2=d(e).format("YYYY-MM-DD")}},{key:"_updateStatus",value:function(e,t){var n=this;console.log(e),1==t?(e.status=t,v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_switch_en:y.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value?n._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData()}):n.loadData()})):(console.log(e),this._dataService.post("/lab/updateResult",e).subscribe(function(e){n.loadData()}))}},{key:"_switchFlagEdit",value:function(){var t,n=e(this._preparationlist);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.flag=!a.flag}}catch(c){n.e(c)}finally{n.f()}}},{key:"_updateStatusItem",value:function(e,t){e.status=0==e.status?1:0,this._preparationlist.filter(function(t){return t.sample_id==e.sample_id&&t.parameter_id==e.parameter_id&&t.category_id==e.category_id})[0].status=e.status}},{key:"_updateStatusv2",value:function(e){var t=this;v.a.fire({title:"en"==this.user.lang?y.a.are_u_sure_switch_en:y.a.are_u_sure_switch,text:e.code,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(n){n.value&&t._dataService.post("/lab/updateResultPreparationv2",{getlist:e,ipaddress:t.user.ipaddress,user_id:t.user.id,short_code:t.user.short_code}).subscribe(function(e){t.loadData()})})}},{key:"saveChange",value:function(){var e=this;this.isSave=!0;var t={};t.id=this.entity.id,t.is_active=this.entity.is_active,t.ipaddress=this.user.ipaddress,t.user_id=this.user.id,t.short_code=this.user.short_code,this._dataService.post("/lab/updateStatus",t).subscribe(function(t){e.isSave=!1,e.loadData(),e._notifyService.showSuccess("en"==e.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==e.user.lang?y.a.error_title_en:y.a.error_title)})}}]),t}()).\u0275fac=function(e){return new(e||yc)(x.bc(S.a),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(et.a),x.bc(C.s))},yc.\u0275cmp=x.Vb({type:yc,selectors:[["app-req-preparelab"]],hostBindings:function(e,t){1&e&&x.rc("click",function(e){return t.ngOnInit(e)},!1,x.Sc)},decls:125,vars:124,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_fdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["type","text","placeholder","DD/MM/YYYY","bsDatepicker","","name","_tdate","autocomplete","off",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","bsConfig","ngModelChange","bsValueChange","keypress"],["id","dept","name","dept",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","testcsp_id","name","testcsp_id",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["id","_status","name","_status",1,"form-control","form-control-sm","mr-sm-1",3,"ngModel","ngModelChange","change"],["value","9"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],[2,"width","20px"],[2,"width","130px"],["scope","col"],[4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","13",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],[3,"ngClass","disabled","title","click",4,"ngIf"],["class","btn btn-sm btn-primary mr-sm-1",3,"title","click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[3,"ngClass","disabled","title","click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-close",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"title","click"],[1,"fa","fa-save"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.hc(10,"input",8),x.rc("ngModelChange",function(e){return t._fDate=e})("bsValueChange",function(e){return t.orgValueChange1(e)})("keypress",function(e){return t.orgValueChange1(e)}),x.gc(),x.hc(11,"input",9),x.rc("ngModelChange",function(e){return t._tDate=e})("bsValueChange",function(e){return t.orgValueChange2(e)})("keypress",function(e){return t.orgValueChange2(e)}),x.gc(),x.hc(12,"select",10),x.rc("ngModelChange",function(e){return t.department_id=e})("change",function(){return t.loadData()}),x.hc(13,"option",11),x.dd(14),x.wc(15,"translate"),x.wc(16,"translate"),x.gc(),x.bd(17,tc,2,2,"option",12),x.gc(),x.hc(18,"select",13),x.rc("ngModelChange",function(e){return t.testcsp_id=e})("change",function(){return t.loadData()}),x.hc(19,"option",11),x.dd(20),x.wc(21,"translate"),x.gc(),x.bd(22,nc,2,2,"option",12),x.gc(),x.hc(23,"select",14),x.rc("ngModelChange",function(e){return t._status=e})("change",function(){return t.loadData()}),x.hc(24,"option",15),x.dd(25),x.wc(26,"translate"),x.gc(),x.hc(27,"option",16),x.dd(28),x.wc(29,"translate"),x.gc(),x.hc(30,"option",17),x.dd(31),x.wc(32,"translate"),x.gc(),x.hc(33,"option",18),x.dd(34),x.wc(35,"translate"),x.gc(),x.hc(36,"option",19),x.dd(37),x.wc(38,"translate"),x.gc(),x.hc(39,"option",20),x.dd(40),x.wc(41,"translate"),x.gc(),x.gc(),x.bd(42,ac,4,3,"button",21),x.bd(43,cc,5,6,"button",22),x.bd(44,ic,1,0,"img",23),x.gc(),x.gc(),x.hc(45,"div",24),x.hc(46,"div",25),x.hc(47,"select",26),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(48,"option",27),x.dd(49,"#10"),x.gc(),x.hc(50,"option",28),x.dd(51,"#25"),x.gc(),x.hc(52,"option",29),x.dd(53,"#50"),x.gc(),x.hc(54,"option",30),x.dd(55,"#100"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(56,"div",31),x.hc(57,"div",32),x.hc(58,"div",33),x.hc(59,"div",34),x.hc(60,"pagination",35),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(61,"div",36),x.hc(62,"a",37),x.dd(63),x.wc(64,"translate"),x.wc(65,"translate"),x.wc(66,"translate"),x.wc(67,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(68,"div",32),x.hc(69,"div",38),x.hc(70,"table",39),x.hc(71,"thead",40),x.hc(72,"tr"),x.hc(73,"th",41),x.dd(74,"#"),x.gc(),x.hc(75,"th",42),x.dd(76),x.wc(77,"translate"),x.gc(),x.hc(78,"th",43),x.dd(79),x.wc(80,"translate"),x.gc(),x.hc(81,"th",43),x.dd(82),x.wc(83,"translate"),x.gc(),x.hc(84,"th",43),x.dd(85),x.wc(86,"translate"),x.gc(),x.hc(87,"th",43),x.dd(88),x.wc(89,"translate"),x.gc(),x.hc(90,"th",43),x.dd(91),x.wc(92,"translate"),x.gc(),x.hc(93,"th",43),x.dd(94),x.wc(95,"translate"),x.gc(),x.hc(96,"th",43),x.dd(97),x.wc(98,"translate"),x.gc(),x.hc(99,"th",43),x.dd(100),x.wc(101,"translate"),x.gc(),x.hc(102,"th",43),x.dd(103),x.wc(104,"translate"),x.gc(),x.hc(105,"th",43),x.dd(106),x.wc(107,"translate"),x.gc(),x.hc(108,"th",43),x.dd(109),x.wc(110,"translate"),x.gc(),x.gc(),x.gc(),x.hc(111,"tbody"),x.bd(112,rc,6,3,"ng-container",44),x.bd(113,vc,2,1,"ng-container",44),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(114,"div",32),x.hc(115,"div",33),x.hc(116,"div",34),x.hc(117,"pagination",35),x.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),x.gc(),x.gc(),x.hc(118,"div",36),x.hc(119,"a",37),x.dd(120),x.wc(121,"translate"),x.wc(122,"translate"),x.wc(123,"translate"),x.wc(124,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,62,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngModel",t._fDate)("bsConfig",x.Hc(122,xc)),x.Nb(1),x.Dc("ngModel",t._tDate)("bsConfig",x.Hc(123,xc)),x.Nb(1),x.Dc("ngModel",t.department_id),x.Nb(2),x.gd(" ",x.xc(15,64,"All")," ",x.xc(16,66,"Department")," "),x.Nb(3),x.Dc("ngForOf",t._deptlist),x.Nb(1),x.Dc("ngModel",t.testcsp_id),x.Nb(2),x.fd("",x.xc(21,68,"All")," CSP"),x.Nb(2),x.Dc("ngForOf",t._csplist),x.Nb(1),x.Dc("ngModel",t._status),x.Nb(2),x.fd(" ",x.xc(26,70,"All")," "),x.Nb(3),x.fd(" ",x.xc(29,72,"None")," "),x.Nb(3),x.fd(" ",x.xc(32,74,"Preparation")," "),x.Nb(3),x.fd(" ",x.xc(35,76,"Technical validation")," "),x.Nb(3),x.fd(" ",x.xc(38,78,"Validation")," "),x.Nb(3),x.fd(" ",x.xc(41,80,"Done")," "),x.Nb(2),x.Dc("ngIf",t._authenService.hasPermission("REQ-PRE","report")),x.Nb(1),x.Dc("ngIf",t._authenService.hasPermission("REQ-PRE","report")),x.Nb(1),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(13),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(64,82,"Total of records"),": ",t.totalRow," - ",x.xc(65,84,"Page")," ",t.pageIndex," ",x.xc(66,86,"of")," ",t.totalPage," ",x.xc(67,88,"page"),""),x.Nb(13),x.ed(x.xc(77,90,"Actions")),x.Nb(3),x.fd(" ",x.xc(80,92,"Order code")," "),x.Nb(3),x.fd(" ",x.xc(83,94,"Inner code")," "),x.Nb(3),x.fd(" ",x.xc(86,96,"Code")," "),x.Nb(3),x.ed(x.xc(89,98,"Internal testing")),x.Nb(3),x.ed(x.xc(92,100,"Parameter name")),x.Nb(3),x.ed(x.xc(95,102,"Sample matrix")),x.Nb(3),x.ed(x.xc(98,104,"Sample nature")),x.Nb(3),x.ed(x.xc(101,106,"Priority")),x.Nb(3),x.ed(x.xc(104,108,"Note")),x.Nb(3),x.ed(x.xc(107,110,"Note lab")),x.Nb(3),x.ed(x.xc(110,112,"Status")),x.Nb(3),x.Dc("ngIf",0==t._preparationlist.length),x.Nb(1),x.Dc("ngIf",t._preparationlist.length>0),x.Nb(4),x.Dc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),x.Nb(3),x.id("",x.xc(121,114,"Total of records"),": ",t.totalRow," - ",x.xc(122,116,"Page")," ",t.pageIndex," ",x.xc(123,118,"of")," ",t.totalPage," ",x.xc(124,120,"page"),""))},directives:[o.c,o.n,o.q,k.b,k.a,o.x,o.r,o.A,r.p,r.q,T.a,r.o],pipes:[P.c],styles:[""]}),yc),wc=["tagInput"];function Nc(e,t){if(1&e){var n=x.ic();x.hc(0,"button",37),x.rc("click",function(){x.Uc(n);var e=x.vc(),t=x.Rc(88);return e._openModal(t,null)}),x.dd(1),x.wc(2,"translate"),x.gc()}2&e&&(x.Nb(1),x.fd(" ",x.xc(2,1,"Add new request")," "))}function Dc(e,t){if(1&e){var n=x.ic();x.hc(0,"button",38),x.rc("click",function(){x.Uc(n);var e=x.vc();return e._exportAll(e.exportList)}),x.cc(1,"i",39),x.dd(2),x.wc(3,"translate"),x.gc()}2&e&&(x.Nb(2),x.fd(" ",x.xc(3,1,"Export")," "))}function Mc(e,t){1&e&&x.cc(0,"img",40)}function Cc(e,t){if(1&e){var n=x.ic();x.hc(0,"div",41),x.hc(1,"div",42),x.hc(2,"pagination",43),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().pageIndex=e})("pageChanged",function(e){return x.Uc(n),x.vc().pageChanged(e)}),x.gc(),x.gc(),x.hc(3,"div",44),x.hc(4,"a",45),x.dd(5),x.wc(6,"translate"),x.wc(7,"translate"),x.wc(8,"translate"),x.wc(9,"translate"),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(2),x.Dc("boundaryLinks",!0)("totalItems",a.totalRow)("ngModel",a.pageIndex)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSize),x.Nb(3),x.id("",x.xc(6,12,"Total of records"),": ",a.totalRow," - ",x.xc(7,14,"Page")," ",a.pageIndex," ",x.xc(8,16,"of")," ",a.totalPage," ",x.xc(9,18,"page"),"")}}function kc(e,t){1&e&&(x.fc(0),x.hc(1,"tr"),x.hc(2,"td",46),x.hc(3,"h4"),x.dd(4),x.wc(5,"translate"),x.gc(),x.gc(),x.gc(),x.ec()),2&e&&(x.Nb(4),x.ed(x.xc(5,1,"No records now!!!")))}function Tc(e,t){1&e&&(x.hc(0,"span"),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cash")))}function Ic(e,t){1&e&&(x.hc(0,"span"),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Transfer bank")))}function Pc(e,t){1&e&&(x.hc(0,"span"),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Visa/Master")))}function Rc(e,t){1&e&&(x.hc(0,"span"),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cheque")))}function Ac(e,t){1&e&&(x.hc(0,"span",59),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Unpaid")))}function Ec(e,t){1&e&&(x.hc(0,"span",60),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Delivery-Unpaid")))}function Uc(e,t){1&e&&(x.hc(0,"span",61),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Delivery-Paid")))}function Fc(e,t){1&e&&(x.hc(0,"span",62),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cancel-Unpaid")))}function Oc(e,t){1&e&&(x.hc(0,"span",63),x.dd(1),x.wc(2,"translate"),x.gc()),2&e&&(x.Nb(1),x.ed(x.xc(2,1,"Cancel-Refund")))}function Yc(e,t){if(1&e&&(x.hc(0,"span",69),x.dd(1),x.gc()),2&e){var n=t.$implicit;x.Nb(1),x.ed(n)}}function Lc(e,t){if(1&e&&(x.hc(0,"tr"),x.hc(1,"td",66),x.dd(2),x.gc(),x.hc(3,"td",66),x.dd(4),x.gc(),x.hc(5,"td",66),x.dd(6),x.gc(),x.hc(7,"td",66),x.dd(8),x.gc(),x.hc(9,"td",66),x.dd(10),x.gc(),x.hc(11,"td",66),x.bd(12,Yc,2,1,"span",67),x.gc(),x.hc(13,"td",66),x.dd(14),x.gc(),x.hc(15,"td",68),x.dd(16),x.wc(17,"number"),x.gc(),x.hc(18,"td",68),x.dd(19),x.wc(20,"number"),x.gc(),x.gc()),2&e){var n=t.$implicit,a=t.index,c=x.vc(4);x.Nb(2),x.ed(a+1),x.Nb(2),x.fd(" ","en"==c.user.lang?n.fabric_name_e:n.fabric_name_l," "),x.Nb(2),x.fd(" ",n.color_name_l," "),x.Nb(2),x.ed(n.code),x.Nb(2),x.fd(" ",n.quantity_info," "),x.Nb(2),x.Dc("ngForOf",n.tags),x.Nb(2),x.fd(" ",n.total," "),x.Nb(2),x.fd(" ",x.xc(17,9,n.price)," "),x.Nb(3),x.fd(" ",x.xc(20,11,n.amount)," ")}}function qc(e,t){if(1&e&&(x.hc(0,"tr"),x.hc(1,"td",64),x.hc(2,"strong"),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"div",28),x.hc(6,"table",65),x.hc(7,"thead"),x.hc(8,"th",66),x.dd(9,"#"),x.gc(),x.hc(10,"th",66),x.dd(11),x.wc(12,"translate"),x.gc(),x.hc(13,"th",66),x.dd(14),x.wc(15,"translate"),x.gc(),x.hc(16,"th",66),x.dd(17),x.wc(18,"translate"),x.gc(),x.hc(19,"th",66),x.dd(20),x.wc(21,"translate"),x.gc(),x.hc(22,"th",66),x.dd(23),x.wc(24,"translate"),x.gc(),x.hc(25,"th",66),x.dd(26),x.wc(27,"translate"),x.gc(),x.hc(28,"th",66),x.dd(29),x.wc(30,"translate"),x.gc(),x.hc(31,"th",66),x.dd(32),x.wc(33,"translate"),x.gc(),x.gc(),x.hc(34,"tbody"),x.bd(35,Lc,21,13,"tr",47),x.gc(),x.gc(),x.gc(),x.gc(),x.gc()),2&e){var n=x.vc().$implicit;x.Nb(3),x.ed(x.xc(4,10,"Items Information")),x.Nb(8),x.fd(" ",x.xc(12,12,"Type of fabric")," "),x.Nb(3),x.fd(" ",x.xc(15,14,"Color name")," "),x.Nb(3),x.fd(" ",x.xc(18,16,"Mix-Fabric code")," "),x.Nb(3),x.fd(" ",x.xc(21,18,"Quantity")," "),x.Nb(3),x.fd(" ",x.xc(24,20,"Description")," "),x.Nb(3),x.fd(" ",x.xc(27,22,"Total")," (kg) "),x.Nb(3),x.fd(" ",x.xc(30,24,"Price")," "),x.Nb(3),x.fd(" ",x.xc(33,26,"Amount")," "),x.Nb(3),x.Dc("ngForOf",n.orders)}}function zc(e,t){if(1&e){var n=x.ic();x.fc(0),x.hc(1,"tr"),x.hc(2,"td"),x.dd(3),x.gc(),x.hc(4,"td"),x.hc(5,"input",48),x.rc("change",function(e){x.Uc(n);var a=t.$implicit;return x.vc(2).selectItem(e,a.id)}),x.gc(),x.gc(),x.hc(6,"td"),x.dd(7),x.wc(8,"date"),x.gc(),x.hc(9,"td",49),x.rc("click",function(){var e=t.$implicit;return e.expanded=!e.expanded}),x.dd(10),x.gc(),x.hc(11,"td"),x.dd(12),x.gc(),x.hc(13,"td"),x.dd(14),x.gc(),x.hc(15,"td"),x.dd(16),x.wc(17,"number"),x.gc(),x.hc(18,"td"),x.bd(19,Tc,3,3,"span",35),x.bd(20,Ic,3,3,"span",35),x.bd(21,Pc,3,3,"span",35),x.bd(22,Rc,3,3,"span",35),x.gc(),x.hc(23,"td"),x.bd(24,Ac,3,3,"span",50),x.bd(25,Ec,3,3,"span",51),x.bd(26,Uc,3,3,"span",52),x.bd(27,Fc,3,3,"span",53),x.bd(28,Oc,3,3,"span",54),x.gc(),x.hc(29,"td"),x.dd(30),x.gc(),x.hc(31,"td"),x.hc(32,"button",55),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc(2),c=x.Rc(88);return a._openModal(c,e)}),x.wc(33,"translate"),x.cc(34,"i",56),x.gc(),x.hc(35,"button",57),x.rc("click",function(){x.Uc(n);var e=t.$implicit;return x.vc(2).printQuotationAsPDF(e)}),x.wc(36,"translate"),x.cc(37,"i",58),x.gc(),x.gc(),x.gc(),x.bd(38,qc,36,28,"tr",35),x.ec()}if(2&e){var a=t.$implicit,c=t.index,i=x.vc(2);x.Nb(3),x.ed(c+1+i.pageSize*(i.pageIndex-1)),x.Nb(2),x.Fc("name","ckU1",c+1,""),x.Dc("checked",i.exportList.includes(a.id)),x.Nb(2),x.ed(x.yc(8,21,a.issue_date,"dd/MM/yyyy HH:mm")),x.Nb(3),x.fd(" ",a.code," "),x.Nb(2),x.fd(" ","en"==i.user.lang?a.company_name_e:a.company_name_l," "),x.Nb(2),x.ed(a.phone),x.Nb(2),x.ed(x.xc(17,24,a.total)),x.Nb(3),x.Dc("ngIf",0==a.payment),x.Nb(1),x.Dc("ngIf",1==a.payment),x.Nb(1),x.Dc("ngIf",2==a.payment),x.Nb(1),x.Dc("ngIf",3==a.payment),x.Nb(2),x.Dc("ngIf",0==a.is_active),x.Nb(1),x.Dc("ngIf",1==a.is_active),x.Nb(1),x.Dc("ngIf",2==a.is_active),x.Nb(1),x.Dc("ngIf",3==a.is_active),x.Nb(1),x.Dc("ngIf",4==a.is_active),x.Nb(2),x.ed(a.username),x.Nb(2),x.Dc("ngbTooltip",x.xc(33,26,"Edit")),x.Nb(3),x.Dc("ngbTooltip",x.xc(36,28,"Print")),x.Nb(3),x.Dc("ngIf",a.expanded)}}function Gc(e,t){if(1&e&&(x.fc(0),x.bd(1,zc,39,30,"ng-container",47),x.ec()),2&e){var n=x.vc();x.Nb(1),x.Dc("ngForOf",n._categories)}}function Vc(e,t){if(1&e){var n=x.ic();x.hc(0,"div",41),x.hc(1,"div",42),x.hc(2,"pagination",43),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().pageIndex=e})("pageChanged",function(e){return x.Uc(n),x.vc().pageChanged(e)}),x.gc(),x.gc(),x.hc(3,"div",44),x.hc(4,"a",45),x.dd(5),x.wc(6,"translate"),x.wc(7,"translate"),x.wc(8,"translate"),x.wc(9,"translate"),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(2),x.Dc("boundaryLinks",!0)("totalItems",a.totalRow)("ngModel",a.pageIndex)("maxSize",a.pageDisplay)("itemsPerPage",a.pageSize),x.Nb(3),x.id("",x.xc(6,12,"Total of records"),": ",a.totalRow," - ",x.xc(7,14,"Page")," ",a.pageIndex," ",x.xc(8,16,"of")," ",a.totalPage," ",x.xc(9,18,"page"),"")}}function Bc(e,t){if(1&e){var n=x.ic();x.hc(0,"ng-select",100),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).entity.customer_id=e})("change",function(){x.Uc(n);var e=x.vc(2);return e.loadLabel(e.entity.customer_id)}),x.wc(1,"translate"),x.wc(2,"translate"),x.gc()}if(2&e){var a=x.vc(2);x.Dc("items",a._customers)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("bindLabel","en"==a.user.lang?"company_name_e":"company_name_l")("ngModel",a.entity.customer_id)("placeholder",x.xc(1,8,"Please choose"))("notFoundText",x.xc(2,10,"Not found item"))}}var Qc=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm",containerClass:"theme-dark-blue"}};function Hc(e,t){if(1&e){var n=x.ic();x.hc(0,"input",101),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2)._fdate=e})("bsValueChange",function(e){return x.Uc(n),x.vc(2).orgValueChange(e)}),x.wc(1,"translate"),x.gc()}if(2&e){var a=x.vc(2);x.Dc("placeholder",x.xc(1,3,"Issue of date"))("ngModel",a._fdate)("bsConfig",x.Hc(5,Qc))}}function $c(e,t){if(1&e){var n=x.ic();x.hc(0,"input",102),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2)._dt1=e}),x.gc()}if(2&e){var a=x.vc(2);x.Dc("ngModel",a._dt1)}}function Kc(e,t){if(1&e){var n=x.ic();x.hc(0,"div",77),x.hc(1,"div",84),x.hc(2,"label",103),x.dd(3),x.wc(4,"translate"),x.gc(),x.hc(5,"select",104),x.rc("change",function(){x.Uc(n);var e=x.vc(2);return 2!=e.entity.is_active?null:e._confirmFinalOrder()})("ngModelChange",function(e){return x.Uc(n),x.vc(2).entity.is_active=e}),x.hc(6,"option",20),x.dd(7),x.wc(8,"translate"),x.gc(),x.hc(9,"option",21),x.dd(10),x.wc(11,"translate"),x.gc(),x.hc(12,"option",22),x.dd(13),x.wc(14,"translate"),x.gc(),x.hc(15,"option",23),x.dd(16),x.wc(17,"translate"),x.gc(),x.hc(18,"option",24),x.dd(19),x.wc(20,"translate"),x.gc(),x.gc(),x.gc(),x.gc()}if(2&e){var a=x.vc(2);x.Nb(3),x.ed(x.xc(4,8,"Status")),x.Nb(2),x.Dc("disabled",2==a.entity.is_active)("ngModel",a.entity.is_active),x.Nb(2),x.ed(x.xc(8,10,"Unpaid")),x.Nb(3),x.ed(x.xc(11,12,"Delivery-Unpaid")),x.Nb(3),x.ed(x.xc(14,14,"Delivery-Paid")),x.Nb(3),x.ed(x.xc(17,16,"Cancel-Unpaid")),x.Nb(3),x.ed(x.xc(20,18,"Cancel-Refund"))}}function jc(e,t){if(1&e){var n=x.ic();x.hc(0,"div",79),x.hc(1,"label",105),x.dd(2),x.wc(3,"translate"),x.gc(),x.hc(4,"ng-select",106),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc(2).selectId=e})("change",function(){x.Uc(n);var e=x.vc(2);return e.addItem(e.selectId)}),x.wc(5,"translate"),x.wc(6,"translate"),x.gc(),x.gc()}if(2&e){var a=x.vc(2);x.Nb(2),x.ed(x.xc(3,8,"Items")),x.Nb(2),x.Dc("items",a._fabrics)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",a.selectId)("placeholder",x.xc(5,10,"Please choose"))("notFoundText",x.xc(6,12,"Not found item"))}}function Xc(e,t){1&e&&(x.hc(0,"th",66),x.cc(1,"i",107),x.gc())}function Wc(e,t){if(1&e){var n=x.ic();x.hc(0,"td",66),x.hc(1,"a",114),x.rc("click",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2).removeItem(e.mixfabric_id)}),x.cc(2,"i",107),x.gc(),x.gc()}}function Jc(e,t){if(1&e){var n=x.ic();x.hc(0,"input",115),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.quantity_info=e})("change",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2).updateItem(e)}),x.gc()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Fc("id","ck",c+1,""),x.Fc("name","ck",c+1,""),x.Dc("ngModel",i.quantity_info)}}function Zc(e,t){if(1&e&&(x.hc(0,"span"),x.dd(1),x.gc()),2&e){var n=x.vc().$implicit;x.Nb(1),x.ed(n.quantity_info)}}function ei(e,t){if(1&e){var n=x.ic();x.hc(0,"input",116),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.tag=e})("keyup.enter",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._addTag(e)})("change",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2)._addTag(e)}),x.gc()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Fc("id","tag",c+1,""),x.Fc("name","tag",c+1,""),x.Dc("ngModel",i.tag)}}function ti(e,t){if(1&e){var n=x.ic();x.hc(0,"span",117),x.rc("click",function(){x.Uc(n);var e=t.$implicit,a=x.vc().$implicit,c=x.vc(2);return 0==c.entity.is_active?c._removeTag(a,e):null}),x.dd(1),x.gc()}if(2&e){var a=t.$implicit;x.Nb(1),x.ed(a)}}function ni(e,t){if(1&e){var n=x.ic();x.hc(0,"input",118),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().$implicit.price=e})("change",function(){x.Uc(n);var e=x.vc().$implicit;return x.vc(2).updateItem(e)}),x.gc()}if(2&e){var a=x.vc(),c=a.index,i=a.$implicit;x.Fc("id","p",c+1,""),x.Fc("name","p",c+1,""),x.Dc("ngModel",i.price)}}function ai(e,t){if(1&e&&(x.hc(0,"span"),x.dd(1),x.wc(2,"number"),x.gc()),2&e){var n=x.vc().$implicit;x.Nb(1),x.ed(x.xc(2,1,n.price))}}function ci(e,t){if(1&e&&(x.hc(0,"tr"),x.bd(1,Wc,3,0,"td",96),x.hc(2,"td",66),x.dd(3),x.gc(),x.hc(4,"td",66),x.dd(5),x.gc(),x.hc(6,"td",66),x.dd(7),x.gc(),x.hc(8,"td",66),x.dd(9),x.gc(),x.hc(10,"td",66),x.bd(11,Jc,1,3,"input",108),x.bd(12,Zc,2,1,"span",35),x.gc(),x.hc(13,"td",66),x.bd(14,ei,1,3,"input",109),x.dd(15," ("),x.hc(16,"span",82),x.dd(17),x.gc(),x.dd(18,") "),x.hc(19,"small",110),x.bd(20,ti,2,1,"span",111),x.gc(),x.gc(),x.hc(21,"td",112),x.dd(22),x.wc(23,"number"),x.gc(),x.hc(24,"td",68),x.bd(25,ni,1,3,"input",113),x.bd(26,ai,3,3,"span",35),x.gc(),x.hc(27,"td",68),x.dd(28),x.wc(29,"number"),x.gc(),x.gc()),2&e){var n=t.$implicit,a=t.index,c=x.vc(2);x.Nb(1),x.Dc("ngIf",0==c.entity.is_active),x.Nb(2),x.ed(a+1),x.Nb(2),x.fd(" ",n.fabric_name," "),x.Nb(2),x.ed(n.color_name_l),x.Nb(2),x.ed(n.code),x.Nb(2),x.Dc("ngIf",0==c.entity.is_active),x.Nb(1),x.Dc("ngIf",0!=c.entity.is_active),x.Nb(2),x.Dc("ngIf",0==c.entity.is_active),x.Nb(3),x.ed(n.count),x.Nb(3),x.Dc("ngForOf",n.tags),x.Nb(2),x.fd(" ",x.xc(23,14,n.total)," "),x.Nb(3),x.Dc("ngIf",0==c.entity.is_active),x.Nb(1),x.Dc("ngIf",0!=c.entity.is_active),x.Nb(2),x.fd(" ",x.xc(29,16,n.amount)," ")}}function ii(e,t){1&e&&(x.fc(0),x.hc(1,"a",119),x.cc(2,"img",120),x.dd(3),x.wc(4,"translate"),x.gc(),x.ec()),2&e&&(x.Nb(3),x.fd(" ",x.xc(4,1,"Processing")," "))}function ri(e,t){if(1&e){var n=x.ic();x.hc(0,"button",121),x.rc("click",function(){x.Uc(n);var e=x.vc(2);return e.printQuotationAsPDF(e.entity)}),x.wc(1,"translate"),x.cc(2,"i",58),x.dd(3),x.wc(4,"translate"),x.gc()}2&e&&(x.Dc("ngbTooltip",x.xc(1,2,"Print")),x.Nb(3),x.fd(" ",x.xc(4,4,"Print")," "))}function oi(e,t){if(1&e&&(x.hc(0,"button",122),x.dd(1),x.wc(2,"translate"),x.gc()),2&e){x.vc();var n=x.Rc(1);x.Dc("disabled",!n.valid),x.Nb(1),x.fd(" ",x.xc(2,2,"Save")," ")}}function li(e,t){if(1&e){var n=x.ic();x.hc(0,"form",70,71),x.rc("ngSubmit",function(){return x.Uc(n),x.vc().saveChange()}),x.hc(2,"div",72),x.hc(3,"h4",73),x.dd(4),x.wc(5,"translate"),x.wc(6,"translate"),x.wc(7,"translate"),x.gc(),x.hc(8,"button",74),x.rc("click",function(){return t.$implicit.dismiss("Cross click")}),x.hc(9,"span",75),x.dd(10,"\xd7"),x.gc(),x.gc(),x.gc(),x.hc(11,"div",76),x.hc(12,"div",1),x.hc(13,"div",77),x.hc(14,"div",78),x.hc(15,"div",79),x.hc(16,"label",80),x.hc(17,"strong"),x.dd(18),x.wc(19,"translate"),x.gc(),x.gc(),x.gc(),x.hc(20,"div",79),x.hc(21,"label",81),x.dd(22),x.wc(23,"translate"),x.hc(24,"span",82),x.dd(25,"(*)"),x.gc(),x.gc(),x.bd(26,Bc,3,12,"ng-select",83),x.gc(),x.hc(27,"div",77),x.hc(28,"div",84),x.hc(29,"label",85),x.dd(30),x.wc(31,"translate"),x.hc(32,"span",82),x.dd(33,"(*)"),x.gc(),x.gc(),x.bd(34,Hc,2,6,"input",86),x.bd(35,$c,1,1,"input",87),x.gc(),x.gc(),x.hc(36,"div",77),x.hc(37,"div",84),x.hc(38,"label",88),x.dd(39),x.wc(40,"translate"),x.gc(),x.hc(41,"select",89),x.rc("ngModelChange",function(e){return x.Uc(n),x.vc().entity.payment=e}),x.hc(42,"option",90),x.dd(43),x.wc(44,"translate"),x.gc(),x.hc(45,"option",20),x.dd(46),x.wc(47,"translate"),x.gc(),x.hc(48,"option",21),x.dd(49),x.wc(50,"translate"),x.gc(),x.hc(51,"option",22),x.dd(52),x.wc(53,"translate"),x.gc(),x.hc(54,"option",23),x.dd(55),x.wc(56,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(57,Kc,21,20,"div",91),x.hc(58,"div",79),x.hc(59,"div",84),x.hc(60,"label",92),x.dd(61),x.wc(62,"translate"),x.gc(),x.dd(63,"\xa0 "),x.hc(64,"span",93),x.hc(65,"strong"),x.dd(66),x.wc(67,"number"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(68,"div",77),x.hc(69,"div",78),x.hc(70,"div",79),x.hc(71,"label",80),x.hc(72,"strong"),x.dd(73),x.wc(74,"translate"),x.gc(),x.gc(),x.gc(),x.bd(75,jc,7,14,"div",94),x.hc(76,"div",95),x.hc(77,"div",28),x.hc(78,"table",65),x.hc(79,"thead"),x.bd(80,Xc,2,0,"th",96),x.hc(81,"th",66),x.dd(82,"#"),x.gc(),x.hc(83,"th",66),x.dd(84),x.wc(85,"translate"),x.gc(),x.hc(86,"th",66),x.dd(87),x.wc(88,"translate"),x.gc(),x.hc(89,"th",66),x.dd(90),x.wc(91,"translate"),x.gc(),x.hc(92,"th",66),x.dd(93),x.wc(94,"translate"),x.gc(),x.hc(95,"th",66),x.dd(96),x.wc(97,"translate"),x.gc(),x.hc(98,"th",66),x.dd(99),x.wc(100,"translate"),x.gc(),x.hc(101,"th",66),x.dd(102),x.wc(103,"translate"),x.gc(),x.hc(104,"th",66),x.dd(105),x.wc(106,"translate"),x.gc(),x.gc(),x.hc(107,"tbody"),x.bd(108,ci,30,18,"tr",47),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(109,"div",97),x.bd(110,ii,5,3,"ng-container",35),x.bd(111,ri,5,6,"button",98),x.bd(112,oi,3,4,"button",99),x.gc(),x.gc()}if(2&e){var a=x.vc();x.Nb(4),x.gd(" ","ADD"==a._flagModal?x.xc(5,34,"Add new"):x.xc(6,36,"Update")," #",x.xc(7,38,a.entity.code)," "),x.Nb(14),x.ed(x.xc(19,40,"General Information")),x.Nb(4),x.fd("",x.xc(23,42,"Customer")," "),x.Nb(4),x.Dc("ngIf",0==a.entity.is_active),x.Nb(4),x.fd("",x.xc(31,44,"Issue of date")," "),x.Nb(4),x.Dc("ngIf",0==a.entity.is_active),x.Nb(1),x.Dc("ngIf",0!=a.entity.is_active),x.Nb(4),x.ed(x.xc(40,46,"Payment method")),x.Nb(2),x.Dc("ngModel",a.entity.payment)("disabled",0!=a.entity.is_active),x.Nb(2),x.fd(" ",x.xc(44,48,"Please choose")," "),x.Nb(3),x.ed(x.xc(47,50,"Cash")),x.Nb(3),x.ed(x.xc(50,52,"Transfer bank")),x.Nb(3),x.ed(x.xc(53,54,"Visa/Mater")),x.Nb(3),x.ed(x.xc(56,56,"Cheque")),x.Nb(2),x.Dc("ngIf","ADD"!=a._flagModal),x.Nb(4),x.ed(x.xc(62,58,"Total")),x.Nb(5),x.fd("",x.xc(67,60,a.entity.total)," VND"),x.Nb(7),x.ed(x.xc(74,62,"Items Information")),x.Nb(2),x.Dc("ngIf",0==a.entity.is_active),x.Nb(5),x.Dc("ngIf",0==a.entity.is_active),x.Nb(4),x.fd(" ",x.xc(85,64,"Type of fabric")," "),x.Nb(3),x.fd(" ",x.xc(88,66,"Color name")," "),x.Nb(3),x.fd(" ",x.xc(91,68,"Mix-Fabric code")," "),x.Nb(3),x.ed(x.xc(94,70,"Quantity")),x.Nb(3),x.fd(" ",x.xc(97,72,"Description")," "),x.Nb(3),x.fd(" ",x.xc(100,74,"Total")," (kg) "),x.Nb(3),x.ed(x.xc(103,76,"Price")),x.Nb(3),x.ed(x.xc(106,78,"Amount")),x.Nb(3),x.Dc("ngForOf",a._orders),x.Nb(2),x.Dc("ngIf",a.isSave),x.Nb(1),x.Dc("ngIf",null!=a.entity.id),x.Nb(1),x.Dc("ngIf",!a.isSave&&2!=a.entity.is_active)}}_.a.vfs=f.a.pdfMake.vfs;var si,di,ui,hi=[{path:"",children:[{path:"list",component:ec,data:{title:"Request Management",breadcrumb:"Request Management"}},{path:"detail/:id",component:Xn,data:{title:"Request detail",breadcrumb:"Request detail"}},{path:"lab-preparation",component:Sc,data:{title:"Lab preparation",breadcrumb:"Lab preparation"}},{path:"lab-result",component:Et,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"lab-validation",component:rn,data:{title:"Lab validation",breadcrumb:"Lab validation"}},{path:"lab-report-validation",component:Ye,data:{title:"Lab Report Validation",breadcrumb:"Lab Report Validation"}},{path:"lab-report-validation/:id",component:Ye,data:{title:"Validation"}},{path:"lab-report",component:Je,data:{title:"Lab report",breadcrumb:"Lab report"}},{path:"lab-results/:id",component:he,data:{title:"Lab result",breadcrumb:"Lab result"}},{path:"orders-fabric",component:(si=function(){function t(e,a,c,i,r,o,l,s,d){n(this,t),this._authService=e,this.modalService=a,this._dataService=c,this._route=i,this._notifyService=r,this._uploadService=o,this._excelService=l,this.formatPipe=s,this._utilityServce=d,this.isSave=!1,this.isSaveSub=!1,this.isImport=!1,this._flagModal="ADD",this._flagSubModal="",this._title="",this._subTitle="",this.baseFolder=g.a.BASE_API+"/",this._categories=[],this.exportList=[],this.entity={},this.entitySub={},this.formData=new FormData,this.pageIndex=1,this.pageSize=10,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._customers=[],this._fdate=null,this._dt1=null,this._fabrics=[],this._fabricsCompare=[],this._orders=[],this.selectId=null,this.tags=["html","Angular"],this._numTags=0,!1!==e.checkAccess("FAB-ORDER")&&!1!==e.hasPermission("FAB-ORDER","read")||this._route.navigate(["/error/404"]),this.socket=h()(g.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",function(t){e.loadData(),e.loadCompany(),e.loadProducts()})}},{key:"loadData",value:function(){var t=this,n={};n.page=this.pageIndex,n.limit=this.pageSize,n.filter=this._keyword,this._dataService.post("/order/getall",n).subscribe(function(n){console.log("Test",n),t._categories=n.data;var a,c=e(t._categories);try{for(c.s();!(a=c.n()).done;){var i,r=a.value,o=[],l=e(r.orders);try{for(l.s();!(i=l.n()).done;){var s=i.value;o.push({amount:s.amount,code:s.code,color_id:s.color_id,color_name_e:s.color_name_e,color_name_l:s.color_name_l,description:s.description,is_active:s.is_active,mixfabric_id:s.mixfabric_id,name_e:s.name_e,name_l:s.name_l,order_id:s.order_id,price:s.price,provider_name_e:s.provider_name_e,provider_name_l:s.provider_name_l,quantity_info:s.quantity_info,total:s.total,type_id:s.type_id,tags:JSON.parse(s.description)})}}catch(d){l.e(d)}finally{l.f()}r.orders=o}}catch(d){c.e(d)}finally{c.f()}console.log(t._categories),t.totalRow=n.rowCount,t.totalPage=n.totalPages})}},{key:"loadProducts",value:function(){var t=this;this._dataService.post("/mix-fabric/getallnp",null).subscribe(function(n){var a,c=[],i=e(n.data);try{for(i.s();!(a=i.n()).done;){var r=a.value,o="Type: "+(0==r.type_id?"Neck":1==r.type_id?"Hand":"Fabric");"en"!=t.user.lang&&(o="Lo\u1ea1i: "+(0==r.type_id?"Bo c\u1ed5":1==r.type_id?"Bo tay":"V\u1ea3i")),c.push({id:r.id,name:r.code+"-"+o+("en"==t.user.lang?"-Quantity (segment/kg):":"-S\u1ed1 l\u01b0\u1ee3ng (c\xe2y/kg):")+r.total_segment_re+"/"+r.total_kg_re})}}catch(l){i.e(l)}finally{i.f()}t._fabrics=c,t._fabricsCompare=n.data})}},{key:"loadCompany",value:function(){var e=this,t={};t.short_code=this.user.short_code,this._dataService.post("/company/getalllinksnopaging",t).subscribe(function(t){e._customers=t.data})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._categories.forEach(function(e){return t.exportList.push(e.id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!==t})}},{key:"loadLabel",value:function(e){var t=this._customers.filter(function(t){return t.id==e});this._flagSubModal=null==e?"":t[0].code_link}},{key:"_openModal",value:function(t,n){if(this.loadCompany(),this.loadProducts(),null==n)this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.code=null,this.entity.payment=null,this.entity.total=0,this._orders=[],this._fdate=null,this._dt1=null,this.entity.is_active=0,this._flagSubModal="";else{this._flagModal="UPDATE",this._flagSubModal="en"==this.user.lang?n.company_name_e:n.company_name_l,this.entity=n,this._fdate=new Date(n.issue_date),this._dt1=d(new Date(n.issue_date)).format("DD-MM-YYYY HH:mm"),this._orders=n.orders,console.log("Order",this._orders);var a,c=e(this._orders);try{for(c.s();!(a=c.n()).done;){var i=a.value;i.fabric_name="en"==this.user.lang?i.name_e:i.name_l,i.tag=null,i.tags=null==i.description?[]:JSON.parse(i.description),i.total_count=Math.ceil(i.quantity_info);var r,o=0,l=e(i.tags);try{for(l.s();!(r=l.n()).done;)o+=r.value.split("-").length}catch(s){l.e(s)}finally{l.f()}i.count=o}}catch(s){c.e(s)}finally{c.f()}}this.modalService.open(t,{size:"xl",centered:!0})}},{key:"saveChange",value:function(){var t=this,n={};(n=this.entity).orders=this._orders,n.issue_date=this._dt1,n.created_by=this.user.id,n.ipaddress=this.user.ipaddress,n.short_code=this.user.short_code;var a,c=!1,i=e(this._orders);try{for(i.s();!(a=i.n()).done;){var r=a.value;console.log("QT",r.total_count),r.total_count>r.count&&(c=!0)}}catch(o){i.e(o)}finally{i.f()}c?this._notifyService.showError("en"==this.user.lang?y.a.MSG_ERROR_ORDER_EN:y.a.MSG_ERROR_ORDER,"en"==this.user.lang?y.a.error_title_en:y.a.error_title):(console.log("save",n),"ADD"==this._flagModal?this._dataService.post("/order/add",n).subscribe(function(e){t.socket.emit("refresh",{}),"failed"!=e.result?(t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_ADD_EN:y.a.MSG_ADD,"OK"),t.modalService.dismissAll()):t._notifyService.showError("en"==t.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)}):this._dataService.post("/order/update",n).subscribe(function(e){console.log(e),t.socket.emit("refresh",{}),"failed"!=e.result?(t._notifyService.showSuccess("en"==t.user.lang?y.a.MSG_UPDATE_EN:y.a.MSG_UPDATE,"OK"),t.modalService.dismissAll()):t._notifyService.showError("en"==t.user.lang?y.a.MSG_ERROR_EN:y.a.MSG_ERROR,"en"==t.user.lang?y.a.error_title_en:y.a.error_title)}))}},{key:"orgValueChange",value:function(e){null!=e&&"Invalid date"!=e?(this._fdate=e,this._dt1=d(this._fdate).format("YYYY-MM-DD HH:mm")):(this._fdate=null,this._dt1=null)}},{key:"addItem",value:function(t){var n=this;if(null!=t){var a={};a.id=t,this._dataService.post("/mix-fabric/detail",a).subscribe(function(t){var a;a={mixfabric_id:t.data.id,color_name_l:t.data.color_name_l,color_name_e:t.data.color_name_e,code:t.data.code,fabric_name:"en"==n.user.lang?t.data.cat_name_e:t.data.cat_name_l,price:0,quantity_info:1,amount:0,is_active:!0,tag:null,tags:null==t.data.description||null==t.data.description?[]:JSON.parse(t.data.description),total:0,type_id:t.data.type_id,count:0,total_count:Math.ceil(1)},n._orders.length>0&&n._orders.filter(function(e){return e.mixfabric_id==t.data.id}).length>0?(n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].quantity_info+=1,0==t.data.type_id||1==t.data.type_id?n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].quantity_info>t.data.qty_kg_after&&(n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].quantity_info=t.data.qty_kg_after):n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].quantity_info>t.data.quantity_tree&&(n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].quantity_info=t.data.quantity_tree),n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].amount=n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].total*n._orders.filter(function(e){return e.mixfabric_id==t.data.id})[0].price):n._orders.push(a),n.selectId=null;var c,i=0,r=e(n._orders);try{for(r.s();!(c=r.n()).done;){var o=c.value;i+=parseInt(o.amount)}}catch(u){r.e(u)}finally{r.f()}n.entity.total=i;var l,s=e(n._orders);try{for(s.s();!(l=s.n()).done;){var d=l.value;d.total_count=Math.ceil(d.quantity_info)}}catch(u){s.e(u)}finally{s.f()}})}}},{key:"removeItem",value:function(t){var n=this._orders.findIndex(function(e){return e.mixfabric_id==t});n>-1&&this._orders.splice(n,1);var a,c=0,i=e(this._orders);try{for(i.s();!(a=i.n()).done;){var r=a.value;c+=parseInt(r.amount),r.total_count=Math.ceil(r.quantity_info)}}catch(o){i.e(o)}finally{i.f()}this.entity.total=c,this.socket.emit("refresh",{})}},{key:"updateItem",value:function(t){var n=this._fabricsCompare.filter(function(e){return e.id==t.mixfabric_id});0==n[0].type_id||1==n[0].type_id?parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info)>parseFloat(n[0].qty_kg_after)&&(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info=parseFloat(n[0].qty_kg_after)):parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info)>parseFloat(n[0].quantity_tree)&&(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].quantity_info=parseFloat(n[0].quantity_tree)),this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].amount=parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].total)*parseFloat(this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].price);var a,c=0,i=e(this._orders);try{for(i.s();!(a=i.n()).done;){var r=a.value;c+=parseFloat(r.amount),r.total_count=Math.ceil(r.quantity_info)}}catch(o){i.e(o)}finally{i.f()}this.entity.total=c,this.socket.emit("refresh",{})}},{key:"_confirmFinalOrder",value:function(){var e=this;v.a.fire({title:"en"==this.user.lang?y.a.are_you_sure_en:y.a.are_you_sure,text:"en"==this.user.lang?y.a.MSG_CONFIRM_ORDER_EN:y.a.MSG_CONFIRM_ORDER,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?y.a.cancel_en:y.a.cancel,confirmButtonText:"en"==this.user.lang?y.a.confirmtext_en:y.a.confirmtext}).then(function(t){t.value&&e.saveChange()})}},{key:"_addTag",value:function(t){console.log(t);var n=this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0];if(n.total_count<n.count+t.tag.split("-").length)console.log("Overload");else{if(0==n.tags.length){var a,c="",i=0,r=e(t.tag.split("-"));try{for(r.s();!(a=r.n()).done;){var o=a.value;this._utilityServce.isNumber(o)&&(c+=o+"-",i+=parseFloat(o))}}catch(w){r.e(w)}finally{r.f()}n.tags.push(c.substr(0,c.length-1)),n.total=i,n.amount=i*parseFloat(n.price)}else{n.tags.push(t.tag);var l,s=0,d=e(n.tags);try{for(d.s();!(l=d.n()).done;){var u,h=l.value,g="",m=e(h.split("-"));try{for(m.s();!(u=m.n()).done;){var _=u.value;this._utilityServce.isNumber(_)&&(g+=_+"-",s+=parseFloat(_))}}catch(w){m.e(w)}finally{m.f()}h=g.substr(0,g.length-1)}}catch(w){d.e(w)}finally{d.f()}n.total=s,n.amount=s*parseFloat(n.price)}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tag=null,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tags=n.tags;var p,f=0,b=e(n.tags);try{for(b.s();!(p=b.n()).done;)f+=p.value.split("-").length}catch(w){b.e(w)}finally{b.f()}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].count=f;var v,y=0,x=e(this._orders);try{for(x.s();!(v=x.n()).done;){var S=v.value;y+=parseFloat(S.amount)}}catch(w){x.e(w)}finally{x.f()}this.entity.total=y}}},{key:"_removeTag",value:function(t,n){var a=this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0];a.tags.findIndex(function(e){return e==n})>-1&&a.tags.splice(a.tags.findIndex(function(e){return e==n}),1),this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tag=null,this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].tags=a.tags;var c,i=0,r=e(a.tags);try{for(r.s();!(c=r.n()).done;){var o,l=c.value,s="",d=e(l.split("-"));try{for(d.s();!(o=d.n()).done;){var u=o.value;this._utilityServce.isNumber(u)&&(s+=u+"-",i+=parseFloat(u))}}catch(v){d.e(v)}finally{d.f()}l=s.substr(0,s.length-1)}}catch(v){r.e(v)}finally{r.f()}a.total=i,a.amount=i*parseFloat(a.price);var h,g=0,m=e(this._orders);try{for(m.s();!(h=m.n()).done;){var _=h.value;g+=parseFloat(_.amount)}}catch(v){m.e(v)}finally{m.f()}this.entity.total=g;var p,f=0,b=e(a.tags);try{for(b.s();!(p=b.n()).done;)f+=p.value.split("-").length}catch(v){b.e(v)}finally{b.f()}this._orders.filter(function(e){return e.mixfabric_id==t.mixfabric_id})[0].count=f}},{key:"printQuotationAsPDF",value:function(t){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,c,i,r,o,l,s,u,h,g,m,p,f,b,v,y;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=d(new Date).format("YYYYMMDD"),console.log("KQ In",t),(c=[]).push({text:"\n"}),c.push({alignment:"justify",columns:[{text:["T\xean kh\xe1ch h\xe0ng: ",{text:t.company_name_l,bold:!0},"\n","\u0110\u1ecba ch\u1ec9: ",{text:null==t.address_l?"":t.address_l,bold:!0},"\n","Ng\u01b0\u1eddi li\xean h\u1ec7: ",{text:null==t.contact_name?"":t.contact_name,bold:!0},"\n","\u0110i\u1ec7n tho\u1ea1i: ",{text:null==t.phone?"":t.phone,bold:!0},"\n","Email: ",{text:null==t.email?"":t.email,bold:!0}],style:"body_top"},{qr:t.code,foreground:"#20a8d8",fit:65,alignment:"right"}]}),c.push({text:"\n"}),c.push({text:"\n"}),c.push({table:{headerRows:1,widths:[25,"*",90,90,40,180,55,50,70],body:[[{border:[!0,!0,!0,!0],text:{text:"STT",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Lo\u1ea1i v\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe0u",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"M\xe3 m\u1ec5",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"S\u1ed1 c\xe2y",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Di\u1ec5n gi\u1ea3i",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"T\u1ed5ng (kg)",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"\u0110\u01a1n gi\xe1",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"},{border:[!0,!0,!0,!0],text:{text:"Th\xe0nh ti\u1ec1n",bold:!0},style:"body_footer",alignment:"center",color:"#FFFFFF",fillColor:"#444444"}]]},layout:{defaultBorder:!1}}),i=1,r=[],o=e(t.orders);try{for(o.s();!(l=o.n()).done;){s=l.value,u="",h=null==s.description?[]:JSON.parse(s.description),g=e(h);try{for(g.s();!(m=g.n()).done;){p=m.value,f=e(p.split("-"));try{for(f.s();!(b=f.n()).done;)v=b.value,u+=v+" - "}catch(x){f.e(x)}finally{f.f()}}}catch(x){g.e(x)}finally{g.f()}r.push({STT:i,LoaiVai:s.name_l,Mau:s.color_name_l,Code:s.code.toUpperCase(),SoCay:s.quantity_info,DienGiai:""==u?"":u.substr(0,u.length-3),Tong:s.total,Price:this.formatPipe.localeString(s.price),Amount:this.formatPipe.localeString(s.amount)}),i+=1}}catch(x){o.e(x)}finally{o.f()}c.push(this.tablePrintQuotation(r,["STT","LoaiVai","Mau","Code","SoCay","DienGiai","Tong","Price","Amount"],[25,"*",90,90,40,180,55,50,70],!0)),c.push({text:"\n"}),c.push({columns:[{width:"*",text:"Ch\u1eef k\xfd kh\xe1ch h\xe0ng",fontSize:10},{width:"200",text:"Ng\xe0y l\u1eadp "+d(new Date(t.issue_date)).format("DD/MM/YYYY HH:mm a"),alignment:"center",fontSize:10}]}),y={pageSize:"A4",pageMargins:[25,30,25,70],defaultStyle:{fontSize:12,columnGap:20},pageOrientation:"landscape",content:[{text:"TH\xd4NG TIN \u0110\u01a0N H\xc0NG",style:"title_top"},{text:"\n"},c],footer:function(e,t,n){return{table:{widths:[160,"*"],body:[[{border:[!1,!0,!1,!1],text:"",alignment:"left",style:"header_footer"},{border:[!1,!0,!1,!1],text:"",alignment:"right",style:"body_footer"}],[{width:160,text:"",alignment:"left"},{width:150,alignment:"right",text:"Trang "+e.toString()+"/"+t}]]},layout:{defaultBorder:!1}}},header:function(e,t,n){return{table:{widths:[160,"*"],body:[[{width:160,height:30,text:"C\u1eeda h\xe0ng v\u1ea3i VA",alignment:"left"},{width:150,height:30,alignment:"right",text:""}],[{width:160,border:[!1,!0,!1,!1],text:"",alignment:"left"},{width:150,border:[!1,!0,!1,!1],alignment:"right",text:""}]]},layout:{defaultBorder:!1}}},styles:{header:{fontSize:14,bold:!0},header_footer:{fontSize:12,bold:!0},title:{fontSize:10,bold:!0},body_footer:{fontSize:10},bigger:{fontSize:15,italics:!0},title_top:{fontSize:20,bold:!0,alignment:"center"},body_top:{fontSize:10,alignment:"left",margin:1}}},("'print-'"+a+".pdf").split(/\.(?=[^\.]+$)/)[0].replace(/[^a-z0-9]/gi,"").toLowerCase(),_.a.createPdf(y).open();case 11:case"end":return n.stop()}},n,this)}))}},{key:"tablePrintQuotation",value:function(e,t,n,a){return{table:{widths:n,body:this.buildTableBodyPrintQuotation(e,t,a)}}}},{key:"buildTableBodyPrintQuotation",value:function(e,t,n){var a=[],c=0;return e.forEach(function(e){var i=[],r=1;t.forEach(function(t){i.push({text:{text:e[t],noWrap:!1},alignment:2==r||3==r?"left":8==r||9==r?"right":"center",fontSize:10,italics:2==r&&n[c]}),r+=1,c+=1}),a.push(i)}),a}},{key:"_convertBase64ImageFromURL",value:function(e){return new Promise(function(t,n){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0);var n=e.toDataURL("image/png");t(n)},a.onerror=function(e){n(e)},a.src=e})}}]),t}(),si.\u0275fac=function(e){return new(e||si)(x.bc(S.a),x.bc(C.s),x.bc(w.a),x.bc(l.d),x.bc(N.a),x.bc(D.a),x.bc(M.a),x.bc(et.a),x.bc(on.a))},si.\u0275cmp=x.Vb({type:si,selectors:[["app-fab-orders"]],viewQuery:function(e,t){var n;1&e&&x.jd(wc,1),2&e&&x.Qc(n=x.sc())&&(t.tagInputRef=n.first)},decls:89,vars:60,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["class","btn btn-sm btn-info mr-sm-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["id","filter_status","name","filter_status",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],["class","form-inline",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"table-primary"],[2,"width","2px","text-align","center"],[2,"width","10px","text-align","center"],["type","checkbox","name","checkAll",3,"disabled","checked","change"],["scope","col"],[4,"ngIf"],["orderModal",""],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["src","../../../../assets/img/loading.gif","width","25px"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],["colspan","11",1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["type","checkbox",3,"name","checked","change"],[2,"cursor","pointer",3,"click"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-light",4,"ngIf"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],[1,"btn","btn-sm","btn-info","mr-sm-1",3,"ngbTooltip","click"],[1,"fa","fa-print"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"badge","badge-light"],["colspan","11",1,"text-truncate"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate"],["class","badge badge-primary","style","cursor: pointer",4,"ngFor","ngForOf"],[1,"text-truncate","text-right"],[1,"badge","badge-primary",2,"cursor","pointer"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-6"],[1,"form-group","row"],[1,"col-12"],[1,"text-primary"],["for","Company"],[1,"text-danger"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change",4,"ngIf"],[1,"form-group"],["for","issue_date"],["type","text","class","form-control","bsDatepicker","","name","_fdate","autocomplete","off","required","",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange",4,"ngIf"],["type","text","class","form-control","style","background-color: rgb(235, 235, 235)","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],["for","payment"],["name","payment",1,"form-control",3,"ngModel","disabled","ngModelChange"],["value","null"],["class","col-6",4,"ngIf"],["for","total"],[1,"title","text-danger"],["class","col-12",4,"ngIf"],[1,"col-md-12"],["class","text-truncate",4,"ngIf"],[1,"modal-footer"],["class","btn btn-info mr-sm-1",3,"ngbTooltip","click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["name","selectedCustomer","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","text","bsDatepicker","","name","_fdate","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","ngModelChange","bsValueChange"],["type","text","disabled","",1,"form-control",2,"background-color","rgb(235, 235, 235)",3,"ngModel","ngModelChange"],["for","status"],["id","status","name","status",1,"form-control",3,"disabled","ngModel","change","ngModelChange"],["for","Items"],["name","Items","bindValue","id","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],[1,"fa","fa-trash"],["type","text","min","1","class","form-control form-control-sm","style","width: 80px","autocomplete","off","mask","separator.2","thousandSeparator",",",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["type","text","class","form-control form-control-sm","style","width: 80px",3,"id","name","ngModel","ngModelChange","keyup.enter","change",4,"ngIf"],[1,"mute"],["class","badge badge-primary","style","cursor: pointer",3,"click",4,"ngFor","ngForOf"],[1,"text-truncate","text-center"],["type","text","mask","separator.2","thousandSeparator",",","class","form-control form-control-sm","style","width: 100px",3,"id","name","ngModel","ngModelChange","change",4,"ngIf"],["href","javascript:;",1,"text-primary",3,"click"],["type","text","min","1","autocomplete","off","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","80px",3,"id","name","ngModel","ngModelChange","change"],["type","text",1,"form-control","form-control-sm",2,"width","80px",3,"id","name","ngModel","ngModelChange","keyup.enter","change"],[1,"badge","badge-primary",2,"cursor","pointer",3,"click"],["type","text","mask","separator.2","thousandSeparator",",",1,"form-control","form-control-sm",2,"width","100px",3,"id","name","ngModel","ngModelChange","change"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],[1,"btn","btn-info","mr-sm-1",3,"ngbTooltip","click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(x.hc(0,"div",0),x.hc(1,"div",1),x.hc(2,"div",2),x.hc(3,"div",3),x.hc(4,"div",4),x.hc(5,"div",1),x.hc(6,"div",5),x.hc(7,"div",6),x.hc(8,"input",7),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),x.wc(9,"translate"),x.gc(),x.bd(10,Nc,3,3,"button",8),x.bd(11,Dc,4,3,"button",9),x.bd(12,Mc,1,0,"img",10),x.gc(),x.gc(),x.hc(13,"div",11),x.hc(14,"div",12),x.hc(15,"select",13),x.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),x.hc(16,"option",14),x.dd(17,"#10"),x.gc(),x.hc(18,"option",15),x.dd(19,"#25"),x.gc(),x.hc(20,"option",16),x.dd(21,"#50"),x.gc(),x.hc(22,"option",17),x.dd(23,"#100"),x.gc(),x.gc(),x.hc(24,"select",18),x.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()}),x.hc(25,"option",19),x.dd(26),x.wc(27,"translate"),x.gc(),x.hc(28,"option",20),x.dd(29),x.wc(30,"translate"),x.gc(),x.hc(31,"option",21),x.dd(32),x.wc(33,"translate"),x.gc(),x.hc(34,"option",22),x.dd(35),x.wc(36,"translate"),x.gc(),x.hc(37,"option",23),x.dd(38),x.wc(39,"translate"),x.gc(),x.hc(40,"option",24),x.dd(41),x.wc(42,"translate"),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(43,"div",25),x.hc(44,"div",26),x.bd(45,Cc,10,20,"div",27),x.gc(),x.hc(46,"div",26),x.hc(47,"div",28),x.hc(48,"table",29),x.hc(49,"thead",30),x.hc(50,"tr"),x.hc(51,"th",31),x.dd(52,"#"),x.gc(),x.hc(53,"th",32),x.hc(54,"input",33),x.rc("change",function(e){return t.selectAll(e)}),x.gc(),x.gc(),x.hc(55,"th",34),x.dd(56),x.wc(57,"translate"),x.gc(),x.hc(58,"th",34),x.dd(59),x.wc(60,"translate"),x.gc(),x.hc(61,"th",34),x.dd(62),x.wc(63,"translate"),x.gc(),x.hc(64,"th",34),x.dd(65),x.wc(66,"translate"),x.gc(),x.hc(67,"th",34),x.dd(68),x.wc(69,"translate"),x.gc(),x.hc(70,"th",34),x.dd(71),x.wc(72,"translate"),x.gc(),x.hc(73,"th",34),x.dd(74),x.wc(75,"translate"),x.gc(),x.hc(76,"th",34),x.dd(77),x.wc(78,"translate"),x.gc(),x.hc(79,"th",34),x.dd(80),x.wc(81,"translate"),x.gc(),x.gc(),x.gc(),x.hc(82,"tbody"),x.bd(83,kc,6,3,"ng-container",35),x.bd(84,Gc,2,1,"ng-container",35),x.gc(),x.gc(),x.gc(),x.gc(),x.hc(85,"div",26),x.bd(86,Vc,10,20,"div",27),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.gc(),x.bd(87,li,113,80,"ng-template",null,36,x.cd)),2&e&&(x.Nb(8),x.Dc("placeholder",x.xc(9,28,"Search"))("ngModel",t._keyword),x.Nb(2),x.Dc("ngIf",t._authService.hasPermission("FAB-ORDER","create")),x.Nb(1),x.Dc("ngIf",t._authService.hasPermission("FAB-ORDER","report")),x.Nb(1),x.Dc("ngIf",t._isLoading),x.Nb(3),x.Dc("ngModel",t.pageSize),x.Nb(9),x.Dc("ngModel",t._keyword),x.Nb(2),x.fd(" ",x.xc(27,30,"All")," "),x.Nb(3),x.fd(" ",x.xc(30,32,"Unpaid")," "),x.Nb(3),x.fd(" ",x.xc(33,34,"Delivery-Unpaid")," "),x.Nb(3),x.fd(" ",x.xc(36,36,"Delivery-Paid")," "),x.Nb(3),x.fd(" ",x.xc(39,38,"Cancel-Unpaid")," "),x.Nb(3),x.fd(" ",x.xc(42,40,"Cancel-Refund")," "),x.Nb(4),x.Dc("ngIf",t._categories.length>0),x.Nb(9),x.Dc("disabled",0==t._categories.length)("checked",t.exportList.length==t._categories.length),x.Nb(2),x.fd(" ",x.xc(57,42,"Issue of date")," "),x.Nb(3),x.fd(" ",x.xc(60,44,"Order code")," "),x.Nb(3),x.fd(" ",x.xc(63,46,"Customers")," "),x.Nb(3),x.fd(" ",x.xc(66,48,"Phone")," "),x.Nb(3),x.fd(" ",x.xc(69,50,"Total")," "),x.Nb(3),x.fd(" ",x.xc(72,52,"Payment method")," "),x.Nb(3),x.ed(x.xc(75,54,"Status")),x.Nb(3),x.ed(x.xc(78,56,"Created by")),x.Nb(3),x.ed(x.xc(81,58,"Actions")),x.Nb(3),x.Dc("ngIf",0==t._categories.length),x.Nb(1),x.Dc("ngIf",t._categories.length>0),x.Nb(2),x.Dc("ngIf",t._categories.length>0))},directives:[o.c,o.n,o.q,r.q,o.x,o.r,o.A,T.a,r.p,C.N,o.z,o.o,o.p,I.a,o.w,k.b,k.a,ln.a],pipes:[P.c,r.f,r.g],styles:[""]}),si),data:{title:"Orders",breadcrumb:"Orders"}}]}],gi=((di=function e(){n(this,e)}).\u0275mod=x.Zb({type:di}),di.\u0275inj=x.Yb({factory:function(e){return new(e||di)},imports:[[l.h.forChild(hi)],l.h]}),di),mi=i("oOf3"),_i=i("LPYB"),pi=i("dZIy"),fi=i("+Cnu"),bi=i("K3ix"),vi=i("44PX"),yi=i("g9iH"),xi=i("arFO"),Si=i("5gP/"),wi=((ui=function e(){n(this,e)}).\u0275mod=x.Zb({type:ui}),ui.\u0275inj=x.Yb({factory:function(e){return new(e||ui)},providers:[S.a,w.a,P.d,D.a,on.a,et.a,Si.a],imports:[[r.c,o.k,gi,mi.a,_i.b,pi.a,k.c.forRoot(),T.b.forRoot(),fi.a.forRoot(),bi.a.forRoot(),P.b,vi.a.forRoot(),C.u,yi.b,xi.a,I.b,ln.b.forRoot()]]}),ui)}}])}();