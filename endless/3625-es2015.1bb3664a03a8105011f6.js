"use strict";(self.webpackChunkendless=self.webpackChunkendless||[]).push([[3625],{13625:function(t,e,i){i.r(e),i.d(e,{TasksModule:function(){return be}});var n=i(38583),s=i(49690),l=i(90217),a=i(65925),o=i(15483),r=i(58920),c=i(75690),d=i(63301),g=i(70453),u=i(72214),p=i(81946),h=i(10743),Z=i(93184),f=i(72533),_=i(3679),m=i(39895),A=i(91647),x=i(49962),T=i.n(x),q=i(65206),v=i(29022),b=i(88259),S=i.n(b),y=i(37716),w=i(75208),U=i(59543),M=i(12664),E=i(32579),C=i(39075),k=i(41365),N=i(86640),J=i(29790);function D(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",41),y.BQk()),2&t){const t=y.oxw();y.xp6(1),y.s9C("alt",t.user.name)}}function I(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",42),y.BQk()),2&t){const t=y.oxw();y.xp6(1),y.s9C("alt",t.user.name),y.Q6J("src",t.baseFolder+"/"+t.user.avatar,y.LSH)}}function O(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",44),y.BQk()),2&t){const t=y.oxw().$implicit,e=y.oxw();y.xp6(1),y.s9C("alt",t.name),y.Q6J("src",e.baseFolder+"/"+t.avatar,y.LSH)("ngbTooltip",t.name)}}function Q(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",45),y.BQk()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.s9C("alt",t.name),y.Q6J("ngbTooltip",t.name)}}function W(t,e){if(1&t&&(y.TgZ(0,"li",43),y.YNc(1,O,2,3,"ng-container",10),y.YNc(2,Q,2,2,"ng-container",10),y.qZA()),2&t){const t=e.$implicit;y.xp6(1),y.Q6J("ngIf",null!=t.avatar),y.xp6(1),y.Q6J("ngIf",null==t.avatar)}}function L(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",44),y.BQk()),2&t){const t=y.oxw().$implicit,e=y.oxw(2);y.xp6(1),y.s9C("alt",t.name),y.Q6J("src",e.baseFolder+"/"+t.avatar,y.LSH)("ngbTooltip",t.name)}}function R(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",45),y.BQk()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.s9C("alt",t.name),y.Q6J("ngbTooltip",t.name)}}function Y(t,e){if(1&t&&(y.TgZ(0,"li",43),y.YNc(1,L,2,3,"ng-container",10),y.YNc(2,R,2,2,"ng-container",10),y.qZA()),2&t){const t=e.$implicit;y.xp6(1),y.Q6J("ngIf",null!=t.avatar),y.xp6(1),y.Q6J("ngIf",null==t.avatar)}}function F(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"p"),y._uU(2),y.ALo(3,"translate"),y.qZA(),y.TgZ(4,"div",13),y.TgZ(5,"ul"),y.YNc(6,Y,3,2,"li",14),y.qZA(),y.qZA(),y.BQk()),2&t){const t=y.oxw();y.xp6(2),y.hij("",y.lcZ(3,2,"Followers"),":"),y.xp6(4),y.Q6J("ngForOf",t.ccList)}}function H(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"a",46),y.NdJ("click",function(){y.CHM(t);const e=y.oxw();return e.closeTask(e.entity)}),y._UZ(1,"i",47),y._uU(2),y.ALo(3,"translate"),y.ALo(4,"translate"),y.qZA()}2&t&&(y.xp6(2),y.AsE(" ",y.lcZ(3,2,"Close")," ",y.lcZ(4,4,"Task")," "))}function P(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li",21),y.NdJ("click",function(){return y.CHM(t),y.oxw()._createNew()}),y.TgZ(1,"a",22),y.TgZ(2,"span",23),y._UZ(3,"i",30),y._uU(4),y.ALo(5,"translate"),y.qZA(),y.qZA(),y.qZA()}2&t&&(y.xp6(4),y.hij(" ",y.lcZ(5,1,"Create new"),""))}function j(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li",26),y.NdJ("click",function(){y.CHM(t);const e=y.oxw();return e.getUserEmailv2(e.type="trash")}),y.TgZ(1,"a",27),y.TgZ(2,"span",23),y._UZ(3,"i",48),y._uU(4),y.ALo(5,"translate"),y.qZA(),y.TgZ(6,"span",25),y._uU(7),y.qZA(),y.qZA(),y.qZA()}if(2&t){const t=y.oxw();y.xp6(4),y.hij(" ",y.lcZ(5,2,"Trash"),""),y.xp6(3),y.hij("(",t._trash,")")}}function G(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li"),y.TgZ(1,"a",49),y.NdJ("click",function(){const e=y.CHM(t).$implicit,i=y.oxw(),n=y.MAs(89);return i.popupModalEdit(n,e)}),y._uU(2),y.qZA(),y.qZA()}if(2&t){const t=e.$implicit;y.xp6(2),y.Oqu(t.title)}}function B(t,e){1&t&&(y.TgZ(0,"h4",63),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&t&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"All")," "))}function $(t,e){1&t&&(y.TgZ(0,"h4",63),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&t&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"Important")," "))}function z(t,e){1&t&&(y.TgZ(0,"h4",63),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&t&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"Favourite")," "))}function K(t,e){1&t&&(y.TgZ(0,"h4",63),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&t&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"Pending")," "))}function V(t,e){1&t&&(y.TgZ(0,"h4",63),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&t&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"Trash")," "))}function X(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"i",70),y.NdJ("click",function(){y.CHM(t);const e=y.oxw().$implicit,i=y.oxw(2);return e.created_by==i.user.id?i._editComposer(e):null}),y.qZA()}}function tt(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",71),y.BQk()),2&t){const t=y.oxw().$implicit,e=y.oxw(2);y.xp6(1),y.s9C("ngbTooltip",t.name),y.Q6J("src",e.baseFolder+"/"+t.avatar,y.LSH)}}function et(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",72),y.BQk()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.s9C("ngbTooltip",t.name)}}function it(t,e){if(1&t&&y._UZ(0,"i",31),2&t){const t=y.oxw().$implicit;y.Q6J("ngClass",1==(null==t?null:t.type)?"icofont icofont-flag-alt-1 text-danger":"icofont icofont-flag-alt-1")}}function nt(t,e){if(1&t&&(y.TgZ(0,"del"),y._uU(1),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.Oqu(t.title)}}function st(t,e){if(1&t&&(y.TgZ(0,"span"),y._uU(1),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.Oqu(t.title)}}function lt(t,e){if(1&t&&(y.TgZ(0,"del"),y._UZ(1,"div",73),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.Q6J("innerHtml",t.content,y.oJD)}}function at(t,e){if(1&t&&y._UZ(0,"span",73),2&t){const t=y.oxw().$implicit;y.Q6J("innerHtml",t.content,y.oJD)}}function ot(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li"),y.TgZ(1,"i",75),y.NdJ("click",function(){const e=y.CHM(t).$implicit;return y.oxw(4)._downloadFileResult(e)}),y.qZA(),y.qZA()}}function rt(t,e){if(1&t&&(y.TgZ(0,"ul",74),y.YNc(1,ot,2,0,"li",33),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.Q6J("ngForOf",t.urls.data)}}function ct(t,e){if(1&t&&(y.TgZ(0,"del"),y._uU(1),y.ALo(2,"date"),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.Oqu(y.xi3(2,1,t.timestamp,"dd/MM/yyyy HH:mm"))}}function dt(t,e){if(1&t&&(y.TgZ(0,"span"),y._uU(1),y.ALo(2,"date"),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.Oqu(y.xi3(2,1,t.timestamp,"dd/MM/yyyy HH:mm"))}}function gt(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"tr"),y.TgZ(1,"td"),y._uU(2),y.qZA(),y.TgZ(3,"td"),y.YNc(4,X,1,0,"i",64),y.qZA(),y.TgZ(5,"td"),y.YNc(6,tt,2,2,"ng-container",10),y.YNc(7,et,2,1,"ng-container",10),y.qZA(),y.TgZ(8,"td"),y.YNc(9,it,1,1,"i",65),y._UZ(10,"i",31),y.YNc(11,nt,2,1,"del",10),y.YNc(12,st,2,1,"span",10),y.qZA(),y.TgZ(13,"td",66),y.NdJ("click",function(){const e=y.CHM(t).$implicit;return y.oxw(2).selectedUserEmail(e)}),y.YNc(14,lt,2,1,"del",10),y.YNc(15,at,1,1,"span",67),y.qZA(),y.TgZ(16,"td"),y.YNc(17,rt,2,1,"ul",68),y.qZA(),y.TgZ(18,"td",69),y.YNc(19,ct,3,4,"del",10),y.YNc(20,dt,3,4,"span",10),y.qZA(),y.qZA()}if(2&t){const t=e.$implicit,i=e.index;y.xp6(2),y.Oqu(i+1),y.xp6(2),y.Q6J("ngIf",!t.is_active),y.xp6(2),y.Q6J("ngIf",null!=t.avatar),y.xp6(1),y.Q6J("ngIf",null==t.avatar),y.xp6(2),y.Q6J("ngIf",1==t.type),y.xp6(1),y.Q6J("ngClass",t.flag_fav?"icon-star text-primary":"icon-star"),y.xp6(1),y.Q6J("ngIf",t.is_active),y.xp6(1),y.Q6J("ngIf",!t.is_active),y.xp6(2),y.Q6J("ngIf",t.is_active),y.xp6(1),y.Q6J("ngIf",!t.is_active),y.xp6(2),y.Q6J("ngIf",null!=t.urls),y.xp6(2),y.Q6J("ngIf",t.is_active),y.xp6(1),y.Q6J("ngIf",!t.is_active)}}function ut(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",50),y.TgZ(1,"div",51),y.YNc(2,B,3,3,"h4",52),y.YNc(3,$,3,3,"h4",52),y.YNc(4,z,3,3,"h4",52),y.YNc(5,K,3,3,"h4",52),y.YNc(6,V,3,3,"h4",52),y.qZA(),y.TgZ(7,"div",53),y.TgZ(8,"div",54),y.TgZ(9,"table",55),y.TgZ(10,"thead"),y.TgZ(11,"tr"),y.TgZ(12,"th",56),y._uU(13,"#"),y.qZA(),y.TgZ(14,"th",56),y._UZ(15,"i",30),y.qZA(),y.TgZ(16,"th",56),y._UZ(17,"i",57),y.qZA(),y.TgZ(18,"th",56),y._uU(19),y.ALo(20,"translate"),y.qZA(),y.TgZ(21,"th",56),y._uU(22),y.ALo(23,"translate"),y.qZA(),y.TgZ(24,"th",56),y._uU(25),y.ALo(26,"translate"),y.qZA(),y.TgZ(27,"th",56),y._uU(28),y.ALo(29,"translate"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(30,"tbody"),y.YNc(31,gt,21,13,"tr",33),y.qZA(),y.qZA(),y.qZA(),y.TgZ(32,"div",2),y.TgZ(33,"div",58),y.TgZ(34,"p",59),y._uU(35),y.ALo(36,"translate"),y.ALo(37,"translate"),y.qZA(),y.qZA(),y.TgZ(38,"div",60),y.TgZ(39,"div",61),y.TgZ(40,"pagination",62),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw().pageIndex0=e})("pageChanged",function(e){return y.CHM(t),y.oxw().pageChanged0(e)}),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA()}if(2&t){const t=y.oxw();y.xp6(2),y.Q6J("ngIf","allmail"==t.type),y.xp6(1),y.Q6J("ngIf","important"==t.type),y.xp6(1),y.Q6J("ngIf","favourite"==t.type),y.xp6(1),y.Q6J("ngIf","pending"==t.type),y.xp6(1),y.Q6J("ngIf","trash"==t.type),y.xp6(13),y.Oqu(y.lcZ(20,20,"Title")),y.xp6(3),y.Oqu(y.lcZ(23,22,"Content")),y.xp6(3),y.Oqu(y.lcZ(26,24,"Attachment")),y.xp6(3),y.Oqu(y.lcZ(29,26,"Timestamp")),y.xp6(3),y.Q6J("ngForOf",t._getlistv2),y.xp6(4),y.xDo(" ",y.lcZ(36,28,"Showing")," ",t.pageIndex0," - ",t.pageSize0," of ",t.totalRow0," ",y.lcZ(37,30,"records")," "),y.xp6(5),y.Q6J("boundaryLinks",!0)("totalItems",t.totalRow0)("ngModel",t.pageIndex0)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize0)}}function pt(t,e){1&t&&(y.ynx(0),y._uU(1),y.ALo(2,"translate"),y.BQk()),2&t&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"Send")))}function ht(t,e){1&t&&(y.ynx(0),y._uU(1),y.ALo(2,"translate"),y.BQk()),2&t&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"Loading")))}function Zt(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",85),y.TgZ(1,"label",98),y._uU(2),y.ALo(3,"translate"),y.qZA(),y.TgZ(4,"ng-select",99),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw(2).follow_users=e}),y.ALo(5,"translate"),y.ALo(6,"translate"),y.qZA(),y.qZA()}if(2&t){const t=y.oxw(2);y.xp6(2),y.Oqu(y.lcZ(3,9,"Followers")),y.xp6(2),y.Q6J("items",t._users)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",t.follow_users)("placeholder",y.lcZ(5,11,"Please choose"))("notFoundText",y.lcZ(6,13,"Not found item"))}}function ft(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",76),y.TgZ(1,"div",77),y.TgZ(2,"div",2),y.TgZ(3,"div",78),y.TgZ(4,"h4",79),y._uU(5),y.ALo(6,"translate"),y.qZA(),y.qZA(),y.TgZ(7,"div",80),y.TgZ(8,"button",81),y.NdJ("click",function(){y.CHM(t);const e=y.oxw();return e.isSave?null:e.submit()}),y._UZ(9,"i",82),y.YNc(10,pt,3,3,"ng-container",10),y.YNc(11,ht,3,3,"ng-container",10),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(12,"div",83),y.TgZ(13,"form",84),y.TgZ(14,"div",85),y.TgZ(15,"label",86),y._uU(16),y.ALo(17,"translate"),y.TgZ(18,"span",87),y._uU(19,"*"),y.qZA(),y.qZA(),y.TgZ(20,"input",88),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw().entitySub.title=e}),y.qZA(),y.qZA(),y.TgZ(21,"div",85),y.TgZ(22,"label",89),y._uU(23),y.ALo(24,"translate"),y.ALo(25,"translate"),y.qZA(),y.TgZ(26,"input",90),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw().flagShow=e}),y.qZA(),y.qZA(),y.YNc(27,Zt,7,15,"div",91),y.TgZ(28,"div",92),y.TgZ(29,"label",93),y._uU(30),y.ALo(31,"translate"),y.qZA(),y.TgZ(32,"ck-editor",94),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw().entitySub.content=e}),y.qZA(),y.qZA(),y.TgZ(33,"div",85),y.TgZ(34,"label",95),y._uU(35),y.ALo(36,"translate"),y.qZA(),y.TgZ(37,"input",96,97),y.NdJ("change",function(e){y.CHM(t);const i=y.MAs(38);return y.oxw().fileEvent(e,i)}),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA()}if(2&t){const t=y.oxw();y.xp6(5),y.Oqu(y.lcZ(6,12,"New message")),y.xp6(5),y.Q6J("ngIf",!t.isSave),y.xp6(1),y.Q6J("ngIf",t.isSave),y.xp6(5),y.hij("",y.lcZ(17,14,"Title")," "),y.xp6(4),y.Q6J("ngModel",t.entitySub.title),y.xp6(3),y.AsE(" ",y.lcZ(24,16,"Shown")," / ",y.lcZ(25,18,"Hidden"),"?"),y.xp6(3),y.Q6J("ngModel",t.flagShow),y.xp6(1),y.Q6J("ngIf",t.flagShow),y.xp6(3),y.Oqu(y.lcZ(31,20,"Description")),y.xp6(2),y.Q6J("ngModel",t.entitySub.content),y.xp6(3),y.Oqu(y.lcZ(36,22,"Attachment"))}}function _t(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",111),y.BQk()),2&t){const t=y.oxw(2);y.xp6(1),y.s9C("alt",null==t.selectEmail?null:t.selectEmail.name)}}function mt(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",112),y.BQk()),2&t){const t=y.oxw(2);y.xp6(1),y.Q6J("src",t.baseFolder+"/"+(null==t.selectEmail?null:t.selectEmail.avatar),y.LSH)}}function At(t,e){if(1&t&&(y.TgZ(0,"span"),y._uU(1),y.qZA()),2&t){const t=e.$implicit;y.xp6(1),y.hij("",t.name,", ")}}function xt(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li",121),y.TgZ(1,"img",122),y.NdJ("click",function(){const e=y.CHM(t).$implicit;return y.oxw(3)._downloadFileResult(e)}),y.qZA(),y.qZA()}}function Tt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",43),y.TgZ(2,"h6",113),y._UZ(3,"i",114),y._uU(4),y.ALo(5,"translate"),y.qZA(),y.TgZ(6,"a",115),y._UZ(7,"i",116),y._uU(8),y.ALo(9,"translate"),y.qZA(),y._UZ(10,"div",117),y.qZA(),y.TgZ(11,"div",118),y.TgZ(12,"ul",119),y.YNc(13,xt,2,0,"li",120),y.qZA(),y.qZA(),y._UZ(14,"hr"),y.BQk()),2&t){const t=y.oxw(2);y.xp6(4),y.hij(" ",y.lcZ(5,3,"Attachment")," "),y.xp6(4),y.Oqu(y.lcZ(9,5,"All")),y.xp6(5),y.Q6J("ngForOf",null==t.selectEmail?null:t.selectEmail.urls.data)}}function qt(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li"),y.TgZ(1,"a",123),y.NdJ("click",function(){y.CHM(t);const e=y.oxw(2);return e.flagReply=!e.flagReply}),y._UZ(2,"i",124),y._uU(3),y.ALo(4,"translate"),y.qZA(),y.qZA()}2&t&&(y.xp6(3),y.Oqu(y.lcZ(4,1,"Reply")))}function vt(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li"),y.TgZ(1,"a",123),y.NdJ("click",function(){y.CHM(t);const e=y.oxw(2);return e.selectedmail(null,e.selectEmail)}),y._UZ(2,"i",125),y._uU(3),y.ALo(4,"translate"),y.qZA(),y.qZA()}2&t&&(y.xp6(3),y.Oqu(y.lcZ(4,1,"Complete")))}function bt(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li"),y.TgZ(1,"a",123),y.NdJ("click",function(){y.CHM(t);const e=y.oxw(2);return e.updateType(e.selectEmail,2)}),y._UZ(2,"i",126),y._uU(3),y.ALo(4,"translate"),y.qZA(),y.qZA()}2&t&&(y.xp6(3),y.Oqu(y.lcZ(4,1,"Delete")))}function St(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li"),y.TgZ(1,"a",123),y.NdJ("click",function(){y.CHM(t);const e=y.oxw(2);return e.updateType(e.selectEmail,null)}),y._UZ(2,"i",127),y._uU(3),y.ALo(4,"translate"),y.qZA(),y.qZA()}2&t&&(y.xp6(3),y.Oqu(y.lcZ(4,1,"Recall")))}function yt(t,e){1&t&&y._UZ(0,"i",138)}function wt(t,e){1&t&&(y.ynx(0),y._uU(1),y.ALo(2,"translate"),y.BQk()),2&t&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"Processing")))}function Ut(t,e){if(1&t){const t=y.EpF();y.ynx(0),y._UZ(1,"hr"),y.TgZ(2,"div",2),y.TgZ(3,"div",128),y.TgZ(4,"div",85),y.TgZ(5,"div",129),y.TgZ(6,"input",130),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw(2).entitySubDID.content=e}),y.ALo(7,"translate"),y.qZA(),y.TgZ(8,"div",131),y.TgZ(9,"span",132),y._UZ(10,"i",133),y.TgZ(11,"input",134,135),y.NdJ("change",function(e){y.CHM(t);const i=y.MAs(12);return y.oxw(2).fileEvent1(e,i)}),y.qZA(),y.qZA(),y.TgZ(13,"span",136),y.NdJ("click",function(){y.CHM(t);const e=y.oxw(2);return e.isSaveComment?null:e.submitComment(e.selectEmail)}),y.YNc(14,yt,1,0,"i",137),y.YNc(15,wt,3,3,"ng-container",10),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.BQk()}if(2&t){const t=y.oxw(2);y.xp6(6),y.s9C("placeholder",y.lcZ(7,4,"Comment")),y.Q6J("ngModel",t.entitySubDID.content),y.xp6(8),y.Q6J("ngIf",!t.isSaveComment),y.xp6(1),y.Q6J("ngIf",t.isSaveComment)}}function Mt(t,e){1&t&&y._UZ(0,"hr")}function Et(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li",121),y.TgZ(1,"img",122),y.NdJ("click",function(){const e=y.CHM(t).$implicit;return y.oxw(4)._downloadFileResult(e)}),y.qZA(),y.qZA()}}const Ct=function(){return[]};function kt(t,e){if(1&t&&(y.TgZ(0,"tr"),y.TgZ(1,"td"),y._uU(2),y.qZA(),y.TgZ(3,"td"),y.TgZ(4,"div",118),y.TgZ(5,"ul",119),y.YNc(6,Et,2,0,"li",120),y.qZA(),y.qZA(),y.qZA(),y.TgZ(7,"td"),y._uU(8),y.qZA(),y.TgZ(9,"td"),y._uU(10),y.ALo(11,"date"),y.qZA(),y.qZA()),2&t){const t=e.$implicit;y.xp6(2),y.Oqu(t.content),y.xp6(4),y.Q6J("ngForOf",null==t.urls?y.DdM(7,Ct):t.urls.data),y.xp6(2),y.Oqu(t.name),y.xp6(2),y.hij(" ",y.xi3(11,4,t.timestamp,"dd/MM/yyyy h:mm a")," ")}}function Nt(t,e){if(1&t){const t=y.EpF();y.ynx(0),y.YNc(1,Mt,1,0,"hr",10),y.TgZ(2,"div",2),y.TgZ(3,"div",128),y.TgZ(4,"div",54),y.TgZ(5,"table",139),y.TgZ(6,"thead"),y.TgZ(7,"th"),y._uU(8),y.ALo(9,"translate"),y.qZA(),y.TgZ(10,"th"),y._uU(11),y.ALo(12,"translate"),y.qZA(),y.TgZ(13,"th"),y._uU(14),y.ALo(15,"translate"),y.qZA(),y.TgZ(16,"th"),y._uU(17),y.ALo(18,"translate"),y.qZA(),y.qZA(),y.TgZ(19,"tbody"),y.YNc(20,kt,12,8,"tr",33),y.qZA(),y.qZA(),y.qZA(),y.TgZ(21,"div",140),y.TgZ(22,"div",141),y.TgZ(23,"pagination",142),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw(2).pageIndex=e})("pageChanged",function(e){return y.CHM(t),y.oxw(2).pageChanged(e)}),y.qZA(),y.qZA(),y.TgZ(24,"div",143),y.TgZ(25,"a",144),y._uU(26),y.ALo(27,"translate"),y.ALo(28,"translate"),y.ALo(29,"translate"),y.ALo(30,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.BQk()}if(2&t){const t=y.oxw(2);y.xp6(1),y.Q6J("ngIf",!t.selectEmail.is_active),y.xp6(7),y.Oqu(y.lcZ(9,18,"Content")),y.xp6(3),y.Oqu(y.lcZ(12,20,"Attachment")),y.xp6(3),y.Oqu(y.lcZ(15,22,"Created by")),y.xp6(3),y.Oqu(y.lcZ(18,24,"CreatedDate")),y.xp6(3),y.Q6J("ngForOf",t._children),y.xp6(3),y.Q6J("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),y.xp6(3),y.Q0o("",y.lcZ(27,26,"Total of records"),": ",t.totalRow," - ",y.lcZ(28,28,"Page")," ",t.pageIndex," ",y.lcZ(29,30,"of")," ",t.totalPage," ",y.lcZ(30,32,"page"),"")}}function Jt(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",100),y.TgZ(1,"div",51),y.TgZ(2,"div",2),y.TgZ(3,"div",101),y.TgZ(4,"div",8),y.YNc(5,_t,2,1,"ng-container",10),y.YNc(6,mt,2,1,"ng-container",10),y.TgZ(7,"div",11),y.TgZ(8,"h6"),y._uU(9),y.TgZ(10,"small"),y.TgZ(11,"span",102),y._uU(12),y.ALo(13,"date"),y.qZA(),y.TgZ(14,"span",102),y._uU(15),y.ALo(16,"date"),y.qZA(),y._uU(17),y.ALo(18,"date"),y.TgZ(19,"i",103),y.NdJ("click",function(){y.CHM(t);const e=y.oxw();return e.updateType(e.selectEmail,1)}),y.qZA(),y.qZA(),y.qZA(),y.TgZ(20,"p"),y.YNc(21,At,2,1,"span",33),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(22,"div",104),y.TgZ(23,"div",105),y.TgZ(24,"p",106),y._uU(25),y.qZA(),y.TgZ(26,"i",107),y.NdJ("click",function(){y.CHM(t);const e=y.oxw();return e.addFavourite(e.selectEmail)}),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(27,"div",83),y._UZ(28,"p",108),y._UZ(29,"hr"),y.YNc(30,Tt,15,7,"ng-container",10),y.TgZ(31,"div",109),y.TgZ(32,"ul",110),y.YNc(33,qt,5,3,"li",10),y.YNc(34,vt,5,3,"li",10),y.YNc(35,bt,5,3,"li",10),y.YNc(36,St,5,3,"li",10),y.qZA(),y.qZA(),y.YNc(37,Ut,16,6,"ng-container",10),y.YNc(38,Nt,31,34,"ng-container",10),y.qZA(),y.qZA()}if(2&t){const t=y.oxw();y.xp6(5),y.Q6J("ngIf",null==(null==t.selectEmail?null:t.selectEmail.avatar)),y.xp6(1),y.Q6J("ngIf",null!=(null==t.selectEmail?null:t.selectEmail.avatar)),y.xp6(3),y.hij(" ",null==t.selectEmail?null:t.selectEmail.title," "),y.xp6(3),y.hij("(",y.xi3(13,19,null==t.selectEmail?null:t.selectEmail.timestamp,"dd/MM/yyyy"),")"),y.xp6(3),y.hij(" ",y.xi3(16,22,null==t.selectEmail?null:t.selectEmail.timestamp,"h:mm"),""),y.xp6(2),y.hij(" ",y.xi3(18,25,null==t.selectEmail?null:t.selectEmail.timestamp,"a")," "),y.xp6(2),y.Q6J("ngClass",1==(null==t.selectEmail?null:t.selectEmail.type)?"icofont icofont-flag-alt-1 text-danger":"icofont icofont-flag-alt-1"),y.xp6(2),y.Q6J("ngForOf",null==t.selectEmail?null:t.selectEmail.cc),y.xp6(4),y.Oqu(null==t.selectEmail?null:t.selectEmail.email),y.xp6(1),y.ekj("starred",t._flagFav),y.xp6(2),y.Q6J("innerHTML",null==t.selectEmail?null:t.selectEmail.content,y.oJD),y.xp6(2),y.Q6J("ngIf",null!=(null==t.selectEmail?null:t.selectEmail.urls)),y.xp6(3),y.Q6J("ngIf",!t.selectEmail.is_active),y.xp6(1),y.Q6J("ngIf",2!=(null==t.selectEmail?null:t.selectEmail.type)&&!t.selectEmail.is_active),y.xp6(1),y.Q6J("ngIf",2!=(null==t.selectEmail?null:t.selectEmail.type)&&!t.selectEmail.is_active),y.xp6(1),y.Q6J("ngIf",2==(null==t.selectEmail?null:t.selectEmail.type)),y.xp6(1),y.Q6J("ngIf",t.flagReply),y.xp6(1),y.Q6J("ngIf",t._children.length>0)}}function Dt(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",71),y.BQk()),2&t){const t=y.oxw().$implicit,e=y.oxw(2);y.xp6(1),y.s9C("ngbTooltip",t.name),y.Q6J("src",e.baseFolder+"/"+t.avatar,y.LSH)}}function It(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",72),y.BQk()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.s9C("ngbTooltip",t.name)}}function Ot(t,e){if(1&t&&y._UZ(0,"i",31),2&t){const t=y.oxw().$implicit;y.Q6J("ngClass",1==(null==t?null:t.type)?"icofont icofont-flag-alt-1 text-danger":"icofont icofont-flag-alt-1")}}function Qt(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li"),y.TgZ(1,"i",75),y.NdJ("click",function(){const e=y.CHM(t).$implicit;return y.oxw(4)._downloadFileResult(e)}),y.qZA(),y.qZA()}}function Wt(t,e){if(1&t&&(y.TgZ(0,"ul",74),y.YNc(1,Qt,2,0,"li",33),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.Q6J("ngForOf",t.urls.data)}}function Lt(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"li",121),y.TgZ(1,"img",122),y.NdJ("click",function(){const e=y.CHM(t).$implicit;return y.oxw(5)._downloadFileResult(e)}),y.qZA(),y.qZA()}}function Rt(t,e){if(1&t&&(y.TgZ(0,"tr"),y.TgZ(1,"td"),y._uU(2),y.qZA(),y.TgZ(3,"td"),y.TgZ(4,"div",118),y.TgZ(5,"ul",119),y.YNc(6,Lt,2,0,"li",120),y.qZA(),y.qZA(),y.qZA(),y.TgZ(7,"td"),y._uU(8),y.qZA(),y.TgZ(9,"td"),y._uU(10),y.ALo(11,"date"),y.qZA(),y.qZA()),2&t){const t=e.$implicit;y.xp6(2),y.Oqu(t.content),y.xp6(4),y.Q6J("ngForOf",null==t.urls?y.DdM(7,Ct):t.urls.data),y.xp6(2),y.Oqu(t.name),y.xp6(2),y.hij(" ",y.xi3(11,4,t.timestamp,"dd/MM/yyyy h:mm a")," ")}}function Yt(t,e){if(1&t&&(y.TgZ(0,"tr"),y.TgZ(1,"td",151),y.TgZ(2,"table",139),y.TgZ(3,"thead"),y.TgZ(4,"th"),y._uU(5),y.ALo(6,"translate"),y.qZA(),y.TgZ(7,"th"),y._uU(8),y.ALo(9,"translate"),y.qZA(),y.TgZ(10,"th"),y._uU(11),y.ALo(12,"translate"),y.qZA(),y.TgZ(13,"th"),y._uU(14),y.ALo(15,"translate"),y.qZA(),y.qZA(),y.TgZ(16,"tbody"),y.YNc(17,Rt,12,8,"tr",33),y.qZA(),y.qZA(),y.qZA(),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(5),y.Oqu(y.lcZ(6,5,"Content")),y.xp6(3),y.Oqu(y.lcZ(9,7,"Attachment")),y.xp6(3),y.Oqu(y.lcZ(12,9,"Created by")),y.xp6(3),y.Oqu(y.lcZ(15,11,"CreatedDate")),y.xp6(3),y.Q6J("ngForOf",t.sub_tasks)}}function Ft(t,e){if(1&t){const t=y.EpF();y.ynx(0),y.TgZ(1,"tr"),y.TgZ(2,"td"),y._uU(3),y.qZA(),y.TgZ(4,"td"),y.YNc(5,Dt,2,2,"ng-container",10),y.YNc(6,It,2,1,"ng-container",10),y.qZA(),y.TgZ(7,"td",66),y.NdJ("click",function(){const e=y.CHM(t).$implicit;return e.flag=!e.flag}),y.YNc(8,Ot,1,1,"i",65),y._UZ(9,"i",31),y._uU(10),y.qZA(),y.TgZ(11,"td",66),y.NdJ("click",function(){const e=y.CHM(t).$implicit;return e.flag=!e.flag}),y._UZ(12,"span",73),y.qZA(),y.TgZ(13,"td"),y.YNc(14,Wt,2,1,"ul",68),y.qZA(),y.TgZ(15,"td",69),y._uU(16),y.ALo(17,"date"),y.qZA(),y.qZA(),y.YNc(18,Yt,18,13,"tr",10),y.BQk()}if(2&t){const t=e.$implicit,i=e.index;y.xp6(3),y.Oqu(i+1),y.xp6(2),y.Q6J("ngIf",null!=t.avatar),y.xp6(1),y.Q6J("ngIf",null==t.avatar),y.xp6(2),y.Q6J("ngIf",1==t.type),y.xp6(1),y.Q6J("ngClass",t.flag_fav?"icon-star text-primary":"icon-star"),y.xp6(1),y.hij(" ",t.title," "),y.xp6(2),y.Q6J("innerHtml",t.content,y.oJD),y.xp6(2),y.Q6J("ngIf",null!=t.urls),y.xp6(2),y.hij(" ",y.xi3(17,10,t.timestamp,"dd/MM/yyyy HH:mm")," "),y.xp6(2),y.Q6J("ngIf",t.flag&&t.sub_tasks.length>0)}}function Ht(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",145),y.TgZ(1,"h4",146),y._uU(2),y.ALo(3,"translate"),y.qZA(),y.TgZ(4,"button",147),y.NdJ("click",function(){return y.CHM(t).$implicit.dismiss("Cross click")}),y.TgZ(5,"span",148),y._uU(6,"\xd7"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(7,"div",149),y.TgZ(8,"div",85),y.TgZ(9,"div",128),y.TgZ(10,"div",54),y.TgZ(11,"table",55),y.TgZ(12,"thead"),y.TgZ(13,"tr"),y.TgZ(14,"th",56),y._uU(15,"#"),y.qZA(),y.TgZ(16,"th",56),y._UZ(17,"i",57),y.qZA(),y.TgZ(18,"th",56),y._uU(19),y.ALo(20,"translate"),y.qZA(),y.TgZ(21,"th",56),y._uU(22),y.ALo(23,"translate"),y.qZA(),y.TgZ(24,"th",56),y._uU(25),y.ALo(26,"translate"),y.qZA(),y.TgZ(27,"th",56),y._uU(28),y.ALo(29,"translate"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(30,"tbody"),y.YNc(31,Ft,19,13,"ng-container",33),y.qZA(),y.qZA(),y.qZA(),y.TgZ(32,"div",2),y.TgZ(33,"div",58),y.TgZ(34,"p",59),y._uU(35),y.ALo(36,"translate"),y.ALo(37,"translate"),y.qZA(),y.qZA(),y.TgZ(38,"div",60),y.TgZ(39,"div",61),y.TgZ(40,"pagination",150),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw().pageIndex1=e})("pageChanged",function(e){return y.CHM(t),y.oxw().pageChanged1(e)}),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA()}if(2&t){const t=y.oxw();y.xp6(2),y.hij(" ",y.lcZ(3,16,"Related task")," "),y.xp6(17),y.Oqu(y.lcZ(20,18,"Title")),y.xp6(3),y.Oqu(y.lcZ(23,20,"Content")),y.xp6(3),y.Oqu(y.lcZ(26,22,"Attachment")),y.xp6(3),y.Oqu(y.lcZ(29,24,"Timestamp")),y.xp6(3),y.Q6J("ngForOf",t._getlistv3),y.xp6(4),y.xDo(" ",y.lcZ(36,26,"Showing")," ",t.pageIndex1," - ",t.pageSize1," of ",t.totalRow1," ",y.lcZ(37,28,"records")," "),y.xp6(5),y.Q6J("boundaryLinks",!0)("totalItems",t.totalRow1)("ngModel",t.pageIndex1)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize1)}}let Pt=(()=>{class t{constructor(t,e,i,n,s,l,a,o,r,c,d){this._authenService=t,this._dataService=e,this._route=i,this._notifyService=n,this._uploadService=s,this._excelService=l,this._numberFormat=a,this.modalService=o,this._utilyService=r,this.sanitizer=c,this._activatedRoute=d,this._id="",this.entity={},this.entitySub={},this.baseFolder=q.h.BASE_API,this._users=[],this.follow_users=[],this.related_users=[],this.ccList=[],this.flagShow=!1,this.filesToUpload=[],this.isSave=!1,this.getlist=[],this.getlistAll=[],this.flagReply=!1,this.pageIndex=1,this.pageSize=10,this.pageDisplay=10,this.totalRow=0,this._children=[],this.entitySubDID={},this.filesToUpload1=[],this.isSaveComment=!1,this._flagFav=!1,this._flagAllowCC=!1,this._detailId="",this.pageIndex0=1,this.pageSize0=10,this.totalRow0=0,this._getlistv2=[],this.pageIndex1=1,this.pageSize1=10,this.totalRow1=0,this._getlistv3=[],this.compose=!1,this.allEmails=A.M.Emails,this.selectedEmails=[],this.type="allmail",this._idd="",this.socket=T()(q.h.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this._activatedRoute.params.subscribe(t=>{this._id=t.id,this.loadUsersWithDept(this._id),this.loadDatav2(),this.socket.on("refreshPage",t=>{""!=this._detailId&&this.loadSubData(this._detailId)})})}loadUsersWithDept(t){let e={};e.short_code=this.user.short_code,this._dataService.post("/cat-submission/getallUsersNP",e).subscribe(e=>{this._dataService.post("/tasks/detailCount",{id:t,userid:this.user.id}).subscribe(t=>{this.entity=t.data,this.related_users=null==t.data.related_users?[]:t.data.related_users.data;let i=[];for(let e of t.data.related_users.data)e.id!=this.user.id&&i.push({id:e.id,name:e.name});let n=null==t.data.follow_users?[]:JSON.parse(t.data.follow_users);for(let l of n)if(this.user.id!=l){let t=e.data.filter(t=>t.id==l)[0];i.push({id:l,name:t.name})}let s=[];for(let l of n){this.user.id==l&&(this._flagAllowCC=!0,this.compose=!1);let t=e.data.filter(t=>t.id==l)[0];s.push({id:l,name:t.name,avatar:t.avatar})}1==t.data.is_active&&(this.compose=!1),this.ccList=s,this._users=i,this.socket.emit("refresh",{})})})}loadDetailByDID(t){console.log(t,this.compose),this._dataService.post("/tasks/detailByDID",{did:t}).subscribe(t=>{if(console.log("Detail",t),this.compose=!0,this.entitySub=t.data,t.data.cc.length>0){let e=[];for(let i of t.data.cc)e.push(i.id);this.follow_users=e,this.flagShow=!0}else this.follow_users=[],this.flagShow=!1})}fileEvent(t,e){this.filesToUpload=t.target.files,this._files=e}submit(){this.selectEmail=null,this.entitySub.follow_users=this.flagShow?JSON.stringify(this.follow_users):null,this.isSave=!0,this.entitySub.id=this._id,this.entitySub.parent_id=null,this.entitySub.created_by=this.user.id,null!=this.entitySub.did?(this.isSave=!1,0==this.filesToUpload.length?this._dataService.post("/tasks/updateDetail",this.entitySub).subscribe(t=>{this.isSave=!1,"failed"===t.result?this._notifyService.showError("en"==this.user.lang?v.W.MSG_UPDATENO_EN:v.W.MSG_UPDATENO,"en"==this.user.lang?v.W.error_title_en:v.W.error_title):(this.entitySub={},this.entitySub.title=null,this.entitySub.content=null,this.follow_users=[],this.entitySub.follow_users=null,this.flagShow=!1,this.loadData(),this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),this.compose=!1)},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)}):this._processUploadDisagreeAfter(this.filesToUpload)):0==this.filesToUpload.length?(console.log("no files"),this._dataService.post("/tasks/addDetail",this.entitySub).subscribe(t=>{this.isSave=!1,"failed"===t.result?this._notifyService.showError("en"==this.user.lang?v.W.MSG_ADDNO_EN:v.W.MSG_ADDNO,"en"==this.user.lang?v.W.error_title_en:v.W.error_title):(this.entitySub={},this.entitySub.title=null,this.entitySub.content=null,this.follow_users=[],this.entitySub.follow_users=null,this.flagShow=!1,this.loadData(),this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)})):(console.log("files"),this._processUploadDisagreeAfter(this.filesToUpload))}_processUploadDisagreeAfter(t){let e={folder_name:"tasks"};e.id=this._id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+e.id+"/"+e.folder_name,t).subscribe(t=>{this.entitySub.urls={data:t.data},console.log("File path",t),null==this.entitySub.did?(console.log("add"),this._dataService.post("/tasks/addDetail",this.entitySub).subscribe(t=>{this.isSave=!1,"failed"!=t.result&&(this._files.value=[],this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),this.socket.emit("refresh",{}))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)})):(console.log("update"),this._dataService.post("/tasks/updateDetail",this.entitySub).subscribe(t=>{this.isSave=!1,"failed"!=t.result&&(this._files.value=[],this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{}))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)}))},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)})}closeTask(t){S().fire({title:"en"==this.user.lang?v.W.are_you_sure_complete_en:v.W.are_you_sure_complete,text:t.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(e=>{if(e.value){let e={};e.id=t.id,e.stat=!0,this._dataService.post("/tasks/closeTask",e).subscribe(t=>{"failed"!=t.result?(this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),this._route.navigate(["/tasks/requests"])):this._notifyService.showError("en"==this.user.lang?v.W.MSG_UPDATENO_EN:v.W.MSG_UPDATENO,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)},()=>{this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)})}})}loadData(){this._dataService.post("/tasks/getalltaskdetail",{userid:this.user.id,id:this._id}).subscribe(t=>{this.getlist=t.data.filter(t=>2!=t.type),this.getlistAll=t.data})}loadDatav2(){this._dataService.post("/tasks/getalltaskdetailv2",{userid:this.user.id,id:this._id,page:this.pageIndex0,limit:this.pageSize0,type:this.type}).subscribe(t=>{this._getlistv2=t.data,this.totalRow0=t.rowCount,this.totalPage0=t.totalPages,this._all=t.all,this._fav=t.fav,this._trash=t.trash,this._pending=t.pending,this._important=t.important})}pageChanged0(t){this.pageIndex0=t.page,this.loadDatav2()}getUserEmailv2(t){this.type=t,this.compose=!1,this.selectEmail=null,this.loadDatav2()}getUserEmail(t){let e=[];if("allmail"==t)return e=this.getlist,e;if("favourite"==t){let t=[];for(let e of this.getlistAll.filter(t=>null!=t.favorites&&2!=t.type))e.favorites.data.filter(t=>t.id==this.user.id&&t.stat).length>0&&t.push(e);return e=t,e}return"trash"===t?e=this.getlistAll.filter(t=>2==t.type):"pending"===t?e=this.getlistAll.filter(t=>(null==t.is_active||0==t.is_active)&&2!=t.type):"important"===t?e=this.getlistAll.filter(t=>1==t.type):[]}selectedUserEmail(t){this.selectEmail=t,this.flagReply=!1,null!=this.selectEmail&&(this._flagFav=null!=this.selectEmail.favorites&&this.selectEmail.favorites.data.filter(t=>t.id==this.user.id&&t.stat).length>0),this.compose=!1,this._detailId=t.did,this.loadSubData(t.did)}selectedmail(t,e){S().fire({title:"en"==this.user.lang?v.W.are_you_sure_complete_en:v.W.are_you_sure_complete,text:e.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(t=>{if(t.value){let t={};t.did=e.did,t.stat=!0,this._dataService.post("/tasks/updateStatus",t).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),this.selectEmail=t.data,this.loadUsersWithDept(this._id),this.loadData(),this.loadSubData(this._detailId)},()=>{this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)})}})}moveEmails(t){!t||this.selectedEmails.filter(e=>e.type=t)}addFavourite(t){console.log(t),this.updateFavorite(t.did,!this._flagFav)}_downloadFileResult(t){window.open(q.h.BASE_API+"/"+t,"blank")}loadSubData(t){this._dataService.post("/tasks/getalltaskdetailbydid",{did:t,page:this.pageIndex,limit:this.pageSize}).subscribe(t=>{this._children=t.data,this.totalRow=t.rowCount,this.totalPage=t.totalPages})}pageChanged(t){this.pageIndex=t.page,this.loadSubData(this._detailId)}_createNew(){this.compose=!0,this.selectEmail=null,this.entitySub={},this.entitySub.did=null,this._children=[],this.follow_users=[],this.flagShow=!1}fileEvent1(t,e){this.filesToUpload1=t.target.files,this._files1=e}submitComment(t){this.isSaveComment=!0,this.entitySubDID.id=this._id,this.entitySubDID.parent_id=t.did,this.entitySubDID.created_by=this.user.id,this.entitySubDID.title="Re: "+t.title,0==this.filesToUpload1.length?this._dataService.post("/tasks/addDetail",this.entitySubDID).subscribe(t=>{this.isSaveComment=!1,this.flagReply=!1,"failed"===t.result?this._notifyService.showError("en"==this.user.lang?v.W.MSG_ADDNO_EN:v.W.MSG_ADDNO,"en"==this.user.lang?v.W.error_title_en:v.W.error_title):(this.entitySubDID={},this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"))},()=>{this.isSaveComment=!1,this.flagReply=!1,this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)}):this._processUploadDisagreeAfter1(this.filesToUpload1,t.did)}_processUploadDisagreeAfter1(t,e){let i={folder_name:"tasks"};i.id=this._id,this._uploadService.uploadFileMulti("/services/multi-uploads/"+i.id+"/"+i.folder_name,t).subscribe(t=>{this.entitySubDID.urls={data:t.data},this._dataService.post("/tasks/addDetail",this.entitySubDID).subscribe(t=>{this.isSaveComment=!1,this.flagReply=!1,"failed"!=t.result&&(this._files1.value=[],this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),this.loadSubData(e))},()=>{this.isSaveComment=!1,this.flagReply=!1,this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)})},()=>{this.isSaveComment=!1,this.flagReply=!1,this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)})}updateFavorite(t,e){let i={};i.did=t,i.stat=e,i.userid=this.user.id,this._dataService.post("/tasks/updateFavorite",i).subscribe(e=>{"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.W.MSG_UPDATENO_EN:v.W.MSG_UPDATENO,"en"==this.user.lang?v.W.error_title_en:v.W.error_title):(this.compose=!0,this._children=[],this.selectEmail=e.data,this.loadData(),this.loadSubData(t),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"))},()=>{this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)})}updateType(t,e){this.compose=!0,this._children=[];let i={};i.did=t.did,i.type=1==t.type?null:e,this._dataService.post("/tasks/updateTypes",i).subscribe(e=>{"failed"===e.result?this._notifyService.showError("en"==this.user.lang?v.W.MSG_UPDATENO_EN:v.W.MSG_UPDATENO,"en"==this.user.lang?v.W.error_title_en:v.W.error_title):(this.loadUsersWithDept(this._id),this.loadDatav2(),this.loadSubData(t.did),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"))},()=>{this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)})}_editComposer(t){this.compose=!1,this.selectEmail=null,this.loadDetailByDID(t.did)}loadDatav3(t){this._dataService.post("/tasks/getalltaskdetailv3",{userid:this.user.id,id:t,page:this.pageIndex1,limit:this.pageSize1,type:"allmail"}).subscribe(t=>{this._getlistv3=t.data,this.totalRow1=t.rowCount,this.totalPage1=t.totalPages})}pageChanged1(t){this.pageIndex1=t.page,this.loadDatav3(this._idd)}popupModalEdit(t,e){this._idd=e.id,this.loadDatav3(e.id),this.modalService.open(t,{size:"lg",centered:!0})}}return t.\u0275fac=function(e){return new(e||t)(y.Y36(o.e),y.Y36(a.D),y.Y36(m.F0),y.Y36(w.c),y.Y36(l.C),y.Y36(s.x),y.Y36(U.p),y.Y36(M.FF),y.Y36(E.t),y.Y36(C.H7),y.Y36(m.gz))},t.\u0275cmp=y.Xpm({type:t,selectors:[["app-task-detail"]],decls:90,vars:47,consts:[[1,"container-fluid"],[1,"email-wrap"],[1,"row"],[1,"col-xl-3","col-md-6"],[1,"email-left-aside"],[1,"card"],[1,"card-body"],[1,"email-app-sidebar"],[1,"media"],[1,"media-size-email"],[4,"ngIf"],[1,"media-body"],[1,"f-w-600"],[1,"customers","d-inline-block","avatar-group"],["class","d-inline-block",4,"ngFor","ngForOf"],["role","tablist",1,"nav","main-menu"],[1,"nav-item"],["routerLink","/tasks/requests","id","pills-darkhome-tab","data-toggle","pill","role","tab","aria-controls","pills-darkhome","aria-selected","true",1,"btn-primary","btn-block","btn-mail"],[1,"icofont","icofont-rounded-double-left","mr-2"],["href","javascript:;","class","btn-success btn-block btn-mail","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",3,"click",4,"ngIf"],["class","nav-item",3,"click",4,"ngIf"],[1,"nav-item",3,"click"],["href","javascript:void(0)","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",1,"show"],[1,"title"],[1,"icon-info-alt"],[1,"badge","pull-right","digits"],[3,"click"],["href","javascript:void(0)"],[1,"icon-star"],[1,"icon-folder"],[1,"icon-pencil-alt"],[3,"ngClass"],[3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-xl-9","col-md-12"],[1,"email-right-aside"],[1,"card","email-body"],["class","pr-0 b-r-light",4,"ngIf"],["class","email-compose",4,"ngIf"],["class","email-content",4,"ngIf"],["popupRelatedTaskModal",""],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-60",3,"alt"],[1,"mr-3","rounded-circle","img-60",3,"src","alt"],[1,"d-inline-block"],[1,"img-40","rounded-circle",3,"src","alt","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"img-40","rounded-circle",3,"alt","ngbTooltip"],["href","javascript:;","id","pills-darkprofile-tab","data-toggle","pill","role","tab","aria-controls","pills-darkprofile","aria-selected","false",1,"btn-success","btn-block","btn-mail",3,"click"],[1,"icon-share","mr-2"],[1,"icon-trash"],["href","javascript:;",3,"click"],[1,"pr-0","b-r-light"],[1,"email-top"],["class","page-title",4,"ngIf"],[1,"inbox"],[1,"table-responsive"],[1,"table","table-hover"],["scope","col"],[1,"icon-image"],[1,"col-sm-5"],[1,"p-15"],[1,"col-sm-7"],[2,"float","right","padding-right","5px"],["previousText","\u2039","nextText","\u203a","firstText","\xab","name","paginationss","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"page-title"],["class","icon-pencil-alt","style","cursor: pointer",3,"click",4,"ngIf"],[3,"ngClass",4,"ngIf"],[2,"cursor","pointer",3,"click"],[3,"innerHtml",4,"ngIf"],["class","search-info",4,"ngIf"],[1,"text-right"],[1,"icon-pencil-alt",2,"cursor","pointer",3,"click"],[1,"mr-3","rounded-circle","img-30",3,"src","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-30",3,"ngbTooltip"],[3,"innerHtml"],[1,"search-info"],[1,"fa","fa-paperclip",2,"cursor","pointer",3,"click"],[1,"email-compose"],[1,"email-top","compose-border"],[1,"col-sm-8","xl-50"],[1,"mb-0"],[1,"col-sm-4","btn-middle","xl-50"],["type","button",1,"btn","btn-primary","btn-block","btn-mail","text-center","mb-0","mt-0",3,"click"],[1,"fa","fa-paper-plane","mr-2"],[1,"email-wrapper"],[1,"theme-form"],[1,"form-group"],["for","title"],[1,"text-danger"],["id","title","type","text","name","title","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","chk-hidden",1,"d-block"],["id","chk-hidden","name","chk-hidden","type","checkbox",1,"checkbox_animated",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"form-group","mb-0"],["id","content",1,"text-muted"],["name","content","id","content","skin","moono-lisa","language","en",3,"ngModel","ngModelChange"],["for","filesToUpload",1,"col-form-label","pt-0"],["id","filesToUpload","name","filesToUpload","multiple","","type","file","accept",".pdf,.doc,.docx,.png,.jpg,jpeg",1,"form-control",3,"change"],["filesToUpload",""],["for","follower"],["name","_usersCc","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange"],[1,"email-content"],[1,"col-md-6","xl-100","col-sm-12"],[1,"digits"],[2,"cursor","pointer","font-size","16pt",3,"ngClass","click"],[1,"col-md-6","col-sm-12"],[1,"float-right","d-flex"],[1,"user-emailid"],[1,"fa","fa-star-o","f-18","mt-1",2,"cursor","pointer",3,"click"],[3,"innerHTML"],[1,"action-wrapper"],[1,"actions"],["src","../../../../assets/img/icon.png",1,"mr-3","rounded-circle","img-50",3,"alt"],["alt","image",1,"mr-3","rounded-circle","img-50",3,"src"],[1,"text-muted"],[1,"icofont","icofont-clip"],["href","javascript:void(0)",1,"text-muted","text-right","right-download"],[1,"fa","fa-long-arrow-down","mr-2"],[1,"clearfix"],[1,"attachment"],[1,"list-inline"],["class","list-inline-item",4,"ngFor","ngForOf"],[1,"list-inline-item"],["src","../../../../assets/files/ico_file.png",1,"img-fluid",2,"width","20px","height","25px","cursor","pointer",3,"click"],["href","javascript:void(0)",1,"text-muted",3,"click"],[1,"fa","fa-reply","mr-2"],[1,"fa","fa-save","mr-2","text-success"],[1,"fa","fa-trash","text-danger","mr-2"],[1,"fa","fa-recycle","mr-2"],[1,"col-md-12"],[1,"input-group"],["type","text","aria-label","Recipient's username","name","comment",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"input-group-append"],[1,"input-group-text","btn-file"],[1,"icofont","icofont-attachment"],["type","file","name","filesToUpload1","multiple","","type","file","accept",".pdf,.doc,.docx,.png,.jpg,jpeg",3,"change"],["filesToUpload1",""],[1,"input-group-text",3,"click"],["class","icofont icofont-save",4,"ngIf"],[1,"icofont","icofont-save"],[1,"table","card-table","table-vcenter","text-nowrap"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["previousText","\u2039","nextText","\u203a","firstText","\xab","name","paginationss1","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],["colspan","6"]],template:function(t,e){1&t&&(y.TgZ(0,"div",0),y.TgZ(1,"div",1),y.TgZ(2,"div",2),y.TgZ(3,"div",3),y.TgZ(4,"div",4),y.TgZ(5,"div",5),y.TgZ(6,"div",6),y.TgZ(7,"div",7),y.TgZ(8,"div",8),y.TgZ(9,"div",9),y.YNc(10,D,2,1,"ng-container",10),y.YNc(11,I,2,2,"ng-container",10),y.qZA(),y.TgZ(12,"div",11),y.TgZ(13,"h6",12),y._uU(14),y.qZA(),y.TgZ(15,"p"),y._uU(16),y.qZA(),y.qZA(),y.qZA(),y.TgZ(17,"div",8),y.TgZ(18,"div",11),y.TgZ(19,"p"),y._uU(20),y.ALo(21,"translate"),y.qZA(),y.TgZ(22,"p"),y._uU(23),y.ALo(24,"translate"),y.qZA(),y.TgZ(25,"p"),y._uU(26),y.ALo(27,"translate"),y.qZA(),y.TgZ(28,"div",13),y.TgZ(29,"ul"),y.YNc(30,W,3,2,"li",14),y.qZA(),y.qZA(),y.YNc(31,F,7,4,"ng-container",10),y.qZA(),y.qZA(),y.TgZ(32,"ul",15),y.TgZ(33,"li",16),y.TgZ(34,"a",17),y._UZ(35,"i",18),y._uU(36),y.ALo(37,"translate"),y.qZA(),y.YNc(38,H,5,6,"a",19),y.qZA(),y.TgZ(39,"li"),y._UZ(40,"hr"),y.qZA(),y.YNc(41,P,6,3,"li",20),y.TgZ(42,"li",21),y.NdJ("click",function(){return e.getUserEmailv2(e.type="important")}),y.TgZ(43,"a",22),y.TgZ(44,"span",23),y._UZ(45,"i",24),y._uU(46),y.ALo(47,"translate"),y.qZA(),y.TgZ(48,"span",25),y._uU(49),y.qZA(),y.qZA(),y.qZA(),y.TgZ(50,"li",26),y.NdJ("click",function(){return e.getUserEmailv2(e.type="favourite")}),y.TgZ(51,"a",27),y.TgZ(52,"span",23),y._UZ(53,"i",28),y._uU(54),y.ALo(55,"translate"),y.qZA(),y.TgZ(56,"span",25),y._uU(57),y.qZA(),y.qZA(),y.qZA(),y.TgZ(58,"li",26),y.NdJ("click",function(){return e.getUserEmailv2(e.type="allmail")}),y.TgZ(59,"a",27),y.TgZ(60,"span",23),y._UZ(61,"i",29),y._uU(62),y.ALo(63,"translate"),y.qZA(),y.TgZ(64,"span",25),y._uU(65),y.qZA(),y.qZA(),y.qZA(),y.TgZ(66,"li",26),y.NdJ("click",function(){return e.getUserEmailv2(e.type="pending")}),y.TgZ(67,"a",27),y.TgZ(68,"span",23),y._UZ(69,"i",30),y._uU(70),y.ALo(71,"translate"),y.qZA(),y.TgZ(72,"span",31),y._uU(73),y.qZA(),y.qZA(),y.qZA(),y.YNc(74,j,8,4,"li",32),y.qZA(),y.TgZ(75,"div",8),y.TgZ(76,"div",11),y.TgZ(77,"p"),y._uU(78),y.ALo(79,"translate"),y.qZA(),y.TgZ(80,"ul"),y.YNc(81,G,3,1,"li",33),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(82,"div",34),y.TgZ(83,"div",35),y.TgZ(84,"div",36),y.YNc(85,ut,41,32,"div",37),y.YNc(86,ft,39,24,"div",38),y.YNc(87,Jt,39,28,"div",39),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.YNc(88,Ht,41,30,"ng-template",null,40,y.W1O)),2&t&&(y.xp6(10),y.Q6J("ngIf",null==e.user.avatar),y.xp6(1),y.Q6J("ngIf",null!=e.user.avatar),y.xp6(3),y.Oqu(e.user.name),y.xp6(2),y.Oqu(e.user.email),y.xp6(4),y.AsE("",y.lcZ(21,29,"Title"),": ",e.entity.title,""),y.xp6(3),y.AsE("",y.lcZ(24,31,"Content"),": ",e.entity.description,""),y.xp6(3),y.hij("",y.lcZ(27,33,"Assigned to"),":"),y.xp6(4),y.Q6J("ngForOf",e.related_users),y.xp6(1),y.Q6J("ngIf",e.ccList.length>0),y.xp6(5),y.hij(" ",y.lcZ(37,35,"Return")," "),y.xp6(2),y.Q6J("ngIf",0==e.entity.is_active),y.xp6(3),y.Q6J("ngIf",!e._flagAllowCC&&1!=e.entity.is_active),y.xp6(5),y.hij(" ",y.lcZ(47,37,"Important"),""),y.xp6(3),y.hij("(",e._important,")"),y.xp6(5),y.hij(" ",y.lcZ(55,39,"Favourite"),""),y.xp6(3),y.hij("(",e._fav,")"),y.xp6(5),y.hij(" ",y.lcZ(63,41,"All"),""),y.xp6(3),y.hij("(",e._all,")"),y.xp6(5),y.hij(" ",y.lcZ(71,43,"Pending"),""),y.xp6(2),y.Q6J("ngClass",0==e._pending?"badge pull-right digits":"badge pull-right text-danger digits"),y.xp6(1),y.hij("(",e._pending,")"),y.xp6(1),y.Q6J("ngIf",!e._flagAllowCC),y.xp6(4),y.hij("",y.lcZ(79,45,"Related task"),":"),y.xp6(3),y.Q6J("ngForOf",e.entity.branches),y.xp6(4),y.Q6J("ngIf",!e.compose&&null==e.selectEmail),y.xp6(1),y.Q6J("ngIf",e.compose&&null==e.selectEmail),y.xp6(1),y.Q6J("ngIf",null!=e.selectEmail))},directives:[n.O5,n.sg,m.yS,n.mk,M._L,u.Qt,_.JJ,_.On,_._Y,_.JL,_.F,_.Fj,_.Q7,_.Wl,k.u,N.w9],pipes:[J.X$,n.uU],styles:[".btn-file[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;text-align:right;opacity:0;outline:none;background:#fff;cursor:pointer;display:block}"]}),t})();var jt=i(16738),Gt=i(21388);function Bt(t,e){1&t&&y._UZ(0,"img",31)}function $t(t,e){1&t&&(y.ynx(0),y.TgZ(1,"tr"),y.TgZ(2,"td",32),y.TgZ(3,"h3",33),y._uU(4),y.ALo(5,"translate"),y.qZA(),y.qZA(),y.qZA(),y.BQk()),2&t&&(y.xp6(4),y.hij(" ",y.lcZ(5,1,"No records now!!!")," "))}function zt(t,e){if(1&t&&(y.ynx(0),y._uU(1),y.ALo(2,"date"),y.BQk()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.Oqu(y.xi3(2,1,t.valid_date,"dd/MM/yyyy HH:mm"))}}function Kt(t,e){1&t&&(y.ynx(0),y._uU(1),y.ALo(2,"translate"),y.BQk()),2&t&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"Indefinite")))}function Vt(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",45),y.BQk()),2&t){const t=y.oxw().$implicit,e=y.oxw(3);y.xp6(1),y.s9C("alt",t.name),y.Q6J("src",e.baseFolder+"/"+t.avatar,y.LSH)("ngbTooltip",t.name)}}function Xt(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",46),y.BQk()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.s9C("alt",t.name),y.Q6J("ngbTooltip",t.name)}}function te(t,e){if(1&t&&(y.TgZ(0,"li",44),y.YNc(1,Vt,2,3,"ng-container",28),y.YNc(2,Xt,2,2,"ng-container",28),y.qZA()),2&t){const t=e.$implicit;y.xp6(1),y.Q6J("ngIf",null!=t.avatar),y.xp6(1),y.Q6J("ngIf",null==t.avatar)}}function ee(t,e){if(1&t&&(y.TgZ(0,"div",42),y.TgZ(1,"ul"),y.YNc(2,te,3,2,"li",43),y.qZA(),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(2),y.Q6J("ngForOf",t.related_users.data)}}function ie(t,e){1&t&&(y.TgZ(0,"span",47),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&t&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"Opening")))}function ne(t,e){1&t&&(y.TgZ(0,"span",48),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&t&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"Completed")))}function se(t,e){1&t&&(y.TgZ(0,"span",49),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&t&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"Cancel")))}function le(t,e){if(1&t&&(y.TgZ(0,"span"),y._uU(1),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.hij(" ",t.total_time,"h ")}}function ae(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"button",53),y.NdJ("click",function(){y.CHM(t);const e=y.oxw(2).$implicit;return y.oxw().deleteItem(e)}),y.ALo(1,"translate"),y._UZ(2,"i",54),y.qZA()}2&t&&y.Q6J("ngbTooltip",y.lcZ(1,1,"Delete"))}function oe(t,e){if(1&t){const t=y.EpF();y.ynx(0),y.TgZ(1,"button",50),y.NdJ("click",function(){y.CHM(t);const e=y.oxw().$implicit,i=y.oxw(),n=y.MAs(81);return i._openModal(n,e)}),y.ALo(2,"translate"),y._UZ(3,"i",51),y.qZA(),y.YNc(4,ae,3,3,"button",52),y.BQk()}if(2&t){const t=y.oxw().$implicit;y.xp6(1),y.Q6J("ngbTooltip",y.lcZ(2,2,"Edit")),y.xp6(3),y.Q6J("ngIf",0==t.is_active)}}function re(t,e){if(1&t){const t=y.EpF();y.ynx(0),y.TgZ(1,"tr"),y.TgZ(2,"td",27),y._uU(3),y.qZA(),y.TgZ(4,"td",27),y.TgZ(5,"a",34),y._uU(6),y.qZA(),y.qZA(),y.TgZ(7,"td",27),y.YNc(8,zt,3,4,"ng-container",28),y.YNc(9,Kt,3,3,"ng-container",28),y.qZA(),y.TgZ(10,"td",27),y.YNc(11,ee,3,1,"div",35),y.qZA(),y.TgZ(12,"td",36),y.NdJ("click",function(){const e=y.CHM(t).$implicit,i=y.oxw();return 0==e.is_active?i._addReminder(e):null}),y._UZ(13,"i",37),y.ALo(14,"translate"),y.TgZ(15,"span",38),y._uU(16),y.qZA(),y.qZA(),y.TgZ(17,"td",27),y._uU(18),y.ALo(19,"translate"),y.qZA(),y.TgZ(20,"td",27),y.YNc(21,ie,3,3,"span",39),y.YNc(22,ne,3,3,"span",40),y.YNc(23,se,3,3,"span",41),y.qZA(),y.TgZ(24,"td"),y.YNc(25,le,2,1,"span",28),y.qZA(),y.TgZ(26,"td",27),y.YNc(27,oe,5,4,"ng-container",28),y.qZA(),y.qZA(),y.BQk()}if(2&t){const t=e.$implicit,i=e.index,n=y.oxw();y.xp6(3),y.hij(" ",i+1," "),y.xp6(2),y.MGl("routerLink","/tasks/requests/detail/",t.id,""),y.xp6(1),y.Oqu(t.title),y.xp6(2),y.Q6J("ngIf",null!=t.valid_date),y.xp6(1),y.Q6J("ngIf",null==t.valid_date),y.xp6(2),y.Q6J("ngIf",null!=t.related_users),y.xp6(2),y.Q6J("ngbTooltip",y.lcZ(14,16,"Reminder")),y.xp6(3),y.Oqu(null==t.reminder?0:t.reminder),y.xp6(2),y.lnq(" ",y.lcZ(19,18,"Viewed")," (",t.count_view,"/",t.total_users,") "),y.xp6(3),y.Q6J("ngIf",0==t.is_active),y.xp6(1),y.Q6J("ngIf",1==t.is_active),y.xp6(1),y.Q6J("ngIf",2==t.is_active),y.xp6(2),y.Q6J("ngIf",1==t.is_active),y.xp6(2),y.Q6J("ngIf",t.created_by==n.user.id)}}function ce(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"a",77),y.NdJ("click",function(){return y.CHM(t),y.oxw(2).turnOnFlagCC()}),y._uU(1),y.ALo(2,"translate"),y.qZA()}2&t&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"Cc")))}function de(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",61),y.TgZ(1,"label",78),y._uU(2),y.ALo(3,"translate"),y.qZA(),y.TgZ(4,"ng-select",79),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw(2).follow_users=e}),y.ALo(5,"translate"),y.ALo(6,"translate"),y.qZA(),y.qZA()}if(2&t){const t=y.oxw(2);y.xp6(2),y.Oqu(y.lcZ(3,10,"Followers")),y.xp6(2),y.Q6J("items",t._usersCc)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",t.follow_users)("placeholder",y.lcZ(5,12,"Please choose"))("notFoundText",y.lcZ(6,14,"Not found item"))("disabled",0!=t.entity.is_active)}}function ge(t,e){1&t&&(y.ynx(0),y.TgZ(1,"a",80),y._UZ(2,"img",81),y._uU(3),y.ALo(4,"translate"),y.qZA(),y.BQk()),2&t&&(y.xp6(3),y.hij(" ",y.lcZ(4,1,"Processing")," "))}function ue(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"button",83),y.NdJ("click",function(){return y.CHM(t),y.oxw(3).saveChange()}),y._uU(1),y.ALo(2,"translate"),y.qZA()}2&t&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"Save")," "))}function pe(t,e){if(1&t&&(y.ynx(0),y.YNc(1,ue,3,3,"button",82),y.BQk()),2&t){const t=y.oxw(2);y.xp6(1),y.Q6J("ngIf",!t.isSave)}}const he=function(){return{dateInputFormat:"DD-MM-YYYY HH:mm:ss",containerClass:"theme-dark-blue"}};function Ze(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",55),y.TgZ(1,"h4",56),y._uU(2),y.ALo(3,"translate"),y.qZA(),y.TgZ(4,"button",57),y.NdJ("click",function(){return y.CHM(t).$implicit.dismiss("Cross click")}),y.TgZ(5,"span",58),y._uU(6,"\xd7"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(7,"div",59),y.TgZ(8,"div",60),y.TgZ(9,"div",61),y.TgZ(10,"label",62),y._uU(11),y.ALo(12,"translate"),y.TgZ(13,"span",33),y._uU(14,"*"),y.qZA(),y.qZA(),y.TgZ(15,"input",63),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw().entity.title=e}),y.qZA(),y.qZA(),y.TgZ(16,"div",61),y.TgZ(17,"label",64),y._uU(18),y.ALo(19,"translate"),y.TgZ(20,"span",33),y._uU(21,"*"),y.qZA(),y.qZA(),y.TgZ(22,"textarea",65),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw().entity.description=e}),y.qZA(),y.qZA(),y.TgZ(23,"div",61),y.TgZ(24,"label",66),y._uU(25),y.ALo(26,"translate"),y.TgZ(27,"span",67),y._uU(28,"*"),y.qZA(),y.YNc(29,ce,3,3,"a",68),y.qZA(),y.TgZ(30,"ng-select",69),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw().related_users=e})("change",function(){return y.CHM(t),y.oxw().changeUserCC()}),y.ALo(31,"translate"),y.ALo(32,"translate"),y.qZA(),y.qZA(),y.YNc(33,de,7,16,"div",70),y.TgZ(34,"div",61),y.TgZ(35,"label",71),y._uU(36),y.ALo(37,"translate"),y.qZA(),y.TgZ(38,"input",72),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw().jdate=e})("bsValueChange",function(e){return y.CHM(t),y.oxw().orgValueChange(e)}),y.ALo(39,"translate"),y.qZA(),y.qZA(),y.TgZ(40,"div",61),y.TgZ(41,"label",73),y._uU(42),y.ALo(43,"translate"),y.qZA(),y.TgZ(44,"nz-tree-select",74),y.NdJ("ngModelChange",function(e){return y.CHM(t),y.oxw()._parentIds=e}),y.ALo(45,"translate"),y.ALo(46,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(47,"div",75),y.TgZ(48,"button",76),y.NdJ("click",function(){return y.CHM(t).$implicit.dismiss("Cross click")}),y._uU(49),y.ALo(50,"translate"),y.qZA(),y.YNc(51,ge,5,3,"ng-container",28),y.YNc(52,pe,2,1,"ng-container",28),y.qZA()}if(2&t){const t=y.oxw();y.xp6(2),y.AsE(" ",y.lcZ(3,35,"ADD"==t._flagModal?"Add new":"Update")," ",t._title," "),y.xp6(9),y.hij("",y.lcZ(12,37,"Title")," "),y.xp6(4),y.Q6J("ngModel",t.entity.title)("disabled",0!=t.entity.is_active),y.xp6(3),y.hij("",y.lcZ(19,39,"Content")," "),y.xp6(4),y.Q6J("ngModel",t.entity.description)("disabled",0!=t.entity.is_active),y.xp6(3),y.hij("",y.lcZ(26,41,"Assigned to")," "),y.xp6(4),y.Q6J("ngIf",0==t.entity.is_active),y.xp6(1),y.Q6J("items",t._users)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","name")("ngModel",t.related_users)("placeholder",y.lcZ(31,43,"Please choose"))("notFoundText",y.lcZ(32,45,"Not found item"))("disabled",0!=t.entity.is_active),y.xp6(3),y.Q6J("ngIf",t.flagCc),y.xp6(3),y.Oqu(y.lcZ(37,47,"Valid date")),y.xp6(2),y.Q6J("placeholder",y.lcZ(39,49,"Indefinite"))("ngModel",t.jdate)("bsConfig",y.DdM(59,he))("disabled",0!=t.entity.is_active),y.xp6(4),y.Oqu(y.lcZ(43,51,"Related task")),y.xp6(2),y.s9C("nzPlaceHolder",y.lcZ(45,53,"Please choose")),y.hYB("nzNotFoundContent","","===>>>>"," ",y.lcZ(46,55,"No Data"),""),y.Q6J("ngModel",t._parentIds)("nzNodes",t._taskrelative)("disabled",0!=t.entity.is_active),y.xp6(5),y.hij(" ",y.lcZ(50,57,"Close")," "),y.xp6(2),y.Q6J("ngIf",t.isSave),y.xp6(1),y.Q6J("ngIf",0==t.entity.is_active)}}const fe=[{path:"",children:[{path:"requests",component:(()=>{class t{constructor(t,e,i,n,s,l,a,o,r,c){this._authenService=t,this._dataService=e,this._route=i,this._notifyService=n,this._uploadService=s,this._excelService=l,this._numberFormat=a,this.modalService=o,this._utilyService=r,this.sanitizer=c,this._keyword="",this.baseFolder=q.h.BASE_API,this._isLoading=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._requestslist=[],this._title="",this._flagModal="ADD",this.isSave=!1,this.entity={},this.related_users=[],this.follow_users=[],this._users=[],this._usersCc=[],this.jdate=null,this.flagCc=!1,this._taskrelative=[],this._parentIds=[],this.socket=T()(q.h.BASE_API)}ngOnInit(){this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadUsersWithDept(),this.socket.on("refreshPage",t=>{this.loadData()})}loadData(){this._isLoading=!0;let t={};t.page=this.pageIndex,t.limit=this.pageSize,t.filter=this._keyword,t.userid=this.user.id,this._dataService.post("/tasks/getall",t).subscribe(t=>{let e=[];for(let i of t.data){if(null!=i.related_users){let t=i.related_users.data.filter(t=>t.is_view).length;i.count_view=t,i.total_users=i.related_users.data.length}else i.count_view=0,i.total_users=0;e.push(i)}this._requestslist=e,this.totalRow=t.rowCount,this.totalPage=t.totalPages,this._isLoading=!1})}_pageSizeChange(t){this.pageSize=t.target.value,this.socket.emit("refresh",{})}pageChanged(t){this.pageIndex=t.page,this.socket.emit("refresh",{})}loadUsersWithDept(){let t={};t.short_code=this.user.short_code,this._dataService.post("/cat-submission/getallUsersNP",t).subscribe(t=>{console.log(t),this._users=t.data;let e=[];if(null!=this.entity.follow_users){for(let t of this._users)null!=this.entity.follow_users&&0==JSON.parse(this.entity.follow_users).filter(e=>e==t.id).length&&e.push(t);this._usersCc=e}else this._usersCc=this._users})}changeUserCC(){if(console.log("Before",this.related_users,this.follow_users),0==this.related_users.length)this.entity.related_users=null;else{let t=[],e=[];for(let i of this.related_users){let n=this._users.filter(t=>t.id==i)[0];t.push({id:i,name:n.name,avatar:n.avatar,is_view:!1}),e.push(i)}this.entity.related_users={data:t},this.entity.joined_users=0==e.length?null:JSON.stringify(e)}let t=[];for(let e of this._users)0==this.related_users.filter(t=>t==e.id).length&&t.push(e);this._usersCc=t}turnOnFlagCC(){if(this.flagCc=!this.flagCc,this.flagCc){let t=[];for(let e of this._users)0==this.related_users.filter(t=>t==e.id).length&&t.push(e);this._usersCc=t}}_openModal(t,e){null==e?(this.loadTaskRelative(),this._flagModal="ADD",this.entity={},this.entity.id=null,this.entity.title=null,this.entity.description=null,this.related_users=[],this.entity.related_users={data:[]},this.follow_users=[],this.jdate=null,this.entity.valid_date=null,this.entity.is_active=0,this.entity.created_by=this.user.id):(this._flagModal="UPDATE",this.loadDetailById(e.id)),this.modalService.open(t,{size:"md",centered:!0,backdrop:!1})}loadDetailById(t){this._dataService.post("/tasks/detail",{id:t}).subscribe(t=>{this.entity=t.data;let e=[];if(null!=t.data.related_users)for(let i of t.data.related_users.data)e.push(i.id);if(this.related_users=e,null!=t.data.valid_date&&(this.jdate=new Date(t.data.valid_date),this.entity.valid_date=jt(new Date(this.jdate)).format("DD/MM/YYYY HH:mm:ss")),null!=t.data.follow_users){this.flagCc=!0,this.follow_users=JSON.parse(t.data.follow_users);let e=[];for(let i of this._users)0==t.data.related_users.data.filter(t=>t.id==i.id).length&&e.push(i);this._usersCc=e}else this.flagCc=!1,this.follow_users=[];this._parentIds=null!=t.data.parent_ids?t.data.parent_ids.data:[],this.loadTaskRelative()})}orgValueChange(t){null!=t&&"Invalid date"!=t?(this.jdate=t,this.entity.valid_date=jt(this.jdate).format("YYYY-MM-DD HH:mm:ss")):(this.jdate=null,this.entity.valid_date=null)}saveChange(){this.entity.follow_users=0==this.follow_users.length?null:JSON.stringify(this.follow_users),this.isSave=!0,this.entity.parent_ids={data:this._parentIds},"ADD"==this._flagModal?this._dataService.post("/tasks/add",this.entity).subscribe(t=>{this.isSave=!1,"failed"===t.result?this._notifyService.showError("en"==this.user.lang?v.W.MSG_ADDNO_EN:v.W.MSG_ADDNO,"en"==this.user.lang?v.W.error_title_en:v.W.error_title):(this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_ADD_EN:v.W.MSG_ADD,"OK"),this.modalService.dismissAll())},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)}):this._dataService.post("/tasks/update",this.entity).subscribe(t=>{this.isSave=!1,"failed"===t.result?this._notifyService.showError("en"==this.user.lang?v.W.MSG_UPDATENO_EN:v.W.MSG_UPDATENO,"en"==this.user.lang?v.W.error_title_en:v.W.error_title):(this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),this.modalService.dismissAll())},()=>{this.isSave=!1,this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)})}_addReminder(t){S().fire({title:"en"==this.user.lang?v.W.are_you_sure2send_en:v.W.are_you_sure2send,text:t.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(e=>{e.value&&this._dataService.post("/tasks/addReminder",{id:t.id}).subscribe(t=>{this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK"),this.socket.emit("refresh",{})},()=>{this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)})})}deleteItem(t){S().fire({title:"en"==this.user.lang?v.W.are_you_sure_cancel_en:v.W.are_you_sure_cancel,text:t.title,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?v.W.cancel_en:v.W.cancel,confirmButtonText:"en"==this.user.lang?v.W.confirmtext_en:v.W.confirmtext}).then(e=>{e.value&&(t.is_active=2,this._dataService.post("/tasks/update",t).subscribe(t=>{this.socket.emit("refresh",{}),this._notifyService.showSuccess("en"==this.user.lang?v.W.MSG_UPDATE_EN:v.W.MSG_UPDATE,"OK")},()=>{this._notifyService.showError("en"==this.user.lang?v.W.MSG_ERROR_EN:v.W.MSG_ERROR,"en"==this.user.lang?v.W.error_title_en:v.W.error_title)}))})}loadTaskRelative(){let t={};t.userid=this.user.id,this._dataService.post("/tasks/getallrelative",t).subscribe(t=>{let e=[];for(let n of t.data)this.entity.id!=n.id&&e.push({key:n.id,title:n.title,parent_id:null,value:n.id});let i=this._utilyService.UnflattenFunc(e);this._taskrelative=i})}}return t.\u0275fac=function(e){return new(e||t)(y.Y36(o.e),y.Y36(a.D),y.Y36(m.F0),y.Y36(w.c),y.Y36(l.C),y.Y36(s.x),y.Y36(U.p),y.Y36(M.FF),y.Y36(E.t),y.Y36(C.H7))},t.\u0275cmp=y.Xpm({type:t,selectors:[["app-task-request"]],decls:82,vars:75,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["src","../../../../assets/img/loading.gif","width","25px",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"form-control","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-body"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],["id","hor-minimalist-line-border",2,"width","100%","margin","20px 0px 20px 0px"],[1,"text-truncate",2,"width","15px"],[1,"text-truncate"],[4,"ngIf"],[4,"ngFor","ngForOf"],["popupWorkModal",""],["src","../../../../assets/img/loading.gif","width","25px"],["colspan","9",2,"text-align","center"],[1,"text-danger"],["href","javascript:;",1,"text-danger",3,"routerLink"],["class","customers d-inline-block avatar-group",4,"ngIf"],[1,"text-truncate",2,"cursor","pointer",3,"click"],[1,"fa","fa-bell-o",2,"font-size","14pt",3,"ngbTooltip"],[1,"badge-pill","badge-danger"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"customers","d-inline-block","avatar-group"],["class","d-inline-block",4,"ngFor","ngForOf"],[1,"d-inline-block"],[1,"img-40","rounded-circle",3,"src","alt","ngbTooltip"],["src","../../../../assets/img/icon.png",1,"img-40","rounded-circle",3,"alt","ngbTooltip"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"ngbTooltip","click"],[1,"icofont","icofont-pencil-alt-5"],["class","btn btn-sm btn-danger mr-sm-1",3,"ngbTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"ngbTooltip","click"],[1,"fa","fa-trash"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],[1,"col-md-12"],["for","title"],["type","text","name","title","id","title","autocomplete","off","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","description"],["id","description","rows","3","name","description","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","assignedto"],[1,"text-danger","mr-sm-2"],["href","javascript:;","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["name","_users","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","disabled","ngModelChange","change"],["class","col-md-12",4,"ngIf"],["for","validdate"],["type","text","name","jdate","bsDatepicker","","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","bsConfig","disabled","ngModelChange","bsValueChange"],["for","taskrelative"],["name","taskrelative","nzShowSearch","","nzCheckable","",2,"width","100%",3,"ngModel","nzNodes","nzPlaceHolder","disabled","nzNotFoundContent","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["href","javascript:;",1,"btn","btn-sm","btn-primary",3,"click"],["for","follower"],["name","_usersCc","bindValue","id","required","",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","disabled","ngModelChange"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",0),y.TgZ(1,"div",1),y.TgZ(2,"div",2),y.TgZ(3,"div",3),y.TgZ(4,"div",4),y.TgZ(5,"div",1),y.TgZ(6,"div",5),y.TgZ(7,"div",6),y.TgZ(8,"input",7),y.NdJ("ngModelChange",function(t){return e._keyword=t})("change",function(){return e.loadData()})("keyup.enter",function(){return e.loadData()}),y.ALo(9,"translate"),y.qZA(),y.TgZ(10,"button",8),y.NdJ("click",function(){y.CHM(t);const i=y.MAs(81);return e._openModal(i,null)}),y._uU(11),y.ALo(12,"translate"),y.qZA(),y.YNc(13,Bt,1,0,"img",9),y.qZA(),y.qZA(),y.TgZ(14,"div",10),y.TgZ(15,"div",11),y.TgZ(16,"select",12),y.NdJ("ngModelChange",function(t){return e.pageSize=t})("change",function(t){return e._pageSizeChange(t)}),y.TgZ(17,"option",13),y._uU(18,"#10"),y.qZA(),y.TgZ(19,"option",14),y._uU(20,"#25"),y.qZA(),y.TgZ(21,"option",15),y._uU(22,"#50"),y.qZA(),y.TgZ(23,"option",16),y._uU(24,"#100"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(25,"div",17),y.TgZ(26,"div",18),y.TgZ(27,"div",19),y.TgZ(28,"div",20),y.TgZ(29,"pagination",21),y.NdJ("ngModelChange",function(t){return e.pageIndex=t})("pageChanged",function(t){return e.pageChanged(t)}),y.qZA(),y.qZA(),y.TgZ(30,"div",22),y.TgZ(31,"a",23),y._uU(32),y.ALo(33,"translate"),y.ALo(34,"translate"),y.ALo(35,"translate"),y.ALo(36,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(37,"div",24),y.TgZ(38,"table",25),y.TgZ(39,"thead"),y.TgZ(40,"th",26),y._uU(41,"#"),y.qZA(),y.TgZ(42,"th",27),y._uU(43),y.ALo(44,"translate"),y.qZA(),y.TgZ(45,"th",27),y._uU(46),y.ALo(47,"translate"),y.qZA(),y.TgZ(48,"th",27),y._uU(49),y.ALo(50,"translate"),y.qZA(),y.TgZ(51,"th",27),y._uU(52),y.ALo(53,"translate"),y.qZA(),y.TgZ(54,"th",27),y._uU(55),y.ALo(56,"translate"),y.qZA(),y.TgZ(57,"th",27),y._uU(58),y.ALo(59,"translate"),y.qZA(),y.TgZ(60,"th",27),y._uU(61),y.ALo(62,"translate"),y.qZA(),y.TgZ(63,"th",27),y._uU(64),y.ALo(65,"translate"),y.qZA(),y.qZA(),y.TgZ(66,"tbody"),y.YNc(67,$t,6,3,"ng-container",28),y.YNc(68,re,28,20,"ng-container",29),y.qZA(),y.qZA(),y.qZA(),y.TgZ(69,"div",18),y.TgZ(70,"div",19),y.TgZ(71,"div",20),y.TgZ(72,"pagination",21),y.NdJ("ngModelChange",function(t){return e.pageIndex=t})("pageChanged",function(t){return e.pageChanged(t)}),y.qZA(),y.qZA(),y.TgZ(73,"div",22),y.TgZ(74,"a",23),y._uU(75),y.ALo(76,"translate"),y.ALo(77,"translate"),y.ALo(78,"translate"),y.ALo(79,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.YNc(80,Ze,53,60,"ng-template",null,30,y.W1O)}2&t&&(y.xp6(8),y.Q6J("placeholder",y.lcZ(9,39,"Search"))("ngModel",e._keyword),y.xp6(3),y.hij(" ",y.lcZ(12,41,"Add new request")," "),y.xp6(2),y.Q6J("ngIf",e._isLoading),y.xp6(3),y.Q6J("ngModel",e.pageSize),y.xp6(13),y.Q6J("boundaryLinks",!0)("totalItems",e.totalRow)("ngModel",e.pageIndex)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize),y.xp6(3),y.Q0o("",y.lcZ(33,43,"Total of records"),": ",e.totalRow," - ",y.lcZ(34,45,"Page")," ",e.pageIndex," ",y.lcZ(35,47,"of")," ",e.totalPage," ",y.lcZ(36,49,"page"),""),y.xp6(11),y.Oqu(y.lcZ(44,51,"Title")),y.xp6(3),y.hij(" ",y.lcZ(47,53,"Valid date")," "),y.xp6(3),y.hij(" ",y.lcZ(50,55,"Assigned to")," "),y.xp6(3),y.hij(" ",y.lcZ(53,57,"Reminder")," "),y.xp6(3),y.hij(" ",y.lcZ(56,59,"Joined")," "),y.xp6(3),y.Oqu(y.lcZ(59,61,"Status")),y.xp6(3),y.Oqu(y.lcZ(62,63,"Time")),y.xp6(3),y.Oqu(y.lcZ(65,65,"Actions")),y.xp6(3),y.Q6J("ngIf",0==e._requestslist.length),y.xp6(1),y.Q6J("ngForOf",e._requestslist),y.xp6(4),y.Q6J("boundaryLinks",!0)("totalItems",e.totalRow)("ngModel",e.pageIndex)("maxSize",e.pageDisplay)("itemsPerPage",e.pageSize),y.xp6(3),y.Q0o("",y.lcZ(76,67,"Total of records"),": ",e.totalRow," - ",y.lcZ(77,69,"Page")," ",e.pageIndex," ",y.lcZ(78,71,"of")," ",e.totalPage," ",y.lcZ(79,73,"page"),""))},directives:[_.Fj,_.JJ,_.On,n.O5,_.EJ,_.YN,_.Kr,u.Qt,n.sg,m.yS,M._L,_.Q7,N.w9,p.Y5,p.Np,Gt.zr],pipes:[J.X$,n.uU],styles:[""]}),t})(),data:{title:"Requests",breadcrumb:"Requests"}},{path:"requests/detail/:id",component:Pt,data:{title:"Details",breadcrumb:"Details"}}]}];let _e=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({imports:[[m.Bz.forChild(fe)],m.Bz]}),t})();var me=i(25689),Ae=i(72808),xe=i(36845),Te=i(16417),qe=i(45593),ve=i(3621);let be=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({providers:[o.e,a.D,l.C,s.x,J.sK,U.p],imports:[[n.ez,_e,_.u5,f.JX,Z.m9,J.aw,h.mr,p.kn.forRoot(),u.u3.forRoot(),g.f.forRoot(),d.zk.forRoot(),Te.xc,c.P4,r.F5,me.kW,M.IJ,N.A0,Ae.yI.forRoot(),xe.Xd,qe.s8,k.d,Gt.cq,ve.xC]]}),t})()},59543:function(t,e,i){i.d(e,{p:function(){return s}});var n=i(37716);let s=(()=>{class t{transform(t){return this.localeString(t)}missingOneDecimalCheck(t){const e=(t+="").split(",")[1];return!(!e||1!==e.length)}missingAllDecimalsCheck(t){return!(t+="").split(",")[1]}missingOneDecimalCheck1(t){const e=(t+="").split(".")[1];return!(!e||1!==e.length)}missingAllDecimalsCheck1(t){return!(t+="").split(".")[1]}localeString(t){if(""===t)return"";let e,i,n,s,l,a;for(e=(t+="").split(","),i=e[0],n=e.length>1?"."+e[1]:"",s=/(\d+)(\d{3})/;s.test(i);)i=i.replace(s,"$1,$2");if(-1!==i.indexOf("."))l=i.slice(i.lastIndexOf(".")).replace(/\,/g,""),a=i.split("."),e=a[0]+l;else{if(e=i+n,this.missingOneDecimalCheck(e))return e+"0";if(this.missingAllDecimalsCheck(e))return e+""}return e}localeStringEn(t){if(""===t)return"";let e,i,n,s,l,a;for(e=(t+="").split(","),i=e[0],n=e.length>1?"."+e[1]:"",s=/(\d+)(\d{3})/;s.test(i);)i=i.replace(s,"$1,$2");if(-1!==i.indexOf("."))l=i.slice(i.lastIndexOf(".")).replace(/\,/g,""),a=i.split("."),e=a[0]+l;else{if(e=i+n,this.missingOneDecimalCheck(e))return e+"0";if(this.missingAllDecimalsCheck(e))return e+".00"}return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Yjl({name:"numberFormat",type:t,pure:!0}),t})()}}]);